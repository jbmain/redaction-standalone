(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(module,exports,__webpack_require__){module.exports=__webpack_require__("zUnb")},"3FVc":function(module,exports,__webpack_require__){module.exports=__webpack_require__("Vb5C")},"3UD+":function(module,exports){module.exports=function(originalModule){if(!originalModule.webpackPolyfill){var module=Object.create(originalModule);module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),Object.defineProperty(module,"exports",{enumerable:!0}),module.webpackPolyfill=1}return module}},ABBN:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"autoJoin",(function(){return autoJoin})),__webpack_require__.d(__webpack_exports__,"baseKeymap",(function(){return baseKeymap})),__webpack_require__.d(__webpack_exports__,"chainCommands",(function(){return chainCommands})),__webpack_require__.d(__webpack_exports__,"createParagraphNear",(function(){return createParagraphNear})),__webpack_require__.d(__webpack_exports__,"deleteSelection",(function(){return deleteSelection})),__webpack_require__.d(__webpack_exports__,"exitCode",(function(){return exitCode})),__webpack_require__.d(__webpack_exports__,"joinBackward",(function(){return joinBackward})),__webpack_require__.d(__webpack_exports__,"joinDown",(function(){return joinDown})),__webpack_require__.d(__webpack_exports__,"joinForward",(function(){return joinForward})),__webpack_require__.d(__webpack_exports__,"joinUp",(function(){return joinUp})),__webpack_require__.d(__webpack_exports__,"lift",(function(){return lift})),__webpack_require__.d(__webpack_exports__,"liftEmptyBlock",(function(){return liftEmptyBlock})),__webpack_require__.d(__webpack_exports__,"macBaseKeymap",(function(){return macBaseKeymap})),__webpack_require__.d(__webpack_exports__,"newlineInCode",(function(){return newlineInCode})),__webpack_require__.d(__webpack_exports__,"pcBaseKeymap",(function(){return pcBaseKeymap})),__webpack_require__.d(__webpack_exports__,"selectAll",(function(){return selectAll})),__webpack_require__.d(__webpack_exports__,"selectNodeBackward",(function(){return selectNodeBackward})),__webpack_require__.d(__webpack_exports__,"selectNodeForward",(function(){return selectNodeForward})),__webpack_require__.d(__webpack_exports__,"selectParentNode",(function(){return selectParentNode})),__webpack_require__.d(__webpack_exports__,"setBlockType",(function(){return setBlockType})),__webpack_require__.d(__webpack_exports__,"splitBlock",(function(){return splitBlock})),__webpack_require__.d(__webpack_exports__,"splitBlockKeepMarks",(function(){return splitBlockKeepMarks})),__webpack_require__.d(__webpack_exports__,"toggleMark",(function(){return toggleMark})),__webpack_require__.d(__webpack_exports__,"wrapIn",(function(){return wrapIn}));var prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("CsC6"),prosemirror_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("MEpN"),prosemirror_state__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("UxO+");function deleteSelection(state,dispatch){return!state.selection.empty&&(dispatch&&dispatch(state.tr.deleteSelection().scrollIntoView()),!0)}function joinBackward(state,dispatch,view){var $cursor=state.selection.$cursor;if(!$cursor||(view?!view.endOfTextblock("backward",state):$cursor.parentOffset>0))return!1;var $cut=findCutBefore($cursor);if(!$cut){var range=$cursor.blockRange(),target=range&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.l)(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}var before=$cut.nodeBefore;if(!before.type.spec.isolating&&deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(textblockAt(before,"end")||prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.isSelectable(before))){if(dispatch){var tr=state.tr.deleteRange($cursor.before(),$cursor.after());tr.setSelection(textblockAt(before,"end")?prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos,-1)),-1):prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(tr.doc,$cut.pos-before.nodeSize)),dispatch(tr.scrollIntoView())}return!0}return!(!before.isAtom||$cut.depth!=$cursor.depth-1||(dispatch&&dispatch(state.tr.delete($cut.pos-before.nodeSize,$cut.pos).scrollIntoView()),0))}function textblockAt(node,side){for(;node;node="start"==side?node.firstChild:node.lastChild)if(node.isTextblock)return!0;return!1}function selectNodeBackward(state,dispatch,view){var ref=state.selection,$head=ref.$head,$cut=$head;if(!ref.empty)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("backward",state):$head.parentOffset>0)return!1;$cut=findCutBefore($head)}var node=$cut&&$cut.nodeBefore;return!(!node||!prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.isSelectable(node)||(dispatch&&dispatch(state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(state.doc,$cut.pos-node.nodeSize)).scrollIntoView()),0))}function findCutBefore($pos){if(!$pos.parent.type.spec.isolating)for(var i=$pos.depth-1;i>=0;i--){if($pos.index(i)>0)return $pos.doc.resolve($pos.before(i+1));if($pos.node(i).type.spec.isolating)break}return null}function joinForward(state,dispatch,view){var $cursor=state.selection.$cursor;if(!$cursor||(view?!view.endOfTextblock("forward",state):$cursor.parentOffset<$cursor.parent.content.size))return!1;var $cut=findCutAfter($cursor);if(!$cut)return!1;var after=$cut.nodeAfter;if(deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(textblockAt(after,"start")||prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.isSelectable(after))){if(dispatch){var tr=state.tr.deleteRange($cursor.before(),$cursor.after());tr.setSelection(textblockAt(after,"start")?prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos)),1):prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(tr.doc,tr.mapping.map($cut.pos))),dispatch(tr.scrollIntoView())}return!0}return!(!after.isAtom||$cut.depth!=$cursor.depth-1||(dispatch&&dispatch(state.tr.delete($cut.pos,$cut.pos+after.nodeSize).scrollIntoView()),0))}function selectNodeForward(state,dispatch,view){var ref=state.selection,$head=ref.$head,$cut=$head;if(!ref.empty)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("forward",state):$head.parentOffset<$head.parent.content.size)return!1;$cut=findCutAfter($head)}var node=$cut&&$cut.nodeAfter;return!(!node||!prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.isSelectable(node)||(dispatch&&dispatch(state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(state.doc,$cut.pos)).scrollIntoView()),0))}function findCutAfter($pos){if(!$pos.parent.type.spec.isolating)for(var i=$pos.depth-1;i>=0;i--){var parent=$pos.node(i);if($pos.index(i)+1<parent.childCount)return $pos.doc.resolve($pos.after(i+1));if(parent.type.spec.isolating)break}return null}function joinUp(state,dispatch){var point,sel=state.selection,nodeSel=sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection;if(nodeSel){if(sel.node.isTextblock||!Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.g)(state.doc,sel.from))return!1;point=sel.from}else if(null==(point=Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.k)(state.doc,sel.from,-1)))return!1;if(dispatch){var tr=state.tr.join(point);nodeSel&&tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(tr.doc,point-state.doc.resolve(point).nodeBefore.nodeSize)),dispatch(tr.scrollIntoView())}return!0}function joinDown(state,dispatch){var point,sel=state.selection;if(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection){if(sel.node.isTextblock||!Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.g)(state.doc,sel.to))return!1;point=sel.to}else if(null==(point=Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.k)(state.doc,sel.to,1)))return!1;return dispatch&&dispatch(state.tr.join(point).scrollIntoView()),!0}function lift(state,dispatch){var ref=state.selection,range=ref.$from.blockRange(ref.$to),target=range&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.l)(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}function newlineInCode(state,dispatch){var ref=state.selection,$head=ref.$head;return!(!$head.parent.type.spec.code||!$head.sameParent(ref.$anchor)||(dispatch&&dispatch(state.tr.insertText("\n").scrollIntoView()),0))}function defaultBlockAt(match){for(var i=0;i<match.edgeCount;i++){var type=match.edge(i).type;if(type.isTextblock&&!type.hasRequiredAttrs())return type}return null}function exitCode(state,dispatch){var ref=state.selection,$head=ref.$head;if(!$head.parent.type.spec.code||!$head.sameParent(ref.$anchor))return!1;var above=$head.node(-1),after=$head.indexAfter(-1),type=defaultBlockAt(above.contentMatchAt(after));if(!above.canReplaceWith(after,after,type))return!1;if(dispatch){var pos=$head.after(),tr=state.tr.replaceWith(pos,pos,type.createAndFill());tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.Selection.near(tr.doc.resolve(pos),1)),dispatch(tr.scrollIntoView())}return!0}function createParagraphNear(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to;if($from.parent.inlineContent||$to.parent.inlineContent)return!1;var type=defaultBlockAt($from.parent.contentMatchAt($to.indexAfter()));if(!type||!type.isTextblock)return!1;if(dispatch){var side=(!$from.parentOffset&&$to.index()<$to.parent.childCount?$from:$to).pos,tr=state.tr.insert(side,type.createAndFill());tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.TextSelection.create(tr.doc,side+1)),dispatch(tr.scrollIntoView())}return!0}function liftEmptyBlock(state,dispatch){var $cursor=state.selection.$cursor;if(!$cursor||$cursor.parent.content.size)return!1;if($cursor.depth>1&&$cursor.after()!=$cursor.end(-1)){var before=$cursor.before();if(Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.h)(state.doc,before))return dispatch&&dispatch(state.tr.split(before).scrollIntoView()),!0}var range=$cursor.blockRange(),target=range&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.l)(range);return null!=target&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}function splitBlock(state,dispatch){var ref=state.selection,$from=ref.$from,$to=ref.$to;if(state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection&&state.selection.node.isBlock)return!(!$from.parentOffset||!Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.h)(state.doc,$from.pos)||(dispatch&&dispatch(state.tr.split($from.pos).scrollIntoView()),0));if(!$from.parent.isBlock)return!1;if(dispatch){var atEnd=$to.parentOffset==$to.parent.content.size,tr=state.tr;state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.TextSelection&&tr.deleteSelection();var deflt=0==$from.depth?null:defaultBlockAt($from.node(-1).contentMatchAt($from.indexAfter(-1))),types=atEnd&&deflt?[{type:deflt}]:null,can=Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.h)(tr.doc,tr.mapping.map($from.pos),1,types);types||can||!Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.h)(tr.doc,tr.mapping.map($from.pos),1,deflt&&[{type:deflt}])||(types=[{type:deflt}],can=!0),can&&(tr.split(tr.mapping.map($from.pos),1,types),atEnd||$from.parentOffset||$from.parent.type==deflt||!$from.node(-1).canReplace($from.index(-1),$from.indexAfter(-1),prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(deflt.create(),$from.parent))||tr.setNodeMarkup(tr.mapping.map($from.before()),deflt)),dispatch(tr.scrollIntoView())}return!0}function splitBlockKeepMarks(state,dispatch){return splitBlock(state,dispatch&&function(tr){var marks=state.storedMarks||state.selection.$to.parentOffset&&state.selection.$from.marks();marks&&tr.ensureMarks(marks),dispatch(tr)})}function selectParentNode(state,dispatch){var pos,ref=state.selection,$from=ref.$from,same=$from.sharedDepth(ref.to);return 0!=same&&(pos=$from.before(same),dispatch&&dispatch(state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.NodeSelection.create(state.doc,pos))),!0)}function selectAll(state,dispatch){return dispatch&&dispatch(state.tr.setSelection(new prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.AllSelection(state.doc))),!0}function deleteBarrier(state,$cut,dispatch){var conn,match,before=$cut.nodeBefore,after=$cut.nodeAfter;if(before.type.spec.isolating||after.type.spec.isolating)return!1;if(function(state,$pos,dispatch){var before=$pos.nodeBefore,after=$pos.nodeAfter,index=$pos.index();return!(!(before&&after&&before.type.compatibleContent(after.type))||(!before.content.size&&$pos.parent.canReplace(index-1,index)?(dispatch&&dispatch(state.tr.delete($pos.pos-before.nodeSize,$pos.pos).scrollIntoView()),0):!$pos.parent.canReplace(index,index+1)||!after.isTextblock&&!Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.g)(state.doc,$pos.pos)||(dispatch&&dispatch(state.tr.clearIncompatible($pos.pos,before.type,before.contentMatchAt(before.childCount)).join($pos.pos).scrollIntoView()),0)))}(state,$cut,dispatch))return!0;if($cut.parent.canReplace($cut.index(),$cut.index()+1)&&(conn=(match=before.contentMatchAt(before.childCount)).findWrapping(after.type))&&match.matchType(conn[0]||after.type).validEnd){if(dispatch){for(var end=$cut.pos+after.nodeSize,wrap=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty,i=conn.length-1;i>=0;i--)wrap=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(conn[i].create(null,wrap));wrap=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(before.copy(wrap));var tr=state.tr.step(new prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.d($cut.pos-1,end,$cut.pos,end,new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(wrap,1,0),conn.length,!0)),joinAt=end+2*conn.length;Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.g)(tr.doc,joinAt)&&tr.join(joinAt),dispatch(tr.scrollIntoView())}return!0}var selAfter=prosemirror_state__WEBPACK_IMPORTED_MODULE_2__.Selection.findFrom($cut,1),range=selAfter&&selAfter.$from.blockRange(selAfter.$to),target=range&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.l)(range);return null!=target&&target>=$cut.depth&&(dispatch&&dispatch(state.tr.lift(range,target).scrollIntoView()),!0)}function wrapIn(nodeType,attrs){return function(state,dispatch){var ref=state.selection,range=ref.$from.blockRange(ref.$to),wrapping=range&&Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.j)(range,nodeType,attrs);return!!wrapping&&(dispatch&&dispatch(state.tr.wrap(range,wrapping).scrollIntoView()),!0)}}function setBlockType(nodeType,attrs){return function(state,dispatch){var ref=state.selection,from=ref.from,to=ref.to,applicable=!1;return state.doc.nodesBetween(from,to,(function(node,pos){if(applicable)return!1;if(node.isTextblock&&!node.hasMarkup(nodeType,attrs))if(node.type==nodeType)applicable=!0;else{var $pos=state.doc.resolve(pos),index=$pos.index();applicable=$pos.parent.canReplaceWith(index,index+1,nodeType)}})),!!applicable&&(dispatch&&dispatch(state.tr.setBlockType(from,to,nodeType,attrs).scrollIntoView()),!0)}}function toggleMark(markType,attrs){return function(state,dispatch){var ref=state.selection,$cursor=ref.$cursor,ranges=ref.ranges;if(ref.empty&&!$cursor||!function(doc,ranges,type){for(var loop=function(i){var ref=ranges[i],$from=ref.$from,$to=ref.$to,can=0==$from.depth&&doc.type.allowsMarkType(type);if(doc.nodesBetween($from.pos,$to.pos,(function(node){if(can)return!1;can=node.inlineContent&&node.type.allowsMarkType(type)})),can)return{v:!0}},i=0;i<ranges.length;i++){var returned=loop(i);if(returned)return returned.v}return!1}(state.doc,ranges,markType))return!1;if(dispatch)if($cursor)markType.isInSet(state.storedMarks||$cursor.marks())?dispatch(state.tr.removeStoredMark(markType)):dispatch(state.tr.addStoredMark(markType.create(attrs)));else{for(var has=!1,tr=state.tr,i=0;!has&&i<ranges.length;i++){var ref$1=ranges[i];has=state.doc.rangeHasMark(ref$1.$from.pos,ref$1.$to.pos,markType)}for(var i$1=0;i$1<ranges.length;i$1++){var ref$2=ranges[i$1],$from$1=ref$2.$from,$to$1=ref$2.$to;has?tr.removeMark($from$1.pos,$to$1.pos,markType):tr.addMark($from$1.pos,$to$1.pos,markType.create(attrs))}dispatch(tr.scrollIntoView())}return!0}}function autoJoin(command,isJoinable){if(Array.isArray(isJoinable)){var types=isJoinable;isJoinable=function(node){return types.indexOf(node.type.name)>-1}}return function(state,dispatch){return command(state,dispatch&&function(dispatch,isJoinable){return function(tr){if(!tr.isGeneric)return dispatch(tr);for(var ranges=[],i=0;i<tr.mapping.maps.length;i++){for(var map=tr.mapping.maps[i],j=0;j<ranges.length;j++)ranges[j]=map.map(ranges[j]);map.forEach((function(_s,_e,from,to){return ranges.push(from,to)}))}for(var joinable=[],i$1=0;i$1<ranges.length;i$1+=2)for(var to=ranges[i$1+1],$from=tr.doc.resolve(ranges[i$1]),depth=$from.sharedDepth(to),parent=$from.node(depth),index=$from.indexAfter(depth),pos=$from.after(depth+1);pos<=to;++index){var after=parent.maybeChild(index);if(!after)break;if(index&&-1==joinable.indexOf(pos)){var before=parent.child(index-1);before.type==after.type&&isJoinable(before,after)&&joinable.push(pos)}pos+=after.nodeSize}joinable.sort((function(a,b){return a-b}));for(var i$2=joinable.length-1;i$2>=0;i$2--)Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_0__.g)(tr.doc,joinable[i$2])&&tr.join(joinable[i$2]);dispatch(tr)}}(dispatch,isJoinable))}}function chainCommands(){for(var commands=[],len=arguments.length;len--;)commands[len]=arguments[len];return function(state,dispatch,view){for(var i=0;i<commands.length;i++)if(commands[i](state,dispatch,view))return!0;return!1}}var backspace=chainCommands(deleteSelection,joinBackward,selectNodeBackward),del=chainCommands(deleteSelection,joinForward,selectNodeForward),pcBaseKeymap={Enter:chainCommands(newlineInCode,createParagraphNear,liftEmptyBlock,splitBlock),"Mod-Enter":exitCode,Backspace:backspace,"Mod-Backspace":backspace,Delete:del,"Mod-Delete":del,"Mod-a":selectAll},macBaseKeymap={"Ctrl-h":pcBaseKeymap.Backspace,"Alt-Backspace":pcBaseKeymap["Mod-Backspace"],"Ctrl-d":pcBaseKeymap.Delete,"Ctrl-Alt-Backspace":pcBaseKeymap["Mod-Delete"],"Alt-Delete":pcBaseKeymap["Mod-Delete"],"Alt-d":pcBaseKeymap["Mod-Delete"]};for(var key in pcBaseKeymap)macBaseKeymap[key]=pcBaseKeymap[key];var baseKeymap=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?macBaseKeymap:pcBaseKeymap},CsC6:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AddMarkStep})),__webpack_require__.d(__webpack_exports__,"b",(function(){return Mapping})),__webpack_require__.d(__webpack_exports__,"c",(function(){return RemoveMarkStep})),__webpack_require__.d(__webpack_exports__,"d",(function(){return ReplaceAroundStep})),__webpack_require__.d(__webpack_exports__,"e",(function(){return ReplaceStep})),__webpack_require__.d(__webpack_exports__,"f",(function(){return Transform})),__webpack_require__.d(__webpack_exports__,"g",(function(){return canJoin})),__webpack_require__.d(__webpack_exports__,"h",(function(){return canSplit})),__webpack_require__.d(__webpack_exports__,"i",(function(){return dropPoint})),__webpack_require__.d(__webpack_exports__,"j",(function(){return findWrapping})),__webpack_require__.d(__webpack_exports__,"k",(function(){return joinPoint})),__webpack_require__.d(__webpack_exports__,"l",(function(){return liftTarget}));var prosemirror_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("MEpN"),factor16=Math.pow(2,16);function recoverIndex(value){return 65535&value}var MapResult=function(pos,deleted,recover){void 0===deleted&&(deleted=!1),void 0===recover&&(recover=null),this.pos=pos,this.deleted=deleted,this.recover=recover},StepMap=function(ranges,inverted){void 0===inverted&&(inverted=!1),this.ranges=ranges,this.inverted=inverted};StepMap.prototype.recover=function(value){var diff=0,index=recoverIndex(value);if(!this.inverted)for(var i=0;i<index;i++)diff+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*index]+diff+function(value){return(value-(65535&value))/factor16}(value)},StepMap.prototype.mapResult=function(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!1)},StepMap.prototype.map=function(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!0)},StepMap.prototype._map=function(pos,assoc,simple){for(var diff=0,oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;var oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex],end=start+oldSize;if(pos<=end){var result=start+diff+((oldSize?pos==start?-1:pos==end?1:assoc:assoc)<0?0:newSize);return simple?result:new MapResult(result,assoc<0?pos!=start:pos!=end,pos==(assoc<0?start:end)?null:i/3+(pos-start)*factor16)}diff+=newSize-oldSize}return simple?pos+diff:new MapResult(pos+diff)},StepMap.prototype.touches=function(pos,recover){for(var diff=0,index=recoverIndex(recover),oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0;i<this.ranges.length;i+=3){var start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;var oldSize=this.ranges[i+oldIndex];if(pos<=start+oldSize&&i==3*index)return!0;diff+=this.ranges[i+newIndex]-oldSize}return!1},StepMap.prototype.forEach=function(f){for(var oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2,i=0,diff=0;i<this.ranges.length;i+=3){var start=this.ranges[i],oldStart=start-(this.inverted?diff:0),newStart=start+(this.inverted?0:diff),oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex];f(oldStart,oldStart+oldSize,newStart,newStart+newSize),diff+=newSize-oldSize}},StepMap.prototype.invert=function(){return new StepMap(this.ranges,!this.inverted)},StepMap.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},StepMap.offset=function(n){return 0==n?StepMap.empty:new StepMap(n<0?[0,-n,0]:[0,0,n])},StepMap.empty=new StepMap([]);var Mapping=function(maps,mirror,from,to){this.maps=maps||[],this.from=from||0,this.to=null==to?this.maps.length:to,this.mirror=mirror};function TransformError(message){var err=Error.call(this,message);return err.__proto__=TransformError.prototype,err}Mapping.prototype.slice=function(from,to){return void 0===from&&(from=0),void 0===to&&(to=this.maps.length),new Mapping(this.maps,this.mirror,from,to)},Mapping.prototype.copy=function(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Mapping.prototype.appendMap=function(map,mirrors){this.to=this.maps.push(map),null!=mirrors&&this.setMirror(this.maps.length-1,mirrors)},Mapping.prototype.appendMapping=function(mapping){for(var i=0,startSize=this.maps.length;i<mapping.maps.length;i++){var mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i],null!=mirr&&mirr<i?startSize+mirr:null)}},Mapping.prototype.getMirror=function(n){if(this.mirror)for(var i=0;i<this.mirror.length;i++)if(this.mirror[i]==n)return this.mirror[i+(i%2?-1:1)]},Mapping.prototype.setMirror=function(n,m){this.mirror||(this.mirror=[]),this.mirror.push(n,m)},Mapping.prototype.appendMappingInverted=function(mapping){for(var i=mapping.maps.length-1,totalSize=this.maps.length+mapping.maps.length;i>=0;i--){var mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i].invert(),null!=mirr&&mirr>i?totalSize-mirr-1:null)}},Mapping.prototype.invert=function(){var inverse=new Mapping;return inverse.appendMappingInverted(this),inverse},Mapping.prototype.map=function(pos,assoc){if(void 0===assoc&&(assoc=1),this.mirror)return this._map(pos,assoc,!0);for(var i=this.from;i<this.to;i++)pos=this.maps[i].map(pos,assoc);return pos},Mapping.prototype.mapResult=function(pos,assoc){return void 0===assoc&&(assoc=1),this._map(pos,assoc,!1)},Mapping.prototype._map=function(pos,assoc,simple){for(var deleted=!1,i=this.from;i<this.to;i++){var result=this.maps[i].mapResult(pos,assoc);if(null!=result.recover){var corr=this.getMirror(i);if(null!=corr&&corr>i&&corr<this.to){i=corr,pos=this.maps[corr].recover(result.recover);continue}}result.deleted&&(deleted=!0),pos=result.pos}return simple?pos:new MapResult(pos,deleted)},(TransformError.prototype=Object.create(Error.prototype)).constructor=TransformError,TransformError.prototype.name="TransformError";var Transform=function(doc){this.doc=doc,this.steps=[],this.docs=[],this.mapping=new Mapping},prototypeAccessors={before:{configurable:!0},docChanged:{configurable:!0}};function mustOverride(){throw new Error("Override me")}prototypeAccessors.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Transform.prototype.step=function(object){var result=this.maybeStep(object);if(result.failed)throw new TransformError(result.failed);return this},Transform.prototype.maybeStep=function(step){var result=step.apply(this.doc);return result.failed||this.addStep(step,result.doc),result},prototypeAccessors.docChanged.get=function(){return this.steps.length>0},Transform.prototype.addStep=function(step,doc){this.docs.push(this.doc),this.steps.push(step),this.mapping.appendMap(step.getMap()),this.doc=doc},Object.defineProperties(Transform.prototype,prototypeAccessors);var stepsByID=Object.create(null),Step=function(){};Step.prototype.apply=function(_doc){return mustOverride()},Step.prototype.getMap=function(){return StepMap.empty},Step.prototype.invert=function(_doc){return mustOverride()},Step.prototype.map=function(_mapping){return mustOverride()},Step.prototype.merge=function(_other){return null},Step.prototype.toJSON=function(){return mustOverride()},Step.fromJSON=function(schema,json){if(!json||!json.stepType)throw new RangeError("Invalid input for Step.fromJSON");var type=stepsByID[json.stepType];if(!type)throw new RangeError("No step type "+json.stepType+" defined");return type.fromJSON(schema,json)},Step.jsonID=function(id,stepClass){if(id in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+id);return stepsByID[id]=stepClass,stepClass.prototype.jsonID=id,stepClass};var StepResult=function(doc,failed){this.doc=doc,this.failed=failed};StepResult.ok=function(doc){return new StepResult(doc,null)},StepResult.fail=function(message){return new StepResult(null,message)},StepResult.fromReplace=function(doc,from,to,slice){try{return StepResult.ok(doc.replace(from,to,slice))}catch(e){if(e instanceof prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.ReplaceError)return StepResult.fail(e.message);throw e}};var ReplaceStep=function(Step){function ReplaceStep(from,to,slice,structure){Step.call(this),this.from=from,this.to=to,this.slice=slice,this.structure=!!structure}return Step&&(ReplaceStep.__proto__=Step),(ReplaceStep.prototype=Object.create(Step&&Step.prototype)).constructor=ReplaceStep,ReplaceStep.prototype.apply=function(doc){return this.structure&&contentBetween(doc,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(doc,this.from,this.to,this.slice)},ReplaceStep.prototype.getMap=function(){return new StepMap([this.from,this.to-this.from,this.slice.size])},ReplaceStep.prototype.invert=function(doc){return new ReplaceStep(this.from,this.from+this.slice.size,doc.slice(this.from,this.to))},ReplaceStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted?null:new ReplaceStep(from.pos,Math.max(from.pos,to.pos),this.slice)},ReplaceStep.prototype.merge=function(other){if(!(other instanceof ReplaceStep)||other.structure!=this.structure)return null;if(this.from+this.slice.size!=other.from||this.slice.openEnd||other.slice.openStart){if(other.to!=this.from||this.slice.openStart||other.slice.openEnd)return null;var slice$1=this.slice.size+other.slice.size==0?prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty:new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(other.slice.content.append(this.slice.content),other.slice.openStart,this.slice.openEnd);return new ReplaceStep(other.from,this.to,slice$1,this.structure)}var slice=this.slice.size+other.slice.size==0?prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty:new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(this.slice.content.append(other.slice.content),this.slice.openStart,other.slice.openEnd);return new ReplaceStep(this.from,this.to+(other.to-other.from),slice,this.structure)},ReplaceStep.prototype.toJSON=function(){var json={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json},ReplaceStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(json.from,json.to,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.fromJSON(schema,json.slice),!!json.structure)},ReplaceStep}(Step);Step.jsonID("replace",ReplaceStep);var ReplaceAroundStep=function(Step){function ReplaceAroundStep(from,to,gapFrom,gapTo,slice,insert,structure){Step.call(this),this.from=from,this.to=to,this.gapFrom=gapFrom,this.gapTo=gapTo,this.slice=slice,this.insert=insert,this.structure=!!structure}return Step&&(ReplaceAroundStep.__proto__=Step),(ReplaceAroundStep.prototype=Object.create(Step&&Step.prototype)).constructor=ReplaceAroundStep,ReplaceAroundStep.prototype.apply=function(doc){if(this.structure&&(contentBetween(doc,this.from,this.gapFrom)||contentBetween(doc,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");var gap=doc.slice(this.gapFrom,this.gapTo);if(gap.openStart||gap.openEnd)return StepResult.fail("Gap is not a flat range");var inserted=this.slice.insertAt(this.insert,gap.content);return inserted?StepResult.fromReplace(doc,this.from,this.to,inserted):StepResult.fail("Content does not fit in gap")},ReplaceAroundStep.prototype.getMap=function(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},ReplaceAroundStep.prototype.invert=function(doc){var gap=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+gap,this.from+this.insert,this.from+this.insert+gap,doc.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},ReplaceAroundStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1),gapFrom=mapping.map(this.gapFrom,-1),gapTo=mapping.map(this.gapTo,1);return from.deleted&&to.deleted||gapFrom<from.pos||gapTo>to.pos?null:new ReplaceAroundStep(from.pos,to.pos,gapFrom,gapTo,this.slice,this.insert,this.structure)},ReplaceAroundStep.prototype.toJSON=function(){var json={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json},ReplaceAroundStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to||"number"!=typeof json.gapFrom||"number"!=typeof json.gapTo||"number"!=typeof json.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(json.from,json.to,json.gapFrom,json.gapTo,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.fromJSON(schema,json.slice),json.insert,!!json.structure)},ReplaceAroundStep}(Step);function contentBetween(doc,from,to){for(var $from=doc.resolve(from),dist=to-from,depth=$from.depth;dist>0&&depth>0&&$from.indexAfter(depth)==$from.node(depth).childCount;)depth--,dist--;if(dist>0)for(var next=$from.node(depth).maybeChild($from.indexAfter(depth));dist>0;){if(!next||next.isLeaf)return!0;next=next.firstChild,dist--}return!1}function canCut(node,start,end){return(0==start||node.canReplace(start,node.childCount))&&(end==node.childCount||node.canReplace(0,end))}function liftTarget(range){for(var content=range.parent.content.cutByIndex(range.startIndex,range.endIndex),depth=range.depth;;--depth){var node=range.$from.node(depth),index=range.$from.index(depth),endIndex=range.$to.indexAfter(depth);if(depth<range.depth&&node.canReplace(index,endIndex,content))return depth;if(0==depth||node.type.spec.isolating||!canCut(node,index,endIndex))break}}function findWrapping(range,nodeType,attrs,innerRange){void 0===innerRange&&(innerRange=range);var around=function(range,type){var parent=range.parent,startIndex=range.startIndex,endIndex=range.endIndex,around=parent.contentMatchAt(startIndex).findWrapping(type);return around&&parent.canReplaceWith(startIndex,endIndex,around.length?around[0]:type)?around:null}(range,nodeType),inner=around&&function(range,type){var parent=range.parent,startIndex=range.startIndex,endIndex=range.endIndex,inner=parent.child(startIndex),inside=type.contentMatch.findWrapping(inner.type);if(!inside)return null;for(var innerMatch=(inside.length?inside[inside.length-1]:type).contentMatch,i=startIndex;innerMatch&&i<endIndex;i++)innerMatch=innerMatch.matchType(parent.child(i).type);return innerMatch&&innerMatch.validEnd?inside:null}(innerRange,nodeType);return inner?around.map(withAttrs).concat({type:nodeType,attrs:attrs}).concat(inner.map(withAttrs)):null}function withAttrs(type){return{type:type,attrs:null}}function canSplit(doc,pos,depth,typesAfter){void 0===depth&&(depth=1);var $pos=doc.resolve(pos),base=$pos.depth-depth,innerType=typesAfter&&typesAfter[typesAfter.length-1]||$pos.parent;if(base<0||$pos.parent.type.spec.isolating||!$pos.parent.canReplace($pos.index(),$pos.parent.childCount)||!innerType.type.validContent($pos.parent.content.cutByIndex($pos.index(),$pos.parent.childCount)))return!1;for(var d=$pos.depth-1,i=depth-2;d>base;d--,i--){var node=$pos.node(d),index$1=$pos.index(d);if(node.type.spec.isolating)return!1;var rest=node.content.cutByIndex(index$1,node.childCount),after=typesAfter&&typesAfter[i]||node;if(after!=node&&(rest=rest.replaceChild(0,after.type.create(after.attrs))),!node.canReplace(index$1+1,node.childCount)||!after.type.validContent(rest))return!1}var index=$pos.indexAfter(base),baseType=typesAfter&&typesAfter[0];return $pos.node(base).canReplaceWith(index,index,baseType?baseType.type:$pos.node(base+1).type)}function canJoin(doc,pos){var $pos=doc.resolve(pos),index=$pos.index();return joinable($pos.nodeBefore,$pos.nodeAfter)&&$pos.parent.canReplace(index,index+1)}function joinable(a,b){return a&&b&&!a.isLeaf&&a.canAppend(b)}function joinPoint(doc,pos,dir){void 0===dir&&(dir=-1);for(var $pos=doc.resolve(pos),d=$pos.depth;;d--){var before=void 0,after=void 0,index=$pos.index(d);if(d==$pos.depth?(before=$pos.nodeBefore,after=$pos.nodeAfter):dir>0?(before=$pos.node(d+1),index++,after=$pos.node(d).maybeChild(index)):(before=$pos.node(d).maybeChild(index-1),after=$pos.node(d+1)),before&&!before.isTextblock&&joinable(before,after)&&$pos.node(d).canReplace(index,index+1))return pos;if(0==d)break;pos=dir<0?$pos.before(d):$pos.after(d)}}function dropPoint(doc,pos,slice){var $pos=doc.resolve(pos);if(!slice.content.size)return pos;for(var content=slice.content,i=0;i<slice.openStart;i++)content=content.firstChild.content;for(var pass=1;pass<=(0==slice.openStart&&slice.size?2:1);pass++)for(var d=$pos.depth;d>=0;d--){var bias=d==$pos.depth?0:$pos.pos<=($pos.start(d+1)+$pos.end(d+1))/2?-1:1,insertPos=$pos.index(d)+(bias>0?1:0);if(1==pass?$pos.node(d).canReplace(insertPos,insertPos,content):$pos.node(d).contentMatchAt(insertPos).findWrapping(content.firstChild.type))return 0==bias?$pos.pos:bias<0?$pos.before(d+1):$pos.after(d+1)}return null}function mapFragment(fragment,f,parent){for(var mapped=[],i=0;i<fragment.childCount;i++){var child=fragment.child(i);child.content.size&&(child=child.copy(mapFragment(child.content,f,child))),child.isInline&&(child=f(child,parent,i)),mapped.push(child)}return prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.fromArray(mapped)}Step.jsonID("replaceAround",ReplaceAroundStep),Transform.prototype.lift=function(range,target){for(var $from=range.$from,$to=range.$to,depth=range.depth,gapStart=$from.before(depth+1),gapEnd=$to.after(depth+1),start=gapStart,end=gapEnd,before=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,openStart=0,d=depth,splitting=!1;d>target;d--)splitting||$from.index(d)>0?(splitting=!0,before=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from($from.node(d).copy(before)),openStart++):start--;for(var after=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,openEnd=0,d$1=depth,splitting$1=!1;d$1>target;d$1--)splitting$1||$to.after(d$1+1)<$to.end(d$1)?(splitting$1=!0,after=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from($to.node(d$1).copy(after)),openEnd++):end++;return this.step(new ReplaceAroundStep(start,end,gapStart,gapEnd,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(before.append(after),openStart,openEnd),before.size-openStart,!0))},Transform.prototype.wrap=function(range,wrappers){for(var content=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,i=wrappers.length-1;i>=0;i--)content=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content));var start=range.start,end=range.end;return this.step(new ReplaceAroundStep(start,end,start,end,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(content,0,0),wrappers.length,!0))},Transform.prototype.setBlockType=function(from,to,type,attrs){var this$1=this;if(void 0===to&&(to=from),!type.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var mapFrom=this.steps.length;return this.doc.nodesBetween(from,to,(function(node,pos){if(node.isTextblock&&!node.hasMarkup(type,attrs)&&function(doc,pos,type){var $pos=doc.resolve(pos),index=$pos.index();return $pos.parent.canReplaceWith(index,index+1,type)}(this$1.doc,this$1.mapping.slice(mapFrom).map(pos),type)){this$1.clearIncompatible(this$1.mapping.slice(mapFrom).map(pos,1),type);var mapping=this$1.mapping.slice(mapFrom),startM=mapping.map(pos,1),endM=mapping.map(pos+node.nodeSize,1);return this$1.step(new ReplaceAroundStep(startM,endM,startM+1,endM-1,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(type.create(attrs,null,node.marks)),0,0),1,!0)),!1}})),this},Transform.prototype.setNodeMarkup=function(pos,type,attrs,marks){var node=this.doc.nodeAt(pos);if(!node)throw new RangeError("No node at given position");type||(type=node.type);var newNode=type.create(attrs,null,marks||node.marks);if(node.isLeaf)return this.replaceWith(pos,pos+node.nodeSize,newNode);if(!type.validContent(node.content))throw new RangeError("Invalid content for node type "+type.name);return this.step(new ReplaceAroundStep(pos,pos+node.nodeSize,pos+1,pos+node.nodeSize-1,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(newNode),0,0),1,!0))},Transform.prototype.split=function(pos,depth,typesAfter){void 0===depth&&(depth=1);for(var $pos=this.doc.resolve(pos),before=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,after=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,d=$pos.depth,e=$pos.depth-depth,i=depth-1;d>e;d--,i--){before=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from($pos.node(d).copy(before));var typeAfter=typesAfter&&typesAfter[i];after=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(typeAfter?typeAfter.type.create(typeAfter.attrs,after):$pos.node(d).copy(after))}return this.step(new ReplaceStep(pos,pos,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(before.append(after),depth,depth),!0))},Transform.prototype.join=function(pos,depth){void 0===depth&&(depth=1);var step=new ReplaceStep(pos-depth,pos+depth,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty,!0);return this.step(step)};var AddMarkStep=function(Step){function AddMarkStep(from,to,mark){Step.call(this),this.from=from,this.to=to,this.mark=mark}return Step&&(AddMarkStep.__proto__=Step),(AddMarkStep.prototype=Object.create(Step&&Step.prototype)).constructor=AddMarkStep,AddMarkStep.prototype.apply=function(doc){var this$1=this,oldSlice=doc.slice(this.from,this.to),$from=doc.resolve(this.from),parent=$from.node($from.sharedDepth(this.to)),slice=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(mapFragment(oldSlice.content,(function(node,parent){return parent.type.allowsMarkType(this$1.mark.type)?node.mark(this$1.mark.addToSet(node.marks)):node}),parent),oldSlice.openStart,oldSlice.openEnd);return StepResult.fromReplace(doc,this.from,this.to,slice)},AddMarkStep.prototype.invert=function(){return new RemoveMarkStep(this.from,this.to,this.mark)},AddMarkStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new AddMarkStep(from.pos,to.pos,this.mark)},AddMarkStep.prototype.merge=function(other){if(other instanceof AddMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from)return new AddMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark)},AddMarkStep.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},AddMarkStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(json.from,json.to,schema.markFromJSON(json.mark))},AddMarkStep}(Step);Step.jsonID("addMark",AddMarkStep);var RemoveMarkStep=function(Step){function RemoveMarkStep(from,to,mark){Step.call(this),this.from=from,this.to=to,this.mark=mark}return Step&&(RemoveMarkStep.__proto__=Step),(RemoveMarkStep.prototype=Object.create(Step&&Step.prototype)).constructor=RemoveMarkStep,RemoveMarkStep.prototype.apply=function(doc){var this$1=this,oldSlice=doc.slice(this.from,this.to),slice=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(mapFragment(oldSlice.content,(function(node){return node.mark(this$1.mark.removeFromSet(node.marks))})),oldSlice.openStart,oldSlice.openEnd);return StepResult.fromReplace(doc,this.from,this.to,slice)},RemoveMarkStep.prototype.invert=function(){return new AddMarkStep(this.from,this.to,this.mark)},RemoveMarkStep.prototype.map=function(mapping){var from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new RemoveMarkStep(from.pos,to.pos,this.mark)},RemoveMarkStep.prototype.merge=function(other){if(other instanceof RemoveMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from)return new RemoveMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark)},RemoveMarkStep.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},RemoveMarkStep.fromJSON=function(schema,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(json.from,json.to,schema.markFromJSON(json.mark))},RemoveMarkStep}(Step);function fitsTrivially($from,$to,slice){return!slice.openStart&&!slice.openEnd&&$from.start()==$to.start()&&$from.parent.canReplace($from.index(),$to.index(),slice.content)}Step.jsonID("removeMark",RemoveMarkStep),Transform.prototype.addMark=function(from,to,mark){var this$1=this,removed=[],added=[],removing=null,adding=null;return this.doc.nodesBetween(from,to,(function(node,pos,parent){if(node.isInline){var marks=node.marks;if(!mark.isInSet(marks)&&parent.type.allowsMarkType(mark.type)){for(var start=Math.max(pos,from),end=Math.min(pos+node.nodeSize,to),newSet=mark.addToSet(marks),i=0;i<marks.length;i++)marks[i].isInSet(newSet)||(removing&&removing.to==start&&removing.mark.eq(marks[i])?removing.to=end:removed.push(removing=new RemoveMarkStep(start,end,marks[i])));adding&&adding.to==start?adding.to=end:added.push(adding=new AddMarkStep(start,end,mark))}}})),removed.forEach((function(s){return this$1.step(s)})),added.forEach((function(s){return this$1.step(s)})),this},Transform.prototype.removeMark=function(from,to,mark){var this$1=this;void 0===mark&&(mark=null);var matched=[],step=0;return this.doc.nodesBetween(from,to,(function(node,pos){if(node.isInline){step++;var toRemove=null;if(mark instanceof prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.MarkType){var found=mark.isInSet(node.marks);found&&(toRemove=[found])}else mark?mark.isInSet(node.marks)&&(toRemove=[mark]):toRemove=node.marks;if(toRemove&&toRemove.length)for(var end=Math.min(pos+node.nodeSize,to),i=0;i<toRemove.length;i++){for(var style=toRemove[i],found$1=void 0,j=0;j<matched.length;j++){var m=matched[j];m.step==step-1&&style.eq(matched[j].style)&&(found$1=m)}found$1?(found$1.to=end,found$1.step=step):matched.push({style:style,from:Math.max(pos,from),to:end,step:step})}}})),matched.forEach((function(m){return this$1.step(new RemoveMarkStep(m.from,m.to,m.style))})),this},Transform.prototype.clearIncompatible=function(pos,parentType,match){void 0===match&&(match=parentType.contentMatch);for(var node=this.doc.nodeAt(pos),delSteps=[],cur=pos+1,i=0;i<node.childCount;i++){var child=node.child(i),end=cur+child.nodeSize,allowed=match.matchType(child.type,child.attrs);if(allowed){match=allowed;for(var j=0;j<child.marks.length;j++)parentType.allowsMarkType(child.marks[j].type)||this.step(new RemoveMarkStep(cur,end,child.marks[j]))}else delSteps.push(new ReplaceStep(cur,end,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty));cur=end}if(!match.validEnd){var fill=match.fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,!0);this.replace(cur,cur,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(fill,0,0))}for(var i$1=delSteps.length-1;i$1>=0;i$1--)this.step(delSteps[i$1]);return this},Transform.prototype.replace=function(from,to,slice){void 0===to&&(to=from),void 0===slice&&(slice=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty);var step=function(doc,from,to,slice){if(void 0===to&&(to=from),void 0===slice&&(slice=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty),from==to&&!slice.size)return null;var $from=doc.resolve(from),$to=doc.resolve(to);return fitsTrivially($from,$to,slice)?new ReplaceStep(from,to,slice):new Fitter($from,$to,slice).fit()}(this.doc,from,to,slice);return step&&this.step(step),this},Transform.prototype.replaceWith=function(from,to,content){return this.replace(from,to,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(content),0,0))},Transform.prototype.delete=function(from,to){return this.replace(from,to,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty)},Transform.prototype.insert=function(pos,content){return this.replaceWith(pos,pos,content)};var Fitter=function($from,$to,slice){this.$to=$to,this.$from=$from,this.unplaced=slice,this.frontier=[];for(var i=0;i<=$from.depth;i++){var node=$from.node(i);this.frontier.push({type:node.type,match:node.contentMatchAt($from.indexAfter(i))})}this.placed=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty;for(var i$1=$from.depth;i$1>0;i$1--)this.placed=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from($from.node(i$1).copy(this.placed))},prototypeAccessors$1={depth:{configurable:!0}};function dropFromFragment(fragment,depth,count){return 0==depth?fragment.cutByIndex(count):fragment.replaceChild(0,fragment.firstChild.copy(dropFromFragment(fragment.firstChild.content,depth-1,count)))}function addToFragment(fragment,depth,content){return 0==depth?fragment.append(content):fragment.replaceChild(fragment.childCount-1,fragment.lastChild.copy(addToFragment(fragment.lastChild.content,depth-1,content)))}function contentAt(fragment,depth){for(var i=0;i<depth;i++)fragment=fragment.firstChild.content;return fragment}function closeNodeStart(node,openStart,openEnd){if(openStart<=0)return node;var frag=node.content;return openStart>1&&(frag=frag.replaceChild(0,closeNodeStart(frag.firstChild,openStart-1,1==frag.childCount?openEnd-1:0))),openStart>0&&(frag=node.type.contentMatch.fillBefore(frag).append(frag),openEnd<=0&&(frag=frag.append(node.type.contentMatch.matchFragment(frag).fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,!0)))),node.copy(frag)}function contentAfterFits($to,depth,type,match,open){var node=$to.node(depth),index=open?$to.indexAfter(depth):$to.index(depth);if(index==node.childCount&&!type.compatibleContent(node.type))return null;var fit=match.fillBefore(node.content,!0,index);return fit&&!function(type,fragment,start){for(var i=start;i<fragment.childCount;i++)if(!type.allowsMarks(fragment.child(i).marks))return!0;return!1}(type,node.content,index)?fit:null}function closeFragment(fragment,depth,oldOpen,newOpen,parent){if(depth<oldOpen){var first=fragment.firstChild;fragment=fragment.replaceChild(0,first.copy(closeFragment(first.content,depth+1,oldOpen,newOpen,first)))}if(depth>newOpen){var match=parent.contentMatchAt(0),start=match.fillBefore(fragment).append(fragment);fragment=start.append(match.matchFragment(start).fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,!0))}return fragment}function coveredDepths($from,$to){for(var result=[],d=Math.min($from.depth,$to.depth);d>=0;d--){var start=$from.start(d);if(start<$from.pos-($from.depth-d)||$to.end(d)>$to.pos+($to.depth-d)||$from.node(d).type.spec.isolating||$to.node(d).type.spec.isolating)break;start==$to.start(d)&&result.push(d)}return result}prototypeAccessors$1.depth.get=function(){return this.frontier.length-1},Fitter.prototype.fit=function(){for(;this.unplaced.size;){var fit=this.findFittable();fit?this.placeNodes(fit):this.openMore()||this.dropNode()}var moveInline=this.mustMoveInline(),placedSize=this.placed.size-this.depth-this.$from.depth,$from=this.$from,$to=this.close(moveInline<0?this.$to:$from.doc.resolve(moveInline));if(!$to)return null;for(var content=this.placed,openStart=$from.depth,openEnd=$to.depth;openStart&&openEnd&&1==content.childCount;)content=content.firstChild.content,openStart--,openEnd--;var slice=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(content,openStart,openEnd);return moveInline>-1?new ReplaceAroundStep($from.pos,moveInline,this.$to.pos,this.$to.end(),slice,placedSize):slice.size||$from.pos!=this.$to.pos?new ReplaceStep($from.pos,$to.pos,slice):void 0},Fitter.prototype.findFittable=function(){for(var pass=1;pass<=2;pass++)for(var sliceDepth=this.unplaced.openStart;sliceDepth>=0;sliceDepth--)for(var parent=void 0,first=(sliceDepth?(parent=contentAt(this.unplaced.content,sliceDepth-1).firstChild).content:this.unplaced.content).firstChild,frontierDepth=this.depth;frontierDepth>=0;frontierDepth--){var ref=this.frontier[frontierDepth],type=ref.type,match=ref.match,wrap=void 0,inject=void 0;if(1==pass&&(first?match.matchType(first.type)||(inject=match.fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(first),!1)):type.compatibleContent(parent.type)))return{sliceDepth:sliceDepth,frontierDepth:frontierDepth,parent:parent,inject:inject};if(2==pass&&first&&(wrap=match.findWrapping(first.type)))return{sliceDepth:sliceDepth,frontierDepth:frontierDepth,parent:parent,wrap:wrap};if(parent&&match.matchType(parent.type))break}},Fitter.prototype.openMore=function(){var ref=this.unplaced,content=ref.content,openStart=ref.openStart,openEnd=ref.openEnd,inner=contentAt(content,openStart);return!(!inner.childCount||inner.firstChild.isLeaf||(this.unplaced=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(content,openStart+1,Math.max(openEnd,inner.size+openStart>=content.size-openEnd?openStart+1:0)),0))},Fitter.prototype.dropNode=function(){var ref=this.unplaced,content=ref.content,openStart=ref.openStart,openEnd=ref.openEnd,inner=contentAt(content,openStart);if(inner.childCount<=1&&openStart>0){var openAtEnd=content.size-openStart<=openStart+inner.size;this.unplaced=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(dropFromFragment(content,openStart-1,1),openStart-1,openAtEnd?openStart-1:openEnd)}else this.unplaced=new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(dropFromFragment(content,openStart,1),openStart,openEnd)},Fitter.prototype.placeNodes=function(ref){for(var sliceDepth=ref.sliceDepth,frontierDepth=ref.frontierDepth,parent=ref.parent,inject=ref.inject,wrap=ref.wrap;this.depth>frontierDepth;)this.closeFrontierNode();if(wrap)for(var i=0;i<wrap.length;i++)this.openFrontierNode(wrap[i]);var slice=this.unplaced,fragment=parent?parent.content:slice.content,openStart=slice.openStart-sliceDepth,taken=0,add=[],ref$1=this.frontier[frontierDepth],match=ref$1.match,type=ref$1.type;if(inject){for(var i$1=0;i$1<inject.childCount;i$1++)add.push(inject.child(i$1));match=match.matchFragment(inject)}for(var openEndCount=fragment.size+sliceDepth-(slice.content.size-slice.openEnd);taken<fragment.childCount;){var next=fragment.child(taken),matches=match.matchType(next.type);if(!matches)break;(++taken>1||0==openStart||next.content.size)&&(match=matches,add.push(closeNodeStart(next.mark(type.allowedMarks(next.marks)),1==taken?openStart:0,taken==fragment.childCount?openEndCount:-1)))}var toEnd=taken==fragment.childCount;toEnd||(openEndCount=-1),toEnd&&openEndCount<0&&parent&&parent.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[frontierDepth].match=match;for(var i$2=0,cur=fragment;i$2<openEndCount;i$2++){var node=cur.lastChild;this.frontier.push({type:node.type,match:node.contentMatchAt(node.childCount)}),cur=node.content}this.unplaced=toEnd?0==sliceDepth?prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty:new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(dropFromFragment(slice.content,sliceDepth-1,1),sliceDepth-1,openEndCount<0?slice.openEnd:sliceDepth-1):new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(dropFromFragment(slice.content,sliceDepth,taken),slice.openStart,slice.openEnd),this.placed=addToFragment(this.placed,frontierDepth,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(add))},Fitter.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var level,top=this.frontier[this.depth];if(!top.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,top.type,top.match,!1)||this.$to.depth==this.depth&&(level=this.findCloseLevel(this.$to))&&level.depth==this.depth)return-1;for(var depth=this.$to.depth,after=this.$to.after(depth);depth>1&&after==this.$to.end(--depth);)++after;return after},Fitter.prototype.findCloseLevel=function($to){scan:for(var i=Math.min(this.depth,$to.depth);i>=0;i--){var ref=this.frontier[i],match=ref.match,type=ref.type,dropInner=i<$to.depth&&$to.end(i+1)==$to.pos+($to.depth-(i+1)),fit=contentAfterFits($to,i,type,match,dropInner);if(fit){for(var d=i-1;d>=0;d--){var ref$1=this.frontier[d],matches=contentAfterFits($to,d,ref$1.type,ref$1.match,!0);if(!matches||matches.childCount)continue scan}return{depth:i,fit:fit,move:dropInner?$to.doc.resolve($to.after(i+1)):$to}}}},Fitter.prototype.close=function($to){var close=this.findCloseLevel($to);if(!close)return null;for(;this.depth>close.depth;)this.closeFrontierNode();close.fit.childCount&&(this.placed=addToFragment(this.placed,close.depth,close.fit)),$to=close.move;for(var d=close.depth+1;d<=$to.depth;d++){var node=$to.node(d),add=node.type.contentMatch.fillBefore(node.content,!0,$to.index(d));this.openFrontierNode(node.type,node.attrs,add)}return $to},Fitter.prototype.openFrontierNode=function(type,attrs,content){var top=this.frontier[this.depth];top.match=top.match.matchType(type),this.placed=addToFragment(this.placed,this.depth,prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(type.create(attrs,content))),this.frontier.push({type:type,match:type.contentMatch})},Fitter.prototype.closeFrontierNode=function(){var add=this.frontier.pop().match.fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.empty,!0);add.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,add))},Object.defineProperties(Fitter.prototype,prototypeAccessors$1),Transform.prototype.replaceRange=function(from,to,slice){if(!slice.size)return this.deleteRange(from,to);var $from=this.doc.resolve(from),$to=this.doc.resolve(to);if(fitsTrivially($from,$to,slice))return this.step(new ReplaceStep(from,to,slice));var targetDepths=coveredDepths($from,this.doc.resolve(to));0==targetDepths[targetDepths.length-1]&&targetDepths.pop();var preferredTarget=-($from.depth+1);targetDepths.unshift(preferredTarget);for(var d=$from.depth,pos=$from.pos-1;d>0;d--,pos--){var spec=$from.node(d).type.spec;if(spec.defining||spec.isolating)break;targetDepths.indexOf(d)>-1?preferredTarget=d:$from.before(d)==pos&&targetDepths.splice(1,0,-d)}for(var preferredTargetIndex=targetDepths.indexOf(preferredTarget),leftNodes=[],preferredDepth=slice.openStart,content=slice.content,i=0;;i++){var node=content.firstChild;if(leftNodes.push(node),i==slice.openStart)break;content=node.content}preferredDepth>0&&leftNodes[preferredDepth-1].type.spec.defining&&$from.node(preferredTargetIndex).type!=leftNodes[preferredDepth-1].type?preferredDepth-=1:preferredDepth>=2&&leftNodes[preferredDepth-1].isTextblock&&leftNodes[preferredDepth-2].type.spec.defining&&$from.node(preferredTargetIndex).type!=leftNodes[preferredDepth-2].type&&(preferredDepth-=2);for(var j=slice.openStart;j>=0;j--){var openDepth=(j+preferredDepth+1)%(slice.openStart+1),insert=leftNodes[openDepth];if(insert)for(var i$1=0;i$1<targetDepths.length;i$1++){var targetDepth=targetDepths[(i$1+preferredTargetIndex)%targetDepths.length],expand=!0;targetDepth<0&&(expand=!1,targetDepth=-targetDepth);var parent=$from.node(targetDepth-1),index=$from.index(targetDepth-1);if(parent.canReplaceWith(index,index,insert.type,insert.marks))return this.replace($from.before(targetDepth),expand?$to.after(targetDepth):to,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(closeFragment(slice.content,0,slice.openStart,openDepth),openDepth,slice.openEnd))}}for(var startSteps=this.steps.length,i$2=targetDepths.length-1;i$2>=0&&(this.replace(from,to,slice),!(this.steps.length>startSteps));i$2--){var depth=targetDepths[i$2];i$2<0||(from=$from.before(depth),to=$to.after(depth))}return this},Transform.prototype.replaceRangeWith=function(from,to,node){if(!node.isInline&&from==to&&this.doc.resolve(from).parent.content.size){var point=function(doc,pos,nodeType){var $pos=doc.resolve(pos);if($pos.parent.canReplaceWith($pos.index(),$pos.index(),nodeType))return pos;if(0==$pos.parentOffset)for(var d=$pos.depth-1;d>=0;d--){var index=$pos.index(d);if($pos.node(d).canReplaceWith(index,index,nodeType))return $pos.before(d+1);if(index>0)return null}if($pos.parentOffset==$pos.parent.content.size)for(var d$1=$pos.depth-1;d$1>=0;d$1--){var index$1=$pos.indexAfter(d$1);if($pos.node(d$1).canReplaceWith(index$1,index$1,nodeType))return $pos.after(d$1+1);if(index$1<$pos.node(d$1).childCount)return null}}(this.doc,from,node.type);null!=point&&(from=to=point)}return this.replaceRange(from,to,new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(node),0,0))},Transform.prototype.deleteRange=function(from,to){for(var $from=this.doc.resolve(from),$to=this.doc.resolve(to),covered=coveredDepths($from,$to),i=0;i<covered.length;i++){var depth=covered[i],last=i==covered.length-1;if(last&&0==depth||$from.node(depth).type.contentMatch.validEnd)return this.delete($from.start(depth),$to.end(depth));if(depth>0&&(last||$from.node(depth-1).canReplace($from.index(depth-1),$to.indexAfter(depth-1))))return this.delete($from.before(depth),$to.after(depth))}for(var d=1;d<=$from.depth&&d<=$to.depth;d++)if(from-$from.start(d)==$from.depth-d&&to>$from.end(d)&&$to.end(d)-to!=$to.depth-d)return this.delete($from.before(d),to);return this.delete(from,to)}},FKDQ:function(module,exports,__webpack_require__){module.exports=__webpack_require__("ABBN")},G7Ki:function(module,exports,__webpack_require__){module.exports=__webpack_require__("fwbU")},"Ju5/":function(module,__webpack_exports__,__webpack_require__){"use strict";var _freeGlobal_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("XqMk"),freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=_freeGlobal_js__WEBPACK_IMPORTED_MODULE_0__.a||freeSelf||Function("return this")();__webpack_exports__.a=root},L3Qv:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=function(){return!1}},MEpN:function(module,__webpack_exports__,__webpack_require__){"use strict";function OrderedMap(content){this.content=content}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ContentMatch",(function(){return ContentMatch})),__webpack_require__.d(__webpack_exports__,"DOMParser",(function(){return DOMParser})),__webpack_require__.d(__webpack_exports__,"DOMSerializer",(function(){return DOMSerializer})),__webpack_require__.d(__webpack_exports__,"Fragment",(function(){return Fragment})),__webpack_require__.d(__webpack_exports__,"Mark",(function(){return Mark})),__webpack_require__.d(__webpack_exports__,"MarkType",(function(){return MarkType})),__webpack_require__.d(__webpack_exports__,"Node",(function(){return Node})),__webpack_require__.d(__webpack_exports__,"NodeRange",(function(){return NodeRange})),__webpack_require__.d(__webpack_exports__,"NodeType",(function(){return NodeType})),__webpack_require__.d(__webpack_exports__,"ReplaceError",(function(){return ReplaceError})),__webpack_require__.d(__webpack_exports__,"ResolvedPos",(function(){return ResolvedPos})),__webpack_require__.d(__webpack_exports__,"Schema",(function(){return index_es_Schema})),__webpack_require__.d(__webpack_exports__,"Slice",(function(){return Slice})),OrderedMap.prototype={constructor:OrderedMap,find:function(key){for(var i=0;i<this.content.length;i+=2)if(this.content[i]===key)return i;return-1},get:function(key){var found=this.find(key);return-1==found?void 0:this.content[found+1]},update:function(key,value,newKey){var self=newKey&&newKey!=key?this.remove(newKey):this,found=self.find(key),content=self.content.slice();return-1==found?content.push(newKey||key,value):(content[found+1]=value,newKey&&(content[found]=newKey)),new OrderedMap(content)},remove:function(key){var found=this.find(key);if(-1==found)return this;var content=this.content.slice();return content.splice(found,2),new OrderedMap(content)},addToStart:function(key,value){return new OrderedMap([key,value].concat(this.remove(key).content))},addToEnd:function(key,value){var content=this.remove(key).content.slice();return content.push(key,value),new OrderedMap(content)},addBefore:function(place,key,value){var without=this.remove(key),content=without.content.slice(),found=without.find(place);return content.splice(-1==found?content.length:found,0,key,value),new OrderedMap(content)},forEach:function(f){for(var i=0;i<this.content.length;i+=2)f(this.content[i],this.content[i+1])},prepend:function(map){return(map=OrderedMap.from(map)).size?new OrderedMap(map.content.concat(this.subtract(map).content)):this},append:function(map){return(map=OrderedMap.from(map)).size?new OrderedMap(this.subtract(map).content.concat(map.content)):this},subtract:function(map){var result=this;map=OrderedMap.from(map);for(var i=0;i<map.content.length;i+=2)result=result.remove(map.content[i]);return result},get size(){return this.content.length>>1}},OrderedMap.from=function(value){if(value instanceof OrderedMap)return value;var content=[];if(value)for(var prop in value)content.push(prop,value[prop]);return new OrderedMap(content)};var index_es=OrderedMap,Fragment=function(content,size){if(this.content=content,this.size=size||0,null==size)for(var i=0;i<content.length;i++)this.size+=content[i].nodeSize},prototypeAccessors={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};Fragment.prototype.nodesBetween=function(from,to,f,nodeStart,parent){void 0===nodeStart&&(nodeStart=0);for(var i=0,pos=0;pos<to;i++){var child=this.content[i],end=pos+child.nodeSize;if(end>from&&!1!==f(child,nodeStart+pos,parent,i)&&child.content.size){var start=pos+1;child.nodesBetween(Math.max(0,from-start),Math.min(child.content.size,to-start),f,nodeStart+start)}pos=end}},Fragment.prototype.descendants=function(f){this.nodesBetween(0,this.size,f)},Fragment.prototype.textBetween=function(from,to,blockSeparator,leafText){var text="",separated=!0;return this.nodesBetween(from,to,(function(node,pos){node.isText?(text+=node.text.slice(Math.max(from,pos)-pos,to-pos),separated=!blockSeparator):node.isLeaf&&leafText?(text+=leafText,separated=!blockSeparator):!separated&&node.isBlock&&(text+=blockSeparator,separated=!0)}),0),text},Fragment.prototype.append=function(other){if(!other.size)return this;if(!this.size)return other;var last=this.lastChild,first=other.firstChild,content=this.content.slice(),i=0;for(last.isText&&last.sameMarkup(first)&&(content[content.length-1]=last.withText(last.text+first.text),i=1);i<other.content.length;i++)content.push(other.content[i]);return new Fragment(content,this.size+other.size)},Fragment.prototype.cut=function(from,to){if(null==to&&(to=this.size),0==from&&to==this.size)return this;var result=[],size=0;if(to>from)for(var i=0,pos=0;pos<to;i++){var child=this.content[i],end=pos+child.nodeSize;end>from&&((pos<from||end>to)&&(child=child.isText?child.cut(Math.max(0,from-pos),Math.min(child.text.length,to-pos)):child.cut(Math.max(0,from-pos-1),Math.min(child.content.size,to-pos-1))),result.push(child),size+=child.nodeSize),pos=end}return new Fragment(result,size)},Fragment.prototype.cutByIndex=function(from,to){return from==to?Fragment.empty:0==from&&to==this.content.length?this:new Fragment(this.content.slice(from,to))},Fragment.prototype.replaceChild=function(index,node){var current=this.content[index];if(current==node)return this;var copy=this.content.slice(),size=this.size+node.nodeSize-current.nodeSize;return copy[index]=node,new Fragment(copy,size)},Fragment.prototype.addToStart=function(node){return new Fragment([node].concat(this.content),this.size+node.nodeSize)},Fragment.prototype.addToEnd=function(node){return new Fragment(this.content.concat(node),this.size+node.nodeSize)},Fragment.prototype.eq=function(other){if(this.content.length!=other.content.length)return!1;for(var i=0;i<this.content.length;i++)if(!this.content[i].eq(other.content[i]))return!1;return!0},prototypeAccessors.firstChild.get=function(){return this.content.length?this.content[0]:null},prototypeAccessors.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},prototypeAccessors.childCount.get=function(){return this.content.length},Fragment.prototype.child=function(index){var found=this.content[index];if(!found)throw new RangeError("Index "+index+" out of range for "+this);return found},Fragment.prototype.maybeChild=function(index){return this.content[index]},Fragment.prototype.forEach=function(f){for(var i=0,p=0;i<this.content.length;i++){var child=this.content[i];f(child,p,i),p+=child.nodeSize}},Fragment.prototype.findDiffStart=function(other,pos){return void 0===pos&&(pos=0),function findDiffStart(a,b,pos){for(var i=0;;i++){if(i==a.childCount||i==b.childCount)return a.childCount==b.childCount?null:pos;var childA=a.child(i),childB=b.child(i);if(childA!=childB){if(!childA.sameMarkup(childB))return pos;if(childA.isText&&childA.text!=childB.text){for(var j=0;childA.text[j]==childB.text[j];j++)pos++;return pos}if(childA.content.size||childB.content.size){var inner=findDiffStart(childA.content,childB.content,pos+1);if(null!=inner)return inner}pos+=childA.nodeSize}else pos+=childA.nodeSize}}(this,other,pos)},Fragment.prototype.findDiffEnd=function(other,pos,otherPos){return void 0===pos&&(pos=this.size),void 0===otherPos&&(otherPos=other.size),function findDiffEnd(a,b,posA,posB){for(var iA=a.childCount,iB=b.childCount;;){if(0==iA||0==iB)return iA==iB?null:{a:posA,b:posB};var childA=a.child(--iA),childB=b.child(--iB),size=childA.nodeSize;if(childA!=childB){if(!childA.sameMarkup(childB))return{a:posA,b:posB};if(childA.isText&&childA.text!=childB.text){for(var same=0,minSize=Math.min(childA.text.length,childB.text.length);same<minSize&&childA.text[childA.text.length-same-1]==childB.text[childB.text.length-same-1];)same++,posA--,posB--;return{a:posA,b:posB}}if(childA.content.size||childB.content.size){var inner=findDiffEnd(childA.content,childB.content,posA-1,posB-1);if(inner)return inner}posA-=size,posB-=size}else posA-=size,posB-=size}}(this,other,pos,otherPos)},Fragment.prototype.findIndex=function(pos,round){if(void 0===round&&(round=-1),0==pos)return retIndex(0,pos);if(pos==this.size)return retIndex(this.content.length,pos);if(pos>this.size||pos<0)throw new RangeError("Position "+pos+" outside of fragment ("+this+")");for(var i=0,curPos=0;;i++){var end=curPos+this.child(i).nodeSize;if(end>=pos)return end==pos||round>0?retIndex(i+1,end):retIndex(i,curPos);curPos=end}},Fragment.prototype.toString=function(){return"<"+this.toStringInner()+">"},Fragment.prototype.toStringInner=function(){return this.content.join(", ")},Fragment.prototype.toJSON=function(){return this.content.length?this.content.map((function(n){return n.toJSON()})):null},Fragment.fromJSON=function(schema,value){if(!value)return Fragment.empty;if(!Array.isArray(value))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(value.map(schema.nodeFromJSON))},Fragment.fromArray=function(array){if(!array.length)return Fragment.empty;for(var joined,size=0,i=0;i<array.length;i++){var node=array[i];size+=node.nodeSize,i&&node.isText&&array[i-1].sameMarkup(node)?(joined||(joined=array.slice(0,i)),joined[joined.length-1]=node.withText(joined[joined.length-1].text+node.text)):joined&&joined.push(node)}return new Fragment(joined||array,size)},Fragment.from=function(nodes){if(!nodes)return Fragment.empty;if(nodes instanceof Fragment)return nodes;if(Array.isArray(nodes))return this.fromArray(nodes);if(nodes.attrs)return new Fragment([nodes],nodes.nodeSize);throw new RangeError("Can not convert "+nodes+" to a Fragment"+(nodes.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(Fragment.prototype,prototypeAccessors);var found={index:0,offset:0};function retIndex(index,offset){return found.index=index,found.offset=offset,found}function compareDeep(a,b){if(a===b)return!0;if(!a||"object"!=typeof a||!b||"object"!=typeof b)return!1;var array=Array.isArray(a);if(Array.isArray(b)!=array)return!1;if(array){if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!compareDeep(a[i],b[i]))return!1}else{for(var p in a)if(!(p in b)||!compareDeep(a[p],b[p]))return!1;for(var p$1 in b)if(!(p$1 in a))return!1}return!0}Fragment.empty=new Fragment([],0);var Mark=function(type,attrs){this.type=type,this.attrs=attrs};function ReplaceError(message){var err=Error.call(this,message);return err.__proto__=ReplaceError.prototype,err}Mark.prototype.addToSet=function(set){for(var copy,placed=!1,i=0;i<set.length;i++){var other=set[i];if(this.eq(other))return set;if(this.type.excludes(other.type))copy||(copy=set.slice(0,i));else{if(other.type.excludes(this.type))return set;!placed&&other.type.rank>this.type.rank&&(copy||(copy=set.slice(0,i)),copy.push(this),placed=!0),copy&&copy.push(other)}}return copy||(copy=set.slice()),placed||copy.push(this),copy},Mark.prototype.removeFromSet=function(set){for(var i=0;i<set.length;i++)if(this.eq(set[i]))return set.slice(0,i).concat(set.slice(i+1));return set},Mark.prototype.isInSet=function(set){for(var i=0;i<set.length;i++)if(this.eq(set[i]))return!0;return!1},Mark.prototype.eq=function(other){return this==other||this.type==other.type&&compareDeep(this.attrs,other.attrs)},Mark.prototype.toJSON=function(){var obj={type:this.type.name};for(var _ in this.attrs){obj.attrs=this.attrs;break}return obj},Mark.fromJSON=function(schema,json){if(!json)throw new RangeError("Invalid input for Mark.fromJSON");var type=schema.marks[json.type];if(!type)throw new RangeError("There is no mark type "+json.type+" in this schema");return type.create(json.attrs)},Mark.sameSet=function(a,b){if(a==b)return!0;if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!a[i].eq(b[i]))return!1;return!0},Mark.setFrom=function(marks){if(!marks||0==marks.length)return Mark.none;if(marks instanceof Mark)return[marks];var copy=marks.slice();return copy.sort((function(a,b){return a.type.rank-b.type.rank})),copy},Mark.none=[],(ReplaceError.prototype=Object.create(Error.prototype)).constructor=ReplaceError,ReplaceError.prototype.name="ReplaceError";var Slice=function(content,openStart,openEnd){this.content=content,this.openStart=openStart,this.openEnd=openEnd},prototypeAccessors$1={size:{configurable:!0}};function checkJoin(main,sub){if(!sub.type.compatibleContent(main.type))throw new ReplaceError("Cannot join "+sub.type.name+" onto "+main.type.name)}function joinable($before,$after,depth){var node=$before.node(depth);return checkJoin(node,$after.node(depth)),node}function addNode(child,target){var last=target.length-1;last>=0&&child.isText&&child.sameMarkup(target[last])?target[last]=child.withText(target[last].text+child.text):target.push(child)}function addRange($start,$end,depth,target){var node=($end||$start).node(depth),startIndex=0,endIndex=$end?$end.index(depth):node.childCount;$start&&(startIndex=$start.index(depth),$start.depth>depth?startIndex++:$start.textOffset&&(addNode($start.nodeAfter,target),startIndex++));for(var i=startIndex;i<endIndex;i++)addNode(node.child(i),target);$end&&$end.depth==depth&&$end.textOffset&&addNode($end.nodeBefore,target)}function index_es_close(node,content){if(!node.type.validContent(content))throw new ReplaceError("Invalid content for node "+node.type.name);return node.copy(content)}function replaceTwoWay($from,$to,depth){var content=[];return addRange(null,$from,depth,content),$from.depth>depth&&addNode(index_es_close(joinable($from,$to,depth+1),replaceTwoWay($from,$to,depth+1)),content),addRange($to,null,depth,content),new Fragment(content)}prototypeAccessors$1.size.get=function(){return this.content.size-this.openStart-this.openEnd},Slice.prototype.insertAt=function(pos,fragment){var content=function insertInto(content,dist,insert,parent){var ref=content.findIndex(dist),index=ref.index,offset=ref.offset,child=content.maybeChild(index);if(offset==dist||child.isText)return parent&&!parent.canReplace(index,index,insert)?null:content.cut(0,dist).append(insert).append(content.cut(dist));var inner=insertInto(child.content,dist-offset-1,insert);return inner&&content.replaceChild(index,child.copy(inner))}(this.content,pos+this.openStart,fragment,null);return content&&new Slice(content,this.openStart,this.openEnd)},Slice.prototype.removeBetween=function(from,to){return new Slice(function removeRange(content,from,to){var ref=content.findIndex(from),index=ref.index,offset=ref.offset,child=content.maybeChild(index),ref$1=content.findIndex(to),indexTo=ref$1.index;if(offset==from||child.isText){if(ref$1.offset!=to&&!content.child(indexTo).isText)throw new RangeError("Removing non-flat range");return content.cut(0,from).append(content.cut(to))}if(index!=indexTo)throw new RangeError("Removing non-flat range");return content.replaceChild(index,child.copy(removeRange(child.content,from-offset-1,to-offset-1)))}(this.content,from+this.openStart,to+this.openStart),this.openStart,this.openEnd)},Slice.prototype.eq=function(other){return this.content.eq(other.content)&&this.openStart==other.openStart&&this.openEnd==other.openEnd},Slice.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},Slice.prototype.toJSON=function(){if(!this.content.size)return null;var json={content:this.content.toJSON()};return this.openStart>0&&(json.openStart=this.openStart),this.openEnd>0&&(json.openEnd=this.openEnd),json},Slice.fromJSON=function(schema,json){if(!json)return Slice.empty;if("number"!=typeof(json.openStart||0)||"number"!=typeof(json.openEnd||0))throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(schema,json.content),json.openStart||0,json.openEnd||0)},Slice.maxOpen=function(fragment,openIsolating){void 0===openIsolating&&(openIsolating=!0);for(var openStart=0,openEnd=0,n=fragment.firstChild;n&&!n.isLeaf&&(openIsolating||!n.type.spec.isolating);n=n.firstChild)openStart++;for(var n$1=fragment.lastChild;n$1&&!n$1.isLeaf&&(openIsolating||!n$1.type.spec.isolating);n$1=n$1.lastChild)openEnd++;return new Slice(fragment,openStart,openEnd)},Object.defineProperties(Slice.prototype,prototypeAccessors$1),Slice.empty=new Slice(Fragment.empty,0,0);var ResolvedPos=function(pos,path,parentOffset){this.pos=pos,this.path=path,this.depth=path.length/3-1,this.parentOffset=parentOffset},prototypeAccessors$2={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};ResolvedPos.prototype.resolveDepth=function(val){return null==val?this.depth:val<0?this.depth+val:val},prototypeAccessors$2.parent.get=function(){return this.node(this.depth)},prototypeAccessors$2.doc.get=function(){return this.node(0)},ResolvedPos.prototype.node=function(depth){return this.path[3*this.resolveDepth(depth)]},ResolvedPos.prototype.index=function(depth){return this.path[3*this.resolveDepth(depth)+1]},ResolvedPos.prototype.indexAfter=function(depth){return depth=this.resolveDepth(depth),this.index(depth)+(depth!=this.depth||this.textOffset?1:0)},ResolvedPos.prototype.start=function(depth){return 0==(depth=this.resolveDepth(depth))?0:this.path[3*depth-1]+1},ResolvedPos.prototype.end=function(depth){return depth=this.resolveDepth(depth),this.start(depth)+this.node(depth).content.size},ResolvedPos.prototype.before=function(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position before the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]},ResolvedPos.prototype.after=function(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position after the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]+this.path[3*depth].nodeSize},prototypeAccessors$2.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},prototypeAccessors$2.nodeAfter.get=function(){var parent=this.parent,index=this.index(this.depth);if(index==parent.childCount)return null;var dOff=this.pos-this.path[this.path.length-1],child=parent.child(index);return dOff?parent.child(index).cut(dOff):child},prototypeAccessors$2.nodeBefore.get=function(){var index=this.index(this.depth),dOff=this.pos-this.path[this.path.length-1];return dOff?this.parent.child(index).cut(0,dOff):0==index?null:this.parent.child(index-1)},ResolvedPos.prototype.marks=function(){var parent=this.parent,index=this.index();if(0==parent.content.size)return Mark.none;if(this.textOffset)return parent.child(index).marks;var main=parent.maybeChild(index-1),other=parent.maybeChild(index);if(!main){var tmp=main;main=other,other=tmp}for(var marks=main.marks,i=0;i<marks.length;i++)!1!==marks[i].type.spec.inclusive||other&&marks[i].isInSet(other.marks)||(marks=marks[i--].removeFromSet(marks));return marks},ResolvedPos.prototype.marksAcross=function($end){var after=this.parent.maybeChild(this.index());if(!after||!after.isInline)return null;for(var marks=after.marks,next=$end.parent.maybeChild($end.index()),i=0;i<marks.length;i++)!1!==marks[i].type.spec.inclusive||next&&marks[i].isInSet(next.marks)||(marks=marks[i--].removeFromSet(marks));return marks},ResolvedPos.prototype.sharedDepth=function(pos){for(var depth=this.depth;depth>0;depth--)if(this.start(depth)<=pos&&this.end(depth)>=pos)return depth;return 0},ResolvedPos.prototype.blockRange=function(other,pred){if(void 0===other&&(other=this),other.pos<this.pos)return other.blockRange(this);for(var d=this.depth-(this.parent.inlineContent||this.pos==other.pos?1:0);d>=0;d--)if(other.pos<=this.end(d)&&(!pred||pred(this.node(d))))return new NodeRange(this,other,d)},ResolvedPos.prototype.sameParent=function(other){return this.pos-this.parentOffset==other.pos-other.parentOffset},ResolvedPos.prototype.max=function(other){return other.pos>this.pos?other:this},ResolvedPos.prototype.min=function(other){return other.pos<this.pos?other:this},ResolvedPos.prototype.toString=function(){for(var str="",i=1;i<=this.depth;i++)str+=(str?"/":"")+this.node(i).type.name+"_"+this.index(i-1);return str+":"+this.parentOffset},ResolvedPos.resolve=function(doc,pos){if(!(pos>=0&&pos<=doc.content.size))throw new RangeError("Position "+pos+" out of range");for(var path=[],start=0,parentOffset=pos,node=doc;;){var ref=node.content.findIndex(parentOffset),index=ref.index,offset=ref.offset,rem=parentOffset-offset;if(path.push(node,index,start+offset),!rem)break;if((node=node.child(index)).isText)break;parentOffset=rem-1,start+=offset+1}return new ResolvedPos(pos,path,parentOffset)},ResolvedPos.resolveCached=function(doc,pos){for(var i=0;i<resolveCache.length;i++){var cached=resolveCache[i];if(cached.pos==pos&&cached.doc==doc)return cached}var result=resolveCache[resolveCachePos]=ResolvedPos.resolve(doc,pos);return resolveCachePos=(resolveCachePos+1)%resolveCacheSize,result},Object.defineProperties(ResolvedPos.prototype,prototypeAccessors$2);var resolveCache=[],resolveCachePos=0,resolveCacheSize=12,NodeRange=function($from,$to,depth){this.$from=$from,this.$to=$to,this.depth=depth},prototypeAccessors$1$1={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};prototypeAccessors$1$1.start.get=function(){return this.$from.before(this.depth+1)},prototypeAccessors$1$1.end.get=function(){return this.$to.after(this.depth+1)},prototypeAccessors$1$1.parent.get=function(){return this.$from.node(this.depth)},prototypeAccessors$1$1.startIndex.get=function(){return this.$from.index(this.depth)},prototypeAccessors$1$1.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(NodeRange.prototype,prototypeAccessors$1$1);var emptyAttrs=Object.create(null),Node=function(type,attrs,content,marks){this.type=type,this.attrs=attrs,this.content=content||Fragment.empty,this.marks=marks||Mark.none},prototypeAccessors$3={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};prototypeAccessors$3.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},prototypeAccessors$3.childCount.get=function(){return this.content.childCount},Node.prototype.child=function(index){return this.content.child(index)},Node.prototype.maybeChild=function(index){return this.content.maybeChild(index)},Node.prototype.forEach=function(f){this.content.forEach(f)},Node.prototype.nodesBetween=function(from,to,f,startPos){void 0===startPos&&(startPos=0),this.content.nodesBetween(from,to,f,startPos,this)},Node.prototype.descendants=function(f){this.nodesBetween(0,this.content.size,f)},prototypeAccessors$3.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Node.prototype.textBetween=function(from,to,blockSeparator,leafText){return this.content.textBetween(from,to,blockSeparator,leafText)},prototypeAccessors$3.firstChild.get=function(){return this.content.firstChild},prototypeAccessors$3.lastChild.get=function(){return this.content.lastChild},Node.prototype.eq=function(other){return this==other||this.sameMarkup(other)&&this.content.eq(other.content)},Node.prototype.sameMarkup=function(other){return this.hasMarkup(other.type,other.attrs,other.marks)},Node.prototype.hasMarkup=function(type,attrs,marks){return this.type==type&&compareDeep(this.attrs,attrs||type.defaultAttrs||emptyAttrs)&&Mark.sameSet(this.marks,marks||Mark.none)},Node.prototype.copy=function(content){return void 0===content&&(content=null),content==this.content?this:new this.constructor(this.type,this.attrs,content,this.marks)},Node.prototype.mark=function(marks){return marks==this.marks?this:new this.constructor(this.type,this.attrs,this.content,marks)},Node.prototype.cut=function(from,to){return 0==from&&to==this.content.size?this:this.copy(this.content.cut(from,to))},Node.prototype.slice=function(from,to,includeParents){if(void 0===to&&(to=this.content.size),void 0===includeParents&&(includeParents=!1),from==to)return Slice.empty;var $from=this.resolve(from),$to=this.resolve(to),depth=includeParents?0:$from.sharedDepth(to),start=$from.start(depth),content=$from.node(depth).content.cut($from.pos-start,$to.pos-start);return new Slice(content,$from.depth-depth,$to.depth-depth)},Node.prototype.replace=function(from,to,slice){return function($from,$to,slice){if(slice.openStart>$from.depth)throw new ReplaceError("Inserted content deeper than insertion position");if($from.depth-slice.openStart!=$to.depth-slice.openEnd)throw new ReplaceError("Inconsistent open depths");return function replaceOuter($from,$to,slice,depth){var index=$from.index(depth),node=$from.node(depth);if(index==$to.index(depth)&&depth<$from.depth-slice.openStart){var inner=replaceOuter($from,$to,slice,depth+1);return node.copy(node.content.replaceChild(index,inner))}if(slice.content.size){if(slice.openStart||slice.openEnd||$from.depth!=depth||$to.depth!=depth){var ref=function(slice,$along){for(var extra=$along.depth-slice.openStart,node=$along.node(extra).copy(slice.content),i=extra-1;i>=0;i--)node=$along.node(i).copy(Fragment.from(node));return{start:node.resolveNoCache(slice.openStart+extra),end:node.resolveNoCache(node.content.size-slice.openEnd-extra)}}(slice,$from);return index_es_close(node,function replaceThreeWay($from,$start,$end,$to,depth){var openStart=$from.depth>depth&&joinable($from,$start,depth+1),openEnd=$to.depth>depth&&joinable($end,$to,depth+1),content=[];return addRange(null,$from,depth,content),openStart&&openEnd&&$start.index(depth)==$end.index(depth)?(checkJoin(openStart,openEnd),addNode(index_es_close(openStart,replaceThreeWay($from,$start,$end,$to,depth+1)),content)):(openStart&&addNode(index_es_close(openStart,replaceTwoWay($from,$start,depth+1)),content),addRange($start,$end,depth,content),openEnd&&addNode(index_es_close(openEnd,replaceTwoWay($end,$to,depth+1)),content)),addRange($to,null,depth,content),new Fragment(content)}($from,ref.start,ref.end,$to,depth))}var parent=$from.parent,content=parent.content;return index_es_close(parent,content.cut(0,$from.parentOffset).append(slice.content).append(content.cut($to.parentOffset)))}return index_es_close(node,replaceTwoWay($from,$to,depth))}($from,$to,slice,0)}(this.resolve(from),this.resolve(to),slice)},Node.prototype.nodeAt=function(pos){for(var node=this;;){var ref=node.content.findIndex(pos),offset=ref.offset;if(!(node=node.maybeChild(ref.index)))return null;if(offset==pos||node.isText)return node;pos-=offset+1}},Node.prototype.childAfter=function(pos){var ref=this.content.findIndex(pos),index=ref.index,offset=ref.offset;return{node:this.content.maybeChild(index),index:index,offset:offset}},Node.prototype.childBefore=function(pos){if(0==pos)return{node:null,index:0,offset:0};var ref=this.content.findIndex(pos),index=ref.index,offset=ref.offset;if(offset<pos)return{node:this.content.child(index),index:index,offset:offset};var node=this.content.child(index-1);return{node:node,index:index-1,offset:offset-node.nodeSize}},Node.prototype.resolve=function(pos){return ResolvedPos.resolveCached(this,pos)},Node.prototype.resolveNoCache=function(pos){return ResolvedPos.resolve(this,pos)},Node.prototype.rangeHasMark=function(from,to,type){var found=!1;return to>from&&this.nodesBetween(from,to,(function(node){return type.isInSet(node.marks)&&(found=!0),!found})),found},prototypeAccessors$3.isBlock.get=function(){return this.type.isBlock},prototypeAccessors$3.isTextblock.get=function(){return this.type.isTextblock},prototypeAccessors$3.inlineContent.get=function(){return this.type.inlineContent},prototypeAccessors$3.isInline.get=function(){return this.type.isInline},prototypeAccessors$3.isText.get=function(){return this.type.isText},prototypeAccessors$3.isLeaf.get=function(){return this.type.isLeaf},prototypeAccessors$3.isAtom.get=function(){return this.type.isAtom},Node.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var name=this.type.name;return this.content.size&&(name+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,name)},Node.prototype.contentMatchAt=function(index){var match=this.type.contentMatch.matchFragment(this.content,0,index);if(!match)throw new Error("Called contentMatchAt on a node with invalid content");return match},Node.prototype.canReplace=function(from,to,replacement,start,end){void 0===replacement&&(replacement=Fragment.empty),void 0===start&&(start=0),void 0===end&&(end=replacement.childCount);var one=this.contentMatchAt(from).matchFragment(replacement,start,end),two=one&&one.matchFragment(this.content,to);if(!two||!two.validEnd)return!1;for(var i=start;i<end;i++)if(!this.type.allowsMarks(replacement.child(i).marks))return!1;return!0},Node.prototype.canReplaceWith=function(from,to,type,marks){if(marks&&!this.type.allowsMarks(marks))return!1;var start=this.contentMatchAt(from).matchType(type),end=start&&start.matchFragment(this.content,to);return!!end&&end.validEnd},Node.prototype.canAppend=function(other){return other.content.size?this.canReplace(this.childCount,this.childCount,other.content):this.type.compatibleContent(other.type)},Node.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(node){return node.check()}))},Node.prototype.toJSON=function(){var obj={type:this.type.name};for(var _ in this.attrs){obj.attrs=this.attrs;break}return this.content.size&&(obj.content=this.content.toJSON()),this.marks.length&&(obj.marks=this.marks.map((function(n){return n.toJSON()}))),obj},Node.fromJSON=function(schema,json){if(!json)throw new RangeError("Invalid input for Node.fromJSON");var marks=null;if(json.marks){if(!Array.isArray(json.marks))throw new RangeError("Invalid mark data for Node.fromJSON");marks=json.marks.map(schema.markFromJSON)}if("text"==json.type){if("string"!=typeof json.text)throw new RangeError("Invalid text node in JSON");return schema.text(json.text,marks)}var content=Fragment.fromJSON(schema,json.content);return schema.nodeType(json.type).create(json.attrs,content,marks)},Object.defineProperties(Node.prototype,prototypeAccessors$3);var TextNode=function(Node){function TextNode(type,attrs,content,marks){if(Node.call(this,type,attrs,null,marks),!content)throw new RangeError("Empty text nodes are not allowed");this.text=content}Node&&(TextNode.__proto__=Node),(TextNode.prototype=Object.create(Node&&Node.prototype)).constructor=TextNode;var prototypeAccessors$1={textContent:{configurable:!0},nodeSize:{configurable:!0}};return TextNode.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))},prototypeAccessors$1.textContent.get=function(){return this.text},TextNode.prototype.textBetween=function(from,to){return this.text.slice(from,to)},prototypeAccessors$1.nodeSize.get=function(){return this.text.length},TextNode.prototype.mark=function(marks){return marks==this.marks?this:new TextNode(this.type,this.attrs,this.text,marks)},TextNode.prototype.withText=function(text){return text==this.text?this:new TextNode(this.type,this.attrs,text,this.marks)},TextNode.prototype.cut=function(from,to){return void 0===from&&(from=0),void 0===to&&(to=this.text.length),0==from&&to==this.text.length?this:this.withText(this.text.slice(from,to))},TextNode.prototype.eq=function(other){return this.sameMarkup(other)&&this.text==other.text},TextNode.prototype.toJSON=function(){var base=Node.prototype.toJSON.call(this);return base.text=this.text,base},Object.defineProperties(TextNode.prototype,prototypeAccessors$1),TextNode}(Node);function wrapMarks(marks,str){for(var i=marks.length-1;i>=0;i--)str=marks[i].type.name+"("+str+")";return str}var ContentMatch=function(validEnd){this.validEnd=validEnd,this.next=[],this.wrapCache=[]},prototypeAccessors$4={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};ContentMatch.parse=function(string,nodeTypes){var stream=new TokenStream(string,nodeTypes);if(null==stream.next)return ContentMatch.empty;var expr=parseExpr(stream);stream.next&&stream.err("Unexpected trailing text");var match=function(nfa){var labeled=Object.create(null);return function explore(states){var out=[];states.forEach((function(node){nfa[node].forEach((function(ref){var term=ref.term,to=ref.to;if(term){var known=out.indexOf(term),set=known>-1&&out[known+1];nullFrom(nfa,to).forEach((function(node){set||out.push(term,set=[]),-1==set.indexOf(node)&&set.push(node)}))}}))}));for(var state=labeled[states.join(",")]=new ContentMatch(states.indexOf(nfa.length-1)>-1),i=0;i<out.length;i+=2){var states$1=out[i+1].sort(cmp);state.next.push(out[i],labeled[states$1.join(",")]||explore(states$1))}return state}(nullFrom(nfa,0))}(function(expr){var nfa=[[]];return connect(function compile(expr,from){if("choice"==expr.type)return expr.exprs.reduce((function(out,expr){return out.concat(compile(expr,from))}),[]);if("seq"==expr.type)for(var i=0;;i++){var next=compile(expr.exprs[i],from);if(i==expr.exprs.length-1)return next;connect(next,from=node())}else{if("star"==expr.type){var loop=node();return edge(from,loop),connect(compile(expr.expr,loop),loop),[edge(loop)]}if("plus"==expr.type){var loop$1=node();return connect(compile(expr.expr,from),loop$1),connect(compile(expr.expr,loop$1),loop$1),[edge(loop$1)]}if("opt"==expr.type)return[edge(from)].concat(compile(expr.expr,from));if("range"==expr.type){for(var cur=from,i$1=0;i$1<expr.min;i$1++){var next$1=node();connect(compile(expr.expr,cur),next$1),cur=next$1}if(-1==expr.max)connect(compile(expr.expr,cur),cur);else for(var i$2=expr.min;i$2<expr.max;i$2++){var next$2=node();edge(cur,next$2),connect(compile(expr.expr,cur),next$2),cur=next$2}return[edge(cur)]}if("name"==expr.type)return[edge(from,null,expr.value)]}}(expr,0),node()),nfa;function node(){return nfa.push([])-1}function edge(from,to,term){var edge={term:term,to:to};return nfa[from].push(edge),edge}function connect(edges,to){edges.forEach((function(edge){return edge.to=to}))}}(expr));return function(match,stream){for(var i=0,work=[match];i<work.length;i++){for(var state=work[i],dead=!state.validEnd,nodes=[],j=0;j<state.next.length;j+=2){var node=state.next[j],next=state.next[j+1];nodes.push(node.name),!dead||node.isText||node.hasRequiredAttrs()||(dead=!1),-1==work.indexOf(next)&&work.push(next)}dead&&stream.err("Only non-generatable nodes ("+nodes.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(match,stream),match},ContentMatch.prototype.matchType=function(type){for(var i=0;i<this.next.length;i+=2)if(this.next[i]==type)return this.next[i+1];return null},ContentMatch.prototype.matchFragment=function(frag,start,end){void 0===start&&(start=0),void 0===end&&(end=frag.childCount);for(var cur=this,i=start;cur&&i<end;i++)cur=cur.matchType(frag.child(i).type);return cur},prototypeAccessors$4.inlineContent.get=function(){var first=this.next[0];return!!first&&first.isInline},prototypeAccessors$4.defaultType.get=function(){for(var i=0;i<this.next.length;i+=2){var type=this.next[i];if(!type.isText&&!type.hasRequiredAttrs())return type}},ContentMatch.prototype.compatible=function(other){for(var i=0;i<this.next.length;i+=2)for(var j=0;j<other.next.length;j+=2)if(this.next[i]==other.next[j])return!0;return!1},ContentMatch.prototype.fillBefore=function(after,toEnd,startIndex){void 0===toEnd&&(toEnd=!1),void 0===startIndex&&(startIndex=0);var seen=[this];return function search(match,types){var finished=match.matchFragment(after,startIndex);if(finished&&(!toEnd||finished.validEnd))return Fragment.from(types.map((function(tp){return tp.createAndFill()})));for(var i=0;i<match.next.length;i+=2){var type=match.next[i],next=match.next[i+1];if(!type.isText&&!type.hasRequiredAttrs()&&-1==seen.indexOf(next)){seen.push(next);var found=search(next,types.concat(type));if(found)return found}}}(this,[])},ContentMatch.prototype.findWrapping=function(target){for(var i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==target)return this.wrapCache[i+1];var computed=this.computeWrapping(target);return this.wrapCache.push(target,computed),computed},ContentMatch.prototype.computeWrapping=function(target){for(var seen=Object.create(null),active=[{match:this,type:null,via:null}];active.length;){var current=active.shift(),match=current.match;if(match.matchType(target)){for(var result=[],obj=current;obj.type;obj=obj.via)result.push(obj.type);return result.reverse()}for(var i=0;i<match.next.length;i+=2){var type=match.next[i];type.isLeaf||type.hasRequiredAttrs()||type.name in seen||current.type&&!match.next[i+1].validEnd||(active.push({match:type.contentMatch,type:type,via:current}),seen[type.name]=!0)}}},prototypeAccessors$4.edgeCount.get=function(){return this.next.length>>1},ContentMatch.prototype.edge=function(n){var i=n<<1;if(i>=this.next.length)throw new RangeError("There's no "+n+"th edge in this content match");return{type:this.next[i],next:this.next[i+1]}},ContentMatch.prototype.toString=function(){var seen=[];return function scan(m){seen.push(m);for(var i=1;i<m.next.length;i+=2)-1==seen.indexOf(m.next[i])&&scan(m.next[i])}(this),seen.map((function(m,i){for(var out=i+(m.validEnd?"*":" ")+" ",i$1=0;i$1<m.next.length;i$1+=2)out+=(i$1?", ":"")+m.next[i$1].name+"->"+seen.indexOf(m.next[i$1+1]);return out})).join("\n")},Object.defineProperties(ContentMatch.prototype,prototypeAccessors$4),ContentMatch.empty=new ContentMatch(!0);var TokenStream=function(string,nodeTypes){this.string=string,this.nodeTypes=nodeTypes,this.inline=null,this.pos=0,this.tokens=string.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},prototypeAccessors$1$2={next:{configurable:!0}};function parseExpr(stream){var exprs=[];do{exprs.push(parseExprSeq(stream))}while(stream.eat("|"));return 1==exprs.length?exprs[0]:{type:"choice",exprs:exprs}}function parseExprSeq(stream){var exprs=[];do{exprs.push(parseExprSubscript(stream))}while(stream.next&&")"!=stream.next&&"|"!=stream.next);return 1==exprs.length?exprs[0]:{type:"seq",exprs:exprs}}function parseExprSubscript(stream){for(var expr=function(stream){if(stream.eat("(")){var expr=parseExpr(stream);return stream.eat(")")||stream.err("Missing closing paren"),expr}if(!/\W/.test(stream.next)){var exprs=function(stream,name){var types=stream.nodeTypes,type=types[name];if(type)return[type];var result=[];for(var typeName in types){var type$1=types[typeName];type$1.groups.indexOf(name)>-1&&result.push(type$1)}return 0==result.length&&stream.err("No node type or group '"+name+"' found"),result}(stream,stream.next).map((function(type){return null==stream.inline?stream.inline=type.isInline:stream.inline!=type.isInline&&stream.err("Mixing inline and block content"),{type:"name",value:type}}));return stream.pos++,1==exprs.length?exprs[0]:{type:"choice",exprs:exprs}}stream.err("Unexpected token '"+stream.next+"'")}(stream);;)if(stream.eat("+"))expr={type:"plus",expr:expr};else if(stream.eat("*"))expr={type:"star",expr:expr};else if(stream.eat("?"))expr={type:"opt",expr:expr};else{if(!stream.eat("{"))break;expr=parseExprRange(stream,expr)}return expr}function parseNum(stream){/\D/.test(stream.next)&&stream.err("Expected number, got '"+stream.next+"'");var result=Number(stream.next);return stream.pos++,result}function parseExprRange(stream,expr){var min=parseNum(stream),max=min;return stream.eat(",")&&(max="}"!=stream.next?parseNum(stream):-1),stream.eat("}")||stream.err("Unclosed braced range"),{type:"range",min:min,max:max,expr:expr}}function cmp(a,b){return b-a}function nullFrom(nfa,node){var result=[];return function scan(node){var edges=nfa[node];if(1==edges.length&&!edges[0].term)return scan(edges[0].to);result.push(node);for(var i=0;i<edges.length;i++){var ref=edges[i],to=ref.to;ref.term||-1!=result.indexOf(to)||scan(to)}}(node),result.sort(cmp)}function defaultAttrs(attrs){var defaults=Object.create(null);for(var attrName in attrs){var attr=attrs[attrName];if(!attr.hasDefault)return null;defaults[attrName]=attr.default}return defaults}function computeAttrs(attrs,value){var built=Object.create(null);for(var name in attrs){var given=value&&value[name];if(void 0===given){var attr=attrs[name];if(!attr.hasDefault)throw new RangeError("No value supplied for attribute "+name);given=attr.default}built[name]=given}return built}function initAttrs(attrs){var result=Object.create(null);if(attrs)for(var name in attrs)result[name]=new Attribute(attrs[name]);return result}prototypeAccessors$1$2.next.get=function(){return this.tokens[this.pos]},TokenStream.prototype.eat=function(tok){return this.next==tok&&(this.pos++||!0)},TokenStream.prototype.err=function(str){throw new SyntaxError(str+" (in content expression '"+this.string+"')")},Object.defineProperties(TokenStream.prototype,prototypeAccessors$1$2);var NodeType=function(name,schema,spec){this.name=name,this.schema=schema,this.spec=spec,this.groups=spec.group?spec.group.split(" "):[],this.attrs=initAttrs(spec.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(spec.inline||"text"==name),this.isText="text"==name},prototypeAccessors$5={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};prototypeAccessors$5.isInline.get=function(){return!this.isBlock},prototypeAccessors$5.isTextblock.get=function(){return this.isBlock&&this.inlineContent},prototypeAccessors$5.isLeaf.get=function(){return this.contentMatch==ContentMatch.empty},prototypeAccessors$5.isAtom.get=function(){return this.isLeaf||this.spec.atom},NodeType.prototype.hasRequiredAttrs=function(){for(var n in this.attrs)if(this.attrs[n].isRequired)return!0;return!1},NodeType.prototype.compatibleContent=function(other){return this==other||this.contentMatch.compatible(other.contentMatch)},NodeType.prototype.computeAttrs=function(attrs){return!attrs&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,attrs)},NodeType.prototype.create=function(attrs,content,marks){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node(this,this.computeAttrs(attrs),Fragment.from(content),Mark.setFrom(marks))},NodeType.prototype.createChecked=function(attrs,content,marks){if(content=Fragment.from(content),!this.validContent(content))throw new RangeError("Invalid content for node "+this.name);return new Node(this,this.computeAttrs(attrs),content,Mark.setFrom(marks))},NodeType.prototype.createAndFill=function(attrs,content,marks){if(attrs=this.computeAttrs(attrs),(content=Fragment.from(content)).size){var before=this.contentMatch.fillBefore(content);if(!before)return null;content=before.append(content)}var after=this.contentMatch.matchFragment(content).fillBefore(Fragment.empty,!0);return after?new Node(this,attrs,content.append(after),Mark.setFrom(marks)):null},NodeType.prototype.validContent=function(content){var result=this.contentMatch.matchFragment(content);if(!result||!result.validEnd)return!1;for(var i=0;i<content.childCount;i++)if(!this.allowsMarks(content.child(i).marks))return!1;return!0},NodeType.prototype.allowsMarkType=function(markType){return null==this.markSet||this.markSet.indexOf(markType)>-1},NodeType.prototype.allowsMarks=function(marks){if(null==this.markSet)return!0;for(var i=0;i<marks.length;i++)if(!this.allowsMarkType(marks[i].type))return!1;return!0},NodeType.prototype.allowedMarks=function(marks){if(null==this.markSet)return marks;for(var copy,i=0;i<marks.length;i++)this.allowsMarkType(marks[i].type)?copy&&copy.push(marks[i]):copy||(copy=marks.slice(0,i));return copy?copy.length?copy:Mark.empty:marks},NodeType.compile=function(nodes,schema){var result=Object.create(null);nodes.forEach((function(name,spec){return result[name]=new NodeType(name,schema,spec)}));var topType=schema.spec.topNode||"doc";if(!result[topType])throw new RangeError("Schema is missing its top node type ('"+topType+"')");if(!result.text)throw new RangeError("Every schema needs a 'text' type");for(var _ in result.text.attrs)throw new RangeError("The text node type should not have attributes");return result},Object.defineProperties(NodeType.prototype,prototypeAccessors$5);var Attribute=function(options){this.hasDefault=Object.prototype.hasOwnProperty.call(options,"default"),this.default=options.default},prototypeAccessors$1$3={isRequired:{configurable:!0}};prototypeAccessors$1$3.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(Attribute.prototype,prototypeAccessors$1$3);var MarkType=function(name,rank,schema,spec){this.name=name,this.schema=schema,this.spec=spec,this.attrs=initAttrs(spec.attrs),this.rank=rank,this.excluded=null;var defaults=defaultAttrs(this.attrs);this.instance=defaults&&new Mark(this,defaults)};MarkType.prototype.create=function(attrs){return!attrs&&this.instance?this.instance:new Mark(this,computeAttrs(this.attrs,attrs))},MarkType.compile=function(marks,schema){var result=Object.create(null),rank=0;return marks.forEach((function(name,spec){return result[name]=new MarkType(name,rank++,schema,spec)})),result},MarkType.prototype.removeFromSet=function(set){for(var i=0;i<set.length;i++)if(set[i].type==this)return set.slice(0,i).concat(set.slice(i+1));return set},MarkType.prototype.isInSet=function(set){for(var i=0;i<set.length;i++)if(set[i].type==this)return set[i]},MarkType.prototype.excludes=function(other){return this.excluded.indexOf(other)>-1};var index_es_Schema=function(spec){for(var prop in this.spec={},spec)this.spec[prop]=spec[prop];this.spec.nodes=index_es.from(spec.nodes),this.spec.marks=index_es.from(spec.marks),this.nodes=NodeType.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);var contentExprCache=Object.create(null);for(var prop$1 in this.nodes){if(prop$1 in this.marks)throw new RangeError(prop$1+" can not be both a node and a mark");var type=this.nodes[prop$1],contentExpr=type.spec.content||"",markExpr=type.spec.marks;type.contentMatch=contentExprCache[contentExpr]||(contentExprCache[contentExpr]=ContentMatch.parse(contentExpr,this.nodes)),type.inlineContent=type.contentMatch.inlineContent,type.markSet="_"==markExpr?null:markExpr?gatherMarks(this,markExpr.split(" ")):""!=markExpr&&type.inlineContent?null:[]}for(var prop$2 in this.marks){var type$1=this.marks[prop$2],excl=type$1.spec.excludes;type$1.excluded=null==excl?[type$1]:""==excl?[]:gatherMarks(this,excl.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function gatherMarks(schema,marks){for(var found=[],i=0;i<marks.length;i++){var name=marks[i],mark=schema.marks[name],ok=mark;if(mark)found.push(mark);else for(var prop in schema.marks){var mark$1=schema.marks[prop];("_"==name||mark$1.spec.group&&mark$1.spec.group.split(" ").indexOf(name)>-1)&&found.push(ok=mark$1)}if(!ok)throw new SyntaxError("Unknown mark type: '"+marks[i]+"'")}return found}index_es_Schema.prototype.node=function(type,attrs,content,marks){if("string"==typeof type)type=this.nodeType(type);else{if(!(type instanceof NodeType))throw new RangeError("Invalid node type: "+type);if(type.schema!=this)throw new RangeError("Node type from different schema used ("+type.name+")")}return type.createChecked(attrs,content,marks)},index_es_Schema.prototype.text=function(text$1,marks){var type=this.nodes.text;return new TextNode(type,type.defaultAttrs,text$1,Mark.setFrom(marks))},index_es_Schema.prototype.mark=function(type,attrs){return"string"==typeof type&&(type=this.marks[type]),type.create(attrs)},index_es_Schema.prototype.nodeFromJSON=function(json){return Node.fromJSON(this,json)},index_es_Schema.prototype.markFromJSON=function(json){return Mark.fromJSON(this,json)},index_es_Schema.prototype.nodeType=function(name){var found=this.nodes[name];if(!found)throw new RangeError("Unknown node type: "+name);return found};var DOMParser=function(schema,rules){var this$1=this;this.schema=schema,this.rules=rules,this.tags=[],this.styles=[],rules.forEach((function(rule){rule.tag?this$1.tags.push(rule):rule.style&&this$1.styles.push(rule)})),this.normalizeLists=!this.tags.some((function(r){if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;var node=schema.nodes[r.node];return node.contentMatch.matchType(node)}))};DOMParser.prototype.parse=function(dom,options){void 0===options&&(options={});var context=new ParseContext(this,options,!1);return context.addAll(dom,null,options.from,options.to),context.finish()},DOMParser.prototype.parseSlice=function(dom,options){void 0===options&&(options={});var context=new ParseContext(this,options,!0);return context.addAll(dom,null,options.from,options.to),Slice.maxOpen(context.finish())},DOMParser.prototype.matchTag=function(dom,context){for(var i=0;i<this.tags.length;i++){var rule=this.tags[i];if(matches(dom,rule.tag)&&(void 0===rule.namespace||dom.namespaceURI==rule.namespace)&&(!rule.context||context.matchesContext(rule.context))){if(rule.getAttrs){var result=rule.getAttrs(dom);if(!1===result)continue;rule.attrs=result}return rule}}},DOMParser.prototype.matchStyle=function(prop,value,context){for(var i=0;i<this.styles.length;i++){var rule=this.styles[i];if(!(0!=rule.style.indexOf(prop)||rule.context&&!context.matchesContext(rule.context)||rule.style.length>prop.length&&(61!=rule.style.charCodeAt(prop.length)||rule.style.slice(prop.length+1)!=value))){if(rule.getAttrs){var result=rule.getAttrs(value);if(!1===result)continue;rule.attrs=result}return rule}}},DOMParser.schemaRules=function(schema){var result=[];function insert(rule){for(var priority=null==rule.priority?50:rule.priority,i=0;i<result.length;i++){var next=result[i];if((null==next.priority?50:next.priority)<priority)break}result.splice(i,0,rule)}var rules$1,loop=function(name){var rules=schema.marks[name].spec.parseDOM;rules&&rules.forEach((function(rule){insert(rule=copy(rule)),rule.mark=name}))};for(var name in schema.marks)loop(name);for(var name$1 in schema.nodes)rules$1=void 0,(rules$1=schema.nodes[name$1].spec.parseDOM)&&rules$1.forEach((function(rule){insert(rule=copy(rule)),rule.node=name$1}));return result},DOMParser.fromSchema=function(schema){return schema.cached.domParser||(schema.cached.domParser=new DOMParser(schema,DOMParser.schemaRules(schema)))};var blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0};function wsOptionsFor(preserveWhitespace){return(preserveWhitespace?1:0)|("full"===preserveWhitespace?2:0)}var NodeContext=function(type,attrs,marks,pendingMarks,solid,match,options){this.type=type,this.attrs=attrs,this.solid=solid,this.match=match||(4&options?null:type.contentMatch),this.options=options,this.content=[],this.marks=marks,this.activeMarks=Mark.none,this.pendingMarks=pendingMarks};NodeContext.prototype.findWrapping=function(node){if(!this.match){if(!this.type)return[];var fill=this.type.contentMatch.fillBefore(Fragment.from(node));if(!fill){var wrap,start=this.type.contentMatch;return(wrap=start.findWrapping(node.type))?(this.match=start,wrap):null}this.match=this.type.contentMatch.matchFragment(fill)}return this.match.findWrapping(node.type)},NodeContext.prototype.finish=function(openEnd){if(!(1&this.options)){var m,last=this.content[this.content.length-1];last&&last.isText&&(m=/[ \t\r\n\u000c]+$/.exec(last.text))&&(last.text.length==m[0].length?this.content.pop():this.content[this.content.length-1]=last.withText(last.text.slice(0,last.text.length-m[0].length)))}var content=Fragment.from(this.content);return!openEnd&&this.match&&(content=content.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,content,this.marks):content},NodeContext.prototype.applyPending=function(nextType){for(var i=0,pending=this.pendingMarks;i<pending.length;i++){var mark=pending[i];(this.type?this.type.allowsMarkType(mark.type):markMayApply(mark.type,nextType))&&!mark.isInSet(this.activeMarks)&&(this.activeMarks=mark.addToSet(this.activeMarks),this.pendingMarks=mark.removeFromSet(this.pendingMarks))}};var ParseContext=function(parser,options,open){this.parser=parser,this.options=options,this.isOpen=open;var topContext,topNode=options.topNode,topOptions=wsOptionsFor(options.preserveWhitespace)|(open?4:0);topContext=topNode?new NodeContext(topNode.type,topNode.attrs,Mark.none,Mark.none,!0,options.topMatch||topNode.type.contentMatch,topOptions):new NodeContext(open?null:parser.schema.topNodeType,null,Mark.none,Mark.none,!0,null,topOptions),this.nodes=[topContext],this.open=0,this.find=options.findPositions,this.needsBlock=!1},prototypeAccessors$6={top:{configurable:!0},currentPos:{configurable:!0}};function matches(dom,selector){return(dom.matches||dom.msMatchesSelector||dom.webkitMatchesSelector||dom.mozMatchesSelector).call(dom,selector)}function copy(obj){var copy={};for(var prop in obj)copy[prop]=obj[prop];return copy}function markMayApply(markType,nodeType){var nodes=nodeType.schema.nodes,loop=function(name){var parent=nodes[name];if(parent.allowsMarkType(markType)){var seen=[],scan=function(match){seen.push(match);for(var i=0;i<match.edgeCount;i++){var ref=match.edge(i),next=ref.next;if(ref.type==nodeType)return!0;if(seen.indexOf(next)<0&&scan(next))return!0}};return scan(parent.contentMatch)?{v:!0}:void 0}};for(var name in nodes){var returned=loop(name);if(returned)return returned.v}}prototypeAccessors$6.top.get=function(){return this.nodes[this.open]},ParseContext.prototype.addDOM=function(dom){if(3==dom.nodeType)this.addTextNode(dom);else if(1==dom.nodeType){var style=dom.getAttribute("style"),marks=style?this.readStyles(function(style){for(var m,re=/\s*([\w-]+)\s*:\s*([^;]+)/g,result=[];m=re.exec(style);)result.push(m[1],m[2].trim());return result}(style)):null,top=this.top;if(null!=marks)for(var i=0;i<marks.length;i++)this.addPendingMark(marks[i]);if(this.addElement(dom),null!=marks)for(var i$1=0;i$1<marks.length;i$1++)this.removePendingMark(marks[i$1],top)}},ParseContext.prototype.addTextNode=function(dom){var value=dom.nodeValue,top=this.top;if((top.type?top.type.inlineContent:top.content.length&&top.content[0].isInline)||/[^ \t\r\n\u000c]/.test(value)){if(1&top.options)2&top.options||(value=value.replace(/\r?\n|\r/g," "));else if(value=value.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(value)&&this.open==this.nodes.length-1){var nodeBefore=top.content[top.content.length-1],domNodeBefore=dom.previousSibling;(!nodeBefore||domNodeBefore&&"BR"==domNodeBefore.nodeName||nodeBefore.isText&&/[ \t\r\n\u000c]$/.test(nodeBefore.text))&&(value=value.slice(1))}value&&this.insertNode(this.parser.schema.text(value)),this.findInText(dom)}else this.findInside(dom)},ParseContext.prototype.addElement=function(dom){var name=dom.nodeName.toLowerCase();listTags.hasOwnProperty(name)&&this.normalizeLists&&function(dom){for(var child=dom.firstChild,prevItem=null;child;child=child.nextSibling){var name=1==child.nodeType?child.nodeName.toLowerCase():null;name&&listTags.hasOwnProperty(name)&&prevItem?(prevItem.appendChild(child),child=prevItem):"li"==name?prevItem=child:name&&(prevItem=null)}}(dom);var rule=this.options.ruleFromNode&&this.options.ruleFromNode(dom)||this.parser.matchTag(dom,this);if(rule?rule.ignore:ignoreTags.hasOwnProperty(name))this.findInside(dom);else if(!rule||rule.skip||rule.closeParent){rule&&rule.closeParent?this.open=Math.max(0,this.open-1):rule&&rule.skip.nodeType&&(dom=rule.skip);var sync,top=this.top,oldNeedsBlock=this.needsBlock;if(blockTags.hasOwnProperty(name))sync=!0,top.type||(this.needsBlock=!0);else if(!dom.firstChild)return void this.leafFallback(dom);this.addAll(dom),sync&&this.sync(top),this.needsBlock=oldNeedsBlock}else this.addElementByRule(dom,rule)},ParseContext.prototype.leafFallback=function(dom){"BR"==dom.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(dom.ownerDocument.createTextNode("\n"))},ParseContext.prototype.readStyles=function(styles){for(var marks=Mark.none,i=0;i<styles.length;i+=2){var rule=this.parser.matchStyle(styles[i],styles[i+1],this);if(rule){if(rule.ignore)return null;marks=this.parser.schema.marks[rule.mark].create(rule.attrs).addToSet(marks)}}return marks},ParseContext.prototype.addElementByRule=function(dom,rule){var sync,nodeType,mark,this$1=this;rule.node?(nodeType=this.parser.schema.nodes[rule.node]).isLeaf?this.insertNode(nodeType.create(rule.attrs))||this.leafFallback(dom):sync=this.enter(nodeType,rule.attrs,rule.preserveWhitespace):(mark=this.parser.schema.marks[rule.mark].create(rule.attrs),this.addPendingMark(mark));var startIn=this.top;if(nodeType&&nodeType.isLeaf)this.findInside(dom);else if(rule.getContent)this.findInside(dom),rule.getContent(dom,this.parser.schema).forEach((function(node){return this$1.insertNode(node)}));else{var contentDOM=rule.contentElement;"string"==typeof contentDOM?contentDOM=dom.querySelector(contentDOM):"function"==typeof contentDOM&&(contentDOM=contentDOM(dom)),contentDOM||(contentDOM=dom),this.findAround(dom,contentDOM,!0),this.addAll(contentDOM,sync)}sync&&(this.sync(startIn),this.open--),mark&&this.removePendingMark(mark,startIn)},ParseContext.prototype.addAll=function(parent,sync,startIndex,endIndex){for(var index=startIndex||0,dom=startIndex?parent.childNodes[startIndex]:parent.firstChild,end=null==endIndex?null:parent.childNodes[endIndex];dom!=end;dom=dom.nextSibling,++index)this.findAtPoint(parent,index),this.addDOM(dom),sync&&blockTags.hasOwnProperty(dom.nodeName.toLowerCase())&&this.sync(sync);this.findAtPoint(parent,index)},ParseContext.prototype.findPlace=function(node){for(var route,sync,depth=this.open;depth>=0;depth--){var cx=this.nodes[depth],found=cx.findWrapping(node);if(found&&(!route||route.length>found.length)&&(route=found,sync=cx,!found.length))break;if(cx.solid)break}if(!route)return!1;this.sync(sync);for(var i=0;i<route.length;i++)this.enterInner(route[i],null,!1);return!0},ParseContext.prototype.insertNode=function(node){if(node.isInline&&this.needsBlock&&!this.top.type){var block=this.textblockFromContext();block&&this.enterInner(block)}if(this.findPlace(node)){this.closeExtra();var top=this.top;top.applyPending(node.type),top.match&&(top.match=top.match.matchType(node.type));for(var marks=top.activeMarks,i=0;i<node.marks.length;i++)top.type&&!top.type.allowsMarkType(node.marks[i].type)||(marks=node.marks[i].addToSet(marks));return top.content.push(node.mark(marks)),!0}return!1},ParseContext.prototype.enter=function(type,attrs,preserveWS){var ok=this.findPlace(type.create(attrs));return ok&&this.enterInner(type,attrs,!0,preserveWS),ok},ParseContext.prototype.enterInner=function(type,attrs,solid,preserveWS){this.closeExtra();var top=this.top;top.applyPending(type),top.match=top.match&&top.match.matchType(type,attrs);var options=null==preserveWS?-5&top.options:wsOptionsFor(preserveWS);4&top.options&&0==top.content.length&&(options|=4),this.nodes.push(new NodeContext(type,attrs,top.activeMarks,top.pendingMarks,solid,null,options)),this.open++},ParseContext.prototype.closeExtra=function(openEnd){var i=this.nodes.length-1;if(i>this.open){for(;i>this.open;i--)this.nodes[i-1].content.push(this.nodes[i].finish(openEnd));this.nodes.length=this.open+1}},ParseContext.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},ParseContext.prototype.sync=function(to){for(var i=this.open;i>=0;i--)if(this.nodes[i]==to)return void(this.open=i)},prototypeAccessors$6.currentPos.get=function(){this.closeExtra();for(var pos=0,i=this.open;i>=0;i--){for(var content=this.nodes[i].content,j=content.length-1;j>=0;j--)pos+=content[j].nodeSize;i&&pos++}return pos},ParseContext.prototype.findAtPoint=function(parent,offset){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==parent&&this.find[i].offset==offset&&(this.find[i].pos=this.currentPos)},ParseContext.prototype.findInside=function(parent){if(this.find)for(var i=0;i<this.find.length;i++)null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node)&&(this.find[i].pos=this.currentPos)},ParseContext.prototype.findAround=function(parent,content,before){if(parent!=content&&this.find)for(var i=0;i<this.find.length;i++)null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node)&&content.compareDocumentPosition(this.find[i].node)&(before?2:4)&&(this.find[i].pos=this.currentPos)},ParseContext.prototype.findInText=function(textNode){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==textNode&&(this.find[i].pos=this.currentPos-(textNode.nodeValue.length-this.find[i].offset))},ParseContext.prototype.matchesContext=function(context){var this$1=this;if(context.indexOf("|")>-1)return context.split(/\s*\|\s*/).some(this.matchesContext,this);var parts=context.split("/"),option=this.options.context,useRoot=!(this.isOpen||option&&option.parent.type!=this.nodes[0].type),minDepth=(useRoot?0:1)-(option?option.depth+1:0),match=function(i,depth){for(;i>=0;i--){var part=parts[i];if(""==part){if(i==parts.length-1||0==i)continue;for(;depth>=minDepth;depth--)if(match(i-1,depth))return!0;return!1}var next=depth>0||0==depth&&useRoot?this$1.nodes[depth].type:option&&depth>=minDepth?option.node(depth-minDepth).type:null;if(!next||next.name!=part&&-1==next.groups.indexOf(part))return!1;depth--}return!0};return match(parts.length-1,this.open)},ParseContext.prototype.textblockFromContext=function(){var $context=this.options.context;if($context)for(var d=$context.depth;d>=0;d--){var deflt=$context.node(d).contentMatchAt($context.indexAfter(d)).defaultType;if(deflt&&deflt.isTextblock&&deflt.defaultAttrs)return deflt}for(var name in this.parser.schema.nodes){var type=this.parser.schema.nodes[name];if(type.isTextblock&&type.defaultAttrs)return type}},ParseContext.prototype.addPendingMark=function(mark){this.top.pendingMarks=mark.addToSet(this.top.pendingMarks)},ParseContext.prototype.removePendingMark=function(mark,upto){for(var depth=this.open;depth>=0;depth--){var level=this.nodes[depth];if(level.pendingMarks.lastIndexOf(mark)>-1?level.pendingMarks=mark.removeFromSet(level.pendingMarks):level.activeMarks=mark.removeFromSet(level.activeMarks),level==upto)break}},Object.defineProperties(ParseContext.prototype,prototypeAccessors$6);var DOMSerializer=function(nodes,marks){this.nodes=nodes||{},this.marks=marks||{}};function gatherToDOM(obj){var result={};for(var name in obj){var toDOM=obj[name].spec.toDOM;toDOM&&(result[name]=toDOM)}return result}function doc(options){return options.document||window.document}DOMSerializer.prototype.serializeFragment=function(fragment,options,target){var this$1=this;void 0===options&&(options={}),target||(target=doc(options).createDocumentFragment());var top=target,active=null;return fragment.forEach((function(node){if(active||node.marks.length){active||(active=[]);for(var keep=0,rendered=0;keep<active.length&&rendered<node.marks.length;){var next=node.marks[rendered];if(this$1.marks[next.type.name]){if(!next.eq(active[keep])||!1===next.type.spec.spanning)break;keep+=2,rendered++}else rendered++}for(;keep<active.length;)top=active.pop(),active.pop();for(;rendered<node.marks.length;){var add=node.marks[rendered++],markDOM=this$1.serializeMark(add,node.isInline,options);markDOM&&(active.push(add,top),top.appendChild(markDOM.dom),top=markDOM.contentDOM||markDOM.dom)}}top.appendChild(this$1.serializeNode(node,options))})),target},DOMSerializer.prototype.serializeNode=function(node,options){void 0===options&&(options={});var ref=DOMSerializer.renderSpec(doc(options),this.nodes[node.type.name](node)),dom=ref.dom,contentDOM=ref.contentDOM;if(contentDOM){if(node.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");options.onContent?options.onContent(node,contentDOM,options):this.serializeFragment(node.content,options,contentDOM)}return dom},DOMSerializer.prototype.serializeNodeAndMarks=function(node,options){void 0===options&&(options={});for(var dom=this.serializeNode(node,options),i=node.marks.length-1;i>=0;i--){var wrap=this.serializeMark(node.marks[i],node.isInline,options);wrap&&((wrap.contentDOM||wrap.dom).appendChild(dom),dom=wrap.dom)}return dom},DOMSerializer.prototype.serializeMark=function(mark,inline,options){void 0===options&&(options={});var toDOM=this.marks[mark.type.name];return toDOM&&DOMSerializer.renderSpec(doc(options),toDOM(mark,inline))},DOMSerializer.renderSpec=function(doc,structure,xmlNS){if(void 0===xmlNS&&(xmlNS=null),"string"==typeof structure)return{dom:doc.createTextNode(structure)};if(null!=structure.nodeType)return{dom:structure};var tagName=structure[0],space=tagName.indexOf(" ");space>0&&(xmlNS=tagName.slice(0,space),tagName=tagName.slice(space+1));var contentDOM=null,dom=xmlNS?doc.createElementNS(xmlNS,tagName):doc.createElement(tagName),attrs=structure[1],start=1;if(attrs&&"object"==typeof attrs&&null==attrs.nodeType&&!Array.isArray(attrs))for(var name in start=2,attrs)if(null!=attrs[name]){var space$1=name.indexOf(" ");space$1>0?dom.setAttributeNS(name.slice(0,space$1),name.slice(space$1+1),attrs[name]):dom.setAttribute(name,attrs[name])}for(var i=start;i<structure.length;i++){var child=structure[i];if(0===child){if(i<structure.length-1||i>start)throw new RangeError("Content hole must be the only child of its parent node");return{dom:dom,contentDOM:dom}}var ref=DOMSerializer.renderSpec(doc,child,xmlNS),innerContent=ref.contentDOM;if(dom.appendChild(ref.dom),innerContent){if(contentDOM)throw new RangeError("Multiple content holes");contentDOM=innerContent}}return{dom:dom,contentDOM:contentDOM}},DOMSerializer.fromSchema=function(schema){return schema.cached.domSerializer||(schema.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(schema),this.marksFromSchema(schema)))},DOMSerializer.nodesFromSchema=function(schema){var result=gatherToDOM(schema.nodes);return result.text||(result.text=function(node){return node.text}),result},DOMSerializer.marksFromSchema=function(schema){return gatherToDOM(schema.marks)}},"UxO+":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AllSelection",(function(){return AllSelection})),__webpack_require__.d(__webpack_exports__,"EditorState",(function(){return EditorState})),__webpack_require__.d(__webpack_exports__,"NodeSelection",(function(){return NodeSelection})),__webpack_require__.d(__webpack_exports__,"Plugin",(function(){return Plugin})),__webpack_require__.d(__webpack_exports__,"PluginKey",(function(){return PluginKey})),__webpack_require__.d(__webpack_exports__,"Selection",(function(){return Selection})),__webpack_require__.d(__webpack_exports__,"SelectionRange",(function(){return SelectionRange})),__webpack_require__.d(__webpack_exports__,"TextSelection",(function(){return TextSelection})),__webpack_require__.d(__webpack_exports__,"Transaction",(function(){return Transaction}));var prosemirror_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("MEpN"),prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("CsC6"),classesById=Object.create(null),Selection=function($anchor,$head,ranges){this.ranges=ranges||[new SelectionRange($anchor.min($head),$anchor.max($head))],this.$anchor=$anchor,this.$head=$head},prototypeAccessors={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};prototypeAccessors.anchor.get=function(){return this.$anchor.pos},prototypeAccessors.head.get=function(){return this.$head.pos},prototypeAccessors.from.get=function(){return this.$from.pos},prototypeAccessors.to.get=function(){return this.$to.pos},prototypeAccessors.$from.get=function(){return this.ranges[0].$from},prototypeAccessors.$to.get=function(){return this.ranges[0].$to},prototypeAccessors.empty.get=function(){for(var ranges=this.ranges,i=0;i<ranges.length;i++)if(ranges[i].$from.pos!=ranges[i].$to.pos)return!1;return!0},Selection.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},Selection.prototype.replace=function(tr,content){void 0===content&&(content=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty);for(var lastNode=content.content.lastChild,lastParent=null,i=0;i<content.openEnd;i++)lastParent=lastNode,lastNode=lastNode.lastChild;for(var mapFrom=tr.steps.length,ranges=this.ranges,i$1=0;i$1<ranges.length;i$1++){var ref=ranges[i$1],$from=ref.$from,$to=ref.$to,mapping=tr.mapping.slice(mapFrom);tr.replaceRange(mapping.map($from.pos),mapping.map($to.pos),i$1?prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty:content),0==i$1&&selectionToInsertionEnd(tr,mapFrom,(lastNode?lastNode.isInline:lastParent&&lastParent.isTextblock)?-1:1)}},Selection.prototype.replaceWith=function(tr,node){for(var mapFrom=tr.steps.length,ranges=this.ranges,i=0;i<ranges.length;i++){var ref=ranges[i],$from=ref.$from,$to=ref.$to,mapping=tr.mapping.slice(mapFrom),from=mapping.map($from.pos),to=mapping.map($to.pos);i?tr.deleteRange(from,to):(tr.replaceRangeWith(from,to,node),selectionToInsertionEnd(tr,mapFrom,node.isInline?-1:1))}},Selection.findFrom=function($pos,dir,textOnly){var inner=$pos.parent.inlineContent?new TextSelection($pos):findSelectionIn($pos.node(0),$pos.parent,$pos.pos,$pos.index(),dir,textOnly);if(inner)return inner;for(var depth=$pos.depth-1;depth>=0;depth--){var found=dir<0?findSelectionIn($pos.node(0),$pos.node(depth),$pos.before(depth+1),$pos.index(depth),dir,textOnly):findSelectionIn($pos.node(0),$pos.node(depth),$pos.after(depth+1),$pos.index(depth)+1,dir,textOnly);if(found)return found}},Selection.near=function($pos,bias){return void 0===bias&&(bias=1),this.findFrom($pos,bias)||this.findFrom($pos,-bias)||new AllSelection($pos.node(0))},Selection.atStart=function(doc){return findSelectionIn(doc,doc,0,0,1)||new AllSelection(doc)},Selection.atEnd=function(doc){return findSelectionIn(doc,doc,doc.content.size,doc.childCount,-1)||new AllSelection(doc)},Selection.fromJSON=function(doc,json){if(!json||!json.type)throw new RangeError("Invalid input for Selection.fromJSON");var cls=classesById[json.type];if(!cls)throw new RangeError("No selection type "+json.type+" defined");return cls.fromJSON(doc,json)},Selection.jsonID=function(id,selectionClass){if(id in classesById)throw new RangeError("Duplicate use of selection JSON ID "+id);return classesById[id]=selectionClass,selectionClass.prototype.jsonID=id,selectionClass},Selection.prototype.getBookmark=function(){return TextSelection.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(Selection.prototype,prototypeAccessors),Selection.prototype.visible=!0;var SelectionRange=function($from,$to){this.$from=$from,this.$to=$to},TextSelection=function(Selection){function TextSelection($anchor,$head){void 0===$head&&($head=$anchor),Selection.call(this,$anchor,$head)}Selection&&(TextSelection.__proto__=Selection),(TextSelection.prototype=Object.create(Selection&&Selection.prototype)).constructor=TextSelection;var prototypeAccessors$1={$cursor:{configurable:!0}};return prototypeAccessors$1.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},TextSelection.prototype.map=function(doc,mapping){var $head=doc.resolve(mapping.map(this.head));if(!$head.parent.inlineContent)return Selection.near($head);var $anchor=doc.resolve(mapping.map(this.anchor));return new TextSelection($anchor.parent.inlineContent?$anchor:$head,$head)},TextSelection.prototype.replace=function(tr,content){if(void 0===content&&(content=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty),Selection.prototype.replace.call(this,tr,content),content==prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty){var marks=this.$from.marksAcross(this.$to);marks&&tr.ensureMarks(marks)}},TextSelection.prototype.eq=function(other){return other instanceof TextSelection&&other.anchor==this.anchor&&other.head==this.head},TextSelection.prototype.getBookmark=function(){return new TextBookmark(this.anchor,this.head)},TextSelection.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},TextSelection.fromJSON=function(doc,json){if("number"!=typeof json.anchor||"number"!=typeof json.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(doc.resolve(json.anchor),doc.resolve(json.head))},TextSelection.create=function(doc,anchor,head){void 0===head&&(head=anchor);var $anchor=doc.resolve(anchor);return new this($anchor,head==anchor?$anchor:doc.resolve(head))},TextSelection.between=function($anchor,$head,bias){var dPos=$anchor.pos-$head.pos;if(bias&&!dPos||(bias=dPos>=0?1:-1),!$head.parent.inlineContent){var found=Selection.findFrom($head,bias,!0)||Selection.findFrom($head,-bias,!0);if(!found)return Selection.near($head,bias);$head=found.$head}return $anchor.parent.inlineContent||(0==dPos||($anchor=(Selection.findFrom($anchor,-bias,!0)||Selection.findFrom($anchor,bias,!0)).$anchor).pos<$head.pos!=dPos<0)&&($anchor=$head),new TextSelection($anchor,$head)},Object.defineProperties(TextSelection.prototype,prototypeAccessors$1),TextSelection}(Selection);Selection.jsonID("text",TextSelection);var TextBookmark=function(anchor,head){this.anchor=anchor,this.head=head};TextBookmark.prototype.map=function(mapping){return new TextBookmark(mapping.map(this.anchor),mapping.map(this.head))},TextBookmark.prototype.resolve=function(doc){return TextSelection.between(doc.resolve(this.anchor),doc.resolve(this.head))};var NodeSelection=function(Selection){function NodeSelection($pos){var node=$pos.nodeAfter,$end=$pos.node(0).resolve($pos.pos+node.nodeSize);Selection.call(this,$pos,$end),this.node=node}return Selection&&(NodeSelection.__proto__=Selection),(NodeSelection.prototype=Object.create(Selection&&Selection.prototype)).constructor=NodeSelection,NodeSelection.prototype.map=function(doc,mapping){var ref=mapping.mapResult(this.anchor),deleted=ref.deleted,$pos=doc.resolve(ref.pos);return deleted?Selection.near($pos):new NodeSelection($pos)},NodeSelection.prototype.content=function(){return new prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Fragment.from(this.node),0,0)},NodeSelection.prototype.eq=function(other){return other instanceof NodeSelection&&other.anchor==this.anchor},NodeSelection.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},NodeSelection.prototype.getBookmark=function(){return new NodeBookmark(this.anchor)},NodeSelection.fromJSON=function(doc,json){if("number"!=typeof json.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(doc.resolve(json.anchor))},NodeSelection.create=function(doc,from){return new this(doc.resolve(from))},NodeSelection.isSelectable=function(node){return!node.isText&&!1!==node.type.spec.selectable},NodeSelection}(Selection);NodeSelection.prototype.visible=!1,Selection.jsonID("node",NodeSelection);var NodeBookmark=function(anchor){this.anchor=anchor};NodeBookmark.prototype.map=function(mapping){var ref=mapping.mapResult(this.anchor),pos=ref.pos;return ref.deleted?new TextBookmark(pos,pos):new NodeBookmark(pos)},NodeBookmark.prototype.resolve=function(doc){var $pos=doc.resolve(this.anchor),node=$pos.nodeAfter;return node&&NodeSelection.isSelectable(node)?new NodeSelection($pos):Selection.near($pos)};var AllSelection=function(Selection){function AllSelection(doc){Selection.call(this,doc.resolve(0),doc.resolve(doc.content.size))}return Selection&&(AllSelection.__proto__=Selection),(AllSelection.prototype=Object.create(Selection&&Selection.prototype)).constructor=AllSelection,AllSelection.prototype.replace=function(tr,content){if(void 0===content&&(content=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty),content==prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Slice.empty){tr.delete(0,tr.doc.content.size);var sel=Selection.atStart(tr.doc);sel.eq(tr.selection)||tr.setSelection(sel)}else Selection.prototype.replace.call(this,tr,content)},AllSelection.prototype.toJSON=function(){return{type:"all"}},AllSelection.fromJSON=function(doc){return new AllSelection(doc)},AllSelection.prototype.map=function(doc){return new AllSelection(doc)},AllSelection.prototype.eq=function(other){return other instanceof AllSelection},AllSelection.prototype.getBookmark=function(){return AllBookmark},AllSelection}(Selection);Selection.jsonID("all",AllSelection);var AllBookmark={map:function(){return this},resolve:function(doc){return new AllSelection(doc)}};function findSelectionIn(doc,node,pos,index,dir,text){if(node.inlineContent)return TextSelection.create(doc,pos);for(var i=index-(dir>0?0:1);dir>0?i<node.childCount:i>=0;i+=dir){var child=node.child(i);if(child.isAtom){if(!text&&NodeSelection.isSelectable(child))return NodeSelection.create(doc,pos-(dir<0?child.nodeSize:0))}else{var inner=findSelectionIn(doc,child,pos+dir,dir<0?child.childCount:0,dir,text);if(inner)return inner}pos+=child.nodeSize*dir}}function selectionToInsertionEnd(tr,startLen,bias){var last=tr.steps.length-1;if(!(last<startLen)){var end,step=tr.steps[last];(step instanceof prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__.e||step instanceof prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__.d)&&(tr.mapping.maps[last].forEach((function(_from,_to,_newFrom,newTo){null==end&&(end=newTo)})),tr.setSelection(Selection.near(tr.doc.resolve(end),bias)))}}var Transaction=function(Transform){function Transaction(state){Transform.call(this,state.doc),this.time=Date.now(),this.curSelection=state.selection,this.curSelectionFor=0,this.storedMarks=state.storedMarks,this.updated=0,this.meta=Object.create(null)}Transform&&(Transaction.__proto__=Transform),(Transaction.prototype=Object.create(Transform&&Transform.prototype)).constructor=Transaction;var prototypeAccessors={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return prototypeAccessors.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},Transaction.prototype.setSelection=function(selection){if(selection.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=selection,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},prototypeAccessors.selectionSet.get=function(){return(1&this.updated)>0},Transaction.prototype.setStoredMarks=function(marks){return this.storedMarks=marks,this.updated|=2,this},Transaction.prototype.ensureMarks=function(marks){return prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),marks)||this.setStoredMarks(marks),this},Transaction.prototype.addStoredMark=function(mark){return this.ensureMarks(mark.addToSet(this.storedMarks||this.selection.$head.marks()))},Transaction.prototype.removeStoredMark=function(mark){return this.ensureMarks(mark.removeFromSet(this.storedMarks||this.selection.$head.marks()))},prototypeAccessors.storedMarksSet.get=function(){return(2&this.updated)>0},Transaction.prototype.addStep=function(step,doc){Transform.prototype.addStep.call(this,step,doc),this.updated=-3&this.updated,this.storedMarks=null},Transaction.prototype.setTime=function(time){return this.time=time,this},Transaction.prototype.replaceSelection=function(slice){return this.selection.replace(this,slice),this},Transaction.prototype.replaceSelectionWith=function(node,inheritMarks){var selection=this.selection;return!1!==inheritMarks&&(node=node.mark(this.storedMarks||(selection.empty?selection.$from.marks():selection.$from.marksAcross(selection.$to)||prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Mark.none))),selection.replaceWith(this,node),this},Transaction.prototype.deleteSelection=function(){return this.selection.replace(this),this},Transaction.prototype.insertText=function(text,from,to){void 0===to&&(to=from);var schema=this.doc.type.schema;if(null==from)return text?this.replaceSelectionWith(schema.text(text),!0):this.deleteSelection();if(!text)return this.deleteRange(from,to);var marks=this.storedMarks;if(!marks){var $from=this.doc.resolve(from);marks=to==from?$from.marks():$from.marksAcross(this.doc.resolve(to))}return this.replaceRangeWith(from,to,schema.text(text,marks)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this},Transaction.prototype.setMeta=function(key,value){return this.meta["string"==typeof key?key:key.key]=value,this},Transaction.prototype.getMeta=function(key){return this.meta["string"==typeof key?key:key.key]},prototypeAccessors.isGeneric.get=function(){for(var _ in this.meta)return!1;return!0},Transaction.prototype.scrollIntoView=function(){return this.updated|=4,this},prototypeAccessors.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(Transaction.prototype,prototypeAccessors),Transaction}(prosemirror_transform__WEBPACK_IMPORTED_MODULE_1__.f);function bind(f,self){return self&&f?f.bind(self):f}var FieldDesc=function(name,desc,self){this.name=name,this.init=bind(desc.init,self),this.apply=bind(desc.apply,self)},baseFields=[new FieldDesc("doc",{init:function(config){return config.doc||config.schema.topNodeType.createAndFill()},apply:function(tr){return tr.doc}}),new FieldDesc("selection",{init:function(config,instance){return config.selection||Selection.atStart(instance.doc)},apply:function(tr){return tr.selection}}),new FieldDesc("storedMarks",{init:function(config){return config.storedMarks||null},apply:function(tr,_marks,_old,state){return state.selection.$cursor?tr.storedMarks:null}}),new FieldDesc("scrollToSelection",{init:function(){return 0},apply:function(tr,prev){return tr.scrolledIntoView?prev+1:prev}})],Configuration=function(schema,plugins){var this$1=this;this.schema=schema,this.fields=baseFields.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),plugins&&plugins.forEach((function(plugin){if(this$1.pluginsByKey[plugin.key])throw new RangeError("Adding different instances of a keyed plugin ("+plugin.key+")");this$1.plugins.push(plugin),this$1.pluginsByKey[plugin.key]=plugin,plugin.spec.state&&this$1.fields.push(new FieldDesc(plugin.key,plugin.spec.state,plugin))}))},EditorState=function(config){this.config=config},prototypeAccessors$1={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};prototypeAccessors$1.schema.get=function(){return this.config.schema},prototypeAccessors$1.plugins.get=function(){return this.config.plugins},EditorState.prototype.apply=function(tr){return this.applyTransaction(tr).state},EditorState.prototype.filterTransaction=function(tr,ignore){void 0===ignore&&(ignore=-1);for(var i=0;i<this.config.plugins.length;i++)if(i!=ignore){var plugin=this.config.plugins[i];if(plugin.spec.filterTransaction&&!plugin.spec.filterTransaction.call(plugin,tr,this))return!1}return!0},EditorState.prototype.applyTransaction=function(rootTr){if(!this.filterTransaction(rootTr))return{state:this,transactions:[]};for(var trs=[rootTr],newState=this.applyInner(rootTr),seen=null;;){for(var haveNew=!1,i=0;i<this.config.plugins.length;i++){var plugin=this.config.plugins[i];if(plugin.spec.appendTransaction){var n=seen?seen[i].n:0,oldState=seen?seen[i].state:this,tr=n<trs.length&&plugin.spec.appendTransaction.call(plugin,n?trs.slice(n):trs,oldState,newState);if(tr&&newState.filterTransaction(tr,i)){if(tr.setMeta("appendedTransaction",rootTr),!seen){seen=[];for(var j=0;j<this.config.plugins.length;j++)seen.push(j<i?{state:newState,n:trs.length}:{state:this,n:0})}trs.push(tr),newState=newState.applyInner(tr),haveNew=!0}seen&&(seen[i]={state:newState,n:trs.length})}}if(!haveNew)return{state:newState,transactions:trs}}},EditorState.prototype.applyInner=function(tr){if(!tr.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var newInstance=new EditorState(this.config),fields=this.config.fields,i=0;i<fields.length;i++){var field=fields[i];newInstance[field.name]=field.apply(tr,this[field.name],this,newInstance)}for(var i$1=0;i$1<applyListeners.length;i$1++)applyListeners[i$1](this,tr,newInstance);return newInstance},prototypeAccessors$1.tr.get=function(){return new Transaction(this)},EditorState.create=function(config){for(var $config=new Configuration(config.schema||config.doc.type.schema,config.plugins),instance=new EditorState($config),i=0;i<$config.fields.length;i++)instance[$config.fields[i].name]=$config.fields[i].init(config,instance);return instance},EditorState.prototype.reconfigure=function(config){for(var $config=new Configuration(config.schema||this.schema,config.plugins),fields=$config.fields,instance=new EditorState($config),i=0;i<fields.length;i++){var name=fields[i].name;instance[name]=this.hasOwnProperty(name)?this[name]:fields[i].init(config,instance)}return instance},EditorState.prototype.toJSON=function(pluginFields){var result={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(result.storedMarks=this.storedMarks.map((function(m){return m.toJSON()}))),pluginFields&&"object"==typeof pluginFields)for(var prop in pluginFields){if("doc"==prop||"selection"==prop)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var plugin=pluginFields[prop],state=plugin.spec.state;state&&state.toJSON&&(result[prop]=state.toJSON.call(plugin,this[plugin.key]))}return result},EditorState.fromJSON=function(config,json,pluginFields){if(!json)throw new RangeError("Invalid input for EditorState.fromJSON");if(!config.schema)throw new RangeError("Required config field 'schema' missing");var $config=new Configuration(config.schema,config.plugins),instance=new EditorState($config);return $config.fields.forEach((function(field){if("doc"==field.name)instance.doc=prosemirror_model__WEBPACK_IMPORTED_MODULE_0__.Node.fromJSON(config.schema,json.doc);else if("selection"==field.name)instance.selection=Selection.fromJSON(instance.doc,json.selection);else if("storedMarks"==field.name)json.storedMarks&&(instance.storedMarks=json.storedMarks.map(config.schema.markFromJSON));else{if(pluginFields)for(var prop in pluginFields){var plugin=pluginFields[prop],state=plugin.spec.state;if(plugin.key==field.name&&state&&state.fromJSON&&Object.prototype.hasOwnProperty.call(json,prop))return void(instance[field.name]=state.fromJSON.call(plugin,config,json[prop],instance))}instance[field.name]=field.init(config,instance)}})),instance},EditorState.addApplyListener=function(f){applyListeners.push(f)},EditorState.removeApplyListener=function(f){var found=applyListeners.indexOf(f);found>-1&&applyListeners.splice(found,1)},Object.defineProperties(EditorState.prototype,prototypeAccessors$1);var applyListeners=[],Plugin=function(spec){this.props={},spec.props&&function bindProps(obj,self,target){for(var prop in obj){var val=obj[prop];val instanceof Function?val=val.bind(self):"handleDOMEvents"==prop&&(val=bindProps(val,self,{})),target[prop]=val}return target}(spec.props,this,this.props),this.spec=spec,this.key=spec.key?spec.key.key:createKey("plugin")};Plugin.prototype.getState=function(state){return state[this.key]};var keys=Object.create(null);function createKey(name){return name in keys?name+"$"+ ++keys[name]:(keys[name]=0,name+"$")}var PluginKey=function(name){void 0===name&&(name="key"),this.key=createKey(name)};PluginKey.prototype.get=function(state){return state.config.pluginsByKey[this.key]},PluginKey.prototype.getState=function(state){return state[this.key]}},V2qZ:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Decoration",(function(){return Decoration})),__webpack_require__.d(__webpack_exports__,"DecorationSet",(function(){return DecorationSet})),__webpack_require__.d(__webpack_exports__,"EditorView",(function(){return EditorView})),__webpack_require__.d(__webpack_exports__,"__endComposition",(function(){return endComposition})),__webpack_require__.d(__webpack_exports__,"__parseFromClipboard",(function(){return parseFromClipboard})),__webpack_require__.d(__webpack_exports__,"__serializeForClipboard",(function(){return serializeForClipboard}));var prosemirror_state__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("UxO+"),prosemirror_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("MEpN"),prosemirror_transform__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("CsC6"),result={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var ie_edge=/Edge\/(\d+)/.exec(navigator.userAgent),ie_upto10=/MSIE \d/.test(navigator.userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);result.mac=/Mac/.test(navigator.platform);var ie=result.ie=!!(ie_upto10||ie_11up||ie_edge);result.ie_version=ie_upto10?document.documentMode||6:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:null,result.gecko=!ie&&/gecko\/(\d+)/i.test(navigator.userAgent),result.gecko_version=result.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var chrome=!ie&&/Chrome\/(\d+)/.exec(navigator.userAgent);result.chrome=!!chrome,result.chrome_version=chrome&&+chrome[1],result.ios=!ie&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),result.android=/Android \d/.test(navigator.userAgent),result.webkit="webkitFontSmoothing"in document.documentElement.style,result.safari=/Apple Computer/.test(navigator.vendor),result.webkit_version=result.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var domIndex=function(node){for(var index=0;;index++)if(!(node=node.previousSibling))return index},parentNode=function(node){var parent=node.parentNode;return parent&&11==parent.nodeType?parent.host:parent},textRange=function(node,from,to){var range=document.createRange();return range.setEnd(node,null==to?node.nodeValue.length:to),range.setStart(node,from||0),range},isEquivalentPosition=function(node,off,targetNode,targetOff){return targetNode&&(scanFor(node,off,targetNode,targetOff,-1)||scanFor(node,off,targetNode,targetOff,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(node,off,targetNode,targetOff,dir){for(;;){if(node==targetNode&&off==targetOff)return!0;if(off==(dir<0?0:nodeSize(node))){var parent=node.parentNode;if(1!=parent.nodeType||hasBlockDesc(node)||atomElements.test(node.nodeName)||"false"==node.contentEditable)return!1;off=domIndex(node)+(dir<0?0:1),node=parent}else{if(1!=node.nodeType)return!1;if("false"==(node=node.childNodes[off+(dir<0?-1:0)]).contentEditable)return!1;off=dir<0?nodeSize(node):0}}}function nodeSize(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function hasBlockDesc(dom){for(var desc,cur=dom;cur&&!(desc=cur.pmViewDesc);cur=cur.parentNode);return desc&&desc.node&&desc.node.isBlock&&(desc.dom==dom||desc.contentDOM==dom)}var selectionCollapsed=function(domSel){var collapsed=domSel.isCollapsed;return collapsed&&result.chrome&&domSel.rangeCount&&!domSel.getRangeAt(0).collapsed&&(collapsed=!1),collapsed};function keyEvent(keyCode,key){var event=document.createEvent("Event");return event.initEvent("keydown",!0,!0),event.keyCode=keyCode,event.key=event.code=key,event}function windowRect(doc){return{left:0,right:doc.documentElement.clientWidth,top:0,bottom:doc.documentElement.clientHeight}}function getSide(value,side){return"number"==typeof value?value:value[side]}function clientRect(node){var rect=node.getBoundingClientRect();return{left:rect.left,right:rect.left+node.clientWidth,top:rect.top,bottom:rect.top+node.clientHeight}}function scrollStack(dom){for(var stack=[],doc=dom.ownerDocument;dom&&(stack.push({dom:dom,top:dom.scrollTop,left:dom.scrollLeft}),dom!=doc);dom=parentNode(dom));return stack}function restoreScrollStack(stack,dTop){for(var i=0;i<stack.length;i++){var ref=stack[i],dom=ref.dom,top=ref.top,left=ref.left;dom.scrollTop!=top+dTop&&(dom.scrollTop=top+dTop),dom.scrollLeft!=left&&(dom.scrollLeft=left)}}var preventScrollSupported=null;function inRect(coords,rect){return coords.left>=rect.left-1&&coords.left<=rect.right+1&&coords.top>=rect.top-1&&coords.top<=rect.bottom+1}function singleRect(object,bias){var rects=object.getClientRects();return rects.length?rects[bias<0?0:rects.length-1]:object.getBoundingClientRect()}function coordsAtPos(view,pos){var ref=view.docView.domFromPos(pos),node=ref.node,offset=ref.offset;if(3==node.nodeType&&(result.webkit||result.gecko)){var rect=singleRect(textRange(node,offset,offset),0);if(result.gecko&&offset&&/\s/.test(node.nodeValue[offset-1])&&offset<node.nodeValue.length){var rectBefore=singleRect(textRange(node,offset-1,offset-1),-1);if(rectBefore.top==rect.top){var rectAfter=singleRect(textRange(node,offset,offset+1),-1);if(rectAfter.top!=rect.top)return flattenV(rectAfter,rectAfter.left<rectBefore.left)}}return rect}if(1==node.nodeType&&!view.state.doc.resolve(pos).parent.inlineContent){var rect$1,top=!0;if(offset<node.childNodes.length){var after=node.childNodes[offset];1==after.nodeType&&(rect$1=after.getBoundingClientRect())}if(!rect$1&&offset){var before=node.childNodes[offset-1];1==before.nodeType&&(rect$1=before.getBoundingClientRect(),top=!1)}return function(rect,top){if(0==rect.height)return rect;var y=top?rect.top:rect.bottom;return{top:y,bottom:y,left:rect.left,right:rect.right}}(rect$1||node.getBoundingClientRect(),top)}for(var dir=-1;dir<2;dir+=2)if(dir<0&&offset){var prev=void 0,target=3==node.nodeType?textRange(node,offset-1,offset):3==(prev=node.childNodes[offset-1]).nodeType?textRange(prev):1==prev.nodeType&&"BR"!=prev.nodeName?prev:null;if(target){var rect$2=singleRect(target,1);if(rect$2.top<rect$2.bottom)return flattenV(rect$2,!1)}}else if(dir>0&&offset<nodeSize(node)){var next=void 0,target$1=3==node.nodeType?textRange(node,offset,offset+1):3==(next=node.childNodes[offset]).nodeType?textRange(next):1==next.nodeType?next:null;if(target$1){var rect$3=singleRect(target$1,-1);if(rect$3.top<rect$3.bottom)return flattenV(rect$3,!0)}}return flattenV(singleRect(3==node.nodeType?textRange(node):node,0),!1)}function flattenV(rect,left){if(0==rect.width)return rect;var x=left?rect.left:rect.right;return{top:rect.top,bottom:rect.bottom,left:x,right:x}}function withFlushedState(view,state,f){var viewState=view.state,active=view.root.activeElement;viewState!=state&&view.updateState(state),active!=view.dom&&view.focus();try{return f()}finally{viewState!=state&&view.updateState(viewState),active!=view.dom&&active&&active.focus()}}var maybeRTL=/[\u0590-\u08ac]/,cachedState=null,cachedDir=null,cachedResult=!1,ViewDesc=function(parent,children,dom,contentDOM){this.parent=parent,this.children=children,this.dom=dom,dom.pmViewDesc=this,this.contentDOM=contentDOM,this.dirty=0},prototypeAccessors={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};ViewDesc.prototype.matchesWidget=function(){return!1},ViewDesc.prototype.matchesMark=function(){return!1},ViewDesc.prototype.matchesNode=function(){return!1},ViewDesc.prototype.matchesHack=function(){return!1},prototypeAccessors.beforePosition.get=function(){return!1},ViewDesc.prototype.parseRule=function(){return null},ViewDesc.prototype.stopEvent=function(){return!1},prototypeAccessors.size.get=function(){for(var size=0,i=0;i<this.children.length;i++)size+=this.children[i].size;return size},prototypeAccessors.border.get=function(){return 0},ViewDesc.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var i=0;i<this.children.length;i++)this.children[i].destroy()},ViewDesc.prototype.posBeforeChild=function(child){for(var i=0,pos=this.posAtStart;i<this.children.length;i++){var cur=this.children[i];if(cur==child)return pos;pos+=cur.size}},prototypeAccessors.posBefore.get=function(){return this.parent.posBeforeChild(this)},prototypeAccessors.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},prototypeAccessors.posAfter.get=function(){return this.posBefore+this.size},prototypeAccessors.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},ViewDesc.prototype.localPosFromDOM=function(dom,offset,bias){if(this.contentDOM&&this.contentDOM.contains(1==dom.nodeType?dom:dom.parentNode)){if(bias<0){var domBefore,desc;if(dom==this.contentDOM)domBefore=dom.childNodes[offset-1];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domBefore=dom.previousSibling}for(;domBefore&&(!(desc=domBefore.pmViewDesc)||desc.parent!=this);)domBefore=domBefore.previousSibling;return domBefore?this.posBeforeChild(desc)+desc.size:this.posAtStart}var domAfter,desc$1;if(dom==this.contentDOM)domAfter=dom.childNodes[offset];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domAfter=dom.nextSibling}for(;domAfter&&(!(desc$1=domAfter.pmViewDesc)||desc$1.parent!=this);)domAfter=domAfter.nextSibling;return domAfter?this.posBeforeChild(desc$1):this.posAtEnd}var atEnd;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))atEnd=2&dom.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==offset)for(var search=dom;;search=search.parentNode){if(search==this.dom){atEnd=!1;break}if(search.parentNode.firstChild!=search)break}if(null==atEnd&&offset==dom.childNodes.length)for(var search$1=dom;;search$1=search$1.parentNode){if(search$1==this.dom){atEnd=!0;break}if(search$1.parentNode.lastChild!=search$1)break}}return(null==atEnd?bias>0:atEnd)?this.posAtEnd:this.posAtStart},ViewDesc.prototype.nearestDesc=function(dom,onlyNodes){for(var first=!0,cur=dom;cur;cur=cur.parentNode){var desc=this.getDesc(cur);if(desc&&(!onlyNodes||desc.node)){if(!first||!desc.nodeDOM||(1==desc.nodeDOM.nodeType?desc.nodeDOM.contains(1==dom.nodeType?dom:dom.parentNode):desc.nodeDOM==dom))return desc;first=!1}}},ViewDesc.prototype.getDesc=function(dom){for(var desc=dom.pmViewDesc,cur=desc;cur;cur=cur.parent)if(cur==this)return desc},ViewDesc.prototype.posFromDOM=function(dom,offset,bias){for(var scan=dom;scan;scan=scan.parentNode){var desc=this.getDesc(scan);if(desc)return desc.localPosFromDOM(dom,offset,bias)}return-1},ViewDesc.prototype.descAt=function(pos){for(var i=0,offset=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(offset==pos&&end!=offset){for(;!child.border&&child.children.length;)child=child.children[0];return child}if(pos<end)return child.descAt(pos-offset-child.border);offset=end}},ViewDesc.prototype.domFromPos=function(pos){if(!this.contentDOM)return{node:this.dom,offset:0};for(var offset=0,i=0;;i++){if(offset==pos){for(;i<this.children.length&&(this.children[i].beforePosition||this.children[i].dom.parentNode!=this.contentDOM);)i++;return{node:this.contentDOM,offset:i==this.children.length?this.contentDOM.childNodes.length:domIndex(this.children[i].dom)}}if(i==this.children.length)throw new Error("Invalid position "+pos);var child=this.children[i],end=offset+child.size;if(pos<end)return child.domFromPos(pos-offset-child.border);offset=end}},ViewDesc.prototype.parseRange=function(from,to,base){if(void 0===base&&(base=0),0==this.children.length)return{node:this.contentDOM,from:from,to:to,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var fromOffset=-1,toOffset=-1,offset=base,i=0;;i++){var child=this.children[i],end=offset+child.size;if(-1==fromOffset&&from<=end){var childBase=offset+child.border;if(from>=childBase&&to<=end-child.border&&child.node&&child.contentDOM&&this.contentDOM.contains(child.contentDOM))return child.parseRange(from,to,childBase);from=offset;for(var j=i;j>0;j--){var prev=this.children[j-1];if(prev.size&&prev.dom.parentNode==this.contentDOM&&!prev.emptyChildAt(1)){fromOffset=domIndex(prev.dom)+1;break}from-=prev.size}-1==fromOffset&&(fromOffset=0)}if(fromOffset>-1&&to<=end){to=end;for(var j$1=i+1;j$1<this.children.length;j$1++){var next=this.children[j$1];if(next.size&&next.dom.parentNode==this.contentDOM&&!next.emptyChildAt(-1)){toOffset=domIndex(next.dom);break}to+=next.size}-1==toOffset&&(toOffset=this.contentDOM.childNodes.length);break}offset=end}return{node:this.contentDOM,from:from,to:to,fromOffset:fromOffset,toOffset:toOffset}},ViewDesc.prototype.emptyChildAt=function(side){if(this.border||!this.contentDOM||!this.children.length)return!1;var child=this.children[side<0?0:this.children.length-1];return 0==child.size||child.emptyChildAt(side)},ViewDesc.prototype.domAfterPos=function(pos){var ref=this.domFromPos(pos),node=ref.node,offset=ref.offset;if(1!=node.nodeType||offset==node.childNodes.length)throw new RangeError("No node after pos "+pos);return node.childNodes[offset]},ViewDesc.prototype.setSelection=function(anchor,head,root,force){for(var from=Math.min(anchor,head),to=Math.max(anchor,head),i=0,offset=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(from>offset&&to<end)return child.setSelection(anchor-offset-child.border,head-offset-child.border,root,force);offset=end}var anchorDOM=this.domFromPos(anchor),headDOM=this.domFromPos(head),domSel=root.getSelection();if(force||!isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)||!isEquivalentPosition(headDOM.node,headDOM.offset,domSel.focusNode,domSel.focusOffset)){var domSelExtended=!1;if(domSel.extend||anchor==head){domSel.collapse(anchorDOM.node,anchorDOM.offset);try{anchor!=head&&domSel.extend(headDOM.node,headDOM.offset),domSelExtended=!0}catch(err){if(!(err instanceof DOMException))throw err}}if(!domSelExtended){if(anchor>head){var tmp=anchorDOM;anchorDOM=headDOM,headDOM=tmp}var range=document.createRange();range.setEnd(headDOM.node,headDOM.offset),range.setStart(anchorDOM.node,anchorDOM.offset),domSel.removeAllRanges(),domSel.addRange(range)}}},ViewDesc.prototype.ignoreMutation=function(mutation){return!this.contentDOM&&"selection"!=mutation.type},prototypeAccessors.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},ViewDesc.prototype.markDirty=function(from,to){for(var offset=0,i=0;i<this.children.length;i++){var child=this.children[i],end=offset+child.size;if(offset==end?from<=end&&to>=offset:from<end&&to>offset){var startInside=offset+child.border,endInside=end-child.border;if(from>=startInside&&to<=endInside)return this.dirty=from==offset||to==end?2:1,void(from!=startInside||to!=endInside||!child.contentLost&&child.dom.parentNode==this.contentDOM?child.markDirty(from-startInside,to-startInside):child.dirty=3);child.dirty=3}offset=end}this.dirty=2},ViewDesc.prototype.markParentsDirty=function(){for(var level=1,node=this.parent;node;node=node.parent,level++){var dirty=1==level?2:1;node.dirty<dirty&&(node.dirty=dirty)}},Object.defineProperties(ViewDesc.prototype,prototypeAccessors);var nothing=[],WidgetViewDesc=function(ViewDesc){function WidgetViewDesc(parent,widget,view,pos){var self,dom=widget.type.toDOM;if("function"==typeof dom&&(dom=dom(view,(function(){return self?self.parent?self.parent.posBeforeChild(self):void 0:pos}))),!widget.type.spec.raw){if(1!=dom.nodeType){var wrap=document.createElement("span");wrap.appendChild(dom),dom=wrap}dom.contentEditable=!1,dom.classList.add("ProseMirror-widget")}ViewDesc.call(this,parent,nothing,dom,null),this.widget=widget,self=this}ViewDesc&&(WidgetViewDesc.__proto__=ViewDesc),(WidgetViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype)).constructor=WidgetViewDesc;var prototypeAccessors$1={beforePosition:{configurable:!0}};return prototypeAccessors$1.beforePosition.get=function(){return this.widget.type.side<0},WidgetViewDesc.prototype.matchesWidget=function(widget){return 0==this.dirty&&widget.type.eq(this.widget.type)},WidgetViewDesc.prototype.parseRule=function(){return{ignore:!0}},WidgetViewDesc.prototype.stopEvent=function(event){var stop=this.widget.spec.stopEvent;return!!stop&&stop(event)},WidgetViewDesc.prototype.ignoreMutation=function(mutation){return"selection"!=mutation.type||this.widget.spec.ignoreSelection},Object.defineProperties(WidgetViewDesc.prototype,prototypeAccessors$1),WidgetViewDesc}(ViewDesc),CompositionViewDesc=function(ViewDesc){function CompositionViewDesc(parent,dom,textDOM,text){ViewDesc.call(this,parent,nothing,dom,null),this.textDOM=textDOM,this.text=text}ViewDesc&&(CompositionViewDesc.__proto__=ViewDesc),(CompositionViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype)).constructor=CompositionViewDesc;var prototypeAccessors$2={size:{configurable:!0}};return prototypeAccessors$2.size.get=function(){return this.text.length},CompositionViewDesc.prototype.localPosFromDOM=function(dom,offset){return dom!=this.textDOM?this.posAtStart+(offset?this.size:0):this.posAtStart+offset},CompositionViewDesc.prototype.domFromPos=function(pos){return{node:this.textDOM,offset:pos}},CompositionViewDesc.prototype.ignoreMutation=function(mut){return"characterData"===mut.type&&mut.target.nodeValue==mut.oldValue},Object.defineProperties(CompositionViewDesc.prototype,prototypeAccessors$2),CompositionViewDesc}(ViewDesc),MarkViewDesc=function(ViewDesc){function MarkViewDesc(parent,mark,dom,contentDOM){ViewDesc.call(this,parent,[],dom,contentDOM),this.mark=mark}return ViewDesc&&(MarkViewDesc.__proto__=ViewDesc),(MarkViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype)).constructor=MarkViewDesc,MarkViewDesc.create=function(parent,mark,inline,view){var custom=view.nodeViews[mark.type.name],spec=custom&&custom(mark,view,inline);return spec&&spec.dom||(spec=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.DOMSerializer.renderSpec(document,mark.type.spec.toDOM(mark,inline))),new MarkViewDesc(parent,mark,spec.dom,spec.contentDOM||spec.dom)},MarkViewDesc.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},MarkViewDesc.prototype.matchesMark=function(mark){return 3!=this.dirty&&this.mark.eq(mark)},MarkViewDesc.prototype.markDirty=function(from,to){if(ViewDesc.prototype.markDirty.call(this,from,to),0!=this.dirty){for(var parent=this.parent;!parent.node;)parent=parent.parent;parent.dirty<this.dirty&&(parent.dirty=this.dirty),this.dirty=0}},MarkViewDesc.prototype.slice=function(from,to,view){var copy=MarkViewDesc.create(this.parent,this.mark,!0,view),nodes=this.children,size=this.size;to<size&&(nodes=replaceNodes(nodes,to,size,view)),from>0&&(nodes=replaceNodes(nodes,0,from,view));for(var i=0;i<nodes.length;i++)nodes[i].parent=copy;return copy.children=nodes,copy},MarkViewDesc}(ViewDesc),NodeViewDesc=function(ViewDesc){function NodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos){ViewDesc.call(this,parent,node.isLeaf?nothing:[],dom,contentDOM),this.nodeDOM=nodeDOM,this.node=node,this.outerDeco=outerDeco,this.innerDeco=innerDeco,contentDOM&&this.updateChildren(view,pos)}ViewDesc&&(NodeViewDesc.__proto__=ViewDesc),(NodeViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype)).constructor=NodeViewDesc;var prototypeAccessors$3={size:{configurable:!0},border:{configurable:!0}};return NodeViewDesc.create=function(parent,node,outerDeco,innerDeco,view,pos){var assign,descObj,custom=view.nodeViews[node.type.name],spec=custom&&custom(node,view,(function(){return descObj?descObj.parent?descObj.parent.posBeforeChild(descObj):void 0:pos}),outerDeco),dom=spec&&spec.dom,contentDOM=spec&&spec.contentDOM;if(node.isText)if(dom){if(3!=dom.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else dom=document.createTextNode(node.text);else dom||(dom=(assign=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.DOMSerializer.renderSpec(document,node.type.spec.toDOM(node))).dom,contentDOM=assign.contentDOM);contentDOM||node.isText||"BR"==dom.nodeName||(dom.hasAttribute("contenteditable")||(dom.contentEditable=!1),node.type.spec.draggable&&(dom.draggable=!0));var nodeDOM=dom;return dom=applyOuterDeco(dom,outerDeco,node),spec?descObj=new CustomNodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,spec,view,pos+1):node.isText?new TextViewDesc(parent,node,outerDeco,innerDeco,dom,nodeDOM,view):new NodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos+1)},NodeViewDesc.prototype.parseRule=function(){var this$1=this;if(this.node.type.spec.reparseInView)return null;var rule={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(rule.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?rule.contentElement=this.contentDOM:rule.getContent=function(){return this$1.contentDOM?prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty:this$1.node.content},rule},NodeViewDesc.prototype.matchesNode=function(node,outerDeco,innerDeco){return 0==this.dirty&&node.eq(this.node)&&sameOuterDeco(outerDeco,this.outerDeco)&&innerDeco.eq(this.innerDeco)},prototypeAccessors$3.size.get=function(){return this.node.nodeSize},prototypeAccessors$3.border.get=function(){return this.node.isLeaf?0:1},NodeViewDesc.prototype.updateChildren=function(view,pos){var this$1=this,inline=this.node.inlineContent,off=pos,composition=inline&&view.composing&&this.localCompositionNode(view,pos),updater=new ViewTreeUpdater(this,composition&&composition.node);!function(parent,deco,onWidget,onNode){var locals=deco.locals(parent),offset=0;if(0!=locals.length)for(var decoIndex=0,active=[],restNode=null,parentIndex=0;;){if(decoIndex<locals.length&&locals[decoIndex].to==offset){for(var widget=locals[decoIndex++],widgets=void 0;decoIndex<locals.length&&locals[decoIndex].to==offset;)(widgets||(widgets=[widget])).push(locals[decoIndex++]);if(widgets){widgets.sort(compareSide);for(var i$1=0;i$1<widgets.length;i$1++)onWidget(widgets[i$1],parentIndex,!!restNode)}else onWidget(widget,parentIndex,!!restNode)}var child$1=void 0,index=void 0;if(restNode)index=-1,child$1=restNode,restNode=null;else{if(!(parentIndex<parent.childCount))break;index=parentIndex,child$1=parent.child(parentIndex++)}for(var i$2=0;i$2<active.length;i$2++)active[i$2].to<=offset&&active.splice(i$2--,1);for(;decoIndex<locals.length&&locals[decoIndex].from<=offset&&locals[decoIndex].to>offset;)active.push(locals[decoIndex++]);var end=offset+child$1.nodeSize;if(child$1.isText){var cutAt=end;decoIndex<locals.length&&locals[decoIndex].from<cutAt&&(cutAt=locals[decoIndex].from);for(var i$3=0;i$3<active.length;i$3++)active[i$3].to<cutAt&&(cutAt=active[i$3].to);cutAt<end&&(restNode=child$1.cut(cutAt-offset),child$1=child$1.cut(0,cutAt-offset),end=cutAt,index=-1)}onNode(child$1,active.length?active.slice():nothing,deco.forChild(offset,child$1),index),offset=end}else for(var i=0;i<parent.childCount;i++){var child=parent.child(i);onNode(child,locals,deco.forChild(offset,child),i),offset+=child.nodeSize}}(this.node,this.innerDeco,(function(widget,i,insideNode){widget.spec.marks?updater.syncToMarks(widget.spec.marks,inline,view):widget.type.side>=0&&!insideNode&&updater.syncToMarks(i==this$1.node.childCount?prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Mark.none:this$1.node.child(i).marks,inline,view),updater.placeWidget(widget,view,off)}),(function(child,outerDeco,innerDeco,i){updater.syncToMarks(child.marks,inline,view),updater.findNodeMatch(child,outerDeco,innerDeco,i)||updater.updateNextNode(child,outerDeco,innerDeco,view,i)||updater.addNode(child,outerDeco,innerDeco,view,off),off+=child.nodeSize})),updater.syncToMarks(nothing,inline,view),this.node.isTextblock&&updater.addTextblockHacks(),updater.destroyRest(),(updater.changed||2==this.dirty)&&(composition&&this.protectLocalComposition(view,composition),this.renderChildren())},NodeViewDesc.prototype.renderChildren=function(){!function renderDescs(parentDOM,descs){for(var dom=parentDOM.firstChild,i=0;i<descs.length;i++){var desc=descs[i],childDOM=desc.dom;if(childDOM.parentNode==parentDOM){for(;childDOM!=dom;)dom=rm(dom);dom=dom.nextSibling}else parentDOM.insertBefore(childDOM,dom);if(desc instanceof MarkViewDesc){var pos=dom?dom.previousSibling:parentDOM.lastChild;renderDescs(desc.contentDOM,desc.children),dom=pos?pos.nextSibling:parentDOM.firstChild}}for(;dom;)dom=rm(dom)}(this.contentDOM,this.children),result.ios&&function(dom){if("UL"==dom.nodeName||"OL"==dom.nodeName){var oldCSS=dom.style.cssText;dom.style.cssText=oldCSS+"; list-style: square !important",window.getComputedStyle(dom),dom.style.cssText=oldCSS}}(this.dom)},NodeViewDesc.prototype.localCompositionNode=function(view,pos){var ref=view.state.selection,from=ref.from,to=ref.to;if(!(!(view.state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection)||from<pos||to>pos+this.node.content.size)){var sel=view.root.getSelection(),textNode=function(node,offset){for(;;){if(3==node.nodeType)return node;if(1==node.nodeType&&offset>0){if(node.childNodes.length>offset&&3==node.childNodes[offset].nodeType)return node.childNodes[offset];offset=nodeSize(node=node.childNodes[offset-1])}else{if(!(1==node.nodeType&&offset<node.childNodes.length))return null;node=node.childNodes[offset],offset=0}}}(sel.focusNode,sel.focusOffset);if(textNode&&this.dom.contains(textNode.parentNode)){var text=textNode.nodeValue,textPos=function(frag,text,from,to){for(var i=0,pos=0;i<frag.childCount&&pos<=to;){var child=frag.child(i++),childStart=pos;if(pos+=child.nodeSize,child.isText){for(var str=child.text;i<frag.childCount;){var next=frag.child(i++);if(pos+=next.nodeSize,!next.isText)break;str+=next.text}if(pos>=from){var found=str.lastIndexOf(text,to-childStart);if(found>=0&&found+text.length+childStart>=from)return childStart+found}}}return-1}(this.node.content,text,from-pos,to-pos);return textPos<0?null:{node:textNode,pos:textPos,text:text}}}},NodeViewDesc.prototype.protectLocalComposition=function(view,ref){var node=ref.node,pos=ref.pos,text=ref.text;if(!this.getDesc(node)){for(var topNode=node;topNode.parentNode!=this.contentDOM;topNode=topNode.parentNode){for(;topNode.previousSibling;)topNode.parentNode.removeChild(topNode.previousSibling);for(;topNode.nextSibling;)topNode.parentNode.removeChild(topNode.nextSibling);topNode.pmViewDesc&&(topNode.pmViewDesc=null)}var desc=new CompositionViewDesc(this,topNode,node,text);view.compositionNodes.push(desc),this.children=replaceNodes(this.children,pos,pos+text.length,view,desc)}},NodeViewDesc.prototype.update=function(node,outerDeco,innerDeco,view){return!(3==this.dirty||!node.sameMarkup(this.node)||(this.updateInner(node,outerDeco,innerDeco,view),0))},NodeViewDesc.prototype.updateInner=function(node,outerDeco,innerDeco,view){this.updateOuterDeco(outerDeco),this.node=node,this.innerDeco=innerDeco,this.contentDOM&&this.updateChildren(view,this.posAtStart),this.dirty=0},NodeViewDesc.prototype.updateOuterDeco=function(outerDeco){if(!sameOuterDeco(outerDeco,this.outerDeco)){var needsWrap=1!=this.nodeDOM.nodeType,oldDOM=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,needsWrap),computeOuterDeco(outerDeco,this.node,needsWrap)),this.dom!=oldDOM&&(oldDOM.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=outerDeco}},NodeViewDesc.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},NodeViewDesc.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(NodeViewDesc.prototype,prototypeAccessors$3),NodeViewDesc}(ViewDesc);function docViewDesc(doc,outerDeco,innerDeco,dom,view){return applyOuterDeco(dom,outerDeco,doc),new NodeViewDesc(null,doc,outerDeco,innerDeco,dom,dom,dom,view,0)}var TextViewDesc=function(NodeViewDesc){function TextViewDesc(parent,node,outerDeco,innerDeco,dom,nodeDOM,view){NodeViewDesc.call(this,parent,node,outerDeco,innerDeco,dom,null,nodeDOM,view)}return NodeViewDesc&&(TextViewDesc.__proto__=NodeViewDesc),(TextViewDesc.prototype=Object.create(NodeViewDesc&&NodeViewDesc.prototype)).constructor=TextViewDesc,TextViewDesc.prototype.parseRule=function(){for(var skip=this.nodeDOM.parentNode;skip&&skip!=this.dom&&!skip.pmIsDeco;)skip=skip.parentNode;return{skip:skip||!0}},TextViewDesc.prototype.update=function(node,outerDeco){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!node.sameMarkup(this.node)||(this.updateOuterDeco(outerDeco),0==this.dirty&&node.text==this.node.text||node.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=node.text),this.node=node,this.dirty=0,0))},TextViewDesc.prototype.inParent=function(){for(var parentDOM=this.parent.contentDOM,n=this.nodeDOM;n;n=n.parentNode)if(n==parentDOM)return!0;return!1},TextViewDesc.prototype.domFromPos=function(pos){return{node:this.nodeDOM,offset:pos}},TextViewDesc.prototype.localPosFromDOM=function(dom,offset,bias){return dom==this.nodeDOM?this.posAtStart+Math.min(offset,this.node.text.length):NodeViewDesc.prototype.localPosFromDOM.call(this,dom,offset,bias)},TextViewDesc.prototype.ignoreMutation=function(mutation){return"characterData"!=mutation.type&&"selection"!=mutation.type},TextViewDesc.prototype.slice=function(from,to,view){var node=this.node.cut(from,to),dom=document.createTextNode(node.text);return new TextViewDesc(this.parent,node,this.outerDeco,this.innerDeco,dom,dom,view)},TextViewDesc}(NodeViewDesc),BRHackViewDesc=function(ViewDesc){function BRHackViewDesc(){ViewDesc.apply(this,arguments)}return ViewDesc&&(BRHackViewDesc.__proto__=ViewDesc),(BRHackViewDesc.prototype=Object.create(ViewDesc&&ViewDesc.prototype)).constructor=BRHackViewDesc,BRHackViewDesc.prototype.parseRule=function(){return{ignore:!0}},BRHackViewDesc.prototype.matchesHack=function(){return 0==this.dirty},BRHackViewDesc}(ViewDesc),CustomNodeViewDesc=function(NodeViewDesc){function CustomNodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,spec,view,pos){NodeViewDesc.call(this,parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos),this.spec=spec}return NodeViewDesc&&(CustomNodeViewDesc.__proto__=NodeViewDesc),(CustomNodeViewDesc.prototype=Object.create(NodeViewDesc&&NodeViewDesc.prototype)).constructor=CustomNodeViewDesc,CustomNodeViewDesc.prototype.update=function(node,outerDeco,innerDeco,view){if(3==this.dirty)return!1;if(this.spec.update){var result=this.spec.update(node,outerDeco);return result&&this.updateInner(node,outerDeco,innerDeco,view),result}return!(!this.contentDOM&&!node.isLeaf)&&NodeViewDesc.prototype.update.call(this,node,outerDeco,innerDeco,view)},CustomNodeViewDesc.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():NodeViewDesc.prototype.selectNode.call(this)},CustomNodeViewDesc.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():NodeViewDesc.prototype.deselectNode.call(this)},CustomNodeViewDesc.prototype.setSelection=function(anchor,head,root,force){this.spec.setSelection?this.spec.setSelection(anchor,head,root):NodeViewDesc.prototype.setSelection.call(this,anchor,head,root,force)},CustomNodeViewDesc.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),NodeViewDesc.prototype.destroy.call(this)},CustomNodeViewDesc.prototype.stopEvent=function(event){return!!this.spec.stopEvent&&this.spec.stopEvent(event)},CustomNodeViewDesc.prototype.ignoreMutation=function(mutation){return this.spec.ignoreMutation?this.spec.ignoreMutation(mutation):NodeViewDesc.prototype.ignoreMutation.call(this,mutation)},CustomNodeViewDesc}(NodeViewDesc);function OuterDecoLevel(nodeName){nodeName&&(this.nodeName=nodeName)}OuterDecoLevel.prototype=Object.create(null);var noDeco=[new OuterDecoLevel];function computeOuterDeco(outerDeco,node,needsWrap){if(0==outerDeco.length)return noDeco;for(var top=needsWrap?noDeco[0]:new OuterDecoLevel,result=[top],i=0;i<outerDeco.length;i++){var attrs=outerDeco[i].type.attrs,cur=top;if(attrs)for(var name in attrs.nodeName&&result.push(cur=new OuterDecoLevel(attrs.nodeName)),attrs){var val=attrs[name];null!=val&&(needsWrap&&1==result.length&&result.push(cur=top=new OuterDecoLevel(node.isInline?"span":"div")),"class"==name?cur.class=(cur.class?cur.class+" ":"")+val:"style"==name?cur.style=(cur.style?cur.style+";":"")+val:"nodeName"!=name&&(cur[name]=val))}}return result}function patchOuterDeco(outerDOM,nodeDOM,prevComputed,curComputed){if(prevComputed==noDeco&&curComputed==noDeco)return nodeDOM;for(var curDOM=nodeDOM,i=0;i<curComputed.length;i++){var deco=curComputed[i],prev=prevComputed[i];if(i){var parent=void 0;prev&&prev.nodeName==deco.nodeName&&curDOM!=outerDOM&&(parent=curDOM.parentNode)&&parent.tagName.toLowerCase()==deco.nodeName||((parent=document.createElement(deco.nodeName)).pmIsDeco=!0,parent.appendChild(curDOM),prev=noDeco[0]),curDOM=parent}patchAttributes(curDOM,prev||noDeco[0],deco)}return curDOM}function patchAttributes(dom,prev,cur){for(var name in prev)"class"==name||"style"==name||"nodeName"==name||name in cur||dom.removeAttribute(name);for(var name$1 in cur)"class"!=name$1&&"style"!=name$1&&"nodeName"!=name$1&&cur[name$1]!=prev[name$1]&&dom.setAttribute(name$1,cur[name$1]);if(prev.class!=cur.class){for(var prevList=prev.class?prev.class.split(" "):nothing,curList=cur.class?cur.class.split(" "):nothing,i=0;i<prevList.length;i++)-1==curList.indexOf(prevList[i])&&dom.classList.remove(prevList[i]);for(var i$1=0;i$1<curList.length;i$1++)-1==prevList.indexOf(curList[i$1])&&dom.classList.add(curList[i$1])}if(prev.style!=cur.style){if(prev.style)for(var m,prop=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;m=prop.exec(prev.style);)dom.style.removeProperty(m[1]);cur.style&&(dom.style.cssText+=cur.style)}}function applyOuterDeco(dom,deco,node){return patchOuterDeco(dom,dom,noDeco,computeOuterDeco(deco,node,1!=dom.nodeType))}function sameOuterDeco(a,b){if(a.length!=b.length)return!1;for(var i=0;i<a.length;i++)if(!a[i].type.eq(b[i].type))return!1;return!0}function rm(dom){var next=dom.nextSibling;return dom.parentNode.removeChild(dom),next}var ViewTreeUpdater=function(top,lockedNode){this.top=top,this.lock=lockedNode,this.index=0,this.stack=[],this.changed=!1;var pre=function(frag,descs){for(var result=[],end=frag.childCount,i=descs.length-1;end>0&&i>=0;i--){var desc=descs[i],node=desc.node;if(node){if(node!=frag.child(end-1))break;result.push(desc),--end}}return{nodes:result.reverse(),offset:end}}(top.node.content,top.children);this.preMatched=pre.nodes,this.preMatchOffset=pre.offset};function compareSide(a,b){return a.type.side-b.type.side}function replaceNodes(nodes,from,to,view,replacement){for(var result=[],i=0,off=0;i<nodes.length;i++){var child=nodes[i],start=off,end=off+=child.size;start>=to||end<=from?result.push(child):(start<from&&result.push(child.slice(0,from-start,view)),replacement&&(result.push(replacement),replacement=null),end>to&&result.push(child.slice(to-start,child.size,view)))}return result}function moveSelectionBlock(state,dir){var ref=state.selection,$anchor=ref.$anchor,$head=ref.$head,$side=dir>0?$anchor.max($head):$anchor.min($head),$start=$side.parent.inlineContent?$side.depth?state.doc.resolve(dir>0?$side.after():$side.before()):null:$side;return $start&&prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.findFrom($start,dir)}function apply(view,sel){return view.dispatch(view.state.tr.setSelection(sel).scrollIntoView()),!0}function selectHorizontally(view,dir,mods){var sel=view.state.selection;if(!(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection)){if(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection&&sel.node.isInline)return apply(view,new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection(dir>0?sel.$to:sel.$from));var next$1=moveSelectionBlock(view.state,dir);return!!next$1&&apply(view,next$1)}if(!sel.empty||mods.indexOf("s")>-1)return!1;if(view.endOfTextblock(dir>0?"right":"left")){var next=moveSelectionBlock(view.state,dir);return!!(next&&next instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection)&&apply(view,next)}if(!(result.mac&&mods.indexOf("m")>-1)){var desc,$head=sel.$head,node=$head.textOffset?null:dir<0?$head.nodeBefore:$head.nodeAfter;if(!node||node.isText)return!1;var nodePos=dir<0?$head.pos-node.nodeSize:$head.pos;return!!(node.isAtom||(desc=view.docView.descAt(nodePos))&&!desc.contentDOM)&&(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(node)?apply(view,new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection(dir<0?view.state.doc.resolve($head.pos-node.nodeSize):$head)):!!result.webkit&&apply(view,new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection(view.state.doc.resolve(dir<0?nodePos:nodePos+node.nodeSize))))}}function nodeLen(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function isIgnorable(dom){var desc=dom.pmViewDesc;return desc&&0==desc.size&&(dom.nextSibling||"BR"!=dom.nodeName)}function skipIgnoredNodesLeft(view){var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;if(node){var moveNode,moveOffset,force=!1;for(result.gecko&&1==node.nodeType&&offset<nodeLen(node)&&isIgnorable(node.childNodes[offset])&&(force=!0);;)if(offset>0){if(1!=node.nodeType)break;var before=node.childNodes[offset-1];if(isIgnorable(before))moveNode=node,moveOffset=--offset;else{if(3!=before.nodeType)break;offset=(node=before).nodeValue.length}}else{if(isBlockNode(node))break;for(var prev=node.previousSibling;prev&&isIgnorable(prev);)moveNode=node.parentNode,moveOffset=domIndex(prev),prev=prev.previousSibling;if(prev)offset=nodeLen(node=prev);else{if((node=node.parentNode)==view.dom)break;offset=0}}force?setSelFocus(view,sel,node,offset):moveNode&&setSelFocus(view,sel,moveNode,moveOffset)}}function skipIgnoredNodesRight(view){var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;if(node){for(var moveNode,moveOffset,len=nodeLen(node);;)if(offset<len){if(1!=node.nodeType)break;if(!isIgnorable(node.childNodes[offset]))break;moveNode=node,moveOffset=++offset}else{if(isBlockNode(node))break;for(var next=node.nextSibling;next&&isIgnorable(next);)moveNode=next.parentNode,moveOffset=domIndex(next)+1,next=next.nextSibling;if(next)offset=0,len=nodeLen(node=next);else{if((node=node.parentNode)==view.dom)break;offset=len=0}}moveNode&&setSelFocus(view,sel,moveNode,moveOffset)}}function isBlockNode(dom){var desc=dom.pmViewDesc;return desc&&desc.node&&desc.node.isBlock}function setSelFocus(view,sel,node,offset){if(selectionCollapsed(sel)){var range=document.createRange();range.setEnd(node,offset),range.setStart(node,offset),sel.removeAllRanges(),sel.addRange(range)}else sel.extend&&sel.extend(node,offset);view.domObserver.setCurSelection()}function selectVertically(view,dir,mods){var sel=view.state.selection;if(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection&&!sel.empty||mods.indexOf("s")>-1)return!1;if(result.mac&&mods.indexOf("m")>-1)return!1;var $from=sel.$from,$to=sel.$to;if(!$from.parent.inlineContent||view.endOfTextblock(dir<0?"up":"down")){var next=moveSelectionBlock(view.state,dir);if(next&&next instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection)return apply(view,next)}if(!$from.parent.inlineContent){var beyond=prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.findFrom(dir<0?$from:$to,dir);return!beyond||apply(view,beyond)}return!1}function stopNativeHorizontalDelete(view,dir){if(!(view.state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection))return!0;var ref=view.state.selection,$head=ref.$head,empty=ref.empty;if(!$head.sameParent(ref.$anchor))return!0;if(!empty)return!1;if(view.endOfTextblock(dir>0?"forward":"backward"))return!0;var nextNode=!$head.textOffset&&(dir<0?$head.nodeBefore:$head.nodeAfter);if(nextNode&&!nextNode.isText){var tr=view.state.tr;return dir<0?tr.delete($head.pos-nextNode.nodeSize,$head.pos):tr.delete($head.pos,$head.pos+nextNode.nodeSize),view.dispatch(tr),!0}return!1}function switchEditable(view,node,state){view.domObserver.stop(),node.contentEditable=state,view.domObserver.start()}function selectionFromDOM(view,origin){var domSel=view.root.getSelection(),doc=view.state.doc;if(!domSel.focusNode)return null;var nearestDesc=view.docView.nearestDesc(domSel.focusNode),inWidget=nearestDesc&&0==nearestDesc.size,head=view.docView.posFromDOM(domSel.focusNode,domSel.focusOffset);if(head<0)return null;var $anchor,selection,$head=doc.resolve(head);if(selectionCollapsed(domSel)){for($anchor=$head;nearestDesc&&!nearestDesc.node;)nearestDesc=nearestDesc.parent;if(nearestDesc&&nearestDesc.node.isAtom&&prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(nearestDesc.node)&&nearestDesc.parent&&(!nearestDesc.node.isInline||!function(node,offset,parent){for(var atStart=0==offset,atEnd=offset==nodeSize(node);atStart||atEnd;){if(node==parent)return!0;var index=domIndex(node);if(!(node=node.parentNode))return!1;atStart=atStart&&0==index,atEnd=atEnd&&index==nodeSize(node)}}(domSel.focusNode,domSel.focusOffset,nearestDesc.dom))){var pos=nearestDesc.posBefore;selection=new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection(head==pos?$head:doc.resolve(pos))}}else{var anchor=view.docView.posFromDOM(domSel.anchorNode,domSel.anchorOffset);if(anchor<0)return null;$anchor=doc.resolve(anchor)}return selection||(selection=selectionBetween(view,$anchor,$head,"pointer"==origin||view.state.selection.head<$head.pos&&!inWidget?1:-1)),selection}function selectionToDOM(view,force){var sel=view.state.selection;if(syncNodeSelection(view,sel),view.editable?view.hasFocus():hasSelection(view)&&document.activeElement&&document.activeElement.contains(view.dom)){if(view.domObserver.disconnectSelection(),view.cursorWrapper)!function(view){var domSel=view.root.getSelection(),range=document.createRange(),node=view.cursorWrapper.dom,img="IMG"==node.nodeName;img?range.setEnd(node.parentNode,domIndex(node)+1):range.setEnd(node,0),range.collapse(!1),domSel.removeAllRanges(),domSel.addRange(range),!img&&!view.state.selection.visible&&result.ie&&result.ie_version<=11&&(node.disabled=!0,node.disabled=!1)}(view);else{var resetEditableFrom,resetEditableTo,anchor=sel.anchor,head=sel.head;!brokenSelectBetweenUneditable||sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection||(sel.$from.parent.inlineContent||(resetEditableFrom=temporarilyEditableNear(view,sel.from)),sel.empty||sel.$from.parent.inlineContent||(resetEditableTo=temporarilyEditableNear(view,sel.to))),view.docView.setSelection(anchor,head,view.root,force),brokenSelectBetweenUneditable&&(resetEditableFrom&&resetEditable(resetEditableFrom),resetEditableTo&&resetEditable(resetEditableTo)),sel.visible?view.dom.classList.remove("ProseMirror-hideselection"):(view.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(view){var doc=view.dom.ownerDocument;doc.removeEventListener("selectionchange",view.hideSelectionGuard);var domSel=view.root.getSelection(),node=domSel.anchorNode,offset=domSel.anchorOffset;doc.addEventListener("selectionchange",view.hideSelectionGuard=function(){domSel.anchorNode==node&&domSel.anchorOffset==offset||(doc.removeEventListener("selectionchange",view.hideSelectionGuard),view.dom.classList.remove("ProseMirror-hideselection"))})}(view))}view.domObserver.setCurSelection(),view.domObserver.connectSelection()}}ViewTreeUpdater.prototype.getPreMatch=function(index){return index>=this.preMatchOffset?this.preMatched[index-this.preMatchOffset]:null},ViewTreeUpdater.prototype.destroyBetween=function(start,end){if(start!=end){for(var i=start;i<end;i++)this.top.children[i].destroy();this.top.children.splice(start,end-start),this.changed=!0}},ViewTreeUpdater.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},ViewTreeUpdater.prototype.syncToMarks=function(marks,inline,view){for(var keep=0,depth=this.stack.length>>1,maxKeep=Math.min(depth,marks.length);keep<maxKeep&&(keep==depth-1?this.top:this.stack[keep+1<<1]).matchesMark(marks[keep])&&!1!==marks[keep].type.spec.spanning;)keep++;for(;keep<depth;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),depth--;for(;depth<marks.length;){this.stack.push(this.top,this.index+1);for(var found=-1,i=this.index;i<Math.min(this.index+3,this.top.children.length);i++)if(this.top.children[i].matchesMark(marks[depth])){found=i;break}if(found>-1)found>this.index&&(this.changed=!0,this.destroyBetween(this.index,found)),this.top=this.top.children[this.index];else{var markDesc=MarkViewDesc.create(this.top,marks[depth],inline,view);this.top.children.splice(this.index,0,markDesc),this.top=markDesc,this.changed=!0}this.index=0,depth++}},ViewTreeUpdater.prototype.findNodeMatch=function(node,outerDeco,innerDeco,index){var found=-1,preMatch=index<0?void 0:this.getPreMatch(index),children=this.top.children;if(preMatch&&preMatch.matchesNode(node,outerDeco,innerDeco))found=children.indexOf(preMatch);else for(var i=this.index,e=Math.min(children.length,i+5);i<e;i++){var child=children[i];if(child.matchesNode(node,outerDeco,innerDeco)&&this.preMatched.indexOf(child)<0){found=i;break}}return!(found<0||(this.destroyBetween(this.index,found),this.index++,0))},ViewTreeUpdater.prototype.updateNextNode=function(node,outerDeco,innerDeco,view,index){for(var i=this.index;i<this.top.children.length;i++){var next=this.top.children[i];if(next instanceof NodeViewDesc){var preMatch=this.preMatched.indexOf(next);if(preMatch>-1&&preMatch+this.preMatchOffset!=index)return!1;var nextDOM=next.dom;if((!this.lock||!(nextDOM==this.lock||1==nextDOM.nodeType&&nextDOM.contains(this.lock.parentNode))||node.isText&&next.node&&next.node.isText&&next.nodeDOM.nodeValue==node.text&&3!=next.dirty&&sameOuterDeco(outerDeco,next.outerDeco))&&next.update(node,outerDeco,innerDeco,view))return this.destroyBetween(this.index,i),next.dom!=nextDOM&&(this.changed=!0),this.index++,!0;break}}return!1},ViewTreeUpdater.prototype.addNode=function(node,outerDeco,innerDeco,view,pos){this.top.children.splice(this.index++,0,NodeViewDesc.create(this.top,node,outerDeco,innerDeco,view,pos)),this.changed=!0},ViewTreeUpdater.prototype.placeWidget=function(widget,view,pos){var next=this.index<this.top.children.length?this.top.children[this.index]:null;if(!next||!next.matchesWidget(widget)||widget!=next.widget&&next.widget.type.toDOM.parentNode){var desc=new WidgetViewDesc(this.top,widget,view,pos);this.top.children.splice(this.index++,0,desc),this.changed=!0}else this.index++},ViewTreeUpdater.prototype.addTextblockHacks=function(){for(var lastChild=this.top.children[this.index-1];lastChild instanceof MarkViewDesc;)lastChild=lastChild.children[lastChild.children.length-1];if(!lastChild||!(lastChild instanceof TextViewDesc)||/\n$/.test(lastChild.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var dom=document.createElement("br");this.top.children.splice(this.index++,0,new BRHackViewDesc(this.top,nothing,dom,null)),this.changed=!0}};var brokenSelectBetweenUneditable=result.safari||result.chrome&&result.chrome_version<63;function temporarilyEditableNear(view,pos){var ref=view.docView.domFromPos(pos),node=ref.node,offset=ref.offset,after=offset<node.childNodes.length?node.childNodes[offset]:null,before=offset?node.childNodes[offset-1]:null;if(result.safari&&after&&"false"==after.contentEditable)return setEditable(after);if(!(after&&"false"!=after.contentEditable||before&&"false"!=before.contentEditable)){if(after)return setEditable(after);if(before)return setEditable(before)}}function setEditable(element){return element.contentEditable="true",result.safari&&element.draggable&&(element.draggable=!1,element.wasDraggable=!0),element}function resetEditable(element){element.contentEditable="false",element.wasDraggable&&(element.draggable=!0,element.wasDraggable=null)}function syncNodeSelection(view,sel){if(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection){var desc=view.docView.descAt(sel.from);desc!=view.lastSelectedViewDesc&&(clearNodeSelection(view),desc&&desc.selectNode(),view.lastSelectedViewDesc=desc)}else clearNodeSelection(view)}function clearNodeSelection(view){view.lastSelectedViewDesc&&(view.lastSelectedViewDesc.parent&&view.lastSelectedViewDesc.deselectNode(),view.lastSelectedViewDesc=null)}function selectionBetween(view,$anchor,$head,bias){return view.someProp("createSelectionBetween",(function(f){return f(view,$anchor,$head)}))||prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection.between($anchor,$head,bias)}function hasSelection(view){var sel=view.root.getSelection();if(!sel.anchorNode)return!1;try{return view.dom.contains(3==sel.anchorNode.nodeType?sel.anchorNode.parentNode:sel.anchorNode)&&(view.editable||view.dom.contains(3==sel.focusNode.nodeType?sel.focusNode.parentNode:sel.focusNode))}catch(_){return!1}}function ruleFromNode(dom){var desc=dom.pmViewDesc;if(desc)return desc.parseRule();if("BR"==dom.nodeName&&dom.parentNode){if(result.safari&&/^(ul|ol)$/i.test(dom.parentNode.nodeName)){var skip=document.createElement("div");return skip.appendChild(document.createElement("li")),{skip:skip}}if(dom.parentNode.lastChild==dom||result.safari&&/^(tr|table)$/i.test(dom.parentNode.nodeName))return{ignore:!0}}else if("IMG"==dom.nodeName&&dom.getAttribute("mark-placeholder"))return{ignore:!0}}function resolveSelection(view,doc,parsedSel){return Math.max(parsedSel.anchor,parsedSel.head)>doc.content.size?null:selectionBetween(view,doc.resolve(parsedSel.anchor),doc.resolve(parsedSel.head))}function skipClosingAndOpening($pos,fromEnd,mayOpen){for(var depth=$pos.depth,end=fromEnd?$pos.end():$pos.pos;depth>0&&(fromEnd||$pos.indexAfter(depth)==$pos.node(depth).childCount);)depth--,end++,fromEnd=!1;if(mayOpen)for(var next=$pos.node(depth).maybeChild($pos.indexAfter(depth));next&&!next.isLeaf;)next=next.firstChild,end++;return end}function serializeForClipboard(view,slice){for(var context=[],content=slice.content,openStart=slice.openStart,openEnd=slice.openEnd;openStart>1&&openEnd>1&&1==content.childCount&&1==content.firstChild.childCount;){openStart--,openEnd--;var node=content.firstChild;context.push(node.type.name,node.type.hasRequiredAttrs()?node.attrs:null),content=node.content}var serializer=view.someProp("clipboardSerializer")||prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.DOMSerializer.fromSchema(view.state.schema),doc=detachedDoc(),wrap=doc.createElement("div");wrap.appendChild(serializer.serializeFragment(content,{document:doc}));for(var needsWrap,firstChild=wrap.firstChild;firstChild&&1==firstChild.nodeType&&(needsWrap=wrapMap[firstChild.nodeName.toLowerCase()]);){for(var i=needsWrap.length-1;i>=0;i--){for(var wrapper=doc.createElement(needsWrap[i]);wrap.firstChild;)wrapper.appendChild(wrap.firstChild);wrap.appendChild(wrapper)}firstChild=wrap.firstChild}return firstChild&&1==firstChild.nodeType&&firstChild.setAttribute("data-pm-slice",openStart+" "+openEnd+" "+JSON.stringify(context)),{dom:wrap,text:view.someProp("clipboardTextSerializer",(function(f){return f(slice)}))||slice.content.textBetween(0,slice.content.size,"\n\n")}}function parseFromClipboard(view,text,html,plainText,$context){var dom,slice,inCode=$context.parent.type.spec.code;if(!html&&!text)return null;var asText=text&&(plainText||inCode||!html);if(asText){if(view.someProp("transformPastedText",(function(f){text=f(text)})),inCode)return new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(view.state.schema.text(text)),0,0);var parsed=view.someProp("clipboardTextParser",(function(f){return f(text,$context)}));parsed?slice=parsed:(dom=document.createElement("div"),text.trim().split(/(?:\r\n?|\n)+/).forEach((function(block){dom.appendChild(document.createElement("p")).textContent=block})))}else view.someProp("transformPastedHTML",(function(f){html=f(html)})),dom=function(html){var metas=/(\s*<meta [^>]*>)*/.exec(html);metas&&(html=html.slice(metas[0].length));var wrap,elt=detachedDoc().createElement("div"),firstTag=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(html),depth=0;(wrap=firstTag&&wrapMap[firstTag[1].toLowerCase()])&&(html=wrap.map((function(n){return"<"+n+">"})).join("")+html+wrap.map((function(n){return"</"+n+">"})).reverse().join(""),depth=wrap.length),elt.innerHTML=html;for(var i=0;i<depth;i++)elt=elt.firstChild;return elt}(html);var contextNode=dom&&dom.querySelector("[data-pm-slice]"),sliceData=contextNode&&/^(\d+) (\d+) (.*)/.exec(contextNode.getAttribute("data-pm-slice"));if(!slice){var parser=view.someProp("clipboardParser")||view.someProp("domParser")||prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.DOMParser.fromSchema(view.state.schema);slice=parser.parseSlice(dom,{preserveWhitespace:!(!asText&&!sliceData),context:$context})}return slice=sliceData?function(slice,context){if(!slice.size)return slice;var array,schema=slice.content.firstChild.type.schema;try{array=JSON.parse(context)}catch(e){return slice}for(var content=slice.content,openStart=slice.openStart,openEnd=slice.openEnd,i=array.length-2;i>=0;i-=2){var type=schema.nodes[array[i]];if(!type||type.hasRequiredAttrs())break;content=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(type.create(array[i+1],content)),openStart++,openEnd++}return new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(content,openStart,openEnd)}(function(slice,openStart,openEnd){return openStart<slice.openStart&&(slice=new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(closeRange(slice.content,-1,openStart,slice.openStart,0,slice.openEnd),openStart,slice.openEnd)),openEnd<slice.openEnd&&(slice=new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(closeRange(slice.content,1,openEnd,slice.openEnd,0,0),slice.openStart,openEnd)),slice}(slice,+sliceData[1],+sliceData[2]),sliceData[3]):prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice.maxOpen(function(fragment,$context){if(fragment.childCount<2)return fragment;for(var loop=function(d){var match=$context.node(d).contentMatchAt($context.index(d)),lastWrap=void 0,result=[];if(fragment.forEach((function(node){if(result){var inLast,wrap=match.findWrapping(node.type);if(!wrap)return result=null;if(inLast=result.length&&lastWrap.length&&function addToSibling(wrap,lastWrap,node,sibling,depth){if(depth<wrap.length&&depth<lastWrap.length&&wrap[depth]==lastWrap[depth]){var inner=addToSibling(wrap,lastWrap,node,sibling.lastChild,depth+1);if(inner)return sibling.copy(sibling.content.replaceChild(sibling.childCount-1,inner));if(sibling.contentMatchAt(sibling.childCount).matchType(depth==wrap.length-1?node.type:wrap[depth+1]))return sibling.copy(sibling.content.append(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(withWrappers(node,wrap,depth+1))))}}(wrap,lastWrap,node,result[result.length-1],0))result[result.length-1]=inLast;else{result.length&&(result[result.length-1]=function closeRight(node,depth){if(0==depth)return node;var fragment=node.content.replaceChild(node.childCount-1,closeRight(node.lastChild,depth-1)),fill=node.contentMatchAt(node.childCount).fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty,!0);return node.copy(fragment.append(fill))}(result[result.length-1],lastWrap.length));var wrapped=withWrappers(node,wrap);result.push(wrapped),match=match.matchType(wrapped.type,wrapped.attrs),lastWrap=wrap}}})),result)return{v:prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(result)}},d=$context.depth;d>=0;d--){var returned=loop(d);if(returned)return returned.v}return fragment}(slice.content,$context),!1),view.someProp("transformPasted",(function(f){slice=f(slice)})),slice}function withWrappers(node,wrap,from){void 0===from&&(from=0);for(var i=wrap.length-1;i>=from;i--)node=wrap[i].create(null,prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(node));return node}function closeRange(fragment,side,from,to,depth,openEnd){var node=side<0?fragment.firstChild:fragment.lastChild,inner=node.content;return depth<to-1&&(inner=closeRange(inner,side,from,to,depth+1,openEnd)),depth>=from&&(inner=side<0?node.contentMatchAt(0).fillBefore(inner,fragment.childCount>1||openEnd<=depth).append(inner):inner.append(node.contentMatchAt(node.childCount).fillBefore(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty,!0))),fragment.replaceChild(side<0?0:fragment.childCount-1,node.copy(inner))}var wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},_detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}var observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=result.ie&&result.ie_version<=11,SelectionState=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};SelectionState.prototype.set=function(sel){this.anchorNode=sel.anchorNode,this.anchorOffset=sel.anchorOffset,this.focusNode=sel.focusNode,this.focusOffset=sel.focusOffset},SelectionState.prototype.eq=function(sel){return sel.anchorNode==this.anchorNode&&sel.anchorOffset==this.anchorOffset&&sel.focusNode==this.focusNode&&sel.focusOffset==this.focusOffset};var DOMObserver=function(view,handleDOMChange){var this$1=this;this.view=view,this.handleDOMChange=handleDOMChange,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(mutations){for(var i=0;i<mutations.length;i++)this$1.queue.push(mutations[i]);result.ie&&result.ie_version<=11&&mutations.some((function(m){return"childList"==m.type&&m.removedNodes.length||"characterData"==m.type&&m.oldValue.length>m.target.nodeValue.length}))?this$1.flushSoon():this$1.flush()})),this.currentSelection=new SelectionState,useCharData&&(this.onCharData=function(e){this$1.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this$1.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};DOMObserver.prototype.flushSoon=function(){var this$1=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){this$1.flushingSoon=-1,this$1.flush()}),20))},DOMObserver.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},DOMObserver.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,observeOptions),useCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},DOMObserver.prototype.stop=function(){var this$1=this;if(this.observer){var take=this.observer.takeRecords();if(take.length){for(var i=0;i<take.length;i++)this.queue.push(take[i]);window.setTimeout((function(){return this$1.flush()}),20)}this.observer.disconnect()}useCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},DOMObserver.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},DOMObserver.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},DOMObserver.prototype.suppressSelectionUpdates=function(){var this$1=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return this$1.suppressingSelectionUpdates=!1}),50)},DOMObserver.prototype.onSelectionChange=function(){if((!(view=this.view).editable||view.root.activeElement==view.dom)&&hasSelection(view)){var view;if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(result.ie&&result.ie_version<=11&&!this.view.state.selection.empty){var sel=this.view.root.getSelection();if(sel.focusNode&&isEquivalentPosition(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset))return this.flushSoon()}this.flush()}},DOMObserver.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},DOMObserver.prototype.ignoreSelectionChange=function(sel){if(0==sel.rangeCount)return!0;var container=sel.getRangeAt(0).commonAncestorContainer,desc=this.view.docView.nearestDesc(container);return desc&&desc.ignoreMutation({type:"selection",target:3==container.nodeType?container.parentNode:container})?(this.setCurSelection(),!0):void 0},DOMObserver.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var mutations=this.observer?this.observer.takeRecords():[];this.queue.length&&(mutations=this.queue.concat(mutations),this.queue.length=0);var sel=this.view.root.getSelection(),newSel=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(sel)&&hasSelection(this.view)&&!this.ignoreSelectionChange(sel),from=-1,to=-1,typeOver=!1,added=[];if(this.view.editable)for(var i=0;i<mutations.length;i++){var result$1=this.registerMutation(mutations[i],added);result$1&&(from=from<0?result$1.from:Math.min(result$1.from,from),to=to<0?result$1.to:Math.max(result$1.to,to),result$1.typeOver&&(typeOver=!0))}if(result.gecko&&added.length>1){var brs=added.filter((function(n){return"BR"==n.nodeName}));if(2==brs.length){var a=brs[0],b=brs[1];a.parentNode&&a.parentNode.parentNode==b.parentNode?b.remove():a.remove()}}(from>-1||newSel)&&(from>-1&&(this.view.docView.markDirty(from,to),cssChecked||(cssChecked=!0,"normal"==getComputedStyle(this.view.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))),this.handleDOMChange(from,to,typeOver,added),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(sel)||selectionToDOM(this.view))}},DOMObserver.prototype.registerMutation=function(mut,added){if(added.indexOf(mut.target)>-1)return null;var desc=this.view.docView.nearestDesc(mut.target);if("attributes"==mut.type&&(desc==this.view.docView||"contenteditable"==mut.attributeName||"style"==mut.attributeName&&!mut.oldValue&&!mut.target.getAttribute("style")))return null;if(!desc||desc.ignoreMutation(mut))return null;if("childList"==mut.type){var prev=mut.previousSibling,next=mut.nextSibling;if(result.ie&&result.ie_version<=11&&mut.addedNodes.length)for(var i=0;i<mut.addedNodes.length;i++){var ref=mut.addedNodes[i],previousSibling=ref.previousSibling,nextSibling=ref.nextSibling;(!previousSibling||Array.prototype.indexOf.call(mut.addedNodes,previousSibling)<0)&&(prev=previousSibling),(!nextSibling||Array.prototype.indexOf.call(mut.addedNodes,nextSibling)<0)&&(next=nextSibling)}for(var fromOffset=prev&&prev.parentNode==mut.target?domIndex(prev)+1:0,from=desc.localPosFromDOM(mut.target,fromOffset,-1),toOffset=next&&next.parentNode==mut.target?domIndex(next):mut.target.childNodes.length,i$1=0;i$1<mut.addedNodes.length;i$1++)added.push(mut.addedNodes[i$1]);return{from:from,to:desc.localPosFromDOM(mut.target,toOffset,1)}}return"attributes"==mut.type?{from:desc.posAtStart-desc.border,to:desc.posAtEnd+desc.border}:{from:desc.posAtStart,to:desc.posAtEnd,typeOver:mut.target.nodeValue==mut.oldValue}};var cssChecked=!1,handlers={},editHandlers={};function setSelectionOrigin(view,origin){view.lastSelectionOrigin=origin,view.lastSelectionTime=Date.now()}function ensureListeners(view){view.someProp("handleDOMEvents",(function(currentHandlers){for(var type in currentHandlers)view.eventHandlers[type]||view.dom.addEventListener(type,view.eventHandlers[type]=function(event){return runCustomHandler(view,event)})}))}function runCustomHandler(view,event){return view.someProp("handleDOMEvents",(function(handlers){var handler=handlers[event.type];return!!handler&&(handler(view,event)||event.defaultPrevented)}))}function eventCoords(event){return{left:event.clientX,top:event.clientY}}function runHandlerOnContext(view,propName,pos,inside,event){if(-1==inside)return!1;for(var $pos=view.state.doc.resolve(inside),loop=function(i){if(view.someProp(propName,(function(f){return i>$pos.depth?f(view,pos,$pos.nodeAfter,$pos.before(i),event,!0):f(view,pos,$pos.node(i),$pos.before(i),event,!1)})))return{v:!0}},i=$pos.depth+1;i>0;i--){var returned=loop(i);if(returned)return returned.v}return!1}function updateSelection(view,selection,origin){view.focused||view.focus();var tr=view.state.tr.setSelection(selection);"pointer"==origin&&tr.setMeta("pointer",!0),view.dispatch(tr)}function handleDoubleClick(view,pos,inside,event){return runHandlerOnContext(view,"handleDoubleClickOn",pos,inside,event)||view.someProp("handleDoubleClick",(function(f){return f(view,pos,event)}))}function handleTripleClick(view,pos,inside,event){return runHandlerOnContext(view,"handleTripleClickOn",pos,inside,event)||view.someProp("handleTripleClick",(function(f){return f(view,pos,event)}))||function(view,inside){var doc=view.state.doc;if(-1==inside)return!!doc.inlineContent&&(updateSelection(view,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection.create(doc,0,doc.content.size),"pointer"),!0);for(var $pos=doc.resolve(inside),i=$pos.depth+1;i>0;i--){var node=i>$pos.depth?$pos.nodeAfter:$pos.node(i),nodePos=$pos.before(i);if(node.inlineContent)updateSelection(view,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection.create(doc,nodePos+1,nodePos+1+node.content.size),"pointer");else{if(!prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(node))continue;updateSelection(view,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.create(doc,nodePos),"pointer")}return!0}}(view,inside)}function forceDOMFlush(view){return endComposition(view)}editHandlers.keydown=function(view,event){if(view.shiftKey=16==event.keyCode||event.shiftKey,!inOrNearComposition(view,event))if(view.domObserver.forceFlush(),view.lastKeyCode=event.keyCode,view.lastKeyCodeTime=Date.now(),!result.ios||13!=event.keyCode||event.ctrlKey||event.altKey||event.metaKey)view.someProp("handleKeyDown",(function(f){return f(view,event)}))||function(view,event){var code=event.keyCode,mods=function(event){var result="";return event.ctrlKey&&(result+="c"),event.metaKey&&(result+="m"),event.altKey&&(result+="a"),event.shiftKey&&(result+="s"),result}(event);return 8==code||result.mac&&72==code&&"c"==mods?stopNativeHorizontalDelete(view,-1)||skipIgnoredNodesLeft(view):46==code||result.mac&&68==code&&"c"==mods?stopNativeHorizontalDelete(view,1)||skipIgnoredNodesRight(view):13==code||27==code||(37==code?selectHorizontally(view,-1,mods)||skipIgnoredNodesLeft(view):39==code?selectHorizontally(view,1,mods)||skipIgnoredNodesRight(view):38==code?selectVertically(view,-1,mods)||skipIgnoredNodesLeft(view):40==code?function(view){if(result.chrome&&!(view.state.selection.$head.parentOffset>0)){var ref=view.root.getSelection(),focusNode=ref.focusNode;if(focusNode&&1==focusNode.nodeType&&0==ref.focusOffset&&focusNode.firstChild&&"false"==focusNode.firstChild.contentEditable){var child=focusNode.firstChild;switchEditable(view,child,!0),setTimeout((function(){return switchEditable(view,child,!1)}),20)}}}(view)||selectVertically(view,1,mods)||skipIgnoredNodesRight(view):mods==(result.mac?"m":"c")&&(66==code||73==code||89==code||90==code))}(view,event)?event.preventDefault():setSelectionOrigin(view,"key");else{var now=Date.now();view.lastIOSEnter=now,setTimeout((function(){view.lastIOSEnter==now&&(view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(13,"Enter"))})),view.lastIOSEnter=0)}),50)}},editHandlers.keyup=function(view,e){16==e.keyCode&&(view.shiftKey=!1)},editHandlers.keypress=function(view,event){if(!(inOrNearComposition(view,event)||!event.charCode||event.ctrlKey&&!event.altKey||result.mac&&event.metaKey))if(view.someProp("handleKeyPress",(function(f){return f(view,event)})))event.preventDefault();else{var sel=view.state.selection;if(!(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection&&sel.$from.sameParent(sel.$to))){var text=String.fromCharCode(event.charCode);view.someProp("handleTextInput",(function(f){return f(view,sel.$from.pos,sel.$to.pos,text)}))||view.dispatch(view.state.tr.insertText(text).scrollIntoView()),event.preventDefault()}}};var selectNodeModifier=result.mac?"metaKey":"ctrlKey";handlers.mousedown=function(view,event){view.shiftKey=event.shiftKey;var flushed=forceDOMFlush(view),now=Date.now(),type="singleClick";now-view.lastClick.time<500&&function(event,click){var dx=click.x-event.clientX,dy=click.y-event.clientY;return dx*dx+dy*dy<100}(event,view.lastClick)&&!event[selectNodeModifier]&&("singleClick"==view.lastClick.type?type="doubleClick":"doubleClick"==view.lastClick.type&&(type="tripleClick")),view.lastClick={time:now,x:event.clientX,y:event.clientY,type:type};var pos=view.posAtCoords(eventCoords(event));pos&&("singleClick"==type?view.mouseDown=new MouseDown(view,pos,event,flushed):("doubleClick"==type?handleDoubleClick:handleTripleClick)(view,pos.pos,pos.inside,event)?event.preventDefault():setSelectionOrigin(view,"pointer"))};var MouseDown=function(view,pos,event,flushed){var targetNode,targetPos,this$1=this;if(this.view=view,this.startDoc=view.state.doc,this.pos=pos,this.event=event,this.flushed=flushed,this.selectNode=event[selectNodeModifier],this.allowDefault=event.shiftKey,pos.inside>-1)targetNode=view.state.doc.nodeAt(pos.inside),targetPos=pos.inside;else{var $pos=view.state.doc.resolve(pos.pos);targetNode=$pos.parent,targetPos=$pos.depth?$pos.before():0}this.mightDrag=null;var target=flushed?null:event.target,targetDesc=target?view.docView.nearestDesc(target,!0):null;this.target=targetDesc?targetDesc.dom:null,(targetNode.type.spec.draggable&&!1!==targetNode.type.spec.selectable||view.state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection&&targetPos==view.state.selection.from)&&(this.mightDrag={node:targetNode,pos:targetPos,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&result.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return this$1.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),view.root.addEventListener("mouseup",this.up=this.up.bind(this)),view.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(view,"pointer")};function inOrNearComposition(view,event){return!!view.composing||!!(result.safari&&Math.abs(event.timeStamp-view.compositionEndedAt)<500)&&(view.compositionEndedAt=-2e8,!0)}MouseDown.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},MouseDown.prototype.up=function(event){if(this.done(),this.view.dom.contains(3==event.target.nodeType?event.target.parentNode:event.target)){var pos=this.pos;this.view.state.doc!=this.startDoc&&(pos=this.view.posAtCoords(eventCoords(event))),this.allowDefault||!pos?setSelectionOrigin(this.view,"pointer"):function(view,pos,inside,event,selectNode){return runHandlerOnContext(view,"handleClickOn",pos,inside,event)||view.someProp("handleClick",(function(f){return f(view,pos,event)}))||(selectNode?function(view,inside){if(-1==inside)return!1;var selectedNode,selectAt,sel=view.state.selection;sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection&&(selectedNode=sel.node);for(var $pos=view.state.doc.resolve(inside),i=$pos.depth+1;i>0;i--){var node=i>$pos.depth?$pos.nodeAfter:$pos.node(i);if(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(node)){selectAt=selectedNode&&sel.$from.depth>0&&i>=sel.$from.depth&&$pos.before(sel.$from.depth+1)==sel.$from.pos?$pos.before(sel.$from.depth):$pos.before(i);break}}return null!=selectAt&&(updateSelection(view,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.create(view.state.doc,selectAt),"pointer"),!0)}(view,inside):function(view,inside){if(-1==inside)return!1;var $pos=view.state.doc.resolve(inside),node=$pos.nodeAfter;return!!(node&&node.isAtom&&prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(node))&&(updateSelection(view,new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection($pos),"pointer"),!0)}(view,inside))}(this.view,pos.pos,pos.inside,event,this.selectNode)?event.preventDefault():this.flushed||result.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||result.chrome&&!(this.view.state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection)&&(pos.pos==this.view.state.selection.from||pos.pos==this.view.state.selection.to)?(updateSelection(this.view,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.near(this.view.state.doc.resolve(pos.pos)),"pointer"),event.preventDefault()):setSelectionOrigin(this.view,"pointer")}},MouseDown.prototype.move=function(event){!this.allowDefault&&(Math.abs(this.event.x-event.clientX)>4||Math.abs(this.event.y-event.clientY)>4)&&(this.allowDefault=!0),setSelectionOrigin(this.view,"pointer")},handlers.touchdown=function(view){forceDOMFlush(view),setSelectionOrigin(view,"pointer")},handlers.contextmenu=function(view){return forceDOMFlush(view)};var timeoutComposition=result.android?5e3:-1;function scheduleComposeEnd(view,delay){clearTimeout(view.composingTimeout),delay>-1&&(view.composingTimeout=setTimeout((function(){return endComposition(view)}),delay))}function endComposition(view,forceUpdate){for(view.domObserver.forceFlush(),view.composing=!1;view.compositionNodes.length>0;)view.compositionNodes.pop().markParentsDirty();if(forceUpdate||view.docView.dirty){var sel=selectionFromDOM(view);return sel&&!sel.eq(view.state.selection)?view.dispatch(view.state.tr.setSelection(sel)):view.updateState(view.state),!0}return!1}editHandlers.compositionstart=editHandlers.compositionupdate=function(view){if(!view.composing){view.domObserver.flush();var state=view.state,$pos=state.selection.$from;if(state.selection.empty&&(state.storedMarks||!$pos.textOffset&&$pos.parentOffset&&$pos.nodeBefore.marks.some((function(m){return!1===m.type.spec.inclusive}))))view.markCursor=view.state.storedMarks||$pos.marks(),endComposition(view,!0),view.markCursor=null;else if(endComposition(view),result.gecko&&state.selection.empty&&$pos.parentOffset&&!$pos.textOffset&&$pos.nodeBefore.marks.length)for(var sel=view.root.getSelection(),node=sel.focusNode,offset=sel.focusOffset;node&&1==node.nodeType&&0!=offset;){var before=offset<0?node.lastChild:node.childNodes[offset-1];if(!before)break;if(3==before.nodeType){sel.collapse(before,before.nodeValue.length);break}node=before,offset=-1}view.composing=!0}scheduleComposeEnd(view,timeoutComposition)},editHandlers.compositionend=function(view,event){view.composing&&(view.composing=!1,view.compositionEndedAt=event.timeStamp,scheduleComposeEnd(view,20))};var brokenClipboardAPI=result.ie&&result.ie_version<15||result.ios&&result.webkit_version<604;function doPaste(view,text,html,e){var slice=parseFromClipboard(view,text,html,view.shiftKey,view.state.selection.$from);if(!view.someProp("handlePaste",(function(f){return f(view,e,slice||prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice.empty)}))&&slice){var singleNode=function(slice){return 0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount?slice.content.firstChild:null}(slice),tr=singleNode?view.state.tr.replaceSelectionWith(singleNode,view.shiftKey):view.state.tr.replaceSelection(slice);view.dispatch(tr.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}handlers.copy=editHandlers.cut=function(view,e){var sel=view.state.selection,cut="cut"==e.type;if(!sel.empty){var data=brokenClipboardAPI?null:e.clipboardData,ref=serializeForClipboard(view,sel.content()),dom=ref.dom,text=ref.text;data?(e.preventDefault(),data.clearData(),data.setData("text/html",dom.innerHTML),data.setData("text/plain",text)):function(view,dom){if(view.dom.parentNode){var wrap=view.dom.parentNode.appendChild(document.createElement("div"));wrap.appendChild(dom),wrap.style.cssText="position: fixed; left: -10000px; top: 10px";var sel=getSelection(),range=document.createRange();range.selectNodeContents(dom),view.dom.blur(),sel.removeAllRanges(),sel.addRange(range),setTimeout((function(){wrap.parentNode&&wrap.parentNode.removeChild(wrap),view.focus()}),50)}}(view,dom),cut&&view.dispatch(view.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},editHandlers.paste=function(view,e){var data=brokenClipboardAPI?null:e.clipboardData,html=data&&data.getData("text/html"),text=data&&data.getData("text/plain");data&&(html||text||data.files.length)?(doPaste(view,text,html,e),e.preventDefault()):function(view,e){if(view.dom.parentNode){var plainText=view.shiftKey||view.state.selection.$from.parent.type.spec.code,target=view.dom.parentNode.appendChild(document.createElement(plainText?"textarea":"div"));plainText||(target.contentEditable="true"),target.style.cssText="position: fixed; left: -10000px; top: 10px",target.focus(),setTimeout((function(){view.focus(),target.parentNode&&target.parentNode.removeChild(target),plainText?doPaste(view,target.value,null,e):doPaste(view,target.textContent,target.innerHTML,e)}),50)}}(view,e)};var Dragging=function(slice,move){this.slice=slice,this.move=move},dragCopyModifier=result.mac?"altKey":"ctrlKey";for(var prop in handlers.dragstart=function(view,e){var mouseDown=view.mouseDown;if(mouseDown&&mouseDown.done(),e.dataTransfer){var sel=view.state.selection,pos=sel.empty?null:view.posAtCoords(eventCoords(e));if(pos&&pos.pos>=sel.from&&pos.pos<=(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection?sel.to-1:sel.to));else if(mouseDown&&mouseDown.mightDrag)view.dispatch(view.state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.create(view.state.doc,mouseDown.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var desc=view.docView.nearestDesc(e.target,!0);if(!desc||!desc.node.type.spec.draggable||desc==view.docView)return;view.dispatch(view.state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.create(view.state.doc,desc.posBefore)))}var slice=view.state.selection.content(),ref=serializeForClipboard(view,slice),dom=ref.dom,text=ref.text;e.dataTransfer.clearData(),e.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",dom.innerHTML),brokenClipboardAPI||e.dataTransfer.setData("text/plain",text),view.dragging=new Dragging(slice,!e[dragCopyModifier])}},handlers.dragend=function(view){window.setTimeout((function(){return view.dragging=null}),50)},editHandlers.dragover=editHandlers.dragenter=function(_,e){return e.preventDefault()},editHandlers.drop=function(view,e){var dragging=view.dragging;if(view.dragging=null,e.dataTransfer){var eventPos=view.posAtCoords(eventCoords(e));if(eventPos){var $mouse=view.state.doc.resolve(eventPos.pos);if($mouse){var slice=dragging&&dragging.slice||parseFromClipboard(view,e.dataTransfer.getData(brokenClipboardAPI?"Text":"text/plain"),brokenClipboardAPI?null:e.dataTransfer.getData("text/html"),!1,$mouse);if(view.someProp("handleDrop",(function(f){return f(view,e,slice||prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice.empty,dragging&&dragging.move)})))e.preventDefault();else if(slice){e.preventDefault();var insertPos=slice?Object(prosemirror_transform__WEBPACK_IMPORTED_MODULE_2__.i)(view.state.doc,$mouse.pos,slice):$mouse.pos;null==insertPos&&(insertPos=$mouse.pos);var tr=view.state.tr;dragging&&dragging.move&&tr.deleteSelection();var pos=tr.mapping.map(insertPos),isNode=0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount,beforeInsert=tr.doc;if(isNode?tr.replaceRangeWith(pos,pos,slice.content.firstChild):tr.replaceRange(pos,pos,slice),!tr.doc.eq(beforeInsert)){var $pos=tr.doc.resolve(pos);isNode&&prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection.isSelectable(slice.content.firstChild)&&$pos.nodeAfter&&$pos.nodeAfter.sameMarkup(slice.content.firstChild)?tr.setSelection(new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection($pos)):tr.setSelection(selectionBetween(view,$pos,tr.doc.resolve(tr.mapping.map(insertPos)))),view.focus(),view.dispatch(tr.setMeta("uiEvent","drop"))}}}}}},handlers.focus=function(view){view.focused||(view.domObserver.stop(),view.dom.classList.add("ProseMirror-focused"),view.domObserver.start(),view.focused=!0,setTimeout((function(){view.docView&&view.hasFocus()&&!view.domObserver.currentSelection.eq(view.root.getSelection())&&selectionToDOM(view)}),20))},handlers.blur=function(view){view.focused&&(view.domObserver.stop(),view.dom.classList.remove("ProseMirror-focused"),view.domObserver.start(),view.domObserver.currentSelection.set({}),view.focused=!1)},handlers.beforeinput=function(view,event){if(result.chrome&&result.android&&"deleteContentBackward"==event.inputType){var domChangeCount=view.domChangeCount;setTimeout((function(){if(view.domChangeCount==domChangeCount&&(view.dom.blur(),view.focus(),!view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(8,"Backspace"))})))){var $cursor=view.state.selection.$cursor;$cursor&&$cursor.pos>0&&view.dispatch(view.state.tr.delete($cursor.pos-1,$cursor.pos).scrollIntoView())}}),50)}},editHandlers)handlers[prop]=editHandlers[prop];function compareObjs(a,b){if(a==b)return!0;for(var p in a)if(a[p]!==b[p])return!1;for(var p$1 in b)if(!(p$1 in a))return!1;return!0}var WidgetType=function(toDOM,spec){this.spec=spec||noSpec,this.side=this.spec.side||0,this.toDOM=toDOM};WidgetType.prototype.map=function(mapping,span,offset,oldOffset){var ref=mapping.mapResult(span.from+oldOffset,this.side<0?-1:1),pos=ref.pos;return ref.deleted?null:new Decoration(pos-offset,pos-offset,this)},WidgetType.prototype.valid=function(){return!0},WidgetType.prototype.eq=function(other){return this==other||other instanceof WidgetType&&(this.spec.key&&this.spec.key==other.spec.key||this.toDOM==other.toDOM&&compareObjs(this.spec,other.spec))};var InlineType=function(attrs,spec){this.spec=spec||noSpec,this.attrs=attrs};InlineType.prototype.map=function(mapping,span,offset,oldOffset){var from=mapping.map(span.from+oldOffset,this.spec.inclusiveStart?-1:1)-offset,to=mapping.map(span.to+oldOffset,this.spec.inclusiveEnd?1:-1)-offset;return from>=to?null:new Decoration(from,to,this)},InlineType.prototype.valid=function(_,span){return span.from<span.to},InlineType.prototype.eq=function(other){return this==other||other instanceof InlineType&&compareObjs(this.attrs,other.attrs)&&compareObjs(this.spec,other.spec)},InlineType.is=function(span){return span.type instanceof InlineType};var NodeType=function(attrs,spec){this.spec=spec||noSpec,this.attrs=attrs};NodeType.prototype.map=function(mapping,span,offset,oldOffset){var from=mapping.mapResult(span.from+oldOffset,1);if(from.deleted)return null;var to=mapping.mapResult(span.to+oldOffset,-1);return to.deleted||to.pos<=from.pos?null:new Decoration(from.pos-offset,to.pos-offset,this)},NodeType.prototype.valid=function(node,span){var ref=node.content.findIndex(span.from),offset=ref.offset;return offset==span.from&&offset+node.child(ref.index).nodeSize==span.to},NodeType.prototype.eq=function(other){return this==other||other instanceof NodeType&&compareObjs(this.attrs,other.attrs)&&compareObjs(this.spec,other.spec)};var Decoration=function(from,to,type){this.from=from,this.to=to,this.type=type},prototypeAccessors$1={spec:{configurable:!0}};Decoration.prototype.copy=function(from,to){return new Decoration(from,to,this.type)},Decoration.prototype.eq=function(other,offset){return void 0===offset&&(offset=0),this.type.eq(other.type)&&this.from+offset==other.from&&this.to+offset==other.to},Decoration.prototype.map=function(mapping,offset,oldOffset){return this.type.map(mapping,this,offset,oldOffset)},Decoration.widget=function(pos,toDOM,spec){return new Decoration(pos,pos,new WidgetType(toDOM,spec))},Decoration.inline=function(from,to,attrs,spec){return new Decoration(from,to,new InlineType(attrs,spec))},Decoration.node=function(from,to,attrs,spec){return new Decoration(from,to,new NodeType(attrs,spec))},prototypeAccessors$1.spec.get=function(){return this.type.spec},Object.defineProperties(Decoration.prototype,prototypeAccessors$1);var none=[],noSpec={},DecorationSet=function(local,children){this.local=local&&local.length?local:none,this.children=children&&children.length?children:none};DecorationSet.create=function(doc,decorations){return decorations.length?buildTree(decorations,doc,0,noSpec):empty},DecorationSet.prototype.find=function(start,end,predicate){var result=[];return this.findInner(null==start?0:start,null==end?1e9:end,result,0,predicate),result},DecorationSet.prototype.findInner=function(start,end,result,offset,predicate){for(var i=0;i<this.local.length;i++){var span=this.local[i];span.from<=end&&span.to>=start&&(!predicate||predicate(span.spec))&&result.push(span.copy(span.from+offset,span.to+offset))}for(var i$1=0;i$1<this.children.length;i$1+=3)if(this.children[i$1]<end&&this.children[i$1+1]>start){var childOff=this.children[i$1]+1;this.children[i$1+2].findInner(start-childOff,end-childOff,result,offset+childOff,predicate)}},DecorationSet.prototype.map=function(mapping,doc,options){return this==empty||0==mapping.maps.length?this:this.mapInner(mapping,doc,0,0,options||noSpec)},DecorationSet.prototype.mapInner=function(mapping,node,offset,oldOffset,options){for(var newLocal,i=0;i<this.local.length;i++){var mapped=this.local[i].map(mapping,offset,oldOffset);mapped&&mapped.type.valid(node,mapped)?(newLocal||(newLocal=[])).push(mapped):options.onRemove&&options.onRemove(this.local[i].spec)}return this.children.length?function(oldChildren,newLocal,mapping,node,offset,oldOffset,options){for(var children=oldChildren.slice(),shift=function(oldStart,oldEnd,newStart,newEnd){for(var i=0;i<children.length;i+=3){var end=children[i+1],dSize=void 0;-1==end||oldStart>end+oldOffset||(oldEnd>=children[i]+oldOffset?children[i+1]=-1:newStart>=offset&&(dSize=newEnd-newStart-(oldEnd-oldStart))&&(children[i]+=dSize,children[i+1]+=dSize))}},i=0;i<mapping.maps.length;i++)mapping.maps[i].forEach(shift);for(var mustRebuild=!1,i$1=0;i$1<children.length;i$1+=3)if(-1==children[i$1+1]){var from=mapping.map(children[i$1]+oldOffset),fromLocal=from-offset;if(fromLocal<0||fromLocal>=node.content.size){mustRebuild=!0;continue}var toLocal=mapping.map(oldChildren[i$1+1]+oldOffset,-1)-offset,ref=node.content.findIndex(fromLocal),childOffset=ref.offset,childNode=node.maybeChild(ref.index);if(childNode&&childOffset==fromLocal&&childOffset+childNode.nodeSize==toLocal){var mapped=children[i$1+2].mapInner(mapping,childNode,from+1,children[i$1]+oldOffset+1,options);mapped!=empty?(children[i$1]=fromLocal,children[i$1+1]=toLocal,children[i$1+2]=mapped):(children[i$1+1]=-2,mustRebuild=!0)}else mustRebuild=!0}if(mustRebuild){var built=buildTree(function(children,oldChildren,decorations,mapping,offset,oldOffset,options){function gather(set,oldOffset){for(var i=0;i<set.local.length;i++){var mapped=set.local[i].map(mapping,offset,oldOffset);mapped?decorations.push(mapped):options.onRemove&&options.onRemove(set.local[i].spec)}for(var i$1=0;i$1<set.children.length;i$1+=3)gather(set.children[i$1+2],set.children[i$1]+oldOffset+1)}for(var i=0;i<children.length;i+=3)-1==children[i+1]&&gather(children[i+2],oldChildren[i]+oldOffset+1);return decorations}(children,oldChildren,newLocal||[],mapping,offset,oldOffset,options),node,0,options);newLocal=built.local;for(var i$2=0;i$2<children.length;i$2+=3)children[i$2+1]<0&&(children.splice(i$2,3),i$2-=3);for(var i$3=0,j=0;i$3<built.children.length;i$3+=3){for(var from$1=built.children[i$3];j<children.length&&children[j]<from$1;)j+=3;children.splice(j,0,built.children[i$3],built.children[i$3+1],built.children[i$3+2])}}return new DecorationSet(newLocal&&newLocal.sort(byPos),children)}(this.children,newLocal,mapping,node,offset,oldOffset,options):newLocal?new DecorationSet(newLocal.sort(byPos)):empty},DecorationSet.prototype.add=function(doc,decorations){return decorations.length?this==empty?DecorationSet.create(doc,decorations):this.addInner(doc,decorations,0):this},DecorationSet.prototype.addInner=function(doc,decorations,offset){var children,this$1=this,childIndex=0;doc.forEach((function(childNode,childOffset){var found,baseOffset=childOffset+offset;if(found=takeSpansForNode(decorations,childNode,baseOffset)){for(children||(children=this$1.children.slice());childIndex<children.length&&children[childIndex]<childOffset;)childIndex+=3;children[childIndex]==childOffset?children[childIndex+2]=children[childIndex+2].addInner(childNode,found,baseOffset+1):children.splice(childIndex,0,childOffset,childOffset+childNode.nodeSize,buildTree(found,childNode,baseOffset+1,noSpec)),childIndex+=3}}));var local=moveSpans(childIndex?withoutNulls(decorations):decorations,-offset);return new DecorationSet(local.length?this.local.concat(local).sort(byPos):this.local,children||this.children)},DecorationSet.prototype.remove=function(decorations){return 0==decorations.length||this==empty?this:this.removeInner(decorations,0)},DecorationSet.prototype.removeInner=function(decorations,offset){for(var children=this.children,local=this.local,i=0;i<children.length;i+=3){for(var found=void 0,from=children[i]+offset,to=children[i+1]+offset,j=0,span=void 0;j<decorations.length;j++)(span=decorations[j])&&span.from>from&&span.to<to&&(decorations[j]=null,(found||(found=[])).push(span));if(found){children==this.children&&(children=this.children.slice());var removed=children[i+2].removeInner(found,from+1);removed!=empty?children[i+2]=removed:(children.splice(i,3),i-=3)}}if(local.length)for(var i$1=0,span$1=void 0;i$1<decorations.length;i$1++)if(span$1=decorations[i$1])for(var j$1=0;j$1<local.length;j$1++)local[j$1].eq(span$1,offset)&&(local==this.local&&(local=this.local.slice()),local.splice(j$1--,1));return children==this.children&&local==this.local?this:local.length||children.length?new DecorationSet(local,children):empty},DecorationSet.prototype.forChild=function(offset,node){if(this==empty)return this;if(node.isLeaf)return DecorationSet.empty;for(var child,local,i=0;i<this.children.length;i+=3)if(this.children[i]>=offset){this.children[i]==offset&&(child=this.children[i+2]);break}for(var start=offset+1,end=start+node.content.size,i$1=0;i$1<this.local.length;i$1++){var dec=this.local[i$1];if(dec.from<end&&dec.to>start&&dec.type instanceof InlineType){var from=Math.max(start,dec.from)-start,to=Math.min(end,dec.to)-start;from<to&&(local||(local=[])).push(dec.copy(from,to))}}if(local){var localSet=new DecorationSet(local.sort(byPos));return child?new DecorationGroup([localSet,child]):localSet}return child||empty},DecorationSet.prototype.eq=function(other){if(this==other)return!0;if(!(other instanceof DecorationSet)||this.local.length!=other.local.length||this.children.length!=other.children.length)return!1;for(var i=0;i<this.local.length;i++)if(!this.local[i].eq(other.local[i]))return!1;for(var i$1=0;i$1<this.children.length;i$1+=3)if(this.children[i$1]!=other.children[i$1]||this.children[i$1+1]!=other.children[i$1+1]||!this.children[i$1+2].eq(other.children[i$1+2]))return!1;return!0},DecorationSet.prototype.locals=function(node){return removeOverlap(this.localsInner(node))},DecorationSet.prototype.localsInner=function(node){if(this==empty)return none;if(node.inlineContent||!this.local.some(InlineType.is))return this.local;for(var result=[],i=0;i<this.local.length;i++)this.local[i].type instanceof InlineType||result.push(this.local[i]);return result};var empty=new DecorationSet;DecorationSet.empty=empty,DecorationSet.removeOverlap=removeOverlap;var DecorationGroup=function(members){this.members=members};function moveSpans(spans,offset){if(!offset||!spans.length)return spans;for(var result=[],i=0;i<spans.length;i++){var span=spans[i];result.push(new Decoration(span.from+offset,span.to+offset,span.type))}return result}function takeSpansForNode(spans,node,offset){if(node.isLeaf)return null;for(var end=offset+node.nodeSize,found=null,i=0,span=void 0;i<spans.length;i++)(span=spans[i])&&span.from>offset&&span.to<end&&((found||(found=[])).push(span),spans[i]=null);return found}function withoutNulls(array){for(var result=[],i=0;i<array.length;i++)null!=array[i]&&result.push(array[i]);return result}function buildTree(spans,node,offset,options){var children=[],hasNulls=!1;node.forEach((function(childNode,localStart){var found=takeSpansForNode(spans,childNode,localStart+offset);if(found){hasNulls=!0;var subtree=buildTree(found,childNode,offset+localStart+1,options);subtree!=empty&&children.push(localStart,localStart+childNode.nodeSize,subtree)}}));for(var locals=moveSpans(hasNulls?withoutNulls(spans):spans,-offset).sort(byPos),i=0;i<locals.length;i++)locals[i].type.valid(node,locals[i])||(options.onRemove&&options.onRemove(locals[i].spec),locals.splice(i--,1));return locals.length||children.length?new DecorationSet(locals,children):empty}function byPos(a,b){return a.from-b.from||a.to-b.to}function removeOverlap(spans){for(var working=spans,i=0;i<working.length-1;i++){var span=working[i];if(span.from!=span.to)for(var j=i+1;j<working.length;j++){var next=working[j];if(next.from!=span.from){next.from<span.to&&(working==spans&&(working=spans.slice()),working[i]=span.copy(span.from,next.from),insertAhead(working,j,span.copy(next.from,span.to)));break}next.to!=span.to&&(working==spans&&(working=spans.slice()),working[j]=next.copy(next.from,span.to),insertAhead(working,j+1,next.copy(span.to,next.to)))}}return working}function insertAhead(array,i,deco){for(;i<array.length&&byPos(deco,array[i])>0;)i++;array.splice(i,0,deco)}function viewDecorations(view){var found=[];return view.someProp("decorations",(function(f){var result=f(view.state);result&&result!=empty&&found.push(result)})),view.cursorWrapper&&found.push(DecorationSet.create(view.state.doc,[view.cursorWrapper.deco])),DecorationGroup.from(found)}DecorationGroup.prototype.forChild=function(offset,child){if(child.isLeaf)return DecorationSet.empty;for(var found=[],i=0;i<this.members.length;i++){var result=this.members[i].forChild(offset,child);result!=empty&&(result instanceof DecorationGroup?found=found.concat(result.members):found.push(result))}return DecorationGroup.from(found)},DecorationGroup.prototype.eq=function(other){if(!(other instanceof DecorationGroup)||other.members.length!=this.members.length)return!1;for(var i=0;i<this.members.length;i++)if(!this.members[i].eq(other.members[i]))return!1;return!0},DecorationGroup.prototype.locals=function(node){for(var result,sorted=!0,i=0;i<this.members.length;i++){var locals=this.members[i].localsInner(node);if(locals.length)if(result){sorted&&(result=result.slice(),sorted=!1);for(var j=0;j<locals.length;j++)result.push(locals[j])}else result=locals}return result?removeOverlap(sorted?result:result.sort(byPos)):none},DecorationGroup.from=function(members){switch(members.length){case 0:return empty;case 1:return members[0];default:return new DecorationGroup(members)}};var EditorView=function(place,props){this._props=props,this.state=props.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=place&&place.mount||document.createElement("div"),place&&(place.appendChild?place.appendChild(this.dom):place.apply?place(this.dom):place.mount&&(this.mounted=!0)),this.editable=getEditable(this),this.markCursor=null,this.cursorWrapper=null,updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(view){view.shiftKey=!1,view.mouseDown=null,view.lastKeyCode=null,view.lastKeyCodeTime=0,view.lastClick={time:0,x:0,y:0,type:""},view.lastSelectionOrigin=null,view.lastSelectionTime=0,view.lastIOSEnter=0,view.composing=!1,view.composingTimeout=null,view.compositionNodes=[],view.compositionEndedAt=-2e8,view.domObserver=new DOMObserver(view,(function(from,to,typeOver,added){return function(view,from,to,typeOver,addedNodes){if(from<0){var origin=view.lastSelectionTime>Date.now()-50?view.lastSelectionOrigin:null,newSel=selectionFromDOM(view,origin);if(newSel&&!view.state.selection.eq(newSel)){var tr$1=view.state.tr.setSelection(newSel);"pointer"==origin?tr$1.setMeta("pointer",!0):"key"==origin&&tr$1.scrollIntoView(),view.dispatch(tr$1)}}else{var $before=view.state.doc.resolve(from),shared=$before.sharedDepth(to);from=$before.before(shared+1),to=view.state.doc.resolve(to).after(shared+1);var preferredPos,preferredSide,sel=view.state.selection,parse=function(view,from_,to_){var ref=view.docView.parseRange(from_,to_),parent=ref.node,fromOffset=ref.fromOffset,toOffset=ref.toOffset,from=ref.from,to=ref.to,domSel=view.root.getSelection(),find=null,anchor=domSel.anchorNode;if(anchor&&view.dom.contains(1==anchor.nodeType?anchor:anchor.parentNode)&&(find=[{node:anchor,offset:domSel.anchorOffset}],selectionCollapsed(domSel)||find.push({node:domSel.focusNode,offset:domSel.focusOffset})),result.chrome&&8===view.lastKeyCode)for(var off=toOffset;off>fromOffset;off--){var node=parent.childNodes[off-1],desc=node.pmViewDesc;if("BR"==node.nodeType&&!desc){toOffset=off;break}if(!desc||desc.size)break}var startDoc=view.state.doc,parser=view.someProp("domParser")||prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.DOMParser.fromSchema(view.state.schema),$from=startDoc.resolve(from),sel=null,doc=parser.parse(parent,{topNode:$from.parent,topMatch:$from.parent.contentMatchAt($from.index()),topOpen:!0,from:fromOffset,to:toOffset,preserveWhitespace:!$from.parent.type.spec.code||"full",editableContent:!0,findPositions:find,ruleFromNode:ruleFromNode,context:$from});if(find&&null!=find[0].pos){var anchor$1=find[0].pos,head=find[1]&&find[1].pos;null==head&&(head=anchor$1),sel={anchor:anchor$1+from,head:head+from}}return{doc:doc,sel:sel,from:from,to:to}}(view,from,to),doc=view.state.doc,compare=doc.slice(parse.from,parse.to);8===view.lastKeyCode&&Date.now()-100<view.lastKeyCodeTime?(preferredPos=view.state.selection.to,preferredSide="end"):(preferredPos=view.state.selection.from,preferredSide="start"),view.lastKeyCode=null;var change=function(a,b,pos,preferredPos,preferredSide){var start=a.findDiffStart(b,pos);if(null==start)return null;var ref=a.findDiffEnd(b,pos+a.size,pos+b.size),endA=ref.a,endB=ref.b;return"end"==preferredSide&&(preferredPos-=endA+Math.max(0,start-Math.min(endA,endB))-start),endA<start&&a.size<b.size?(endB=(start-=preferredPos<=start&&preferredPos>=endA?start-preferredPos:0)+(endB-endA),endA=start):endB<start&&(endA=(start-=preferredPos<=start&&preferredPos>=endB?start-preferredPos:0)+(endA-endB),endB=start),{start:start,endA:endA,endB:endB}}(compare.content,parse.doc.content,parse.from,preferredPos,preferredSide);if(!change){if(!(typeOver&&sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection&&!sel.empty&&sel.$head.sameParent(sel.$anchor))||view.composing||parse.sel&&parse.sel.anchor!=parse.sel.head){if(parse.sel){var sel$1=resolveSelection(view,view.state.doc,parse.sel);sel$1&&!sel$1.eq(view.state.selection)&&view.dispatch(view.state.tr.setSelection(sel$1))}return}change={start:sel.from,endA:sel.to,endB:sel.to}}view.domChangeCount++,view.state.selection.from<view.state.selection.to&&change.start==change.endB&&view.state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection&&(change.start>view.state.selection.from&&change.start<=view.state.selection.from+2?change.start=view.state.selection.from:change.endA<view.state.selection.to&&change.endA>=view.state.selection.to-2&&(change.endB+=view.state.selection.to-change.endA,change.endA=view.state.selection.to)),result.ie&&result.ie_version<=11&&change.endB==change.start+1&&change.endA==change.start&&change.start>parse.from&&" "==parse.doc.textBetween(change.start-parse.from-1,change.start-parse.from+1)&&(change.start--,change.endA--,change.endB--);var nextSel,$from=parse.doc.resolveNoCache(change.start-parse.from),$to=parse.doc.resolveNoCache(change.endB-parse.from),inlineChange=$from.sameParent($to)&&$from.parent.inlineContent;if((result.ios&&view.lastIOSEnter>Date.now()-100&&(!inlineChange||addedNodes.some((function(n){return"DIV"==n.nodeName||"P"==n.nodeName})))||!inlineChange&&$from.pos<parse.doc.content.size&&(nextSel=prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.findFrom(parse.doc.resolve($from.pos+1),1,!0))&&nextSel.head==$to.pos)&&view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(13,"Enter"))})))view.lastIOSEnter=0;else if(view.state.selection.anchor>change.start&&function(old,start,end,$newStart,$newEnd){if(!$newStart.parent.isTextblock||end-start<=$newEnd.pos-$newStart.pos||skipClosingAndOpening($newStart,!0,!1)<$newEnd.pos)return!1;var $start=old.resolve(start);if($start.parentOffset<$start.parent.content.size||!$start.parent.isTextblock)return!1;var $next=old.resolve(skipClosingAndOpening($start,!0,!0));return!(!$next.parent.isTextblock||$next.pos>end||skipClosingAndOpening($next,!0,!1)<end)&&$newStart.parent.content.cut($newStart.parentOffset).eq($next.parent.content)}(doc,change.start,change.endA,$from,$to)&&view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(8,"Backspace"))})))result.android&&result.chrome&&view.domObserver.suppressSelectionUpdates();else{result.android&&!inlineChange&&$from.start()!=$to.start()&&0==$to.parentOffset&&$from.depth==$to.depth&&parse.sel&&parse.sel.anchor==parse.sel.head&&parse.sel.head==change.endA&&(change.endB-=2,$to=parse.doc.resolveNoCache(change.endB-parse.from),setTimeout((function(){view.someProp("handleKeyDown",(function(f){return f(view,keyEvent(13,"Enter"))}))}),20));var tr,storedMarks,markChange,$from1,chFrom=change.start,chTo=change.endA;if(inlineChange)if($from.pos==$to.pos)result.ie&&result.ie_version<=11&&0==$from.parentOffset&&(view.domObserver.suppressSelectionUpdates(),setTimeout((function(){return selectionToDOM(view)}),20)),tr=view.state.tr.delete(chFrom,chTo),storedMarks=doc.resolve(change.start).marksAcross(doc.resolve(change.endA));else if(change.endA==change.endB&&($from1=doc.resolve(change.start))&&(markChange=function(cur,prev){for(var type,mark,update,curMarks=cur.firstChild.marks,prevMarks=prev.firstChild.marks,added=curMarks,removed=prevMarks,i=0;i<prevMarks.length;i++)added=prevMarks[i].removeFromSet(added);for(var i$1=0;i$1<curMarks.length;i$1++)removed=curMarks[i$1].removeFromSet(removed);if(1==added.length&&0==removed.length)mark=added[0],type="add",update=function(node){return node.mark(mark.addToSet(node.marks))};else{if(0!=added.length||1!=removed.length)return null;mark=removed[0],type="remove",update=function(node){return node.mark(mark.removeFromSet(node.marks))}}for(var updated=[],i$2=0;i$2<prev.childCount;i$2++)updated.push(update(prev.child(i$2)));if(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(updated).eq(cur))return{mark:mark,type:type}}($from.parent.content.cut($from.parentOffset,$to.parentOffset),$from1.parent.content.cut($from1.parentOffset,change.endA-$from1.start()))))tr=view.state.tr,"add"==markChange.type?tr.addMark(chFrom,chTo,markChange.mark):tr.removeMark(chFrom,chTo,markChange.mark);else if($from.parent.child($from.index()).isText&&$from.index()==$to.index()-($to.textOffset?0:1)){var text=$from.parent.textBetween($from.parentOffset,$to.parentOffset);if(view.someProp("handleTextInput",(function(f){return f(view,chFrom,chTo,text)})))return;tr=view.state.tr.insertText(text,chFrom,chTo)}if(tr||(tr=view.state.tr.replace(chFrom,chTo,parse.doc.slice(change.start-parse.from,change.endB-parse.from))),parse.sel){var sel$2=resolveSelection(view,tr.doc,parse.sel);sel$2&&!(result.chrome&&result.android&&view.composing&&sel$2.empty&&(sel$2.head==chFrom||sel$2.head==tr.mapping.map(chTo)-1)||result.ie&&sel$2.empty&&sel$2.head==chFrom)&&tr.setSelection(sel$2)}storedMarks&&tr.ensureMarks(storedMarks),view.dispatch(tr.scrollIntoView())}}}(view,from,to,typeOver,added)})),view.domObserver.start(),view.domChangeCount=0,view.eventHandlers=Object.create(null);var loop=function(event){var handler=handlers[event];view.dom.addEventListener(event,view.eventHandlers[event]=function(event){!function(view,event){if(!event.bubbles)return!0;if(event.defaultPrevented)return!1;for(var node=event.target;node!=view.dom;node=node.parentNode)if(!node||11==node.nodeType||node.pmViewDesc&&node.pmViewDesc.stopEvent(event))return!1;return!0}(view,event)||runCustomHandler(view,event)||!view.editable&&event.type in editHandlers||handler(view,event)})};for(var event in handlers)loop(event);result.safari&&view.dom.addEventListener("input",(function(){return null})),ensureListeners(view)}(this),this.pluginViews=[],this.updatePluginViews()},prototypeAccessors$2={props:{configurable:!0},root:{configurable:!0}};function computeDocDeco(view){var attrs=Object.create(null);return attrs.class="ProseMirror",attrs.contenteditable=String(view.editable),view.someProp("attributes",(function(value){if("function"==typeof value&&(value=value(view.state)),value)for(var attr in value)"class"==attr?attrs.class+=" "+value[attr]:attrs[attr]||"contenteditable"==attr||"nodeName"==attr||(attrs[attr]=String(value[attr]))})),[Decoration.node(0,view.state.doc.content.size,attrs)]}function updateCursorWrapper(view){if(view.markCursor){var dom=document.createElement("img");dom.setAttribute("mark-placeholder","true"),view.cursorWrapper={dom:dom,deco:Decoration.widget(view.state.selection.head,dom,{raw:!0,marks:view.markCursor})}}else view.cursorWrapper=null}function getEditable(view){return!view.someProp("editable",(function(value){return!1===value(view.state)}))}function buildNodeViews(view){var result={};return view.someProp("nodeViews",(function(obj){for(var prop in obj)Object.prototype.hasOwnProperty.call(result,prop)||(result[prop]=obj[prop])})),result}function selectionContext(root){var ref=root.getSelection(),offset=ref.focusOffset,node=ref.focusNode;return node&&1==node.nodeType?[node,offset,node.childNodes[offset-1],node.childNodes[offset]]:null}prototypeAccessors$2.props.get=function(){if(this._props.state!=this.state){var prev=this._props;for(var name in this._props={},prev)this._props[name]=prev[name];this._props.state=this.state}return this._props},EditorView.prototype.update=function(props){props.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this),this._props=props,this.updateStateInner(props.state,!0)},EditorView.prototype.setProps=function(props){var updated={};for(var name in this._props)updated[name]=this._props[name];for(var name$1 in updated.state=this.state,props)updated[name$1]=props[name$1];this.update(updated)},EditorView.prototype.updateState=function(state){this.updateStateInner(state,this.state.plugins!=state.plugins)},EditorView.prototype.updateStateInner=function(state,reconfigured){var this$1=this,prev=this.state,redraw=!1;if(this.state=state,reconfigured){var nodeViews=buildNodeViews(this);(function(a,b){var nA=0,nB=0;for(var prop in a){if(a[prop]!=b[prop])return!0;nA++}for(var _ in b)nB++;return nA!=nB})(nodeViews,this.nodeViews)&&(this.nodeViews=nodeViews,redraw=!0),ensureListeners(this)}this.editable=getEditable(this),updateCursorWrapper(this);var anchorDOM,domSel,sel1,sel2,depth,ref,refDOM,refTop,newRefTop,innerDeco=viewDecorations(this),outerDeco=computeDocDeco(this),scroll=reconfigured?"reset":state.scrollToSelection>prev.scrollToSelection?"to selection":"preserve",updateDoc=redraw||!this.docView.matchesNode(state.doc,outerDeco,innerDeco),updateSel=updateDoc||!state.selection.eq(prev.selection),oldScrollPos="preserve"==scroll&&updateSel&&null==this.dom.style.overflowAnchor&&function(view){for(var refDOM,refTop,rect=view.dom.getBoundingClientRect(),startY=Math.max(0,rect.top),x=(rect.left+rect.right)/2,y=startY+1;y<Math.min(innerHeight,rect.bottom);y+=5){var dom=view.root.elementFromPoint(x,y);if(dom!=view.dom&&view.dom.contains(dom)){var localRect=dom.getBoundingClientRect();if(localRect.top>=startY-20){refDOM=dom,refTop=localRect.top;break}}}return{refDOM:refDOM,refTop:refTop,stack:scrollStack(view.dom)}}(this);if(updateSel){this.domObserver.stop();var forceSelUpdate=updateDoc&&(result.ie||result.chrome)&&!this.composing&&!prev.selection.empty&&!state.selection.empty&&(sel1=prev.selection,sel2=state.selection,depth=Math.min(sel1.$anchor.sharedDepth(sel1.head),sel2.$anchor.sharedDepth(sel2.head)),sel1.$anchor.start(depth)!=sel2.$anchor.start(depth));if(updateDoc){var selContext=result.chrome&&selectionContext(this.root);!redraw&&this.docView.update(state.doc,outerDeco,innerDeco,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=docViewDesc(state.doc,outerDeco,innerDeco,this.dom,this)),selContext&&function(context,root){var newContext=selectionContext(root);if(!newContext||3==newContext[0].nodeType)return!1;for(var i=0;i<context.length;i++)if(newContext[i]!=context[i])return!0;return!1}(selContext,this.root)&&(forceSelUpdate=!0)}forceSelUpdate||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(anchorDOM=this.docView.domFromPos(this.state.selection.anchor),domSel=this.root.getSelection(),isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)))?selectionToDOM(this,forceSelUpdate):(syncNodeSelection(this,state.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(prev),"reset"==scroll)this.dom.scrollTop=0;else if("to selection"==scroll){var startDOM=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(f){return f(this$1)}))||function(view,rect,startDOM){for(var scrollThreshold=view.someProp("scrollThreshold")||0,scrollMargin=view.someProp("scrollMargin")||5,doc=view.dom.ownerDocument,parent=startDOM||view.dom;parent;parent=parentNode(parent))if(1==parent.nodeType){var atTop=parent==doc.body||1!=parent.nodeType,bounding=atTop?windowRect(doc):clientRect(parent),moveX=0,moveY=0;if(rect.top<bounding.top+getSide(scrollThreshold,"top")?moveY=-(bounding.top-rect.top+getSide(scrollMargin,"top")):rect.bottom>bounding.bottom-getSide(scrollThreshold,"bottom")&&(moveY=rect.bottom-bounding.bottom+getSide(scrollMargin,"bottom")),rect.left<bounding.left+getSide(scrollThreshold,"left")?moveX=-(bounding.left-rect.left+getSide(scrollMargin,"left")):rect.right>bounding.right-getSide(scrollThreshold,"right")&&(moveX=rect.right-bounding.right+getSide(scrollMargin,"right")),moveX||moveY)if(atTop)doc.defaultView.scrollBy(moveX,moveY);else{var startX=parent.scrollLeft,startY=parent.scrollTop;moveY&&(parent.scrollTop+=moveY),moveX&&(parent.scrollLeft+=moveX);var dX=parent.scrollLeft-startX,dY=parent.scrollTop-startY;rect={left:rect.left-dX,top:rect.top-dY,right:rect.right-dX,bottom:rect.bottom-dY}}if(atTop)break}}(this,state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection?this.docView.domAfterPos(state.selection.from).getBoundingClientRect():this.coordsAtPos(state.selection.head),startDOM)}else oldScrollPos&&(refTop=(ref=oldScrollPos).refTop,restoreScrollStack(ref.stack,0==(newRefTop=(refDOM=ref.refDOM)?refDOM.getBoundingClientRect().top:0)?0:newRefTop-refTop))},EditorView.prototype.destroyPluginViews=function(){for(var view;view=this.pluginViews.pop();)view.destroy&&view.destroy()},EditorView.prototype.updatePluginViews=function(prevState){if(prevState&&prevState.plugins==this.state.plugins)for(var i$1=0;i$1<this.pluginViews.length;i$1++){var pluginView=this.pluginViews[i$1];pluginView.update&&pluginView.update(this,prevState)}else{this.destroyPluginViews();for(var i=0;i<this.state.plugins.length;i++){var plugin=this.state.plugins[i];plugin.spec.view&&this.pluginViews.push(plugin.spec.view(this))}}},EditorView.prototype.someProp=function(propName,f){var value,prop=this._props&&this._props[propName];if(null!=prop&&(value=f?f(prop):prop))return value;var plugins=this.state.plugins;if(plugins)for(var i=0;i<plugins.length;i++){var prop$1=plugins[i].props[propName];if(null!=prop$1&&(value=f?f(prop$1):prop$1))return value}},EditorView.prototype.hasFocus=function(){return this.root.activeElement==this.dom},EditorView.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(dom){if(dom.setActive)return dom.setActive();if(preventScrollSupported)return dom.focus(preventScrollSupported);var stored=scrollStack(dom);dom.focus(null==preventScrollSupported?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(stored,0))}(this.dom),selectionToDOM(this),this.domObserver.start()},prototypeAccessors$2.root.get=function(){var cached=this._root;if(null==cached)for(var search=this.dom.parentNode;search;search=search.parentNode)if(9==search.nodeType||11==search.nodeType&&search.host)return search.getSelection||(Object.getPrototypeOf(search).getSelection=function(){return document.getSelection()}),this._root=search;return cached||document},EditorView.prototype.posAtCoords=function(coords){return function(view,coords){var assign,assign$1,node,offset,root=view.root;if(root.caretPositionFromPoint)try{var pos$1=root.caretPositionFromPoint(coords.left,coords.top);pos$1&&(node=(assign=pos$1).offsetNode,offset=assign.offset)}catch(_){}if(!node&&root.caretRangeFromPoint){var range=root.caretRangeFromPoint(coords.left,coords.top);range&&(node=(assign$1=range).startContainer,offset=assign$1.startOffset)}var pos,elt=root.elementFromPoint(coords.left,coords.top+1);if(!elt||!view.dom.contains(1!=elt.nodeType?elt.parentNode:elt)){var box=view.dom.getBoundingClientRect();if(!inRect(coords,box))return null;if(!(elt=function elementFromPoint(element,coords,box){var len=element.childNodes.length;if(len&&box.top<box.bottom)for(var startI=Math.max(0,Math.min(len-1,Math.floor(len*(coords.top-box.top)/(box.bottom-box.top))-2)),i=startI;;){var child=element.childNodes[i];if(1==child.nodeType)for(var rects=child.getClientRects(),j=0;j<rects.length;j++){var rect=rects[j];if(inRect(coords,rect))return elementFromPoint(child,coords,rect)}if((i=(i+1)%len)==startI)break}return element}(view.dom,coords,box)))return null}if(result.safari&&elt.draggable&&(node=offset=null),elt=function(dom,coords){var parent=dom.parentNode;return parent&&/^li$/i.test(parent.nodeName)&&coords.left<dom.getBoundingClientRect().left?parent:dom}(elt,coords),node){if(result.gecko&&1==node.nodeType&&(offset=Math.min(offset,node.childNodes.length))<node.childNodes.length){var box$1,next=node.childNodes[offset];"IMG"==next.nodeName&&(box$1=next.getBoundingClientRect()).right<=coords.left&&box$1.bottom>coords.top&&offset++}node==view.dom&&offset==node.childNodes.length-1&&1==node.lastChild.nodeType&&coords.top>node.lastChild.getBoundingClientRect().bottom?pos=view.state.doc.content.size:0!=offset&&1==node.nodeType&&"BR"==node.childNodes[offset-1].nodeName||(pos=function(view,node,offset,coords){for(var outside=-1,cur=node;cur!=view.dom;){var desc=view.docView.nearestDesc(cur,!0);if(!desc)return null;if(desc.node.isBlock&&desc.parent){var rect=desc.dom.getBoundingClientRect();if(rect.left>coords.left||rect.top>coords.top)outside=desc.posBefore;else{if(!(rect.right<coords.left||rect.bottom<coords.top))break;outside=desc.posAfter}}cur=desc.dom.parentNode}return outside>-1?outside:view.docView.posFromDOM(node,offset)}(view,node,offset,coords))}null==pos&&(pos=function(view,elt,coords){var ref=function findOffsetInNode(node,coords){for(var closest,coordsClosest,dxClosest=2e8,offset=0,rowBot=coords.top,rowTop=coords.top,child=node.firstChild,childIndex=0;child;child=child.nextSibling,childIndex++){var rects=void 0;if(1==child.nodeType)rects=child.getClientRects();else{if(3!=child.nodeType)continue;rects=textRange(child).getClientRects()}for(var i=0;i<rects.length;i++){var rect=rects[i];if(rect.top<=rowBot&&rect.bottom>=rowTop){rowBot=Math.max(rect.bottom,rowBot),rowTop=Math.min(rect.top,rowTop);var dx=rect.left>coords.left?rect.left-coords.left:rect.right<coords.left?coords.left-rect.right:0;if(dx<dxClosest){closest=child,dxClosest=dx,coordsClosest=dx&&3==closest.nodeType?{left:rect.right<coords.left?rect.right:rect.left,top:coords.top}:coords,1==child.nodeType&&dx&&(offset=childIndex+(coords.left>=(rect.left+rect.right)/2?1:0));continue}}!closest&&(coords.left>=rect.right&&coords.top>=rect.top||coords.left>=rect.left&&coords.top>=rect.bottom)&&(offset=childIndex+1)}}return closest&&3==closest.nodeType?function(node,coords){for(var len=node.nodeValue.length,range=document.createRange(),i=0;i<len;i++){range.setEnd(node,i+1),range.setStart(node,i);var rect=singleRect(range,1);if(rect.top!=rect.bottom&&inRect(coords,rect))return{node:node,offset:i+(coords.left>=(rect.left+rect.right)/2?1:0)}}return{node:node,offset:0}}(closest,coordsClosest):!closest||dxClosest&&1==closest.nodeType?{node:node,offset:offset}:findOffsetInNode(closest,coordsClosest)}(elt,coords),node=ref.node,offset=ref.offset,bias=-1;if(1==node.nodeType&&!node.firstChild){var rect=node.getBoundingClientRect();bias=rect.left!=rect.right&&coords.left>(rect.left+rect.right)/2?1:-1}return view.docView.posFromDOM(node,offset,bias)}(view,elt,coords));var desc=view.docView.nearestDesc(elt,!0);return{pos:pos,inside:desc?desc.posAtStart-desc.border:-1}}(this,coords)},EditorView.prototype.coordsAtPos=function(pos){return coordsAtPos(this,pos)},EditorView.prototype.domAtPos=function(pos){return this.docView.domFromPos(pos)},EditorView.prototype.nodeDOM=function(pos){var desc=this.docView.descAt(pos);return desc?desc.nodeDOM:null},EditorView.prototype.posAtDOM=function(node,offset,bias){void 0===bias&&(bias=-1);var pos=this.docView.posFromDOM(node,offset,bias);if(null==pos)throw new RangeError("DOM position not inside the editor");return pos},EditorView.prototype.endOfTextblock=function(dir,state){return function(view,state,dir){return cachedState==state&&cachedDir==dir?cachedResult:(cachedState=state,cachedDir=dir,cachedResult="up"==dir||"down"==dir?function(view,state,dir){var sel=state.selection,$pos="up"==dir?sel.$anchor.min(sel.$head):sel.$anchor.max(sel.$head);return withFlushedState(view,state,(function(){for(var dom=view.docView.domFromPos($pos.pos).node;;){var nearest=view.docView.nearestDesc(dom,!0);if(!nearest)break;if(nearest.node.isBlock){dom=nearest.dom;break}dom=nearest.dom.parentNode}for(var coords=coordsAtPos(view,$pos.pos),child=dom.firstChild;child;child=child.nextSibling){var boxes=void 0;if(1==child.nodeType)boxes=child.getClientRects();else{if(3!=child.nodeType)continue;boxes=textRange(child,0,child.nodeValue.length).getClientRects()}for(var i=0;i<boxes.length;i++){var box=boxes[i];if(box.bottom>box.top&&("up"==dir?box.bottom<coords.top+1:box.top>coords.bottom-1))return!1}}return!0}))}(view,state,dir):function(view,state,dir){var $head=state.selection.$head;if(!$head.parent.isTextblock)return!1;var offset=$head.parentOffset,atStart=!offset,atEnd=offset==$head.parent.content.size,sel=getSelection();return maybeRTL.test($head.parent.textContent)&&sel.modify?withFlushedState(view,state,(function(){var oldRange=sel.getRangeAt(0),oldNode=sel.focusNode,oldOff=sel.focusOffset,oldBidiLevel=sel.caretBidiLevel;sel.modify("move",dir,"character");var result=!($head.depth?view.docView.domAfterPos($head.before()):view.dom).contains(1==sel.focusNode.nodeType?sel.focusNode:sel.focusNode.parentNode)||oldNode==sel.focusNode&&oldOff==sel.focusOffset;return sel.removeAllRanges(),sel.addRange(oldRange),null!=oldBidiLevel&&(sel.caretBidiLevel=oldBidiLevel),result})):"left"==dir||"backward"==dir?atStart:atEnd}(view,state,dir))}(this,state||this.state,dir)},EditorView.prototype.destroy=function(){this.docView&&(function(view){for(var type in view.domObserver.stop(),view.eventHandlers)view.dom.removeEventListener(type,view.eventHandlers[type]);clearTimeout(view.composingTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},EditorView.prototype.dispatchEvent=function(event){return function(view,event){runCustomHandler(view,event)||!handlers[event.type]||!view.editable&&event.type in editHandlers||handlers[event.type](view,event)}(this,event)},EditorView.prototype.dispatch=function(tr){var dispatchTransaction=this._props.dispatchTransaction;dispatchTransaction?dispatchTransaction.call(this,tr):this.updateState(this.state.apply(tr))},Object.defineProperties(EditorView.prototype,prototypeAccessors$2)},Vb5C:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CellSelection",(function(){return CellSelection})),__webpack_require__.d(__webpack_exports__,"TableMap",(function(){return TableMap})),__webpack_require__.d(__webpack_exports__,"TableView",(function(){return TableView})),__webpack_require__.d(__webpack_exports__,"__clipCells",(function(){return clipCells})),__webpack_require__.d(__webpack_exports__,"__insertCells",(function(){return insertCells})),__webpack_require__.d(__webpack_exports__,"__pastedCells",(function(){return pastedCells})),__webpack_require__.d(__webpack_exports__,"addColSpan",(function(){return addColSpan})),__webpack_require__.d(__webpack_exports__,"addColumn",(function(){return addColumn})),__webpack_require__.d(__webpack_exports__,"addColumnAfter",(function(){return addColumnAfter})),__webpack_require__.d(__webpack_exports__,"addColumnBefore",(function(){return addColumnBefore})),__webpack_require__.d(__webpack_exports__,"addRow",(function(){return addRow})),__webpack_require__.d(__webpack_exports__,"addRowAfter",(function(){return addRowAfter})),__webpack_require__.d(__webpack_exports__,"addRowBefore",(function(){return addRowBefore})),__webpack_require__.d(__webpack_exports__,"cellAround",(function(){return cellAround})),__webpack_require__.d(__webpack_exports__,"colCount",(function(){return colCount})),__webpack_require__.d(__webpack_exports__,"columnIsHeader",(function(){return columnIsHeader})),__webpack_require__.d(__webpack_exports__,"columnResizing",(function(){return columnResizing})),__webpack_require__.d(__webpack_exports__,"columnResizingPluginKey",(function(){return key$1})),__webpack_require__.d(__webpack_exports__,"deleteColumn",(function(){return deleteColumn})),__webpack_require__.d(__webpack_exports__,"deleteRow",(function(){return deleteRow})),__webpack_require__.d(__webpack_exports__,"deleteTable",(function(){return deleteTable})),__webpack_require__.d(__webpack_exports__,"findCell",(function(){return findCell})),__webpack_require__.d(__webpack_exports__,"fixTables",(function(){return fixTables})),__webpack_require__.d(__webpack_exports__,"fixTablesKey",(function(){return fixTablesKey})),__webpack_require__.d(__webpack_exports__,"goToNextCell",(function(){return goToNextCell})),__webpack_require__.d(__webpack_exports__,"handlePaste",(function(){return handlePaste})),__webpack_require__.d(__webpack_exports__,"inSameTable",(function(){return inSameTable})),__webpack_require__.d(__webpack_exports__,"isInTable",(function(){return isInTable})),__webpack_require__.d(__webpack_exports__,"mergeCells",(function(){return mergeCells})),__webpack_require__.d(__webpack_exports__,"moveCellForward",(function(){return moveCellForward})),__webpack_require__.d(__webpack_exports__,"nextCell",(function(){return nextCell})),__webpack_require__.d(__webpack_exports__,"pointsAtCell",(function(){return pointsAtCell})),__webpack_require__.d(__webpack_exports__,"removeColSpan",(function(){return removeColSpan})),__webpack_require__.d(__webpack_exports__,"removeColumn",(function(){return removeColumn})),__webpack_require__.d(__webpack_exports__,"removeRow",(function(){return removeRow})),__webpack_require__.d(__webpack_exports__,"rowIsHeader",(function(){return rowIsHeader})),__webpack_require__.d(__webpack_exports__,"selectedRect",(function(){return selectedRect})),__webpack_require__.d(__webpack_exports__,"selectionCell",(function(){return selectionCell})),__webpack_require__.d(__webpack_exports__,"setAttr",(function(){return setAttr})),__webpack_require__.d(__webpack_exports__,"setCellAttr",(function(){return setCellAttr})),__webpack_require__.d(__webpack_exports__,"splitCell",(function(){return splitCell})),__webpack_require__.d(__webpack_exports__,"splitCellWithType",(function(){return splitCellWithType})),__webpack_require__.d(__webpack_exports__,"tableEditing",(function(){return tableEditing})),__webpack_require__.d(__webpack_exports__,"tableEditingKey",(function(){return key})),__webpack_require__.d(__webpack_exports__,"tableNodeTypes",(function(){return tableNodeTypes})),__webpack_require__.d(__webpack_exports__,"tableNodes",(function(){return tableNodes})),__webpack_require__.d(__webpack_exports__,"toggleHeader",(function(){return toggleHeader})),__webpack_require__.d(__webpack_exports__,"toggleHeaderCell",(function(){return toggleHeaderCell})),__webpack_require__.d(__webpack_exports__,"toggleHeaderColumn",(function(){return toggleHeaderColumn})),__webpack_require__.d(__webpack_exports__,"toggleHeaderRow",(function(){return toggleHeaderRow})),__webpack_require__.d(__webpack_exports__,"updateColumnsOnResize",(function(){return updateColumns}));var readFromCache,addToCache,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("UxO+"),prosemirror_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("MEpN"),prosemirror_keymap__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fwbU"),prosemirror_view__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("V2qZ"),prosemirror_transform__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("CsC6");if("undefined"!=typeof WeakMap){var cache=new WeakMap;readFromCache=function(key){return cache.get(key)},addToCache=function(key,value){return cache.set(key,value),value}}else{var cache$1=[],cachePos=0;readFromCache=function(key){for(var i=0;i<cache$1.length;i+=2)if(cache$1[i]==key)return cache$1[i+1]},addToCache=function(key,value){return 10==cachePos&&(cachePos=0),cache$1[cachePos++]=key,cache$1[cachePos++]=value}}var Rect=function(left,top,right,bottom){this.left=left,this.top=top,this.right=right,this.bottom=bottom},TableMap=function(width,height,map,problems){this.width=width,this.height=height,this.map=map,this.problems=problems};function freshColWidth(attrs){if(attrs.colwidth)return attrs.colwidth.slice();for(var result=[],i=0;i<attrs.colspan;i++)result.push(0);return result}function getCellAttrs(dom,extraAttrs){var widthAttr=dom.getAttribute("data-colwidth"),widths=widthAttr&&/^\d+(,\d+)*$/.test(widthAttr)?widthAttr.split(",").map((function(s){return Number(s)})):null,colspan=Number(dom.getAttribute("colspan")||1),result={colspan:colspan,rowspan:Number(dom.getAttribute("rowspan")||1),colwidth:widths&&widths.length==colspan?widths:null};for(var prop in extraAttrs){var getter=extraAttrs[prop].getFromDOM,value=getter&&getter(dom);null!=value&&(result[prop]=value)}return result}function setCellAttrs(node,extraAttrs){var attrs={};for(var prop in 1!=node.attrs.colspan&&(attrs.colspan=node.attrs.colspan),1!=node.attrs.rowspan&&(attrs.rowspan=node.attrs.rowspan),node.attrs.colwidth&&(attrs["data-colwidth"]=node.attrs.colwidth.join(",")),extraAttrs){var setter=extraAttrs[prop].setDOMAttr;setter&&setter(node.attrs[prop],attrs)}return attrs}function tableNodes(options){var extraAttrs=options.cellAttributes||{},cellAttrs={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var prop in extraAttrs)cellAttrs[prop]={default:extraAttrs[prop].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:options.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:options.cellContent,attrs:cellAttrs,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(dom){return getCellAttrs(dom,extraAttrs)}}],toDOM:function(node){return["td",setCellAttrs(node,extraAttrs),0]}},table_header:{content:options.cellContent,attrs:cellAttrs,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(dom){return getCellAttrs(dom,extraAttrs)}}],toDOM:function(node){return["th",setCellAttrs(node,extraAttrs),0]}}}}function tableNodeTypes(schema){var result=schema.cached.tableNodeTypes;if(!result)for(var name in result=schema.cached.tableNodeTypes={},schema.nodes){var type=schema.nodes[name],role=type.spec.tableRole;role&&(result[role]=type)}return result}TableMap.prototype.findCell=function(pos){for(var i=0;i<this.map.length;i++){var curPos=this.map[i];if(curPos==pos){for(var left=i%this.width,top=i/this.width|0,right=left+1,bottom=top+1,j=1;right<this.width&&this.map[i+j]==curPos;j++)right++;for(var j$1=1;bottom<this.height&&this.map[i+this.width*j$1]==curPos;j$1++)bottom++;return new Rect(left,top,right,bottom)}}throw new RangeError("No cell with offset "+pos+" found")},TableMap.prototype.colCount=function(pos){for(var i=0;i<this.map.length;i++)if(this.map[i]==pos)return i%this.width;throw new RangeError("No cell with offset "+pos+" found")},TableMap.prototype.nextCell=function(pos,axis,dir){var ref=this.findCell(pos),left=ref.left,right=ref.right,top=ref.top,bottom=ref.bottom;return"horiz"==axis?(dir<0?0==left:right==this.width)?null:this.map[top*this.width+(dir<0?left-1:right)]:(dir<0?0==top:bottom==this.height)?null:this.map[left+this.width*(dir<0?top-1:bottom)]},TableMap.prototype.rectBetween=function(a,b){var ref=this.findCell(a),leftA=ref.left,rightA=ref.right,topA=ref.top,bottomA=ref.bottom,ref$1=this.findCell(b),rightB=ref$1.right,topB=ref$1.top,bottomB=ref$1.bottom;return new Rect(Math.min(leftA,ref$1.left),Math.min(topA,topB),Math.max(rightA,rightB),Math.max(bottomA,bottomB))},TableMap.prototype.cellsInRect=function(rect){for(var result=[],seen={},row=rect.top;row<rect.bottom;row++)for(var col=rect.left;col<rect.right;col++){var index=row*this.width+col,pos=this.map[index];seen[pos]||(seen[pos]=!0,col==rect.left&&col&&this.map[index-1]==pos||row==rect.top&&row&&this.map[index-this.width]==pos||result.push(pos))}return result},TableMap.prototype.positionAt=function(row,col,table){for(var i=0,rowStart=0;;i++){var rowEnd=rowStart+table.child(i).nodeSize;if(i==row){for(var index=col+row*this.width,rowEndIndex=(row+1)*this.width;index<rowEndIndex&&this.map[index]<rowStart;)index++;return index==rowEndIndex?rowEnd-1:this.map[index]}rowStart=rowEnd}},TableMap.get=function(table){return readFromCache(table)||addToCache(table,function(table){if("table"!=table.type.spec.tableRole)throw new RangeError("Not a table node: "+table.type.name);for(var width=function(table){for(var width=-1,hasRowSpan=!1,row=0;row<table.childCount;row++){var rowNode=table.child(row),rowWidth=0;if(hasRowSpan)for(var j=0;j<row;j++)for(var prevRow=table.child(j),i=0;i<prevRow.childCount;i++){var cell=prevRow.child(i);j+cell.attrs.rowspan>row&&(rowWidth+=cell.attrs.colspan)}for(var i$1=0;i$1<rowNode.childCount;i$1++){var cell$1=rowNode.child(i$1);rowWidth+=cell$1.attrs.colspan,cell$1.attrs.rowspan>1&&(hasRowSpan=!0)}-1==width?width=rowWidth:width!=rowWidth&&(width=Math.max(width,rowWidth))}return width}(table),height=table.childCount,map=[],mapPos=0,problems=null,colWidths=[],i=0,e=width*height;i<e;i++)map[i]=0;for(var row=0,pos=0;row<height;row++){var rowNode=table.child(row);pos++;for(var i$1=0;;i$1++){for(;mapPos<map.length&&0!=map[mapPos];)mapPos++;if(i$1==rowNode.childCount)break;for(var cellNode=rowNode.child(i$1),ref=cellNode.attrs,colspan=ref.colspan,rowspan=ref.rowspan,colwidth=ref.colwidth,h=0;h<rowspan;h++){if(h+row>=height){(problems||(problems=[])).push({type:"overlong_rowspan",pos:pos,n:rowspan-h});break}for(var start=mapPos+h*width,w=0;w<colspan;w++){0==map[start+w]?map[start+w]=pos:(problems||(problems=[])).push({type:"collision",row:row,pos:pos,n:colspan-w});var colW=colwidth&&colwidth[w];if(colW){var widthIndex=(start+w)%width*2,prev=colWidths[widthIndex];null==prev||prev!=colW&&1==colWidths[widthIndex+1]?(colWidths[widthIndex]=colW,colWidths[widthIndex+1]=1):prev==colW&&colWidths[widthIndex+1]++}}}mapPos+=colspan,pos+=cellNode.nodeSize}for(var expectedPos=(row+1)*width,missing=0;mapPos<expectedPos;)0==map[mapPos++]&&missing++;missing&&(problems||(problems=[])).push({type:"missing",row:row,n:missing}),pos++}for(var tableMap=new TableMap(width,height,map,problems),badWidths=!1,i$2=0;!badWidths&&i$2<colWidths.length;i$2+=2)null!=colWidths[i$2]&&colWidths[i$2+1]<height&&(badWidths=!0);return badWidths&&function(map,colWidths,table){map.problems||(map.problems=[]);for(var i=0,seen={};i<map.map.length;i++){var pos=map.map[i];if(!seen[pos]){seen[pos]=!0;for(var node=table.nodeAt(pos),updated=null,j=0;j<node.attrs.colspan;j++){var colWidth=colWidths[(i+j)%map.width*2];null==colWidth||node.attrs.colwidth&&node.attrs.colwidth[j]==colWidth||((updated||(updated=freshColWidth(node.attrs)))[j]=colWidth)}updated&&map.problems.unshift({type:"colwidth mismatch",pos:pos,colwidth:updated})}}}(tableMap,colWidths,table),tableMap}(table))};var key=new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.PluginKey("selectingCells");function cellAround($pos){for(var d=$pos.depth-1;d>0;d--)if("row"==$pos.node(d).type.spec.tableRole)return $pos.node(0).resolve($pos.before(d+1));return null}function isInTable(state){for(var $head=state.selection.$head,d=$head.depth;d>0;d--)if("row"==$head.node(d).type.spec.tableRole)return!0;return!1}function selectionCell(state){var sel=state.selection;return sel.$anchorCell?sel.$anchorCell.pos>sel.$headCell.pos?sel.$anchorCell:sel.$headCell:sel.node&&"cell"==sel.node.type.spec.tableRole?sel.$anchor:cellAround(sel.$head)||function($pos){for(var after=$pos.nodeAfter,pos=$pos.pos;after;after=after.firstChild,pos++){var role=after.type.spec.tableRole;if("cell"==role||"header_cell"==role)return $pos.doc.resolve(pos)}for(var before=$pos.nodeBefore,pos$1=$pos.pos;before;before=before.lastChild,pos$1--){var role$1=before.type.spec.tableRole;if("cell"==role$1||"header_cell"==role$1)return $pos.doc.resolve(pos$1-before.nodeSize)}}(sel.$head)}function pointsAtCell($pos){return"row"==$pos.parent.type.spec.tableRole&&$pos.nodeAfter}function moveCellForward($pos){return $pos.node(0).resolve($pos.pos+$pos.nodeAfter.nodeSize)}function inSameTable($a,$b){return $a.depth==$b.depth&&$a.pos>=$b.start(-1)&&$a.pos<=$b.end(-1)}function findCell($pos){return TableMap.get($pos.node(-1)).findCell($pos.pos-$pos.start(-1))}function colCount($pos){return TableMap.get($pos.node(-1)).colCount($pos.pos-$pos.start(-1))}function nextCell($pos,axis,dir){var start=$pos.start(-1),moved=TableMap.get($pos.node(-1)).nextCell($pos.pos-start,axis,dir);return null==moved?null:$pos.node(0).resolve(start+moved)}function setAttr(attrs,name,value){var result={};for(var prop in attrs)result[prop]=attrs[prop];return result[name]=value,result}function removeColSpan(attrs,pos,n){void 0===n&&(n=1);var result=setAttr(attrs,"colspan",attrs.colspan-n);return result.colwidth&&(result.colwidth=result.colwidth.slice(),result.colwidth.splice(pos,n),result.colwidth.some((function(w){return w>0}))||(result.colwidth=null)),result}function addColSpan(attrs,pos,n){void 0===n&&(n=1);var result=setAttr(attrs,"colspan",attrs.colspan+n);if(result.colwidth){result.colwidth=result.colwidth.slice();for(var i=0;i<n;i++)result.colwidth.splice(pos,0,0)}return result}function columnIsHeader(map,table,col){for(var headerCell=tableNodeTypes(table.type.schema).header_cell,row=0;row<map.height;row++)if(table.nodeAt(map.map[col+row*map.width]).type!=headerCell)return!1;return!0}var CellSelection=function(Selection){function CellSelection($anchorCell,$headCell){void 0===$headCell&&($headCell=$anchorCell);var table=$anchorCell.node(-1),map=TableMap.get(table),start=$anchorCell.start(-1),rect=map.rectBetween($anchorCell.pos-start,$headCell.pos-start),doc=$anchorCell.node(0),cells=map.cellsInRect(rect).filter((function(p){return p!=$headCell.pos-start}));cells.unshift($headCell.pos-start);var ranges=cells.map((function(pos){var cell=table.nodeAt(pos),from=pos+start+1;return new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.SelectionRange(doc.resolve(from),doc.resolve(from+cell.content.size))}));Selection.call(this,ranges[0].$from,ranges[0].$to,ranges),this.$anchorCell=$anchorCell,this.$headCell=$headCell}return Selection&&(CellSelection.__proto__=Selection),(CellSelection.prototype=Object.create(Selection&&Selection.prototype)).constructor=CellSelection,CellSelection.prototype.map=function(doc,mapping){var $anchorCell=doc.resolve(mapping.map(this.$anchorCell.pos)),$headCell=doc.resolve(mapping.map(this.$headCell.pos));if(pointsAtCell($anchorCell)&&pointsAtCell($headCell)&&inSameTable($anchorCell,$headCell)){var tableChanged=this.$anchorCell.node(-1)!=$anchorCell.node(-1);return tableChanged&&this.isRowSelection()?CellSelection.rowSelection($anchorCell,$headCell):tableChanged&&this.isColSelection()?CellSelection.colSelection($anchorCell,$headCell):new CellSelection($anchorCell,$headCell)}return prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection.between($anchorCell,$headCell)},CellSelection.prototype.content=function(){for(var table=this.$anchorCell.node(-1),map=TableMap.get(table),start=this.$anchorCell.start(-1),rect=map.rectBetween(this.$anchorCell.pos-start,this.$headCell.pos-start),seen={},rows=[],row=rect.top;row<rect.bottom;row++){for(var rowContent=[],index=row*map.width+rect.left,col=rect.left;col<rect.right;col++,index++){var pos=map.map[index];if(!seen[pos]){seen[pos]=!0;var cellRect=map.findCell(pos),cell=table.nodeAt(pos),extraLeft=rect.left-cellRect.left,extraRight=cellRect.right-rect.right;if(extraLeft>0||extraRight>0){var attrs=cell.attrs;extraLeft>0&&(attrs=removeColSpan(attrs,0,extraLeft)),extraRight>0&&(attrs=removeColSpan(attrs,attrs.colspan-extraRight,extraRight)),cell=cellRect.left<rect.left?cell.type.createAndFill(attrs):cell.type.create(attrs,cell.content)}if(cellRect.top<rect.top||cellRect.bottom>rect.bottom){var attrs$1=setAttr(cell.attrs,"rowspan",Math.min(cellRect.bottom,rect.bottom)-Math.max(cellRect.top,rect.top));cell=cellRect.top<rect.top?cell.type.createAndFill(attrs$1):cell.type.create(attrs$1,cell.content)}rowContent.push(cell)}}rows.push(table.child(row).copy(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(rowContent)))}var fragment=this.isColSelection()&&this.isRowSelection()?table:rows;return new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(fragment),1,1)},CellSelection.prototype.replace=function(tr,content){void 0===content&&(content=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice.empty);for(var mapFrom=tr.steps.length,ranges=this.ranges,i=0;i<ranges.length;i++){var ref=ranges[i],$from=ref.$from,$to=ref.$to,mapping=tr.mapping.slice(mapFrom);tr.replace(mapping.map($from.pos),mapping.map($to.pos),i?prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice.empty:content)}var sel=Selection.findFrom(tr.doc.resolve(tr.mapping.slice(mapFrom).map(this.to)),-1);sel&&tr.setSelection(sel)},CellSelection.prototype.replaceWith=function(tr,node){this.replace(tr,new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(node),0,0))},CellSelection.prototype.forEachCell=function(f){for(var table=this.$anchorCell.node(-1),map=TableMap.get(table),start=this.$anchorCell.start(-1),cells=map.cellsInRect(map.rectBetween(this.$anchorCell.pos-start,this.$headCell.pos-start)),i=0;i<cells.length;i++)f(table.nodeAt(cells[i]),start+cells[i])},CellSelection.prototype.isColSelection=function(){var anchorTop=this.$anchorCell.index(-1),headTop=this.$headCell.index(-1);return!(Math.min(anchorTop,headTop)>0)&&Math.max(anchorTop+this.$anchorCell.nodeAfter.attrs.rowspan,headTop+this.$headCell.nodeAfter.attrs.rowspan)==this.$headCell.node(-1).childCount},CellSelection.colSelection=function($anchorCell,$headCell){void 0===$headCell&&($headCell=$anchorCell);var map=TableMap.get($anchorCell.node(-1)),start=$anchorCell.start(-1),anchorRect=map.findCell($anchorCell.pos-start),headRect=map.findCell($headCell.pos-start),doc=$anchorCell.node(0);return anchorRect.top<=headRect.top?(anchorRect.top>0&&($anchorCell=doc.resolve(start+map.map[anchorRect.left])),headRect.bottom<map.height&&($headCell=doc.resolve(start+map.map[map.width*(map.height-1)+headRect.right-1]))):(headRect.top>0&&($headCell=doc.resolve(start+map.map[headRect.left])),anchorRect.bottom<map.height&&($anchorCell=doc.resolve(start+map.map[map.width*(map.height-1)+anchorRect.right-1]))),new CellSelection($anchorCell,$headCell)},CellSelection.prototype.isRowSelection=function(){var map=TableMap.get(this.$anchorCell.node(-1)),start=this.$anchorCell.start(-1),anchorLeft=map.colCount(this.$anchorCell.pos-start),headLeft=map.colCount(this.$headCell.pos-start);return!(Math.min(anchorLeft,headLeft)>0)&&Math.max(anchorLeft+this.$anchorCell.nodeAfter.attrs.colspan,headLeft+this.$headCell.nodeAfter.attrs.colspan)==map.width},CellSelection.prototype.eq=function(other){return other instanceof CellSelection&&other.$anchorCell.pos==this.$anchorCell.pos&&other.$headCell.pos==this.$headCell.pos},CellSelection.rowSelection=function($anchorCell,$headCell){void 0===$headCell&&($headCell=$anchorCell);var map=TableMap.get($anchorCell.node(-1)),start=$anchorCell.start(-1),anchorRect=map.findCell($anchorCell.pos-start),headRect=map.findCell($headCell.pos-start),doc=$anchorCell.node(0);return anchorRect.left<=headRect.left?(anchorRect.left>0&&($anchorCell=doc.resolve(start+map.map[anchorRect.top*map.width])),headRect.right<map.width&&($headCell=doc.resolve(start+map.map[map.width*(headRect.top+1)-1]))):(headRect.left>0&&($headCell=doc.resolve(start+map.map[headRect.top*map.width])),anchorRect.right<map.width&&($anchorCell=doc.resolve(start+map.map[map.width*(anchorRect.top+1)-1]))),new CellSelection($anchorCell,$headCell)},CellSelection.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},CellSelection.fromJSON=function(doc,json){return new CellSelection(doc.resolve(json.anchor),doc.resolve(json.head))},CellSelection.create=function(doc,anchorCell,headCell){return void 0===headCell&&(headCell=anchorCell),new CellSelection(doc.resolve(anchorCell),doc.resolve(headCell))},CellSelection.prototype.getBookmark=function(){return new CellBookmark(this.$anchorCell.pos,this.$headCell.pos)},CellSelection}(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection);CellSelection.prototype.visible=!1,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.jsonID("cell",CellSelection);var CellBookmark=function(anchor,head){this.anchor=anchor,this.head=head};function drawCellSelection(state){if(!(state.selection instanceof CellSelection))return null;var cells=[];return state.selection.forEachCell((function(node,pos){cells.push(prosemirror_view__WEBPACK_IMPORTED_MODULE_3__.Decoration.node(pos,pos+node.nodeSize,{class:"selectedCell"}))})),prosemirror_view__WEBPACK_IMPORTED_MODULE_3__.DecorationSet.create(state.doc,cells)}function pastedCells(slice){if(!slice.size)return null;for(var content=slice.content,openStart=slice.openStart,openEnd=slice.openEnd;1==content.childCount&&(openStart>0&&openEnd>0||"table"==content.firstChild.type.spec.tableRole);)openStart--,openEnd--,content=content.firstChild.content;var first=content.firstChild,role=first.type.spec.tableRole,schema=first.type.schema,rows=[];if("row"==role)for(var i=0;i<content.childCount;i++){var cells=content.child(i).content,left=i?0:Math.max(0,openStart-1),right=i<content.childCount-1?0:Math.max(0,openEnd-1);(left||right)&&(cells=fitSlice(tableNodeTypes(schema).row,new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(cells,left,right)).content),rows.push(cells)}else{if("cell"!=role&&"header_cell"!=role)return null;rows.push(openStart||openEnd?fitSlice(tableNodeTypes(schema).row,new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(content,openStart,openEnd)).content:content)}return function(schema,rows){for(var widths=[],i=0;i<rows.length;i++)for(var row=rows[i],j=row.childCount-1;j>=0;j--)for(var ref=row.child(j).attrs,rowspan=ref.rowspan,colspan=ref.colspan,r=i;r<i+rowspan;r++)widths[r]=(widths[r]||0)+colspan;for(var width=0,r$1=0;r$1<widths.length;r$1++)width=Math.max(width,widths[r$1]);for(var r$2=0;r$2<widths.length;r$2++)if(r$2>=rows.length&&rows.push(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty),widths[r$2]<width){for(var empty=tableNodeTypes(schema).cell.createAndFill(),cells=[],i$1=widths[r$2];i$1<width;i$1++)cells.push(empty);rows[r$2]=rows[r$2].append(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(cells))}return{height:rows.length,width:width,rows:rows}}(schema,rows)}function fitSlice(nodeType,slice){var node=nodeType.createAndFill();return new prosemirror_transform__WEBPACK_IMPORTED_MODULE_4__.f(node).replace(0,node.content.size,slice).doc}function clipCells(ref,newWidth,newHeight){var width=ref.width,height=ref.height,rows=ref.rows;if(width!=newWidth){for(var added=[],newRows=[],row=0;row<rows.length;row++){for(var frag=rows[row],cells=[],col=added[row]||0,i=0;col<newWidth;i++){var cell=frag.child(i%frag.childCount);col+cell.attrs.colspan>newWidth&&(cell=cell.type.create(removeColSpan(cell.attrs,cell.attrs.colspan,col+cell.attrs.colspan-newWidth),cell.content)),cells.push(cell),col+=cell.attrs.colspan;for(var j=1;j<cell.attrs.rowspan;j++)added[row+j]=(added[row+j]||0)+cell.attrs.colspan}newRows.push(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(cells))}rows=newRows,width=newWidth}if(height!=newHeight){for(var newRows$1=[],row$1=0,i$1=0;row$1<newHeight;row$1++,i$1++){for(var cells$1=[],source=rows[i$1%height],j$1=0;j$1<source.childCount;j$1++){var cell$1=source.child(j$1);row$1+cell$1.attrs.rowspan>newHeight&&(cell$1=cell$1.type.create(setAttr(cell$1.attrs,"rowspan",newHeight-cell$1.attrs.rowspan),cell$1.content)),cells$1.push(cell$1)}newRows$1.push(prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(cells$1))}rows=newRows$1,height=newHeight}return{width:width,height:height,rows:rows}}function isolateHorizontal(tr,map,table,start,left,right,top,mapFrom){if(0==top||top==map.height)return!1;for(var found=!1,col=left;col<right;col++){var index=top*map.width+col,pos=map.map[index];if(map.map[index-map.width]==pos){found=!0;var cell=table.nodeAt(pos),ref=map.findCell(pos),cellTop=ref.top,cellLeft=ref.left;tr.setNodeMarkup(tr.mapping.slice(mapFrom).map(pos+start),null,setAttr(cell.attrs,"rowspan",top-cellTop)),tr.insert(tr.mapping.slice(mapFrom).map(map.positionAt(top,cellLeft,table)),cell.type.createAndFill(setAttr(cell.attrs,"rowspan",cellTop+cell.attrs.rowspan-top))),col+=cell.attrs.colspan-1}}return found}function isolateVertical(tr,map,table,start,top,bottom,left,mapFrom){if(0==left||left==map.width)return!1;for(var found=!1,row=top;row<bottom;row++){var index=row*map.width+left,pos=map.map[index];if(map.map[index-1]==pos){found=!0;var cell=table.nodeAt(pos),cellLeft=map.colCount(pos),updatePos=tr.mapping.slice(mapFrom).map(pos+start);tr.setNodeMarkup(updatePos,null,removeColSpan(cell.attrs,left-cellLeft,cell.attrs.colspan-(left-cellLeft))),tr.insert(updatePos+cell.nodeSize,cell.type.createAndFill(removeColSpan(cell.attrs,0,left-cellLeft))),row+=cell.attrs.rowspan-1}}return found}function insertCells(state,dispatch,tableStart,rect,cells){var table=tableStart?state.doc.nodeAt(tableStart-1):state.doc,map=TableMap.get(table),top=rect.top,left=rect.left,right=left+cells.width,bottom=top+cells.height,tr=state.tr,mapFrom=0;function recomp(){table=tableStart?tr.doc.nodeAt(tableStart-1):tr.doc,map=TableMap.get(table),mapFrom=tr.mapping.maps.length}(function(tr,map,table,start,width,height,mapFrom){var empty,emptyHead,types=tableNodeTypes(tr.doc.type.schema);if(width>map.width)for(var row=0,rowEnd=0;row<map.height;row++){var rowNode=table.child(row);rowEnd+=rowNode.nodeSize;var add,cells=[];add=null==rowNode.lastChild||rowNode.lastChild.type==types.cell?empty||(empty=types.cell.createAndFill()):emptyHead||(emptyHead=types.header_cell.createAndFill());for(var i=map.width;i<width;i++)cells.push(add);tr.insert(tr.mapping.slice(mapFrom).map(rowEnd-1+start),cells)}if(height>map.height){for(var cells$1=[],i$1=0,start$1=(map.height-1)*map.width;i$1<Math.max(map.width,width);i$1++){var header=!(i$1>=map.width)&&table.nodeAt(map.map[start$1+i$1]).type==types.header_cell;cells$1.push(header?emptyHead||(emptyHead=types.header_cell.createAndFill()):empty||(empty=types.cell.createAndFill()))}for(var emptyRow=types.row.create(null,prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(cells$1)),rows=[],i$2=map.height;i$2<height;i$2++)rows.push(emptyRow);tr.insert(tr.mapping.slice(mapFrom).map(start+table.nodeSize-2),rows)}return!(!empty&&!emptyHead)})(tr,map,table,tableStart,right,bottom,mapFrom)&&recomp(),isolateHorizontal(tr,map,table,tableStart,left,right,top,mapFrom)&&recomp(),isolateHorizontal(tr,map,table,tableStart,left,right,bottom,mapFrom)&&recomp(),isolateVertical(tr,map,table,tableStart,top,bottom,left,mapFrom)&&recomp(),isolateVertical(tr,map,table,tableStart,top,bottom,right,mapFrom)&&recomp();for(var row=top;row<bottom;row++){var from=map.positionAt(row,left,table),to=map.positionAt(row,right,table);tr.replace(tr.mapping.slice(mapFrom).map(from+tableStart),tr.mapping.slice(mapFrom).map(to+tableStart),new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(cells.rows[row-top],0,0))}recomp(),tr.setSelection(new CellSelection(tr.doc.resolve(tableStart+map.positionAt(top,left,table)),tr.doc.resolve(tableStart+map.positionAt(bottom-1,right-1,table)))),dispatch(tr)}CellBookmark.prototype.map=function(mapping){return new CellBookmark(mapping.map(this.anchor),mapping.map(this.head))},CellBookmark.prototype.resolve=function(doc){var $anchorCell=doc.resolve(this.anchor),$headCell=doc.resolve(this.head);return"row"==$anchorCell.parent.type.spec.tableRole&&"row"==$headCell.parent.type.spec.tableRole&&$anchorCell.index()<$anchorCell.parent.childCount&&$headCell.index()<$headCell.parent.childCount&&inSameTable($anchorCell,$headCell)?new CellSelection($anchorCell,$headCell):prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.near($headCell,1)};var handleKeyDown=Object(prosemirror_keymap__WEBPACK_IMPORTED_MODULE_2__.keydownHandler)({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1),"Shift-ArrowLeft":shiftArrow("horiz",-1),"Shift-ArrowRight":shiftArrow("horiz",1),"Shift-ArrowUp":shiftArrow("vert",-1),"Shift-ArrowDown":shiftArrow("vert",1),Backspace:deleteCellSelection,"Mod-Backspace":deleteCellSelection,Delete:deleteCellSelection,"Mod-Delete":deleteCellSelection});function maybeSetSelection(state,dispatch,selection){return!selection.eq(state.selection)&&(dispatch&&dispatch(state.tr.setSelection(selection).scrollIntoView()),!0)}function arrow(axis,dir){return function(state,dispatch,view){var sel=state.selection;if(sel instanceof CellSelection)return maybeSetSelection(state,dispatch,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.near(sel.$headCell,dir));if("horiz"!=axis&&!sel.empty)return!1;var end=atEndOfCell(view,axis,dir);if(null==end)return!1;if("horiz"==axis)return maybeSetSelection(state,dispatch,prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.near(state.doc.resolve(sel.head+dir),dir));var newSel,$cell=state.doc.resolve(end),$next=nextCell($cell,axis,dir);return newSel=$next?prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.near($next,1):dir<0?prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.near(state.doc.resolve($cell.before(-1)),-1):prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Selection.near(state.doc.resolve($cell.after(-1)),1),maybeSetSelection(state,dispatch,newSel)}}function shiftArrow(axis,dir){return function(state,dispatch,view){var sel=state.selection;if(!(sel instanceof CellSelection)){var end=atEndOfCell(view,axis,dir);if(null==end)return!1;sel=new CellSelection(state.doc.resolve(end))}var $head=nextCell(sel.$headCell,axis,dir);return!!$head&&maybeSetSelection(state,dispatch,new CellSelection(sel.$anchorCell,$head))}}function deleteCellSelection(state,dispatch){var sel=state.selection;if(!(sel instanceof CellSelection))return!1;if(dispatch){var tr=state.tr,baseContent=tableNodeTypes(state.schema).cell.createAndFill().content;sel.forEachCell((function(cell,pos){cell.content.eq(baseContent)||tr.replace(tr.mapping.map(pos+1),tr.mapping.map(pos+cell.nodeSize-1),new prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Slice(baseContent,0,0))})),tr.docChanged&&dispatch(tr)}return!0}function handleTripleClick(view,pos){var $cell=cellAround(view.state.doc.resolve(pos));return!!$cell&&(view.dispatch(view.state.tr.setSelection(new CellSelection($cell))),!0)}function handlePaste(view,_,slice){if(!isInTable(view.state))return!1;var cells=pastedCells(slice),sel=view.state.selection;if(sel instanceof CellSelection){cells||(cells={width:1,height:1,rows:[prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.from(fitSlice(tableNodeTypes(view.state.schema).cell,slice))]});var table=sel.$anchorCell.node(-1),start=sel.$anchorCell.start(-1),rect=TableMap.get(table).rectBetween(sel.$anchorCell.pos-start,sel.$headCell.pos-start);return cells=clipCells(cells,rect.right-rect.left,rect.bottom-rect.top),insertCells(view.state,view.dispatch,start,rect,cells),!0}if(cells){var $cell=selectionCell(view.state),start$1=$cell.start(-1);return insertCells(view.state,view.dispatch,start$1,TableMap.get($cell.node(-1)).findCell($cell.pos-start$1),cells),!0}return!1}function handleMouseDown(view,startEvent){if(!startEvent.ctrlKey&&!startEvent.metaKey){var $anchor,startDOMCell=domInCell(view,startEvent.target);if(startEvent.shiftKey&&view.state.selection instanceof CellSelection)setCellSelection(view.state.selection.$anchorCell,startEvent),startEvent.preventDefault();else if(startEvent.shiftKey&&startDOMCell&&null!=($anchor=cellAround(view.state.selection.$anchor))&&cellUnderMouse(view,startEvent).pos!=$anchor.pos)setCellSelection($anchor,startEvent),startEvent.preventDefault();else if(!startDOMCell)return;view.root.addEventListener("mouseup",stop),view.root.addEventListener("dragstart",stop),view.root.addEventListener("mousemove",move)}function setCellSelection($anchor,event){var $head=cellUnderMouse(view,event),starting=null==key.getState(view.state);if(!$head||!inSameTable($anchor,$head)){if(!starting)return;$head=$anchor}var selection=new CellSelection($anchor,$head);if(starting||!view.state.selection.eq(selection)){var tr=view.state.tr.setSelection(selection);starting&&tr.setMeta(key,$anchor.pos),view.dispatch(tr)}}function stop(){view.root.removeEventListener("mouseup",stop),view.root.removeEventListener("dragstart",stop),view.root.removeEventListener("mousemove",move),null!=key.getState(view.state)&&view.dispatch(view.state.tr.setMeta(key,-1))}function move(event){var $anchor,anchor=key.getState(view.state);if(null!=anchor)$anchor=view.state.doc.resolve(anchor);else if(domInCell(view,event.target)!=startDOMCell&&!($anchor=cellUnderMouse(view,startEvent)))return stop();$anchor&&setCellSelection($anchor,event)}}function atEndOfCell(view,axis,dir){if(!(view.state.selection instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection))return null;for(var $head=view.state.selection.$head,d=$head.depth-1;d>=0;d--){var parent=$head.node(d);if((dir<0?$head.index(d):$head.indexAfter(d))!=(dir<0?0:parent.childCount))return null;if("cell"==parent.type.spec.tableRole||"header_cell"==parent.type.spec.tableRole){var cellPos=$head.before(d);return view.endOfTextblock("vert"==axis?dir>0?"down":"up":dir>0?"right":"left")?cellPos:null}}return null}function domInCell(view,dom){for(;dom&&dom!=view.dom;dom=dom.parentNode)if("TD"==dom.nodeName||"TH"==dom.nodeName)return dom}function cellUnderMouse(view,event){var mousePos=view.posAtCoords({left:event.clientX,top:event.clientY});return mousePos&&mousePos?cellAround(view.state.doc.resolve(mousePos.pos)):null}var fixTablesKey=new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.PluginKey("fix-tables");function fixTables(state,oldState){var tr,check=function(node,pos){"table"==node.type.spec.tableRole&&(tr=function(state,table,tablePos,tr){var map=TableMap.get(table);if(!map.problems)return tr;tr||(tr=state.tr);for(var first,last,mustAdd=[],i=0;i<map.height;i++)mustAdd.push(0);for(var i$1=0;i$1<map.problems.length;i$1++){var prob=map.problems[i$1];if("collision"==prob.type){for(var cell=table.nodeAt(prob.pos),j=0;j<cell.attrs.rowspan;j++)mustAdd[prob.row+j]+=prob.n;tr.setNodeMarkup(tr.mapping.map(tablePos+1+prob.pos),null,removeColSpan(cell.attrs,cell.attrs.colspan-prob.n,prob.n))}else if("missing"==prob.type)mustAdd[prob.row]+=prob.n;else if("overlong_rowspan"==prob.type){var cell$1=table.nodeAt(prob.pos);tr.setNodeMarkup(tr.mapping.map(tablePos+1+prob.pos),null,setAttr(cell$1.attrs,"rowspan",cell$1.attrs.rowspan-prob.n))}else if("colwidth mismatch"==prob.type){var cell$2=table.nodeAt(prob.pos);tr.setNodeMarkup(tr.mapping.map(tablePos+1+prob.pos),null,setAttr(cell$2.attrs,"colwidth",prob.colwidth))}}for(var i$2=0;i$2<mustAdd.length;i$2++)mustAdd[i$2]&&(null==first&&(first=i$2),last=i$2);for(var i$3=0,pos=tablePos+1;i$3<map.height;i$3++){var row=table.child(i$3),end=pos+row.nodeSize,add=mustAdd[i$3];if(add>0){var tableNodeType="cell";row.firstChild&&(tableNodeType=row.firstChild.type.spec.tableRole);for(var nodes=[],j$1=0;j$1<add;j$1++)nodes.push(tableNodeTypes(state.schema)[tableNodeType].createAndFill());tr.insert(tr.mapping.map(0!=i$3&&first!=i$3-1||last!=i$3?end-1:pos+1),nodes)}pos=end}return tr.setMeta(fixTablesKey,{fixTables:!0})}(state,node,pos,tr))};return oldState?oldState.doc!=state.doc&&function changedDescendants(old,cur,offset,f){var oldSize=old.childCount,curSize=cur.childCount;outer:for(var i=0,j=0;i<curSize;i++){for(var child=cur.child(i),scan=j,e=Math.min(oldSize,i+3);scan<e;scan++)if(old.child(scan)==child){j=scan+1,offset+=child.nodeSize;continue outer}f(child,offset),j<oldSize&&old.child(j).sameMarkup(child)?changedDescendants(old.child(j),child,offset+1,f):child.nodesBetween(0,child.content.size,f,offset+1),offset+=child.nodeSize}}(oldState.doc,state.doc,0,check):state.doc.descendants(check),tr}function selectedRect(state){var rect,sel=state.selection,$pos=selectionCell(state),table=$pos.node(-1),tableStart=$pos.start(-1),map=TableMap.get(table);return(rect=sel instanceof CellSelection?map.rectBetween(sel.$anchorCell.pos-tableStart,sel.$headCell.pos-tableStart):map.findCell($pos.pos-tableStart)).tableStart=tableStart,rect.map=map,rect.table=table,rect}function addColumn(tr,ref,col){var map=ref.map,tableStart=ref.tableStart,table=ref.table,refColumn=col>0?-1:0;columnIsHeader(map,table,col+refColumn)&&(refColumn=0==col||col==map.width?null:0);for(var row=0;row<map.height;row++){var index=row*map.width+col;if(col>0&&col<map.width&&map.map[index-1]==map.map[index]){var pos=map.map[index],cell=table.nodeAt(pos);tr.setNodeMarkup(tr.mapping.map(tableStart+pos),null,addColSpan(cell.attrs,col-map.colCount(pos))),row+=cell.attrs.rowspan-1}else{var type=null==refColumn?tableNodeTypes(table.type.schema).cell:table.nodeAt(map.map[index+refColumn]).type,pos$1=map.positionAt(row,col,table);tr.insert(tr.mapping.map(tableStart+pos$1),type.createAndFill())}}return tr}function addColumnBefore(state,dispatch){if(!isInTable(state))return!1;if(dispatch){var rect=selectedRect(state);dispatch(addColumn(state.tr,rect,rect.left))}return!0}function addColumnAfter(state,dispatch){if(!isInTable(state))return!1;if(dispatch){var rect=selectedRect(state);dispatch(addColumn(state.tr,rect,rect.right))}return!0}function removeColumn(tr,ref,col){for(var map=ref.map,table=ref.table,tableStart=ref.tableStart,mapStart=tr.mapping.maps.length,row=0;row<map.height;){var index=row*map.width+col,pos=map.map[index],cell=table.nodeAt(pos);if(col>0&&map.map[index-1]==pos||col<map.width-1&&map.map[index+1]==pos)tr.setNodeMarkup(tr.mapping.slice(mapStart).map(tableStart+pos),null,removeColSpan(cell.attrs,col-map.colCount(pos)));else{var start=tr.mapping.slice(mapStart).map(tableStart+pos);tr.delete(start,start+cell.nodeSize)}row+=cell.attrs.rowspan}}function deleteColumn(state,dispatch){if(!isInTable(state))return!1;if(dispatch){var rect=selectedRect(state),tr=state.tr;if(0==rect.left&&rect.right==rect.map.width)return!1;for(var i=rect.right-1;removeColumn(tr,rect,i),i!=rect.left;i--)rect.table=rect.tableStart?tr.doc.nodeAt(rect.tableStart-1):tr.doc,rect.map=TableMap.get(rect.table);dispatch(tr)}return!0}function rowIsHeader(map,table,row){for(var headerCell=tableNodeTypes(table.type.schema).header_cell,col=0;col<map.width;col++)if(table.nodeAt(map.map[col+row*map.width]).type!=headerCell)return!1;return!0}function addRow(tr,ref,row){for(var map=ref.map,tableStart=ref.tableStart,table=ref.table,rowPos=tableStart,i=0;i<row;i++)rowPos+=table.child(i).nodeSize;var cells=[],refRow=row>0?-1:0;rowIsHeader(map,table,row+refRow)&&(refRow=0==row||row==map.height?null:0);for(var col=0,index=map.width*row;col<map.width;col++,index++)if(row>0&&row<map.height&&map.map[index]==map.map[index-map.width]){var pos=map.map[index],attrs=table.nodeAt(pos).attrs;tr.setNodeMarkup(tableStart+pos,null,setAttr(attrs,"rowspan",attrs.rowspan+1)),col+=attrs.colspan-1}else{var type=null==refRow?tableNodeTypes(table.type.schema).cell:table.nodeAt(map.map[index+refRow*map.width]).type;cells.push(type.createAndFill())}return tr.insert(rowPos,tableNodeTypes(table.type.schema).row.create(null,cells)),tr}function addRowBefore(state,dispatch){if(!isInTable(state))return!1;if(dispatch){var rect=selectedRect(state);dispatch(addRow(state.tr,rect,rect.top))}return!0}function addRowAfter(state,dispatch){if(!isInTable(state))return!1;if(dispatch){var rect=selectedRect(state);dispatch(addRow(state.tr,rect,rect.bottom))}return!0}function removeRow(tr,ref,row){for(var map=ref.map,table=ref.table,tableStart=ref.tableStart,rowPos=0,i=0;i<row;i++)rowPos+=table.child(i).nodeSize;var nextRow=rowPos+table.child(row).nodeSize,mapFrom=tr.mapping.maps.length;tr.delete(rowPos+tableStart,nextRow+tableStart);for(var col=0,index=row*map.width;col<map.width;col++,index++){var pos=map.map[index];if(row>0&&pos==map.map[index-map.width]){var attrs=table.nodeAt(pos).attrs;tr.setNodeMarkup(tr.mapping.slice(mapFrom).map(pos+tableStart),null,setAttr(attrs,"rowspan",attrs.rowspan-1)),col+=attrs.colspan-1}else if(row<map.width&&pos==map.map[index+map.width]){var cell=table.nodeAt(pos),copy=cell.type.create(setAttr(cell.attrs,"rowspan",cell.attrs.rowspan-1),cell.content),newPos=map.positionAt(row+1,col,table);tr.insert(tr.mapping.slice(mapFrom).map(tableStart+newPos),copy),col+=cell.attrs.colspan-1}}}function deleteRow(state,dispatch){if(!isInTable(state))return!1;if(dispatch){var rect=selectedRect(state),tr=state.tr;if(0==rect.top&&rect.bottom==rect.map.height)return!1;for(var i=rect.bottom-1;removeRow(tr,rect,i),i!=rect.top;i--)rect.table=rect.tableStart?tr.doc.nodeAt(rect.tableStart-1):tr.doc,rect.map=TableMap.get(rect.table);dispatch(tr)}return!0}function isEmpty(cell){var c=cell.content;return 1==c.childCount&&c.firstChild.isTextblock&&0==c.firstChild.childCount}function mergeCells(state,dispatch){var sel=state.selection;if(!(sel instanceof CellSelection)||sel.$anchorCell.pos==sel.$headCell.pos)return!1;var rect=selectedRect(state),map=rect.map;if(function(ref,rect){for(var width=ref.width,height=ref.height,map=ref.map,indexTop=rect.top*width+rect.left,indexLeft=indexTop,indexBottom=(rect.bottom-1)*width+rect.left,indexRight=indexTop+(rect.right-rect.left-1),i=rect.top;i<rect.bottom;i++){if(rect.left>0&&map[indexLeft]==map[indexLeft-1]||rect.right<width&&map[indexRight]==map[indexRight+1])return!0;indexLeft+=width,indexRight+=width}for(var i$1=rect.left;i$1<rect.right;i$1++){if(rect.top>0&&map[indexTop]==map[indexTop-width]||rect.bottom<height&&map[indexBottom]==map[indexBottom+width])return!0;indexTop++,indexBottom++}return!1}(map,rect))return!1;if(dispatch){for(var mergedPos,mergedCell,tr=state.tr,seen={},content=prosemirror_model__WEBPACK_IMPORTED_MODULE_1__.Fragment.empty,row=rect.top;row<rect.bottom;row++)for(var col=rect.left;col<rect.right;col++){var cellPos=map.map[row*map.width+col],cell=rect.table.nodeAt(cellPos);if(!seen[cellPos])if(seen[cellPos]=!0,null==mergedPos)mergedPos=cellPos,mergedCell=cell;else{isEmpty(cell)||(content=content.append(cell.content));var mapped=tr.mapping.map(cellPos+rect.tableStart);tr.delete(mapped,mapped+cell.nodeSize)}}if(tr.setNodeMarkup(mergedPos+rect.tableStart,null,setAttr(addColSpan(mergedCell.attrs,mergedCell.attrs.colspan,rect.right-rect.left-mergedCell.attrs.colspan),"rowspan",rect.bottom-rect.top)),content.size){var end=mergedPos+1+mergedCell.content.size,start=isEmpty(mergedCell)?mergedPos+1:end;tr.replaceWith(start+rect.tableStart,end+rect.tableStart,content)}tr.setSelection(new CellSelection(tr.doc.resolve(mergedPos+rect.tableStart))),dispatch(tr)}return!0}function splitCell(state,dispatch){var nodeTypes=tableNodeTypes(state.schema);return splitCellWithType((function(ref){return nodeTypes[ref.node.type.spec.tableRole]}))(state,dispatch)}function splitCellWithType(getCellType){return function(state,dispatch){var cellNode,cellPos,sel=state.selection;if(sel instanceof CellSelection){if(sel.$anchorCell.pos!=sel.$headCell.pos)return!1;cellNode=sel.$anchorCell.nodeAfter,cellPos=sel.$anchorCell.pos}else{if(!(cellNode=function($pos){for(var d=$pos.depth;d>0;d--){var role=$pos.node(d).type.spec.tableRole;if("cell"===role||"header_cell"===role)return $pos.node(d)}return null}(sel.$from)))return!1;cellPos=cellAround(sel.$from).pos}if(1==cellNode.attrs.colspan&&1==cellNode.attrs.rowspan)return!1;if(dispatch){var baseAttrs=cellNode.attrs,attrs=[],colwidth=baseAttrs.colwidth;baseAttrs.rowspan>1&&(baseAttrs=setAttr(baseAttrs,"rowspan",1)),baseAttrs.colspan>1&&(baseAttrs=setAttr(baseAttrs,"colspan",1));for(var lastCell,rect=selectedRect(state),tr=state.tr,i=0;i<rect.right-rect.left;i++)attrs.push(colwidth?setAttr(baseAttrs,"colwidth",colwidth&&colwidth[i]?[colwidth[i]]:null):baseAttrs);for(var row=rect.top;row<rect.bottom;row++){var pos=rect.map.positionAt(row,rect.left,rect.table);row==rect.top&&(pos+=cellNode.nodeSize);for(var col=rect.left,i$1=0;col<rect.right;col++,i$1++)col==rect.left&&row==rect.top||tr.insert(lastCell=tr.mapping.map(pos+rect.tableStart,1),getCellType({node:cellNode,row:row,col:col}).createAndFill(attrs[i$1]))}tr.setNodeMarkup(cellPos,getCellType({node:cellNode,row:rect.top,col:rect.left}),attrs[0]),sel instanceof CellSelection&&tr.setSelection(new CellSelection(tr.doc.resolve(sel.$anchorCell.pos),lastCell&&tr.doc.resolve(lastCell))),dispatch(tr)}return!0}}function setCellAttr(name,value){return function(state,dispatch){if(!isInTable(state))return!1;var $cell=selectionCell(state);if($cell.nodeAfter.attrs[name]===value)return!1;if(dispatch){var tr=state.tr;state.selection instanceof CellSelection?state.selection.forEachCell((function(node,pos){node.attrs[name]!==value&&tr.setNodeMarkup(pos,null,setAttr(node.attrs,name,value))})):tr.setNodeMarkup($cell.pos,null,setAttr($cell.nodeAfter.attrs,name,value)),dispatch(tr)}return!0}}function isHeaderEnabledByType(type,rect,types){for(var cellPositions=rect.map.cellsInRect({left:0,top:0,right:"row"==type?rect.map.width:1,bottom:"column"==type?rect.map.height:1}),i=0;i<cellPositions.length;i++){var cell=rect.table.nodeAt(cellPositions[i]);if(cell&&cell.type!==types.header_cell)return!1}return!0}function toggleHeader(type,options){return(options=options||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(type){return function(state,dispatch){if(!isInTable(state))return!1;if(dispatch){for(var types=tableNodeTypes(state.schema),rect=selectedRect(state),tr=state.tr,cells=rect.map.cellsInRect("column"==type?new Rect(rect.left,0,rect.right,rect.map.height):"row"==type?new Rect(0,rect.top,rect.map.width,rect.bottom):rect),nodes=cells.map((function(pos){return rect.table.nodeAt(pos)})),i=0;i<cells.length;i++)nodes[i].type==types.header_cell&&tr.setNodeMarkup(rect.tableStart+cells[i],types.cell,nodes[i].attrs);if(0==tr.steps.length)for(var i$1=0;i$1<cells.length;i$1++)tr.setNodeMarkup(rect.tableStart+cells[i$1],types.header_cell,nodes[i$1].attrs);dispatch(tr)}return!0}}(type):function(state,dispatch){if(!isInTable(state))return!1;if(dispatch){var types=tableNodeTypes(state.schema),rect=selectedRect(state),tr=state.tr,isHeaderRowEnabled=isHeaderEnabledByType("row",rect,types),isHeaderColumnEnabled=isHeaderEnabledByType("column",rect,types),selectionStartsAt=("column"===type?isHeaderRowEnabled:"row"===type&&isHeaderColumnEnabled)?1:0,cellsRect="column"==type?new Rect(0,selectionStartsAt,1,rect.map.height):"row"==type?new Rect(selectionStartsAt,0,rect.map.width,1):rect,newType="column"==type?isHeaderColumnEnabled?types.cell:types.header_cell:"row"==type?isHeaderRowEnabled?types.cell:types.header_cell:types.cell;rect.map.cellsInRect(cellsRect).forEach((function(relativeCellPos){var cellPos=relativeCellPos+rect.tableStart,cell=tr.doc.nodeAt(cellPos);cell&&tr.setNodeMarkup(cellPos,newType,cell.attrs)})),dispatch(tr)}return!0}}var toggleHeaderRow=toggleHeader("row",{useDeprecatedLogic:!0}),toggleHeaderColumn=toggleHeader("column",{useDeprecatedLogic:!0}),toggleHeaderCell=toggleHeader("cell",{useDeprecatedLogic:!0});function goToNextCell(direction){return function(state,dispatch){if(!isInTable(state))return!1;var cell=function($cell,dir){if(dir<0){var before=$cell.nodeBefore;if(before)return $cell.pos-before.nodeSize;for(var row=$cell.index(-1)-1,rowEnd=$cell.before();row>=0;row--){var rowNode=$cell.node(-1).child(row);if(rowNode.childCount)return rowEnd-1-rowNode.lastChild.nodeSize;rowEnd-=rowNode.nodeSize}}else{if($cell.index()<$cell.parent.childCount-1)return $cell.pos+$cell.nodeAfter.nodeSize;for(var table=$cell.node(-1),row$1=$cell.indexAfter(-1),rowStart=$cell.after();row$1<table.childCount;row$1++){var rowNode$1=table.child(row$1);if(rowNode$1.childCount)return rowStart+1;rowStart+=rowNode$1.nodeSize}}}(selectionCell(state),direction);if(null!=cell){if(dispatch){var $cell=state.doc.resolve(cell);dispatch(state.tr.setSelection(prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection.between($cell,moveCellForward($cell))).scrollIntoView())}return!0}}}function deleteTable(state,dispatch){for(var $pos=state.selection.$anchor,d=$pos.depth;d>0;d--)if("table"==$pos.node(d).type.spec.tableRole)return dispatch&&dispatch(state.tr.delete($pos.before(d),$pos.after(d)).scrollIntoView()),!0;return!1}var TableView=function(node,cellMinWidth){this.node=node,this.cellMinWidth=cellMinWidth,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),updateColumns(node,this.colgroup,this.table,cellMinWidth),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function updateColumns(node,colgroup,table,cellMinWidth,overrideCol,overrideValue){for(var totalWidth=0,fixedWidth=!0,nextDOM=colgroup.firstChild,row=node.firstChild,i=0,col=0;i<row.childCount;i++)for(var ref=row.child(i).attrs,colspan=ref.colspan,colwidth=ref.colwidth,j=0;j<colspan;j++,col++){var hasWidth=overrideCol==col?overrideValue:colwidth&&colwidth[j],cssWidth=hasWidth?hasWidth+"px":"";totalWidth+=hasWidth||cellMinWidth,hasWidth||(fixedWidth=!1),nextDOM?(nextDOM.style.width!=cssWidth&&(nextDOM.style.width=cssWidth),nextDOM=nextDOM.nextSibling):colgroup.appendChild(document.createElement("col")).style.width=cssWidth}for(;nextDOM;){var after=nextDOM.nextSibling;nextDOM.parentNode.removeChild(nextDOM),nextDOM=after}fixedWidth?(table.style.width=totalWidth+"px",table.style.minWidth=""):(table.style.width="",table.style.minWidth=totalWidth+"px")}TableView.prototype.update=function(node){return node.type==this.node.type&&(this.node=node,updateColumns(node,this.colgroup,this.table,this.cellMinWidth),!0)},TableView.prototype.ignoreMutation=function(record){return"attributes"==record.type&&(record.target==this.table||this.colgroup.contains(record.target))};var key$1=new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.PluginKey("tableColumnResizing");function columnResizing(ref){void 0===ref&&(ref={});var handleWidth=ref.handleWidth;void 0===handleWidth&&(handleWidth=5);var cellMinWidth=ref.cellMinWidth;void 0===cellMinWidth&&(cellMinWidth=25);var View=ref.View;void 0===View&&(View=TableView);var lastColumnResizable=ref.lastColumnResizable;return void 0===lastColumnResizable&&(lastColumnResizable=!0),new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Plugin({key:key$1,state:{init:function(_,state){return this.spec.props.nodeViews[tableNodeTypes(state.schema).table.name]=function(node,view){return new View(node,cellMinWidth,view)},new ResizeState(-1,!1)},apply:function(tr,prev){return prev.apply(tr)}},props:{attributes:function(state){return key$1.getState(state).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(view,event){!function(view,event,handleWidth,cellMinWidth,lastColumnResizable){var pluginState=key$1.getState(view.state);if(!pluginState.dragging){var target=function(target){for(;target&&"TD"!=target.nodeName&&"TH"!=target.nodeName;)target=target.classList.contains("ProseMirror")?null:target.parentNode;return target}(event.target),cell=-1;if(target){var ref=target.getBoundingClientRect(),right=ref.right;event.clientX-ref.left<=handleWidth?cell=edgeCell(view,event,"left"):right-event.clientX<=handleWidth&&(cell=edgeCell(view,event,"right"))}if(cell!=pluginState.activeHandle){if(!lastColumnResizable&&-1!==cell){var $cell=view.state.doc.resolve(cell),table=$cell.node(-1),map=TableMap.get(table),start=$cell.start(-1);if(map.colCount($cell.pos-start)+$cell.nodeAfter.attrs.colspan-1==map.width-1)return}updateHandle(view,cell)}}}(view,event,handleWidth,0,lastColumnResizable)},mouseleave:function(view){!function(view){var pluginState=key$1.getState(view.state);pluginState.activeHandle>-1&&!pluginState.dragging&&updateHandle(view,-1)}(view)},mousedown:function(view,event){!function(view,event,cellMinWidth){var pluginState=key$1.getState(view.state);if(-1==pluginState.activeHandle||pluginState.dragging)return!1;var cell=view.state.doc.nodeAt(pluginState.activeHandle),width=function(view,cellPos,ref){var colspan=ref.colspan,colwidth=ref.colwidth,width=colwidth&&colwidth[colwidth.length-1];if(width)return width;var dom=view.domAtPos(cellPos),domWidth=dom.node.childNodes[dom.offset].offsetWidth,parts=colspan;if(colwidth)for(var i=0;i<colspan;i++)colwidth[i]&&(domWidth-=colwidth[i],parts--);return domWidth/parts}(view,pluginState.activeHandle,cell.attrs);function finish(event){window.removeEventListener("mouseup",finish),window.removeEventListener("mousemove",move);var pluginState=key$1.getState(view.state);pluginState.dragging&&(function(view,cell,width){for(var $cell=view.state.doc.resolve(cell),table=$cell.node(-1),map=TableMap.get(table),start=$cell.start(-1),col=map.colCount($cell.pos-start)+$cell.nodeAfter.attrs.colspan-1,tr=view.state.tr,row=0;row<map.height;row++){var mapIndex=row*map.width+col;if(!row||map.map[mapIndex]!=map.map[mapIndex-map.width]){var pos=map.map[mapIndex],attrs=table.nodeAt(pos).attrs,index=1==attrs.colspan?0:col-map.colCount(pos);if(!attrs.colwidth||attrs.colwidth[index]!=width){var colwidth=attrs.colwidth?attrs.colwidth.slice():zeroes(attrs.colspan);colwidth[index]=width,tr.setNodeMarkup(start+pos,null,setAttr(attrs,"colwidth",colwidth))}}}tr.docChanged&&view.dispatch(tr)}(view,pluginState.activeHandle,draggedWidth(pluginState.dragging,event,cellMinWidth)),view.dispatch(view.state.tr.setMeta(key$1,{setDragging:null})))}function move(event){if(!event.which)return finish(event);var pluginState=key$1.getState(view.state),dragged=draggedWidth(pluginState.dragging,event,cellMinWidth);!function(view,cell,width,cellMinWidth){for(var $cell=view.state.doc.resolve(cell),table=$cell.node(-1),start=$cell.start(-1),col=TableMap.get(table).colCount($cell.pos-start)+$cell.nodeAfter.attrs.colspan-1,dom=view.domAtPos($cell.start(-1)).node;"TABLE"!=dom.nodeName;)dom=dom.parentNode;updateColumns(table,dom.firstChild,dom,cellMinWidth,col,width)}(view,pluginState.activeHandle,dragged,cellMinWidth)}view.dispatch(view.state.tr.setMeta(key$1,{setDragging:{startX:event.clientX,startWidth:width}})),window.addEventListener("mouseup",finish),window.addEventListener("mousemove",move),event.preventDefault()}(view,event,cellMinWidth)}},decorations:function(state){var pluginState=key$1.getState(state);if(pluginState.activeHandle>-1)return function(state,cell){for(var decorations=[],$cell=state.doc.resolve(cell),table=$cell.node(-1),map=TableMap.get(table),start=$cell.start(-1),col=map.colCount($cell.pos-start)+$cell.nodeAfter.attrs.colspan,row=0;row<map.height;row++){var index=col+row*map.width-1;if(!(col!=map.width&&map.map[index]==map.map[index+1]||0!=row&&map.map[index-1]==map.map[index-1-map.width])){var cellPos=map.map[index],pos=start+cellPos+table.nodeAt(cellPos).nodeSize-1,dom=document.createElement("div");dom.className="column-resize-handle",decorations.push(prosemirror_view__WEBPACK_IMPORTED_MODULE_3__.Decoration.widget(pos,dom))}}return prosemirror_view__WEBPACK_IMPORTED_MODULE_3__.DecorationSet.create(state.doc,decorations)}(state,pluginState.activeHandle)},nodeViews:{}}})}var ResizeState=function(activeHandle,dragging){this.activeHandle=activeHandle,this.dragging=dragging};function edgeCell(view,event,side){var ref=view.posAtCoords({left:event.clientX,top:event.clientY}),$cell=cellAround(view.state.doc.resolve(ref.pos));if(!$cell)return-1;if("right"==side)return $cell.pos;var map=TableMap.get($cell.node(-1)),start=$cell.start(-1),index=map.map.indexOf($cell.pos-start);return index%map.width==0?-1:start+map.map[index-1]}function draggedWidth(dragging,event,cellMinWidth){return Math.max(cellMinWidth,dragging.startWidth+(event.clientX-dragging.startX))}function updateHandle(view,value){view.dispatch(view.state.tr.setMeta(key$1,{setHandle:value}))}function zeroes(n){for(var result=[],i=0;i<n;i++)result.push(0);return result}function tableEditing(ref){void 0===ref&&(ref={});var allowTableNodeSelection=ref.allowTableNodeSelection;return void 0===allowTableNodeSelection&&(allowTableNodeSelection=!1),new prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.Plugin({key:key,state:{init:function(){return null},apply:function(tr,cur){var set=tr.getMeta(key);if(null!=set)return-1==set?null:set;if(null==cur||!tr.docChanged)return cur;var ref=tr.mapping.mapResult(cur);return ref.deleted?null:ref.pos}},props:{decorations:drawCellSelection,handleDOMEvents:{mousedown:handleMouseDown},createSelectionBetween:function(view){if(null!=key.getState(view.state))return view.state.selection},handleTripleClick:handleTripleClick,handleKeyDown:handleKeyDown,handlePaste:handlePaste},appendTransaction:function(_,oldState,state){return function(state,tr,allowTableNodeSelection){var normalize,role,sel=(tr||state).selection,doc=(tr||state).doc;if(sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.NodeSelection&&(role=sel.node.type.spec.tableRole)){if("cell"==role||"header_cell"==role)normalize=CellSelection.create(doc,sel.from);else if("row"==role){var $cell=doc.resolve(sel.from+1);normalize=CellSelection.rowSelection($cell,$cell)}else if(!allowTableNodeSelection){var map=TableMap.get(sel.node),start=sel.from+1;normalize=CellSelection.create(doc,start+1,start+map.map[map.width*map.height-1])}}else sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection&&function(ref){var $from=ref.$from,$to=ref.$to;if($from.pos==$to.pos||$from.pos<$from.pos-6)return!1;for(var afterFrom=$from.pos,beforeTo=$to.pos,depth=$from.depth;depth>=0&&!($from.after(depth+1)<$from.end(depth));depth--,afterFrom++);for(var d=$to.depth;d>=0&&!($to.before(d+1)>$to.start(d));d--,beforeTo--);return afterFrom==beforeTo&&/row|table/.test($from.node(depth).type.spec.tableRole)}(sel)?normalize=prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection.create(doc,sel.from):sel instanceof prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection&&function(ref){for(var fromCellBoundaryNode,toCellBoundaryNode,$from=ref.$from,$to=ref.$to,i=$from.depth;i>0;i--){var node=$from.node(i);if("cell"===node.type.spec.tableRole||"header_cell"===node.type.spec.tableRole){fromCellBoundaryNode=node;break}}for(var i$1=$to.depth;i$1>0;i$1--){var node$1=$to.node(i$1);if("cell"===node$1.type.spec.tableRole||"header_cell"===node$1.type.spec.tableRole){toCellBoundaryNode=node$1;break}}return fromCellBoundaryNode!==toCellBoundaryNode&&0===$to.parentOffset}(sel)&&(normalize=prosemirror_state__WEBPACK_IMPORTED_MODULE_0__.TextSelection.create(doc,sel.$from.start(),sel.$from.end()));return normalize&&(tr||(tr=state.tr)).setSelection(normalize),tr}(state,fixTables(state,oldState),allowTableNodeSelection)}})}ResizeState.prototype.apply=function(tr){var state=this,action=tr.getMeta(key$1);if(action&&null!=action.setHandle)return new ResizeState(action.setHandle,null);if(action&&void 0!==action.setDragging)return new ResizeState(state.activeHandle,action.setDragging);if(state.activeHandle>-1&&tr.docChanged){var handle=tr.mapping.map(state.activeHandle,-1);pointsAtCell(tr.doc.resolve(handle))||(handle=null),state=new ResizeState(handle,state.dragging)}return state}},W8i8:function(module,exports,__webpack_require__){module.exports=__webpack_require__("V2qZ")},WOAq:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){var _root_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("Ju5/"),_stubFalse_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("L3Qv"),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,Buffer=freeModule&&freeModule.exports===freeExports?_root_js__WEBPACK_IMPORTED_MODULE_0__.a.Buffer:void 0;__webpack_exports__.a=(Buffer?Buffer.isBuffer:void 0)||_stubFalse_js__WEBPACK_IMPORTED_MODULE_1__.a}).call(this,__webpack_require__("3UD+")(module))},XNSO:function(module,exports,__webpack_require__){module.exports=__webpack_require__("hyZr")},XqMk:function(module,__webpack_exports__,__webpack_require__){"use strict";var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global;__webpack_exports__.a=freeGlobal},ahru:function(module,exports,__webpack_require__){module.exports=__webpack_require__("UxO+")},fScX:function(module,exports,__webpack_require__){module.exports=__webpack_require__("MEpN")},fwbU:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"keydownHandler",(function(){return keydownHandler})),__webpack_require__.d(__webpack_exports__,"keymap",(function(){return keymap}));for(var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},chrome="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),safari="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),gecko="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ie="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),brokenModifierNames=chrome&&(mac||+chrome[1]<57)||gecko&&mac,i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(i=1;i<=24;i++)base[i+111]="F"+i;for(i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);var index_es=__webpack_require__("UxO+"),index_es_mac="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function normalizeKeyName(name){var alt,ctrl,shift,meta,parts=name.split(/-(?!$)/),result=parts[parts.length-1];"Space"==result&&(result=" ");for(var i=0;i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))meta=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else if(/^s(hift)?$/i.test(mod))shift=!0;else{if(!/^mod$/i.test(mod))throw new Error("Unrecognized modifier name: "+mod);index_es_mac?meta=!0:ctrl=!0}}return alt&&(result="Alt-"+result),ctrl&&(result="Ctrl-"+result),meta&&(result="Meta-"+result),shift&&(result="Shift-"+result),result}function modifiers(name,event,shift){return event.altKey&&(name="Alt-"+name),event.ctrlKey&&(name="Ctrl-"+name),event.metaKey&&(name="Meta-"+name),!1!==shift&&event.shiftKey&&(name="Shift-"+name),name}function keymap(bindings){return new index_es.Plugin({props:{handleKeyDown:keydownHandler(bindings)}})}function keydownHandler(bindings){var map=function(map){var copy=Object.create(null);for(var prop in map)copy[normalizeKeyName(prop)]=map[prop];return copy}(bindings);return function(view,event){var baseName,name=function(event){var name=!(brokenModifierNames&&(event.ctrlKey||event.altKey||event.metaKey)||(safari||ie)&&event.shiftKey&&event.key&&1==event.key.length)&&event.key||(event.shiftKey?shift:base)[event.keyCode]||event.key||"Unidentified";return"Esc"==name&&(name="Escape"),"Del"==name&&(name="Delete"),"Left"==name&&(name="ArrowLeft"),"Up"==name&&(name="ArrowUp"),"Right"==name&&(name="ArrowRight"),"Down"==name&&(name="ArrowDown"),name}(event),isChar=1==name.length&&" "!=name,direct=map[modifiers(name,event,!isChar)];if(direct&&direct(view.state,view.dispatch,view))return!0;if(isChar&&(event.shiftKey||event.altKey||event.metaKey||name.charCodeAt(0)>127)&&(baseName=base[event.keyCode])&&baseName!=name){var fromCode=map[modifiers(baseName,event,!0)];if(fromCode&&fromCode(view.state,view.dispatch,view))return!0}else if(isChar&&event.shiftKey){var withShift=map[modifiers(name,event,!0)];if(withShift&&withShift(view.state,view.dispatch,view))return!0}return!1}}},g1Xn:function(module,exports,__webpack_require__){module.exports=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){return s(t[o][1][e]||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var utils=require("./utils"),support=require("./support"),_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";exports.encode=function(input){for(var chr1,chr2,chr3,enc2,enc3,enc4,output=[],i=0,len=input.length,remainingBytes=len,isArray="string"!==utils.getTypeOf(input);i<input.length;)remainingBytes=len-i,isArray?(chr1=input[i++],chr2=i<len?input[i++]:0,chr3=i<len?input[i++]:0):(chr1=input.charCodeAt(i++),chr2=i<len?input.charCodeAt(i++):0,chr3=i<len?input.charCodeAt(i++):0),enc2=(3&chr1)<<4|chr2>>4,enc3=remainingBytes>1?(15&chr2)<<2|chr3>>6:64,enc4=remainingBytes>2?63&chr3:64,output.push(_keyStr.charAt(chr1>>2)+_keyStr.charAt(enc2)+_keyStr.charAt(enc3)+_keyStr.charAt(enc4));return output.join("")},exports.decode=function(input){var chr2,chr3,enc1,enc2,enc3,enc4,i=0,resultIndex=0;if("data:"===input.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var output,totalLength=3*(input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(input.charAt(input.length-1)===_keyStr.charAt(64)&&totalLength--,input.charAt(input.length-2)===_keyStr.charAt(64)&&totalLength--,totalLength%1!=0)throw new Error("Invalid base64 input, bad content length.");for(output=support.uint8array?new Uint8Array(0|totalLength):new Array(0|totalLength);i<input.length;)enc1=_keyStr.indexOf(input.charAt(i++)),chr2=(15&(enc2=_keyStr.indexOf(input.charAt(i++))))<<4|(enc3=_keyStr.indexOf(input.charAt(i++)))>>2,chr3=(3&enc3)<<6|(enc4=_keyStr.indexOf(input.charAt(i++))),output[resultIndex++]=enc1<<2|enc2>>4,64!==enc3&&(output[resultIndex++]=chr2),64!==enc4&&(output[resultIndex++]=chr3);return output}},{"./support":30,"./utils":32}],2:[function(require,module,exports){"use strict";var external=require("./external"),DataWorker=require("./stream/DataWorker"),DataLengthProbe=require("./stream/DataLengthProbe"),Crc32Probe=require("./stream/Crc32Probe");function CompressedObject(compressedSize,uncompressedSize,crc32,compression,data){this.compressedSize=compressedSize,this.uncompressedSize=uncompressedSize,this.crc32=crc32,this.compression=compression,this.compressedContent=data}DataLengthProbe=require("./stream/DataLengthProbe"),CompressedObject.prototype={getContentWorker:function(){var worker=new DataWorker(external.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new DataLengthProbe("data_length")),that=this;return worker.on("end",(function(){if(this.streamInfo.data_length!==that.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),worker},getCompressedWorker:function(){return new DataWorker(external.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},CompressedObject.createWorkerFrom=function(uncompressedWorker,compression,compressionOptions){return uncompressedWorker.pipe(new Crc32Probe).pipe(new DataLengthProbe("uncompressedSize")).pipe(compression.compressWorker(compressionOptions)).pipe(new DataLengthProbe("compressedSize")).withStreamInfo("compression",compression)},module.exports=CompressedObject},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(require,module,exports){"use strict";var GenericWorker=require("./stream/GenericWorker");exports.STORE={magic:"\0\0",compressWorker:function(compressionOptions){return new GenericWorker("STORE compression")},uncompressWorker:function(){return new GenericWorker("STORE decompression")}},exports.DEFLATE=require("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(require,module,exports){"use strict";var utils=require("./utils"),crcTable=function(){for(var c,table=[],n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=1&c?3988292384^c>>>1:c>>>1;table[n]=c}return table}();module.exports=function(input,crc){return void 0!==input&&input.length?"string"!==utils.getTypeOf(input)?function(crc,buf,len,pos){var t=crcTable,end=0+len;crc^=-1;for(var i=0;i<end;i++)crc=crc>>>8^t[255&(crc^buf[i])];return-1^crc}(0|crc,input,input.length):function(crc,str,len,pos){var t=crcTable,end=0+len;crc^=-1;for(var i=0;i<end;i++)crc=crc>>>8^t[255&(crc^str.charCodeAt(i))];return-1^crc}(0|crc,input,input.length):0}},{"./utils":32}],5:[function(require,module,exports){"use strict";exports.base64=!1,exports.binary=!1,exports.dir=!1,exports.createFolders=!0,exports.date=null,exports.compression=null,exports.compressionOptions=null,exports.comment=null,exports.unixPermissions=null,exports.dosPermissions=null},{}],6:[function(require,module,exports){"use strict";var ES6Promise;ES6Promise="undefined"!=typeof Promise?Promise:require("lie"),module.exports={Promise:ES6Promise}},{lie:37}],7:[function(require,module,exports){"use strict";var USE_TYPEDARRAY="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,pako=require("pako"),utils=require("./utils"),GenericWorker=require("./stream/GenericWorker"),ARRAY_TYPE=USE_TYPEDARRAY?"uint8array":"array";function FlateWorker(action,options){GenericWorker.call(this,"FlateWorker/"+action),this._pako=null,this._pakoAction=action,this._pakoOptions=options,this.meta={}}exports.magic="\b\0",utils.inherits(FlateWorker,GenericWorker),FlateWorker.prototype.processChunk=function(chunk){this.meta=chunk.meta,null===this._pako&&this._createPako(),this._pako.push(utils.transformTo(ARRAY_TYPE,chunk.data),!1)},FlateWorker.prototype.flush=function(){GenericWorker.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},FlateWorker.prototype.cleanUp=function(){GenericWorker.prototype.cleanUp.call(this),this._pako=null},FlateWorker.prototype._createPako=function(){this._pako=new pako[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var self=this;this._pako.onData=function(data){self.push({data:data,meta:self.meta})}},exports.compressWorker=function(compressionOptions){return new FlateWorker("Deflate",compressionOptions)},exports.uncompressWorker=function(){return new FlateWorker("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(require,module,exports){"use strict";var utils=require("../utils"),GenericWorker=require("../stream/GenericWorker"),utf8=require("../utf8"),crc32=require("../crc32"),signature=require("../signature"),decToHex=function(dec,bytes){var i,hex="";for(i=0;i<bytes;i++)hex+=String.fromCharCode(255&dec),dec>>>=8;return hex},generateZipParts=function(streamInfo,streamedContent,streamingEnded,offset,platform,encodeFileName){var dosTime,dosDate,file=streamInfo.file,compression=streamInfo.compression,useCustomEncoding=encodeFileName!==utf8.utf8encode,encodedFileName=utils.transformTo("string",encodeFileName(file.name)),utfEncodedFileName=utils.transformTo("string",utf8.utf8encode(file.name)),comment=file.comment,encodedComment=utils.transformTo("string",encodeFileName(comment)),utfEncodedComment=utils.transformTo("string",utf8.utf8encode(comment)),useUTF8ForFileName=utfEncodedFileName.length!==file.name.length,useUTF8ForComment=utfEncodedComment.length!==comment.length,extraFields="",unicodePathExtraField="",unicodeCommentExtraField="",dir=file.dir,date=file.date,dataInfo={crc32:0,compressedSize:0,uncompressedSize:0};streamedContent&&!streamingEnded||(dataInfo.crc32=streamInfo.crc32,dataInfo.compressedSize=streamInfo.compressedSize,dataInfo.uncompressedSize=streamInfo.uncompressedSize);var bitflag=0;streamedContent&&(bitflag|=8),useCustomEncoding||!useUTF8ForFileName&&!useUTF8ForComment||(bitflag|=2048);var unixPermissions,result,extFileAttr=0,versionMadeBy=0;dir&&(extFileAttr|=16),"UNIX"===platform?(versionMadeBy=798,extFileAttr|=(result=unixPermissions=file.unixPermissions,unixPermissions||(result=dir?16893:33204),(65535&result)<<16)):(versionMadeBy=20,extFileAttr|=63&(file.dosPermissions||0)),dosTime=date.getUTCHours(),dosTime<<=6,dosTime|=date.getUTCMinutes(),dosTime<<=5,dosTime|=date.getUTCSeconds()/2,dosDate=date.getUTCFullYear()-1980,dosDate<<=4,dosDate|=date.getUTCMonth()+1,dosDate<<=5,dosDate|=date.getUTCDate(),useUTF8ForFileName&&(unicodePathExtraField=decToHex(1,1)+decToHex(crc32(encodedFileName),4)+utfEncodedFileName,extraFields+="up"+decToHex(unicodePathExtraField.length,2)+unicodePathExtraField),useUTF8ForComment&&(unicodeCommentExtraField=decToHex(1,1)+decToHex(crc32(encodedComment),4)+utfEncodedComment,extraFields+="uc"+decToHex(unicodeCommentExtraField.length,2)+unicodeCommentExtraField);var header="";return header+="\n\0",header+=decToHex(bitflag,2),header+=compression.magic,header+=decToHex(dosTime,2),header+=decToHex(dosDate,2),header+=decToHex(dataInfo.crc32,4),header+=decToHex(dataInfo.compressedSize,4),header+=decToHex(dataInfo.uncompressedSize,4),header+=decToHex(encodedFileName.length,2),header+=decToHex(extraFields.length,2),{fileRecord:signature.LOCAL_FILE_HEADER+header+encodedFileName+extraFields,dirRecord:signature.CENTRAL_FILE_HEADER+decToHex(versionMadeBy,2)+header+decToHex(encodedComment.length,2)+"\0\0\0\0"+decToHex(extFileAttr,4)+decToHex(offset,4)+encodedFileName+extraFields+encodedComment}},generateDataDescriptors=function(streamInfo){return signature.DATA_DESCRIPTOR+decToHex(streamInfo.crc32,4)+decToHex(streamInfo.compressedSize,4)+decToHex(streamInfo.uncompressedSize,4)};function ZipFileWorker(streamFiles,comment,platform,encodeFileName){GenericWorker.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=comment,this.zipPlatform=platform,this.encodeFileName=encodeFileName,this.streamFiles=streamFiles,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}utils.inherits(ZipFileWorker,GenericWorker),ZipFileWorker.prototype.push=function(chunk){var currentFilePercent=chunk.meta.percent||0,entriesCount=this.entriesCount,remainingFiles=this._sources.length;this.accumulate?this.contentBuffer.push(chunk):(this.bytesWritten+=chunk.data.length,GenericWorker.prototype.push.call(this,{data:chunk.data,meta:{currentFile:this.currentFile,percent:entriesCount?(currentFilePercent+100*(entriesCount-remainingFiles-1))/entriesCount:100}}))},ZipFileWorker.prototype.openedSource=function(streamInfo){this.currentSourceOffset=this.bytesWritten,this.currentFile=streamInfo.file.name;var streamedContent=this.streamFiles&&!streamInfo.file.dir;if(streamedContent){var record=generateZipParts(streamInfo,streamedContent,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:record.fileRecord,meta:{percent:0}})}else this.accumulate=!0},ZipFileWorker.prototype.closedSource=function(streamInfo){this.accumulate=!1;var streamedContent=this.streamFiles&&!streamInfo.file.dir,record=generateZipParts(streamInfo,streamedContent,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(record.dirRecord),streamedContent)this.push({data:generateDataDescriptors(streamInfo),meta:{percent:100}});else for(this.push({data:record.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},ZipFileWorker.prototype.flush=function(){for(var localDirLength=this.bytesWritten,i=0;i<this.dirRecords.length;i++)this.push({data:this.dirRecords[i],meta:{percent:100}});var dirEnd=function(entriesCount,centralDirLength,localDirLength,comment,encodeFileName){var encodedComment=utils.transformTo("string",encodeFileName(comment));return signature.CENTRAL_DIRECTORY_END+"\0\0\0\0"+decToHex(entriesCount,2)+decToHex(entriesCount,2)+decToHex(centralDirLength,4)+decToHex(localDirLength,4)+decToHex(encodedComment.length,2)+encodedComment}(this.dirRecords.length,this.bytesWritten-localDirLength,localDirLength,this.zipComment,this.encodeFileName);this.push({data:dirEnd,meta:{percent:100}})},ZipFileWorker.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},ZipFileWorker.prototype.registerPrevious=function(previous){this._sources.push(previous);var self=this;return previous.on("data",(function(chunk){self.processChunk(chunk)})),previous.on("end",(function(){self.closedSource(self.previous.streamInfo),self._sources.length?self.prepareNextSource():self.end()})),previous.on("error",(function(e){self.error(e)})),this},ZipFileWorker.prototype.resume=function(){return!!GenericWorker.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},ZipFileWorker.prototype.error=function(e){var sources=this._sources;if(!GenericWorker.prototype.error.call(this,e))return!1;for(var i=0;i<sources.length;i++)try{sources[i].error(e)}catch(e){}return!0},ZipFileWorker.prototype.lock=function(){GenericWorker.prototype.lock.call(this);for(var sources=this._sources,i=0;i<sources.length;i++)sources[i].lock()},module.exports=ZipFileWorker},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(require,module,exports){"use strict";var compressions=require("../compressions"),ZipFileWorker=require("./ZipFileWorker");exports.generateWorker=function(zip,options,comment){var zipFileWorker=new ZipFileWorker(options.streamFiles,comment,options.platform,options.encodeFileName),entriesCount=0;try{zip.forEach((function(relativePath,file){entriesCount++;var compression=function(fileCompression,zipCompression){var compressionName=fileCompression||zipCompression,compression=compressions[compressionName];if(!compression)throw new Error(compressionName+" is not a valid compression method !");return compression}(file.options.compression,options.compression),dir=file.dir,date=file.date;file._compressWorker(compression,file.options.compressionOptions||options.compressionOptions||{}).withStreamInfo("file",{name:relativePath,dir:dir,date:date,comment:file.comment||"",unixPermissions:file.unixPermissions,dosPermissions:file.dosPermissions}).pipe(zipFileWorker)})),zipFileWorker.entriesCount=entriesCount}catch(e){zipFileWorker.error(e)}return zipFileWorker}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(require,module,exports){"use strict";function JSZip(){if(!(this instanceof JSZip))return new JSZip;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var newObj=new JSZip;for(var i in this)"function"!=typeof this[i]&&(newObj[i]=this[i]);return newObj}}(JSZip.prototype=require("./object")).loadAsync=require("./load"),JSZip.support=require("./support"),JSZip.defaults=require("./defaults"),JSZip.version="3.5.0",JSZip.loadAsync=function(content,options){return(new JSZip).loadAsync(content,options)},JSZip.external=require("./external"),module.exports=JSZip},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(require,module,exports){"use strict";var utils=require("./utils"),external=require("./external"),utf8=require("./utf8"),ZipEntries=(utils=require("./utils"),require("./zipEntries")),Crc32Probe=require("./stream/Crc32Probe"),nodejsUtils=require("./nodejsUtils");function checkEntryCRC32(zipEntry){return new external.Promise((function(resolve,reject){var worker=zipEntry.decompressed.getContentWorker().pipe(new Crc32Probe);worker.on("error",(function(e){reject(e)})).on("end",(function(){worker.streamInfo.crc32!==zipEntry.decompressed.crc32?reject(new Error("Corrupted zip : CRC32 mismatch")):resolve()})).resume()}))}module.exports=function(data,options){var zip=this;return options=utils.extend(options||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:utf8.utf8decode}),nodejsUtils.isNode&&nodejsUtils.isStream(data)?external.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):utils.prepareContent("the loaded zip file",data,!0,options.optimizedBinaryString,options.base64).then((function(data){var zipEntries=new ZipEntries(options);return zipEntries.load(data),zipEntries})).then((function(zipEntries){var promises=[external.Promise.resolve(zipEntries)],files=zipEntries.files;if(options.checkCRC32)for(var i=0;i<files.length;i++)promises.push(checkEntryCRC32(files[i]));return external.Promise.all(promises)})).then((function(results){for(var zipEntries=results.shift(),files=zipEntries.files,i=0;i<files.length;i++){var input=files[i];zip.file(input.fileNameStr,input.decompressed,{binary:!0,optimizedBinaryString:!0,date:input.date,dir:input.dir,comment:input.fileCommentStr.length?input.fileCommentStr:null,unixPermissions:input.unixPermissions,dosPermissions:input.dosPermissions,createFolders:options.createFolders})}return zipEntries.zipComment.length&&(zip.comment=zipEntries.zipComment),zip}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(require,module,exports){"use strict";var utils=require("../utils"),GenericWorker=require("../stream/GenericWorker");function NodejsStreamInputAdapter(filename,stream){GenericWorker.call(this,"Nodejs stream input adapter for "+filename),this._upstreamEnded=!1,this._bindStream(stream)}utils.inherits(NodejsStreamInputAdapter,GenericWorker),NodejsStreamInputAdapter.prototype._bindStream=function(stream){var self=this;this._stream=stream,stream.pause(),stream.on("data",(function(chunk){self.push({data:chunk,meta:{percent:0}})})).on("error",(function(e){self.isPaused?this.generatedError=e:self.error(e)})).on("end",(function(){self.isPaused?self._upstreamEnded=!0:self.end()}))},NodejsStreamInputAdapter.prototype.pause=function(){return!!GenericWorker.prototype.pause.call(this)&&(this._stream.pause(),!0)},NodejsStreamInputAdapter.prototype.resume=function(){return!!GenericWorker.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},module.exports=NodejsStreamInputAdapter},{"../stream/GenericWorker":28,"../utils":32}],13:[function(require,module,exports){"use strict";var Readable=require("readable-stream").Readable;function NodejsStreamOutputAdapter(helper,options,updateCb){Readable.call(this,options),this._helper=helper;var self=this;helper.on("data",(function(data,meta){self.push(data)||self._helper.pause(),updateCb&&updateCb(meta)})).on("error",(function(e){self.emit("error",e)})).on("end",(function(){self.push(null)}))}require("../utils").inherits(NodejsStreamOutputAdapter,Readable),NodejsStreamOutputAdapter.prototype._read=function(){this._helper.resume()},module.exports=NodejsStreamOutputAdapter},{"../utils":32,"readable-stream":16}],14:[function(require,module,exports){"use strict";module.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(data,encoding){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(data,encoding);if("number"==typeof data)throw new Error('The "data" argument must not be a number');return new Buffer(data,encoding)},allocBuffer:function(size){if(Buffer.alloc)return Buffer.alloc(size);var buf=new Buffer(size);return buf.fill(0),buf},isBuffer:function(b){return Buffer.isBuffer(b)},isStream:function(obj){return obj&&"function"==typeof obj.on&&"function"==typeof obj.pause&&"function"==typeof obj.resume}}},{}],15:[function(require,module,exports){"use strict";var utf8=require("./utf8"),utils=require("./utils"),GenericWorker=require("./stream/GenericWorker"),StreamHelper=require("./stream/StreamHelper"),defaults=require("./defaults"),CompressedObject=require("./compressedObject"),ZipObject=require("./zipObject"),generate=require("./generate"),nodejsUtils=require("./nodejsUtils"),NodejsStreamInputAdapter=require("./nodejs/NodejsStreamInputAdapter"),fileAdd=function(name,data,originalOptions){var parent,zipObjectContent,dataType=utils.getTypeOf(data),o=utils.extend(originalOptions||{},defaults);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(name=forceTrailingSlash(name)),o.createFolders&&(parent=parentFolder(name))&&folderAdd.call(this,parent,!0),originalOptions&&void 0!==originalOptions.binary||(o.binary=!("string"===dataType&&!1===o.binary&&!1===o.base64)),(data instanceof CompressedObject&&0===data.uncompressedSize||o.dir||!data||0===data.length)&&(o.base64=!1,o.binary=!0,data="",o.compression="STORE",dataType="string"),zipObjectContent=data instanceof CompressedObject||data instanceof GenericWorker?data:nodejsUtils.isNode&&nodejsUtils.isStream(data)?new NodejsStreamInputAdapter(name,data):utils.prepareContent(name,data,o.binary,o.optimizedBinaryString,o.base64);var object=new ZipObject(name,zipObjectContent,o);this.files[name]=object},parentFolder=function(path){"/"===path.slice(-1)&&(path=path.substring(0,path.length-1));var lastSlash=path.lastIndexOf("/");return lastSlash>0?path.substring(0,lastSlash):""},forceTrailingSlash=function(path){return"/"!==path.slice(-1)&&(path+="/"),path},folderAdd=function(name,createFolders){return createFolders=void 0!==createFolders?createFolders:defaults.createFolders,name=forceTrailingSlash(name),this.files[name]||fileAdd.call(this,name,null,{dir:!0,createFolders:createFolders}),this.files[name]};function isRegExp(object){return"[object RegExp]"===Object.prototype.toString.call(object)}module.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(cb){var filename,relativePath,file;for(filename in this.files)this.files.hasOwnProperty(filename)&&(file=this.files[filename],(relativePath=filename.slice(this.root.length,filename.length))&&filename.slice(0,this.root.length)===this.root&&cb(relativePath,file))},filter:function(search){var result=[];return this.forEach((function(relativePath,entry){search(relativePath,entry)&&result.push(entry)})),result},file:function(name,data,o){if(1===arguments.length){if(isRegExp(name)){var regexp=name;return this.filter((function(relativePath,file){return!file.dir&&regexp.test(relativePath)}))}var obj=this.files[this.root+name];return obj&&!obj.dir?obj:null}return fileAdd.call(this,name=this.root+name,data,o),this},folder:function(arg){if(!arg)return this;if(isRegExp(arg))return this.filter((function(relativePath,file){return file.dir&&arg.test(relativePath)}));var newFolder=folderAdd.call(this,this.root+arg),ret=this.clone();return ret.root=newFolder.name,ret},remove:function(name){var file=this.files[name=this.root+name];if(file||("/"!==name.slice(-1)&&(name+="/"),file=this.files[name]),file&&!file.dir)delete this.files[name];else for(var kids=this.filter((function(relativePath,file){return file.name.slice(0,name.length)===name})),i=0;i<kids.length;i++)delete this.files[kids[i].name];return this},generate:function(options){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(options){var worker,opts={};try{if((opts=utils.extend(options||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:utf8.utf8encode})).type=opts.type.toLowerCase(),opts.compression=opts.compression.toUpperCase(),"binarystring"===opts.type&&(opts.type="string"),!opts.type)throw new Error("No output type specified.");utils.checkSupport(opts.type),"darwin"!==opts.platform&&"freebsd"!==opts.platform&&"linux"!==opts.platform&&"sunos"!==opts.platform||(opts.platform="UNIX"),"win32"===opts.platform&&(opts.platform="DOS"),worker=generate.generateWorker(this,opts,opts.comment||this.comment||"")}catch(e){(worker=new GenericWorker("error")).error(e)}return new StreamHelper(worker,opts.type||"string",opts.mimeType)},generateAsync:function(options,onUpdate){return this.generateInternalStream(options).accumulate(onUpdate)},generateNodeStream:function(options,onUpdate){return(options=options||{}).type||(options.type="nodebuffer"),this.generateInternalStream(options).toNodejsStream(onUpdate)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(require,module,exports){module.exports=require("stream")},{stream:void 0}],17:[function(require,module,exports){"use strict";var DataReader=require("./DataReader");function ArrayReader(data){DataReader.call(this,data);for(var i=0;i<this.data.length;i++)data[i]=255&data[i]}require("../utils").inherits(ArrayReader,DataReader),ArrayReader.prototype.byteAt=function(i){return this.data[this.zero+i]},ArrayReader.prototype.lastIndexOfSignature=function(sig){for(var sig0=sig.charCodeAt(0),sig1=sig.charCodeAt(1),sig2=sig.charCodeAt(2),sig3=sig.charCodeAt(3),i=this.length-4;i>=0;--i)if(this.data[i]===sig0&&this.data[i+1]===sig1&&this.data[i+2]===sig2&&this.data[i+3]===sig3)return i-this.zero;return-1},ArrayReader.prototype.readAndCheckSignature=function(sig){var sig0=sig.charCodeAt(0),sig1=sig.charCodeAt(1),sig2=sig.charCodeAt(2),sig3=sig.charCodeAt(3),data=this.readData(4);return sig0===data[0]&&sig1===data[1]&&sig2===data[2]&&sig3===data[3]},ArrayReader.prototype.readData=function(size){if(this.checkOffset(size),0===size)return[];var result=this.data.slice(this.zero+this.index,this.zero+this.index+size);return this.index+=size,result},module.exports=ArrayReader},{"../utils":32,"./DataReader":18}],18:[function(require,module,exports){"use strict";var utils=require("../utils");function DataReader(data){this.data=data,this.length=data.length,this.index=0,this.zero=0}DataReader.prototype={checkOffset:function(offset){this.checkIndex(this.index+offset)},checkIndex:function(newIndex){if(this.length<this.zero+newIndex||newIndex<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+newIndex+"). Corrupted zip ?")},setIndex:function(newIndex){this.checkIndex(newIndex),this.index=newIndex},skip:function(n){this.setIndex(this.index+n)},byteAt:function(i){},readInt:function(size){var i,result=0;for(this.checkOffset(size),i=this.index+size-1;i>=this.index;i--)result=(result<<8)+this.byteAt(i);return this.index+=size,result},readString:function(size){return utils.transformTo("string",this.readData(size))},readData:function(size){},lastIndexOfSignature:function(sig){},readAndCheckSignature:function(sig){},readDate:function(){var dostime=this.readInt(4);return new Date(Date.UTC(1980+(dostime>>25&127),(dostime>>21&15)-1,dostime>>16&31,dostime>>11&31,dostime>>5&63,(31&dostime)<<1))}},module.exports=DataReader},{"../utils":32}],19:[function(require,module,exports){"use strict";var Uint8ArrayReader=require("./Uint8ArrayReader");function NodeBufferReader(data){Uint8ArrayReader.call(this,data)}require("../utils").inherits(NodeBufferReader,Uint8ArrayReader),NodeBufferReader.prototype.readData=function(size){this.checkOffset(size);var result=this.data.slice(this.zero+this.index,this.zero+this.index+size);return this.index+=size,result},module.exports=NodeBufferReader},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(require,module,exports){"use strict";var DataReader=require("./DataReader");function StringReader(data){DataReader.call(this,data)}require("../utils").inherits(StringReader,DataReader),StringReader.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},StringReader.prototype.lastIndexOfSignature=function(sig){return this.data.lastIndexOf(sig)-this.zero},StringReader.prototype.readAndCheckSignature=function(sig){return sig===this.readData(4)},StringReader.prototype.readData=function(size){this.checkOffset(size);var result=this.data.slice(this.zero+this.index,this.zero+this.index+size);return this.index+=size,result},module.exports=StringReader},{"../utils":32,"./DataReader":18}],21:[function(require,module,exports){"use strict";var ArrayReader=require("./ArrayReader");function Uint8ArrayReader(data){ArrayReader.call(this,data)}require("../utils").inherits(Uint8ArrayReader,ArrayReader),Uint8ArrayReader.prototype.readData=function(size){if(this.checkOffset(size),0===size)return new Uint8Array(0);var result=this.data.subarray(this.zero+this.index,this.zero+this.index+size);return this.index+=size,result},module.exports=Uint8ArrayReader},{"../utils":32,"./ArrayReader":17}],22:[function(require,module,exports){"use strict";var utils=require("../utils"),support=require("../support"),ArrayReader=require("./ArrayReader"),StringReader=require("./StringReader"),NodeBufferReader=require("./NodeBufferReader"),Uint8ArrayReader=require("./Uint8ArrayReader");module.exports=function(data){var type=utils.getTypeOf(data);return utils.checkSupport(type),"string"!==type||support.uint8array?"nodebuffer"===type?new NodeBufferReader(data):support.uint8array?new Uint8ArrayReader(utils.transformTo("uint8array",data)):new ArrayReader(utils.transformTo("array",data)):new StringReader(data)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(require,module,exports){"use strict";exports.LOCAL_FILE_HEADER="PK",exports.CENTRAL_FILE_HEADER="PK",exports.CENTRAL_DIRECTORY_END="PK",exports.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",exports.ZIP64_CENTRAL_DIRECTORY_END="PK",exports.DATA_DESCRIPTOR="PK\b"},{}],24:[function(require,module,exports){"use strict";var GenericWorker=require("./GenericWorker"),utils=require("../utils");function ConvertWorker(destType){GenericWorker.call(this,"ConvertWorker to "+destType),this.destType=destType}utils.inherits(ConvertWorker,GenericWorker),ConvertWorker.prototype.processChunk=function(chunk){this.push({data:utils.transformTo(this.destType,chunk.data),meta:chunk.meta})},module.exports=ConvertWorker},{"../utils":32,"./GenericWorker":28}],25:[function(require,module,exports){"use strict";var GenericWorker=require("./GenericWorker"),crc32=require("../crc32");function Crc32Probe(){GenericWorker.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}require("../utils").inherits(Crc32Probe,GenericWorker),Crc32Probe.prototype.processChunk=function(chunk){this.streamInfo.crc32=crc32(chunk.data,this.streamInfo.crc32||0),this.push(chunk)},module.exports=Crc32Probe},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(require,module,exports){"use strict";var utils=require("../utils"),GenericWorker=require("./GenericWorker");function DataLengthProbe(propName){GenericWorker.call(this,"DataLengthProbe for "+propName),this.propName=propName,this.withStreamInfo(propName,0)}utils.inherits(DataLengthProbe,GenericWorker),DataLengthProbe.prototype.processChunk=function(chunk){chunk&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+chunk.data.length),GenericWorker.prototype.processChunk.call(this,chunk)},module.exports=DataLengthProbe},{"../utils":32,"./GenericWorker":28}],27:[function(require,module,exports){"use strict";var utils=require("../utils"),GenericWorker=require("./GenericWorker");function DataWorker(dataP){GenericWorker.call(this,"DataWorker");var self=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,dataP.then((function(data){self.dataIsReady=!0,self.data=data,self.max=data&&data.length||0,self.type=utils.getTypeOf(data),self.isPaused||self._tickAndRepeat()}),(function(e){self.error(e)}))}utils.inherits(DataWorker,GenericWorker),DataWorker.prototype.cleanUp=function(){GenericWorker.prototype.cleanUp.call(this),this.data=null},DataWorker.prototype.resume=function(){return!!GenericWorker.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,utils.delay(this._tickAndRepeat,[],this)),!0)},DataWorker.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(utils.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},DataWorker.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var data=null,nextIndex=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":data=this.data.substring(this.index,nextIndex);break;case"uint8array":data=this.data.subarray(this.index,nextIndex);break;case"array":case"nodebuffer":data=this.data.slice(this.index,nextIndex)}return this.index=nextIndex,this.push({data:data,meta:{percent:this.max?this.index/this.max*100:0}})},module.exports=DataWorker},{"../utils":32,"./GenericWorker":28}],28:[function(require,module,exports){"use strict";function GenericWorker(name){this.name=name||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}GenericWorker.prototype={push:function(chunk){this.emit("data",chunk)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(name,listener){return this._listeners[name].push(listener),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(name,arg){if(this._listeners[name])for(var i=0;i<this._listeners[name].length;i++)this._listeners[name][i].call(this,arg)},pipe:function(next){return next.registerPrevious(this)},registerPrevious:function(previous){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=previous.streamInfo,this.mergeStreamInfo(),this.previous=previous;var self=this;return previous.on("data",(function(chunk){self.processChunk(chunk)})),previous.on("end",(function(){self.end()})),previous.on("error",(function(e){self.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var withError=!1;return this.generatedError&&(this.error(this.generatedError),withError=!0),this.previous&&this.previous.resume(),!withError},flush:function(){},processChunk:function(chunk){this.push(chunk)},withStreamInfo:function(key,value){return this.extraStreamInfo[key]=value,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var key in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(key)&&(this.streamInfo[key]=this.extraStreamInfo[key])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var me="Worker "+this.name;return this.previous?this.previous+" -> "+me:me}},module.exports=GenericWorker},{}],29:[function(require,module,exports){"use strict";var utils=require("../utils"),ConvertWorker=require("./ConvertWorker"),GenericWorker=require("./GenericWorker"),base64=require("../base64"),support=require("../support"),external=require("../external"),NodejsStreamOutputAdapter=null;if(support.nodestream)try{NodejsStreamOutputAdapter=require("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function StreamHelper(worker,outputType,mimeType){var internalType=outputType;switch(outputType){case"blob":case"arraybuffer":internalType="uint8array";break;case"base64":internalType="string"}try{this._internalType=internalType,this._outputType=outputType,this._mimeType=mimeType,utils.checkSupport(internalType),this._worker=worker.pipe(new ConvertWorker(internalType)),worker.lock()}catch(e){this._worker=new GenericWorker("error"),this._worker.error(e)}}StreamHelper.prototype={accumulate:function(updateCb){return helper=this,updateCallback=updateCb,new external.Promise((function(resolve,reject){var dataArray=[],chunkType=helper._internalType,resultType=helper._outputType,mimeType=helper._mimeType;helper.on("data",(function(data,meta){dataArray.push(data),updateCallback&&updateCallback(meta)})).on("error",(function(err){dataArray=[],reject(err)})).on("end",(function(){try{var result=function(type,content,mimeType){switch(type){case"blob":return utils.newBlob(utils.transformTo("arraybuffer",content),mimeType);case"base64":return base64.encode(content);default:return utils.transformTo(type,content)}}(resultType,function(type,dataArray){var i,index=0,res=null,totalLength=0;for(i=0;i<dataArray.length;i++)totalLength+=dataArray[i].length;switch(type){case"string":return dataArray.join("");case"array":return Array.prototype.concat.apply([],dataArray);case"uint8array":for(res=new Uint8Array(totalLength),i=0;i<dataArray.length;i++)res.set(dataArray[i],index),index+=dataArray[i].length;return res;case"nodebuffer":return Buffer.concat(dataArray);default:throw new Error("concat : unsupported type '"+type+"'")}}(chunkType,dataArray),mimeType);resolve(result)}catch(e){reject(e)}dataArray=[]})).resume()}));var helper,updateCallback},on:function(evt,fn){var self=this;return this._worker.on(evt,"data"===evt?function(chunk){fn.call(self,chunk.data,chunk.meta)}:function(){utils.delay(fn,arguments,self)}),this},resume:function(){return utils.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(updateCb){if(utils.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new NodejsStreamOutputAdapter(this,{objectMode:"nodebuffer"!==this._outputType},updateCb)}},module.exports=StreamHelper},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(require,module,exports){"use strict";if(exports.base64=!0,exports.array=!0,exports.string=!0,exports.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,exports.nodebuffer="undefined"!=typeof Buffer,exports.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)exports.blob=!1;else{var buffer=new ArrayBuffer(0);try{exports.blob=0===new Blob([buffer],{type:"application/zip"}).size}catch(e){try{var builder=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);builder.append(buffer),exports.blob=0===builder.getBlob("application/zip").size}catch(e){exports.blob=!1}}}try{exports.nodestream=!!require("readable-stream").Readable}catch(e){exports.nodestream=!1}},{"readable-stream":16}],31:[function(require,module,exports){"use strict";for(var utils=require("./utils"),support=require("./support"),nodejsUtils=require("./nodejsUtils"),GenericWorker=require("./stream/GenericWorker"),_utf8len=new Array(256),i=0;i<256;i++)_utf8len[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;function Utf8DecodeWorker(){GenericWorker.call(this,"utf-8 decode"),this.leftOver=null}function Utf8EncodeWorker(){GenericWorker.call(this,"utf-8 encode")}_utf8len[254]=_utf8len[254]=1,exports.utf8encode=function(str){return support.nodebuffer?nodejsUtils.newBufferFrom(str,"utf-8"):function(str){var buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)55296==(64512&(c=str.charCodeAt(m_pos)))&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=support.uint8array?new Uint8Array(buf_len):new Array(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)55296==(64512&(c=str.charCodeAt(m_pos)))&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|63&c):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c);return buf}(str)},exports.utf8decode=function(buf){return support.nodebuffer?utils.transformTo("nodebuffer",buf).toString("utf-8"):function(buf){var i,out,c,c_len,len=buf.length,utf16buf=new Array(2*len);for(out=0,i=0;i<len;)if((c=buf[i++])<128)utf16buf[out++]=c;else if((c_len=_utf8len[c])>4)utf16buf[out++]=65533,i+=c_len-1;else{for(c&=2===c_len?31:3===c_len?15:7;c_len>1&&i<len;)c=c<<6|63&buf[i++],c_len--;c_len>1?utf16buf[out++]=65533:c<65536?utf16buf[out++]=c:(utf16buf[out++]=55296|(c-=65536)>>10&1023,utf16buf[out++]=56320|1023&c)}return utf16buf.length!==out&&(utf16buf.subarray?utf16buf=utf16buf.subarray(0,out):utf16buf.length=out),utils.applyFromCharCode(utf16buf)}(buf=utils.transformTo(support.uint8array?"uint8array":"array",buf))},utils.inherits(Utf8DecodeWorker,GenericWorker),Utf8DecodeWorker.prototype.processChunk=function(chunk){var data=utils.transformTo(support.uint8array?"uint8array":"array",chunk.data);if(this.leftOver&&this.leftOver.length){if(support.uint8array){var previousData=data;(data=new Uint8Array(previousData.length+this.leftOver.length)).set(this.leftOver,0),data.set(previousData,this.leftOver.length)}else data=this.leftOver.concat(data);this.leftOver=null}var nextBoundary=function(buf,max){var pos;for((max=max||buf.length)>buf.length&&(max=buf.length),pos=max-1;pos>=0&&128==(192&buf[pos]);)pos--;return pos<0||0===pos?max:pos+_utf8len[buf[pos]]>max?pos:max}(data),usableData=data;nextBoundary!==data.length&&(support.uint8array?(usableData=data.subarray(0,nextBoundary),this.leftOver=data.subarray(nextBoundary,data.length)):(usableData=data.slice(0,nextBoundary),this.leftOver=data.slice(nextBoundary,data.length))),this.push({data:exports.utf8decode(usableData),meta:chunk.meta})},Utf8DecodeWorker.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:exports.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},exports.Utf8DecodeWorker=Utf8DecodeWorker,utils.inherits(Utf8EncodeWorker,GenericWorker),Utf8EncodeWorker.prototype.processChunk=function(chunk){this.push({data:exports.utf8encode(chunk.data),meta:chunk.meta})},exports.Utf8EncodeWorker=Utf8EncodeWorker},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(require,module,exports){"use strict";var support=require("./support"),base64=require("./base64"),nodejsUtils=require("./nodejsUtils"),setImmediate=require("set-immediate-shim"),external=require("./external");function identity(input){return input}function stringToArrayLike(str,array){for(var i=0;i<str.length;++i)array[i]=255&str.charCodeAt(i);return array}exports.newBlob=function(part,type){exports.checkSupport("blob");try{return new Blob([part],{type:type})}catch(e){try{var builder=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return builder.append(part),builder.getBlob(type)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var arrayToStringHelper={stringifyByChunk:function(array,type,chunk){var result=[],k=0,len=array.length;if(len<=chunk)return String.fromCharCode.apply(null,array);for(;k<len;)result.push(String.fromCharCode.apply(null,"array"===type||"nodebuffer"===type?array.slice(k,Math.min(k+chunk,len)):array.subarray(k,Math.min(k+chunk,len)))),k+=chunk;return result.join("")},stringifyByChar:function(array){for(var resultStr="",i=0;i<array.length;i++)resultStr+=String.fromCharCode(array[i]);return resultStr},applyCanBeUsed:{uint8array:function(){try{return support.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return support.nodebuffer&&1===String.fromCharCode.apply(null,nodejsUtils.allocBuffer(1)).length}catch(e){return!1}}()}};function arrayLikeToString(array){var chunk=65536,type=exports.getTypeOf(array),canUseApply=!0;if("uint8array"===type?canUseApply=arrayToStringHelper.applyCanBeUsed.uint8array:"nodebuffer"===type&&(canUseApply=arrayToStringHelper.applyCanBeUsed.nodebuffer),canUseApply)for(;chunk>1;)try{return arrayToStringHelper.stringifyByChunk(array,type,chunk)}catch(e){chunk=Math.floor(chunk/2)}return arrayToStringHelper.stringifyByChar(array)}function arrayLikeToArrayLike(arrayFrom,arrayTo){for(var i=0;i<arrayFrom.length;i++)arrayTo[i]=arrayFrom[i];return arrayTo}exports.applyFromCharCode=arrayLikeToString;var transform={};transform.string={string:identity,array:function(input){return stringToArrayLike(input,new Array(input.length))},arraybuffer:function(input){return transform.string.uint8array(input).buffer},uint8array:function(input){return stringToArrayLike(input,new Uint8Array(input.length))},nodebuffer:function(input){return stringToArrayLike(input,nodejsUtils.allocBuffer(input.length))}},transform.array={string:arrayLikeToString,array:identity,arraybuffer:function(input){return new Uint8Array(input).buffer},uint8array:function(input){return new Uint8Array(input)},nodebuffer:function(input){return nodejsUtils.newBufferFrom(input)}},transform.arraybuffer={string:function(input){return arrayLikeToString(new Uint8Array(input))},array:function(input){return arrayLikeToArrayLike(new Uint8Array(input),new Array(input.byteLength))},arraybuffer:identity,uint8array:function(input){return new Uint8Array(input)},nodebuffer:function(input){return nodejsUtils.newBufferFrom(new Uint8Array(input))}},transform.uint8array={string:arrayLikeToString,array:function(input){return arrayLikeToArrayLike(input,new Array(input.length))},arraybuffer:function(input){return input.buffer},uint8array:identity,nodebuffer:function(input){return nodejsUtils.newBufferFrom(input)}},transform.nodebuffer={string:arrayLikeToString,array:function(input){return arrayLikeToArrayLike(input,new Array(input.length))},arraybuffer:function(input){return transform.nodebuffer.uint8array(input).buffer},uint8array:function(input){return arrayLikeToArrayLike(input,new Uint8Array(input.length))},nodebuffer:identity},exports.transformTo=function(outputType,input){if(input||(input=""),!outputType)return input;exports.checkSupport(outputType);var inputType=exports.getTypeOf(input);return transform[inputType][outputType](input)},exports.getTypeOf=function(input){return"string"==typeof input?"string":"[object Array]"===Object.prototype.toString.call(input)?"array":support.nodebuffer&&nodejsUtils.isBuffer(input)?"nodebuffer":support.uint8array&&input instanceof Uint8Array?"uint8array":support.arraybuffer&&input instanceof ArrayBuffer?"arraybuffer":void 0},exports.checkSupport=function(type){if(!support[type.toLowerCase()])throw new Error(type+" is not supported by this platform")},exports.MAX_VALUE_16BITS=65535,exports.MAX_VALUE_32BITS=-1,exports.pretty=function(str){var code,i,res="";for(i=0;i<(str||"").length;i++)res+="\\x"+((code=str.charCodeAt(i))<16?"0":"")+code.toString(16).toUpperCase();return res},exports.delay=function(callback,args,self){setImmediate((function(){callback.apply(self||null,args||[])}))},exports.inherits=function(ctor,superCtor){var Obj=function(){};Obj.prototype=superCtor.prototype,ctor.prototype=new Obj},exports.extend=function(){var i,attr,result={};for(i=0;i<arguments.length;i++)for(attr in arguments[i])arguments[i].hasOwnProperty(attr)&&void 0===result[attr]&&(result[attr]=arguments[i][attr]);return result},exports.prepareContent=function(name,inputData,isBinary,isOptimizedBinaryString,isBase64){return external.Promise.resolve(inputData).then((function(data){return support.blob&&(data instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(data)))&&"undefined"!=typeof FileReader?new external.Promise((function(resolve,reject){var reader=new FileReader;reader.onload=function(e){resolve(e.target.result)},reader.onerror=function(e){reject(e.target.error)},reader.readAsArrayBuffer(data)})):data})).then((function(data){var str,dataType=exports.getTypeOf(data);return dataType?("arraybuffer"===dataType?data=exports.transformTo("uint8array",data):"string"===dataType&&(isBase64?data=base64.decode(data):isBinary&&!0!==isOptimizedBinaryString&&(data=stringToArrayLike(str=data,support.uint8array?new Uint8Array(str.length):new Array(str.length)))),data):external.Promise.reject(new Error("Can't read the data of '"+name+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(require,module,exports){"use strict";var readerFor=require("./reader/readerFor"),utils=require("./utils"),sig=require("./signature"),ZipEntry=require("./zipEntry"),support=(require("./utf8"),require("./support"));function ZipEntries(loadOptions){this.files=[],this.loadOptions=loadOptions}ZipEntries.prototype={checkSignature:function(expectedSignature){if(!this.reader.readAndCheckSignature(expectedSignature)){this.reader.index-=4;var signature=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+utils.pretty(signature)+", expected "+utils.pretty(expectedSignature)+")")}},isSignature:function(askedIndex,expectedSignature){var currentIndex=this.reader.index;this.reader.setIndex(askedIndex);var result=this.reader.readString(4)===expectedSignature;return this.reader.setIndex(currentIndex),result},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var zipComment=this.reader.readData(this.zipCommentLength),decodeContent=utils.transformTo(support.uint8array?"uint8array":"array",zipComment);this.zipComment=this.loadOptions.decodeFileName(decodeContent)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var extraFieldId,extraFieldLength,extraFieldValue,extraDataSize=this.zip64EndOfCentralSize-44;0<extraDataSize;)extraFieldId=this.reader.readInt(2),extraFieldLength=this.reader.readInt(4),extraFieldValue=this.reader.readData(extraFieldLength),this.zip64ExtensibleData[extraFieldId]={id:extraFieldId,length:extraFieldLength,value:extraFieldValue}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var i,file;for(i=0;i<this.files.length;i++)this.reader.setIndex((file=this.files[i]).localHeaderOffset),this.checkSignature(sig.LOCAL_FILE_HEADER),file.readLocalPart(this.reader),file.handleUTF8(),file.processAttributes()},readCentralDir:function(){var file;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(sig.CENTRAL_FILE_HEADER);)(file=new ZipEntry({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(file);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var offset=this.reader.lastIndexOfSignature(sig.CENTRAL_DIRECTORY_END);if(offset<0)throw this.isSignature(0,sig.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(offset);var endOfCentralDirOffset=offset;if(this.checkSignature(sig.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===utils.MAX_VALUE_16BITS||this.diskWithCentralDirStart===utils.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===utils.MAX_VALUE_16BITS||this.centralDirRecords===utils.MAX_VALUE_16BITS||this.centralDirSize===utils.MAX_VALUE_32BITS||this.centralDirOffset===utils.MAX_VALUE_32BITS){if(this.zip64=!0,(offset=this.reader.lastIndexOfSignature(sig.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(offset),this.checkSignature(sig.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,sig.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(sig.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(sig.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var expectedEndOfCentralDirOffset=this.centralDirOffset+this.centralDirSize;this.zip64&&(expectedEndOfCentralDirOffset+=20,expectedEndOfCentralDirOffset+=12+this.zip64EndOfCentralSize);var extraBytes=endOfCentralDirOffset-expectedEndOfCentralDirOffset;if(extraBytes>0)this.isSignature(endOfCentralDirOffset,sig.CENTRAL_FILE_HEADER)||(this.reader.zero=extraBytes);else if(extraBytes<0)throw new Error("Corrupted zip: missing "+Math.abs(extraBytes)+" bytes.")},prepareReader:function(data){this.reader=readerFor(data)},load:function(data){this.prepareReader(data),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},module.exports=ZipEntries},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(require,module,exports){"use strict";var readerFor=require("./reader/readerFor"),utils=require("./utils"),CompressedObject=require("./compressedObject"),crc32fn=require("./crc32"),utf8=require("./utf8"),compressions=require("./compressions"),support=require("./support");function ZipEntry(options,loadOptions){this.options=options,this.loadOptions=loadOptions}ZipEntry.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(reader){var compression,localExtraFieldsLength;if(reader.skip(22),this.fileNameLength=reader.readInt(2),localExtraFieldsLength=reader.readInt(2),this.fileName=reader.readData(this.fileNameLength),reader.skip(localExtraFieldsLength),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(compression=function(compressionMethod){for(var method in compressions)if(compressions.hasOwnProperty(method)&&compressions[method].magic===compressionMethod)return compressions[method];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+utils.pretty(this.compressionMethod)+" unknown (inner file : "+utils.transformTo("string",this.fileName)+")");this.decompressed=new CompressedObject(this.compressedSize,this.uncompressedSize,this.crc32,compression,reader.readData(this.compressedSize))},readCentralPart:function(reader){this.versionMadeBy=reader.readInt(2),reader.skip(2),this.bitFlag=reader.readInt(2),this.compressionMethod=reader.readString(2),this.date=reader.readDate(),this.crc32=reader.readInt(4),this.compressedSize=reader.readInt(4),this.uncompressedSize=reader.readInt(4);var fileNameLength=reader.readInt(2);if(this.extraFieldsLength=reader.readInt(2),this.fileCommentLength=reader.readInt(2),this.diskNumberStart=reader.readInt(2),this.internalFileAttributes=reader.readInt(2),this.externalFileAttributes=reader.readInt(4),this.localHeaderOffset=reader.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");reader.skip(fileNameLength),this.readExtraFields(reader),this.parseZIP64ExtraField(reader),this.fileComment=reader.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var madeBy=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===madeBy&&(this.dosPermissions=63&this.externalFileAttributes),3===madeBy&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(reader){if(this.extraFields[1]){var extraReader=readerFor(this.extraFields[1].value);this.uncompressedSize===utils.MAX_VALUE_32BITS&&(this.uncompressedSize=extraReader.readInt(8)),this.compressedSize===utils.MAX_VALUE_32BITS&&(this.compressedSize=extraReader.readInt(8)),this.localHeaderOffset===utils.MAX_VALUE_32BITS&&(this.localHeaderOffset=extraReader.readInt(8)),this.diskNumberStart===utils.MAX_VALUE_32BITS&&(this.diskNumberStart=extraReader.readInt(4))}},readExtraFields:function(reader){var extraFieldId,extraFieldLength,extraFieldValue,end=reader.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});reader.index+4<end;)extraFieldId=reader.readInt(2),extraFieldLength=reader.readInt(2),extraFieldValue=reader.readData(extraFieldLength),this.extraFields[extraFieldId]={id:extraFieldId,length:extraFieldLength,value:extraFieldValue};reader.setIndex(end)},handleUTF8:function(){var decodeParamType=support.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=utf8.utf8decode(this.fileName),this.fileCommentStr=utf8.utf8decode(this.fileComment);else{var upath=this.findExtraFieldUnicodePath();if(null!==upath)this.fileNameStr=upath;else{var fileNameByteArray=utils.transformTo(decodeParamType,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(fileNameByteArray)}var ucomment=this.findExtraFieldUnicodeComment();if(null!==ucomment)this.fileCommentStr=ucomment;else{var commentByteArray=utils.transformTo(decodeParamType,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(commentByteArray)}}},findExtraFieldUnicodePath:function(){var upathField=this.extraFields[28789];if(upathField){var extraReader=readerFor(upathField.value);return 1!==extraReader.readInt(1)||crc32fn(this.fileName)!==extraReader.readInt(4)?null:utf8.utf8decode(extraReader.readData(upathField.length-5))}return null},findExtraFieldUnicodeComment:function(){var ucommentField=this.extraFields[25461];if(ucommentField){var extraReader=readerFor(ucommentField.value);return 1!==extraReader.readInt(1)||crc32fn(this.fileComment)!==extraReader.readInt(4)?null:utf8.utf8decode(extraReader.readData(ucommentField.length-5))}return null}},module.exports=ZipEntry},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(require,module,exports){"use strict";var StreamHelper=require("./stream/StreamHelper"),DataWorker=require("./stream/DataWorker"),utf8=require("./utf8"),CompressedObject=require("./compressedObject"),GenericWorker=require("./stream/GenericWorker"),ZipObject=function(name,data,options){this.name=name,this.dir=options.dir,this.date=options.date,this.comment=options.comment,this.unixPermissions=options.unixPermissions,this.dosPermissions=options.dosPermissions,this._data=data,this._dataBinary=options.binary,this.options={compression:options.compression,compressionOptions:options.compressionOptions}};ZipObject.prototype={internalStream:function(type){var result=null,outputType="string";try{if(!type)throw new Error("No output type specified.");var askUnicodeString="string"===(outputType=type.toLowerCase())||"text"===outputType;"binarystring"!==outputType&&"text"!==outputType||(outputType="string"),result=this._decompressWorker();var isUnicodeString=!this._dataBinary;isUnicodeString&&!askUnicodeString&&(result=result.pipe(new utf8.Utf8EncodeWorker)),!isUnicodeString&&askUnicodeString&&(result=result.pipe(new utf8.Utf8DecodeWorker))}catch(e){(result=new GenericWorker("error")).error(e)}return new StreamHelper(result,outputType,"")},async:function(type,onUpdate){return this.internalStream(type).accumulate(onUpdate)},nodeStream:function(type,onUpdate){return this.internalStream(type||"nodebuffer").toNodejsStream(onUpdate)},_compressWorker:function(compression,compressionOptions){if(this._data instanceof CompressedObject&&this._data.compression.magic===compression.magic)return this._data.getCompressedWorker();var result=this._decompressWorker();return this._dataBinary||(result=result.pipe(new utf8.Utf8EncodeWorker)),CompressedObject.createWorkerFrom(result,compression,compressionOptions)},_decompressWorker:function(){return this._data instanceof CompressedObject?this._data.getContentWorker():this._data instanceof GenericWorker?this._data:new DataWorker(this._data)}};for(var removedMethods=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],removedFn=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},i=0;i<removedMethods.length;i++)ZipObject.prototype[removedMethods[i]]=removedFn;module.exports=ZipObject},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(require,module,exports){(function(global){"use strict";var scheduleDrain,draining,Mutation=global.MutationObserver||global.WebKitMutationObserver;if(Mutation){var called=0,observer=new Mutation(nextTick),element=global.document.createTextNode("");observer.observe(element,{characterData:!0}),scheduleDrain=function(){element.data=called=++called%2}}else if(global.setImmediate||void 0===global.MessageChannel)scheduleDrain="document"in global&&"onreadystatechange"in global.document.createElement("script")?function(){var scriptEl=global.document.createElement("script");scriptEl.onreadystatechange=function(){nextTick(),scriptEl.onreadystatechange=null,scriptEl.parentNode.removeChild(scriptEl),scriptEl=null},global.document.documentElement.appendChild(scriptEl)}:function(){setTimeout(nextTick,0)};else{var channel=new global.MessageChannel;channel.port1.onmessage=nextTick,scheduleDrain=function(){channel.port2.postMessage(0)}}var queue=[];function nextTick(){var i,oldQueue;draining=!0;for(var len=queue.length;len;){for(oldQueue=queue,queue=[],i=-1;++i<len;)oldQueue[i]();len=queue.length}draining=!1}module.exports=function(task){1!==queue.push(task)||draining||scheduleDrain()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(require,module,exports){"use strict";var immediate=require("immediate");function INTERNAL(){}var handlers={},REJECTED=["REJECTED"],FULFILLED=["FULFILLED"],PENDING=["PENDING"];function Promise(resolver){if("function"!=typeof resolver)throw new TypeError("resolver must be a function");this.state=PENDING,this.queue=[],this.outcome=void 0,resolver!==INTERNAL&&safelyResolveThenable(this,resolver)}function QueueItem(promise,onFulfilled,onRejected){this.promise=promise,"function"==typeof onFulfilled&&(this.onFulfilled=onFulfilled,this.callFulfilled=this.otherCallFulfilled),"function"==typeof onRejected&&(this.onRejected=onRejected,this.callRejected=this.otherCallRejected)}function unwrap(promise,func,value){immediate((function(){var returnValue;try{returnValue=func(value)}catch(e){return handlers.reject(promise,e)}returnValue===promise?handlers.reject(promise,new TypeError("Cannot resolve promise with itself")):handlers.resolve(promise,returnValue)}))}function getThen(obj){var then=obj&&obj.then;if(obj&&("object"==typeof obj||"function"==typeof obj)&&"function"==typeof then)return function(){then.apply(obj,arguments)}}function safelyResolveThenable(self,thenable){var called=!1;function onError(value){called||(called=!0,handlers.reject(self,value))}function onSuccess(value){called||(called=!0,handlers.resolve(self,value))}var result=tryCatch((function(){thenable(onSuccess,onError)}));"error"===result.status&&onError(result.value)}function tryCatch(func,value){var out={};try{out.value=func(value),out.status="success"}catch(e){out.status="error",out.value=e}return out}module.exports=Promise,Promise.prototype.finally=function(callback){if("function"!=typeof callback)return this;var p=this.constructor;return this.then((function(value){return p.resolve(callback()).then((function(){return value}))}),(function(reason){return p.resolve(callback()).then((function(){throw reason}))}))},Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){if("function"!=typeof onFulfilled&&this.state===FULFILLED||"function"!=typeof onRejected&&this.state===REJECTED)return this;var promise=new this.constructor(INTERNAL);return this.state!==PENDING?unwrap(promise,this.state===FULFILLED?onFulfilled:onRejected,this.outcome):this.queue.push(new QueueItem(promise,onFulfilled,onRejected)),promise},QueueItem.prototype.callFulfilled=function(value){handlers.resolve(this.promise,value)},QueueItem.prototype.otherCallFulfilled=function(value){unwrap(this.promise,this.onFulfilled,value)},QueueItem.prototype.callRejected=function(value){handlers.reject(this.promise,value)},QueueItem.prototype.otherCallRejected=function(value){unwrap(this.promise,this.onRejected,value)},handlers.resolve=function(self,value){var result=tryCatch(getThen,value);if("error"===result.status)return handlers.reject(self,result.value);var thenable=result.value;if(thenable)safelyResolveThenable(self,thenable);else{self.state=FULFILLED,self.outcome=value;for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callFulfilled(value)}return self},handlers.reject=function(self,error){self.state=REJECTED,self.outcome=error;for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callRejected(error);return self},Promise.resolve=function(value){return value instanceof this?value:handlers.resolve(new this(INTERNAL),value)},Promise.reject=function(reason){var promise=new this(INTERNAL);return handlers.reject(promise,reason)},Promise.all=function(iterable){var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var values=new Array(len),resolved=0,i=-1,promise=new this(INTERNAL);++i<len;)allResolver(iterable[i],i);return promise;function allResolver(value,i){self.resolve(value).then((function(outValue){values[i]=outValue,++resolved!==len||called||(called=!0,handlers.resolve(promise,values))}),(function(error){called||(called=!0,handlers.reject(promise,error))}))}},Promise.race=function(iterable){if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var i=-1,promise=new this(INTERNAL);++i<len;)this.resolve(iterable[i]).then((function(response){called||(called=!0,handlers.resolve(promise,response))}),(function(error){called||(called=!0,handlers.reject(promise,error))}));return promise}},{immediate:36}],38:[function(require,module,exports){"use strict";var pako={};(0,require("./lib/utils/common").assign)(pako,require("./lib/deflate"),require("./lib/inflate"),require("./lib/zlib/constants")),module.exports=pako},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(require,module,exports){"use strict";var zlib_deflate=require("./zlib/deflate"),utils=require("./utils/common"),strings=require("./utils/strings"),msg=require("./zlib/messages"),ZStream=require("./zlib/zstream"),toString=Object.prototype.toString;function Deflate(options){if(!(this instanceof Deflate))return new Deflate(options);this.options=utils.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},options||{});var opt=this.options;opt.raw&&opt.windowBits>0?opt.windowBits=-opt.windowBits:opt.gzip&&opt.windowBits>0&&opt.windowBits<16&&(opt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var status=zlib_deflate.deflateInit2(this.strm,opt.level,opt.method,opt.windowBits,opt.memLevel,opt.strategy);if(0!==status)throw new Error(msg[status]);if(opt.header&&zlib_deflate.deflateSetHeader(this.strm,opt.header),opt.dictionary){var dict;if(dict="string"==typeof opt.dictionary?strings.string2buf(opt.dictionary):"[object ArrayBuffer]"===toString.call(opt.dictionary)?new Uint8Array(opt.dictionary):opt.dictionary,0!==(status=zlib_deflate.deflateSetDictionary(this.strm,dict)))throw new Error(msg[status]);this._dict_set=!0}}function deflate(input,options){var deflator=new Deflate(options);if(deflator.push(input,!0),deflator.err)throw deflator.msg||msg[deflator.err];return deflator.result}Deflate.prototype.push=function(data,mode){var status,_mode,strm=this.strm,chunkSize=this.options.chunkSize;if(this.ended)return!1;_mode=mode===~~mode?mode:!0===mode?4:0,strm.input="string"==typeof data?strings.string2buf(data):"[object ArrayBuffer]"===toString.call(data)?new Uint8Array(data):data,strm.next_in=0,strm.avail_in=strm.input.length;do{if(0===strm.avail_out&&(strm.output=new utils.Buf8(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),1!==(status=zlib_deflate.deflate(strm,_mode))&&0!==status)return this.onEnd(status),this.ended=!0,!1;0!==strm.avail_out&&(0!==strm.avail_in||4!==_mode&&2!==_mode)||this.onData("string"===this.options.to?strings.buf2binstring(utils.shrinkBuf(strm.output,strm.next_out)):utils.shrinkBuf(strm.output,strm.next_out))}while((strm.avail_in>0||0===strm.avail_out)&&1!==status);return 4===_mode?(status=zlib_deflate.deflateEnd(this.strm),this.onEnd(status),this.ended=!0,0===status):2!==_mode||(this.onEnd(0),strm.avail_out=0,!0)},Deflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Deflate.prototype.onEnd=function(status){0===status&&(this.result="string"===this.options.to?this.chunks.join(""):utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg},exports.Deflate=Deflate,exports.deflate=deflate,exports.deflateRaw=function(input,options){return(options=options||{}).raw=!0,deflate(input,options)},exports.gzip=function(input,options){return(options=options||{}).gzip=!0,deflate(input,options)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(require,module,exports){"use strict";var zlib_inflate=require("./zlib/inflate"),utils=require("./utils/common"),strings=require("./utils/strings"),c=require("./zlib/constants"),msg=require("./zlib/messages"),ZStream=require("./zlib/zstream"),GZheader=require("./zlib/gzheader"),toString=Object.prototype.toString;function Inflate(options){if(!(this instanceof Inflate))return new Inflate(options);this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},options||{});var opt=this.options;opt.raw&&opt.windowBits>=0&&opt.windowBits<16&&(opt.windowBits=-opt.windowBits,0===opt.windowBits&&(opt.windowBits=-15)),!(opt.windowBits>=0&&opt.windowBits<16)||options&&options.windowBits||(opt.windowBits+=32),opt.windowBits>15&&opt.windowBits<48&&0==(15&opt.windowBits)&&(opt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var status=zlib_inflate.inflateInit2(this.strm,opt.windowBits);if(status!==c.Z_OK)throw new Error(msg[status]);this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header)}function inflate(input,options){var inflator=new Inflate(options);if(inflator.push(input,!0),inflator.err)throw inflator.msg||msg[inflator.err];return inflator.result}Inflate.prototype.push=function(data,mode){var status,_mode,next_out_utf8,tail,utf8str,dict,strm=this.strm,chunkSize=this.options.chunkSize,dictionary=this.options.dictionary,allowBufError=!1;if(this.ended)return!1;_mode=mode===~~mode?mode:!0===mode?c.Z_FINISH:c.Z_NO_FLUSH,strm.input="string"==typeof data?strings.binstring2buf(data):"[object ArrayBuffer]"===toString.call(data)?new Uint8Array(data):data,strm.next_in=0,strm.avail_in=strm.input.length;do{if(0===strm.avail_out&&(strm.output=new utils.Buf8(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),(status=zlib_inflate.inflate(strm,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&dictionary&&(dict="string"==typeof dictionary?strings.string2buf(dictionary):"[object ArrayBuffer]"===toString.call(dictionary)?new Uint8Array(dictionary):dictionary,status=zlib_inflate.inflateSetDictionary(this.strm,dict)),status===c.Z_BUF_ERROR&&!0===allowBufError&&(status=c.Z_OK,allowBufError=!1),status!==c.Z_STREAM_END&&status!==c.Z_OK)return this.onEnd(status),this.ended=!0,!1;strm.next_out&&(0!==strm.avail_out&&status!==c.Z_STREAM_END&&(0!==strm.avail_in||_mode!==c.Z_FINISH&&_mode!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(next_out_utf8=strings.utf8border(strm.output,strm.next_out),tail=strm.next_out-next_out_utf8,utf8str=strings.buf2string(strm.output,next_out_utf8),strm.next_out=tail,strm.avail_out=chunkSize-tail,tail&&utils.arraySet(strm.output,strm.output,next_out_utf8,tail,0),this.onData(utf8str)):this.onData(utils.shrinkBuf(strm.output,strm.next_out)))),0===strm.avail_in&&0===strm.avail_out&&(allowBufError=!0)}while((strm.avail_in>0||0===strm.avail_out)&&status!==c.Z_STREAM_END);return status===c.Z_STREAM_END&&(_mode=c.Z_FINISH),_mode===c.Z_FINISH?(status=zlib_inflate.inflateEnd(this.strm),this.onEnd(status),this.ended=!0,status===c.Z_OK):_mode!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),strm.avail_out=0,!0)},Inflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Inflate.prototype.onEnd=function(status){status===c.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg},exports.Inflate=Inflate,exports.inflate=inflate,exports.inflateRaw=function(input,options){return(options=options||{}).raw=!0,inflate(input,options)},exports.ungzip=inflate},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(require,module,exports){"use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;exports.assign=function(obj){for(var sources=Array.prototype.slice.call(arguments,1);sources.length;){var source=sources.shift();if(source){if("object"!=typeof source)throw new TypeError(source+"must be non-object");for(var p in source)source.hasOwnProperty(p)&&(obj[p]=source[p])}}return obj},exports.shrinkBuf=function(buf,size){return buf.length===size?buf:buf.subarray?buf.subarray(0,size):(buf.length=size,buf)};var fnTyped={arraySet:function(dest,src,src_offs,len,dest_offs){if(src.subarray&&dest.subarray)dest.set(src.subarray(src_offs,src_offs+len),dest_offs);else for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){var i,l,len,pos,chunk,result;for(len=0,i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;for(result=new Uint8Array(len),pos=0,i=0,l=chunks.length;i<l;i++)result.set(chunk=chunks[i],pos),pos+=chunk.length;return result}},fnUntyped={arraySet:function(dest,src,src_offs,len,dest_offs){for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){return[].concat.apply([],chunks)}};exports.setTyped=function(on){on?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK)},{}],42:[function(require,module,exports){"use strict";var utils=require("./common"),STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(__){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;function buf2binstring(buf,len){if(len<65537&&(buf.subarray&&STR_APPLY_UIA_OK||!buf.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils.shrinkBuf(buf,len));for(var result="",i=0;i<len;i++)result+=String.fromCharCode(buf[i]);return result}_utf8len[254]=_utf8len[254]=1,exports.string2buf=function(str){var buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)55296==(64512&(c=str.charCodeAt(m_pos)))&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=new utils.Buf8(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)55296==(64512&(c=str.charCodeAt(m_pos)))&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|63&c):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c);return buf},exports.buf2binstring=function(buf){return buf2binstring(buf,buf.length)},exports.binstring2buf=function(str){for(var buf=new utils.Buf8(str.length),i=0,len=buf.length;i<len;i++)buf[i]=str.charCodeAt(i);return buf},exports.buf2string=function(buf,max){var i,out,c,c_len,len=max||buf.length,utf16buf=new Array(2*len);for(out=0,i=0;i<len;)if((c=buf[i++])<128)utf16buf[out++]=c;else if((c_len=_utf8len[c])>4)utf16buf[out++]=65533,i+=c_len-1;else{for(c&=2===c_len?31:3===c_len?15:7;c_len>1&&i<len;)c=c<<6|63&buf[i++],c_len--;c_len>1?utf16buf[out++]=65533:c<65536?utf16buf[out++]=c:(utf16buf[out++]=55296|(c-=65536)>>10&1023,utf16buf[out++]=56320|1023&c)}return buf2binstring(utf16buf,out)},exports.utf8border=function(buf,max){var pos;for((max=max||buf.length)>buf.length&&(max=buf.length),pos=max-1;pos>=0&&128==(192&buf[pos]);)pos--;return pos<0||0===pos?max:pos+_utf8len[buf[pos]]>max?pos:max}},{"./common":41}],43:[function(require,module,exports){"use strict";module.exports=function(adler,buf,len,pos){for(var s1=65535&adler|0,s2=adler>>>16&65535|0,n=0;0!==len;){len-=n=len>2e3?2e3:len;do{s2=s2+(s1=s1+buf[pos++]|0)|0}while(--n);s1%=65521,s2%=65521}return s1|s2<<16|0}},{}],44:[function(require,module,exports){"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(require,module,exports){"use strict";var crcTable=function(){for(var c,table=[],n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=1&c?3988292384^c>>>1:c>>>1;table[n]=c}return table}();module.exports=function(crc,buf,len,pos){var t=crcTable,end=pos+len;crc^=-1;for(var i=pos;i<end;i++)crc=crc>>>8^t[255&(crc^buf[i])];return-1^crc}},{}],46:[function(require,module,exports){"use strict";var configuration_table,utils=require("../utils/common"),trees=require("./trees"),adler32=require("./adler32"),crc32=require("./crc32"),msg=require("./messages");function err(strm,errorCode){return strm.msg=msg[errorCode],errorCode}function rank(f){return(f<<1)-(f>4?9:0)}function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}function flush_pending(strm){var s=strm.state,len=s.pending;len>strm.avail_out&&(len=strm.avail_out),0!==len&&(utils.arraySet(strm.output,s.pending_buf,s.pending_out,len,strm.next_out),strm.next_out+=len,s.pending_out+=len,strm.total_out+=len,strm.avail_out-=len,s.pending-=len,0===s.pending&&(s.pending_out=0))}function flush_block_only(s,last){trees._tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last),s.block_start=s.strstart,flush_pending(s.strm)}function put_byte(s,b){s.pending_buf[s.pending++]=b}function putShortMSB(s,b){s.pending_buf[s.pending++]=b>>>8&255,s.pending_buf[s.pending++]=255&b}function longest_match(s,cur_match){var match,len,chain_length=s.max_chain_length,scan=s.strstart,best_len=s.prev_length,nice_match=s.nice_match,limit=s.strstart>s.w_size-262?s.strstart-(s.w_size-262):0,_win=s.window,wmask=s.w_mask,prev=s.prev,strend=s.strstart+258,scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len];s.prev_length>=s.good_match&&(chain_length>>=2),nice_match>s.lookahead&&(nice_match=s.lookahead);do{if(_win[(match=cur_match)+best_len]===scan_end&&_win[match+best_len-1]===scan_end1&&_win[match]===_win[scan]&&_win[++match]===_win[scan+1]){scan+=2,match++;do{}while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);if(len=258-(strend-scan),scan=strend-258,len>best_len){if(s.match_start=cur_match,best_len=len,len>=nice_match)break;scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len]}}}while((cur_match=prev[cur_match&wmask])>limit&&0!=--chain_length);return best_len<=s.lookahead?best_len:s.lookahead}function fill_window(s){var p,n,m,more,str,strm,buf,start,size,len,_w_size=s.w_size;do{if(more=s.window_size-s.lookahead-s.strstart,s.strstart>=_w_size+(_w_size-262)){utils.arraySet(s.window,s.window,_w_size,_w_size,0),s.match_start-=_w_size,s.strstart-=_w_size,s.block_start-=_w_size,p=n=s.hash_size;do{m=s.head[--p],s.head[p]=m>=_w_size?m-_w_size:0}while(--n);p=n=_w_size;do{m=s.prev[--p],s.prev[p]=m>=_w_size?m-_w_size:0}while(--n);more+=_w_size}if(0===s.strm.avail_in)break;if(buf=s.window,start=s.strstart+s.lookahead,len=void 0,(len=(strm=s.strm).avail_in)>(size=more)&&(len=size),n=0===len?0:(strm.avail_in-=len,utils.arraySet(buf,strm.input,strm.next_in,len,start),1===strm.state.wrap?strm.adler=adler32(strm.adler,buf,len,start):2===strm.state.wrap&&(strm.adler=crc32(strm.adler,buf,len,start)),strm.next_in+=len,strm.total_in+=len,len),s.lookahead+=n,s.lookahead+s.insert>=3)for(s.ins_h=s.window[str=s.strstart-s.insert],s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+3-1])&s.hash_mask,s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++,s.insert--,!(s.lookahead+s.insert<3)););}while(s.lookahead<262&&0!==s.strm.avail_in)}function deflate_fast(s,flush){for(var hash_head,bflush;;){if(s.lookahead<262){if(fill_window(s),s.lookahead<262&&0===flush)return 1;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=3&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+3-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),0!==hash_head&&s.strstart-hash_head<=s.w_size-262&&(s.match_length=longest_match(s,hash_head)),s.match_length>=3)if(bflush=trees._tr_tally(s,s.strstart-s.match_start,s.match_length-3),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=3){s.match_length--;do{s.strstart++,s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+3-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart}while(0!=--s.match_length);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask;else bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=s.strstart<2?s.strstart:2,4===flush?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2}function deflate_slow(s,flush){for(var hash_head,bflush,max_insert;;){if(s.lookahead<262){if(fill_window(s),s.lookahead<262&&0===flush)return 1;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=3&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+3-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=2,0!==hash_head&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-262&&(s.match_length=longest_match(s,hash_head),s.match_length<=5&&(1===s.strategy||3===s.match_length&&s.strstart-s.match_start>4096)&&(s.match_length=2)),s.prev_length>=3&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-3,bflush=trees._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-3),s.lookahead-=s.prev_length-1,s.prev_length-=2;do{++s.strstart<=max_insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+3-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart)}while(0!=--s.prev_length);if(s.match_available=0,s.match_length=2,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}else if(s.match_available){if((bflush=trees._tr_tally(s,0,s.window[s.strstart-1]))&&flush_block_only(s,!1),s.strstart++,s.lookahead--,0===s.strm.avail_out)return 1}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(bflush=trees._tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<2?s.strstart:2,4===flush?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2}function Config(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length,this.max_lazy=max_lazy,this.nice_length=nice_length,this.max_chain=max_chain,this.func=func}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils.Buf16(1146),this.dyn_dtree=new utils.Buf16(122),this.bl_tree=new utils.Buf16(78),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils.Buf16(16),this.heap=new utils.Buf16(573),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils.Buf16(573),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(strm){var s;return strm&&strm.state?(strm.total_in=strm.total_out=0,strm.data_type=2,(s=strm.state).pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap?42:113,strm.adler=2===s.wrap?0:1,s.last_flush=0,trees._tr_init(s),0):err(strm,-2)}function deflateReset(strm){var s,ret=deflateResetKeep(strm);return 0===ret&&((s=strm.state).window_size=2*s.w_size,zero(s.head),s.max_lazy_match=configuration_table[s.level].max_lazy,s.good_match=configuration_table[s.level].good_length,s.nice_match=configuration_table[s.level].nice_length,s.max_chain_length=configuration_table[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0),ret}function deflateInit2(strm,level,method,windowBits,memLevel,strategy){if(!strm)return-2;var wrap=1;if(-1===level&&(level=6),windowBits<0?(wrap=0,windowBits=-windowBits):windowBits>15&&(wrap=2,windowBits-=16),memLevel<1||memLevel>9||8!==method||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>4)return err(strm,-2);8===windowBits&&(windowBits=9);var s=new DeflateState;return strm.state=s,s.strm=strm,s.wrap=wrap,s.gzhead=null,s.w_bits=windowBits,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=memLevel+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new utils.Buf8(2*s.w_size),s.head=new utils.Buf16(s.hash_size),s.prev=new utils.Buf16(s.w_size),s.lit_bufsize=1<<memLevel+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new utils.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=level,s.strategy=strategy,s.method=method,deflateReset(strm)}configuration_table=[new Config(0,0,0,0,(function(s,flush){var max_block_size=65535;for(max_block_size>s.pending_buf_size-5&&(max_block_size=s.pending_buf_size-5);;){if(s.lookahead<=1){if(fill_window(s),0===s.lookahead&&0===flush)return 1;if(0===s.lookahead)break}s.strstart+=s.lookahead,s.lookahead=0;var max_start=s.block_start+max_block_size;if((0===s.strstart||s.strstart>=max_start)&&(s.lookahead=s.strstart-max_start,s.strstart=max_start,flush_block_only(s,!1),0===s.strm.avail_out))return 1;if(s.strstart-s.block_start>=s.w_size-262&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=0,4===flush?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):(s.strstart>s.block_start&&flush_block_only(s,!1),1)})),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],exports.deflateInit=function(strm,level){return deflateInit2(strm,level,8,15,8,0)},exports.deflateInit2=deflateInit2,exports.deflateReset=deflateReset,exports.deflateResetKeep=deflateResetKeep,exports.deflateSetHeader=function(strm,head){return strm&&strm.state?2!==strm.state.wrap?-2:(strm.state.gzhead=head,0):-2},exports.deflate=function(strm,flush){var old_flush,s,beg,val;if(!strm||!strm.state||flush>5||flush<0)return strm?err(strm,-2):-2;if(s=strm.state,!strm.output||!strm.input&&0!==strm.avail_in||666===s.status&&4!==flush)return err(strm,0===strm.avail_out?-5:-2);if(s.strm=strm,old_flush=s.last_flush,s.last_flush=flush,42===s.status)if(2===s.wrap)strm.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead?(put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,255&s.gzhead.time),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),put_byte(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,255&s.gzhead.extra.length),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),put_byte(s,3),s.status=113);else{var header=8+(s.w_bits-8<<4)<<8;header|=(s.strategy>=2||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(header|=32),header+=31-header%31,s.status=113,putShortMSB(s,header),0!==s.strstart&&(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),strm.adler=1}if(69===s.status)if(s.gzhead.extra){for(beg=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending!==s.pending_buf_size));)put_byte(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),0===val&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),0===val&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&flush_pending(strm),s.pending+2<=s.pending_buf_size&&(put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),strm.adler=0,s.status=113)):s.status=113),0!==s.pending){if(flush_pending(strm),0===strm.avail_out)return s.last_flush=-1,0}else if(0===strm.avail_in&&rank(flush)<=rank(old_flush)&&4!==flush)return err(strm,-5);if(666===s.status&&0!==strm.avail_in)return err(strm,-5);if(0!==strm.avail_in||0!==s.lookahead||0!==flush&&666!==s.status){var bstate=2===s.strategy?function(s,flush){for(var bflush;;){if(0===s.lookahead&&(fill_window(s),0===s.lookahead)){if(0===flush)return 1;break}if(s.match_length=0,bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=0,4===flush?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2}(s,flush):3===s.strategy?function(s,flush){for(var bflush,prev,scan,strend,_win=s.window;;){if(s.lookahead<=258){if(fill_window(s),s.lookahead<=258&&0===flush)return 1;if(0===s.lookahead)break}if(s.match_length=0,s.lookahead>=3&&s.strstart>0&&(prev=_win[scan=s.strstart-1])===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]){strend=s.strstart+258;do{}while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=258-(strend-scan),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=3?(bflush=trees._tr_tally(s,1,s.match_length-3),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=0,4===flush?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2}(s,flush):configuration_table[s.level].func(s,flush);if(3!==bstate&&4!==bstate||(s.status=666),1===bstate||3===bstate)return 0===strm.avail_out&&(s.last_flush=-1),0;if(2===bstate&&(1===flush?trees._tr_align(s):5!==flush&&(trees._tr_stored_block(s,0,0,!1),3===flush&&(zero(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(strm),0===strm.avail_out))return s.last_flush=-1,0}return 4!==flush?0:s.wrap<=0?1:(2===s.wrap?(put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),put_byte(s,strm.adler>>16&255),put_byte(s,strm.adler>>24&255),put_byte(s,255&strm.total_in),put_byte(s,strm.total_in>>8&255),put_byte(s,strm.total_in>>16&255),put_byte(s,strm.total_in>>24&255)):(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),flush_pending(strm),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?0:1)},exports.deflateEnd=function(strm){var status;return strm&&strm.state?42!==(status=strm.state.status)&&69!==status&&73!==status&&91!==status&&103!==status&&113!==status&&666!==status?err(strm,-2):(strm.state=null,113===status?err(strm,-3):0):-2},exports.deflateSetDictionary=function(strm,dictionary){var s,str,n,wrap,avail,next,input,tmpDict,dictLength=dictionary.length;if(!strm||!strm.state)return-2;if(2===(wrap=(s=strm.state).wrap)||1===wrap&&42!==s.status||s.lookahead)return-2;for(1===wrap&&(strm.adler=adler32(strm.adler,dictionary,dictLength,0)),s.wrap=0,dictLength>=s.w_size&&(0===wrap&&(zero(s.head),s.strstart=0,s.block_start=0,s.insert=0),tmpDict=new utils.Buf8(s.w_size),utils.arraySet(tmpDict,dictionary,dictLength-s.w_size,s.w_size,0),dictionary=tmpDict,dictLength=s.w_size),avail=strm.avail_in,next=strm.next_in,input=strm.input,strm.avail_in=dictLength,strm.next_in=0,strm.input=dictionary,fill_window(s);s.lookahead>=3;){str=s.strstart,n=s.lookahead-2;do{s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+3-1])&s.hash_mask,s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++}while(--n);s.strstart=str,s.lookahead=2,fill_window(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=2,s.match_available=0,strm.next_in=next,strm.input=input,strm.avail_in=avail,s.wrap=wrap,0},exports.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(require,module,exports){"use strict";module.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(require,module,exports){"use strict";module.exports=function(strm,start){var state,_in,last,_out,beg,end,dmax,wsize,whave,wnext,s_window,hold,bits,lcode,dcode,lmask,dmask,here,op,len,dist,from,from_source,input,output;input=strm.input,last=(_in=strm.next_in)+(strm.avail_in-5),output=strm.output,beg=(_out=strm.next_out)-(start-strm.avail_out),end=_out+(strm.avail_out-257),dmax=(state=strm.state).dmax,wsize=state.wsize,whave=state.whave,wnext=state.wnext,s_window=state.window,hold=state.hold,bits=state.bits,lcode=state.lencode,dcode=state.distcode,lmask=(1<<state.lenbits)-1,dmask=(1<<state.distbits)-1;top:do{bits<15&&(hold+=input[_in++]<<bits,hold+=input[_in++]<<(bits+=8),bits+=8),here=lcode[hold&lmask];dolen:for(;;){if(hold>>>=op=here>>>24,bits-=op,0==(op=here>>>16&255))output[_out++]=65535&here;else{if(!(16&op)){if(0==(64&op)){here=lcode[(65535&here)+(hold&(1<<op)-1)];continue dolen}if(32&op){state.mode=12;break top}strm.msg="invalid literal/length code",state.mode=30;break top}len=65535&here,(op&=15)&&(bits<op&&(hold+=input[_in++]<<bits,bits+=8),len+=hold&(1<<op)-1,hold>>>=op,bits-=op),bits<15&&(hold+=input[_in++]<<bits,hold+=input[_in++]<<(bits+=8),bits+=8),here=dcode[hold&dmask];dodist:for(;;){if(hold>>>=op=here>>>24,bits-=op,!(16&(op=here>>>16&255))){if(0==(64&op)){here=dcode[(65535&here)+(hold&(1<<op)-1)];continue dodist}strm.msg="invalid distance code",state.mode=30;break top}if(dist=65535&here,bits<(op&=15)&&(hold+=input[_in++]<<bits,(bits+=8)<op&&(hold+=input[_in++]<<bits,bits+=8)),(dist+=hold&(1<<op)-1)>dmax){strm.msg="invalid distance too far back",state.mode=30;break top}if(hold>>>=op,bits-=op,dist>(op=_out-beg)){if((op=dist-op)>whave&&state.sane){strm.msg="invalid distance too far back",state.mode=30;break top}if(from=0,from_source=s_window,0===wnext){if(from+=wsize-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}else if(wnext<op){if(from+=wsize+wnext-op,(op-=wnext)<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);if(from=0,wnext<len){len-=op=wnext;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}}}else if(from+=wnext-op,op<len){len-=op;do{output[_out++]=s_window[from++]}while(--op);from=_out-dist,from_source=output}for(;len>2;)output[_out++]=from_source[from++],output[_out++]=from_source[from++],output[_out++]=from_source[from++],len-=3;len&&(output[_out++]=from_source[from++],len>1&&(output[_out++]=from_source[from++]))}else{from=_out-dist;do{output[_out++]=output[from++],output[_out++]=output[from++],output[_out++]=output[from++],len-=3}while(len>2);len&&(output[_out++]=output[from++],len>1&&(output[_out++]=output[from++]))}break}}break}}while(_in<last&&_out<end);hold&=(1<<(bits-=(len=bits>>3)<<3))-1,strm.next_in=_in-=len,strm.next_out=_out,strm.avail_in=_in<last?last-_in+5:5-(_in-last),strm.avail_out=_out<end?end-_out+257:257-(_out-end),state.hold=hold,state.bits=bits}},{}],49:[function(require,module,exports){"use strict";var utils=require("../utils/common"),adler32=require("./adler32"),crc32=require("./crc32"),inflate_fast=require("./inffast"),inflate_table=require("./inftrees");function zswap32(q){return(q>>>24&255)+(q>>>8&65280)+((65280&q)<<8)+((255&q)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(strm){var state;return strm&&strm.state?(strm.total_in=strm.total_out=(state=strm.state).total=0,strm.msg="",state.wrap&&(strm.adler=1&state.wrap),state.mode=1,state.last=0,state.havedict=0,state.dmax=32768,state.head=null,state.hold=0,state.bits=0,state.lencode=state.lendyn=new utils.Buf32(852),state.distcode=state.distdyn=new utils.Buf32(592),state.sane=1,state.back=-1,0):-2}function inflateReset(strm){var state;return strm&&strm.state?((state=strm.state).wsize=0,state.whave=0,state.wnext=0,inflateResetKeep(strm)):-2}function inflateReset2(strm,windowBits){var wrap,state;return strm&&strm.state?(windowBits<0?(wrap=0,windowBits=-windowBits):(wrap=1+(windowBits>>4),windowBits<48&&(windowBits&=15)),windowBits&&(windowBits<8||windowBits>15)?-2:(null!==(state=strm.state).window&&state.wbits!==windowBits&&(state.window=null),state.wrap=wrap,state.wbits=windowBits,inflateReset(strm))):-2}function inflateInit2(strm,windowBits){var ret,state;return strm?(state=new InflateState,strm.state=state,state.window=null,0!==(ret=inflateReset2(strm,windowBits))&&(strm.state=null),ret):-2}var lenfix,distfix,virgin=!0;function fixedtables(state){if(virgin){var sym;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),sym=0;sym<144;)state.lens[sym++]=8;for(;sym<256;)state.lens[sym++]=9;for(;sym<280;)state.lens[sym++]=7;for(;sym<288;)state.lens[sym++]=8;for(inflate_table(1,state.lens,0,288,lenfix,0,state.work,{bits:9}),sym=0;sym<32;)state.lens[sym++]=5;inflate_table(2,state.lens,0,32,distfix,0,state.work,{bits:5}),virgin=!1}state.lencode=lenfix,state.lenbits=9,state.distcode=distfix,state.distbits=5}function updatewindow(strm,src,end,copy){var dist,state=strm.state;return null===state.window&&(state.wsize=1<<state.wbits,state.wnext=0,state.whave=0,state.window=new utils.Buf8(state.wsize)),copy>=state.wsize?(utils.arraySet(state.window,src,end-state.wsize,state.wsize,0),state.wnext=0,state.whave=state.wsize):((dist=state.wsize-state.wnext)>copy&&(dist=copy),utils.arraySet(state.window,src,end-copy,dist,state.wnext),(copy-=dist)?(utils.arraySet(state.window,src,end-copy,copy,0),state.wnext=copy,state.whave=state.wsize):(state.wnext+=dist,state.wnext===state.wsize&&(state.wnext=0),state.whave<state.wsize&&(state.whave+=dist))),0}exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=function(strm){return inflateInit2(strm,15)},exports.inflateInit2=inflateInit2,exports.inflate=function(strm,flush){var state,input,output,next,put,have,left,hold,bits,_in,_out,copy,from,from_source,here_bits,here_op,here_val,last_bits,last_op,last_val,len,ret,opts,n,here=0,hbuf=new utils.Buf8(4),order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!strm||!strm.state||!strm.output||!strm.input&&0!==strm.avail_in)return-2;12===(state=strm.state).mode&&(state.mode=13),put=strm.next_out,output=strm.output,next=strm.next_in,input=strm.input,hold=state.hold,bits=state.bits,_in=have=strm.avail_in,_out=left=strm.avail_out,ret=0;inf_leave:for(;;)switch(state.mode){case 1:if(0===state.wrap){state.mode=13;break}for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(2&state.wrap&&35615===hold){state.check=0,hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0),hold=0,bits=0,state.mode=2;break}if(state.flags=0,state.head&&(state.head.done=!1),!(1&state.wrap)||(((255&hold)<<8)+(hold>>8))%31){strm.msg="incorrect header check",state.mode=30;break}if(8!=(15&hold)){strm.msg="unknown compression method",state.mode=30;break}if(bits-=4,len=8+(15&(hold>>>=4)),0===state.wbits)state.wbits=len;else if(len>state.wbits){strm.msg="invalid window size",state.mode=30;break}state.dmax=1<<len,strm.adler=state.check=1,state.mode=512&hold?10:12,hold=0,bits=0;break;case 2:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.flags=hold,8!=(255&state.flags)){strm.msg="unknown compression method",state.mode=30;break}if(57344&state.flags){strm.msg="unknown header flags set",state.mode=30;break}state.head&&(state.head.text=hold>>8&1),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=3;case 3:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.time=hold),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,hbuf[2]=hold>>>16&255,hbuf[3]=hold>>>24&255,state.check=crc32(state.check,hbuf,4,0)),hold=0,bits=0,state.mode=4;case 4:for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.xflags=255&hold,state.head.os=hold>>8),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=5;case 5:if(1024&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length=hold,state.head&&(state.head.extra_len=hold),512&state.flags&&(hbuf[0]=255&hold,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0}else state.head&&(state.head.extra=null);state.mode=6;case 6:if(1024&state.flags&&((copy=state.length)>have&&(copy=have),copy&&(state.head&&(len=state.head.extra_len-state.length,state.head.extra||(state.head.extra=new Array(state.head.extra_len)),utils.arraySet(state.head.extra,input,next,copy,len)),512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,state.length-=copy),state.length))break inf_leave;state.length=0,state.mode=7;case 7:if(2048&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.name+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.name=null);state.length=0,state.mode=8;case 8:if(4096&state.flags){if(0===have)break inf_leave;copy=0;do{len=input[next+copy++],state.head&&len&&state.length<65536&&(state.head.comment+=String.fromCharCode(len))}while(len&&copy<have);if(512&state.flags&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.comment=null);state.mode=9;case 9:if(512&state.flags){for(;bits<16;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(65535&state.check)){strm.msg="header crc mismatch",state.mode=30;break}hold=0,bits=0}state.head&&(state.head.hcrc=state.flags>>9&1,state.head.done=!0),strm.adler=state.check=0,state.mode=12;break;case 10:for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}strm.adler=state.check=zswap32(hold),hold=0,bits=0,state.mode=11;case 11:if(0===state.havedict)return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,2;strm.adler=state.check=1,state.mode=12;case 12:if(5===flush||6===flush)break inf_leave;case 13:if(state.last){hold>>>=7&bits,bits-=7&bits,state.mode=27;break}for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}switch(state.last=1&hold,bits-=1,3&(hold>>>=1)){case 0:state.mode=14;break;case 1:if(fixedtables(state),state.mode=20,6===flush){hold>>>=2,bits-=2;break inf_leave}break;case 2:state.mode=17;break;case 3:strm.msg="invalid block type",state.mode=30}hold>>>=2,bits-=2;break;case 14:for(hold>>>=7&bits,bits-=7&bits;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((65535&hold)!=(hold>>>16^65535)){strm.msg="invalid stored block lengths",state.mode=30;break}if(state.length=65535&hold,hold=0,bits=0,state.mode=15,6===flush)break inf_leave;case 15:state.mode=16;case 16:if(copy=state.length){if(copy>have&&(copy=have),copy>left&&(copy=left),0===copy)break inf_leave;utils.arraySet(output,input,next,copy,put),have-=copy,next+=copy,left-=copy,put+=copy,state.length-=copy;break}state.mode=12;break;case 17:for(;bits<14;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.nlen=257+(31&hold),bits-=5,state.ndist=1+(31&(hold>>>=5)),bits-=5,state.ncode=4+(15&(hold>>>=5)),hold>>>=4,bits-=4,state.nlen>286||state.ndist>30){strm.msg="too many length or distance symbols",state.mode=30;break}state.have=0,state.mode=18;case 18:for(;state.have<state.ncode;){for(;bits<3;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.lens[order[state.have++]]=7&hold,hold>>>=3,bits-=3}for(;state.have<19;)state.lens[order[state.have++]]=0;if(state.lencode=state.lendyn,state.lenbits=7,ret=inflate_table(0,state.lens,0,19,state.lencode,0,state.work,opts={bits:state.lenbits}),state.lenbits=opts.bits,ret){strm.msg="invalid code lengths set",state.mode=30;break}state.have=0,state.mode=19;case 19:for(;state.have<state.nlen+state.ndist;){for(;here_op=(here=state.lencode[hold&(1<<state.lenbits)-1])>>>16&255,here_val=65535&here,!((here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_val<16)hold>>>=here_bits,bits-=here_bits,state.lens[state.have++]=here_val;else{if(16===here_val){for(n=here_bits+2;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold>>>=here_bits,bits-=here_bits,0===state.have){strm.msg="invalid bit length repeat",state.mode=30;break}len=state.lens[state.have-1],copy=3+(3&hold),hold>>>=2,bits-=2}else if(17===here_val){for(n=here_bits+3;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}bits-=here_bits,len=0,copy=3+(7&(hold>>>=here_bits)),hold>>>=3,bits-=3}else{for(n=here_bits+7;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}bits-=here_bits,len=0,copy=11+(127&(hold>>>=here_bits)),hold>>>=7,bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg="invalid bit length repeat",state.mode=30;break}for(;copy--;)state.lens[state.have++]=len}}if(30===state.mode)break;if(0===state.lens[256]){strm.msg="invalid code -- missing end-of-block",state.mode=30;break}if(state.lenbits=9,ret=inflate_table(1,state.lens,0,state.nlen,state.lencode,0,state.work,opts={bits:state.lenbits}),state.lenbits=opts.bits,ret){strm.msg="invalid literal/lengths set",state.mode=30;break}if(state.distbits=6,state.distcode=state.distdyn,ret=inflate_table(2,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts={bits:state.distbits}),state.distbits=opts.bits,ret){strm.msg="invalid distances set",state.mode=30;break}if(state.mode=20,6===flush)break inf_leave;case 20:state.mode=21;case 21:if(have>=6&&left>=258){strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,inflate_fast(strm,_out),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,12===state.mode&&(state.back=-1);break}for(state.back=0;here_op=(here=state.lencode[hold&(1<<state.lenbits)-1])>>>16&255,here_val=65535&here,!((here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_op&&0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here_op=(here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)])>>>16&255,here_val=65535&here,!(last_bits+(here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,state.length=here_val,0===here_op){state.mode=26;break}if(32&here_op){state.back=-1,state.mode=12;break}if(64&here_op){strm.msg="invalid literal/length code",state.mode=30;break}state.extra=15&here_op,state.mode=22;case 22:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}state.was=state.length,state.mode=23;case 23:for(;here_op=(here=state.distcode[hold&(1<<state.distbits)-1])>>>16&255,here_val=65535&here,!((here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(0==(240&here_op)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here_op=(here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)])>>>16&255,here_val=65535&here,!(last_bits+(here_bits=here>>>24)<=bits);){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,64&here_op){strm.msg="invalid distance code",state.mode=30;break}state.offset=here_val,state.extra=15&here_op,state.mode=24;case 24:if(state.extra){for(n=state.extra;bits<n;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.offset+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}if(state.offset>state.dmax){strm.msg="invalid distance too far back",state.mode=30;break}state.mode=25;case 25:if(0===left)break inf_leave;if(state.offset>(copy=_out-left)){if((copy=state.offset-copy)>state.whave&&state.sane){strm.msg="invalid distance too far back",state.mode=30;break}from=copy>state.wnext?state.wsize-(copy-=state.wnext):state.wnext-copy,copy>state.length&&(copy=state.length),from_source=state.window}else from_source=output,from=put-state.offset,copy=state.length;copy>left&&(copy=left),left-=copy,state.length-=copy;do{output[put++]=from_source[from++]}while(--copy);0===state.length&&(state.mode=21);break;case 26:if(0===left)break inf_leave;output[put++]=state.length,left--,state.mode=21;break;case 27:if(state.wrap){for(;bits<32;){if(0===have)break inf_leave;have--,hold|=input[next++]<<bits,bits+=8}if(strm.total_out+=_out-=left,state.total+=_out,_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,put-_out):adler32(state.check,output,_out,put-_out)),_out=left,(state.flags?hold:zswap32(hold))!==state.check){strm.msg="incorrect data check",state.mode=30;break}hold=0,bits=0}state.mode=28;case 28:if(state.wrap&&state.flags){for(;bits<32;){if(0===have)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(4294967295&state.total)){strm.msg="incorrect length check",state.mode=30;break}hold=0,bits=0}state.mode=29;case 29:ret=1;break inf_leave;case 30:ret=-3;break inf_leave;case 31:return-4;case 32:default:return-2}return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,(state.wsize||_out!==strm.avail_out&&state.mode<30&&(state.mode<27||4!==flush))&&updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out)?(state.mode=31,-4):(_out-=strm.avail_out,strm.total_in+=_in-=strm.avail_in,strm.total_out+=_out,state.total+=_out,state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out)),strm.data_type=state.bits+(state.last?64:0)+(12===state.mode?128:0)+(20===state.mode||15===state.mode?256:0),(0===_in&&0===_out||4===flush)&&0===ret&&(ret=-5),ret)},exports.inflateEnd=function(strm){if(!strm||!strm.state)return-2;var state=strm.state;return state.window&&(state.window=null),strm.state=null,0},exports.inflateGetHeader=function(strm,head){var state;return strm&&strm.state?0==(2&(state=strm.state).wrap)?-2:(state.head=head,head.done=!1,0):-2},exports.inflateSetDictionary=function(strm,dictionary){var state,dictLength=dictionary.length;return strm&&strm.state?0!==(state=strm.state).wrap&&11!==state.mode?-2:11===state.mode&&adler32(1,dictionary,dictLength,0)!==state.check?-3:updatewindow(strm,dictionary,dictLength,dictLength)?(state.mode=31,-4):(state.havedict=1,0):-2},exports.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(require,module,exports){"use strict";var utils=require("../utils/common"),lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(type,lens,lens_index,codes,table,table_index,work,opts){var incr,fill,low,mask,next,end,here_bits,here_op,here_val,bits=opts.bits,len=0,sym=0,min=0,max=0,root=0,curr=0,drop=0,left=0,used=0,huff=0,base=null,base_index=0,count=new utils.Buf16(16),offs=new utils.Buf16(16),extra=null,extra_index=0;for(len=0;len<=15;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;for(root=bits,max=15;max>=1&&0===count[max];max--);if(root>max&&(root=max),0===max)return table[table_index++]=20971520,table[table_index++]=20971520,opts.bits=1,0;for(min=1;min<max&&0===count[min];min++);for(root<min&&(root=min),left=1,len=1;len<=15;len++)if(left<<=1,(left-=count[len])<0)return-1;if(left>0&&(0===type||1!==max))return-1;for(offs[1]=0,len=1;len<15;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)0!==lens[lens_index+sym]&&(work[offs[lens[lens_index+sym]]++]=sym);if(0===type?(base=extra=work,end=19):1===type?(base=lbase,base_index-=257,extra=lext,extra_index-=257,end=256):(base=dbase,extra=dext,end=-1),huff=0,sym=0,len=min,next=table_index,curr=root,drop=0,low=-1,mask=(used=1<<root)-1,1===type&&used>852||2===type&&used>592)return 1;for(;;){here_bits=len-drop,work[sym]<end?(here_op=0,here_val=work[sym]):work[sym]>end?(here_op=extra[extra_index+work[sym]],here_val=base[base_index+work[sym]]):(here_op=96,here_val=0),incr=1<<len-drop,min=fill=1<<curr;do{table[next+(huff>>drop)+(fill-=incr)]=here_bits<<24|here_op<<16|here_val|0}while(0!==fill);for(incr=1<<len-1;huff&incr;)incr>>=1;if(0!==incr?(huff&=incr-1,huff+=incr):huff=0,sym++,0==--count[len]){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){for(0===drop&&(drop=root),next+=min,left=1<<(curr=len-drop);curr+drop<max&&!((left-=count[curr+drop])<=0);)curr++,left<<=1;if(used+=1<<curr,1===type&&used>852||2===type&&used>592)return 1;table[low=huff&mask]=root<<24|curr<<16|next-table_index|0}}return 0!==huff&&(table[next+huff]=len-drop<<24|64<<16|0),opts.bits=root,0}},{"../utils/common":41}],51:[function(require,module,exports){"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(require,module,exports){"use strict";var utils=require("../utils/common");function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}var extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],static_ltree=new Array(576);zero(static_ltree);var static_dtree=new Array(60);zero(static_dtree);var _dist_code=new Array(512);zero(_dist_code);var _length_code=new Array(256);zero(_length_code);var base_length=new Array(29);zero(base_length);var static_l_desc,static_d_desc,static_bl_desc,base_dist=new Array(30);function StaticTreeDesc(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree,this.extra_bits=extra_bits,this.extra_base=extra_base,this.elems=elems,this.max_length=max_length,this.has_stree=static_tree&&static_tree.length}function TreeDesc(dyn_tree,stat_desc){this.dyn_tree=dyn_tree,this.max_code=0,this.stat_desc=stat_desc}function d_code(dist){return dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)]}function put_short(s,w){s.pending_buf[s.pending++]=255&w,s.pending_buf[s.pending++]=w>>>8&255}function send_bits(s,value,length){s.bi_valid>16-length?(s.bi_buf|=value<<s.bi_valid&65535,put_short(s,s.bi_buf),s.bi_buf=value>>16-s.bi_valid,s.bi_valid+=length-16):(s.bi_buf|=value<<s.bi_valid&65535,s.bi_valid+=length)}function send_code(s,c,tree){send_bits(s,tree[2*c],tree[2*c+1])}function bi_reverse(code,len){var res=0;do{res|=1&code,code>>>=1,res<<=1}while(--len>0);return res>>>1}function gen_codes(tree,max_code,bl_count){var bits,n,next_code=new Array(16),code=0;for(bits=1;bits<=15;bits++)next_code[bits]=code=code+bl_count[bits-1]<<1;for(n=0;n<=max_code;n++){var len=tree[2*n+1];0!==len&&(tree[2*n]=bi_reverse(next_code[len]++,len))}}function init_block(s){var n;for(n=0;n<286;n++)s.dyn_ltree[2*n]=0;for(n=0;n<30;n++)s.dyn_dtree[2*n]=0;for(n=0;n<19;n++)s.bl_tree[2*n]=0;s.dyn_ltree[512]=1,s.opt_len=s.static_len=0,s.last_lit=s.matches=0}function bi_windup(s){s.bi_valid>8?put_short(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0}function smaller(tree,n,m,depth){var _n2=2*n,_m2=2*m;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]}function pqdownheap(s,tree,k){for(var v=s.heap[k],j=k<<1;j<=s.heap_len&&(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)&&j++,!smaller(tree,v,s.heap[j],s.depth));)s.heap[k]=s.heap[j],k=j,j<<=1;s.heap[k]=v}function compress_block(s,ltree,dtree){var dist,lc,code,extra,lx=0;if(0!==s.last_lit)do{dist=s.pending_buf[s.d_buf+2*lx]<<8|s.pending_buf[s.d_buf+2*lx+1],lc=s.pending_buf[s.l_buf+lx],lx++,0===dist?send_code(s,lc,ltree):(send_code(s,(code=_length_code[lc])+256+1,ltree),0!==(extra=extra_lbits[code])&&send_bits(s,lc-=base_length[code],extra),send_code(s,code=d_code(--dist),dtree),0!==(extra=extra_dbits[code])&&send_bits(s,dist-=base_dist[code],extra))}while(lx<s.last_lit);send_code(s,256,ltree)}function build_tree(s,desc){var n,m,node,tree=desc.dyn_tree,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,elems=desc.stat_desc.elems,max_code=-1;for(s.heap_len=0,s.heap_max=573,n=0;n<elems;n++)0!==tree[2*n]?(s.heap[++s.heap_len]=max_code=n,s.depth[n]=0):tree[2*n+1]=0;for(;s.heap_len<2;)tree[2*(node=s.heap[++s.heap_len]=max_code<2?++max_code:0)]=1,s.depth[node]=0,s.opt_len--,has_stree&&(s.static_len-=stree[2*node+1]);for(desc.max_code=max_code,n=s.heap_len>>1;n>=1;n--)pqdownheap(s,tree,n);node=elems;do{n=s.heap[1],s.heap[1]=s.heap[s.heap_len--],pqdownheap(s,tree,1),m=s.heap[1],s.heap[--s.heap_max]=n,s.heap[--s.heap_max]=m,tree[2*node]=tree[2*n]+tree[2*m],s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1,tree[2*n+1]=tree[2*m+1]=node,s.heap[1]=node++,pqdownheap(s,tree,1)}while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],function(s,desc){var h,n,m,bits,xbits,f,tree=desc.dyn_tree,max_code=desc.max_code,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,extra=desc.stat_desc.extra_bits,base=desc.stat_desc.extra_base,max_length=desc.stat_desc.max_length,overflow=0;for(bits=0;bits<=15;bits++)s.bl_count[bits]=0;for(tree[2*s.heap[s.heap_max]+1]=0,h=s.heap_max+1;h<573;h++)(bits=tree[2*tree[2*(n=s.heap[h])+1]+1]+1)>max_length&&(bits=max_length,overflow++),tree[2*n+1]=bits,n>max_code||(s.bl_count[bits]++,xbits=0,n>=base&&(xbits=extra[n-base]),s.opt_len+=(f=tree[2*n])*(bits+xbits),has_stree&&(s.static_len+=f*(stree[2*n+1]+xbits)));if(0!==overflow){do{for(bits=max_length-1;0===s.bl_count[bits];)bits--;s.bl_count[bits]--,s.bl_count[bits+1]+=2,s.bl_count[max_length]--,overflow-=2}while(overflow>0);for(bits=max_length;0!==bits;bits--)for(n=s.bl_count[bits];0!==n;)(m=s.heap[--h])>max_code||(tree[2*m+1]!==bits&&(s.opt_len+=(bits-tree[2*m+1])*tree[2*m],tree[2*m+1]=bits),n--)}}(s,desc),gen_codes(tree,max_code,s.bl_count)}function scan_tree(s,tree,max_code){var n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),tree[2*(max_code+1)+1]=65535,n=0;n<=max_code;n++)curlen=nextlen,nextlen=tree[2*(n+1)+1],++count<max_count&&curlen===nextlen||(count<min_count?s.bl_tree[2*curlen]+=count:0!==curlen?(curlen!==prevlen&&s.bl_tree[2*curlen]++,s.bl_tree[32]++):count<=10?s.bl_tree[34]++:s.bl_tree[36]++,count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4))}function send_tree(s,tree,max_code){var n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),n=0;n<=max_code;n++)if(curlen=nextlen,nextlen=tree[2*(n+1)+1],!(++count<max_count&&curlen===nextlen)){if(count<min_count)do{send_code(s,curlen,s.bl_tree)}while(0!=--count);else 0!==curlen?(curlen!==prevlen&&(send_code(s,curlen,s.bl_tree),count--),send_code(s,16,s.bl_tree),send_bits(s,count-3,2)):count<=10?(send_code(s,17,s.bl_tree),send_bits(s,count-3,3)):(send_code(s,18,s.bl_tree),send_bits(s,count-11,7));count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4)}}zero(base_dist);var static_init_done=!1;function _tr_stored_block(s,buf,stored_len,last){send_bits(s,0+(last?1:0),3),function(s,buf,len,header){bi_windup(s),put_short(s,len),put_short(s,~len),utils.arraySet(s.pending_buf,s.window,buf,len,s.pending),s.pending+=len}(s,buf,stored_len)}exports._tr_init=function(s){static_init_done||(function(){var n,bits,length,code,dist,bl_count=new Array(16);for(length=0,code=0;code<28;code++)for(base_length[code]=length,n=0;n<1<<extra_lbits[code];n++)_length_code[length++]=code;for(_length_code[length-1]=code,dist=0,code=0;code<16;code++)for(base_dist[code]=dist,n=0;n<1<<extra_dbits[code];n++)_dist_code[dist++]=code;for(dist>>=7;code<30;code++)for(base_dist[code]=dist<<7,n=0;n<1<<extra_dbits[code]-7;n++)_dist_code[256+dist++]=code;for(bits=0;bits<=15;bits++)bl_count[bits]=0;for(n=0;n<=143;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(;n<=255;)static_ltree[2*n+1]=9,n++,bl_count[9]++;for(;n<=279;)static_ltree[2*n+1]=7,n++,bl_count[7]++;for(;n<=287;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(gen_codes(static_ltree,287,bl_count),n=0;n<30;n++)static_dtree[2*n+1]=5,static_dtree[2*n]=bi_reverse(n,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,257,286,15),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,30,15),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,19,7)}(),static_init_done=!0),s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc),s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc),s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc),s.bi_buf=0,s.bi_valid=0,init_block(s)},exports._tr_stored_block=_tr_stored_block,exports._tr_flush_block=function(s,buf,stored_len,last){var opt_lenb,static_lenb,max_blindex=0;s.level>0?(2===s.strm.data_type&&(s.strm.data_type=function(s){var n,black_mask=4093624447;for(n=0;n<=31;n++,black_mask>>>=1)if(1&black_mask&&0!==s.dyn_ltree[2*n])return 0;if(0!==s.dyn_ltree[18]||0!==s.dyn_ltree[20]||0!==s.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==s.dyn_ltree[2*n])return 1;return 0}(s)),build_tree(s,s.l_desc),build_tree(s,s.d_desc),max_blindex=function(s){var max_blindex;for(scan_tree(s,s.dyn_ltree,s.l_desc.max_code),scan_tree(s,s.dyn_dtree,s.d_desc.max_code),build_tree(s,s.bl_desc),max_blindex=18;max_blindex>=3&&0===s.bl_tree[2*bl_order[max_blindex]+1];max_blindex--);return s.opt_len+=3*(max_blindex+1)+5+5+4,max_blindex}(s),(static_lenb=s.static_len+3+7>>>3)<=(opt_lenb=s.opt_len+3+7>>>3)&&(opt_lenb=static_lenb)):opt_lenb=static_lenb=stored_len+5,stored_len+4<=opt_lenb&&-1!==buf?_tr_stored_block(s,buf,stored_len,last):4===s.strategy||static_lenb===opt_lenb?(send_bits(s,2+(last?1:0),3),compress_block(s,static_ltree,static_dtree)):(send_bits(s,4+(last?1:0),3),function(s,lcodes,dcodes,blcodes){var rank;for(send_bits(s,lcodes-257,5),send_bits(s,dcodes-1,5),send_bits(s,blcodes-4,4),rank=0;rank<blcodes;rank++)send_bits(s,s.bl_tree[2*bl_order[rank]+1],3);send_tree(s,s.dyn_ltree,lcodes-1),send_tree(s,s.dyn_dtree,dcodes-1)}(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1),compress_block(s,s.dyn_ltree,s.dyn_dtree)),init_block(s),last&&bi_windup(s)},exports._tr_tally=function(s,dist,lc){return s.pending_buf[s.d_buf+2*s.last_lit]=dist>>>8&255,s.pending_buf[s.d_buf+2*s.last_lit+1]=255&dist,s.pending_buf[s.l_buf+s.last_lit]=255&lc,s.last_lit++,0===dist?s.dyn_ltree[2*lc]++:(s.matches++,dist--,s.dyn_ltree[2*(_length_code[lc]+256+1)]++,s.dyn_dtree[2*d_code(dist)]++),s.last_lit===s.lit_bufsize-1},exports._tr_align=function(s){send_bits(s,2,3),send_code(s,256,static_ltree),function(s){16===s.bi_valid?(put_short(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=255&s.bi_buf,s.bi_buf>>=8,s.bi_valid-=8)}(s)}},{"../utils/common":41}],53:[function(require,module,exports){"use strict";module.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(require,module,exports){"use strict";module.exports="function"==typeof setImmediate?setImmediate:function(){var args=[].slice.apply(arguments);args.splice(1,0,0),setTimeout.apply(null,args)}},{}]},{},[10])(10)},hyZr:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"HistoryState",(function(){return HistoryState})),__webpack_require__.d(__webpack_exports__,"closeHistory",(function(){return closeHistory})),__webpack_require__.d(__webpack_exports__,"history",(function(){return index_es_history})),__webpack_require__.d(__webpack_exports__,"redo",(function(){return redo})),__webpack_require__.d(__webpack_exports__,"redoDepth",(function(){return redoDepth})),__webpack_require__.d(__webpack_exports__,"undo",(function(){return undo})),__webpack_require__.d(__webpack_exports__,"undoDepth",(function(){return undoDepth}));var RopeSequence=function(){};RopeSequence.prototype.append=function(other){return other.length?(other=RopeSequence.from(other),!this.length&&other||other.length<200&&this.leafAppend(other)||this.length<200&&other.leafPrepend(this)||this.appendInner(other)):this},RopeSequence.prototype.prepend=function(other){return other.length?RopeSequence.from(other).append(this):this},RopeSequence.prototype.appendInner=function(other){return new Append(this,other)},RopeSequence.prototype.slice=function(from,to){return void 0===from&&(from=0),void 0===to&&(to=this.length),from>=to?RopeSequence.empty:this.sliceInner(Math.max(0,from),Math.min(this.length,to))},RopeSequence.prototype.get=function(i){if(!(i<0||i>=this.length))return this.getInner(i)},RopeSequence.prototype.forEach=function(f,from,to){void 0===from&&(from=0),void 0===to&&(to=this.length),from<=to?this.forEachInner(f,from,to,0):this.forEachInvertedInner(f,from,to,0)},RopeSequence.prototype.map=function(f,from,to){void 0===from&&(from=0),void 0===to&&(to=this.length);var result=[];return this.forEach((function(elt,i){return result.push(f(elt,i))}),from,to),result},RopeSequence.from=function(values){return values instanceof RopeSequence?values:values&&values.length?new Leaf(values):RopeSequence.empty};var Leaf=function(RopeSequence){function Leaf(values){RopeSequence.call(this),this.values=values}RopeSequence&&(Leaf.__proto__=RopeSequence),(Leaf.prototype=Object.create(RopeSequence&&RopeSequence.prototype)).constructor=Leaf;var prototypeAccessors={length:{configurable:!0},depth:{configurable:!0}};return Leaf.prototype.flatten=function(){return this.values},Leaf.prototype.sliceInner=function(from,to){return 0==from&&to==this.length?this:new Leaf(this.values.slice(from,to))},Leaf.prototype.getInner=function(i){return this.values[i]},Leaf.prototype.forEachInner=function(f,from,to,start){for(var i=from;i<to;i++)if(!1===f(this.values[i],start+i))return!1},Leaf.prototype.forEachInvertedInner=function(f,from,to,start){for(var i=from-1;i>=to;i--)if(!1===f(this.values[i],start+i))return!1},Leaf.prototype.leafAppend=function(other){if(this.length+other.length<=200)return new Leaf(this.values.concat(other.flatten()))},Leaf.prototype.leafPrepend=function(other){if(this.length+other.length<=200)return new Leaf(other.flatten().concat(this.values))},prototypeAccessors.length.get=function(){return this.values.length},prototypeAccessors.depth.get=function(){return 0},Object.defineProperties(Leaf.prototype,prototypeAccessors),Leaf}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(RopeSequence){function Append(left,right){RopeSequence.call(this),this.left=left,this.right=right,this.length=left.length+right.length,this.depth=Math.max(left.depth,right.depth)+1}return RopeSequence&&(Append.__proto__=RopeSequence),(Append.prototype=Object.create(RopeSequence&&RopeSequence.prototype)).constructor=Append,Append.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},Append.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},Append.prototype.forEachInner=function(f,from,to,start){var leftLen=this.left.length;return!(from<leftLen&&!1===this.left.forEachInner(f,from,Math.min(to,leftLen),start))&&!(to>leftLen&&!1===this.right.forEachInner(f,Math.max(from-leftLen,0),Math.min(this.length,to)-leftLen,start+leftLen))&&void 0},Append.prototype.forEachInvertedInner=function(f,from,to,start){var leftLen=this.left.length;return!(from>leftLen&&!1===this.right.forEachInvertedInner(f,from-leftLen,Math.max(to,leftLen)-leftLen,start+leftLen))&&!(to<leftLen&&!1===this.left.forEachInvertedInner(f,Math.min(from,leftLen),to,start))&&void 0},Append.prototype.sliceInner=function(from,to){if(0==from&&to==this.length)return this;var leftLen=this.left.length;return to<=leftLen?this.left.slice(from,to):from>=leftLen?this.right.slice(from-leftLen,to-leftLen):this.left.slice(from,leftLen).append(this.right.slice(0,to-leftLen))},Append.prototype.leafAppend=function(other){var inner=this.right.leafAppend(other);if(inner)return new Append(this.left,inner)},Append.prototype.leafPrepend=function(other){var inner=this.left.leafPrepend(other);if(inner)return new Append(inner,this.right)},Append.prototype.appendInner=function(other){return this.left.depth>=Math.max(this.right.depth,other.depth)+1?new Append(this.left,new Append(this.right,other)):new Append(this,other)},Append}(RopeSequence),index_es=RopeSequence,dist_index_es=__webpack_require__("CsC6"),prosemirror_state_dist_index_es=__webpack_require__("UxO+"),Branch=function(items,eventCount){this.items=items,this.eventCount=eventCount};Branch.prototype.popEvent=function(state,preserveItems){var this$1=this;if(0==this.eventCount)return null;for(var remap,mapFrom,end=this.items.length;;end--)if(this.items.get(end-1).selection){--end;break}preserveItems&&(remap=this.remapping(end,this.items.length),mapFrom=remap.maps.length);var selection,remaining,transform=state.tr,addAfter=[],addBefore=[];return this.items.forEach((function(item,i){if(!item.step)return remap||(remap=this$1.remapping(end,i+1),mapFrom=remap.maps.length),mapFrom--,void addBefore.push(item);if(remap){addBefore.push(new Item(item.map));var map,step=item.step.map(remap.slice(mapFrom));step&&transform.maybeStep(step).doc&&addAfter.push(new Item(map=transform.mapping.maps[transform.mapping.maps.length-1],null,null,addAfter.length+addBefore.length)),mapFrom--,map&&remap.appendMap(map,mapFrom)}else transform.maybeStep(item.step);return item.selection?(selection=remap?item.selection.map(remap.slice(mapFrom)):item.selection,remaining=new Branch(this$1.items.slice(0,end).append(addBefore.reverse().concat(addAfter)),this$1.eventCount-1),!1):void 0}),this.items.length,0),{remaining:remaining,transform:transform,selection:selection}},Branch.prototype.addTransform=function(transform,selection,histOptions,preserveItems){for(var newItems=[],eventCount=this.eventCount,oldItems=this.items,lastItem=!preserveItems&&oldItems.length?oldItems.get(oldItems.length-1):null,i=0;i<transform.steps.length;i++){var merged,step=transform.steps[i].invert(transform.docs[i]),item=new Item(transform.mapping.maps[i],step,selection);(merged=lastItem&&lastItem.merge(item))&&(item=merged,i?newItems.pop():oldItems=oldItems.slice(0,oldItems.length-1)),newItems.push(item),selection&&(eventCount++,selection=null),preserveItems||(lastItem=item)}var items,n,cutPoint,overflow=eventCount-histOptions.depth;return overflow>DEPTH_OVERFLOW&&(n=overflow,(items=oldItems).forEach((function(item,i){if(item.selection&&0==n--)return cutPoint=i,!1})),oldItems=items.slice(cutPoint),eventCount-=overflow),new Branch(oldItems.append(newItems),eventCount)},Branch.prototype.remapping=function(from,to){var maps=new dist_index_es.b;return this.items.forEach((function(item,i){maps.appendMap(item.map,null!=item.mirrorOffset&&i-item.mirrorOffset>=from?maps.maps.length-item.mirrorOffset:null)}),from,to),maps},Branch.prototype.addMaps=function(array){return 0==this.eventCount?this:new Branch(this.items.append(array.map((function(map){return new Item(map)}))),this.eventCount)},Branch.prototype.rebased=function(rebasedTransform,rebasedCount){if(!this.eventCount)return this;var rebasedItems=[],start=Math.max(0,this.items.length-rebasedCount),mapping=rebasedTransform.mapping,newUntil=rebasedTransform.steps.length,eventCount=this.eventCount;this.items.forEach((function(item){item.selection&&eventCount--}),start);var iRebased=rebasedCount;this.items.forEach((function(item){var pos=mapping.getMirror(--iRebased);if(null!=pos){newUntil=Math.min(newUntil,pos);var map=mapping.maps[pos];if(item.step){var step=rebasedTransform.steps[pos].invert(rebasedTransform.docs[pos]),selection=item.selection&&item.selection.map(mapping.slice(iRebased+1,pos));selection&&eventCount++,rebasedItems.push(new Item(map,step,selection))}else rebasedItems.push(new Item(map))}}),start);for(var newMaps=[],i=rebasedCount;i<newUntil;i++)newMaps.push(new Item(mapping.maps[i]));var items=this.items.slice(0,start).append(newMaps).append(rebasedItems),branch=new Branch(items,eventCount);return branch.emptyItemCount()>500&&(branch=branch.compress(this.items.length-rebasedItems.length)),branch},Branch.prototype.emptyItemCount=function(){var count=0;return this.items.forEach((function(item){item.step||count++})),count},Branch.prototype.compress=function(upto){void 0===upto&&(upto=this.items.length);var remap=this.remapping(0,upto),mapFrom=remap.maps.length,items=[],events=0;return this.items.forEach((function(item,i){if(i>=upto)items.push(item),item.selection&&events++;else if(item.step){var step=item.step.map(remap.slice(mapFrom)),map=step&&step.getMap();if(mapFrom--,map&&remap.appendMap(map,mapFrom),step){var selection=item.selection&&item.selection.map(remap.slice(mapFrom));selection&&events++;var merged,newItem=new Item(map.invert(),step,selection),last=items.length-1;(merged=items.length&&items[last].merge(newItem))?items[last]=merged:items.push(newItem)}}else item.map&&mapFrom--}),this.items.length,0),new Branch(index_es.from(items.reverse()),events)},Branch.empty=new Branch(index_es.empty,0);var Item=function(map,step,selection,mirrorOffset){this.map=map,this.step=step,this.selection=selection,this.mirrorOffset=mirrorOffset};Item.prototype.merge=function(other){if(this.step&&other.step&&!other.selection){var step=other.step.merge(this.step);if(step)return new Item(step.getMap().invert(),step,this.selection)}};var HistoryState=function(done,undone,prevRanges,prevTime){this.done=done,this.undone=undone,this.prevRanges=prevRanges,this.prevTime=prevTime},DEPTH_OVERFLOW=20;function rangesFor(map){var result=[];return map.forEach((function(_from,_to,from,to){return result.push(from,to)})),result}function mapRanges(ranges,mapping){if(!ranges)return null;for(var result=[],i=0;i<ranges.length;i+=2){var from=mapping.map(ranges[i],1),to=mapping.map(ranges[i+1],-1);from<=to&&result.push(from,to)}return result}function histTransaction(history,state,dispatch,redo){var preserveItems=mustPreserveItems(state),histOptions=historyKey.get(state).spec.config,pop=(redo?history.undone:history.done).popEvent(state,preserveItems);if(pop){var selection=pop.selection.resolve(pop.transform.doc),added=(redo?history.done:history.undone).addTransform(pop.transform,state.selection.getBookmark(),histOptions,preserveItems),newHist=new HistoryState(redo?added:pop.remaining,redo?pop.remaining:added,null,0);dispatch(pop.transform.setSelection(selection).setMeta(historyKey,{redo:redo,historyState:newHist}).scrollIntoView())}}var cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(state){var plugins=state.plugins;if(cachedPreserveItemsPlugins!=plugins){cachedPreserveItems=!1,cachedPreserveItemsPlugins=plugins;for(var i=0;i<plugins.length;i++)if(plugins[i].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}function closeHistory(tr){return tr.setMeta(closeHistoryKey,!0)}var historyKey=new prosemirror_state_dist_index_es.PluginKey("history"),closeHistoryKey=new prosemirror_state_dist_index_es.PluginKey("closeHistory");function index_es_history(config){return new prosemirror_state_dist_index_es.Plugin({key:historyKey,state:{init:function(){return new HistoryState(Branch.empty,Branch.empty,null,0)},apply:function(tr,hist,state){return function(history,state,tr,options){var rebased,historyTr=tr.getMeta(historyKey);if(historyTr)return historyTr.historyState;tr.getMeta(closeHistoryKey)&&(history=new HistoryState(history.done,history.undone,null,0));var appended=tr.getMeta("appendedTransaction");if(0==tr.steps.length)return history;if(appended&&appended.getMeta(historyKey))return appended.getMeta(historyKey).redo?new HistoryState(history.done.addTransform(tr,null,options,mustPreserveItems(state)),history.undone,rangesFor(tr.mapping.maps[tr.steps.length-1]),history.prevTime):new HistoryState(history.done,history.undone.addTransform(tr,null,options,mustPreserveItems(state)),null,history.prevTime);if(!1===tr.getMeta("addToHistory")||appended&&!1===appended.getMeta("addToHistory"))return(rebased=tr.getMeta("rebased"))?new HistoryState(history.done.rebased(tr,rebased),history.undone.rebased(tr,rebased),mapRanges(history.prevRanges,tr.mapping),history.prevTime):new HistoryState(history.done.addMaps(tr.mapping.maps),history.undone.addMaps(tr.mapping.maps),mapRanges(history.prevRanges,tr.mapping),history.prevTime);var newGroup=0==history.prevTime||!appended&&(history.prevTime<(tr.time||0)-options.newGroupDelay||!function(transform,prevRanges){if(!prevRanges)return!1;if(!transform.docChanged)return!0;var adjacent=!1;return transform.mapping.maps[0].forEach((function(start,end){for(var i=0;i<prevRanges.length;i+=2)start<=prevRanges[i+1]&&end>=prevRanges[i]&&(adjacent=!0)})),adjacent}(tr,history.prevRanges)),prevRanges=appended?mapRanges(history.prevRanges,tr.mapping):rangesFor(tr.mapping.maps[tr.steps.length-1]);return new HistoryState(history.done.addTransform(tr,newGroup?state.selection.getBookmark():null,options,mustPreserveItems(state)),Branch.empty,prevRanges,tr.time)}(hist,state,tr,config)}},config:config={depth:config&&config.depth||100,newGroupDelay:config&&config.newGroupDelay||500}})}function undo(state,dispatch){var hist=historyKey.getState(state);return!(!hist||0==hist.done.eventCount||(dispatch&&histTransaction(hist,state,dispatch,!1),0))}function redo(state,dispatch){var hist=historyKey.getState(state);return!(!hist||0==hist.undone.eventCount||(dispatch&&histTransaction(hist,state,dispatch,!0),0))}function undoDepth(state){var hist=historyKey.getState(state);return hist?hist.done.eventCount:0}function redoDepth(state){var hist=historyKey.getState(state);return hist?hist.undone.eventCount:0}},"wSl+":function(module,exports,__webpack_require__){module.exports=function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){return o(e[i][1][r]||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u=!1,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function _has(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}exports.assign=function(obj){for(var sources=Array.prototype.slice.call(arguments,1);sources.length;){var source=sources.shift();if(source){if("object"!=typeof source)throw new TypeError(source+"must be non-object");for(var p in source)_has(source,p)&&(obj[p]=source[p])}}return obj},exports.shrinkBuf=function(buf,size){return buf.length===size?buf:buf.subarray?buf.subarray(0,size):(buf.length=size,buf)};var fnTyped={arraySet:function(dest,src,src_offs,len,dest_offs){if(src.subarray&&dest.subarray)dest.set(src.subarray(src_offs,src_offs+len),dest_offs);else for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){var i,l,len,pos,chunk,result;for(len=0,i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;for(result=new Uint8Array(len),pos=0,i=0,l=chunks.length;i<l;i++)result.set(chunk=chunks[i],pos),pos+=chunk.length;return result}},fnUntyped={arraySet:function(dest,src,src_offs,len,dest_offs){for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){return[].concat.apply([],chunks)}};exports.setTyped=function(on){on?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK)},{}],2:[function(require,module,exports){"use strict";var utils=require("./common"),STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(__){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(__){STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;function buf2binstring(buf,len){if(len<65534&&(buf.subarray&&STR_APPLY_UIA_OK||!buf.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils.shrinkBuf(buf,len));for(var result="",i=0;i<len;i++)result+=String.fromCharCode(buf[i]);return result}_utf8len[254]=_utf8len[254]=1,exports.string2buf=function(str){var buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)55296==(64512&(c=str.charCodeAt(m_pos)))&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=new utils.Buf8(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)55296==(64512&(c=str.charCodeAt(m_pos)))&&m_pos+1<str_len&&56320==(64512&(c2=str.charCodeAt(m_pos+1)))&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|63&c):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|63&c);return buf},exports.buf2binstring=function(buf){return buf2binstring(buf,buf.length)},exports.binstring2buf=function(str){for(var buf=new utils.Buf8(str.length),i=0,len=buf.length;i<len;i++)buf[i]=str.charCodeAt(i);return buf},exports.buf2string=function(buf,max){var i,out,c,c_len,len=max||buf.length,utf16buf=new Array(2*len);for(out=0,i=0;i<len;)if((c=buf[i++])<128)utf16buf[out++]=c;else if((c_len=_utf8len[c])>4)utf16buf[out++]=65533,i+=c_len-1;else{for(c&=2===c_len?31:3===c_len?15:7;c_len>1&&i<len;)c=c<<6|63&buf[i++],c_len--;c_len>1?utf16buf[out++]=65533:c<65536?utf16buf[out++]=c:(utf16buf[out++]=55296|(c-=65536)>>10&1023,utf16buf[out++]=56320|1023&c)}return buf2binstring(utf16buf,out)},exports.utf8border=function(buf,max){var pos;for((max=max||buf.length)>buf.length&&(max=buf.length),pos=max-1;pos>=0&&128==(192&buf[pos]);)pos--;return pos<0||0===pos?max:pos+_utf8len[buf[pos]]>max?pos:max}},{"./common":1}],3:[function(require,module,exports){"use strict";module.exports=function(adler,buf,len,pos){for(var s1=65535&adler|0,s2=adler>>>16&65535|0,n=0;0!==len;){len-=n=len>2e3?2e3:len;do{s2=s2+(s1=s1+buf[pos++]|0)|0}while(--n);s1%=65521,s2%=65521}return s1|s2<<16|0}},{}],4:[function(require,module,exports){"use strict";var crcTable=function(){for(var c,table=[],n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=1&c?3988292384^c>>>1:c>>>1;table[n]=c}return table}();module.exports=function(crc,buf,len,pos){var t=crcTable,end=pos+len;crc^=-1;for(var i=pos;i<end;i++)crc=crc>>>8^t[255&(crc^buf[i])];return-1^crc}},{}],5:[function(require,module,exports){"use strict";var configuration_table,utils=require("../utils/common"),trees=require("./trees"),adler32=require("./adler32"),crc32=require("./crc32"),msg=require("./messages");function err(strm,errorCode){return strm.msg=msg[errorCode],errorCode}function rank(f){return(f<<1)-(f>4?9:0)}function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}function flush_pending(strm){var s=strm.state,len=s.pending;len>strm.avail_out&&(len=strm.avail_out),0!==len&&(utils.arraySet(strm.output,s.pending_buf,s.pending_out,len,strm.next_out),strm.next_out+=len,s.pending_out+=len,strm.total_out+=len,strm.avail_out-=len,s.pending-=len,0===s.pending&&(s.pending_out=0))}function flush_block_only(s,last){trees._tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last),s.block_start=s.strstart,flush_pending(s.strm)}function put_byte(s,b){s.pending_buf[s.pending++]=b}function putShortMSB(s,b){s.pending_buf[s.pending++]=b>>>8&255,s.pending_buf[s.pending++]=255&b}function longest_match(s,cur_match){var match,len,chain_length=s.max_chain_length,scan=s.strstart,best_len=s.prev_length,nice_match=s.nice_match,limit=s.strstart>s.w_size-262?s.strstart-(s.w_size-262):0,_win=s.window,wmask=s.w_mask,prev=s.prev,strend=s.strstart+258,scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len];s.prev_length>=s.good_match&&(chain_length>>=2),nice_match>s.lookahead&&(nice_match=s.lookahead);do{if(_win[(match=cur_match)+best_len]===scan_end&&_win[match+best_len-1]===scan_end1&&_win[match]===_win[scan]&&_win[++match]===_win[scan+1]){scan+=2,match++;do{}while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);if(len=258-(strend-scan),scan=strend-258,len>best_len){if(s.match_start=cur_match,best_len=len,len>=nice_match)break;scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len]}}}while((cur_match=prev[cur_match&wmask])>limit&&0!=--chain_length);return best_len<=s.lookahead?best_len:s.lookahead}function fill_window(s){var p,n,m,more,str,strm,buf,start,size,len,_w_size=s.w_size;do{if(more=s.window_size-s.lookahead-s.strstart,s.strstart>=_w_size+(_w_size-262)){utils.arraySet(s.window,s.window,_w_size,_w_size,0),s.match_start-=_w_size,s.strstart-=_w_size,s.block_start-=_w_size,p=n=s.hash_size;do{m=s.head[--p],s.head[p]=m>=_w_size?m-_w_size:0}while(--n);p=n=_w_size;do{m=s.prev[--p],s.prev[p]=m>=_w_size?m-_w_size:0}while(--n);more+=_w_size}if(0===s.strm.avail_in)break;if(buf=s.window,start=s.strstart+s.lookahead,len=void 0,(len=(strm=s.strm).avail_in)>(size=more)&&(len=size),n=0===len?0:(strm.avail_in-=len,utils.arraySet(buf,strm.input,strm.next_in,len,start),1===strm.state.wrap?strm.adler=adler32(strm.adler,buf,len,start):2===strm.state.wrap&&(strm.adler=crc32(strm.adler,buf,len,start)),strm.next_in+=len,strm.total_in+=len,len),s.lookahead+=n,s.lookahead+s.insert>=3)for(s.ins_h=s.window[str=s.strstart-s.insert],s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+3-1])&s.hash_mask,s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++,s.insert--,!(s.lookahead+s.insert<3)););}while(s.lookahead<262&&0!==s.strm.avail_in)}function deflate_fast(s,flush){for(var hash_head,bflush;;){if(s.lookahead<262){if(fill_window(s),s.lookahead<262&&0===flush)return 1;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=3&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+3-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),0!==hash_head&&s.strstart-hash_head<=s.w_size-262&&(s.match_length=longest_match(s,hash_head)),s.match_length>=3)if(bflush=trees._tr_tally(s,s.strstart-s.match_start,s.match_length-3),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=3){s.match_length--;do{s.strstart++,s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+3-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart}while(0!=--s.match_length);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask;else bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=s.strstart<2?s.strstart:2,4===flush?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2}function deflate_slow(s,flush){for(var hash_head,bflush,max_insert;;){if(s.lookahead<262){if(fill_window(s),s.lookahead<262&&0===flush)return 1;if(0===s.lookahead)break}if(hash_head=0,s.lookahead>=3&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+3-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=2,0!==hash_head&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-262&&(s.match_length=longest_match(s,hash_head),s.match_length<=5&&(1===s.strategy||3===s.match_length&&s.strstart-s.match_start>4096)&&(s.match_length=2)),s.prev_length>=3&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-3,bflush=trees._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-3),s.lookahead-=s.prev_length-1,s.prev_length-=2;do{++s.strstart<=max_insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+3-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart)}while(0!=--s.prev_length);if(s.match_available=0,s.match_length=2,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}else if(s.match_available){if((bflush=trees._tr_tally(s,0,s.window[s.strstart-1]))&&flush_block_only(s,!1),s.strstart++,s.lookahead--,0===s.strm.avail_out)return 1}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(bflush=trees._tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<2?s.strstart:2,4===flush?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2}function Config(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length,this.max_lazy=max_lazy,this.nice_length=nice_length,this.max_chain=max_chain,this.func=func}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils.Buf16(1146),this.dyn_dtree=new utils.Buf16(122),this.bl_tree=new utils.Buf16(78),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils.Buf16(16),this.heap=new utils.Buf16(573),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils.Buf16(573),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(strm){var s;return strm&&strm.state?(strm.total_in=strm.total_out=0,strm.data_type=2,(s=strm.state).pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap?42:113,strm.adler=2===s.wrap?0:1,s.last_flush=0,trees._tr_init(s),0):err(strm,-2)}function deflateReset(strm){var s,ret=deflateResetKeep(strm);return 0===ret&&((s=strm.state).window_size=2*s.w_size,zero(s.head),s.max_lazy_match=configuration_table[s.level].max_lazy,s.good_match=configuration_table[s.level].good_length,s.nice_match=configuration_table[s.level].nice_length,s.max_chain_length=configuration_table[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0),ret}function deflateInit2(strm,level,method,windowBits,memLevel,strategy){if(!strm)return-2;var wrap=1;if(-1===level&&(level=6),windowBits<0?(wrap=0,windowBits=-windowBits):windowBits>15&&(wrap=2,windowBits-=16),memLevel<1||memLevel>9||8!==method||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>4)return err(strm,-2);8===windowBits&&(windowBits=9);var s=new DeflateState;return strm.state=s,s.strm=strm,s.wrap=wrap,s.gzhead=null,s.w_bits=windowBits,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=memLevel+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new utils.Buf8(2*s.w_size),s.head=new utils.Buf16(s.hash_size),s.prev=new utils.Buf16(s.w_size),s.lit_bufsize=1<<memLevel+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new utils.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=level,s.strategy=strategy,s.method=method,deflateReset(strm)}configuration_table=[new Config(0,0,0,0,(function(s,flush){var max_block_size=65535;for(max_block_size>s.pending_buf_size-5&&(max_block_size=s.pending_buf_size-5);;){if(s.lookahead<=1){if(fill_window(s),0===s.lookahead&&0===flush)return 1;if(0===s.lookahead)break}s.strstart+=s.lookahead,s.lookahead=0;var max_start=s.block_start+max_block_size;if((0===s.strstart||s.strstart>=max_start)&&(s.lookahead=s.strstart-max_start,s.strstart=max_start,flush_block_only(s,!1),0===s.strm.avail_out))return 1;if(s.strstart-s.block_start>=s.w_size-262&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=0,4===flush?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):(s.strstart>s.block_start&&flush_block_only(s,!1),1)})),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],exports.deflateInit=function(strm,level){return deflateInit2(strm,level,8,15,8,0)},exports.deflateInit2=deflateInit2,exports.deflateReset=deflateReset,exports.deflateResetKeep=deflateResetKeep,exports.deflateSetHeader=function(strm,head){return strm&&strm.state?2!==strm.state.wrap?-2:(strm.state.gzhead=head,0):-2},exports.deflate=function(strm,flush){var old_flush,s,beg,val;if(!strm||!strm.state||flush>5||flush<0)return strm?err(strm,-2):-2;if(s=strm.state,!strm.output||!strm.input&&0!==strm.avail_in||666===s.status&&4!==flush)return err(strm,0===strm.avail_out?-5:-2);if(s.strm=strm,old_flush=s.last_flush,s.last_flush=flush,42===s.status)if(2===s.wrap)strm.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead?(put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,255&s.gzhead.time),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),put_byte(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,255&s.gzhead.extra.length),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),put_byte(s,3),s.status=113);else{var header=8+(s.w_bits-8<<4)<<8;header|=(s.strategy>=2||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(header|=32),header+=31-header%31,s.status=113,putShortMSB(s,header),0!==s.strstart&&(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),strm.adler=1}if(69===s.status)if(s.gzhead.extra){for(beg=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending!==s.pending_buf_size));)put_byte(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),0===val&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,put_byte(s,val)}while(0!==val);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),0===val&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&flush_pending(strm),s.pending+2<=s.pending_buf_size&&(put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),strm.adler=0,s.status=113)):s.status=113),0!==s.pending){if(flush_pending(strm),0===strm.avail_out)return s.last_flush=-1,0}else if(0===strm.avail_in&&rank(flush)<=rank(old_flush)&&4!==flush)return err(strm,-5);if(666===s.status&&0!==strm.avail_in)return err(strm,-5);if(0!==strm.avail_in||0!==s.lookahead||0!==flush&&666!==s.status){var bstate=2===s.strategy?function(s,flush){for(var bflush;;){if(0===s.lookahead&&(fill_window(s),0===s.lookahead)){if(0===flush)return 1;break}if(s.match_length=0,bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=0,4===flush?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2}(s,flush):3===s.strategy?function(s,flush){for(var bflush,prev,scan,strend,_win=s.window;;){if(s.lookahead<=258){if(fill_window(s),s.lookahead<=258&&0===flush)return 1;if(0===s.lookahead)break}if(s.match_length=0,s.lookahead>=3&&s.strstart>0&&(prev=_win[scan=s.strstart-1])===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]){strend=s.strstart+258;do{}while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=258-(strend-scan),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=3?(bflush=trees._tr_tally(s,1,s.match_length-3),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),bflush&&(flush_block_only(s,!1),0===s.strm.avail_out))return 1}return s.insert=0,4===flush?(flush_block_only(s,!0),0===s.strm.avail_out?3:4):s.last_lit&&(flush_block_only(s,!1),0===s.strm.avail_out)?1:2}(s,flush):configuration_table[s.level].func(s,flush);if(3!==bstate&&4!==bstate||(s.status=666),1===bstate||3===bstate)return 0===strm.avail_out&&(s.last_flush=-1),0;if(2===bstate&&(1===flush?trees._tr_align(s):5!==flush&&(trees._tr_stored_block(s,0,0,!1),3===flush&&(zero(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(strm),0===strm.avail_out))return s.last_flush=-1,0}return 4!==flush?0:s.wrap<=0?1:(2===s.wrap?(put_byte(s,255&strm.adler),put_byte(s,strm.adler>>8&255),put_byte(s,strm.adler>>16&255),put_byte(s,strm.adler>>24&255),put_byte(s,255&strm.total_in),put_byte(s,strm.total_in>>8&255),put_byte(s,strm.total_in>>16&255),put_byte(s,strm.total_in>>24&255)):(putShortMSB(s,strm.adler>>>16),putShortMSB(s,65535&strm.adler)),flush_pending(strm),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?0:1)},exports.deflateEnd=function(strm){var status;return strm&&strm.state?42!==(status=strm.state.status)&&69!==status&&73!==status&&91!==status&&103!==status&&113!==status&&666!==status?err(strm,-2):(strm.state=null,113===status?err(strm,-3):0):-2},exports.deflateSetDictionary=function(strm,dictionary){var s,str,n,wrap,avail,next,input,tmpDict,dictLength=dictionary.length;if(!strm||!strm.state)return-2;if(2===(wrap=(s=strm.state).wrap)||1===wrap&&42!==s.status||s.lookahead)return-2;for(1===wrap&&(strm.adler=adler32(strm.adler,dictionary,dictLength,0)),s.wrap=0,dictLength>=s.w_size&&(0===wrap&&(zero(s.head),s.strstart=0,s.block_start=0,s.insert=0),tmpDict=new utils.Buf8(s.w_size),utils.arraySet(tmpDict,dictionary,dictLength-s.w_size,s.w_size,0),dictionary=tmpDict,dictLength=s.w_size),avail=strm.avail_in,next=strm.next_in,input=strm.input,strm.avail_in=dictLength,strm.next_in=0,strm.input=dictionary,fill_window(s);s.lookahead>=3;){str=s.strstart,n=s.lookahead-2;do{s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+3-1])&s.hash_mask,s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++}while(--n);s.strstart=str,s.lookahead=2,fill_window(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=2,s.match_available=0,strm.next_in=next,strm.input=input,strm.avail_in=avail,s.wrap=wrap,0},exports.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":4,"./messages":6,"./trees":7}],6:[function(require,module,exports){"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],7:[function(require,module,exports){"use strict";var utils=require("../utils/common");function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}var extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],static_ltree=new Array(576);zero(static_ltree);var static_dtree=new Array(60);zero(static_dtree);var _dist_code=new Array(512);zero(_dist_code);var _length_code=new Array(256);zero(_length_code);var base_length=new Array(29);zero(base_length);var static_l_desc,static_d_desc,static_bl_desc,base_dist=new Array(30);function StaticTreeDesc(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree,this.extra_bits=extra_bits,this.extra_base=extra_base,this.elems=elems,this.max_length=max_length,this.has_stree=static_tree&&static_tree.length}function TreeDesc(dyn_tree,stat_desc){this.dyn_tree=dyn_tree,this.max_code=0,this.stat_desc=stat_desc}function d_code(dist){return dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)]}function put_short(s,w){s.pending_buf[s.pending++]=255&w,s.pending_buf[s.pending++]=w>>>8&255}function send_bits(s,value,length){s.bi_valid>16-length?(s.bi_buf|=value<<s.bi_valid&65535,put_short(s,s.bi_buf),s.bi_buf=value>>16-s.bi_valid,s.bi_valid+=length-16):(s.bi_buf|=value<<s.bi_valid&65535,s.bi_valid+=length)}function send_code(s,c,tree){send_bits(s,tree[2*c],tree[2*c+1])}function bi_reverse(code,len){var res=0;do{res|=1&code,code>>>=1,res<<=1}while(--len>0);return res>>>1}function gen_codes(tree,max_code,bl_count){var bits,n,next_code=new Array(16),code=0;for(bits=1;bits<=15;bits++)next_code[bits]=code=code+bl_count[bits-1]<<1;for(n=0;n<=max_code;n++){var len=tree[2*n+1];0!==len&&(tree[2*n]=bi_reverse(next_code[len]++,len))}}function init_block(s){var n;for(n=0;n<286;n++)s.dyn_ltree[2*n]=0;for(n=0;n<30;n++)s.dyn_dtree[2*n]=0;for(n=0;n<19;n++)s.bl_tree[2*n]=0;s.dyn_ltree[512]=1,s.opt_len=s.static_len=0,s.last_lit=s.matches=0}function bi_windup(s){s.bi_valid>8?put_short(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0}function smaller(tree,n,m,depth){var _n2=2*n,_m2=2*m;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]}function pqdownheap(s,tree,k){for(var v=s.heap[k],j=k<<1;j<=s.heap_len&&(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)&&j++,!smaller(tree,v,s.heap[j],s.depth));)s.heap[k]=s.heap[j],k=j,j<<=1;s.heap[k]=v}function compress_block(s,ltree,dtree){var dist,lc,code,extra,lx=0;if(0!==s.last_lit)do{dist=s.pending_buf[s.d_buf+2*lx]<<8|s.pending_buf[s.d_buf+2*lx+1],lc=s.pending_buf[s.l_buf+lx],lx++,0===dist?send_code(s,lc,ltree):(send_code(s,(code=_length_code[lc])+256+1,ltree),0!==(extra=extra_lbits[code])&&send_bits(s,lc-=base_length[code],extra),send_code(s,code=d_code(--dist),dtree),0!==(extra=extra_dbits[code])&&send_bits(s,dist-=base_dist[code],extra))}while(lx<s.last_lit);send_code(s,256,ltree)}function build_tree(s,desc){var n,m,node,tree=desc.dyn_tree,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,elems=desc.stat_desc.elems,max_code=-1;for(s.heap_len=0,s.heap_max=573,n=0;n<elems;n++)0!==tree[2*n]?(s.heap[++s.heap_len]=max_code=n,s.depth[n]=0):tree[2*n+1]=0;for(;s.heap_len<2;)tree[2*(node=s.heap[++s.heap_len]=max_code<2?++max_code:0)]=1,s.depth[node]=0,s.opt_len--,has_stree&&(s.static_len-=stree[2*node+1]);for(desc.max_code=max_code,n=s.heap_len>>1;n>=1;n--)pqdownheap(s,tree,n);node=elems;do{n=s.heap[1],s.heap[1]=s.heap[s.heap_len--],pqdownheap(s,tree,1),m=s.heap[1],s.heap[--s.heap_max]=n,s.heap[--s.heap_max]=m,tree[2*node]=tree[2*n]+tree[2*m],s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1,tree[2*n+1]=tree[2*m+1]=node,s.heap[1]=node++,pqdownheap(s,tree,1)}while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],function(s,desc){var h,n,m,bits,xbits,f,tree=desc.dyn_tree,max_code=desc.max_code,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,extra=desc.stat_desc.extra_bits,base=desc.stat_desc.extra_base,max_length=desc.stat_desc.max_length,overflow=0;for(bits=0;bits<=15;bits++)s.bl_count[bits]=0;for(tree[2*s.heap[s.heap_max]+1]=0,h=s.heap_max+1;h<573;h++)(bits=tree[2*tree[2*(n=s.heap[h])+1]+1]+1)>max_length&&(bits=max_length,overflow++),tree[2*n+1]=bits,n>max_code||(s.bl_count[bits]++,xbits=0,n>=base&&(xbits=extra[n-base]),s.opt_len+=(f=tree[2*n])*(bits+xbits),has_stree&&(s.static_len+=f*(stree[2*n+1]+xbits)));if(0!==overflow){do{for(bits=max_length-1;0===s.bl_count[bits];)bits--;s.bl_count[bits]--,s.bl_count[bits+1]+=2,s.bl_count[max_length]--,overflow-=2}while(overflow>0);for(bits=max_length;0!==bits;bits--)for(n=s.bl_count[bits];0!==n;)(m=s.heap[--h])>max_code||(tree[2*m+1]!==bits&&(s.opt_len+=(bits-tree[2*m+1])*tree[2*m],tree[2*m+1]=bits),n--)}}(s,desc),gen_codes(tree,max_code,s.bl_count)}function scan_tree(s,tree,max_code){var n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),tree[2*(max_code+1)+1]=65535,n=0;n<=max_code;n++)curlen=nextlen,nextlen=tree[2*(n+1)+1],++count<max_count&&curlen===nextlen||(count<min_count?s.bl_tree[2*curlen]+=count:0!==curlen?(curlen!==prevlen&&s.bl_tree[2*curlen]++,s.bl_tree[32]++):count<=10?s.bl_tree[34]++:s.bl_tree[36]++,count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4))}function send_tree(s,tree,max_code){var n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),n=0;n<=max_code;n++)if(curlen=nextlen,nextlen=tree[2*(n+1)+1],!(++count<max_count&&curlen===nextlen)){if(count<min_count)do{send_code(s,curlen,s.bl_tree)}while(0!=--count);else 0!==curlen?(curlen!==prevlen&&(send_code(s,curlen,s.bl_tree),count--),send_code(s,16,s.bl_tree),send_bits(s,count-3,2)):count<=10?(send_code(s,17,s.bl_tree),send_bits(s,count-3,3)):(send_code(s,18,s.bl_tree),send_bits(s,count-11,7));count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4)}}zero(base_dist);var static_init_done=!1;function _tr_stored_block(s,buf,stored_len,last){send_bits(s,0+(last?1:0),3),function(s,buf,len,header){bi_windup(s),put_short(s,len),put_short(s,~len),utils.arraySet(s.pending_buf,s.window,buf,len,s.pending),s.pending+=len}(s,buf,stored_len)}exports._tr_init=function(s){static_init_done||(function(){var n,bits,length,code,dist,bl_count=new Array(16);for(length=0,code=0;code<28;code++)for(base_length[code]=length,n=0;n<1<<extra_lbits[code];n++)_length_code[length++]=code;for(_length_code[length-1]=code,dist=0,code=0;code<16;code++)for(base_dist[code]=dist,n=0;n<1<<extra_dbits[code];n++)_dist_code[dist++]=code;for(dist>>=7;code<30;code++)for(base_dist[code]=dist<<7,n=0;n<1<<extra_dbits[code]-7;n++)_dist_code[256+dist++]=code;for(bits=0;bits<=15;bits++)bl_count[bits]=0;for(n=0;n<=143;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(;n<=255;)static_ltree[2*n+1]=9,n++,bl_count[9]++;for(;n<=279;)static_ltree[2*n+1]=7,n++,bl_count[7]++;for(;n<=287;)static_ltree[2*n+1]=8,n++,bl_count[8]++;for(gen_codes(static_ltree,287,bl_count),n=0;n<30;n++)static_dtree[2*n+1]=5,static_dtree[2*n]=bi_reverse(n,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,257,286,15),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,30,15),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,19,7)}(),static_init_done=!0),s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc),s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc),s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc),s.bi_buf=0,s.bi_valid=0,init_block(s)},exports._tr_stored_block=_tr_stored_block,exports._tr_flush_block=function(s,buf,stored_len,last){var opt_lenb,static_lenb,max_blindex=0;s.level>0?(2===s.strm.data_type&&(s.strm.data_type=function(s){var n,black_mask=4093624447;for(n=0;n<=31;n++,black_mask>>>=1)if(1&black_mask&&0!==s.dyn_ltree[2*n])return 0;if(0!==s.dyn_ltree[18]||0!==s.dyn_ltree[20]||0!==s.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==s.dyn_ltree[2*n])return 1;return 0}(s)),build_tree(s,s.l_desc),build_tree(s,s.d_desc),max_blindex=function(s){var max_blindex;for(scan_tree(s,s.dyn_ltree,s.l_desc.max_code),scan_tree(s,s.dyn_dtree,s.d_desc.max_code),build_tree(s,s.bl_desc),max_blindex=18;max_blindex>=3&&0===s.bl_tree[2*bl_order[max_blindex]+1];max_blindex--);return s.opt_len+=3*(max_blindex+1)+5+5+4,max_blindex}(s),(static_lenb=s.static_len+3+7>>>3)<=(opt_lenb=s.opt_len+3+7>>>3)&&(opt_lenb=static_lenb)):opt_lenb=static_lenb=stored_len+5,stored_len+4<=opt_lenb&&-1!==buf?_tr_stored_block(s,buf,stored_len,last):4===s.strategy||static_lenb===opt_lenb?(send_bits(s,2+(last?1:0),3),compress_block(s,static_ltree,static_dtree)):(send_bits(s,4+(last?1:0),3),function(s,lcodes,dcodes,blcodes){var rank;for(send_bits(s,lcodes-257,5),send_bits(s,dcodes-1,5),send_bits(s,blcodes-4,4),rank=0;rank<blcodes;rank++)send_bits(s,s.bl_tree[2*bl_order[rank]+1],3);send_tree(s,s.dyn_ltree,lcodes-1),send_tree(s,s.dyn_dtree,dcodes-1)}(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1),compress_block(s,s.dyn_ltree,s.dyn_dtree)),init_block(s),last&&bi_windup(s)},exports._tr_tally=function(s,dist,lc){return s.pending_buf[s.d_buf+2*s.last_lit]=dist>>>8&255,s.pending_buf[s.d_buf+2*s.last_lit+1]=255&dist,s.pending_buf[s.l_buf+s.last_lit]=255&lc,s.last_lit++,0===dist?s.dyn_ltree[2*lc]++:(s.matches++,dist--,s.dyn_ltree[2*(_length_code[lc]+256+1)]++,s.dyn_dtree[2*d_code(dist)]++),s.last_lit===s.lit_bufsize-1},exports._tr_align=function(s){send_bits(s,2,3),send_code(s,256,static_ltree),function(s){16===s.bi_valid?(put_short(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=255&s.bi_buf,s.bi_buf>>=8,s.bi_valid-=8)}(s)}},{"../utils/common":1}],8:[function(require,module,exports){"use strict";module.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/deflate.js":[function(require,module,exports){"use strict";var zlib_deflate=require("./zlib/deflate"),utils=require("./utils/common"),strings=require("./utils/strings"),msg=require("./zlib/messages"),ZStream=require("./zlib/zstream"),toString=Object.prototype.toString;function Deflate(options){if(!(this instanceof Deflate))return new Deflate(options);this.options=utils.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},options||{});var opt=this.options;opt.raw&&opt.windowBits>0?opt.windowBits=-opt.windowBits:opt.gzip&&opt.windowBits>0&&opt.windowBits<16&&(opt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var status=zlib_deflate.deflateInit2(this.strm,opt.level,opt.method,opt.windowBits,opt.memLevel,opt.strategy);if(0!==status)throw new Error(msg[status]);if(opt.header&&zlib_deflate.deflateSetHeader(this.strm,opt.header),opt.dictionary){var dict;if(dict="string"==typeof opt.dictionary?strings.string2buf(opt.dictionary):"[object ArrayBuffer]"===toString.call(opt.dictionary)?new Uint8Array(opt.dictionary):opt.dictionary,0!==(status=zlib_deflate.deflateSetDictionary(this.strm,dict)))throw new Error(msg[status]);this._dict_set=!0}}function deflate(input,options){var deflator=new Deflate(options);if(deflator.push(input,!0),deflator.err)throw deflator.msg||msg[deflator.err];return deflator.result}Deflate.prototype.push=function(data,mode){var status,_mode,strm=this.strm,chunkSize=this.options.chunkSize;if(this.ended)return!1;_mode=mode===~~mode?mode:!0===mode?4:0,strm.input="string"==typeof data?strings.string2buf(data):"[object ArrayBuffer]"===toString.call(data)?new Uint8Array(data):data,strm.next_in=0,strm.avail_in=strm.input.length;do{if(0===strm.avail_out&&(strm.output=new utils.Buf8(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),1!==(status=zlib_deflate.deflate(strm,_mode))&&0!==status)return this.onEnd(status),this.ended=!0,!1;0!==strm.avail_out&&(0!==strm.avail_in||4!==_mode&&2!==_mode)||this.onData("string"===this.options.to?strings.buf2binstring(utils.shrinkBuf(strm.output,strm.next_out)):utils.shrinkBuf(strm.output,strm.next_out))}while((strm.avail_in>0||0===strm.avail_out)&&1!==status);return 4===_mode?(status=zlib_deflate.deflateEnd(this.strm),this.onEnd(status),this.ended=!0,0===status):2!==_mode||(this.onEnd(0),strm.avail_out=0,!0)},Deflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Deflate.prototype.onEnd=function(status){0===status&&(this.result="string"===this.options.to?this.chunks.join(""):utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg},exports.Deflate=Deflate,exports.deflate=deflate,exports.deflateRaw=function(input,options){return(options=options||{}).raw=!0,deflate(input,options)},exports.gzip=function(input,options){return(options=options||{}).gzip=!0,deflate(input,options)}},{"./utils/common":1,"./utils/strings":2,"./zlib/deflate":5,"./zlib/messages":6,"./zlib/zstream":8}]},{},[])("/lib/deflate.js")},xutz:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(module){var _freeGlobal_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("XqMk"),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,freeProcess=freeModule&&freeModule.exports===freeExports&&_freeGlobal_js__WEBPACK_IMPORTED_MODULE_0__.a.process,nodeUtil=function(){try{return freeModule&&freeModule.require&&freeModule.require("util").types||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();__webpack_exports__.a=nodeUtil}).call(this,__webpack_require__("3UD+")(module))},zUnb:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var easing_functions_namespaceObject={};function isFunction(x){return"function"==typeof x}__webpack_require__.r(easing_functions_namespaceObject),__webpack_require__.d(easing_functions_namespaceObject,"swing",(function(){return swing})),__webpack_require__.d(easing_functions_namespaceObject,"linear",(function(){return linear})),__webpack_require__.d(easing_functions_namespaceObject,"easeOutElastic",(function(){return easeOutElastic}));let _enable_super_gross_mode_that_will_cause_bad_things=!1;const config_config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(value){if(value){const error=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+error.stack)}else _enable_super_gross_mode_that_will_cause_bad_things&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_enable_super_gross_mode_that_will_cause_bad_things=value},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(err){setTimeout(()=>{throw err},0)}const Observer_empty={closed:!0,next(value){},error(err){if(config_config.useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)},complete(){}},isArray=(()=>Array.isArray||(x=>x&&"number"==typeof x.length))();function isObject(x){return null!==x&&"object"==typeof x}const UnsubscriptionError=(()=>{function UnsubscriptionErrorImpl(errors){return Error.call(this),this.message=errors?`${errors.length} errors occurred during unsubscription:\n${errors.map((err,i)=>`${i+1}) ${err.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=errors,this}return UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype),UnsubscriptionErrorImpl})();let Subscription_Subscription=(()=>{class Subscription{constructor(unsubscribe){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,unsubscribe&&(this._unsubscribe=unsubscribe)}unsubscribe(){let errors;if(this.closed)return;let{_parentOrParents:_parentOrParents,_unsubscribe:_unsubscribe,_subscriptions:_subscriptions}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,_parentOrParents instanceof Subscription)_parentOrParents.remove(this);else if(null!==_parentOrParents)for(let index=0;index<_parentOrParents.length;++index)_parentOrParents[index].remove(this);if(isFunction(_unsubscribe))try{_unsubscribe.call(this)}catch(e){errors=e instanceof UnsubscriptionError?flattenUnsubscriptionErrors(e.errors):[e]}if(isArray(_subscriptions)){let index=-1,len=_subscriptions.length;for(;++index<len;){const sub=_subscriptions[index];if(isObject(sub))try{sub.unsubscribe()}catch(e){errors=errors||[],e instanceof UnsubscriptionError?errors=errors.concat(flattenUnsubscriptionErrors(e.errors)):errors.push(e)}}}if(errors)throw new UnsubscriptionError(errors)}add(teardown){let subscription=teardown;if(!teardown)return Subscription.EMPTY;switch(typeof teardown){case"function":subscription=new Subscription(teardown);case"object":if(subscription===this||subscription.closed||"function"!=typeof subscription.unsubscribe)return subscription;if(this.closed)return subscription.unsubscribe(),subscription;if(!(subscription instanceof Subscription)){const tmp=subscription;subscription=new Subscription,subscription._subscriptions=[tmp]}break;default:throw new Error("unrecognized teardown "+teardown+" added to Subscription.")}let{_parentOrParents:_parentOrParents}=subscription;if(null===_parentOrParents)subscription._parentOrParents=this;else if(_parentOrParents instanceof Subscription){if(_parentOrParents===this)return subscription;subscription._parentOrParents=[_parentOrParents,this]}else{if(-1!==_parentOrParents.indexOf(this))return subscription;_parentOrParents.push(this)}const subscriptions=this._subscriptions;return null===subscriptions?this._subscriptions=[subscription]:subscriptions.push(subscription),subscription}remove(subscription){const subscriptions=this._subscriptions;if(subscriptions){const subscriptionIndex=subscriptions.indexOf(subscription);-1!==subscriptionIndex&&subscriptions.splice(subscriptionIndex,1)}}}var empty;return Subscription.EMPTY=((empty=new Subscription).closed=!0,empty),Subscription})();function flattenUnsubscriptionErrors(errors){return errors.reduce((errs,err)=>errs.concat(err instanceof UnsubscriptionError?err.errors:err),[])}const rxSubscriber=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class Subscriber_Subscriber extends Subscription_Subscription{constructor(destinationOrNext,error,complete){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Observer_empty;break;case 1:if(!destinationOrNext){this.destination=Observer_empty;break}if("object"==typeof destinationOrNext){destinationOrNext instanceof Subscriber_Subscriber?(this.syncErrorThrowable=destinationOrNext.syncErrorThrowable,this.destination=destinationOrNext,destinationOrNext.add(this)):(this.syncErrorThrowable=!0,this.destination=new Subscriber_SafeSubscriber(this,destinationOrNext));break}default:this.syncErrorThrowable=!0,this.destination=new Subscriber_SafeSubscriber(this,destinationOrNext,error,complete)}}[rxSubscriber](){return this}static create(next,error,complete){const subscriber=new Subscriber_Subscriber(next,error,complete);return subscriber.syncErrorThrowable=!1,subscriber}next(value){this.isStopped||this._next(value)}error(err){this.isStopped||(this.isStopped=!0,this._error(err))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(value){this.destination.next(value)}_error(err){this.destination.error(err),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:_parentOrParents}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=_parentOrParents,this}}class Subscriber_SafeSubscriber extends Subscriber_Subscriber{constructor(_parentSubscriber,observerOrNext,error,complete){let next;super(),this._parentSubscriber=_parentSubscriber;let context=this;isFunction(observerOrNext)?next=observerOrNext:observerOrNext&&(next=observerOrNext.next,error=observerOrNext.error,complete=observerOrNext.complete,observerOrNext!==Observer_empty&&(context=Object.create(observerOrNext),isFunction(context.unsubscribe)&&this.add(context.unsubscribe.bind(context)),context.unsubscribe=this.unsubscribe.bind(this))),this._context=context,this._next=next,this._error=error,this._complete=complete}next(value){if(!this.isStopped&&this._next){const{_parentSubscriber:_parentSubscriber}=this;config_config.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?this.__tryOrSetError(_parentSubscriber,this._next,value)&&this.unsubscribe():this.__tryOrUnsub(this._next,value)}}error(err){if(!this.isStopped){const{_parentSubscriber:_parentSubscriber}=this,{useDeprecatedSynchronousErrorHandling:useDeprecatedSynchronousErrorHandling}=config_config;if(this._error)useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,this._error,err),this.unsubscribe()):(this.__tryOrUnsub(this._error,err),this.unsubscribe());else if(_parentSubscriber.syncErrorThrowable)useDeprecatedSynchronousErrorHandling?(_parentSubscriber.syncErrorValue=err,_parentSubscriber.syncErrorThrown=!0):hostReportError(err),this.unsubscribe();else{if(this.unsubscribe(),useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)}}}complete(){if(!this.isStopped){const{_parentSubscriber:_parentSubscriber}=this;if(this._complete){const wrappedComplete=()=>this._complete.call(this._context);config_config.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,wrappedComplete),this.unsubscribe()):(this.__tryOrUnsub(wrappedComplete),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(fn,value){try{fn.call(this._context,value)}catch(err){if(this.unsubscribe(),config_config.useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)}}__tryOrSetError(parent,fn,value){if(!config_config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{fn.call(this._context,value)}catch(err){return config_config.useDeprecatedSynchronousErrorHandling?(parent.syncErrorValue=err,parent.syncErrorThrown=!0,!0):(hostReportError(err),!0)}return!1}_unsubscribe(){const{_parentSubscriber:_parentSubscriber}=this;this._context=null,this._parentSubscriber=null,_parentSubscriber.unsubscribe()}}const observable_observable=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function identity_identity(x){return x}function pipe(...fns){return pipeFromArray(fns)}function pipeFromArray(fns){return 0===fns.length?identity_identity:1===fns.length?fns[0]:function(input){return fns.reduce((prev,fn)=>fn(prev),input)}}let Observable_Observable=(()=>{class Observable{constructor(subscribe){this._isScalar=!1,subscribe&&(this._subscribe=subscribe)}lift(operator){const observable=new Observable;return observable.source=this,observable.operator=operator,observable}subscribe(observerOrNext,error,complete){const{operator:operator}=this,sink=function(nextOrObserver,error,complete){if(nextOrObserver){if(nextOrObserver instanceof Subscriber_Subscriber)return nextOrObserver;if(nextOrObserver[rxSubscriber])return nextOrObserver[rxSubscriber]()}return nextOrObserver||error||complete?new Subscriber_Subscriber(nextOrObserver,error,complete):new Subscriber_Subscriber(Observer_empty)}(observerOrNext,error,complete);if(sink.add(operator?operator.call(sink,this.source):this.source||config_config.useDeprecatedSynchronousErrorHandling&&!sink.syncErrorThrowable?this._subscribe(sink):this._trySubscribe(sink)),config_config.useDeprecatedSynchronousErrorHandling&&sink.syncErrorThrowable&&(sink.syncErrorThrowable=!1,sink.syncErrorThrown))throw sink.syncErrorValue;return sink}_trySubscribe(sink){try{return this._subscribe(sink)}catch(err){config_config.useDeprecatedSynchronousErrorHandling&&(sink.syncErrorThrown=!0,sink.syncErrorValue=err),function(observer){for(;observer;){const{closed:closed,destination:destination,isStopped:isStopped}=observer;if(closed||isStopped)return!1;observer=destination&&destination instanceof Subscriber_Subscriber?destination:null}return!0}(sink)?sink.error(err):console.warn(err)}}forEach(next,promiseCtor){return new(promiseCtor=getPromiseCtor(promiseCtor))((resolve,reject)=>{let subscription;subscription=this.subscribe(value=>{try{next(value)}catch(err){reject(err),subscription&&subscription.unsubscribe()}},reject,resolve)})}_subscribe(subscriber){const{source:source}=this;return source&&source.subscribe(subscriber)}[observable_observable](){return this}pipe(...operations){return 0===operations.length?this:pipeFromArray(operations)(this)}toPromise(promiseCtor){return new(promiseCtor=getPromiseCtor(promiseCtor))((resolve,reject)=>{let value;this.subscribe(x=>value=x,err=>reject(err),()=>resolve(value))})}}return Observable.create=subscribe=>new Observable(subscribe),Observable})();function getPromiseCtor(promiseCtor){if(promiseCtor||(promiseCtor=config_config.Promise||Promise),!promiseCtor)throw new Error("no Promise impl found");return promiseCtor}const ObjectUnsubscribedError=(()=>{function ObjectUnsubscribedErrorImpl(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return ObjectUnsubscribedErrorImpl.prototype=Object.create(Error.prototype),ObjectUnsubscribedErrorImpl})();class SubjectSubscription_SubjectSubscription extends Subscription_Subscription{constructor(subject,subscriber){super(),this.subject=subject,this.subscriber=subscriber,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const subject=this.subject,observers=subject.observers;if(this.subject=null,!observers||0===observers.length||subject.isStopped||subject.closed)return;const subscriberIndex=observers.indexOf(this.subscriber);-1!==subscriberIndex&&observers.splice(subscriberIndex,1)}}class Subject_SubjectSubscriber extends Subscriber_Subscriber{constructor(destination){super(destination),this.destination=destination}}let Subject_Subject=(()=>{class Subject extends Observable_Observable{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[rxSubscriber](){return new Subject_SubjectSubscriber(this)}lift(operator){const subject=new Subject_AnonymousSubject(this,this);return subject.operator=operator,subject}next(value){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped){const{observers:observers}=this,len=observers.length,copy=observers.slice();for(let i=0;i<len;i++)copy[i].next(value)}}error(err){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=err,this.isStopped=!0;const{observers:observers}=this,len=observers.length,copy=observers.slice();for(let i=0;i<len;i++)copy[i].error(err);this.observers.length=0}complete(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;const{observers:observers}=this,len=observers.length,copy=observers.slice();for(let i=0;i<len;i++)copy[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(subscriber){if(this.closed)throw new ObjectUnsubscribedError;return super._trySubscribe(subscriber)}_subscribe(subscriber){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(subscriber.error(this.thrownError),Subscription_Subscription.EMPTY):this.isStopped?(subscriber.complete(),Subscription_Subscription.EMPTY):(this.observers.push(subscriber),new SubjectSubscription_SubjectSubscription(this,subscriber))}asObservable(){const observable=new Observable_Observable;return observable.source=this,observable}}return Subject.create=(destination,source)=>new Subject_AnonymousSubject(destination,source),Subject})();class Subject_AnonymousSubject extends Subject_Subject{constructor(destination,source){super(),this.destination=destination,this.source=source}next(value){const{destination:destination}=this;destination&&destination.next&&destination.next(value)}error(err){const{destination:destination}=this;destination&&destination.error&&this.destination.error(err)}complete(){const{destination:destination}=this;destination&&destination.complete&&this.destination.complete()}_subscribe(subscriber){const{source:source}=this;return source?this.source.subscribe(subscriber):Subscription_Subscription.EMPTY}}function isScheduler(value){return value&&"function"==typeof value.schedule}class InnerSubscriber_InnerSubscriber extends Subscriber_Subscriber{constructor(parent,outerValue,outerIndex){super(),this.parent=parent,this.outerValue=outerValue,this.outerIndex=outerIndex,this.index=0}_next(value){this.parent.notifyNext(this.outerValue,value,this.outerIndex,this.index++,this)}_error(error){this.parent.notifyError(error,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const subscribeToArray=array=>subscriber=>{for(let i=0,len=array.length;i<len&&!subscriber.closed;i++)subscriber.next(array[i]);subscriber.complete()};function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const iterator_iterator=getSymbolIterator(),isArrayLike=x=>x&&"number"==typeof x.length&&"function"!=typeof x;function isPromise(value){return!!value&&"function"!=typeof value.subscribe&&"function"==typeof value.then}const subscribeTo=result=>{if(result&&"function"==typeof result[observable_observable])return obj=result,subscriber=>{const obs=obj[observable_observable]();if("function"!=typeof obs.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return obs.subscribe(subscriber)};if(isArrayLike(result))return subscribeToArray(result);if(isPromise(result))return promise=result,subscriber=>(promise.then(value=>{subscriber.closed||(subscriber.next(value),subscriber.complete())},err=>subscriber.error(err)).then(null,hostReportError),subscriber);if(result&&"function"==typeof result[iterator_iterator])return iterable=result,subscriber=>{const iterator=iterable[iterator_iterator]();for(;;){const item=iterator.next();if(item.done){subscriber.complete();break}if(subscriber.next(item.value),subscriber.closed)break}return"function"==typeof iterator.return&&subscriber.add(()=>{iterator.return&&iterator.return()}),subscriber};{const value=isObject(result)?"an invalid object":`'${result}'`;throw new TypeError(`You provided ${value} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var iterable,promise,obj};function subscribeToResult(outerSubscriber,result,outerValue,outerIndex,innerSubscriber=new InnerSubscriber_InnerSubscriber(outerSubscriber,outerValue,outerIndex)){if(!innerSubscriber.closed)return result instanceof Observable_Observable?result.subscribe(innerSubscriber):subscribeTo(result)(innerSubscriber)}class OuterSubscriber_OuterSubscriber extends Subscriber_Subscriber{notifyNext(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)}notifyError(error,innerSub){this.destination.error(error)}notifyComplete(innerSub){this.destination.complete()}}function map_map(project,thisArg){return function(source){if("function"!=typeof project)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return source.lift(new MapOperator(project,thisArg))}}class MapOperator{constructor(project,thisArg){this.project=project,this.thisArg=thisArg}call(subscriber,source){return source.subscribe(new map_MapSubscriber(subscriber,this.project,this.thisArg))}}class map_MapSubscriber extends Subscriber_Subscriber{constructor(destination,project,thisArg){super(destination),this.project=project,this.count=0,this.thisArg=thisArg||this}_next(value){let result;try{result=this.project.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}this.destination.next(result)}}function scheduleArray(input,scheduler){return new Observable_Observable(subscriber=>{const sub=new Subscription_Subscription;let i=0;return sub.add(scheduler.schedule((function(){i!==input.length?(subscriber.next(input[i++]),subscriber.closed||sub.add(this.schedule())):subscriber.complete()}))),sub})}function from_from(input,scheduler){return scheduler?function(input,scheduler){if(null!=input){if(function(input){return input&&"function"==typeof input[observable_observable]}(input))return function(input,scheduler){return new Observable_Observable(subscriber=>{const sub=new Subscription_Subscription;return sub.add(scheduler.schedule(()=>{const observable=input[observable_observable]();sub.add(observable.subscribe({next(value){sub.add(scheduler.schedule(()=>subscriber.next(value)))},error(err){sub.add(scheduler.schedule(()=>subscriber.error(err)))},complete(){sub.add(scheduler.schedule(()=>subscriber.complete()))}}))})),sub})}(input,scheduler);if(isPromise(input))return function(input,scheduler){return new Observable_Observable(subscriber=>{const sub=new Subscription_Subscription;return sub.add(scheduler.schedule(()=>input.then(value=>{sub.add(scheduler.schedule(()=>{subscriber.next(value),sub.add(scheduler.schedule(()=>subscriber.complete()))}))},err=>{sub.add(scheduler.schedule(()=>subscriber.error(err)))}))),sub})}(input,scheduler);if(isArrayLike(input))return scheduleArray(input,scheduler);if(function(input){return input&&"function"==typeof input[iterator_iterator]}(input)||"string"==typeof input)return function(input,scheduler){if(!input)throw new Error("Iterable cannot be null");return new Observable_Observable(subscriber=>{const sub=new Subscription_Subscription;let iterator;return sub.add(()=>{iterator&&"function"==typeof iterator.return&&iterator.return()}),sub.add(scheduler.schedule(()=>{iterator=input[iterator_iterator](),sub.add(scheduler.schedule((function(){if(subscriber.closed)return;let value,done;try{const result=iterator.next();value=result.value,done=result.done}catch(err){return void subscriber.error(err)}done?subscriber.complete():(subscriber.next(value),this.schedule())})))})),sub})}(input,scheduler)}throw new TypeError((null!==input&&typeof input||input)+" is not observable")}(input,scheduler):input instanceof Observable_Observable?input:new Observable_Observable(subscribeTo(input))}function mergeMap(project,resultSelector,concurrent=Number.POSITIVE_INFINITY){return"function"==typeof resultSelector?source=>source.pipe(mergeMap((a,i)=>from_from(project(a,i)).pipe(map_map((b,ii)=>resultSelector(a,b,i,ii))),concurrent)):("number"==typeof resultSelector&&(concurrent=resultSelector),source=>source.lift(new MergeMapOperator(project,concurrent)))}class MergeMapOperator{constructor(project,concurrent=Number.POSITIVE_INFINITY){this.project=project,this.concurrent=concurrent}call(observer,source){return source.subscribe(new mergeMap_MergeMapSubscriber(observer,this.project,this.concurrent))}}class mergeMap_MergeMapSubscriber extends OuterSubscriber_OuterSubscriber{constructor(destination,project,concurrent=Number.POSITIVE_INFINITY){super(destination),this.project=project,this.concurrent=concurrent,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(value){this.active<this.concurrent?this._tryNext(value):this.buffer.push(value)}_tryNext(value){let result;const index=this.index++;try{result=this.project(value,index)}catch(err){return void this.destination.error(err)}this.active++,this._innerSub(result,value,index)}_innerSub(ish,value,index){const innerSubscriber=new InnerSubscriber_InnerSubscriber(this,value,index),destination=this.destination;destination.add(innerSubscriber);const innerSubscription=subscribeToResult(this,ish,void 0,void 0,innerSubscriber);innerSubscription!==innerSubscriber&&destination.add(innerSubscription)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)}notifyComplete(innerSub){const buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function mergeAll(concurrent=Number.POSITIVE_INFINITY){return mergeMap(identity_identity,concurrent)}function fromArray(input,scheduler){return scheduler?scheduleArray(input,scheduler):new Observable_Observable(subscribeToArray(input))}function merge(...observables){let concurrent=Number.POSITIVE_INFINITY,scheduler=null,last=observables[observables.length-1];return isScheduler(last)?(scheduler=observables.pop(),observables.length>1&&"number"==typeof observables[observables.length-1]&&(concurrent=observables.pop())):"number"==typeof last&&(concurrent=observables.pop()),null===scheduler&&1===observables.length&&observables[0]instanceof Observable_Observable?observables[0]:mergeAll(concurrent)(fromArray(observables,scheduler))}function refCount(){return function(source){return source.lift(new RefCountOperator(source))}}class RefCountOperator{constructor(connectable){this.connectable=connectable}call(subscriber,source){const{connectable:connectable}=this;connectable._refCount++;const refCounter=new refCount_RefCountSubscriber(subscriber,connectable),subscription=source.subscribe(refCounter);return refCounter.closed||(refCounter.connection=connectable.connect()),subscription}}class refCount_RefCountSubscriber extends Subscriber_Subscriber{constructor(destination,connectable){super(destination),this.connectable=connectable}_unsubscribe(){const{connectable:connectable}=this;if(!connectable)return void(this.connection=null);this.connectable=null;const refCount=connectable._refCount;if(refCount<=0)return void(this.connection=null);if(connectable._refCount=refCount-1,refCount>1)return void(this.connection=null);const{connection:connection}=this,sharedConnection=connectable._connection;this.connection=null,!sharedConnection||connection&&sharedConnection!==connection||sharedConnection.unsubscribe()}}class ConnectableObservable_ConnectableObservable extends Observable_Observable{constructor(source,subjectFactory){super(),this.source=source,this.subjectFactory=subjectFactory,this._refCount=0,this._isComplete=!1}_subscribe(subscriber){return this.getSubject().subscribe(subscriber)}getSubject(){const subject=this._subject;return subject&&!subject.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let connection=this._connection;return connection||(this._isComplete=!1,connection=this._connection=new Subscription_Subscription,connection.add(this.source.subscribe(new ConnectableObservable_ConnectableSubscriber(this.getSubject(),this))),connection.closed&&(this._connection=null,connection=Subscription_Subscription.EMPTY)),connection}refCount(){return refCount()(this)}}const connectableObservableDescriptor=(()=>{const connectableProto=ConnectableObservable_ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:connectableProto._subscribe},_isComplete:{value:connectableProto._isComplete,writable:!0},getSubject:{value:connectableProto.getSubject},connect:{value:connectableProto.connect},refCount:{value:connectableProto.refCount}}})();class ConnectableObservable_ConnectableSubscriber extends Subject_SubjectSubscriber{constructor(destination,connectable){super(destination),this.connectable=connectable}_error(err){this._unsubscribe(),super._error(err)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const connectable=this.connectable;if(connectable){this.connectable=null;const connection=connectable._connection;connectable._refCount=0,connectable._subject=null,connectable._connection=null,connection&&connection.unsubscribe()}}}function shareSubjectFactory(){return new Subject_Subject}function share(){return source=>{return refCount()((subjectOrSubjectFactory=shareSubjectFactory,function(source){let subjectFactory;subjectFactory="function"==typeof subjectOrSubjectFactory?subjectOrSubjectFactory:function(){return subjectOrSubjectFactory};const connectable=Object.create(source,connectableObservableDescriptor);return connectable.source=source,connectable.subjectFactory=subjectFactory,connectable})(source));var subjectOrSubjectFactory}}function noSideEffects(fn){return{toString:fn}.toString()}function makeParamDecorator(name,props,parentClass){return noSideEffects(()=>{const metaCtor=function(props){return function(...args){if(props){const values=props(...args);for(const propName in values)this[propName]=values[propName]}}}(props);function ParamDecoratorFactory(...args){if(this instanceof ParamDecoratorFactory)return metaCtor.apply(this,args),this;const annotationInstance=new ParamDecoratorFactory(...args);return ParamDecorator.annotation=annotationInstance,ParamDecorator;function ParamDecorator(cls,unusedKey,index){const parameters=cls.hasOwnProperty("__parameters__")?cls.__parameters__:Object.defineProperty(cls,"__parameters__",{value:[]}).__parameters__;for(;parameters.length<=index;)parameters.push(null);return(parameters[index]=parameters[index]||[]).push(annotationInstance),cls}}return parentClass&&(ParamDecoratorFactory.prototype=Object.create(parentClass.prototype)),ParamDecoratorFactory.prototype.ngMetadataName=name,ParamDecoratorFactory.annotationCls=ParamDecoratorFactory,ParamDecoratorFactory})}const Inject=makeParamDecorator("Inject",token=>({token:token})),Optional=makeParamDecorator("Optional"),Self=makeParamDecorator("Self"),SkipSelf=makeParamDecorator("SkipSelf");var InjectFlags=function(InjectFlags){return InjectFlags[InjectFlags.Default=0]="Default",InjectFlags[InjectFlags.Host=1]="Host",InjectFlags[InjectFlags.Self=2]="Self",InjectFlags[InjectFlags.SkipSelf=4]="SkipSelf",InjectFlags[InjectFlags.Optional=8]="Optional",InjectFlags}({});function getClosureSafeProperty(objWithPropertyToExtract){for(let key in objWithPropertyToExtract)if(objWithPropertyToExtract[key]===getClosureSafeProperty)return key;throw Error("Could not find renamed property on target object.")}function fillProperties(target,source){for(const key in source)source.hasOwnProperty(key)&&!target.hasOwnProperty(key)&&(target[key]=source[key])}function defineInjectable(opts){return{token:opts.token,providedIn:opts.providedIn||null,factory:opts.factory,value:void 0}}const defineInjectable=defineInjectable;function defineInjector(options){return{factory:options.factory,providers:options.providers||[],imports:options.imports||[]}}function getInjectableDef(type){return getOwnDefinition(type,type[NG_PROV_DEF])||getOwnDefinition(type,type[NG_INJECTABLE_DEF])}function getOwnDefinition(type,def){return def&&def.token===type?def:null}function getInjectorDef(type){return type&&(type.hasOwnProperty(NG_INJ_DEF)||type.hasOwnProperty(NG_INJECTOR_DEF))?type[NG_INJ_DEF]:null}const NG_PROV_DEF=getClosureSafeProperty({"prov":getClosureSafeProperty}),NG_INJ_DEF=getClosureSafeProperty({"inj":getClosureSafeProperty}),NG_PROV_DEF_FALLBACK=getClosureSafeProperty({"provFallback":getClosureSafeProperty}),NG_INJECTABLE_DEF=getClosureSafeProperty({ngInjectableDef:getClosureSafeProperty}),NG_INJECTOR_DEF=getClosureSafeProperty({ngInjectorDef:getClosureSafeProperty});function stringify(token){if("string"==typeof token)return token;if(Array.isArray(token))return"["+token.map(stringify).join(", ")+"]";if(null==token)return""+token;if(token.overriddenName)return""+token.overriddenName;if(token.name)return""+token.name;const res=token.toString();if(null==res)return""+res;const newLineIndex=res.indexOf("\n");return-1===newLineIndex?res:res.substring(0,newLineIndex)}function concatStringsWithSpace(before,after){return null==before||""===before?null===after?"":after:null==after||""===after?before:before+" "+after}const __forward_ref__=getClosureSafeProperty({__forward_ref__:getClosureSafeProperty});function forwardRef(forwardRefFn){return forwardRefFn.__forward_ref__=forwardRef,forwardRefFn.toString=function(){return stringify(this())},forwardRefFn}function resolveForwardRef(type){return isForwardRef(type)?type():type}function isForwardRef(fn){return"function"==typeof fn&&fn.hasOwnProperty(__forward_ref__)&&fn.__forward_ref__===forwardRef}const __globalThis="undefined"!=typeof globalThis&&globalThis,__window="undefined"!=typeof window&&window,__self="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,__global="undefined"!=typeof global&&global,_global=__globalThis||__global||__window||__self,NG_COMP_DEF=getClosureSafeProperty({"cmp":getClosureSafeProperty}),NG_DIR_DEF=getClosureSafeProperty({"dir":getClosureSafeProperty}),NG_PIPE_DEF=getClosureSafeProperty({"pipe":getClosureSafeProperty}),NG_MOD_DEF=getClosureSafeProperty({"mod":getClosureSafeProperty}),NG_LOC_ID_DEF=getClosureSafeProperty({"loc":getClosureSafeProperty}),NG_FACTORY_DEF=getClosureSafeProperty({"fac":getClosureSafeProperty}),NG_ELEMENT_ID=getClosureSafeProperty({__NG_ELEMENT_ID__:getClosureSafeProperty});class InjectionToken{constructor(_desc,options){this._desc=_desc,this.ngMetadataName="InjectionToken",this.prov=void 0,"number"==typeof options?this.__NG_ELEMENT_ID__=options:void 0!==options&&(this.prov=defineInjectable({token:this,providedIn:options.providedIn||"root",factory:options.factory}))}toString(){return"InjectionToken "+this._desc}}const INJECTOR=new InjectionToken("INJECTOR",-1),THROW_IF_NOT_FOUND={},NEW_LINE=/\n/gm,USE_VALUE=getClosureSafeProperty({provide:String,useValue:getClosureSafeProperty});let _injectImplementation,_currentInjector=void 0;function setCurrentInjector(injector){const former=_currentInjector;return _currentInjector=injector,former}function setInjectImplementation(impl){const previous=_injectImplementation;return _injectImplementation=impl,previous}function injectInjectorOnly(token,flags=InjectFlags.Default){if(void 0===_currentInjector)throw new Error("inject() must be called from an injection context");return null===_currentInjector?injectRootLimpMode(token,void 0,flags):_currentInjector.get(token,flags&InjectFlags.Optional?null:void 0,flags)}function inject(token,flags=InjectFlags.Default){return(_injectImplementation||injectInjectorOnly)(resolveForwardRef(token),flags)}const inject=inject;function injectRootLimpMode(token,notFoundValue,flags){const injectableDef=getInjectableDef(token);if(injectableDef&&"root"==injectableDef.providedIn)return void 0===injectableDef.value?injectableDef.value=injectableDef.factory():injectableDef.value;if(flags&InjectFlags.Optional)return null;if(void 0!==notFoundValue)return notFoundValue;throw new Error(`Injector: NOT_FOUND [${stringify(token)}]`)}function injectArgs(types){const args=[];for(let i=0;i<types.length;i++){const arg=resolveForwardRef(types[i]);if(Array.isArray(arg)){if(0===arg.length)throw new Error("Arguments array must have arguments.");let type=void 0,flags=InjectFlags.Default;for(let j=0;j<arg.length;j++){const meta=arg[j];meta instanceof Optional||"Optional"===meta.ngMetadataName||meta===Optional?flags|=InjectFlags.Optional:meta instanceof SkipSelf||"SkipSelf"===meta.ngMetadataName||meta===SkipSelf?flags|=InjectFlags.SkipSelf:meta instanceof Self||"Self"===meta.ngMetadataName||meta===Self?flags|=InjectFlags.Self:type=meta instanceof Inject||meta===Inject?meta.token:meta}args.push(inject(type,flags))}else args.push(inject(arg))}return args}class NullInjector{get(token,notFoundValue=THROW_IF_NOT_FOUND){if(notFoundValue===THROW_IF_NOT_FOUND){const error=new Error(`NullInjectorError: No provider for ${stringify(token)}!`);throw error.name="NullInjectorError",error}return notFoundValue}}class NgModuleRef{}class NgModuleFactory{}function addAllToArray(items,arr){for(let i=0;i<items.length;i++)arr.push(items[i])}function deepForEach(input,fn){input.forEach(value=>Array.isArray(value)?deepForEach(value,fn):fn(value))}function addToArray(arr,index,value){index>=arr.length?arr.push(value):arr.splice(index,0,value)}function removeFromArray(arr,index){return index>=arr.length-1?arr.pop():arr.splice(index,1)[0]}function newArray(size,value){const list=[];for(let i=0;i<size;i++)list.push(value);return list}function keyValueArraySet(keyValueArray,key,value){let index=keyValueArrayIndexOf(keyValueArray,key);return index>=0?keyValueArray[1|index]=value:(index=~index,function(array,index,value1,value2){let end=array.length;if(end==index)array.push(value1,value2);else if(1===end)array.push(value2,array[0]),array[0]=value1;else{for(end--,array.push(array[end-1],array[end]);end>index;)array[end]=array[end-2],end--;array[index]=value1,array[index+1]=value2}}(keyValueArray,index,key,value)),index}function keyValueArrayGet(keyValueArray,key){const index=keyValueArrayIndexOf(keyValueArray,key);if(index>=0)return keyValueArray[1|index]}function keyValueArrayIndexOf(keyValueArray,key){return function(array,value,shift){let start=0,end=array.length>>1;for(;end!==start;){const middle=start+(end-start>>1),current=array[middle<<1];if(value===current)return middle<<1;current>value?end=middle:start=middle+1}return~(end<<1)}(keyValueArray,key)}const ChangeDetectionStrategy=function(){var ChangeDetectionStrategy={OnPush:0,Default:1};return ChangeDetectionStrategy[ChangeDetectionStrategy.OnPush]="OnPush",ChangeDetectionStrategy[ChangeDetectionStrategy.Default]="Default",ChangeDetectionStrategy}(),ViewEncapsulation$1=function(){var ViewEncapsulation$1={Emulated:0,Native:1,None:2,ShadowDom:3};return ViewEncapsulation$1[ViewEncapsulation$1.Emulated]="Emulated",ViewEncapsulation$1[ViewEncapsulation$1.Native]="Native",ViewEncapsulation$1[ViewEncapsulation$1.None]="None",ViewEncapsulation$1[ViewEncapsulation$1.ShadowDom]="ShadowDom",ViewEncapsulation$1}(),EMPTY_OBJ={},EMPTY_ARRAY=[];let _renderCompCount=0;function defineComponent(componentDefinition){return noSideEffects(()=>{const type=componentDefinition.type,typePrototype=type.prototype,declaredInputs={},def={type:type,providersResolver:null,decls:componentDefinition.decls,vars:componentDefinition.vars,factory:null,template:componentDefinition.template||null,consts:componentDefinition.consts||null,ngContentSelectors:componentDefinition.ngContentSelectors,hostBindings:componentDefinition.hostBindings||null,hostVars:componentDefinition.hostVars||0,hostAttrs:componentDefinition.hostAttrs||null,contentQueries:componentDefinition.contentQueries||null,declaredInputs:declaredInputs,inputs:null,outputs:null,exportAs:componentDefinition.exportAs||null,onChanges:null,onInit:typePrototype.ngOnInit||null,doCheck:typePrototype.ngDoCheck||null,afterContentInit:typePrototype.ngAfterContentInit||null,afterContentChecked:typePrototype.ngAfterContentChecked||null,afterViewInit:typePrototype.ngAfterViewInit||null,afterViewChecked:typePrototype.ngAfterViewChecked||null,onDestroy:typePrototype.ngOnDestroy||null,onPush:componentDefinition.changeDetection===ChangeDetectionStrategy.OnPush,directiveDefs:null,pipeDefs:null,selectors:componentDefinition.selectors||EMPTY_ARRAY,viewQuery:componentDefinition.viewQuery||null,features:componentDefinition.features||null,data:componentDefinition.data||{},encapsulation:componentDefinition.encapsulation||ViewEncapsulation$1.Emulated,id:"c",styles:componentDefinition.styles||EMPTY_ARRAY,_:null,setInput:null,schemas:componentDefinition.schemas||null,tView:null},directiveTypes=componentDefinition.directives,feature=componentDefinition.features,pipeTypes=componentDefinition.pipes;return def.id+=_renderCompCount++,def.inputs=invertObject(componentDefinition.inputs,declaredInputs),def.outputs=invertObject(componentDefinition.outputs),feature&&feature.forEach(fn=>fn(def)),def.directiveDefs=directiveTypes?()=>("function"==typeof directiveTypes?directiveTypes():directiveTypes).map(extractDirectiveDef):null,def.pipeDefs=pipeTypes?()=>("function"==typeof pipeTypes?pipeTypes():pipeTypes).map(extractPipeDef):null,def})}function extractDirectiveDef(type){return getComponentDef(type)||function(type){return type[NG_DIR_DEF]||null}(type)}function extractPipeDef(type){return function(type){return type[NG_PIPE_DEF]||null}(type)}const autoRegisterModuleById={};function defineNgModule(def){const res={type:def.type,bootstrap:def.bootstrap||EMPTY_ARRAY,declarations:def.declarations||EMPTY_ARRAY,imports:def.imports||EMPTY_ARRAY,exports:def.exports||EMPTY_ARRAY,transitiveCompileScopes:null,schemas:def.schemas||null,id:def.id||null};return null!=def.id&&noSideEffects(()=>{autoRegisterModuleById[def.id]=def.type}),res}function invertObject(obj,secondary){if(null==obj)return EMPTY_OBJ;const newLookup={};for(const minifiedKey in obj)if(obj.hasOwnProperty(minifiedKey)){let publicName=obj[minifiedKey],declaredName=publicName;Array.isArray(publicName)&&(declaredName=publicName[1],publicName=publicName[0]),newLookup[publicName]=minifiedKey,secondary&&(secondary[publicName]=declaredName)}return newLookup}const defineDirective=defineComponent;function definePipe(pipeDef){return{type:pipeDef.type,name:pipeDef.name,factory:null,pure:!1!==pipeDef.pure,onDestroy:pipeDef.type.prototype.ngOnDestroy||null}}function getComponentDef(type){return type[NG_COMP_DEF]||null}function getFactoryDef(type,throwNotFound){return type.hasOwnProperty(NG_FACTORY_DEF)?type[NG_FACTORY_DEF]:null}function getNgModuleDef(type,throwNotFound){const ngModuleDef=type[NG_MOD_DEF]||null;if(!ngModuleDef&&!0===throwNotFound)throw new Error(`Type ${stringify(type)} does not have 'mod' property.`);return ngModuleDef}function isLView(value){return Array.isArray(value)&&"object"==typeof value[1]}function isLContainer(value){return Array.isArray(value)&&!0===value[1]}function isContentQueryHost(tNode){return 0!=(8&tNode.flags)}function isComponentHost(tNode){return 2==(2&tNode.flags)}function isDirectiveHost(tNode){return 1==(1&tNode.flags)}function isComponentDef(def){return null!==def.template}function isRootView(target){return 0!=(512&target[2])}let DOCUMENT=void 0;function getDocument(){return void 0!==DOCUMENT?DOCUMENT:"undefined"!=typeof document?document:void 0}function isProceduralRenderer(renderer){return!!renderer.listen}const domRendererFactory3={createRenderer:(hostElement,rendererType)=>getDocument()};function unwrapRNode(value){for(;Array.isArray(value);)value=value[0];return value}function getNativeByIndex(index,lView){return unwrapRNode(lView[index+20])}function getNativeByTNode(tNode,lView){return unwrapRNode(lView[tNode.index])}function getTNode(tView,index){return tView.data[index+20]}function load(view,index){return view[index+20]}function getComponentLViewByIndex(nodeIndex,hostView){const slotValue=hostView[nodeIndex];return isLView(slotValue)?slotValue:slotValue[0]}function readPatchedLView(target){const value=function(target){return target.__ngContext__||null}(target);return value?Array.isArray(value)?value:value.lView:null}function isCreationMode(view){return 4==(4&view[2])}function viewAttachedToChangeDetector(view){return 128==(128&view[2])}function getConstant(consts,index){return null===consts||null==index?null:consts[index]}function resetPreOrderHookFlags(lView){lView[18]=0}function updateTransplantedViewCount(lContainer,amount){lContainer[5]+=amount;let viewOrContainer=lContainer,parent=lContainer[3];for(;null!==parent&&(1===amount&&1===viewOrContainer[5]||-1===amount&&0===viewOrContainer[5]);)parent[5]+=amount,viewOrContainer=parent,parent=parent[3]}const instructionState={lFrame:createLFrame(null),bindingsEnabled:!0,checkNoChangesMode:!1};function getBindingsEnabled(){return instructionState.bindingsEnabled}function getLView(){return instructionState.lFrame.lView}function getTView(){return instructionState.lFrame.tView}function restoreView(viewToRestore){instructionState.lFrame.contextLView=viewToRestore}function getPreviousOrParentTNode(){return instructionState.lFrame.previousOrParentTNode}function setPreviousOrParentTNode(tNode,isParent){instructionState.lFrame.previousOrParentTNode=tNode,instructionState.lFrame.isParent=isParent}function getIsParent(){return instructionState.lFrame.isParent}function setIsNotParent(){instructionState.lFrame.isParent=!1}function getCheckNoChangesMode(){return instructionState.checkNoChangesMode}function setCheckNoChangesMode(mode){instructionState.checkNoChangesMode=mode}function getBindingRoot(){const lFrame=instructionState.lFrame;let index=lFrame.bindingRootIndex;return-1===index&&(index=lFrame.bindingRootIndex=lFrame.tView.bindingStartIndex),index}function getBindingIndex(){return instructionState.lFrame.bindingIndex}function nextBindingIndex(){return instructionState.lFrame.bindingIndex++}function incrementBindingIndex(count){const lFrame=instructionState.lFrame,index=lFrame.bindingIndex;return lFrame.bindingIndex=lFrame.bindingIndex+count,index}function setBindingRootForHostBindings(bindingRootIndex,currentDirectiveIndex){const lFrame=instructionState.lFrame;lFrame.bindingIndex=lFrame.bindingRootIndex=bindingRootIndex,setCurrentDirectiveIndex(currentDirectiveIndex)}function setCurrentDirectiveIndex(currentDirectiveIndex){instructionState.lFrame.currentDirectiveIndex=currentDirectiveIndex}function getCurrentQueryIndex(){return instructionState.lFrame.currentQueryIndex}function setCurrentQueryIndex(value){instructionState.lFrame.currentQueryIndex=value}function enterDI(newView,tNode){const newLFrame=allocLFrame();instructionState.lFrame=newLFrame,newLFrame.previousOrParentTNode=tNode,newLFrame.lView=newView}function enterView(newView,tNode){const newLFrame=allocLFrame(),tView=newView[1];instructionState.lFrame=newLFrame,newLFrame.previousOrParentTNode=tNode,newLFrame.lView=newView,newLFrame.tView=tView,newLFrame.contextLView=newView,newLFrame.bindingIndex=tView.bindingStartIndex}function allocLFrame(){const currentLFrame=instructionState.lFrame,childLFrame=null===currentLFrame?null:currentLFrame.child;return null===childLFrame?createLFrame(currentLFrame):childLFrame}function createLFrame(parent){const lFrame={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:parent,child:null};return null!==parent&&(parent.child=lFrame),lFrame}function leaveViewLight(){const oldLFrame=instructionState.lFrame;return instructionState.lFrame=oldLFrame.parent,oldLFrame.previousOrParentTNode=null,oldLFrame.lView=null,oldLFrame}const leaveDI=leaveViewLight;function leaveView(){const oldLFrame=leaveViewLight();oldLFrame.isParent=!0,oldLFrame.tView=null,oldLFrame.selectedIndex=0,oldLFrame.contextLView=null,oldLFrame.elementDepthCount=0,oldLFrame.currentDirectiveIndex=-1,oldLFrame.currentNamespace=null,oldLFrame.currentSanitizer=null,oldLFrame.bindingRootIndex=-1,oldLFrame.bindingIndex=-1,oldLFrame.currentQueryIndex=0}function getSelectedIndex(){return instructionState.lFrame.selectedIndex}function setSelectedIndex(index){instructionState.lFrame.selectedIndex=index}function getSelectedTNode(){const lFrame=instructionState.lFrame;return getTNode(lFrame.tView,lFrame.selectedIndex)}function registerPostOrderHooks(tView,tNode){for(let i=tNode.directiveStart,end=tNode.directiveEnd;i<end;i++){const directiveDef=tView.data[i];directiveDef.afterContentInit&&(tView.contentHooks||(tView.contentHooks=[])).push(-i,directiveDef.afterContentInit),directiveDef.afterContentChecked&&((tView.contentHooks||(tView.contentHooks=[])).push(i,directiveDef.afterContentChecked),(tView.contentCheckHooks||(tView.contentCheckHooks=[])).push(i,directiveDef.afterContentChecked)),directiveDef.afterViewInit&&(tView.viewHooks||(tView.viewHooks=[])).push(-i,directiveDef.afterViewInit),directiveDef.afterViewChecked&&((tView.viewHooks||(tView.viewHooks=[])).push(i,directiveDef.afterViewChecked),(tView.viewCheckHooks||(tView.viewCheckHooks=[])).push(i,directiveDef.afterViewChecked)),null!=directiveDef.onDestroy&&(tView.destroyHooks||(tView.destroyHooks=[])).push(i,directiveDef.onDestroy)}}function executeCheckHooks(lView,hooks,nodeIndex){callHooks(lView,hooks,3,nodeIndex)}function executeInitAndCheckHooks(lView,hooks,initPhase,nodeIndex){(3&lView[2])===initPhase&&callHooks(lView,hooks,initPhase,nodeIndex)}function incrementInitPhaseFlags(lView,initPhase){let flags=lView[2];(3&flags)===initPhase&&(flags&=2047,flags+=1,lView[2]=flags)}function callHooks(currentView,arr,initPhase,currentNodeIndex){const nodeIndexLimit=null!=currentNodeIndex?currentNodeIndex:-1;let lastNodeIndexFound=0;for(let i=void 0!==currentNodeIndex?65535&currentView[18]:0;i<arr.length;i++)if("number"==typeof arr[i+1]){if(lastNodeIndexFound=arr[i],null!=currentNodeIndex&&lastNodeIndexFound>=currentNodeIndex)break}else arr[i]<0&&(currentView[18]+=65536),(lastNodeIndexFound<nodeIndexLimit||-1==nodeIndexLimit)&&(callHook(currentView,initPhase,arr,i),currentView[18]=(4294901760&currentView[18])+i+2),i++}function callHook(currentView,initPhase,arr,i){const isInitHook=arr[i]<0,hook=arr[i+1],directive=currentView[isInitHook?-arr[i]:arr[i]];isInitHook?currentView[2]>>11<currentView[18]>>16&&(3&currentView[2])===initPhase&&(currentView[2]+=2048,hook.call(directive)):hook.call(directive)}class NodeInjectorFactory{constructor(factory,isViewProvider,injectImplementation){this.factory=factory,this.resolving=!1,this.canSeeViewProviders=isViewProvider,this.injectImpl=injectImplementation}}function setUpAttributes(renderer,native,attrs){const isProc=isProceduralRenderer(renderer);let i=0;for(;i<attrs.length;){const value=attrs[i];if("number"==typeof value){if(0!==value)break;i++;const namespaceURI=attrs[i++],attrName=attrs[i++],attrVal=attrs[i++];isProc?renderer.setAttribute(native,attrName,attrVal,namespaceURI):native.setAttributeNS(namespaceURI,attrName,attrVal)}else{const attrName=value,attrVal=attrs[++i];isAnimationProp(attrName)?isProc&&renderer.setProperty(native,attrName,attrVal):isProc?renderer.setAttribute(native,attrName,attrVal):native.setAttribute(attrName,attrVal),i++}}return i}function isNameOnlyAttributeMarker(marker){return 3===marker||4===marker||6===marker}function isAnimationProp(name){return 64===name.charCodeAt(0)}function mergeHostAttrs(dst,src){if(null===src||0===src.length);else if(null===dst||0===dst.length)dst=src.slice();else{let srcMarker=-1;for(let i=0;i<src.length;i++){const item=src[i];"number"==typeof item?srcMarker=item:0===srcMarker||mergeHostAttribute(dst,srcMarker,item,null,-1===srcMarker||2===srcMarker?src[++i]:null)}}return dst}function mergeHostAttribute(dst,marker,key1,key2,value){let i=0,markerInsertPosition=dst.length;if(-1===marker)markerInsertPosition=-1;else for(;i<dst.length;){const dstValue=dst[i++];if("number"==typeof dstValue){if(dstValue===marker){markerInsertPosition=-1;break}if(dstValue>marker){markerInsertPosition=i-1;break}}}for(;i<dst.length;){const item=dst[i];if("number"==typeof item)break;if(item===key1){if(null===key2)return void(null!==value&&(dst[i+1]=value));if(key2===dst[i+1])return void(dst[i+2]=value)}i++,null!==key2&&i++,null!==value&&i++}-1!==markerInsertPosition&&(dst.splice(markerInsertPosition,0,marker),i=markerInsertPosition+1),dst.splice(i++,0,key1),null!==key2&&dst.splice(i++,0,key2),null!==value&&dst.splice(i++,0,value)}function hasParentInjector(parentLocation){return-1!==parentLocation}function getParentInjectorIndex(parentLocation){return 32767&parentLocation}function getParentInjectorViewOffset(parentLocation){return parentLocation>>16}function getParentInjectorView(location,startView){let viewOffset=getParentInjectorViewOffset(location),parentView=startView;for(;viewOffset>0;)parentView=parentView[15],viewOffset--;return parentView}function renderStringify(value){return"string"==typeof value?value:null==value?"":""+value}function stringifyForError(value){return"function"==typeof value?value.name||value.toString():"object"==typeof value&&null!=value&&"function"==typeof value.type?value.type.name||value.type.toString():renderStringify(value)}const defaultScheduler=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(_global))();function maybeUnwrapFn(value){return value instanceof Function?value():value}let includeViewProviders=!0;function setIncludeViewProviders(v){const oldValue=includeViewProviders;return includeViewProviders=v,oldValue}let nextNgElementId=0;function getOrCreateNodeInjectorForNode(tNode,hostView){const existingInjectorIndex=getInjectorIndex(tNode,hostView);if(-1!==existingInjectorIndex)return existingInjectorIndex;const tView=hostView[1];tView.firstCreatePass&&(tNode.injectorIndex=hostView.length,insertBloom(tView.data,tNode),insertBloom(hostView,null),insertBloom(tView.blueprint,null));const parentLoc=getParentInjectorLocation(tNode,hostView),injectorIndex=tNode.injectorIndex;if(hasParentInjector(parentLoc)){const parentIndex=getParentInjectorIndex(parentLoc),parentLView=getParentInjectorView(parentLoc,hostView),parentData=parentLView[1].data;for(let i=0;i<8;i++)hostView[injectorIndex+i]=parentLView[parentIndex+i]|parentData[parentIndex+i]}return hostView[injectorIndex+8]=parentLoc,injectorIndex}function insertBloom(arr,footer){arr.push(0,0,0,0,0,0,0,0,footer)}function getInjectorIndex(tNode,hostView){return-1===tNode.injectorIndex||tNode.parent&&tNode.parent.injectorIndex===tNode.injectorIndex||null==hostView[tNode.injectorIndex+8]?-1:tNode.injectorIndex}function getParentInjectorLocation(tNode,view){if(tNode.parent&&-1!==tNode.parent.injectorIndex)return tNode.parent.injectorIndex;let hostTNode=view[6],viewOffset=1;for(;hostTNode&&-1===hostTNode.injectorIndex;)hostTNode=(view=view[15])?view[6]:null,viewOffset++;return hostTNode?hostTNode.injectorIndex|viewOffset<<16:-1}function diPublicInInjector(injectorIndex,tView,token){!function(injectorIndex,tView,type){let id="string"!=typeof type?type[NG_ELEMENT_ID]:type.charCodeAt(0)||0;null==id&&(id=type[NG_ELEMENT_ID]=nextNgElementId++);const bloomBit=255&id,mask=1<<bloomBit,b6=64&bloomBit,b5=32&bloomBit,tData=tView.data;128&bloomBit?b6?b5?tData[injectorIndex+7]|=mask:tData[injectorIndex+6]|=mask:b5?tData[injectorIndex+5]|=mask:tData[injectorIndex+4]|=mask:b6?b5?tData[injectorIndex+3]|=mask:tData[injectorIndex+2]|=mask:b5?tData[injectorIndex+1]|=mask:tData[injectorIndex]|=mask}(injectorIndex,tView,token)}function getOrCreateInjectable(tNode,lView,token,flags=InjectFlags.Default,notFoundValue){if(null!==tNode){const bloomHash=function(token){if("string"==typeof token)return token.charCodeAt(0)||0;const tokenId=token[NG_ELEMENT_ID];return"number"==typeof tokenId&&tokenId>0?255&tokenId:tokenId}(token);if("function"==typeof bloomHash){enterDI(lView,tNode);try{const value=bloomHash();if(null!=value||flags&InjectFlags.Optional)return value;throw new Error(`No provider for ${stringifyForError(token)}!`)}finally{leaveDI()}}else if("number"==typeof bloomHash){if(-1===bloomHash)return new NodeInjector(tNode,lView);let previousTView=null,injectorIndex=getInjectorIndex(tNode,lView),parentLocation=-1,hostTElementNode=flags&InjectFlags.Host?lView[16][6]:null;for((-1===injectorIndex||flags&InjectFlags.SkipSelf)&&(parentLocation=-1===injectorIndex?getParentInjectorLocation(tNode,lView):lView[injectorIndex+8],shouldSearchParent(flags,!1)?(previousTView=lView[1],injectorIndex=getParentInjectorIndex(parentLocation),lView=getParentInjectorView(parentLocation,lView)):injectorIndex=-1);-1!==injectorIndex;){parentLocation=lView[injectorIndex+8];const tView=lView[1];if(bloomHasToken(bloomHash,injectorIndex,tView.data)){const instance=searchTokensOnInjector(injectorIndex,lView,token,previousTView,flags,hostTElementNode);if(instance!==NOT_FOUND)return instance}shouldSearchParent(flags,lView[1].data[injectorIndex+8]===hostTElementNode)&&bloomHasToken(bloomHash,injectorIndex,lView)?(previousTView=tView,injectorIndex=getParentInjectorIndex(parentLocation),lView=getParentInjectorView(parentLocation,lView)):injectorIndex=-1}}}if(flags&InjectFlags.Optional&&void 0===notFoundValue&&(notFoundValue=null),0==(flags&(InjectFlags.Self|InjectFlags.Host))){const moduleInjector=lView[9],previousInjectImplementation=setInjectImplementation(void 0);try{return moduleInjector?moduleInjector.get(token,notFoundValue,flags&InjectFlags.Optional):injectRootLimpMode(token,notFoundValue,flags&InjectFlags.Optional)}finally{setInjectImplementation(previousInjectImplementation)}}if(flags&InjectFlags.Optional)return notFoundValue;throw new Error(`NodeInjector: NOT_FOUND [${stringifyForError(token)}]`)}const NOT_FOUND={};function searchTokensOnInjector(injectorIndex,lView,token,previousTView,flags,hostTElementNode){const currentTView=lView[1],tNode=currentTView.data[injectorIndex+8],injectableIdx=locateDirectiveOrProvider(tNode,currentTView,token,null==previousTView?isComponentHost(tNode)&&includeViewProviders:previousTView!=currentTView&&3===tNode.type,flags&InjectFlags.Host&&hostTElementNode===tNode);return null!==injectableIdx?getNodeInjectable(lView,currentTView,injectableIdx,tNode):NOT_FOUND}function locateDirectiveOrProvider(tNode,tView,token,canAccessViewProviders,isHostSpecialCase){const nodeProviderIndexes=tNode.providerIndexes,tInjectables=tView.data,injectablesStart=65535&nodeProviderIndexes,directivesStart=tNode.directiveStart,cptViewProvidersCount=nodeProviderIndexes>>16,endIndex=isHostSpecialCase?injectablesStart+cptViewProvidersCount:tNode.directiveEnd;for(let i=canAccessViewProviders?injectablesStart:injectablesStart+cptViewProvidersCount;i<endIndex;i++){const providerTokenOrDef=tInjectables[i];if(i<directivesStart&&token===providerTokenOrDef||i>=directivesStart&&providerTokenOrDef.type===token)return i}if(isHostSpecialCase){const dirDef=tInjectables[directivesStart];if(dirDef&&isComponentDef(dirDef)&&dirDef.type===token)return directivesStart}return null}function getNodeInjectable(lView,tView,index,tNode){let value=lView[index];const tData=tView.data;if(value instanceof NodeInjectorFactory){const factory=value;if(factory.resolving)throw new Error("Circular dep for "+stringifyForError(tData[index]));const previousIncludeViewProviders=setIncludeViewProviders(factory.canSeeViewProviders);let previousInjectImplementation;factory.resolving=!0,factory.injectImpl&&(previousInjectImplementation=setInjectImplementation(factory.injectImpl)),enterDI(lView,tNode);try{value=lView[index]=factory.factory(void 0,tData,lView,tNode),tView.firstCreatePass&&index>=tNode.directiveStart&&function(directiveIndex,directiveDef,tView){const{onChanges:onChanges,onInit:onInit,doCheck:doCheck}=directiveDef;onChanges&&((tView.preOrderHooks||(tView.preOrderHooks=[])).push(directiveIndex,onChanges),(tView.preOrderCheckHooks||(tView.preOrderCheckHooks=[])).push(directiveIndex,onChanges)),onInit&&(tView.preOrderHooks||(tView.preOrderHooks=[])).push(-directiveIndex,onInit),doCheck&&((tView.preOrderHooks||(tView.preOrderHooks=[])).push(directiveIndex,doCheck),(tView.preOrderCheckHooks||(tView.preOrderCheckHooks=[])).push(directiveIndex,doCheck))}(index,tData[index],tView)}finally{factory.injectImpl&&setInjectImplementation(previousInjectImplementation),setIncludeViewProviders(previousIncludeViewProviders),factory.resolving=!1,leaveDI()}}return value}function bloomHasToken(bloomHash,injectorIndex,injectorView){const b6=64&bloomHash,b5=32&bloomHash;let value;return value=128&bloomHash?b6?b5?injectorView[injectorIndex+7]:injectorView[injectorIndex+6]:b5?injectorView[injectorIndex+5]:injectorView[injectorIndex+4]:b6?b5?injectorView[injectorIndex+3]:injectorView[injectorIndex+2]:b5?injectorView[injectorIndex+1]:injectorView[injectorIndex],!!(value&1<<bloomHash)}function shouldSearchParent(flags,isFirstHostTNode){return!(flags&InjectFlags.Self||flags&InjectFlags.Host&&isFirstHostTNode)}class NodeInjector{constructor(_tNode,_lView){this._tNode=_tNode,this._lView=_lView}get(token,notFoundValue){return getOrCreateInjectable(this._tNode,this._lView,token,void 0,notFoundValue)}}function getInheritedFactory(type){return noSideEffects(()=>{const proto=Object.getPrototypeOf(type.prototype).constructor,factory=proto[NG_FACTORY_DEF]||function getFactoryOf(type){const typeAny=type;if(isForwardRef(type))return()=>{const factory=getFactoryOf(resolveForwardRef(typeAny));return factory?factory():null};let factory=getFactoryDef(typeAny);if(null===factory){const injectorDef=getInjectorDef(typeAny);factory=injectorDef&&injectorDef.factory}return factory||null}(proto);return null!==factory?factory:t=>new t})}function getDebugContext(error){return error.ngDebugContext}function getOriginalError(error){return error.ngOriginalError}function defaultErrorLogger(console,...values){console.error(...values)}class ErrorHandler{constructor(){this._console=console}handleError(error){const originalError=this._findOriginalError(error),context=this._findContext(error),errorLogger=function(error){return error.ngErrorLogger||defaultErrorLogger}(error);errorLogger(this._console,"ERROR",error),originalError&&errorLogger(this._console,"ORIGINAL ERROR",originalError),context&&errorLogger(this._console,"ERROR CONTEXT",context)}_findContext(error){return error?getDebugContext(error)?getDebugContext(error):this._findContext(getOriginalError(error)):null}_findOriginalError(error){let e=getOriginalError(error);for(;e&&getOriginalError(e);)e=getOriginalError(e);return e}}class SafeValueImpl{constructor(changingThisBreaksApplicationSecurity){this.changingThisBreaksApplicationSecurity=changingThisBreaksApplicationSecurity}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class SafeHtmlImpl extends SafeValueImpl{getTypeName(){return"HTML"}}class SafeStyleImpl extends SafeValueImpl{getTypeName(){return"Style"}}class SafeScriptImpl extends SafeValueImpl{getTypeName(){return"Script"}}class SafeUrlImpl extends SafeValueImpl{getTypeName(){return"URL"}}class SafeResourceUrlImpl extends SafeValueImpl{getTypeName(){return"ResourceURL"}}function unwrapSafeValue(value){return value instanceof SafeValueImpl?value.changingThisBreaksApplicationSecurity:value}function allowSanitizationBypassAndThrow(value,type){const actualType=getSanitizationBypassType(value);if(null!=actualType&&actualType!==type){if("ResourceURL"===actualType&&"URL"===type)return!0;throw new Error(`Required a safe ${type}, got a ${actualType} (see http://g.co/ng/security#xss)`)}return actualType===type}function getSanitizationBypassType(value){return value instanceof SafeValueImpl&&value.getTypeName()||null}let _devMode=!0,_runModeLocked=!1;function isDevMode(){return _runModeLocked=!0,_devMode}class InertBodyHelper{constructor(defaultDoc){this.defaultDoc=defaultDoc,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert");let inertBodyElement=this.inertDocument.body;if(null==inertBodyElement){const inertHtml=this.inertDocument.createElement("html");this.inertDocument.appendChild(inertHtml),inertBodyElement=this.inertDocument.createElement("body"),inertHtml.appendChild(inertBodyElement)}inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!inertBodyElement.querySelector||inertBodyElement.querySelector("svg")?(inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=inertBodyElement.querySelector&&inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(_a){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(html){html="<body><remove></remove>"+html+"</body>";try{html=encodeURI(html)}catch(_a){return null}const xhr=new XMLHttpRequest;xhr.responseType="document",xhr.open("GET","data:text/html;charset=utf-8,"+html,!1),xhr.send(void 0);const body=xhr.response.body;return body.removeChild(body.firstChild),body}getInertBodyElement_DOMParser(html){html="<body><remove></remove>"+html+"</body>";try{const body=(new window.DOMParser).parseFromString(html,"text/html").body;return body.removeChild(body.firstChild),body}catch(_a){return null}}getInertBodyElement_InertDocument(html){const templateEl=this.inertDocument.createElement("template");if("content"in templateEl)return templateEl.innerHTML=html,templateEl;const inertBody=this.inertDocument.createElement("body");return inertBody.innerHTML=html,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(inertBody),inertBody}stripCustomNsAttrs(el){const elAttrs=el.attributes;for(let i=elAttrs.length-1;0<i;i--){const attrName=elAttrs.item(i).name;"xmlns:ns1"!==attrName&&0!==attrName.indexOf("ns1:")||el.removeAttribute(attrName)}let childNode=el.firstChild;for(;childNode;)childNode.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(childNode),childNode=childNode.nextSibling}}const SAFE_URL_PATTERN=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,DATA_URL_PATTERN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function _sanitizeUrl(url){return(url=String(url)).match(SAFE_URL_PATTERN)||url.match(DATA_URL_PATTERN)?url:(isDevMode()&&console.warn(`WARNING: sanitizing unsafe URL value ${url} (see http://g.co/ng/security#xss)`),"unsafe:"+url)}function tagSet(tags){const res={};for(const t of tags.split(","))res[t]=!0;return res}function core_merge(...sets){const res={};for(const s of sets)for(const v in s)s.hasOwnProperty(v)&&(res[v]=!0);return res}const VOID_ELEMENTS=tagSet("area,br,col,hr,img,wbr"),OPTIONAL_END_TAG_BLOCK_ELEMENTS=tagSet("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),OPTIONAL_END_TAG_INLINE_ELEMENTS=tagSet("rp,rt"),OPTIONAL_END_TAG_ELEMENTS=core_merge(OPTIONAL_END_TAG_INLINE_ELEMENTS,OPTIONAL_END_TAG_BLOCK_ELEMENTS),VALID_ELEMENTS=core_merge(VOID_ELEMENTS,core_merge(OPTIONAL_END_TAG_BLOCK_ELEMENTS,tagSet("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),core_merge(OPTIONAL_END_TAG_INLINE_ELEMENTS,tagSet("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),OPTIONAL_END_TAG_ELEMENTS),URI_ATTRS=tagSet("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),SRCSET_ATTRS=tagSet("srcset"),VALID_ATTRS=core_merge(URI_ATTRS,SRCSET_ATTRS,tagSet("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tagSet("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),SKIP_TRAVERSING_CONTENT_IF_INVALID_ELEMENTS=tagSet("script,style,template");class SanitizingHtmlSerializer{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(el){let current=el.firstChild,traverseContent=!0;for(;current;)if(current.nodeType===Node.ELEMENT_NODE?traverseContent=this.startElement(current):current.nodeType===Node.TEXT_NODE?this.chars(current.nodeValue):this.sanitizedSomething=!0,traverseContent&&current.firstChild)current=current.firstChild;else for(;current;){current.nodeType===Node.ELEMENT_NODE&&this.endElement(current);let next=this.checkClobberedElement(current,current.nextSibling);if(next){current=next;break}current=this.checkClobberedElement(current,current.parentNode)}return this.buf.join("")}startElement(element){const tagName=element.nodeName.toLowerCase();if(!VALID_ELEMENTS.hasOwnProperty(tagName))return this.sanitizedSomething=!0,!SKIP_TRAVERSING_CONTENT_IF_INVALID_ELEMENTS.hasOwnProperty(tagName);this.buf.push("<"),this.buf.push(tagName);const elAttrs=element.attributes;for(let i=0;i<elAttrs.length;i++){const elAttr=elAttrs.item(i),attrName=elAttr.name,lower=attrName.toLowerCase();if(!VALID_ATTRS.hasOwnProperty(lower)){this.sanitizedSomething=!0;continue}let value=elAttr.value;URI_ATTRS[lower]&&(value=_sanitizeUrl(value)),SRCSET_ATTRS[lower]&&(srcset=value,value=(srcset=String(srcset)).split(",").map(srcset=>_sanitizeUrl(srcset.trim())).join(", ")),this.buf.push(" ",attrName,'="',encodeEntities(value),'"')}var srcset;return this.buf.push(">"),!0}endElement(current){const tagName=current.nodeName.toLowerCase();VALID_ELEMENTS.hasOwnProperty(tagName)&&!VOID_ELEMENTS.hasOwnProperty(tagName)&&(this.buf.push("</"),this.buf.push(tagName),this.buf.push(">"))}chars(chars){this.buf.push(encodeEntities(chars))}checkClobberedElement(node,nextNode){if(nextNode&&(node.compareDocumentPosition(nextNode)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+node.outerHTML);return nextNode}}const SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~ |!])/g;function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,(function(match){return"&#"+(1024*(match.charCodeAt(0)-55296)+(match.charCodeAt(1)-56320)+65536)+";"})).replace(NON_ALPHANUMERIC_REGEXP,(function(match){return"&#"+match.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let inertBodyHelper;function _sanitizeHtml(defaultDoc,unsafeHtmlInput){let inertBodyElement=null;try{inertBodyHelper=inertBodyHelper||new InertBodyHelper(defaultDoc);let unsafeHtml=unsafeHtmlInput?String(unsafeHtmlInput):"";inertBodyElement=inertBodyHelper.getInertBodyElement(unsafeHtml);let mXSSAttempts=5,parsedHtml=unsafeHtml;do{if(0===mXSSAttempts)throw new Error("Failed to sanitize html because the input is unstable");mXSSAttempts--,unsafeHtml=parsedHtml,parsedHtml=inertBodyElement.innerHTML,inertBodyElement=inertBodyHelper.getInertBodyElement(unsafeHtml)}while(unsafeHtml!==parsedHtml);const sanitizer=new SanitizingHtmlSerializer,safeHtml=sanitizer.sanitizeChildren(getTemplateContent(inertBodyElement)||inertBodyElement);return isDevMode()&&sanitizer.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),safeHtml}finally{if(inertBodyElement){const parent=getTemplateContent(inertBodyElement)||inertBodyElement;for(;parent.firstChild;)parent.removeChild(parent.firstChild)}}}function getTemplateContent(el){return"content"in el&&function(el){return el.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===el.nodeName}(el)?el.content:null}const SecurityContext=function(){var SecurityContext={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return SecurityContext[SecurityContext.NONE]="NONE",SecurityContext[SecurityContext.HTML]="HTML",SecurityContext[SecurityContext.STYLE]="STYLE",SecurityContext[SecurityContext.SCRIPT]="SCRIPT",SecurityContext[SecurityContext.URL]="URL",SecurityContext[SecurityContext.RESOURCE_URL]="RESOURCE_URL",SecurityContext}(),SAFE_STYLE_VALUE=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:attr|calc|var))\\([-0-9.%, #a-zA-Z]+\\))$","g"),URL_RE=/^url\(([^)]+)\)$/;function sanitizeHtml(unsafeHtml){const sanitizer=getSanitizer();return sanitizer?sanitizer.sanitize(SecurityContext.HTML,unsafeHtml)||"":allowSanitizationBypassAndThrow(unsafeHtml,"HTML")?unwrapSafeValue(unsafeHtml):_sanitizeHtml(getDocument(),renderStringify(unsafeHtml))}function sanitizeUrl(unsafeUrl){const sanitizer=getSanitizer();return sanitizer?sanitizer.sanitize(SecurityContext.URL,unsafeUrl)||"":allowSanitizationBypassAndThrow(unsafeUrl,"URL")?unwrapSafeValue(unsafeUrl):_sanitizeUrl(renderStringify(unsafeUrl))}function getSanitizer(){const lView=getLView();return lView&&lView[12]}function attachPatchData(target,data){target.__ngContext__=data}function throwMultipleComponentError(tNode){throw new Error("Multiple components match node with tagname "+tNode.tagName)}function throwMixedMultiProviderError(){throw new Error("Cannot mix multi providers and regular providers")}function classIndexOf(className,classToSearch,startingIndex){let end=className.length;for(;;){const foundIndex=className.indexOf(classToSearch,startingIndex);if(-1===foundIndex)return foundIndex;if(0===foundIndex||className.charCodeAt(foundIndex-1)<=32){const length=classToSearch.length;if(foundIndex+length===end||className.charCodeAt(foundIndex+length)<=32)return foundIndex}startingIndex=foundIndex+1}}function isCssClassMatching(attrs,cssClassToMatch,isProjectionMode){let i=0;for(;i<attrs.length;){let item=attrs[i++];if(isProjectionMode&&"class"===item){if(item=attrs[i],-1!==classIndexOf(item.toLowerCase(),cssClassToMatch,0))return!0}else if(1===item){for(;i<attrs.length&&"string"==typeof(item=attrs[i++]);)if(item.toLowerCase()===cssClassToMatch)return!0;return!1}}return!1}function isInlineTemplate(tNode){return 0===tNode.type&&"ng-template"!==tNode.tagName}function hasTagAndTypeMatch(tNode,currentSelector,isProjectionMode){return currentSelector===(0!==tNode.type||isProjectionMode?tNode.tagName:"ng-template")}function isNodeMatchingSelector(tNode,selector,isProjectionMode){let mode=4;const nodeAttrs=tNode.attrs||[],nameOnlyMarkerIdx=function(nodeAttrs){for(let i=0;i<nodeAttrs.length;i++)if(isNameOnlyAttributeMarker(nodeAttrs[i]))return i;return nodeAttrs.length}(nodeAttrs);let skipToNextSelector=!1;for(let i=0;i<selector.length;i++){const current=selector[i];if("number"!=typeof current){if(!skipToNextSelector)if(4&mode){if(mode=2|1&mode,""!==current&&!hasTagAndTypeMatch(tNode,current,isProjectionMode)||""===current&&1===selector.length){if(isPositive(mode))return!1;skipToNextSelector=!0}}else{const selectorAttrValue=8&mode?current:selector[++i];if(8&mode&&null!==tNode.attrs){if(!isCssClassMatching(tNode.attrs,selectorAttrValue,isProjectionMode)){if(isPositive(mode))return!1;skipToNextSelector=!0}continue}const attrIndexInNode=findAttrIndexInNode(8&mode?"class":current,nodeAttrs,isInlineTemplate(tNode),isProjectionMode);if(-1===attrIndexInNode){if(isPositive(mode))return!1;skipToNextSelector=!0;continue}if(""!==selectorAttrValue){let nodeAttrValue;nodeAttrValue=attrIndexInNode>nameOnlyMarkerIdx?"":nodeAttrs[attrIndexInNode+1].toLowerCase();const compareAgainstClassName=8&mode?nodeAttrValue:null;if(compareAgainstClassName&&-1!==classIndexOf(compareAgainstClassName,selectorAttrValue,0)||2&mode&&selectorAttrValue!==nodeAttrValue){if(isPositive(mode))return!1;skipToNextSelector=!0}}}}else{if(!skipToNextSelector&&!isPositive(mode)&&!isPositive(current))return!1;if(skipToNextSelector&&isPositive(current))continue;skipToNextSelector=!1,mode=current|1&mode}}return isPositive(mode)||skipToNextSelector}function isPositive(mode){return 0==(1&mode)}function findAttrIndexInNode(name,attrs,isInlineTemplate,isProjectionMode){if(null===attrs)return-1;let i=0;if(isProjectionMode||!isInlineTemplate){let bindingsMode=!1;for(;i<attrs.length;){const maybeAttrName=attrs[i];if(maybeAttrName===name)return i;if(3===maybeAttrName||6===maybeAttrName)bindingsMode=!0;else{if(1===maybeAttrName||2===maybeAttrName){let value=attrs[++i];for(;"string"==typeof value;)value=attrs[++i];continue}if(4===maybeAttrName)break;if(0===maybeAttrName){i+=4;continue}}i+=bindingsMode?1:2}return-1}return function(attrs,name){let i=attrs.indexOf(4);if(i>-1)for(i++;i<attrs.length;){const attr=attrs[i];if("number"==typeof attr)return-1;if(attr===name)return i;i++}return-1}(attrs,name)}function isNodeMatchingSelectorList(tNode,selector,isProjectionMode=!1){for(let i=0;i<selector.length;i++)if(isNodeMatchingSelector(tNode,selector[i],isProjectionMode))return!0;return!1}function isSelectorInSelectorList(selector,list){selectorListLoop:for(let i=0;i<list.length;i++){const currentSelectorInList=list[i];if(selector.length===currentSelectorInList.length){for(let j=0;j<selector.length;j++)if(selector[j]!==currentSelectorInList[j])continue selectorListLoop;return!0}}return!1}function maybeWrapInNotSelector(isNegativeMode,chunk){return isNegativeMode?":not("+chunk.trim()+")":chunk}function stringifyCSSSelector(selector){let result=selector[0],i=1,mode=2,currentChunk="",isNegativeMode=!1;for(;i<selector.length;){let valueOrMarker=selector[i];if("string"==typeof valueOrMarker)if(2&mode){const attrValue=selector[++i];currentChunk+="["+valueOrMarker+(attrValue.length>0?'="'+attrValue+'"':"")+"]"}else 8&mode?currentChunk+="."+valueOrMarker:4&mode&&(currentChunk+=" "+valueOrMarker);else""===currentChunk||isPositive(valueOrMarker)||(result+=maybeWrapInNotSelector(isNegativeMode,currentChunk),currentChunk=""),mode=valueOrMarker,isNegativeMode=isNegativeMode||!isPositive(mode);i++}return""!==currentChunk&&(result+=maybeWrapInNotSelector(isNegativeMode,currentChunk)),result}const NO_CHANGE={};function getLViewParent(lView){const parent=lView[3];return isLContainer(parent)?parent[3]:parent}function getFirstLContainer(lView){return getNearestLContainer(lView[13])}function getNextLContainer(container){return getNearestLContainer(container[4])}function getNearestLContainer(viewOrContainer){for(;null!==viewOrContainer&&!isLContainer(viewOrContainer);)viewOrContainer=viewOrContainer[4];return viewOrContainer}function advance(delta){selectIndexInternal(getTView(),getLView(),getSelectedIndex()+delta,getCheckNoChangesMode())}function selectIndexInternal(tView,lView,index,checkNoChangesMode){if(!checkNoChangesMode)if(3==(3&lView[2])){const preOrderCheckHooks=tView.preOrderCheckHooks;null!==preOrderCheckHooks&&executeCheckHooks(lView,preOrderCheckHooks,index)}else{const preOrderHooks=tView.preOrderHooks;null!==preOrderHooks&&executeInitAndCheckHooks(lView,preOrderHooks,0,index)}setSelectedIndex(index)}function toTStylingRange(prev,next){return prev<<17|next<<2}function getTStylingRangePrev(tStylingRange){return tStylingRange>>17&32767}function setTStylingRangePrevDuplicate(tStylingRange){return 2|tStylingRange}function getTStylingRangeNext(tStylingRange){return(131068&tStylingRange)>>2}function setTStylingRangeNext(tStylingRange,next){return-131069&tStylingRange|next<<2}function setTStylingRangeNextDuplicate(tStylingRange){return 1|tStylingRange}function refreshContentQueries(tView,lView){const contentQueries=tView.contentQueries;if(null!==contentQueries)for(let i=0;i<contentQueries.length;i+=2){const queryStartIdx=contentQueries[i],directiveDefIdx=contentQueries[i+1];if(-1!==directiveDefIdx){const directiveDef=tView.data[directiveDefIdx];setCurrentQueryIndex(queryStartIdx),directiveDef.contentQueries(2,lView[directiveDefIdx],directiveDefIdx)}}}function elementCreate(name,renderer,namespace){return isProceduralRenderer(renderer)?renderer.createElement(name,namespace):null===namespace?renderer.createElement(name):renderer.createElementNS(namespace,name)}function createLView(parentLView,tView,context,flags,host,tHostNode,rendererFactory,renderer,sanitizer,injector){const lView=tView.blueprint.slice();return lView[0]=host,lView[2]=140|flags,resetPreOrderHookFlags(lView),lView[3]=lView[15]=parentLView,lView[8]=context,lView[10]=rendererFactory||parentLView&&parentLView[10],lView[11]=renderer||parentLView&&parentLView[11],lView[12]=sanitizer||parentLView&&parentLView[12]||null,lView[9]=injector||parentLView&&parentLView[9]||null,lView[6]=tHostNode,lView[16]=2==tView.type?parentLView[16]:lView,lView}function getOrCreateTNode(tView,tHostNode,index,type,name,attrs){const adjustedIndex=index+20,tNode=tView.data[adjustedIndex]||function(tView,tHostNode,adjustedIndex,type,name,attrs){const previousOrParentTNode=getPreviousOrParentTNode(),isParent=getIsParent(),parent=isParent?previousOrParentTNode:previousOrParentTNode&&previousOrParentTNode.parent,tNode=tView.data[adjustedIndex]=createTNode(0,parent&&parent!==tHostNode?parent:null,type,adjustedIndex,name,attrs);return null===tView.firstChild&&(tView.firstChild=tNode),previousOrParentTNode&&(!isParent||null!=previousOrParentTNode.child||null===tNode.parent&&2!==previousOrParentTNode.type?isParent||(previousOrParentTNode.next=tNode):previousOrParentTNode.child=tNode),tNode}(tView,tHostNode,adjustedIndex,type,name,attrs);return setPreviousOrParentTNode(tNode,!0),tNode}function renderView(tView,lView,context){enterView(lView,lView[6]);try{const viewQuery=tView.viewQuery;null!==viewQuery&&executeViewQueryFn(1,viewQuery,context);const templateFn=tView.template;null!==templateFn&&executeTemplate(tView,lView,templateFn,1,context),tView.firstCreatePass&&(tView.firstCreatePass=!1),tView.staticContentQueries&&refreshContentQueries(tView,lView),tView.staticViewQueries&&executeViewQueryFn(2,tView.viewQuery,context);const components=tView.components;null!==components&&function(hostLView,components){for(let i=0;i<components.length;i++)renderComponent(hostLView,components[i])}(lView,components)}catch(error){throw tView.firstCreatePass&&(tView.incompleteFirstPass=!0),error}finally{lView[2]&=-5,leaveView()}}function refreshView(tView,lView,templateFn,context){const flags=lView[2];if(256==(256&flags))return;enterView(lView,lView[6]);const checkNoChangesMode=getCheckNoChangesMode();try{resetPreOrderHookFlags(lView),instructionState.lFrame.bindingIndex=tView.bindingStartIndex,null!==templateFn&&executeTemplate(tView,lView,templateFn,2,context);const hooksInitPhaseCompleted=3==(3&flags);if(!checkNoChangesMode)if(hooksInitPhaseCompleted){const preOrderCheckHooks=tView.preOrderCheckHooks;null!==preOrderCheckHooks&&executeCheckHooks(lView,preOrderCheckHooks,null)}else{const preOrderHooks=tView.preOrderHooks;null!==preOrderHooks&&executeInitAndCheckHooks(lView,preOrderHooks,0,null),incrementInitPhaseFlags(lView,0)}if(function(lView){for(let lContainer=getFirstLContainer(lView);null!==lContainer;lContainer=getNextLContainer(lContainer)){if(!lContainer[2])continue;const movedViews=lContainer[9];for(let i=0;i<movedViews.length;i++){const movedLView=movedViews[i],insertionLContainer=movedLView[3];0==(1024&movedLView[2])&&updateTransplantedViewCount(insertionLContainer,1),movedLView[2]|=1024}}}(lView),function(lView){for(let lContainer=getFirstLContainer(lView);null!==lContainer;lContainer=getNextLContainer(lContainer))for(let i=10;i<lContainer.length;i++){const embeddedLView=lContainer[i],embeddedTView=embeddedLView[1];viewAttachedToChangeDetector(embeddedLView)&&refreshView(embeddedTView,embeddedLView,embeddedTView.template,embeddedLView[8])}}(lView),null!==tView.contentQueries&&refreshContentQueries(tView,lView),!checkNoChangesMode)if(hooksInitPhaseCompleted){const contentCheckHooks=tView.contentCheckHooks;null!==contentCheckHooks&&executeCheckHooks(lView,contentCheckHooks)}else{const contentHooks=tView.contentHooks;null!==contentHooks&&executeInitAndCheckHooks(lView,contentHooks,1),incrementInitPhaseFlags(lView,1)}!function(tView,lView){try{const expandoInstructions=tView.expandoInstructions;if(null!==expandoInstructions){let bindingRootIndex=tView.expandoStartIndex,currentDirectiveIndex=-1,currentElementIndex=-1;for(let i=0;i<expandoInstructions.length;i++){const instruction=expandoInstructions[i];"number"==typeof instruction?instruction<=0?(currentElementIndex=0-instruction,setSelectedIndex(currentElementIndex),bindingRootIndex+=9+expandoInstructions[++i],currentDirectiveIndex=bindingRootIndex):bindingRootIndex+=instruction:(null!==instruction&&(setBindingRootForHostBindings(bindingRootIndex,currentDirectiveIndex),instruction(2,lView[currentDirectiveIndex])),currentDirectiveIndex++)}}}finally{setSelectedIndex(-1)}}(tView,lView);const components=tView.components;null!==components&&function(hostLView,components){for(let i=0;i<components.length;i++)refreshComponent(hostLView,components[i])}(lView,components);const viewQuery=tView.viewQuery;if(null!==viewQuery&&executeViewQueryFn(2,viewQuery,context),!checkNoChangesMode)if(hooksInitPhaseCompleted){const viewCheckHooks=tView.viewCheckHooks;null!==viewCheckHooks&&executeCheckHooks(lView,viewCheckHooks)}else{const viewHooks=tView.viewHooks;null!==viewHooks&&executeInitAndCheckHooks(lView,viewHooks,2),incrementInitPhaseFlags(lView,2)}!0===tView.firstUpdatePass&&(tView.firstUpdatePass=!1),checkNoChangesMode||(lView[2]&=-73),1024&lView[2]&&(lView[2]&=-1025,updateTransplantedViewCount(lView[3],-1))}finally{leaveView()}}function renderComponentOrTemplate(tView,lView,templateFn,context){const rendererFactory=lView[10],normalExecutionPath=!getCheckNoChangesMode(),creationModeIsActive=isCreationMode(lView);try{normalExecutionPath&&!creationModeIsActive&&rendererFactory.begin&&rendererFactory.begin(),creationModeIsActive&&renderView(tView,lView,context),refreshView(tView,lView,templateFn,context)}finally{normalExecutionPath&&!creationModeIsActive&&rendererFactory.end&&rendererFactory.end()}}function executeTemplate(tView,lView,templateFn,rf,context){const prevSelectedIndex=getSelectedIndex();try{setSelectedIndex(-1),2&rf&&lView.length>20&&selectIndexInternal(tView,lView,0,getCheckNoChangesMode()),templateFn(rf,context)}finally{setSelectedIndex(prevSelectedIndex)}}function executeContentQueries(tView,tNode,lView){if(isContentQueryHost(tNode)){const end=tNode.directiveEnd;for(let directiveIndex=tNode.directiveStart;directiveIndex<end;directiveIndex++){const def=tView.data[directiveIndex];def.contentQueries&&def.contentQueries(1,lView[directiveIndex],directiveIndex)}}}function createDirectivesInstances(tView,lView,tNode){getBindingsEnabled()&&(function(tView,lView,tNode,native){const start=tNode.directiveStart,end=tNode.directiveEnd;tView.firstCreatePass||getOrCreateNodeInjectorForNode(tNode,lView),attachPatchData(native,lView);const initialInputs=tNode.initialInputs;for(let i=start;i<end;i++){const def=tView.data[i],isComponent=isComponentDef(def);isComponent&&addComponentLogic(lView,tNode,def);const directive=getNodeInjectable(lView,tView,i,tNode);attachPatchData(directive,lView),null!==initialInputs&&setInputsFromAttrs(0,i-start,directive,def,0,initialInputs),isComponent&&(getComponentLViewByIndex(tNode.index,lView)[8]=directive)}}(tView,lView,tNode,getNativeByTNode(tNode,lView)),128==(128&tNode.flags)&&function(tView,lView,tNode){const start=tNode.directiveStart,end=tNode.directiveEnd,expando=tView.expandoInstructions,firstCreatePass=tView.firstCreatePass,elementIndex=tNode.index-20,currentDirectiveIndex=instructionState.lFrame.currentDirectiveIndex;try{setSelectedIndex(elementIndex);for(let dirIndex=start;dirIndex<end;dirIndex++){const def=tView.data[dirIndex],directive=lView[dirIndex];setCurrentDirectiveIndex(dirIndex),null!==def.hostBindings||0!==def.hostVars||null!==def.hostAttrs?invokeHostBindingsInCreationMode(def,directive):firstCreatePass&&expando.push(null)}}finally{setSelectedIndex(-1),setCurrentDirectiveIndex(currentDirectiveIndex)}}(tView,lView,tNode))}function saveResolvedLocalsInData(viewData,tNode,localRefExtractor=getNativeByTNode){const localNames=tNode.localNames;if(null!==localNames){let localIndex=tNode.index+1;for(let i=0;i<localNames.length;i+=2){const index=localNames[i+1],value=-1===index?localRefExtractor(tNode,viewData):viewData[index];viewData[localIndex++]=value}}}function getOrCreateTComponentView(def){const tView=def.tView;return null===tView||tView.incompleteFirstPass?def.tView=createTView(1,-1,def.template,def.decls,def.vars,def.directiveDefs,def.pipeDefs,def.viewQuery,def.schemas,def.consts):tView}function createTView(type,viewIndex,templateFn,decls,vars,directives,pipes,viewQuery,schemas,consts){const bindingStartIndex=20+decls,initialViewLength=bindingStartIndex+vars,blueprint=function(bindingStartIndex,initialViewLength){const blueprint=[];for(let i=0;i<initialViewLength;i++)blueprint.push(i<bindingStartIndex?null:NO_CHANGE);return blueprint}(bindingStartIndex,initialViewLength);return blueprint[1]={type:type,id:viewIndex,blueprint:blueprint,template:templateFn,queries:null,viewQuery:viewQuery,node:null,data:blueprint.slice().fill(null,bindingStartIndex),bindingStartIndex:bindingStartIndex,expandoStartIndex:initialViewLength,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof directives?directives():directives,pipeRegistry:"function"==typeof pipes?pipes():pipes,firstChild:null,schemas:schemas,consts:consts,incompleteFirstPass:!1}}function createTNode(tView,tParent,type,adjustedIndex,tagName,attrs){return{type:type,index:adjustedIndex,injectorIndex:tParent?tParent.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:tagName,attrs:attrs,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:tParent,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function generatePropertyAliases(inputAliasMap,directiveDefIdx,propStore){for(let publicName in inputAliasMap)if(inputAliasMap.hasOwnProperty(publicName)){const internalName=inputAliasMap[publicName];(propStore=null===propStore?{}:propStore).hasOwnProperty(publicName)?propStore[publicName].push(directiveDefIdx,internalName):propStore[publicName]=[directiveDefIdx,internalName]}return propStore}function elementPropertyInternal(tView,tNode,lView,propName,value,renderer,sanitizer,nativeOnly){const element=getNativeByTNode(tNode,lView);let dataValue,inputData=tNode.inputs;var name;!nativeOnly&&null!=inputData&&(dataValue=inputData[propName])?(setInputsForProperty(tView,lView,dataValue,propName,value),isComponentHost(tNode)&&function(lView,viewIndex){const childComponentLView=getComponentLViewByIndex(viewIndex,lView);16&childComponentLView[2]||(childComponentLView[2]|=64)}(lView,tNode.index)):3===tNode.type&&(propName="class"===(name=propName)?"className":"for"===name?"htmlFor":"formaction"===name?"formAction":"innerHtml"===name?"innerHTML":"readonly"===name?"readOnly":"tabindex"===name?"tabIndex":name,value=null!=sanitizer?sanitizer(value,tNode.tagName||"",propName):value,isProceduralRenderer(renderer)?renderer.setProperty(element,propName,value):isAnimationProp(propName)||(element.setProperty?element.setProperty(propName,value):element[propName]=value))}function resolveDirectives(tView,lView,tNode,localRefs){let hasDirectives=!1;if(getBindingsEnabled()){const directiveDefs=function(tView,viewData,tNode){const registry=tView.directiveRegistry;let matches=null;if(registry)for(let i=0;i<registry.length;i++){const def=registry[i];isNodeMatchingSelectorList(tNode,def.selectors,!1)&&(matches||(matches=[]),diPublicInInjector(getOrCreateNodeInjectorForNode(tNode,viewData),tView,def.type),isComponentDef(def)?(2&tNode.flags&&throwMultipleComponentError(tNode),markAsComponentHost(tView,tNode),matches.unshift(def)):matches.push(def))}return matches}(tView,lView,tNode),exportsMap=null===localRefs?null:{"":-1};if(null!==directiveDefs){let totalDirectiveHostVars=0;hasDirectives=!0,initTNodeFlags(tNode,tView.data.length,directiveDefs.length);for(let i=0;i<directiveDefs.length;i++){const def=directiveDefs[i];def.providersResolver&&def.providersResolver(def)}generateExpandoInstructionBlock(tView,tNode,directiveDefs.length);let preOrderHooksFound=!1,preOrderCheckHooksFound=!1;for(let i=0;i<directiveDefs.length;i++){const def=directiveDefs[i];tNode.mergedAttrs=mergeHostAttrs(tNode.mergedAttrs,def.hostAttrs),baseResolveDirective(tView,lView,def),saveNameToExportMap(tView.data.length-1,def,exportsMap),null!==def.contentQueries&&(tNode.flags|=8),null===def.hostBindings&&null===def.hostAttrs&&0===def.hostVars||(tNode.flags|=128),!preOrderHooksFound&&(def.onChanges||def.onInit||def.doCheck)&&((tView.preOrderHooks||(tView.preOrderHooks=[])).push(tNode.index-20),preOrderHooksFound=!0),preOrderCheckHooksFound||!def.onChanges&&!def.doCheck||((tView.preOrderCheckHooks||(tView.preOrderCheckHooks=[])).push(tNode.index-20),preOrderCheckHooksFound=!0),addHostBindingsToExpandoInstructions(tView,def),totalDirectiveHostVars+=def.hostVars}!function(tView,tNode){const end=tNode.directiveEnd,defs=tView.data,tNodeAttrs=tNode.attrs,inputsFromAttrs=[];let inputsStore=null,outputsStore=null;for(let i=tNode.directiveStart;i<end;i++){const directiveDef=defs[i],directiveInputs=directiveDef.inputs,initialInputs=null===tNodeAttrs||isInlineTemplate(tNode)?null:generateInitialInputs(directiveInputs,tNodeAttrs);inputsFromAttrs.push(initialInputs),inputsStore=generatePropertyAliases(directiveInputs,i,inputsStore),outputsStore=generatePropertyAliases(directiveDef.outputs,i,outputsStore)}null!==inputsStore&&(inputsStore.hasOwnProperty("class")&&(tNode.flags|=16),inputsStore.hasOwnProperty("style")&&(tNode.flags|=32)),tNode.initialInputs=inputsFromAttrs,tNode.inputs=inputsStore,tNode.outputs=outputsStore}(tView,tNode),growHostVarsSpace(tView,lView,totalDirectiveHostVars)}exportsMap&&function(tNode,localRefs,exportsMap){if(localRefs){const localNames=tNode.localNames=[];for(let i=0;i<localRefs.length;i+=2){const index=exportsMap[localRefs[i+1]];if(null==index)throw new Error(`Export of name '${localRefs[i+1]}' not found!`);localNames.push(localRefs[i],index)}}}(tNode,localRefs,exportsMap)}return tNode.mergedAttrs=mergeHostAttrs(tNode.mergedAttrs,tNode.attrs),hasDirectives}function addHostBindingsToExpandoInstructions(tView,def){const expando=tView.expandoInstructions;expando.push(def.hostBindings),0!==def.hostVars&&expando.push(def.hostVars)}function growHostVarsSpace(tView,lView,count){for(let i=0;i<count;i++)lView.push(NO_CHANGE),tView.blueprint.push(NO_CHANGE),tView.data.push(null)}function invokeHostBindingsInCreationMode(def,directive){null!==def.hostBindings&&def.hostBindings(1,directive)}function generateExpandoInstructionBlock(tView,tNode,directiveCount){const elementIndex=20-tNode.index,providerCount=tView.data.length-(65535&tNode.providerIndexes);(tView.expandoInstructions||(tView.expandoInstructions=[])).push(elementIndex,providerCount,directiveCount)}function markAsComponentHost(tView,hostTNode){hostTNode.flags|=2,(tView.components||(tView.components=[])).push(hostTNode.index)}function saveNameToExportMap(index,def,exportsMap){if(exportsMap){if(def.exportAs)for(let i=0;i<def.exportAs.length;i++)exportsMap[def.exportAs[i]]=index;isComponentDef(def)&&(exportsMap[""]=index)}}function initTNodeFlags(tNode,index,numberOfDirectives){tNode.flags|=1,tNode.directiveStart=index,tNode.directiveEnd=index+numberOfDirectives,tNode.providerIndexes=index}function baseResolveDirective(tView,viewData,def){tView.data.push(def);const directiveFactory=def.factory||(def.factory=getFactoryDef(def.type)),nodeInjectorFactory=new NodeInjectorFactory(directiveFactory,isComponentDef(def),null);tView.blueprint.push(nodeInjectorFactory),viewData.push(nodeInjectorFactory)}function addComponentLogic(lView,hostTNode,def){const native=getNativeByTNode(hostTNode,lView),tView=getOrCreateTComponentView(def),rendererFactory=lView[10],componentView=addToViewTree(lView,createLView(lView,tView,null,def.onPush?64:16,native,hostTNode,rendererFactory,rendererFactory.createRenderer(native,def)));lView[hostTNode.index]=componentView}function elementAttributeInternal(tNode,lView,name,value,sanitizer,namespace){const element=getNativeByTNode(tNode,lView),renderer=lView[11];if(null==value)isProceduralRenderer(renderer)?renderer.removeAttribute(element,name,namespace):element.removeAttribute(name);else{const strValue=null==sanitizer?renderStringify(value):sanitizer(value,tNode.tagName||"",name);isProceduralRenderer(renderer)?renderer.setAttribute(element,name,strValue,namespace):namespace?element.setAttributeNS(namespace,name,strValue):element.setAttribute(name,strValue)}}function setInputsFromAttrs(lView,directiveIndex,instance,def,tNode,initialInputData){const initialInputs=initialInputData[directiveIndex];if(null!==initialInputs){const setInput=def.setInput;for(let i=0;i<initialInputs.length;){const publicName=initialInputs[i++],privateName=initialInputs[i++],value=initialInputs[i++];null!==setInput?def.setInput(instance,value,publicName,privateName):instance[privateName]=value}}}function generateInitialInputs(inputs,attrs){let inputsToStore=null,i=0;for(;i<attrs.length;){const attrName=attrs[i];if(0!==attrName)if(5!==attrName){if("number"==typeof attrName)break;inputs.hasOwnProperty(attrName)&&(null===inputsToStore&&(inputsToStore=[]),inputsToStore.push(attrName,inputs[attrName],attrs[i+1])),i+=2}else i+=2;else i+=4}return inputsToStore}function createLContainer(hostNative,currentView,native,tNode){return new Array(hostNative,!0,!1,currentView,null,0,tNode,native,null,null)}function refreshComponent(hostLView,componentHostIdx){const componentView=getComponentLViewByIndex(componentHostIdx,hostLView);if(viewAttachedToChangeDetector(componentView)){const tView=componentView[1];80&componentView[2]?refreshView(tView,componentView,tView.template,componentView[8]):componentView[5]>0&&function refreshContainsDirtyView(lView){for(let lContainer=getFirstLContainer(lView);null!==lContainer;lContainer=getNextLContainer(lContainer))for(let i=10;i<lContainer.length;i++){const embeddedLView=lContainer[i];if(1024&embeddedLView[2]){const embeddedTView=embeddedLView[1];refreshView(embeddedTView,embeddedLView,embeddedTView.template,embeddedLView[8])}else embeddedLView[5]>0&&refreshContainsDirtyView(embeddedLView)}const components=lView[1].components;if(null!==components)for(let i=0;i<components.length;i++){const componentView=getComponentLViewByIndex(components[i],lView);viewAttachedToChangeDetector(componentView)&&componentView[5]>0&&refreshContainsDirtyView(componentView)}}(componentView)}}function renderComponent(hostLView,componentHostIdx){const componentView=getComponentLViewByIndex(componentHostIdx,hostLView),componentTView=componentView[1];!function(tView,lView){for(let i=lView.length;i<tView.blueprint.length;i++)lView.push(tView.blueprint[i])}(componentTView,componentView),renderView(componentTView,componentView,componentView[8])}function addToViewTree(lView,lViewOrLContainer){return lView[13]?lView[14][4]=lViewOrLContainer:lView[13]=lViewOrLContainer,lView[14]=lViewOrLContainer,lViewOrLContainer}function markViewDirty(lView){for(;lView;){lView[2]|=64;const parent=getLViewParent(lView);if(isRootView(lView)&&!parent)return lView;lView=parent}return null}function detectChangesInternal(tView,lView,context){const rendererFactory=lView[10];rendererFactory.begin&&rendererFactory.begin();try{refreshView(tView,lView,tView.template,context)}catch(error){throw handleError(lView,error),error}finally{rendererFactory.end&&rendererFactory.end()}}function detectChangesInRootView(lView){!function(rootContext){for(let i=0;i<rootContext.components.length;i++){const rootComponent=rootContext.components[i],lView=readPatchedLView(rootComponent),tView=lView[1];renderComponentOrTemplate(tView,lView,tView.template,rootComponent)}}(lView[8])}function executeViewQueryFn(flags,viewQueryFn,component){setCurrentQueryIndex(0),viewQueryFn(flags,component)}const CLEAN_PROMISE=(()=>Promise.resolve(null))();function getLCleanup(view){return view[7]||(view[7]=[])}function getTViewCleanup(tView){return tView.cleanup||(tView.cleanup=[])}function handleError(lView,error){const injector=lView[9],errorHandler=injector?injector.get(ErrorHandler,null):null;errorHandler&&errorHandler.handleError(error)}function setInputsForProperty(tView,lView,inputs,publicName,value){for(let i=0;i<inputs.length;){const index=inputs[i++],privateName=inputs[i++],instance=lView[index],def=tView.data[index];null!==def.setInput?def.setInput(instance,value,publicName,privateName):instance[privateName]=value}}function textBindingInternal(lView,index,value){const element=getNativeByIndex(index,lView),renderer=lView[11];isProceduralRenderer(renderer)?renderer.setValue(element,value):element.textContent=value}function getLContainer(tNode,embeddedView){const container=embeddedView[3];return-1===tNode.index?isLContainer(container)?container:null:container}function getContainerRenderParent(tViewNode,view){const container=getLContainer(tViewNode,view);return container?nativeParentNode(view[11],container[7]):null}function applyToElementOrContainer(action,renderer,parent,lNodeToHandle,beforeNode){if(null!=lNodeToHandle){let lContainer,isComponent=!1;isLContainer(lNodeToHandle)?lContainer=lNodeToHandle:isLView(lNodeToHandle)&&(isComponent=!0,lNodeToHandle=lNodeToHandle[0]);const rNode=unwrapRNode(lNodeToHandle);0===action&&null!==parent?null==beforeNode?nativeAppendChild(renderer,parent,rNode):nativeInsertBefore(renderer,parent,rNode,beforeNode||null):1===action&&null!==parent?nativeInsertBefore(renderer,parent,rNode,beforeNode||null):2===action?function(renderer,rNode,isHostElement){const nativeParent=nativeParentNode(renderer,rNode);nativeParent&&function(renderer,parent,child,isHostElement){isProceduralRenderer(renderer)?renderer.removeChild(parent,child,isHostElement):parent.removeChild(child)}(renderer,nativeParent,rNode,isHostElement)}(renderer,rNode,isComponent):3===action&&renderer.destroyNode(rNode),null!=lContainer&&function(renderer,action,lContainer,renderParent,beforeNode){const anchor=lContainer[7];anchor!==unwrapRNode(lContainer)&&applyToElementOrContainer(action,renderer,renderParent,anchor,beforeNode);for(let i=10;i<lContainer.length;i++){const lView=lContainer[i];applyView(lView[1],lView,renderer,action,renderParent,anchor)}}(renderer,action,lContainer,parent,beforeNode)}}function addRemoveViewFromContainer(tView,lView,insertMode,beforeNode){const renderParent=getContainerRenderParent(tView.node,lView);renderParent&&applyView(tView,lView,lView[11],insertMode?1:2,renderParent,beforeNode)}function detachMovedView(declarationContainer,lView){const movedViews=declarationContainer[9],declarationViewIndex=movedViews.indexOf(lView);1024&lView[2]&&updateTransplantedViewCount(lView[3],-1),movedViews.splice(declarationViewIndex,1)}function detachView(lContainer,removeIndex){if(lContainer.length<=10)return;const indexInContainer=10+removeIndex,viewToDetach=lContainer[indexInContainer];if(viewToDetach){const declarationLContainer=viewToDetach[17];null!==declarationLContainer&&declarationLContainer!==lContainer&&detachMovedView(declarationLContainer,viewToDetach),removeIndex>0&&(lContainer[indexInContainer-1][4]=viewToDetach[4]);const removedLView=removeFromArray(lContainer,10+removeIndex);addRemoveViewFromContainer(viewToDetach[1],viewToDetach,!1,null);const lQueries=removedLView[19];null!==lQueries&&lQueries.detachView(removedLView[1]),viewToDetach[3]=null,viewToDetach[4]=null,viewToDetach[2]&=-129}return viewToDetach}function destroyLView(tView,lView){if(!(256&lView[2])){const renderer=lView[11];isProceduralRenderer(renderer)&&renderer.destroyNode&&applyView(tView,lView,renderer,3,null,null),function(rootView){let lViewOrLContainer=rootView[13];if(!lViewOrLContainer)return cleanUpView(rootView[1],rootView);for(;lViewOrLContainer;){let next=null;if(isLView(lViewOrLContainer))next=lViewOrLContainer[13];else{const firstView=lViewOrLContainer[10];firstView&&(next=firstView)}if(!next){for(;lViewOrLContainer&&!lViewOrLContainer[4]&&lViewOrLContainer!==rootView;)isLView(lViewOrLContainer)&&cleanUpView(lViewOrLContainer[1],lViewOrLContainer),lViewOrLContainer=getParentState(lViewOrLContainer,rootView);null===lViewOrLContainer&&(lViewOrLContainer=rootView),isLView(lViewOrLContainer)&&cleanUpView(lViewOrLContainer[1],lViewOrLContainer),next=lViewOrLContainer&&lViewOrLContainer[4]}lViewOrLContainer=next}}(lView)}}function getParentState(lViewOrLContainer,rootView){let tNode;return isLView(lViewOrLContainer)&&(tNode=lViewOrLContainer[6])&&2===tNode.type?getLContainer(tNode,lViewOrLContainer):lViewOrLContainer[3]===rootView?null:lViewOrLContainer[3]}function cleanUpView(tView,lView){if(!(256&lView[2])){lView[2]&=-129,lView[2]|=256,function(tView,lView){let destroyHooks;if(null!=tView&&null!=(destroyHooks=tView.destroyHooks))for(let i=0;i<destroyHooks.length;i+=2){const context=lView[destroyHooks[i]];if(!(context instanceof NodeInjectorFactory)){const toCall=destroyHooks[i+1];if(Array.isArray(toCall))for(let j=0;j<toCall.length;j+=2)toCall[j+1].call(context[toCall[j]]);else toCall.call(context)}}}(tView,lView),function(tView,lView){const tCleanup=tView.cleanup;if(null!==tCleanup){const lCleanup=lView[7];for(let i=0;i<tCleanup.length-1;i+=2)if("string"==typeof tCleanup[i]){const idxOrTargetGetter=tCleanup[i+1],target="function"==typeof idxOrTargetGetter?idxOrTargetGetter(lView):unwrapRNode(lView[idxOrTargetGetter]),listener=lCleanup[tCleanup[i+2]],useCaptureOrSubIdx=tCleanup[i+3];"boolean"==typeof useCaptureOrSubIdx?target.removeEventListener(tCleanup[i],listener,useCaptureOrSubIdx):useCaptureOrSubIdx>=0?lCleanup[useCaptureOrSubIdx]():lCleanup[-useCaptureOrSubIdx].unsubscribe(),i+=2}else tCleanup[i].call(lCleanup[tCleanup[i+1]]);lView[7]=null}}(tView,lView);const hostTNode=lView[6];hostTNode&&3===hostTNode.type&&isProceduralRenderer(lView[11])&&lView[11].destroy();const declarationContainer=lView[17];if(null!==declarationContainer&&isLContainer(lView[3])){declarationContainer!==lView[3]&&detachMovedView(declarationContainer,lView);const lQueries=lView[19];null!==lQueries&&lQueries.detachView(tView)}}}function getRenderParent(tView,tNode,currentView){let parentTNode=tNode.parent;for(;null!=parentTNode&&(4===parentTNode.type||5===parentTNode.type);)parentTNode=(tNode=parentTNode).parent;if(null==parentTNode){const hostTNode=currentView[6];return 2===hostTNode.type?getContainerRenderParent(hostTNode,currentView):currentView[0]}if(tNode&&5===tNode.type&&4&tNode.flags)return getNativeByTNode(tNode,currentView).parentNode;if(2&parentTNode.flags){const tData=tView.data,encapsulation=tData[tData[parentTNode.index].directiveStart].encapsulation;if(encapsulation!==ViewEncapsulation$1.ShadowDom&&encapsulation!==ViewEncapsulation$1.Native)return null}return getNativeByTNode(parentTNode,currentView)}function nativeInsertBefore(renderer,parent,child,beforeNode){isProceduralRenderer(renderer)?renderer.insertBefore(parent,child,beforeNode):parent.insertBefore(child,beforeNode,!0)}function nativeAppendChild(renderer,parent,child){isProceduralRenderer(renderer)?renderer.appendChild(parent,child):parent.appendChild(child)}function nativeAppendOrInsertBefore(renderer,parent,child,beforeNode){null!==beforeNode?nativeInsertBefore(renderer,parent,child,beforeNode):nativeAppendChild(renderer,parent,child)}function nativeParentNode(renderer,node){return isProceduralRenderer(renderer)?renderer.parentNode(node):node.parentNode}function getNativeAnchorNode(parentTNode,lView){if(2===parentTNode.type){const lContainer=getLContainer(parentTNode,lView);return null===lContainer?null:getBeforeNodeForView(lContainer.indexOf(lView,10)-10,lContainer)}return 4===parentTNode.type||5===parentTNode.type?getNativeByTNode(parentTNode,lView):null}function appendChild(tView,lView,childEl,childTNode){const renderParent=getRenderParent(tView,childTNode,lView);if(null!=renderParent){const renderer=lView[11],anchorNode=getNativeAnchorNode(childTNode.parent||lView[6],lView);if(Array.isArray(childEl))for(let i=0;i<childEl.length;i++)nativeAppendOrInsertBefore(renderer,renderParent,childEl[i],anchorNode);else nativeAppendOrInsertBefore(renderer,renderParent,childEl,anchorNode)}}function getBeforeNodeForView(viewIndexInContainer,lContainer){const nextViewIndex=10+viewIndexInContainer+1;if(nextViewIndex<lContainer.length){const lView=lContainer[nextViewIndex],firstTNodeOfView=lView[1].firstChild;if(null!==firstTNodeOfView)return function getFirstNativeNode(lView,tNode){if(null!==tNode){const tNodeType=tNode.type;if(3===tNodeType)return getNativeByTNode(tNode,lView);if(0===tNodeType)return getBeforeNodeForView(-1,lView[tNode.index]);if(4===tNodeType||5===tNodeType){const elIcuContainerChild=tNode.child;if(null!==elIcuContainerChild)return getFirstNativeNode(lView,elIcuContainerChild);{const rNodeOrLContainer=lView[tNode.index];return isLContainer(rNodeOrLContainer)?getBeforeNodeForView(-1,rNodeOrLContainer):unwrapRNode(rNodeOrLContainer)}}{const componentView=lView[16],componentHost=componentView[6],parentView=getLViewParent(componentView),firstProjectedTNode=componentHost.projection[tNode.projection];return null!=firstProjectedTNode?getFirstNativeNode(parentView,firstProjectedTNode):getFirstNativeNode(lView,tNode.next)}}return null}(lView,firstTNodeOfView)}return lContainer[7]}function applyNodes(renderer,action,tNode,lView,renderParent,beforeNode,isProjection){for(;null!=tNode;){const rawSlotValue=lView[tNode.index],tNodeType=tNode.type;isProjection&&0===action&&(rawSlotValue&&attachPatchData(unwrapRNode(rawSlotValue),lView),tNode.flags|=4),64!=(64&tNode.flags)&&(4===tNodeType||5===tNodeType?(applyNodes(renderer,action,tNode.child,lView,renderParent,beforeNode,!1),applyToElementOrContainer(action,renderer,renderParent,rawSlotValue,beforeNode)):1===tNodeType?applyProjectionRecursive(renderer,action,lView,tNode,renderParent,beforeNode):applyToElementOrContainer(action,renderer,renderParent,rawSlotValue,beforeNode)),tNode=isProjection?tNode.projectionNext:tNode.next}}function applyView(tView,lView,renderer,action,renderParent,beforeNode){applyNodes(renderer,action,tView.node.child,lView,renderParent,beforeNode,!1)}function applyProjectionRecursive(renderer,action,lView,tProjectionNode,renderParent,beforeNode){const componentLView=lView[16],nodeToProjectOrRNodes=componentLView[6].projection[tProjectionNode.projection];if(Array.isArray(nodeToProjectOrRNodes))for(let i=0;i<nodeToProjectOrRNodes.length;i++)applyToElementOrContainer(action,renderer,renderParent,nodeToProjectOrRNodes[i],beforeNode);else applyNodes(renderer,action,nodeToProjectOrRNodes,componentLView[3],renderParent,beforeNode,!0)}function writeDirectStyle(renderer,element,newValue){isProceduralRenderer(renderer)?renderer.setAttribute(element,"style",newValue):element.style.cssText=newValue}function writeDirectClass(renderer,element,newValue){isProceduralRenderer(renderer)?""===newValue?renderer.removeAttribute(element,"class"):renderer.setAttribute(element,"class",newValue):element.className=newValue}class ViewRef{constructor(_lView,_cdRefInjectingView){this._lView=_lView,this._cdRefInjectingView=_cdRefInjectingView,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const lView=this._lView;return null==lView[0]?function collectNativeNodes(tView,lView,tNode,result,isProjection=!1){for(;null!==tNode;){const lNode=lView[tNode.index];if(null!==lNode&&result.push(unwrapRNode(lNode)),isLContainer(lNode))for(let i=10;i<lNode.length;i++){const lViewInAContainer=lNode[i],lViewFirstChildTNode=lViewInAContainer[1].firstChild;null!==lViewFirstChildTNode&&collectNativeNodes(lViewInAContainer[1],lViewInAContainer,lViewFirstChildTNode,result)}const tNodeType=tNode.type;if(4===tNodeType||5===tNodeType)collectNativeNodes(tView,lView,tNode.child,result);else if(1===tNodeType){const componentView=lView[16],nodesInSlot=componentView[6].projection[tNode.projection];if(Array.isArray(nodesInSlot))result.push(...nodesInSlot);else{const parentView=getLViewParent(componentView);collectNativeNodes(parentView[1],parentView,nodesInSlot,result,!0)}}tNode=isProjection?tNode.projectionNext:tNode.next}return result}(lView[1],lView,lView[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const index=this._viewContainerRef.indexOf(this);index>-1&&this._viewContainerRef.detach(index),this._viewContainerRef=null}destroyLView(this._lView[1],this._lView)}onDestroy(callback){var tView,lView,cleanupFn;tView=this._lView[1],cleanupFn=callback,getLCleanup(lView=this._lView).push(cleanupFn),tView.firstCreatePass&&getTViewCleanup(tView).push(lView[7].length-1,null)}markForCheck(){markViewDirty(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){detectChangesInternal(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(tView,view,context){setCheckNoChangesMode(!0);try{detectChangesInternal(tView,view,context)}finally{setCheckNoChangesMode(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(vcRef){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=vcRef}detachFromAppRef(){var lView;this._appRef=null,applyView(this._lView[1],lView=this._lView,lView[11],2,null,null)}attachToAppRef(appRef){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=appRef}}class RootViewRef extends ViewRef{constructor(_view){super(_view),this._view=_view}detectChanges(){detectChangesInRootView(this._view)}checkNoChanges(){!function(lView){setCheckNoChangesMode(!0);try{detectChangesInRootView(lView)}finally{setCheckNoChangesMode(!1)}}(this._view)}get context(){return null}}let R3ElementRef,R3TemplateRef,R3ViewContainerRef;function createElementRef(ElementRefToken,tNode,view){return R3ElementRef||(R3ElementRef=class extends ElementRefToken{}),new R3ElementRef(getNativeByTNode(tNode,view))}function createTemplateRef(TemplateRefToken,ElementRefToken,hostTNode,hostView){return R3TemplateRef||(R3TemplateRef=class extends TemplateRefToken{constructor(_declarationView,_declarationTContainer,elementRef){super(),this._declarationView=_declarationView,this._declarationTContainer=_declarationTContainer,this.elementRef=elementRef}createEmbeddedView(context){const embeddedTView=this._declarationTContainer.tViews,embeddedLView=createLView(this._declarationView,embeddedTView,context,16,null,embeddedTView.node);embeddedLView[17]=this._declarationView[this._declarationTContainer.index];const declarationViewLQueries=this._declarationView[19];return null!==declarationViewLQueries&&(embeddedLView[19]=declarationViewLQueries.createEmbeddedView(embeddedTView)),renderView(embeddedTView,embeddedLView,context),new ViewRef(embeddedLView)}}),0===hostTNode.type?new R3TemplateRef(hostView,hostTNode,createElementRef(ElementRefToken,hostTNode,hostView)):null}function createContainerRef(ViewContainerRefToken,ElementRefToken,hostTNode,hostView){let lContainer;R3ViewContainerRef||(R3ViewContainerRef=class extends ViewContainerRefToken{constructor(_lContainer,_hostTNode,_hostView){super(),this._lContainer=_lContainer,this._hostTNode=_hostTNode,this._hostView=_hostView}get element(){return createElementRef(ElementRefToken,this._hostTNode,this._hostView)}get injector(){return new NodeInjector(this._hostTNode,this._hostView)}get parentInjector(){const parentLocation=getParentInjectorLocation(this._hostTNode,this._hostView),parentView=getParentInjectorView(parentLocation,this._hostView),parentTNode=function(location,startView,startTNode){if(startTNode.parent&&-1!==startTNode.parent.injectorIndex){const injectorIndex=startTNode.parent.injectorIndex;let tNode=startTNode.parent;for(;null!=tNode.parent&&injectorIndex==tNode.parent.injectorIndex;)tNode=tNode.parent;return tNode}let viewOffset=getParentInjectorViewOffset(location),parentView=startView,parentTNode=startView[6];for(;viewOffset>1;)parentView=parentView[15],parentTNode=parentView[6],viewOffset--;return parentTNode}(parentLocation,this._hostView,this._hostTNode);return hasParentInjector(parentLocation)&&null!=parentTNode?new NodeInjector(parentTNode,parentView):new NodeInjector(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(index){return null!==this._lContainer[8]&&this._lContainer[8][index]||null}get length(){return this._lContainer.length-10}createEmbeddedView(templateRef,context,index){const viewRef=templateRef.createEmbeddedView(context||{});return this.insert(viewRef,index),viewRef}createComponent(componentFactory,index,injector,projectableNodes,ngModuleRef){const contextInjector=injector||this.parentInjector;if(!ngModuleRef&&null==componentFactory.ngModule&&contextInjector){const result=contextInjector.get(NgModuleRef,null);result&&(ngModuleRef=result)}const componentRef=componentFactory.create(contextInjector,projectableNodes,void 0,ngModuleRef);return this.insert(componentRef.hostView,index),componentRef}insert(viewRef,index){const lView=viewRef._lView,tView=lView[1];if(viewRef.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),isLContainer(lView[3])){const prevIdx=this.indexOf(viewRef);if(-1!==prevIdx)this.detach(prevIdx);else{const prevLContainer=lView[3],prevVCRef=new R3ViewContainerRef(prevLContainer,prevLContainer[6],prevLContainer[3]);prevVCRef.detach(prevVCRef.indexOf(viewRef))}}const adjustedIdx=this._adjustIndex(index);return function(tView,lView,lContainer,index){const indexInContainer=10+index,containerLength=lContainer.length;index>0&&(lContainer[indexInContainer-1][4]=lView),index<containerLength-10?(lView[4]=lContainer[indexInContainer],addToArray(lContainer,10+index,lView)):(lContainer.push(lView),lView[4]=null),lView[3]=lContainer;const declarationLContainer=lView[17];null!==declarationLContainer&&lContainer!==declarationLContainer&&function(declarationContainer,lView){const movedViews=declarationContainer[9];lView[16]!==lView[3][3][16]&&(declarationContainer[2]=!0),null===movedViews?declarationContainer[9]=[lView]:movedViews.push(lView)}(declarationLContainer,lView);const lQueries=lView[19];null!==lQueries&&lQueries.insertView(tView),lView[2]|=128}(tView,lView,this._lContainer,adjustedIdx),addRemoveViewFromContainer(tView,lView,!0,getBeforeNodeForView(adjustedIdx,this._lContainer)),viewRef.attachToViewContainerRef(this),addToArray(this._lContainer[8],adjustedIdx,viewRef),viewRef}move(viewRef,newIndex){if(viewRef.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(viewRef,newIndex)}indexOf(viewRef){const viewRefsArr=this._lContainer[8];return null!==viewRefsArr?viewRefsArr.indexOf(viewRef):-1}remove(index){this.allocateContainerIfNeeded();const adjustedIdx=this._adjustIndex(index,-1);!function(lContainer,removeIndex){const detachedView=detachView(lContainer,removeIndex);detachedView&&destroyLView(detachedView[1],detachedView)}(this._lContainer,adjustedIdx),removeFromArray(this._lContainer[8],adjustedIdx)}detach(index){this.allocateContainerIfNeeded();const adjustedIdx=this._adjustIndex(index,-1),view=detachView(this._lContainer,adjustedIdx);return view&&null!=removeFromArray(this._lContainer[8],adjustedIdx)?new ViewRef(view):null}_adjustIndex(index,shift=0){return null==index?this.length+shift:index}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const slotValue=hostView[hostTNode.index];if(isLContainer(slotValue))lContainer=slotValue;else{let commentNode;if(4===hostTNode.type)commentNode=unwrapRNode(slotValue);else if(commentNode=hostView[11].createComment(""),isRootView(hostView)){const renderer=hostView[11],hostNative=getNativeByTNode(hostTNode,hostView);nativeInsertBefore(renderer,nativeParentNode(renderer,hostNative),commentNode,function(renderer,node){return isProceduralRenderer(renderer)?renderer.nextSibling(node):node.nextSibling}(renderer,hostNative))}else appendChild(hostView[1],hostView,commentNode,hostTNode);hostView[hostTNode.index]=lContainer=createLContainer(slotValue,hostView,commentNode,hostTNode),addToViewTree(hostView,lContainer)}return new R3ViewContainerRef(lContainer,hostTNode,hostView)}let ChangeDetectorRef=(()=>{class ChangeDetectorRef{}return ChangeDetectorRef.__NG_ELEMENT_ID__=()=>SWITCH_CHANGE_DETECTOR_REF_FACTORY(),ChangeDetectorRef})();const SWITCH_CHANGE_DETECTOR_REF_FACTORY=function(isPipe=!1){return function(tNode,lView,isPipe){if(!isPipe&&isComponentHost(tNode)){const componentView=getComponentLViewByIndex(tNode.index,lView);return new ViewRef(componentView,componentView)}return 3===tNode.type||0===tNode.type||4===tNode.type||5===tNode.type?new ViewRef(lView[16],lView):null}(getPreviousOrParentTNode(),getLView(),isPipe)},INJECTOR_SCOPE=new InjectionToken("Set Injector scope."),NOT_YET={},CIRCULAR={},EMPTY_ARRAY$2=[];let NULL_INJECTOR=void 0;function getNullInjector(){return void 0===NULL_INJECTOR&&(NULL_INJECTOR=new NullInjector),NULL_INJECTOR}function createInjectorWithoutInjectorInstances(defType,parent=null,additionalProviders=null,name){return new R3Injector(defType,additionalProviders,parent||getNullInjector(),name)}class R3Injector{constructor(def,additionalProviders,parent,source=null){this.parent=parent,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const dedupStack=[];additionalProviders&&deepForEach(additionalProviders,provider=>this.processProvider(provider,def,additionalProviders)),deepForEach([def],injectorDef=>this.processInjectorType(injectorDef,[],dedupStack)),this.records.set(INJECTOR,makeRecord(void 0,this));const record=this.records.get(INJECTOR_SCOPE);this.scope=null!=record?record.value:null,this.source=source||("object"==typeof def?null:stringify(def))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(service=>service.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(token,notFoundValue=THROW_IF_NOT_FOUND,flags=InjectFlags.Default){this.assertNotDestroyed();const previousInjector=setCurrentInjector(this);try{if(!(flags&InjectFlags.SkipSelf)){let record=this.records.get(token);if(void 0===record){const def=("function"==typeof(value=token)||"object"==typeof value&&value instanceof InjectionToken)&&getInjectableDef(token);record=def&&this.injectableDefInScope(def)?makeRecord(injectableDefOrInjectorDefFactory(token),NOT_YET):null,this.records.set(token,record)}if(null!=record)return this.hydrate(token,record)}return(flags&InjectFlags.Self?getNullInjector():this.parent).get(token,notFoundValue=flags&InjectFlags.Optional&&notFoundValue===THROW_IF_NOT_FOUND?null:notFoundValue)}catch(e){if("NullInjectorError"===e.name){if((e.ngTempTokenPath=e.ngTempTokenPath||[]).unshift(stringify(token)),previousInjector)throw e;return function(e,token,injectorErrorName,source){const tokenPath=e.ngTempTokenPath;throw token.__source&&tokenPath.unshift(token.__source),e.message=function(text,obj,injectorErrorName,source=null){text=text&&"\n"===text.charAt(0)&&""==text.charAt(1)?text.substr(2):text;let context=stringify(obj);if(Array.isArray(obj))context=obj.map(stringify).join(" -> ");else if("object"==typeof obj){let parts=[];for(let key in obj)if(obj.hasOwnProperty(key)){let value=obj[key];parts.push(key+":"+("string"==typeof value?JSON.stringify(value):stringify(value)))}context=`{${parts.join(", ")}}`}return`${injectorErrorName}${source?"("+source+")":""}[${context}]: ${text.replace(NEW_LINE,"\n  ")}`}("\n"+e.message,tokenPath,injectorErrorName,source),e.ngTokenPath=tokenPath,e.ngTempTokenPath=null,e}(e,token,"R3InjectorError",this.source)}throw e}finally{setCurrentInjector(previousInjector)}var value}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(defType=>this.get(defType))}toString(){const tokens=[];return this.records.forEach((v,token)=>tokens.push(stringify(token))),`R3Injector[${tokens.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(defOrWrappedDef,parents,dedupStack){if(!(defOrWrappedDef=resolveForwardRef(defOrWrappedDef)))return!1;let def=getInjectorDef(defOrWrappedDef);const ngModule=null==def&&defOrWrappedDef.ngModule||void 0,defType=void 0===ngModule?defOrWrappedDef:ngModule,isDuplicate=-1!==dedupStack.indexOf(defType);if(void 0!==ngModule&&(def=getInjectorDef(ngModule)),null==def)return!1;if(null!=def.imports&&!isDuplicate){let importTypesWithProviders;dedupStack.push(defType);try{deepForEach(def.imports,imported=>{this.processInjectorType(imported,parents,dedupStack)&&(void 0===importTypesWithProviders&&(importTypesWithProviders=[]),importTypesWithProviders.push(imported))})}finally{}if(void 0!==importTypesWithProviders)for(let i=0;i<importTypesWithProviders.length;i++){const{ngModule:ngModule,providers:providers}=importTypesWithProviders[i];deepForEach(providers,provider=>this.processProvider(provider,ngModule,providers||EMPTY_ARRAY$2))}}this.injectorDefTypes.add(defType),this.records.set(defType,makeRecord(def.factory,NOT_YET));const defProviders=def.providers;if(null!=defProviders&&!isDuplicate){const injectorType=defOrWrappedDef;deepForEach(defProviders,provider=>this.processProvider(provider,injectorType,defProviders))}return void 0!==ngModule&&void 0!==defOrWrappedDef.providers}processProvider(provider,ngModuleType,providers){let token=isTypeProvider(provider=resolveForwardRef(provider))?provider:resolveForwardRef(provider&&provider.provide);const record=function(provider,ngModuleType,providers){return isValueProvider(provider)?makeRecord(void 0,provider.useValue):makeRecord(providerToFactory(provider,ngModuleType,providers),NOT_YET)}(provider,ngModuleType,providers);if(isTypeProvider(provider)||!0!==provider.multi){const existing=this.records.get(token);existing&&void 0!==existing.multi&&throwMixedMultiProviderError()}else{let multiRecord=this.records.get(token);multiRecord?void 0===multiRecord.multi&&throwMixedMultiProviderError():(multiRecord=makeRecord(void 0,NOT_YET,!0),multiRecord.factory=()=>injectArgs(multiRecord.multi),this.records.set(token,multiRecord)),token=provider,multiRecord.multi.push(provider)}this.records.set(token,record)}hydrate(token,record){var value;return record.value===CIRCULAR?function(token){throw new Error("Cannot instantiate cyclic dependency! "+token)}(stringify(token)):record.value===NOT_YET&&(record.value=CIRCULAR,record.value=record.factory()),"object"==typeof record.value&&record.value&&null!==(value=record.value)&&"object"==typeof value&&"function"==typeof value.ngOnDestroy&&this.onDestroy.add(record.value),record.value}injectableDefInScope(def){return!!def.providedIn&&("string"==typeof def.providedIn?"any"===def.providedIn||def.providedIn===this.scope:this.injectorDefTypes.has(def.providedIn))}}function injectableDefOrInjectorDefFactory(token){const injectableDef=getInjectableDef(token),factory=null!==injectableDef?injectableDef.factory:getFactoryDef(token);if(null!==factory)return factory;const injectorDef=getInjectorDef(token);if(null!==injectorDef)return injectorDef.factory;if(token instanceof InjectionToken)throw new Error(`Token ${stringify(token)} is missing a prov definition.`);if(token instanceof Function)return function(token){const paramLength=token.length;if(paramLength>0){const args=newArray(paramLength,"?");throw new Error(`Can't resolve all parameters for ${stringify(token)}: (${args.join(", ")}).`)}const inheritedInjectableDef=function(type){const def=type&&(type[NG_PROV_DEF]||type[NG_INJECTABLE_DEF]||type[NG_PROV_DEF_FALLBACK]&&type[NG_PROV_DEF_FALLBACK]());if(def){const typeName=function(type){if(type.hasOwnProperty("name"))return type.name;const match=(""+type).match(/^function\s*([^\s(]+)/);return null===match?"":match[1]}(type);return console.warn(`DEPRECATED: DI is instantiating a token "${typeName}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "${typeName}" class.`),def}return null}(token);return null!==inheritedInjectableDef?()=>inheritedInjectableDef.factory(token):()=>new token}(token);throw new Error("unreachable")}function providerToFactory(provider,ngModuleType,providers){let factory=void 0;if(isTypeProvider(provider)){const unwrappedProvider=resolveForwardRef(provider);return getFactoryDef(unwrappedProvider)||injectableDefOrInjectorDefFactory(unwrappedProvider)}if(isValueProvider(provider))factory=()=>resolveForwardRef(provider.useValue);else if((value=provider)&&value.useFactory)factory=()=>provider.useFactory(...injectArgs(provider.deps||[]));else if(function(value){return!(!value||!value.useExisting)}(provider))factory=()=>inject(resolveForwardRef(provider.useExisting));else{const classRef=resolveForwardRef(provider&&(provider.useClass||provider.provide));if(classRef||function(ngModuleType,providers,provider){let ngModuleDetail="";throw ngModuleType&&providers&&(ngModuleDetail=` - only instances of Provider and Type are allowed, got: [${providers.map(v=>v==provider?"?"+provider+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${stringify(ngModuleType)}'`+ngModuleDetail)}(ngModuleType,providers,provider),!function(value){return!!value.deps}(provider))return getFactoryDef(classRef)||injectableDefOrInjectorDefFactory(classRef);factory=()=>new classRef(...injectArgs(provider.deps))}var value;return factory}function makeRecord(factory,value,multi=!1){return{factory:factory,value:value,multi:multi?[]:void 0}}function isValueProvider(value){return null!==value&&"object"==typeof value&&USE_VALUE in value}function isTypeProvider(value){return"function"==typeof value}const INJECTOR_IMPL=function(providers,parent,name){return function(defType,parent=null,additionalProviders=null,name){const injector=createInjectorWithoutInjectorInstances(defType,parent,additionalProviders,name);return injector._resolveInjectorDefTypes(),injector}({name:name},parent,providers,name)};let Injector=(()=>{class Injector{static create(options,parent){return Array.isArray(options)?INJECTOR_IMPL(options,parent,""):INJECTOR_IMPL(options.providers,options.parent,options.name||"")}}return Injector.THROW_IF_NOT_FOUND=THROW_IF_NOT_FOUND,Injector.NULL=new NullInjector,Injector.prov=defineInjectable({token:Injector,providedIn:"any",factory:()=>inject(INJECTOR)}),Injector.__NG_ELEMENT_ID__=-1,Injector})();const ANALYZE_FOR_ENTRY_COMPONENTS=new InjectionToken("AnalyzeForEntryComponents");let componentResourceResolutionQueue=new Map;const componentDefPendingResolution=new Set;function unwrapResponse(response){return"string"==typeof response?response:response.text()}function computeStaticStyling(tNode,attrs,writeToHost){let styles=writeToHost?tNode.styles:null,classes=writeToHost?tNode.classes:null,mode=0;if(null!==attrs)for(let i=0;i<attrs.length;i++){const value=attrs[i];"number"==typeof value?mode=value:1==mode?classes=concatStringsWithSpace(classes,value):2==mode&&(styles=concatStringsWithSpace(styles,value+": "+attrs[++i]+";"))}writeToHost?tNode.styles=styles:tNode.stylesWithoutHost=styles,writeToHost?tNode.classes=classes:tNode.classesWithoutHost=classes}let _symbolIterator=null;function core_getSymbolIterator(){if(!_symbolIterator){const Symbol=_global.Symbol;if(Symbol&&Symbol.iterator)_symbolIterator=Symbol.iterator;else{const keys=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<keys.length;++i){const key=keys[i];"entries"!==key&&"size"!==key&&Map.prototype[key]===Map.prototype.entries&&(_symbolIterator=key)}}}return _symbolIterator}function looseIdentical(a,b){return a===b||"number"==typeof a&&"number"==typeof b&&isNaN(a)&&isNaN(b)}class WrappedValue{constructor(value){this.wrapped=value}static wrap(value){return new WrappedValue(value)}static unwrap(value){return WrappedValue.isWrapped(value)?value.wrapped:value}static isWrapped(value){return value instanceof WrappedValue}}function isListLikeIterable$1(obj){return!!isJsObject$1(obj)&&(Array.isArray(obj)||!(obj instanceof Map)&&core_getSymbolIterator()in obj)}function isJsObject$1(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function updateBinding(lView,bindingIndex,value){return lView[bindingIndex]=value}function getBinding(lView,bindingIndex){return lView[bindingIndex]}function bindingUpdated(lView,bindingIndex,value){return!Object.is(lView[bindingIndex],value)&&(lView[bindingIndex]=value,!0)}function bindingUpdated2(lView,bindingIndex,exp1,exp2){const different=bindingUpdated(lView,bindingIndex,exp1);return bindingUpdated(lView,bindingIndex+1,exp2)||different}function bindingUpdated3(lView,bindingIndex,exp1,exp2,exp3){const different=bindingUpdated2(lView,bindingIndex,exp1,exp2);return bindingUpdated(lView,bindingIndex+2,exp3)||different}function bindingUpdated4(lView,bindingIndex,exp1,exp2,exp3,exp4){const different=bindingUpdated2(lView,bindingIndex,exp1,exp2);return bindingUpdated2(lView,bindingIndex+2,exp3,exp4)||different}function attribute(name,value,sanitizer,namespace){const lView=getLView();return bindingUpdated(lView,nextBindingIndex(),value)&&(getTView(),elementAttributeInternal(getSelectedTNode(),lView,name,value,sanitizer,namespace)),attribute}function interpolation1(lView,prefix,v0,suffix){return bindingUpdated(lView,nextBindingIndex(),v0)?prefix+renderStringify(v0)+suffix:NO_CHANGE}function template(index,templateFn,decls,vars,tagName,attrsIndex,localRefsIndex,localRefExtractor){const lView=getLView(),tView=getTView(),adjustedIndex=index+20,tNode=tView.firstCreatePass?function(index,tView,lView,templateFn,decls,vars,tagName,attrsIndex,localRefsIndex){const tViewConsts=tView.consts,tNode=getOrCreateTNode(tView,lView[6],index,0,tagName||null,getConstant(tViewConsts,attrsIndex));resolveDirectives(tView,lView,tNode,getConstant(tViewConsts,localRefsIndex)),registerPostOrderHooks(tView,tNode);const embeddedTView=tNode.tViews=createTView(2,-1,templateFn,decls,vars,tView.directiveRegistry,tView.pipeRegistry,null,tView.schemas,tViewConsts),embeddedTViewNode=createTNode(0,null,2,-1,null,null);return embeddedTViewNode.injectorIndex=tNode.injectorIndex,embeddedTView.node=embeddedTViewNode,null!==tView.queries&&(tView.queries.template(tView,tNode),embeddedTView.queries=tView.queries.embeddedTView(tNode)),tNode}(index,tView,lView,templateFn,decls,vars,tagName,attrsIndex,localRefsIndex):tView.data[adjustedIndex];setPreviousOrParentTNode(tNode,!1);const comment=lView[11].createComment("");appendChild(tView,lView,comment,tNode),attachPatchData(comment,lView),addToViewTree(lView,lView[adjustedIndex]=createLContainer(comment,lView,comment,tNode)),isDirectiveHost(tNode)&&createDirectivesInstances(tView,lView,tNode),null!=localRefsIndex&&saveResolvedLocalsInData(lView,tNode,localRefExtractor)}function reference(index){return load(instructionState.lFrame.contextLView,index)}function directiveInject(token,flags=InjectFlags.Default){const lView=getLView();return null==lView?inject(token,flags):getOrCreateInjectable(getPreviousOrParentTNode(),lView,resolveForwardRef(token),flags)}function injectAttribute(attrNameToInject){return function(tNode,attrNameToInject){if("class"===attrNameToInject)return tNode.classes;if("style"===attrNameToInject)return tNode.styles;const attrs=tNode.attrs;if(attrs){const attrsLength=attrs.length;let i=0;for(;i<attrsLength;){const value=attrs[i];if(isNameOnlyAttributeMarker(value))break;if(0===value)i+=2;else if("number"==typeof value)for(i++;i<attrsLength&&"string"==typeof attrs[i];)i++;else{if(value===attrNameToInject)return attrs[i+1];i+=2}}}return null}(getPreviousOrParentTNode(),attrNameToInject)}function invalidFactory(){throw new Error("invalid")}function property(propName,value,sanitizer){const lView=getLView();return bindingUpdated(lView,nextBindingIndex(),value)&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,value,lView[11],sanitizer,!1),property}function setDirectiveInputsWhichShadowsStyling(tView,tNode,lView,value,isClassBased){const property=isClassBased?"class":"style";setInputsForProperty(tView,lView,tNode.inputs[property],property,value)}function elementStart(index,name,attrsIndex,localRefsIndex){const lView=getLView(),tView=getTView(),adjustedIndex=20+index,renderer=lView[11],native=lView[adjustedIndex]=elementCreate(name,renderer,instructionState.lFrame.currentNamespace),tNode=tView.firstCreatePass?function(index,tView,lView,native,name,attrsIndex,localRefsIndex){const tViewConsts=tView.consts,attrs=getConstant(tViewConsts,attrsIndex),tNode=getOrCreateTNode(tView,lView[6],index,3,name,attrs);return resolveDirectives(tView,lView,tNode,getConstant(tViewConsts,localRefsIndex)),null!==tNode.attrs&&computeStaticStyling(tNode,tNode.attrs,!1),null!==tNode.mergedAttrs&&computeStaticStyling(tNode,tNode.mergedAttrs,!0),null!==tView.queries&&tView.queries.elementStart(tView,tNode),tNode}(index,tView,lView,0,name,attrsIndex,localRefsIndex):tView.data[adjustedIndex];setPreviousOrParentTNode(tNode,!0);const mergedAttrs=tNode.mergedAttrs;null!==mergedAttrs&&setUpAttributes(renderer,native,mergedAttrs);const classes=tNode.classes;null!==classes&&writeDirectClass(renderer,native,classes);const styles=tNode.styles;null!==styles&&writeDirectStyle(renderer,native,styles),appendChild(tView,lView,native,tNode),0===instructionState.lFrame.elementDepthCount&&attachPatchData(native,lView),instructionState.lFrame.elementDepthCount++,isDirectiveHost(tNode)&&(createDirectivesInstances(tView,lView,tNode),executeContentQueries(tView,tNode,lView)),null!==localRefsIndex&&saveResolvedLocalsInData(lView,tNode)}function elementEnd(){let previousOrParentTNode=getPreviousOrParentTNode();getIsParent()?setIsNotParent():(previousOrParentTNode=previousOrParentTNode.parent,setPreviousOrParentTNode(previousOrParentTNode,!1));const tNode=previousOrParentTNode;instructionState.lFrame.elementDepthCount--;const tView=getTView();tView.firstCreatePass&&(registerPostOrderHooks(tView,previousOrParentTNode),isContentQueryHost(previousOrParentTNode)&&tView.queries.elementEnd(previousOrParentTNode)),null!=tNode.classesWithoutHost&&function(tNode){return 0!=(16&tNode.flags)}(tNode)&&setDirectiveInputsWhichShadowsStyling(tView,tNode,getLView(),tNode.classesWithoutHost,!0),null!=tNode.stylesWithoutHost&&function(tNode){return 0!=(32&tNode.flags)}(tNode)&&setDirectiveInputsWhichShadowsStyling(tView,tNode,getLView(),tNode.stylesWithoutHost,!1)}function element(index,name,attrsIndex,localRefsIndex){elementStart(index,name,attrsIndex,localRefsIndex),elementEnd()}function elementContainerStart(index,attrsIndex,localRefsIndex){const lView=getLView(),tView=getTView(),adjustedIndex=index+20,tNode=tView.firstCreatePass?function(index,tView,lView,attrsIndex,localRefsIndex){const tViewConsts=tView.consts,attrs=getConstant(tViewConsts,attrsIndex),tNode=getOrCreateTNode(tView,lView[6],index,4,"ng-container",attrs);return null!==attrs&&computeStaticStyling(tNode,attrs,!0),resolveDirectives(tView,lView,tNode,getConstant(tViewConsts,localRefsIndex)),null!==tView.queries&&tView.queries.elementStart(tView,tNode),tNode}(index,tView,lView,attrsIndex,localRefsIndex):tView.data[adjustedIndex];setPreviousOrParentTNode(tNode,!0);const native=lView[adjustedIndex]=lView[11].createComment("");appendChild(tView,lView,native,tNode),attachPatchData(native,lView),isDirectiveHost(tNode)&&(createDirectivesInstances(tView,lView,tNode),executeContentQueries(tView,tNode,lView)),null!=localRefsIndex&&saveResolvedLocalsInData(lView,tNode)}function elementContainerEnd(){let previousOrParentTNode=getPreviousOrParentTNode();const tView=getTView();getIsParent()?setIsNotParent():(previousOrParentTNode=previousOrParentTNode.parent,setPreviousOrParentTNode(previousOrParentTNode,!1)),tView.firstCreatePass&&(registerPostOrderHooks(tView,previousOrParentTNode),isContentQueryHost(previousOrParentTNode)&&tView.queries.elementEnd(previousOrParentTNode))}function elementContainer(index,attrsIndex,localRefsIndex){elementContainerStart(index,attrsIndex,localRefsIndex),elementContainerEnd()}function getCurrentView(){return getLView()}function core_isPromise(obj){return!!obj&&"function"==typeof obj.then}function isObservable(obj){return!!obj&&"function"==typeof obj.subscribe}function listener(eventName,listenerFn,useCapture=!1,eventTargetResolver){const lView=getLView(),tView=getTView(),tNode=getPreviousOrParentTNode();return function(tView,lView,renderer,tNode,eventName,listenerFn,useCapture=!1,eventTargetResolver){const isTNodeDirectiveHost=isDirectiveHost(tNode),tCleanup=tView.firstCreatePass&&(tView.cleanup||(tView.cleanup=[])),lCleanup=getLCleanup(lView);let processOutputs=!0;if(3===tNode.type){const native=getNativeByTNode(tNode,lView),resolved=eventTargetResolver?eventTargetResolver(native):EMPTY_OBJ,target=resolved.target||native,lCleanupIndex=lCleanup.length,idxOrTargetGetter=eventTargetResolver?_lView=>eventTargetResolver(unwrapRNode(_lView[tNode.index])).target:tNode.index;if(isProceduralRenderer(renderer)){let existingListener=null;if(!eventTargetResolver&&isTNodeDirectiveHost&&(existingListener=function(tView,lView,eventName,tNodeIdx){const tCleanup=tView.cleanup;if(null!=tCleanup)for(let i=0;i<tCleanup.length-1;i+=2){const cleanupEventName=tCleanup[i];if(cleanupEventName===eventName&&tCleanup[i+1]===tNodeIdx){const lCleanup=lView[7],listenerIdxInLCleanup=tCleanup[i+2];return lCleanup.length>listenerIdxInLCleanup?lCleanup[listenerIdxInLCleanup]:null}"string"==typeof cleanupEventName&&(i+=2)}return null}(tView,lView,eventName,tNode.index)),null!==existingListener)(existingListener.__ngLastListenerFn__||existingListener).__ngNextListenerFn__=listenerFn,existingListener.__ngLastListenerFn__=listenerFn,processOutputs=!1;else{listenerFn=wrapListener(tNode,lView,listenerFn,!1);const cleanupFn=renderer.listen(resolved.name||target,eventName,listenerFn);lCleanup.push(listenerFn,cleanupFn),tCleanup&&tCleanup.push(eventName,idxOrTargetGetter,lCleanupIndex,lCleanupIndex+1)}}else listenerFn=wrapListener(tNode,lView,listenerFn,!0),target.addEventListener(eventName,listenerFn,useCapture),lCleanup.push(listenerFn),tCleanup&&tCleanup.push(eventName,idxOrTargetGetter,lCleanupIndex,useCapture)}const outputs=tNode.outputs;let props;if(processOutputs&&null!==outputs&&(props=outputs[eventName])){const propsLength=props.length;if(propsLength)for(let i=0;i<propsLength;i+=2){const subscription=lView[props[i]][props[i+1]].subscribe(listenerFn),idx=lCleanup.length;lCleanup.push(listenerFn,subscription),tCleanup&&tCleanup.push(eventName,tNode.index,idx,-(idx+1))}}}(tView,lView,lView[11],tNode,eventName,listenerFn,useCapture,eventTargetResolver),listener}function executeListenerWithErrorHandling(lView,listenerFn,e){try{return!1!==listenerFn(e)}catch(error){return handleError(lView,error),!1}}function wrapListener(tNode,lView,listenerFn,wrapWithPreventDefault){return function wrapListenerIn_markDirtyAndPreventDefault(e){if(e===Function)return listenerFn;const startView=2&tNode.flags?getComponentLViewByIndex(tNode.index,lView):lView;0==(32&lView[2])&&markViewDirty(startView);let result=executeListenerWithErrorHandling(lView,listenerFn,e),nextListenerFn=wrapListenerIn_markDirtyAndPreventDefault.__ngNextListenerFn__;for(;nextListenerFn;)result=executeListenerWithErrorHandling(lView,nextListenerFn,e)&&result,nextListenerFn=nextListenerFn.__ngNextListenerFn__;return wrapWithPreventDefault&&!1===result&&(e.preventDefault(),e.returnValue=!1),result}}function nextContext(level=1){return function(level){return(instructionState.lFrame.contextLView=function(nestingLevel,currentView){for(;nestingLevel>0;)currentView=currentView[15],nestingLevel--;return currentView}(level,instructionState.lFrame.contextLView))[8]}(level)}function matchingProjectionSlotIndex(tNode,projectionSlots){let wildcardNgContentIndex=null;const ngProjectAsAttrVal=function(tNode){const nodeAttrs=tNode.attrs;if(null!=nodeAttrs){const ngProjectAsAttrIdx=nodeAttrs.indexOf(5);if(0==(1&ngProjectAsAttrIdx))return nodeAttrs[ngProjectAsAttrIdx+1]}return null}(tNode);for(let i=0;i<projectionSlots.length;i++){const slotValue=projectionSlots[i];if("*"!==slotValue){if(null===ngProjectAsAttrVal?isNodeMatchingSelectorList(tNode,slotValue,!0):isSelectorInSelectorList(ngProjectAsAttrVal,slotValue))return i}else wildcardNgContentIndex=i}return wildcardNgContentIndex}function projectionDef(projectionSlots){const componentNode=getLView()[16][6];if(!componentNode.projection){const projectionHeads=componentNode.projection=newArray(projectionSlots?projectionSlots.length:1,null),tails=projectionHeads.slice();let componentChild=componentNode.child;for(;null!==componentChild;){const slotIndex=projectionSlots?matchingProjectionSlotIndex(componentChild,projectionSlots):0;null!==slotIndex&&(tails[slotIndex]?tails[slotIndex].projectionNext=componentChild:projectionHeads[slotIndex]=componentChild,tails[slotIndex]=componentChild),componentChild=componentChild.next}}}function projection(nodeIndex,selectorIndex=0,attrs){const lView=getLView(),tView=getTView(),tProjectionNode=getOrCreateTNode(tView,lView[6],nodeIndex,1,null,attrs||null);null===tProjectionNode.projection&&(tProjectionNode.projection=selectorIndex),setIsNotParent(),function(tView,lView,tProjectionNode){applyProjectionRecursive(lView[11],0,lView,tProjectionNode,getRenderParent(tView,tProjectionNode,lView),getNativeAnchorNode(tProjectionNode.parent||lView[6],lView))}(tView,lView,tProjectionNode)}const EMPTY_ARRAY$3=[];function markDuplicates(tData,tStylingKey,index,isPrevDir,isClassBinding){const tStylingAtIndex=tData[index+1],isMap=null===tStylingKey;let cursor=isPrevDir?getTStylingRangePrev(tStylingAtIndex):getTStylingRangeNext(tStylingAtIndex),foundDuplicate=!1;for(;0!==cursor&&(!1===foundDuplicate||isMap);){const tStyleRangeAtCursor=tData[cursor+1];isStylingMatch(tData[cursor],tStylingKey)&&(foundDuplicate=!0,tData[cursor+1]=isPrevDir?setTStylingRangeNextDuplicate(tStyleRangeAtCursor):setTStylingRangePrevDuplicate(tStyleRangeAtCursor)),cursor=isPrevDir?getTStylingRangePrev(tStyleRangeAtCursor):getTStylingRangeNext(tStyleRangeAtCursor)}foundDuplicate&&(tData[index+1]=isPrevDir?setTStylingRangePrevDuplicate(tStylingAtIndex):setTStylingRangeNextDuplicate(tStylingAtIndex))}function isStylingMatch(tStylingKeyCursor,tStylingKey){return null===tStylingKeyCursor||null==tStylingKey||(Array.isArray(tStylingKeyCursor)?tStylingKeyCursor[1]:tStylingKeyCursor)===tStylingKey||!(!Array.isArray(tStylingKeyCursor)||"string"!=typeof tStylingKey)&&keyValueArrayIndexOf(tStylingKeyCursor,tStylingKey)>=0}const parserState={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function getLastParsedKey(text){return text.substring(parserState.key,parserState.keyEnd)}function parseClassNameNext(text,index){const end=parserState.textEnd;return end===index?-1:(index=parserState.keyEnd=function(text,startIndex,endIndex){for(;startIndex<endIndex&&text.charCodeAt(startIndex)>32;)startIndex++;return startIndex}(text,parserState.key=index,end),consumeWhitespace(text,index,end))}function consumeWhitespace(text,startIndex,endIndex){for(;startIndex<endIndex&&text.charCodeAt(startIndex)<=32;)startIndex++;return startIndex}function styleProp(prop,value,suffix){return checkStylingProperty(prop,value,suffix,!1),styleProp}function classProp(className,value){return checkStylingProperty(className,value,null,!0),classProp}function classMap(classes){checkStylingMap(keyValueArraySet,classStringParser,classes,!0)}function classStringParser(keyValueArray,text){for(let i=function(text){return function(text){parserState.key=0,parserState.keyEnd=0,parserState.value=0,parserState.valueEnd=0,parserState.textEnd=text.length}(text),parseClassNameNext(text,consumeWhitespace(text,0,parserState.textEnd))}(text);i>=0;i=parseClassNameNext(text,i))keyValueArraySet(keyValueArray,getLastParsedKey(text),!0)}function checkStylingProperty(prop,value,suffixOrSanitizer,isClassBased){const lView=getLView(),tView=getTView(),bindingIndex=incrementBindingIndex(2);if(tView.firstUpdatePass&&stylingFirstUpdatePass(tView,prop,bindingIndex,isClassBased),value!==NO_CHANGE&&bindingUpdated(lView,bindingIndex,value)){let styleSanitizer;null==suffixOrSanitizer&&(styleSanitizer=function(){const lFrame=instructionState.lFrame;return null===lFrame?null:lFrame.currentSanitizer}())&&(suffixOrSanitizer=styleSanitizer),updateStyling(tView,tView.data[getSelectedIndex()+20],lView,lView[11],prop,lView[bindingIndex+1]=function(value,suffixOrSanitizer){return null==value||("function"==typeof suffixOrSanitizer?value=suffixOrSanitizer(value):"string"==typeof suffixOrSanitizer?value+=suffixOrSanitizer:"object"==typeof value&&(value=stringify(unwrapSafeValue(value)))),value}(value,suffixOrSanitizer),isClassBased,bindingIndex)}}function checkStylingMap(keyValueArraySet,stringParser,value,isClassBased){const tView=getTView(),bindingIndex=incrementBindingIndex(2);tView.firstUpdatePass&&stylingFirstUpdatePass(tView,null,bindingIndex,isClassBased);const lView=getLView();if(value!==NO_CHANGE&&bindingUpdated(lView,bindingIndex,value)){const tNode=tView.data[getSelectedIndex()+20];if(hasStylingInputShadow(tNode,isClassBased)&&!isInHostBindings(tView,bindingIndex)){let staticPrefix=isClassBased?tNode.classesWithoutHost:tNode.stylesWithoutHost;null!==staticPrefix&&(value=concatStringsWithSpace(staticPrefix,value||"")),setDirectiveInputsWhichShadowsStyling(tView,tNode,lView,value,isClassBased)}else!function(tView,tNode,lView,renderer,oldKeyValueArray,newKeyValueArray,isClassBased,bindingIndex){oldKeyValueArray===NO_CHANGE&&(oldKeyValueArray=EMPTY_ARRAY$3);let oldIndex=0,newIndex=0,oldKey=0<oldKeyValueArray.length?oldKeyValueArray[0]:null,newKey=0<newKeyValueArray.length?newKeyValueArray[0]:null;for(;null!==oldKey||null!==newKey;){const oldValue=oldIndex<oldKeyValueArray.length?oldKeyValueArray[oldIndex+1]:void 0,newValue=newIndex<newKeyValueArray.length?newKeyValueArray[newIndex+1]:void 0;let setKey=null,setValue=void 0;oldKey===newKey?(oldIndex+=2,newIndex+=2,oldValue!==newValue&&(setKey=newKey,setValue=newValue)):null===newKey||null!==oldKey&&oldKey<newKey?(oldIndex+=2,setKey=oldKey):(newIndex+=2,setKey=newKey,setValue=newValue),null!==setKey&&updateStyling(tView,tNode,lView,renderer,setKey,setValue,isClassBased,bindingIndex),oldKey=oldIndex<oldKeyValueArray.length?oldKeyValueArray[oldIndex]:null,newKey=newIndex<newKeyValueArray.length?newKeyValueArray[newIndex]:null}}(tView,tNode,lView,lView[11],lView[bindingIndex+1],lView[bindingIndex+1]=function(keyValueArraySet,stringParser,value){if(null==value||""===value)return EMPTY_ARRAY$3;const styleKeyValueArray=[],unwrappedValue=unwrapSafeValue(value);if(Array.isArray(unwrappedValue))for(let i=0;i<unwrappedValue.length;i++)keyValueArraySet(styleKeyValueArray,unwrappedValue[i],!0);else if("object"==typeof unwrappedValue)for(const key in unwrappedValue)unwrappedValue.hasOwnProperty(key)&&keyValueArraySet(styleKeyValueArray,key,unwrappedValue[key]);else"string"==typeof unwrappedValue&&stringParser(styleKeyValueArray,unwrappedValue);return styleKeyValueArray}(keyValueArraySet,stringParser,value),isClassBased,bindingIndex)}}function isInHostBindings(tView,bindingIndex){return bindingIndex>=tView.expandoStartIndex}function stylingFirstUpdatePass(tView,tStylingKey,bindingIndex,isClassBased){const tData=tView.data;if(null===tData[bindingIndex+1]){const tNode=tData[getSelectedIndex()+20],isHostBindings=isInHostBindings(tView,bindingIndex);hasStylingInputShadow(tNode,isClassBased)&&null===tStylingKey&&!isHostBindings&&(tStylingKey=!1),tStylingKey=function(tData,tNode,stylingKey,isClassBased){const hostDirectiveDef=function(tData){const currentDirectiveIndex=instructionState.lFrame.currentDirectiveIndex;return-1===currentDirectiveIndex?null:tData[currentDirectiveIndex]}(tData);let residual=isClassBased?tNode.residualClasses:tNode.residualStyles;if(null===hostDirectiveDef)0===(isClassBased?tNode.classBindings:tNode.styleBindings)&&(stylingKey=collectStylingFromTAttrs(stylingKey=collectStylingFromDirectives(null,tData,tNode,stylingKey,isClassBased),tNode.attrs,isClassBased),residual=null);else{const directiveStylingLast=tNode.directiveStylingLast;if(-1===directiveStylingLast||tData[directiveStylingLast]!==hostDirectiveDef)if(stylingKey=collectStylingFromDirectives(hostDirectiveDef,tData,tNode,stylingKey,isClassBased),null===residual){let templateStylingKey=function(tData,tNode,isClassBased){const bindings=isClassBased?tNode.classBindings:tNode.styleBindings;if(0!==getTStylingRangeNext(bindings))return tData[getTStylingRangePrev(bindings)]}(tData,tNode,isClassBased);void 0!==templateStylingKey&&Array.isArray(templateStylingKey)&&(templateStylingKey=collectStylingFromDirectives(null,tData,tNode,templateStylingKey[1],isClassBased),templateStylingKey=collectStylingFromTAttrs(templateStylingKey,tNode.attrs,isClassBased),function(tData,tNode,isClassBased,tStylingKey){tData[getTStylingRangePrev(isClassBased?tNode.classBindings:tNode.styleBindings)]=tStylingKey}(tData,tNode,isClassBased,templateStylingKey))}else residual=function(tData,tNode,isClassBased){let residual=void 0;const directiveEnd=tNode.directiveEnd;for(let i=1+tNode.directiveStylingLast;i<directiveEnd;i++)residual=collectStylingFromTAttrs(residual,tData[i].hostAttrs,isClassBased);return collectStylingFromTAttrs(residual,tNode.attrs,isClassBased)}(tData,tNode,isClassBased)}return void 0!==residual&&(isClassBased?tNode.residualClasses=residual:tNode.residualStyles=residual),stylingKey}(tData,tNode,tStylingKey,isClassBased),function(tData,tNode,tStylingKeyWithStatic,index,isHostBinding,isClassBinding){let tBindings=isClassBinding?tNode.classBindings:tNode.styleBindings,tmplHead=getTStylingRangePrev(tBindings),tmplTail=getTStylingRangeNext(tBindings);tData[index]=tStylingKeyWithStatic;let tStylingKey,isKeyDuplicateOfStatic=!1;if(Array.isArray(tStylingKeyWithStatic)){const staticKeyValueArray=tStylingKeyWithStatic;tStylingKey=staticKeyValueArray[1],(null===tStylingKey||keyValueArrayIndexOf(staticKeyValueArray,tStylingKey)>0)&&(isKeyDuplicateOfStatic=!0)}else tStylingKey=tStylingKeyWithStatic;if(isHostBinding)if(0!==tmplTail){const previousNode=getTStylingRangePrev(tData[tmplHead+1]);tData[index+1]=toTStylingRange(previousNode,tmplHead),0!==previousNode&&(tData[previousNode+1]=setTStylingRangeNext(tData[previousNode+1],index)),tData[tmplHead+1]=131071&tData[tmplHead+1]|index<<17}else tData[index+1]=toTStylingRange(tmplHead,0),0!==tmplHead&&(tData[tmplHead+1]=setTStylingRangeNext(tData[tmplHead+1],index)),tmplHead=index;else tData[index+1]=toTStylingRange(tmplTail,0),0===tmplHead?tmplHead=index:tData[tmplTail+1]=setTStylingRangeNext(tData[tmplTail+1],index),tmplTail=index;isKeyDuplicateOfStatic&&(tData[index+1]=setTStylingRangePrevDuplicate(tData[index+1])),markDuplicates(tData,tStylingKey,index,!0),markDuplicates(tData,tStylingKey,index,!1),function(tNode,tStylingKey,tData,index,isClassBinding){const residual=isClassBinding?tNode.residualClasses:tNode.residualStyles;null!=residual&&"string"==typeof tStylingKey&&keyValueArrayIndexOf(residual,tStylingKey)>=0&&(tData[index+1]=setTStylingRangeNextDuplicate(tData[index+1]))}(tNode,tStylingKey,tData,index,isClassBinding),tBindings=toTStylingRange(tmplHead,tmplTail),isClassBinding?tNode.classBindings=tBindings:tNode.styleBindings=tBindings}(tData,tNode,tStylingKey,bindingIndex,isHostBindings,isClassBased)}}function collectStylingFromDirectives(hostDirectiveDef,tData,tNode,stylingKey,isClassBased){let currentDirective=null;const directiveEnd=tNode.directiveEnd;let directiveStylingLast=tNode.directiveStylingLast;for(-1===directiveStylingLast?directiveStylingLast=tNode.directiveStart:directiveStylingLast++;directiveStylingLast<directiveEnd&&(currentDirective=tData[directiveStylingLast],stylingKey=collectStylingFromTAttrs(stylingKey,currentDirective.hostAttrs,isClassBased),currentDirective!==hostDirectiveDef);)directiveStylingLast++;return null!==hostDirectiveDef&&(tNode.directiveStylingLast=directiveStylingLast),stylingKey}function collectStylingFromTAttrs(stylingKey,attrs,isClassBased){const desiredMarker=isClassBased?1:2;let currentMarker=-1;if(null!==attrs)for(let i=0;i<attrs.length;i++){const item=attrs[i];"number"==typeof item?currentMarker=item:currentMarker===desiredMarker&&(Array.isArray(stylingKey)||(stylingKey=void 0===stylingKey?[]:["",stylingKey]),keyValueArraySet(stylingKey,item,!!isClassBased||attrs[++i]))}return void 0===stylingKey?null:stylingKey}function updateStyling(tView,tNode,lView,renderer,prop,value,isClassBased,bindingIndex){if(3!==tNode.type)return;const tData=tView.data,tRange=tData[bindingIndex+1];isStylingValuePresent(1==(1&tRange)?findStylingValue(tData,tNode,lView,prop,getTStylingRangeNext(tRange),isClassBased):void 0)||(isStylingValuePresent(value)||function(tStylingRange){return 2==(2&tStylingRange)}(tRange)&&(value=findStylingValue(tData,null,lView,prop,bindingIndex,isClassBased)),function(renderer,isClassBased,rNode,prop,value){const isProcedural=isProceduralRenderer(renderer);if(isClassBased)value?isProcedural?renderer.addClass(rNode,prop):rNode.classList.add(prop):isProcedural?renderer.removeClass(rNode,prop):rNode.classList.remove(prop);else{const flags=-1==prop.indexOf("-")?void 0:2;null==value?isProcedural?renderer.removeStyle(rNode,prop,flags):rNode.style.removeProperty(prop):isProcedural?renderer.setStyle(rNode,prop,value,flags):rNode.style.setProperty(prop,value)}}(renderer,isClassBased,getNativeByIndex(getSelectedIndex(),lView),prop,value))}function findStylingValue(tData,tNode,lView,prop,index,isClassBased){const isPrevDirection=null===tNode;let value=void 0;for(;index>0;){const rawKey=tData[index],containsStatics=Array.isArray(rawKey),key=containsStatics?rawKey[1]:rawKey,isStylingMap=null===key;let valueAtLViewIndex=lView[index+1];valueAtLViewIndex===NO_CHANGE&&(valueAtLViewIndex=isStylingMap?EMPTY_ARRAY$3:void 0);let currentValue=isStylingMap?keyValueArrayGet(valueAtLViewIndex,prop):key===prop?valueAtLViewIndex:void 0;if(containsStatics&&!isStylingValuePresent(currentValue)&&(currentValue=keyValueArrayGet(rawKey,prop)),isStylingValuePresent(currentValue)&&(value=currentValue,isPrevDirection))return value;const tRange=tData[index+1];index=isPrevDirection?getTStylingRangePrev(tRange):getTStylingRangeNext(tRange)}if(null!==tNode){let residual=isClassBased?tNode.residualClasses:tNode.residualStyles;null!=residual&&(value=keyValueArrayGet(residual,prop))}return value}function isStylingValuePresent(value){return void 0!==value}function hasStylingInputShadow(tNode,isClassBased){return 0!=(tNode.flags&(isClassBased?16:32))}function text(index,value=""){const lView=getLView(),tView=getTView(),adjustedIndex=index+20,tNode=tView.firstCreatePass?getOrCreateTNode(tView,lView[6],index,3,null,null):tView.data[adjustedIndex],textNative=lView[adjustedIndex]=function(value,renderer){return isProceduralRenderer(renderer)?renderer.createText(value):renderer.createTextNode(value)}(value,lView[11]);appendChild(tView,lView,textNative,tNode),setPreviousOrParentTNode(tNode,!1)}function textInterpolate(v0){return textInterpolate1("",v0,""),textInterpolate}function textInterpolate1(prefix,v0,suffix){const lView=getLView(),interpolated=interpolation1(lView,prefix,v0,suffix);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),textInterpolate1}function textInterpolate2(prefix,v0,i0,v1,suffix){const lView=getLView(),interpolated=function(lView,prefix,v0,i0,v1,suffix){const different=bindingUpdated2(lView,getBindingIndex(),v0,v1);return incrementBindingIndex(2),different?prefix+renderStringify(v0)+i0+renderStringify(v1)+suffix:NO_CHANGE}(lView,prefix,v0,i0,v1,suffix);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),textInterpolate2}function textInterpolate5(prefix,v0,i0,v1,i1,v2,i2,v3,i3,v4,suffix){const lView=getLView(),interpolated=function(lView,prefix,v0,i0,v1,i1,v2,i2,v3,i3,v4,suffix){const bindingIndex=getBindingIndex();let different=bindingUpdated4(lView,bindingIndex,v0,v1,v2,v3);return different=bindingUpdated(lView,bindingIndex+4,v4)||different,incrementBindingIndex(5),different?prefix+renderStringify(v0)+i0+renderStringify(v1)+i1+renderStringify(v2)+i2+renderStringify(v3)+i3+renderStringify(v4)+suffix:NO_CHANGE}(lView,prefix,v0,i0,v1,i1,v2,i2,v3,i3,v4,suffix);return interpolated!==NO_CHANGE&&textBindingInternal(lView,getSelectedIndex(),interpolated),textInterpolate5}function hostProperty(propName,value,sanitizer){const lView=getLView();return bindingUpdated(lView,nextBindingIndex(),value)&&elementPropertyInternal(getTView(),getSelectedTNode(),lView,propName,value,lView[11],sanitizer,!0),hostProperty}function LifecycleHooksFeature(component,def){const rootTView=readPatchedLView(component)[1],dirIndex=rootTView.data.length-1;registerPostOrderHooks(rootTView,{directiveStart:dirIndex,directiveEnd:dirIndex+1})}function InheritDefinitionFeature(definition){let superType=Object.getPrototypeOf(definition.type.prototype).constructor,shouldInheritFields=!0;const inheritanceChain=[definition];for(;superType;){let superDef=void 0;if(isComponentDef(definition))superDef=superType.cmp||superType.dir;else{if(superType.cmp)throw new Error("Directives cannot inherit Components");superDef=superType.dir}if(superDef){if(shouldInheritFields){inheritanceChain.push(superDef);const writeableDef=definition;writeableDef.inputs=maybeUnwrapEmpty(definition.inputs),writeableDef.declaredInputs=maybeUnwrapEmpty(definition.declaredInputs),writeableDef.outputs=maybeUnwrapEmpty(definition.outputs);const superHostBindings=superDef.hostBindings;superHostBindings&&inheritHostBindings(definition,superHostBindings);const superViewQuery=superDef.viewQuery,superContentQueries=superDef.contentQueries;if(superViewQuery&&inheritViewQuery(definition,superViewQuery),superContentQueries&&inheritContentQueries(definition,superContentQueries),fillProperties(definition.inputs,superDef.inputs),fillProperties(definition.declaredInputs,superDef.declaredInputs),fillProperties(definition.outputs,superDef.outputs),isComponentDef(superDef)&&superDef.data.animation){const defData=definition.data;defData.animation=(defData.animation||[]).concat(superDef.data.animation)}writeableDef.afterContentChecked=writeableDef.afterContentChecked||superDef.afterContentChecked,writeableDef.afterContentInit=definition.afterContentInit||superDef.afterContentInit,writeableDef.afterViewChecked=definition.afterViewChecked||superDef.afterViewChecked,writeableDef.afterViewInit=definition.afterViewInit||superDef.afterViewInit,writeableDef.doCheck=definition.doCheck||superDef.doCheck,writeableDef.onDestroy=definition.onDestroy||superDef.onDestroy,writeableDef.onInit=definition.onInit||superDef.onInit}const features=superDef.features;if(features)for(let i=0;i<features.length;i++){const feature=features[i];feature&&feature.ngInherit&&feature(definition),feature===InheritDefinitionFeature&&(shouldInheritFields=!1)}}superType=Object.getPrototypeOf(superType)}!function(inheritanceChain){let hostVars=0,hostAttrs=null;for(let i=inheritanceChain.length-1;i>=0;i--){const def=inheritanceChain[i];def.hostVars=hostVars+=def.hostVars,def.hostAttrs=mergeHostAttrs(def.hostAttrs,hostAttrs=mergeHostAttrs(hostAttrs,def.hostAttrs))}}(inheritanceChain)}function maybeUnwrapEmpty(value){return value===EMPTY_OBJ?{}:value===EMPTY_ARRAY?[]:value}function inheritViewQuery(definition,superViewQuery){const prevViewQuery=definition.viewQuery;definition.viewQuery=prevViewQuery?(rf,ctx)=>{superViewQuery(rf,ctx),prevViewQuery(rf,ctx)}:superViewQuery}function inheritContentQueries(definition,superContentQueries){const prevContentQueries=definition.contentQueries;definition.contentQueries=prevContentQueries?(rf,ctx,directiveIndex)=>{superContentQueries(rf,ctx,directiveIndex),prevContentQueries(rf,ctx,directiveIndex)}:superContentQueries}function inheritHostBindings(definition,superHostBindings){const prevHostBindings=definition.hostBindings;definition.hostBindings=prevHostBindings?(rf,ctx)=>{superHostBindings(rf,ctx),prevHostBindings(rf,ctx)}:superHostBindings}class SimpleChange{constructor(previousValue,currentValue,firstChange){this.previousValue=previousValue,this.currentValue=currentValue,this.firstChange=firstChange}isFirstChange(){return this.firstChange}}function NgOnChangesFeature(definition){definition.type.prototype.ngOnChanges&&(definition.setInput=ngOnChangesSetInput,definition.onChanges=function(){const simpleChangesStore=getSimpleChangesStore(this),current=simpleChangesStore&&simpleChangesStore.current;if(current){const previous=simpleChangesStore.previous;if(previous===EMPTY_OBJ)simpleChangesStore.previous=current;else for(let key in current)previous[key]=current[key];simpleChangesStore.current=null,this.ngOnChanges(current)}})}function ngOnChangesSetInput(instance,value,publicName,privateName){const simpleChangesStore=getSimpleChangesStore(instance)||function(instance,store){return instance.__ngSimpleChanges__=store}(instance,{previous:EMPTY_OBJ,current:null}),current=simpleChangesStore.current||(simpleChangesStore.current={}),previous=simpleChangesStore.previous,declaredName=this.declaredInputs[publicName],previousChange=previous[declaredName];current[declaredName]=new SimpleChange(previousChange&&previousChange.currentValue,value,previous===EMPTY_OBJ),instance[privateName]=value}function getSimpleChangesStore(instance){return instance.__ngSimpleChanges__||null}function resolveProvider$1(provider,tInjectables,lInjectablesBlueprint,isComponent,isViewProvider){if(provider=resolveForwardRef(provider),Array.isArray(provider))for(let i=0;i<provider.length;i++)resolveProvider$1(provider[i],tInjectables,lInjectablesBlueprint,isComponent,isViewProvider);else{const tView=getTView(),lView=getLView();let token=isTypeProvider(provider)?provider:resolveForwardRef(provider.provide),providerFactory=providerToFactory(provider);const tNode=getPreviousOrParentTNode(),beginIndex=65535&tNode.providerIndexes,endIndex=tNode.directiveStart,cptViewProvidersCount=tNode.providerIndexes>>16;if(isTypeProvider(provider)||!provider.multi){const factory=new NodeInjectorFactory(providerFactory,isViewProvider,directiveInject),existingFactoryIndex=indexOf(token,tInjectables,isViewProvider?beginIndex:beginIndex+cptViewProvidersCount,endIndex);-1===existingFactoryIndex?(diPublicInInjector(getOrCreateNodeInjectorForNode(tNode,lView),tView,token),registerDestroyHooksIfSupported(tView,provider,tInjectables.length),tInjectables.push(token),tNode.directiveStart++,tNode.directiveEnd++,isViewProvider&&(tNode.providerIndexes+=65536),lInjectablesBlueprint.push(factory),lView.push(factory)):(lInjectablesBlueprint[existingFactoryIndex]=factory,lView[existingFactoryIndex]=factory)}else{const existingProvidersFactoryIndex=indexOf(token,tInjectables,beginIndex+cptViewProvidersCount,endIndex),existingViewProvidersFactoryIndex=indexOf(token,tInjectables,beginIndex,beginIndex+cptViewProvidersCount),doesProvidersFactoryExist=existingProvidersFactoryIndex>=0&&lInjectablesBlueprint[existingProvidersFactoryIndex],doesViewProvidersFactoryExist=existingViewProvidersFactoryIndex>=0&&lInjectablesBlueprint[existingViewProvidersFactoryIndex];if(isViewProvider&&!doesViewProvidersFactoryExist||!isViewProvider&&!doesProvidersFactoryExist){diPublicInInjector(getOrCreateNodeInjectorForNode(tNode,lView),tView,token);const factory=function(factoryFn,index,isViewProvider,isComponent,f){const factory=new NodeInjectorFactory(factoryFn,isViewProvider,directiveInject);return factory.multi=[],factory.index=index,factory.componentProviders=0,multiFactoryAdd(factory,f,isComponent&&!isViewProvider),factory}(isViewProvider?multiViewProvidersFactoryResolver:multiProvidersFactoryResolver,lInjectablesBlueprint.length,isViewProvider,isComponent,providerFactory);!isViewProvider&&doesViewProvidersFactoryExist&&(lInjectablesBlueprint[existingViewProvidersFactoryIndex].providerFactory=factory),registerDestroyHooksIfSupported(tView,provider,tInjectables.length,0),tInjectables.push(token),tNode.directiveStart++,tNode.directiveEnd++,isViewProvider&&(tNode.providerIndexes+=65536),lInjectablesBlueprint.push(factory),lView.push(factory)}else registerDestroyHooksIfSupported(tView,provider,existingProvidersFactoryIndex>-1?existingProvidersFactoryIndex:existingViewProvidersFactoryIndex,multiFactoryAdd(lInjectablesBlueprint[isViewProvider?existingViewProvidersFactoryIndex:existingProvidersFactoryIndex],providerFactory,!isViewProvider&&isComponent));!isViewProvider&&isComponent&&doesViewProvidersFactoryExist&&lInjectablesBlueprint[existingViewProvidersFactoryIndex].componentProviders++}}}function registerDestroyHooksIfSupported(tView,provider,contextIndex,indexInFactory){const providerIsTypeProvider=isTypeProvider(provider);if(providerIsTypeProvider||provider.useClass){const ngOnDestroy=(provider.useClass||provider).prototype.ngOnDestroy;if(ngOnDestroy){const hooks=tView.destroyHooks||(tView.destroyHooks=[]);if(!providerIsTypeProvider&&provider.multi){const existingCallbacksIndex=hooks.indexOf(contextIndex);-1===existingCallbacksIndex?hooks.push(contextIndex,[indexInFactory,ngOnDestroy]):hooks[existingCallbacksIndex+1].push(indexInFactory,ngOnDestroy)}else hooks.push(contextIndex,ngOnDestroy)}}}function multiFactoryAdd(multiFactory,factory,isComponentProvider){return isComponentProvider&&multiFactory.componentProviders++,multiFactory.multi.push(factory)-1}function indexOf(item,arr,begin,end){for(let i=begin;i<end;i++)if(arr[i]===item)return i;return-1}function multiProvidersFactoryResolver(_,tData,lData,tNode){return multiResolve(this.multi,[])}function multiViewProvidersFactoryResolver(_,tData,lView,tNode){const factories=this.multi;let result;if(this.providerFactory){const componentCount=this.providerFactory.componentProviders,multiProviders=getNodeInjectable(lView,lView[1],this.providerFactory.index,tNode);result=multiProviders.slice(0,componentCount),multiResolve(factories,result);for(let i=componentCount;i<multiProviders.length;i++)result.push(multiProviders[i])}else result=[],multiResolve(factories,result);return result}function multiResolve(factories,result){for(let i=0;i<factories.length;i++)result.push((0,factories[i])());return result}function ProvidersFeature(providers,viewProviders=[]){return definition=>{definition.providersResolver=(def,processProvidersFn)=>function(def,providers,viewProviders){const tView=getTView();if(tView.firstCreatePass){const isComponent=isComponentDef(def);resolveProvider$1(viewProviders,tView.data,tView.blueprint,isComponent,!0),resolveProvider$1(providers,tView.data,tView.blueprint,isComponent,!1)}}(def,processProvidersFn?processProvidersFn(providers):providers,viewProviders)}}NgOnChangesFeature.ngInherit=!0;class ComponentFactory{}class _NullComponentFactoryResolver{resolveComponentFactory(component){throw function(component){const error=Error(`No component factory found for ${stringify(component)}. Did you add it to @NgModule.entryComponents?`);return error.ngComponent=component,error}(component)}}let ComponentFactoryResolver=(()=>{class ComponentFactoryResolver{}return ComponentFactoryResolver.NULL=new _NullComponentFactoryResolver,ComponentFactoryResolver})(),ElementRef=(()=>{class ElementRef{constructor(nativeElement){this.nativeElement=nativeElement}}return ElementRef.__NG_ELEMENT_ID__=()=>SWITCH_ELEMENT_REF_FACTORY(ElementRef),ElementRef})();const SWITCH_ELEMENT_REF_FACTORY=function(ElementRefToken){return createElementRef(ElementRefToken,getPreviousOrParentTNode(),getLView())};class RendererFactory2{}const RendererStyleFlags2=function(){var RendererStyleFlags2={Important:1,DashCase:2};return RendererStyleFlags2[RendererStyleFlags2.Important]="Important",RendererStyleFlags2[RendererStyleFlags2.DashCase]="DashCase",RendererStyleFlags2}();let Renderer2=(()=>{class Renderer2{}return Renderer2.__NG_ELEMENT_ID__=()=>SWITCH_RENDERER2_FACTORY(),Renderer2})();const SWITCH_RENDERER2_FACTORY=function(){const lView=getLView(),nodeAtIndex=getComponentLViewByIndex(getPreviousOrParentTNode().index,lView);return function(view){const renderer=view[11];if(isProceduralRenderer(renderer))return renderer;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(isLView(nodeAtIndex)?nodeAtIndex:lView)};let Sanitizer=(()=>{class Sanitizer{}return Sanitizer.prov=defineInjectable({token:Sanitizer,providedIn:"root",factory:()=>null}),Sanitizer})();class Version{constructor(full){this.full=full,this.major=full.split(".")[0],this.minor=full.split(".")[1],this.patch=full.split(".").slice(2).join(".")}}const VERSION=new Version("9.1.11");class DefaultIterableDifferFactory{constructor(){}supports(obj){return isListLikeIterable$1(obj)}create(trackByFn){return new DefaultIterableDiffer(trackByFn)}}const trackByIdentity=(index,item)=>item;class DefaultIterableDiffer{constructor(trackByFn){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=trackByFn||trackByIdentity}forEachItem(fn){let record;for(record=this._itHead;null!==record;record=record._next)fn(record)}forEachOperation(fn){let nextIt=this._itHead,nextRemove=this._removalsHead,addRemoveOffset=0,moveOffsets=null;for(;nextIt||nextRemove;){const record=!nextRemove||nextIt&&nextIt.currentIndex<getPreviousIndex(nextRemove,addRemoveOffset,moveOffsets)?nextIt:nextRemove,adjPreviousIndex=getPreviousIndex(record,addRemoveOffset,moveOffsets),currentIndex=record.currentIndex;if(record===nextRemove)addRemoveOffset--,nextRemove=nextRemove._nextRemoved;else if(nextIt=nextIt._next,null==record.previousIndex)addRemoveOffset++;else{moveOffsets||(moveOffsets=[]);const localMovePreviousIndex=adjPreviousIndex-addRemoveOffset,localCurrentIndex=currentIndex-addRemoveOffset;if(localMovePreviousIndex!=localCurrentIndex){for(let i=0;i<localMovePreviousIndex;i++){const offset=i<moveOffsets.length?moveOffsets[i]:moveOffsets[i]=0,index=offset+i;localCurrentIndex<=index&&index<localMovePreviousIndex&&(moveOffsets[i]=offset+1)}moveOffsets[record.previousIndex]=localCurrentIndex-localMovePreviousIndex}}adjPreviousIndex!==currentIndex&&fn(record,adjPreviousIndex,currentIndex)}}forEachPreviousItem(fn){let record;for(record=this._previousItHead;null!==record;record=record._nextPrevious)fn(record)}forEachAddedItem(fn){let record;for(record=this._additionsHead;null!==record;record=record._nextAdded)fn(record)}forEachMovedItem(fn){let record;for(record=this._movesHead;null!==record;record=record._nextMoved)fn(record)}forEachRemovedItem(fn){let record;for(record=this._removalsHead;null!==record;record=record._nextRemoved)fn(record)}forEachIdentityChange(fn){let record;for(record=this._identityChangesHead;null!==record;record=record._nextIdentityChange)fn(record)}diff(collection){if(null==collection&&(collection=[]),!isListLikeIterable$1(collection))throw new Error(`Error trying to diff '${stringify(collection)}'. Only arrays and iterables are allowed`);return this.check(collection)?this:null}onDestroy(){}check(collection){this._reset();let index,item,itemTrackBy,record=this._itHead,mayBeDirty=!1;if(Array.isArray(collection)){this.length=collection.length;for(let index=0;index<this.length;index++)item=collection[index],itemTrackBy=this._trackByFn(index,item),null!==record&&looseIdentical(record.trackById,itemTrackBy)?(mayBeDirty&&(record=this._verifyReinsertion(record,item,itemTrackBy,index)),looseIdentical(record.item,item)||this._addIdentityChange(record,item)):(record=this._mismatch(record,item,itemTrackBy,index),mayBeDirty=!0),record=record._next}else index=0,function(obj,fn){if(Array.isArray(obj))for(let i=0;i<obj.length;i++)fn(obj[i]);else{const iterator=obj[core_getSymbolIterator()]();let item;for(;!(item=iterator.next()).done;)fn(item.value)}}(collection,item=>{itemTrackBy=this._trackByFn(index,item),null!==record&&looseIdentical(record.trackById,itemTrackBy)?(mayBeDirty&&(record=this._verifyReinsertion(record,item,itemTrackBy,index)),looseIdentical(record.item,item)||this._addIdentityChange(record,item)):(record=this._mismatch(record,item,itemTrackBy,index),mayBeDirty=!0),record=record._next,index++}),this.length=index;return this._truncate(record),this.collection=collection,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let record,nextRecord;for(record=this._previousItHead=this._itHead;null!==record;record=record._next)record._nextPrevious=record._next;for(record=this._additionsHead;null!==record;record=record._nextAdded)record.previousIndex=record.currentIndex;for(this._additionsHead=this._additionsTail=null,record=this._movesHead;null!==record;record=nextRecord)record.previousIndex=record.currentIndex,nextRecord=record._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(record,item,itemTrackBy,index){let previousRecord;return null===record?previousRecord=this._itTail:(previousRecord=record._prev,this._remove(record)),null!==(record=null===this._linkedRecords?null:this._linkedRecords.get(itemTrackBy,index))?(looseIdentical(record.item,item)||this._addIdentityChange(record,item),this._moveAfter(record,previousRecord,index)):null!==(record=null===this._unlinkedRecords?null:this._unlinkedRecords.get(itemTrackBy,null))?(looseIdentical(record.item,item)||this._addIdentityChange(record,item),this._reinsertAfter(record,previousRecord,index)):record=this._addAfter(new IterableChangeRecord_(item,itemTrackBy),previousRecord,index),record}_verifyReinsertion(record,item,itemTrackBy,index){let reinsertRecord=null===this._unlinkedRecords?null:this._unlinkedRecords.get(itemTrackBy,null);return null!==reinsertRecord?record=this._reinsertAfter(reinsertRecord,record._prev,index):record.currentIndex!=index&&(record.currentIndex=index,this._addToMoves(record,index)),record}_truncate(record){for(;null!==record;){const nextRecord=record._next;this._addToRemovals(this._unlink(record)),record=nextRecord}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(record,prevRecord,index){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(record);const prev=record._prevRemoved,next=record._nextRemoved;return null===prev?this._removalsHead=next:prev._nextRemoved=next,null===next?this._removalsTail=prev:next._prevRemoved=prev,this._insertAfter(record,prevRecord,index),this._addToMoves(record,index),record}_moveAfter(record,prevRecord,index){return this._unlink(record),this._insertAfter(record,prevRecord,index),this._addToMoves(record,index),record}_addAfter(record,prevRecord,index){return this._insertAfter(record,prevRecord,index),this._additionsTail=null===this._additionsTail?this._additionsHead=record:this._additionsTail._nextAdded=record,record}_insertAfter(record,prevRecord,index){const next=null===prevRecord?this._itHead:prevRecord._next;return record._next=next,record._prev=prevRecord,null===next?this._itTail=record:next._prev=record,null===prevRecord?this._itHead=record:prevRecord._next=record,null===this._linkedRecords&&(this._linkedRecords=new _DuplicateMap),this._linkedRecords.put(record),record.currentIndex=index,record}_remove(record){return this._addToRemovals(this._unlink(record))}_unlink(record){null!==this._linkedRecords&&this._linkedRecords.remove(record);const prev=record._prev,next=record._next;return null===prev?this._itHead=next:prev._next=next,null===next?this._itTail=prev:next._prev=prev,record}_addToMoves(record,toIndex){return record.previousIndex===toIndex||(this._movesTail=null===this._movesTail?this._movesHead=record:this._movesTail._nextMoved=record),record}_addToRemovals(record){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _DuplicateMap),this._unlinkedRecords.put(record),record.currentIndex=null,record._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=record,record._prevRemoved=null):(record._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=record),record}_addIdentityChange(record,item){return record.item=item,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=record:this._identityChangesTail._nextIdentityChange=record,record}}class IterableChangeRecord_{constructor(item,trackById){this.item=item,this.trackById=trackById,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _DuplicateItemRecordList{constructor(){this._head=null,this._tail=null}add(record){null===this._head?(this._head=this._tail=record,record._nextDup=null,record._prevDup=null):(this._tail._nextDup=record,record._prevDup=this._tail,record._nextDup=null,this._tail=record)}get(trackById,atOrAfterIndex){let record;for(record=this._head;null!==record;record=record._nextDup)if((null===atOrAfterIndex||atOrAfterIndex<=record.currentIndex)&&looseIdentical(record.trackById,trackById))return record;return null}remove(record){const prev=record._prevDup,next=record._nextDup;return null===prev?this._head=next:prev._nextDup=next,null===next?this._tail=prev:next._prevDup=prev,null===this._head}}class _DuplicateMap{constructor(){this.map=new Map}put(record){const key=record.trackById;let duplicates=this.map.get(key);duplicates||(duplicates=new _DuplicateItemRecordList,this.map.set(key,duplicates)),duplicates.add(record)}get(trackById,atOrAfterIndex){const recordList=this.map.get(trackById);return recordList?recordList.get(trackById,atOrAfterIndex):null}remove(record){const key=record.trackById;return this.map.get(key).remove(record)&&this.map.delete(key),record}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function getPreviousIndex(item,addRemoveOffset,moveOffsets){const previousIndex=item.previousIndex;if(null===previousIndex)return previousIndex;let moveOffset=0;return moveOffsets&&previousIndex<moveOffsets.length&&(moveOffset=moveOffsets[previousIndex]),previousIndex+addRemoveOffset+moveOffset}class DefaultKeyValueDifferFactory{constructor(){}supports(obj){return obj instanceof Map||isJsObject$1(obj)}create(){return new DefaultKeyValueDiffer}}class DefaultKeyValueDiffer{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(fn){let record;for(record=this._mapHead;null!==record;record=record._next)fn(record)}forEachPreviousItem(fn){let record;for(record=this._previousMapHead;null!==record;record=record._nextPrevious)fn(record)}forEachChangedItem(fn){let record;for(record=this._changesHead;null!==record;record=record._nextChanged)fn(record)}forEachAddedItem(fn){let record;for(record=this._additionsHead;null!==record;record=record._nextAdded)fn(record)}forEachRemovedItem(fn){let record;for(record=this._removalsHead;null!==record;record=record._nextRemoved)fn(record)}diff(map){if(map){if(!(map instanceof Map||isJsObject$1(map)))throw new Error(`Error trying to diff '${stringify(map)}'. Only maps and objects are allowed`)}else map=new Map;return this.check(map)?this:null}onDestroy(){}check(map){this._reset();let insertBefore=this._mapHead;if(this._appendAfter=null,this._forEach(map,(value,key)=>{if(insertBefore&&insertBefore.key===key)this._maybeAddToChanges(insertBefore,value),this._appendAfter=insertBefore,insertBefore=insertBefore._next;else{const record=this._getOrCreateRecordForKey(key,value);insertBefore=this._insertBeforeOrAppend(insertBefore,record)}}),insertBefore){insertBefore._prev&&(insertBefore._prev._next=null),this._removalsHead=insertBefore;for(let record=insertBefore;null!==record;record=record._nextRemoved)record===this._mapHead&&(this._mapHead=null),this._records.delete(record.key),record._nextRemoved=record._next,record.previousValue=record.currentValue,record.currentValue=null,record._prev=null,record._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(before,record){if(before){const prev=before._prev;return record._next=before,record._prev=prev,before._prev=record,prev&&(prev._next=record),before===this._mapHead&&(this._mapHead=record),this._appendAfter=before,before}return this._appendAfter?(this._appendAfter._next=record,record._prev=this._appendAfter):this._mapHead=record,this._appendAfter=record,null}_getOrCreateRecordForKey(key,value){if(this._records.has(key)){const record=this._records.get(key);this._maybeAddToChanges(record,value);const prev=record._prev,next=record._next;return prev&&(prev._next=next),next&&(next._prev=prev),record._next=null,record._prev=null,record}const record=new KeyValueChangeRecord_(key);return this._records.set(key,record),record.currentValue=value,this._addToAdditions(record),record}_reset(){if(this.isDirty){let record;for(this._previousMapHead=this._mapHead,record=this._previousMapHead;null!==record;record=record._next)record._nextPrevious=record._next;for(record=this._changesHead;null!==record;record=record._nextChanged)record.previousValue=record.currentValue;for(record=this._additionsHead;null!=record;record=record._nextAdded)record.previousValue=record.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(record,newValue){looseIdentical(newValue,record.currentValue)||(record.previousValue=record.currentValue,record.currentValue=newValue,this._addToChanges(record))}_addToAdditions(record){null===this._additionsHead?this._additionsHead=this._additionsTail=record:(this._additionsTail._nextAdded=record,this._additionsTail=record)}_addToChanges(record){null===this._changesHead?this._changesHead=this._changesTail=record:(this._changesTail._nextChanged=record,this._changesTail=record)}_forEach(obj,fn){obj instanceof Map?obj.forEach(fn):Object.keys(obj).forEach(k=>fn(obj[k],k))}}class KeyValueChangeRecord_{constructor(key){this.key=key,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let IterableDiffers=(()=>{class IterableDiffers{constructor(factories){this.factories=factories}static create(factories,parent){if(null!=parent){const copied=parent.factories.slice();factories=factories.concat(copied)}return new IterableDiffers(factories)}static extend(factories){return{provide:IterableDiffers,useFactory:parent=>{if(!parent)throw new Error("Cannot extend IterableDiffers without a parent injector");return IterableDiffers.create(factories,parent)},deps:[[IterableDiffers,new SkipSelf,new Optional]]}}find(iterable){const factory=this.factories.find(f=>f.supports(iterable));if(null!=factory)return factory;throw new Error(`Cannot find a differ supporting object '${iterable}' of type '${type=iterable,type.name||typeof type}'`);var type}}return IterableDiffers.prov=defineInjectable({token:IterableDiffers,providedIn:"root",factory:()=>new IterableDiffers([new DefaultIterableDifferFactory])}),IterableDiffers})(),KeyValueDiffers=(()=>{class KeyValueDiffers{constructor(factories){this.factories=factories}static create(factories,parent){if(parent){const copied=parent.factories.slice();factories=factories.concat(copied)}return new KeyValueDiffers(factories)}static extend(factories){return{provide:KeyValueDiffers,useFactory:parent=>{if(!parent)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return KeyValueDiffers.create(factories,parent)},deps:[[KeyValueDiffers,new SkipSelf,new Optional]]}}find(kv){const factory=this.factories.find(f=>f.supports(kv));if(factory)return factory;throw new Error(`Cannot find a differ supporting object '${kv}'`)}}return KeyValueDiffers.prov=defineInjectable({token:KeyValueDiffers,providedIn:"root",factory:()=>new KeyValueDiffers([new DefaultKeyValueDifferFactory])}),KeyValueDiffers})();const keyValDiff=[new DefaultKeyValueDifferFactory],defaultIterableDiffers=new IterableDiffers([new DefaultIterableDifferFactory]),defaultKeyValueDiffers=new KeyValueDiffers(keyValDiff);let TemplateRef=(()=>{class TemplateRef{}return TemplateRef.__NG_ELEMENT_ID__=()=>SWITCH_TEMPLATE_REF_FACTORY(TemplateRef,ElementRef),TemplateRef})();const SWITCH_TEMPLATE_REF_FACTORY=function(TemplateRefToken,ElementRefToken){return createTemplateRef(TemplateRefToken,ElementRefToken,getPreviousOrParentTNode(),getLView())};let ViewContainerRef=(()=>{class ViewContainerRef{}return ViewContainerRef.__NG_ELEMENT_ID__=()=>SWITCH_VIEW_CONTAINER_REF_FACTORY(ViewContainerRef,ElementRef),ViewContainerRef})();const SWITCH_VIEW_CONTAINER_REF_FACTORY=function(ViewContainerRefToken,ElementRefToken){return createContainerRef(ViewContainerRefToken,ElementRefToken,getPreviousOrParentTNode(),getLView())},NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR={};class ComponentFactoryResolver$1 extends ComponentFactoryResolver{constructor(ngModule){super(),this.ngModule=ngModule}resolveComponentFactory(component){const componentDef=getComponentDef(component);return new ComponentFactory$1(componentDef,this.ngModule)}}function toRefArray(map){const array=[];for(let nonMinified in map)map.hasOwnProperty(nonMinified)&&array.push({propName:map[nonMinified],templateName:nonMinified});return array}const SCHEDULER=new InjectionToken("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>defaultScheduler});class ComponentFactory$1 extends ComponentFactory{constructor(componentDef,ngModule){super(),this.componentDef=componentDef,this.ngModule=ngModule,this.componentType=componentDef.type,this.selector=componentDef.selectors.map(stringifyCSSSelector).join(","),this.ngContentSelectors=componentDef.ngContentSelectors?componentDef.ngContentSelectors:[],this.isBoundToModule=!!ngModule}get inputs(){return toRefArray(this.componentDef.inputs)}get outputs(){return toRefArray(this.componentDef.outputs)}create(injector,projectableNodes,rootSelectorOrNode,ngModule){const rootViewInjector=(ngModule=ngModule||this.ngModule)?function(rootViewInjector,moduleInjector){return{get:(token,notFoundValue,flags)=>{const value=rootViewInjector.get(token,NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR,flags);return value!==NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR||notFoundValue===NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR?value:moduleInjector.get(token,notFoundValue,flags)}}}(injector,ngModule.injector):injector,rendererFactory=rootViewInjector.get(RendererFactory2,domRendererFactory3),sanitizer=rootViewInjector.get(Sanitizer,null),hostRenderer=rendererFactory.createRenderer(null,this.componentDef),elementName=this.componentDef.selectors[0][0]||"div",hostRNode=rootSelectorOrNode?function(renderer,elementOrSelector,encapsulation){if(isProceduralRenderer(renderer))return renderer.selectRootElement(elementOrSelector,encapsulation===ViewEncapsulation$1.ShadowDom);let rElement="string"==typeof elementOrSelector?renderer.querySelector(elementOrSelector):elementOrSelector;return rElement.textContent="",rElement}(hostRenderer,rootSelectorOrNode,this.componentDef.encapsulation):elementCreate(elementName,rendererFactory.createRenderer(null,this.componentDef),function(elementName){const name=elementName.toLowerCase();return"svg"===name?"http://www.w3.org/2000/svg":"math"===name?"http://www.w3.org/1998/MathML/":null}(elementName)),rootFlags=this.componentDef.onPush?576:528,isIsolated="string"==typeof rootSelectorOrNode&&/^#root-ng-internal-isolated-\d+/.test(rootSelectorOrNode),rootContext={components:[],scheduler:defaultScheduler,clean:CLEAN_PROMISE,playerHandler:null,flags:0},rootTView=createTView(0,-1,null,1,0,null,null,null,null,null),rootLView=createLView(null,rootTView,rootContext,rootFlags,null,null,rendererFactory,hostRenderer,sanitizer,rootViewInjector);let component,tElementNode;enterView(rootLView,null);try{const componentView=function(rNode,def,rootView,rendererFactory,hostRenderer,sanitizer){const tView=rootView[1];rootView[20]=rNode;const tNode=getOrCreateTNode(tView,null,0,3,null,null),mergedAttrs=tNode.mergedAttrs=def.hostAttrs;null!==mergedAttrs&&(computeStaticStyling(tNode,mergedAttrs,!0),null!==rNode&&(setUpAttributes(hostRenderer,rNode,mergedAttrs),null!==tNode.classes&&writeDirectClass(hostRenderer,rNode,tNode.classes),null!==tNode.styles&&writeDirectStyle(hostRenderer,rNode,tNode.styles)));const viewRenderer=rendererFactory.createRenderer(rNode,def),componentView=createLView(rootView,getOrCreateTComponentView(def),null,def.onPush?64:16,rootView[20],tNode,rendererFactory,viewRenderer,void 0);return tView.firstCreatePass&&(diPublicInInjector(getOrCreateNodeInjectorForNode(tNode,rootView),tView,def.type),markAsComponentHost(tView,tNode),initTNodeFlags(tNode,rootView.length,1)),addToViewTree(rootView,componentView),rootView[20]=componentView}(hostRNode,this.componentDef,rootLView,rendererFactory,hostRenderer);if(hostRNode)if(rootSelectorOrNode)setUpAttributes(hostRenderer,hostRNode,["ng-version",VERSION.full]);else{const{attrs:attrs,classes:classes}=function(selector){const attrs=[],classes=[];let i=1,mode=2;for(;i<selector.length;){let valueOrMarker=selector[i];if("string"==typeof valueOrMarker)2===mode?""!==valueOrMarker&&attrs.push(valueOrMarker,selector[++i]):8===mode&&classes.push(valueOrMarker);else{if(!isPositive(mode))break;mode=valueOrMarker}i++}return{attrs:attrs,classes:classes}}(this.componentDef.selectors[0]);attrs&&setUpAttributes(hostRenderer,hostRNode,attrs),classes&&classes.length>0&&writeDirectClass(hostRenderer,hostRNode,classes.join(" "))}if(tElementNode=getTNode(rootTView,0),void 0!==projectableNodes){const projection=tElementNode.projection=[];for(let i=0;i<this.ngContentSelectors.length;i++){const nodesforSlot=projectableNodes[i];projection.push(null!=nodesforSlot?Array.from(nodesforSlot):null)}}component=function(componentView,componentDef,rootLView,rootContext,hostFeatures){const tView=rootLView[1],component=function(tView,lView,def){const rootTNode=getPreviousOrParentTNode();tView.firstCreatePass&&(def.providersResolver&&def.providersResolver(def),generateExpandoInstructionBlock(tView,rootTNode,1),baseResolveDirective(tView,lView,def));const directive=getNodeInjectable(lView,tView,lView.length-1,rootTNode);attachPatchData(directive,lView);const native=getNativeByTNode(rootTNode,lView);return native&&attachPatchData(native,lView),directive}(tView,rootLView,componentDef);rootContext.components.push(component),componentView[8]=component,hostFeatures&&hostFeatures.forEach(feature=>feature(component,componentDef)),componentDef.contentQueries&&componentDef.contentQueries(1,component,rootLView.length-1);const rootTNode=getPreviousOrParentTNode();if(tView.firstCreatePass&&(null!==componentDef.hostBindings||null!==componentDef.hostAttrs)){setSelectedIndex(rootTNode.index-20);const rootTView=rootLView[1];addHostBindingsToExpandoInstructions(rootTView,componentDef),growHostVarsSpace(rootTView,rootLView,componentDef.hostVars),invokeHostBindingsInCreationMode(componentDef,component)}return component}(componentView,this.componentDef,rootLView,rootContext,[LifecycleHooksFeature]),renderView(rootTView,rootLView,null)}finally{leaveView()}const componentRef=new ComponentRef$1(this.componentType,component,createElementRef(ElementRef,tElementNode,rootLView),rootLView,tElementNode);return rootSelectorOrNode&&!isIsolated||(rootTView.node.child=tElementNode),componentRef}}class ComponentRef$1 extends class{}{constructor(componentType,instance,location,_rootLView,_tNode){super(),this.location=location,this._rootLView=_rootLView,this._tNode=_tNode,this.destroyCbs=[],this.instance=instance,this.hostView=this.changeDetectorRef=new RootViewRef(_rootLView),function(tView,tParentNode,index,lView){let tNode=tView.node;null==tNode&&(tView.node=tNode=createTNode(0,null,2,-1,null,null)),lView[6]=tNode}(_rootLView[1],0,0,_rootLView),this.componentType=componentType}get injector(){return new NodeInjector(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(fn=>fn()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(callback){this.destroyCbs&&this.destroyCbs.push(callback)}}const u=void 0;var localeEn=["en",[["a","p"],["AM","PM"],u],[["AM","PM"],u,u],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],u,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],u,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",u,"{1} 'at' {0}",u],[".",",",";","%","+","-","E","","","","NaN",":"],["#,##0.###","#,##0%","#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){let i=Math.floor(Math.abs(n)),v=n.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===v?1:5}];let LOCALE_DATA={};function getLocaleData(normalizedLocale){return normalizedLocale in LOCALE_DATA||(LOCALE_DATA[normalizedLocale]=_global.ng&&_global.ng.common&&_global.ng.common.locales&&_global.ng.common.locales[normalizedLocale]),LOCALE_DATA[normalizedLocale]}const LocaleDataIndex=function(){var LocaleDataIndex={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,Directionality:19,PluralCase:20,ExtraData:21};return LocaleDataIndex[LocaleDataIndex.LocaleId]="LocaleId",LocaleDataIndex[LocaleDataIndex.DayPeriodsFormat]="DayPeriodsFormat",LocaleDataIndex[LocaleDataIndex.DayPeriodsStandalone]="DayPeriodsStandalone",LocaleDataIndex[LocaleDataIndex.DaysFormat]="DaysFormat",LocaleDataIndex[LocaleDataIndex.DaysStandalone]="DaysStandalone",LocaleDataIndex[LocaleDataIndex.MonthsFormat]="MonthsFormat",LocaleDataIndex[LocaleDataIndex.MonthsStandalone]="MonthsStandalone",LocaleDataIndex[LocaleDataIndex.Eras]="Eras",LocaleDataIndex[LocaleDataIndex.FirstDayOfWeek]="FirstDayOfWeek",LocaleDataIndex[LocaleDataIndex.WeekendRange]="WeekendRange",LocaleDataIndex[LocaleDataIndex.DateFormat]="DateFormat",LocaleDataIndex[LocaleDataIndex.TimeFormat]="TimeFormat",LocaleDataIndex[LocaleDataIndex.DateTimeFormat]="DateTimeFormat",LocaleDataIndex[LocaleDataIndex.NumberSymbols]="NumberSymbols",LocaleDataIndex[LocaleDataIndex.NumberFormats]="NumberFormats",LocaleDataIndex[LocaleDataIndex.CurrencyCode]="CurrencyCode",LocaleDataIndex[LocaleDataIndex.CurrencySymbol]="CurrencySymbol",LocaleDataIndex[LocaleDataIndex.CurrencyName]="CurrencyName",LocaleDataIndex[LocaleDataIndex.Currencies]="Currencies",LocaleDataIndex[LocaleDataIndex.Directionality]="Directionality",LocaleDataIndex[LocaleDataIndex.PluralCase]="PluralCase",LocaleDataIndex[LocaleDataIndex.ExtraData]="ExtraData",LocaleDataIndex}(),BINDING_REGEXP=/(\d+):?\d*/gi,ICU_REGEXP=/({\s*\d+:?\d*\s*,\s*\S{6}\s*,[\s\S]*})/gi;function generateBindingUpdateOpCodes(str,destinationNode,attrName,sanitizeFn=null){const updateOpCodes=[null,null],textParts=str.split(BINDING_REGEXP);let mask=0;for(let j=0;j<textParts.length;j++){const textValue=textParts[j];if(1&j){const bindingIndex=parseInt(textValue,10);updateOpCodes.push(-1-bindingIndex),mask|=toMaskBit(bindingIndex)}else""!==textValue&&updateOpCodes.push(textValue)}return updateOpCodes.push(destinationNode<<2|(attrName?1:0)),attrName&&updateOpCodes.push(attrName,sanitizeFn),updateOpCodes[0]=mask,updateOpCodes[1]=updateOpCodes.length-2,updateOpCodes}function toMaskBit(bindingIndex){return 1<<Math.min(bindingIndex,31)}function i18nAttributes(index,values){!function(lView,tView,index,values){const previousElementIndex=getPreviousOrParentTNode().index-20,updateOpCodes=[];for(let i=0;i<values.length;i+=2){const attrName=values[i],parts=values[i+1].split(ICU_REGEXP);for(let j=0;j<parts.length;j++){const value=parts[j];if(1&j)throw new Error("ICU expressions are not yet supported in attributes");if(""!==value)if(value.match(BINDING_REGEXP))tView.firstCreatePass&&null===tView.data[index+20]&&addAllToArray(generateBindingUpdateOpCodes(value,previousElementIndex,attrName),updateOpCodes);else{const tNode=getTNode(tView,previousElementIndex);3===tNode.type&&elementAttributeInternal(tNode,lView,attrName,value,null,null);const dataValue=null!==tNode.inputs&&tNode.inputs[attrName];dataValue&&setInputsForProperty(tView,lView,dataValue,attrName,value)}}}tView.firstCreatePass&&null===tView.data[index+20]&&(tView.data[index+20]=updateOpCodes)}(getLView(),getTView(),index,values)}let LOCALE_ID="en-US";function setLocaleId(localeId){var actual,msg;msg="Expected localeId to be defined",null==(actual=localeId)&&function(msg,actual,expected,comparison){throw new Error("ASSERTION ERROR: "+msg+` [Expected=> null != ${actual} <=Actual]`)}(msg,actual),"string"==typeof localeId&&(LOCALE_ID=localeId.toLowerCase().replace(/_/g,"-"))}const modules=new Map;class NgModuleRef$1 extends NgModuleRef{constructor(ngModuleType,_parent){super(),this._parent=_parent,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ComponentFactoryResolver$1(this);const ngModuleDef=getNgModuleDef(ngModuleType),ngLocaleIdDef=ngModuleType[NG_LOC_ID_DEF]||null;ngLocaleIdDef&&setLocaleId(ngLocaleIdDef),this._bootstrapComponents=maybeUnwrapFn(ngModuleDef.bootstrap),this._r3Injector=createInjectorWithoutInjectorInstances(ngModuleType,_parent,[{provide:NgModuleRef,useValue:this},{provide:ComponentFactoryResolver,useValue:this.componentFactoryResolver}],stringify(ngModuleType)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(ngModuleType)}get(token,notFoundValue=Injector.THROW_IF_NOT_FOUND,injectFlags=InjectFlags.Default){return token===Injector||token===NgModuleRef||token===INJECTOR?this:this._r3Injector.get(token,notFoundValue,injectFlags)}destroy(){const injector=this._r3Injector;!injector.destroyed&&injector.destroy(),this.destroyCbs.forEach(fn=>fn()),this.destroyCbs=null}onDestroy(callback){this.destroyCbs.push(callback)}}class NgModuleFactory$1 extends NgModuleFactory{constructor(moduleType){super(),this.moduleType=moduleType,null!==getNgModuleDef(moduleType)&&function registerNgModuleType(ngModuleType){if(null!==ngModuleType.mod.id){const id=ngModuleType.mod.id;(function(id,type,incoming){if(type&&type!==incoming)throw new Error(`Duplicate module registered for ${id} - ${stringify(type)} vs ${stringify(type.name)}`)})(id,modules.get(id),ngModuleType),modules.set(id,ngModuleType)}let imports=ngModuleType.mod.imports;imports instanceof Function&&(imports=imports()),imports&&imports.forEach(i=>registerNgModuleType(i))}(moduleType)}create(parentInjector){return new NgModuleRef$1(this.moduleType,parentInjector)}}function pureFunction0(slotOffset,pureFn,thisArg){const bindingIndex=getBindingRoot()+slotOffset,lView=getLView();return lView[bindingIndex]===NO_CHANGE?updateBinding(lView,bindingIndex,thisArg?pureFn.call(thisArg):pureFn()):getBinding(lView,bindingIndex)}function pureFunction1(slotOffset,pureFn,exp,thisArg){return function(lView,bindingRoot,slotOffset,pureFn,exp,thisArg){const bindingIndex=bindingRoot+slotOffset;return bindingUpdated(lView,bindingIndex,exp)?updateBinding(lView,bindingIndex+1,thisArg?pureFn.call(thisArg,exp):pureFn(exp)):getPureFunctionReturnValue(lView,bindingIndex+1)}(getLView(),getBindingRoot(),slotOffset,pureFn,exp,thisArg)}function pureFunction2(slotOffset,pureFn,exp1,exp2,thisArg){return function(lView,bindingRoot,slotOffset,pureFn,exp1,exp2,thisArg){const bindingIndex=bindingRoot+slotOffset;return bindingUpdated2(lView,bindingIndex,exp1,exp2)?updateBinding(lView,bindingIndex+2,thisArg?pureFn.call(thisArg,exp1,exp2):pureFn(exp1,exp2)):getPureFunctionReturnValue(lView,bindingIndex+2)}(getLView(),getBindingRoot(),slotOffset,pureFn,exp1,exp2,thisArg)}function pureFunction3(slotOffset,pureFn,exp1,exp2,exp3,thisArg){return pureFunction3Internal(getLView(),getBindingRoot(),slotOffset,pureFn,exp1,exp2,exp3,thisArg)}function pureFunction4(slotOffset,pureFn,exp1,exp2,exp3,exp4,thisArg){return function(lView,bindingRoot,slotOffset,pureFn,exp1,exp2,exp3,exp4,thisArg){const bindingIndex=bindingRoot+slotOffset;return bindingUpdated4(lView,bindingIndex,exp1,exp2,exp3,exp4)?updateBinding(lView,bindingIndex+4,thisArg?pureFn.call(thisArg,exp1,exp2,exp3,exp4):pureFn(exp1,exp2,exp3,exp4)):getPureFunctionReturnValue(lView,bindingIndex+4)}(getLView(),getBindingRoot(),slotOffset,pureFn,exp1,exp2,exp3,exp4,thisArg)}function pureFunction6(slotOffset,pureFn,exp1,exp2,exp3,exp4,exp5,exp6,thisArg){const bindingIndex=getBindingRoot()+slotOffset,lView=getLView(),different=bindingUpdated4(lView,bindingIndex,exp1,exp2,exp3,exp4);return bindingUpdated2(lView,bindingIndex+4,exp5,exp6)||different?updateBinding(lView,bindingIndex+6,thisArg?pureFn.call(thisArg,exp1,exp2,exp3,exp4,exp5,exp6):pureFn(exp1,exp2,exp3,exp4,exp5,exp6)):getBinding(lView,bindingIndex+6)}function pureFunction7(slotOffset,pureFn,exp1,exp2,exp3,exp4,exp5,exp6,exp7,thisArg){const bindingIndex=getBindingRoot()+slotOffset,lView=getLView();let different=bindingUpdated4(lView,bindingIndex,exp1,exp2,exp3,exp4);return bindingUpdated3(lView,bindingIndex+4,exp5,exp6,exp7)||different?updateBinding(lView,bindingIndex+7,thisArg?pureFn.call(thisArg,exp1,exp2,exp3,exp4,exp5,exp6,exp7):pureFn(exp1,exp2,exp3,exp4,exp5,exp6,exp7)):getBinding(lView,bindingIndex+7)}function getPureFunctionReturnValue(lView,returnValueIndex){const lastReturnValue=lView[returnValueIndex];return lastReturnValue===NO_CHANGE?void 0:lastReturnValue}function pureFunction3Internal(lView,bindingRoot,slotOffset,pureFn,exp1,exp2,exp3,thisArg){const bindingIndex=bindingRoot+slotOffset;return bindingUpdated3(lView,bindingIndex,exp1,exp2,exp3)?updateBinding(lView,bindingIndex+3,thisArg?pureFn.call(thisArg,exp1,exp2,exp3):pureFn(exp1,exp2,exp3)):getPureFunctionReturnValue(lView,bindingIndex+3)}function pipe(index,pipeName){const tView=getTView();let pipeDef;const adjustedIndex=index+20;tView.firstCreatePass?(pipeDef=function(name,registry){if(registry)for(let i=registry.length-1;i>=0;i--){const pipeDef=registry[i];if(name===pipeDef.name)return pipeDef}throw new Error(`The pipe '${name}' could not be found!`)}(pipeName,tView.pipeRegistry),tView.data[adjustedIndex]=pipeDef,pipeDef.onDestroy&&(tView.destroyHooks||(tView.destroyHooks=[])).push(adjustedIndex,pipeDef.onDestroy)):pipeDef=tView.data[adjustedIndex];const pipeFactory=pipeDef.factory||(pipeDef.factory=getFactoryDef(pipeDef.type)),previousInjectImplementation=setInjectImplementation(directiveInject),previousIncludeViewProviders=setIncludeViewProviders(!1),pipeInstance=pipeFactory();return setIncludeViewProviders(previousIncludeViewProviders),setInjectImplementation(previousInjectImplementation),function(tView,lView,index,value){const adjustedIndex=index+20;adjustedIndex>=tView.data.length&&(tView.data[adjustedIndex]=null,tView.blueprint[adjustedIndex]=null),lView[adjustedIndex]=value}(tView,getLView(),index,pipeInstance),pipeInstance}function pipeBind3(index,slotOffset,v1,v2,v3){const lView=getLView(),pipeInstance=load(lView,index);return function(lView,newValue){return WrappedValue.isWrapped(newValue)&&(newValue=WrappedValue.unwrap(newValue),lView[getBindingIndex()]=NO_CHANGE),newValue}(lView,function(lView,index){return lView[1].data[index+20].pure}(lView,index)?pureFunction3Internal(lView,getBindingRoot(),slotOffset,pipeInstance.transform,v1,v2,v3,pipeInstance):pipeInstance.transform(v1,v2,v3))}class core_EventEmitter extends Subject_Subject{constructor(isAsync=!1){super(),this.__isAsync=isAsync}emit(value){super.next(value)}subscribe(generatorOrNext,error,complete){let schedulerFn,errorFn=err=>null,completeFn=()=>null;generatorOrNext&&"object"==typeof generatorOrNext?(schedulerFn=this.__isAsync?value=>{setTimeout(()=>generatorOrNext.next(value))}:value=>{generatorOrNext.next(value)},generatorOrNext.error&&(errorFn=this.__isAsync?err=>{setTimeout(()=>generatorOrNext.error(err))}:err=>{generatorOrNext.error(err)}),generatorOrNext.complete&&(completeFn=this.__isAsync?()=>{setTimeout(()=>generatorOrNext.complete())}:()=>{generatorOrNext.complete()})):(schedulerFn=this.__isAsync?value=>{setTimeout(()=>generatorOrNext(value))}:value=>{generatorOrNext(value)},error&&(errorFn=this.__isAsync?err=>{setTimeout(()=>error(err))}:err=>{error(err)}),complete&&(completeFn=this.__isAsync?()=>{setTimeout(()=>complete())}:()=>{complete()}));const sink=super.subscribe(schedulerFn,errorFn,completeFn);return generatorOrNext instanceof Subscription_Subscription&&generatorOrNext.add(sink),sink}}function symbolIterator(){return this._results[core_getSymbolIterator()]()}class QueryList{constructor(){this.dirty=!0,this._results=[],this.changes=new core_EventEmitter,this.length=0;const symbol=core_getSymbolIterator(),proto=QueryList.prototype;proto[symbol]||(proto[symbol]=symbolIterator)}map(fn){return this._results.map(fn)}filter(fn){return this._results.filter(fn)}find(fn){return this._results.find(fn)}reduce(fn,init){return this._results.reduce(fn,init)}forEach(fn){this._results.forEach(fn)}some(fn){return this._results.some(fn)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(resultsTree){this._results=function flatten(list,dst){void 0===dst&&(dst=list);for(let i=0;i<list.length;i++){let item=list[i];Array.isArray(item)?(dst===list&&(dst=list.slice(0,i)),flatten(item,dst)):dst!==list&&dst.push(item)}return dst}(resultsTree),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class LQuery_{constructor(queryList){this.queryList=queryList,this.matches=null}clone(){return new LQuery_(this.queryList)}setDirty(){this.queryList.setDirty()}}class LQueries_{constructor(queries=[]){this.queries=queries}createEmbeddedView(tView){const tQueries=tView.queries;if(null!==tQueries){const noOfInheritedQueries=null!==tView.contentQueries?tView.contentQueries[0]:tQueries.length,viewLQueries=[];for(let i=0;i<noOfInheritedQueries;i++){const tQuery=tQueries.getByIndex(i);viewLQueries.push(this.queries[tQuery.indexInDeclarationView].clone())}return new LQueries_(viewLQueries)}return null}insertView(tView){this.dirtyQueriesWithMatches(tView)}detachView(tView){this.dirtyQueriesWithMatches(tView)}dirtyQueriesWithMatches(tView){for(let i=0;i<this.queries.length;i++)null!==getTQuery(tView,i).matches&&this.queries[i].setDirty()}}class TQueryMetadata_{constructor(predicate,descendants,isStatic,read=null){this.predicate=predicate,this.descendants=descendants,this.isStatic=isStatic,this.read=read}}class TQueries_{constructor(queries=[]){this.queries=queries}elementStart(tView,tNode){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(tView,tNode)}elementEnd(tNode){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(tNode)}embeddedTView(tNode){let queriesForTemplateRef=null;for(let i=0;i<this.length;i++){const childQueryIndex=null!==queriesForTemplateRef?queriesForTemplateRef.length:0,tqueryClone=this.getByIndex(i).embeddedTView(tNode,childQueryIndex);tqueryClone&&(tqueryClone.indexInDeclarationView=i,null!==queriesForTemplateRef?queriesForTemplateRef.push(tqueryClone):queriesForTemplateRef=[tqueryClone])}return null!==queriesForTemplateRef?new TQueries_(queriesForTemplateRef):null}template(tView,tNode){for(let i=0;i<this.queries.length;i++)this.queries[i].template(tView,tNode)}getByIndex(index){return this.queries[index]}get length(){return this.queries.length}track(tquery){this.queries.push(tquery)}}class TQuery_{constructor(metadata,nodeIndex=-1){this.metadata=metadata,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=nodeIndex}elementStart(tView,tNode){this.isApplyingToNode(tNode)&&this.matchTNode(tView,tNode)}elementEnd(tNode){this._declarationNodeIndex===tNode.index&&(this._appliesToNextNode=!1)}template(tView,tNode){this.elementStart(tView,tNode)}embeddedTView(tNode,childQueryIndex){return this.isApplyingToNode(tNode)?(this.crossesNgTemplate=!0,this.addMatch(-tNode.index,childQueryIndex),new TQuery_(this.metadata)):null}isApplyingToNode(tNode){if(this._appliesToNextNode&&!1===this.metadata.descendants){const declarationNodeIdx=this._declarationNodeIndex;let parent=tNode.parent;for(;null!==parent&&4===parent.type&&parent.index!==declarationNodeIdx;)parent=parent.parent;return declarationNodeIdx===(null!==parent?parent.index:-1)}return this._appliesToNextNode}matchTNode(tView,tNode){if(Array.isArray(this.metadata.predicate)){const localNames=this.metadata.predicate;for(let i=0;i<localNames.length;i++)this.matchTNodeWithReadOption(tView,tNode,getIdxOfMatchingSelector(tNode,localNames[i]))}else{const typePredicate=this.metadata.predicate;typePredicate===TemplateRef?0===tNode.type&&this.matchTNodeWithReadOption(tView,tNode,-1):this.matchTNodeWithReadOption(tView,tNode,locateDirectiveOrProvider(tNode,tView,typePredicate,!1,!1))}}matchTNodeWithReadOption(tView,tNode,nodeMatchIdx){if(null!==nodeMatchIdx){const read=this.metadata.read;if(null!==read)if(read===ElementRef||read===ViewContainerRef||read===TemplateRef&&0===tNode.type)this.addMatch(tNode.index,-2);else{const directiveOrProviderIdx=locateDirectiveOrProvider(tNode,tView,read,!1,!1);null!==directiveOrProviderIdx&&this.addMatch(tNode.index,directiveOrProviderIdx)}else this.addMatch(tNode.index,nodeMatchIdx)}}addMatch(tNodeIdx,matchIdx){null===this.matches?this.matches=[tNodeIdx,matchIdx]:this.matches.push(tNodeIdx,matchIdx)}}function getIdxOfMatchingSelector(tNode,selector){const localNames=tNode.localNames;if(null!==localNames)for(let i=0;i<localNames.length;i+=2)if(localNames[i]===selector)return localNames[i+1];return null}function createResultForNode(lView,tNode,matchingIdx,read){return-1===matchingIdx?function(tNode,currentView){return 3===tNode.type||4===tNode.type?createElementRef(ElementRef,tNode,currentView):0===tNode.type?createTemplateRef(TemplateRef,ElementRef,tNode,currentView):null}(tNode,lView):-2===matchingIdx?function(lView,tNode,read){return read===ElementRef?createElementRef(ElementRef,tNode,lView):read===TemplateRef?createTemplateRef(TemplateRef,ElementRef,tNode,lView):read===ViewContainerRef?createContainerRef(ViewContainerRef,ElementRef,tNode,lView):void 0}(lView,tNode,read):getNodeInjectable(lView,lView[1],matchingIdx,tNode)}function materializeViewResults(tView,lView,tQuery,queryIndex){const lQuery=lView[19].queries[queryIndex];if(null===lQuery.matches){const tViewData=tView.data,tQueryMatches=tQuery.matches,result=[];for(let i=0;i<tQueryMatches.length;i+=2){const matchedNodeIdx=tQueryMatches[i];result.push(matchedNodeIdx<0?null:createResultForNode(lView,tViewData[matchedNodeIdx],tQueryMatches[i+1],tQuery.metadata.read))}lQuery.matches=result}return lQuery.matches}function queryRefresh(queryList){const lView=getLView(),tView=getTView(),queryIndex=getCurrentQueryIndex();setCurrentQueryIndex(queryIndex+1);const tQuery=getTQuery(tView,queryIndex);if(queryList.dirty&&isCreationMode(lView)===tQuery.metadata.isStatic){if(null===tQuery.matches)queryList.reset([]);else{const result=tQuery.crossesNgTemplate?function collectQueryResults(tView,lView,queryIndex,result){const tQuery=tView.queries.getByIndex(queryIndex),tQueryMatches=tQuery.matches;if(null!==tQueryMatches){const lViewResults=materializeViewResults(tView,lView,tQuery,queryIndex);for(let i=0;i<tQueryMatches.length;i+=2){const tNodeIdx=tQueryMatches[i];if(tNodeIdx>0)result.push(lViewResults[i/2]);else{const childQueryIndex=tQueryMatches[i+1],declarationLContainer=lView[-tNodeIdx];for(let i=10;i<declarationLContainer.length;i++){const embeddedLView=declarationLContainer[i];embeddedLView[17]===embeddedLView[3]&&collectQueryResults(embeddedLView[1],embeddedLView,childQueryIndex,result)}if(null!==declarationLContainer[9]){const embeddedLViews=declarationLContainer[9];for(let i=0;i<embeddedLViews.length;i++){const embeddedLView=embeddedLViews[i];collectQueryResults(embeddedLView[1],embeddedLView,childQueryIndex,result)}}}}}return result}(tView,lView,queryIndex,[]):materializeViewResults(tView,lView,tQuery,queryIndex);queryList.reset(result),queryList.notifyOnChanges()}return!0}return!1}function staticViewQuery(predicate,descend,read){viewQueryInternal(getTView(),getLView(),predicate,descend,read,!0)}function viewQuery(predicate,descend,read){viewQueryInternal(getTView(),getLView(),predicate,descend,read,!1)}function viewQueryInternal(tView,lView,predicate,descend,read,isStatic){tView.firstCreatePass&&(createTQuery(tView,new TQueryMetadata_(predicate,descend,isStatic,read),-1),isStatic&&(tView.staticViewQueries=!0)),createLQuery(tView,lView)}function contentQuery(directiveIndex,predicate,descend,read){contentQueryInternal(getTView(),getLView(),predicate,descend,read,!1,getPreviousOrParentTNode(),directiveIndex)}function staticContentQuery(directiveIndex,predicate,descend,read){contentQueryInternal(getTView(),getLView(),predicate,descend,read,!0,getPreviousOrParentTNode(),directiveIndex)}function contentQueryInternal(tView,lView,predicate,descend,read,isStatic,tNode,directiveIndex){tView.firstCreatePass&&(createTQuery(tView,new TQueryMetadata_(predicate,descend,isStatic,read),tNode.index),function(tView,directiveIndex){const tViewContentQueries=tView.contentQueries||(tView.contentQueries=[]);directiveIndex!==(tView.contentQueries.length?tViewContentQueries[tViewContentQueries.length-1]:-1)&&tViewContentQueries.push(tView.queries.length-1,directiveIndex)}(tView,directiveIndex),isStatic&&(tView.staticContentQueries=!0)),createLQuery(tView,lView)}function loadQuery(){return lView=getLView(),queryIndex=getCurrentQueryIndex(),lView[19].queries[queryIndex].queryList;var lView,queryIndex}function createLQuery(tView,lView){const queryList=new QueryList;!function(tView,lView,context,cleanupFn){const lCleanup=getLCleanup(lView);lCleanup.push(context),tView.firstCreatePass&&getTViewCleanup(tView).push(cleanupFn,lCleanup.length-1)}(tView,lView,queryList,queryList.destroy),null===lView[19]&&(lView[19]=new LQueries_),lView[19].queries.push(new LQuery_(queryList))}function createTQuery(tView,metadata,nodeIndex){null===tView.queries&&(tView.queries=new TQueries_),tView.queries.track(new TQuery_(metadata,nodeIndex))}function getTQuery(tView,index){return tView.queries.getByIndex(index)}function templateRefExtractor(tNode,currentView){return createTemplateRef(TemplateRef,ElementRef,tNode,currentView)}const APP_INITIALIZER=new InjectionToken("Application Initializer");let ApplicationInitStatus=(()=>{class ApplicationInitStatus{constructor(appInits){this.appInits=appInits,this.initialized=!1,this.done=!1,this.donePromise=new Promise((res,rej)=>{this.resolve=res,this.reject=rej})}runInitializers(){if(this.initialized)return;const asyncInitPromises=[],complete=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const initResult=this.appInits[i]();core_isPromise(initResult)&&asyncInitPromises.push(initResult)}Promise.all(asyncInitPromises).then(()=>{complete()}).catch(e=>{this.reject(e)}),0===asyncInitPromises.length&&complete(),this.initialized=!0}}return ApplicationInitStatus.fac=function(t){return new(t||ApplicationInitStatus)(inject(APP_INITIALIZER,8))},ApplicationInitStatus.prov=defineInjectable({token:ApplicationInitStatus,factory:ApplicationInitStatus.fac}),ApplicationInitStatus})();const APP_ID=new InjectionToken("AppId"),APP_ID_RANDOM_PROVIDER={provide:APP_ID,useFactory:function(){return`${_randomChar()}${_randomChar()}${_randomChar()}`},deps:[]};function _randomChar(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const PLATFORM_INITIALIZER=new InjectionToken("Platform Initializer"),PLATFORM_ID=new InjectionToken("Platform ID"),APP_BOOTSTRAP_LISTENER=new InjectionToken("appBootstrapListener");let Console=(()=>{class Console{log(message){console.log(message)}warn(message){console.warn(message)}}return Console.fac=function(t){return new(t||Console)},Console.prov=defineInjectable({token:Console,factory:Console.fac}),Console})();const LOCALE_ID$1=new InjectionToken("LocaleId"),DEFAULT_CURRENCY_CODE=new InjectionToken("DefaultCurrencyCode");class ModuleWithComponentFactories{constructor(ngModuleFactory,componentFactories){this.ngModuleFactory=ngModuleFactory,this.componentFactories=componentFactories}}const Compiler_compileModuleSync__POST_R3__=function(moduleType){return new NgModuleFactory$1(moduleType)},Compiler_compileModuleSync=Compiler_compileModuleSync__POST_R3__,Compiler_compileModuleAsync=function(moduleType){return Promise.resolve(Compiler_compileModuleSync__POST_R3__(moduleType))},Compiler_compileModuleAndAllComponentsSync__POST_R3__=function(moduleType){const ngModuleFactory=Compiler_compileModuleSync__POST_R3__(moduleType),componentFactories=maybeUnwrapFn(getNgModuleDef(moduleType).declarations).reduce((factories,declaration)=>{const componentDef=getComponentDef(declaration);return componentDef&&factories.push(new ComponentFactory$1(componentDef)),factories},[]);return new ModuleWithComponentFactories(ngModuleFactory,componentFactories)},Compiler_compileModuleAndAllComponentsSync=Compiler_compileModuleAndAllComponentsSync__POST_R3__,Compiler_compileModuleAndAllComponentsAsync=function(moduleType){return Promise.resolve(Compiler_compileModuleAndAllComponentsSync__POST_R3__(moduleType))};let Compiler=(()=>{class Compiler{constructor(){this.compileModuleSync=Compiler_compileModuleSync,this.compileModuleAsync=Compiler_compileModuleAsync,this.compileModuleAndAllComponentsSync=Compiler_compileModuleAndAllComponentsSync,this.compileModuleAndAllComponentsAsync=Compiler_compileModuleAndAllComponentsAsync}clearCache(){}clearCacheFor(type){}getModuleId(moduleType){}}return Compiler.fac=function(t){return new(t||Compiler)},Compiler.prov=defineInjectable({token:Compiler,factory:Compiler.fac}),Compiler})();const COMPILER_OPTIONS=new InjectionToken("compilerOptions"),core_promise=(()=>Promise.resolve(0))();function scheduleMicroTask(fn){"undefined"==typeof Zone?core_promise.then(()=>{fn&&fn.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",fn)}class NgZone{constructor({enableLongStackTrace:enableLongStackTrace=!1,shouldCoalesceEventChangeDetection:shouldCoalesceEventChangeDetection=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new core_EventEmitter(!1),this.onMicrotaskEmpty=new core_EventEmitter(!1),this.onStable=new core_EventEmitter(!1),this.onError=new core_EventEmitter(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),enableLongStackTrace&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=shouldCoalesceEventChangeDetection,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let nativeRequestAnimationFrame=_global.requestAnimationFrame,nativeCancelAnimationFrame=_global.cancelAnimationFrame;if("undefined"!=typeof Zone&&nativeRequestAnimationFrame&&nativeCancelAnimationFrame){const unpatchedRequestAnimationFrame=nativeRequestAnimationFrame[Zone.__symbol__("OriginalDelegate")];unpatchedRequestAnimationFrame&&(nativeRequestAnimationFrame=unpatchedRequestAnimationFrame);const unpatchedCancelAnimationFrame=nativeCancelAnimationFrame[Zone.__symbol__("OriginalDelegate")];unpatchedCancelAnimationFrame&&(nativeCancelAnimationFrame=unpatchedCancelAnimationFrame)}return{nativeRequestAnimationFrame:nativeRequestAnimationFrame,nativeCancelAnimationFrame:nativeCancelAnimationFrame}}().nativeRequestAnimationFrame,function(zone){const maybeDelayChangeDetection=!!zone.shouldCoalesceEventChangeDetection&&zone.nativeRequestAnimationFrame&&(()=>{!function(zone){-1===zone.lastRequestAnimationFrameId&&(zone.lastRequestAnimationFrameId=zone.nativeRequestAnimationFrame.call(_global,()=>{zone.lastRequestAnimationFrameId=-1,updateMicroTaskStatus(zone),checkStable(zone)}),updateMicroTaskStatus(zone))}(zone)});zone._inner=zone._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:maybeDelayChangeDetection},onInvokeTask:(delegate,current,target,task,applyThis,applyArgs)=>{try{return onEnter(zone),delegate.invokeTask(target,task,applyThis,applyArgs)}finally{maybeDelayChangeDetection&&"eventTask"===task.type&&maybeDelayChangeDetection(),onLeave(zone)}},onInvoke:(delegate,current,target,callback,applyThis,applyArgs,source)=>{try{return onEnter(zone),delegate.invoke(target,callback,applyThis,applyArgs,source)}finally{onLeave(zone)}},onHasTask:(delegate,current,target,hasTaskState)=>{delegate.hasTask(target,hasTaskState),current===target&&("microTask"==hasTaskState.change?(zone._hasPendingMicrotasks=hasTaskState.microTask,updateMicroTaskStatus(zone),checkStable(zone)):"macroTask"==hasTaskState.change&&(zone.hasPendingMacrotasks=hasTaskState.macroTask))},onHandleError:(delegate,current,target,error)=>(delegate.handleError(target,error),zone.runOutsideAngular(()=>zone.onError.emit(error)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!NgZone.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(NgZone.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(fn,applyThis,applyArgs){return this._inner.run(fn,applyThis,applyArgs)}runTask(fn,applyThis,applyArgs,name){const zone=this._inner,task=zone.scheduleEventTask("NgZoneEvent: "+name,fn,EMPTY_PAYLOAD,noop$1,noop$1);try{return zone.runTask(task,applyThis,applyArgs)}finally{zone.cancelTask(task)}}runGuarded(fn,applyThis,applyArgs){return this._inner.runGuarded(fn,applyThis,applyArgs)}runOutsideAngular(fn){return this._outer.run(fn)}}function noop$1(){}const EMPTY_PAYLOAD={};function checkStable(zone){if(0==zone._nesting&&!zone.hasPendingMicrotasks&&!zone.isStable)try{zone._nesting++,zone.onMicrotaskEmpty.emit(null)}finally{if(zone._nesting--,!zone.hasPendingMicrotasks)try{zone.runOutsideAngular(()=>zone.onStable.emit(null))}finally{zone.isStable=!0}}}function updateMicroTaskStatus(zone){zone.hasPendingMicrotasks=!!(zone._hasPendingMicrotasks||zone.shouldCoalesceEventChangeDetection&&-1!==zone.lastRequestAnimationFrameId)}function onEnter(zone){zone._nesting++,zone.isStable&&(zone.isStable=!1,zone.onUnstable.emit(null))}function onLeave(zone){zone._nesting--,checkStable(zone)}class NoopNgZone{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new core_EventEmitter,this.onMicrotaskEmpty=new core_EventEmitter,this.onStable=new core_EventEmitter,this.onError=new core_EventEmitter}run(fn,applyThis,applyArgs){return fn.apply(applyThis,applyArgs)}runGuarded(fn,applyThis,applyArgs){return fn.apply(applyThis,applyArgs)}runOutsideAngular(fn){return fn()}runTask(fn,applyThis,applyArgs,name){return fn.apply(applyThis,applyArgs)}}let Testability=(()=>{class Testability{constructor(_ngZone){this._ngZone=_ngZone,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),_ngZone.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{NgZone.assertNotInAngularZone(),scheduleMicroTask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())scheduleMicroTask(()=>{for(;0!==this._callbacks.length;){let cb=this._callbacks.pop();clearTimeout(cb.timeoutId),cb.doneCb(this._didWork)}this._didWork=!1});else{let pending=this.getPendingTasks();this._callbacks=this._callbacks.filter(cb=>!cb.updateCb||!cb.updateCb(pending)||(clearTimeout(cb.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(cb,timeout,updateCb){let timeoutId=-1;timeout&&timeout>0&&(timeoutId=setTimeout(()=>{this._callbacks=this._callbacks.filter(cb=>cb.timeoutId!==timeoutId),cb(this._didWork,this.getPendingTasks())},timeout)),this._callbacks.push({doneCb:cb,timeoutId:timeoutId,updateCb:updateCb})}whenStable(doneCb,timeout,updateCb){if(updateCb&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(doneCb,timeout,updateCb),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(using,provider,exactMatch){return[]}}return Testability.fac=function(t){return new(t||Testability)(inject(NgZone))},Testability.prov=defineInjectable({token:Testability,factory:Testability.fac}),Testability})(),TestabilityRegistry=(()=>{class TestabilityRegistry{constructor(){this._applications=new Map,_testabilityGetter.addToWindow(this)}registerApplication(token,testability){this._applications.set(token,testability)}unregisterApplication(token){this._applications.delete(token)}unregisterAllApplications(){this._applications.clear()}getTestability(elem){return this._applications.get(elem)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(elem,findInAncestors=!0){return _testabilityGetter.findTestabilityInTree(this,elem,findInAncestors)}}return TestabilityRegistry.fac=function(t){return new(t||TestabilityRegistry)},TestabilityRegistry.prov=defineInjectable({token:TestabilityRegistry,factory:TestabilityRegistry.fac}),TestabilityRegistry})();class _NoopGetTestability{addToWindow(registry){}findTestabilityInTree(registry,elem,findInAncestors){return null}}let _platform,_testabilityGetter=new _NoopGetTestability,compileNgModuleFactory=function(injector,options,moduleType){const compilerOptions=injector.get(COMPILER_OPTIONS,[]).concat(options),moduleFactory=new NgModuleFactory$1(moduleType);if(0===componentResourceResolutionQueue.size)return Promise.resolve(moduleFactory);const compilerProviders=function(parts){const result=[];return parts.forEach(part=>part&&result.push(...part)),result}(compilerOptions.map(o=>o.providers));if(0===compilerProviders.length)return Promise.resolve(moduleFactory);const compiler=function(){const globalNg=_global.ng;if(!globalNg||!globalNg.compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return globalNg.compilerFacade}(),resourceLoader=Injector.create({providers:compilerProviders}).get(compiler.ResourceLoader);return function(resourceResolver){const componentResolved=[],urlMap=new Map;function cachedResourceResolve(url){let promise=urlMap.get(url);if(!promise){const resp=(url=>Promise.resolve(resourceLoader.get(url)))(url);urlMap.set(url,promise=resp.then(unwrapResponse))}return promise}return componentResourceResolutionQueue.forEach((component,type)=>{const promises=[];component.templateUrl&&promises.push(cachedResourceResolve(component.templateUrl).then(template=>{component.template=template}));const styleUrls=component.styleUrls,styles=component.styles||(component.styles=[]),styleOffset=component.styles.length;styleUrls&&styleUrls.forEach((styleUrl,index)=>{styles.push(""),promises.push(cachedResourceResolve(styleUrl).then(style=>{styles[styleOffset+index]=style,styleUrls.splice(styleUrls.indexOf(styleUrl),1),0==styleUrls.length&&(component.styleUrls=void 0)}))});const fullyResolved=Promise.all(promises).then(()=>function(type){componentDefPendingResolution.delete(type)}(type));componentResolved.push(fullyResolved)}),componentResourceResolutionQueue=new Map,Promise.all(componentResolved).then(()=>{})}().then(()=>moduleFactory)};const ALLOW_MULTIPLE_PLATFORMS=new InjectionToken("AllowMultipleToken");class NgProbeToken{constructor(name,token){this.name=name,this.token=token}}function createPlatformFactory(parentPlatformFactory,name,providers=[]){const desc="Platform: "+name,marker=new InjectionToken(desc);return(extraProviders=[])=>{let platform=getPlatform();if(!platform||platform.injector.get(ALLOW_MULTIPLE_PLATFORMS,!1))if(parentPlatformFactory)parentPlatformFactory(providers.concat(extraProviders).concat({provide:marker,useValue:!0}));else{const injectedProviders=providers.concat(extraProviders).concat({provide:marker,useValue:!0},{provide:INJECTOR_SCOPE,useValue:"platform"});!function(injector){if(_platform&&!_platform.destroyed&&!_platform.injector.get(ALLOW_MULTIPLE_PLATFORMS,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");_platform=injector.get(PlatformRef);const inits=injector.get(PLATFORM_INITIALIZER,null);inits&&inits.forEach(init=>init())}(Injector.create({providers:injectedProviders,name:desc}))}return function(requiredToken){const platform=getPlatform();if(!platform)throw new Error("No platform exists!");if(!platform.injector.get(requiredToken,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return platform}(marker)}}function getPlatform(){return _platform&&!_platform.destroyed?_platform:null}let PlatformRef=(()=>{class PlatformRef{constructor(_injector){this._injector=_injector,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(moduleFactory,options){const ngZone=function(ngZoneOption,ngZoneEventCoalescing){let ngZone;return ngZone="noop"===ngZoneOption?new NoopNgZone:("zone.js"===ngZoneOption?void 0:ngZoneOption)||new NgZone({enableLongStackTrace:isDevMode(),shouldCoalesceEventChangeDetection:ngZoneEventCoalescing}),ngZone}(options?options.ngZone:void 0,options&&options.ngZoneEventCoalescing||!1),providers=[{provide:NgZone,useValue:ngZone}];return ngZone.run(()=>{const ngZoneInjector=Injector.create({providers:providers,parent:this.injector,name:moduleFactory.moduleType.name}),moduleRef=moduleFactory.create(ngZoneInjector),exceptionHandler=moduleRef.injector.get(ErrorHandler,null);if(!exceptionHandler)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return moduleRef.onDestroy(()=>remove(this._modules,moduleRef)),ngZone.runOutsideAngular(()=>ngZone.onError.subscribe({next:error=>{exceptionHandler.handleError(error)}})),function(errorHandler,ngZone,callback){try{const result=callback();return core_isPromise(result)?result.catch(e=>{throw ngZone.runOutsideAngular(()=>errorHandler.handleError(e)),e}):result}catch(e){throw ngZone.runOutsideAngular(()=>errorHandler.handleError(e)),e}}(exceptionHandler,ngZone,()=>{const initStatus=moduleRef.injector.get(ApplicationInitStatus);return initStatus.runInitializers(),initStatus.donePromise.then(()=>(setLocaleId(moduleRef.injector.get(LOCALE_ID$1,"en-US")||"en-US"),this._moduleDoBootstrap(moduleRef),moduleRef))})})}bootstrapModule(moduleType,compilerOptions=[]){const options=optionsReducer({},compilerOptions);return compileNgModuleFactory(this.injector,options,moduleType).then(moduleFactory=>this.bootstrapModuleFactory(moduleFactory,options))}_moduleDoBootstrap(moduleRef){const appRef=moduleRef.injector.get(core_ApplicationRef);if(moduleRef._bootstrapComponents.length>0)moduleRef._bootstrapComponents.forEach(f=>appRef.bootstrap(f));else{if(!moduleRef.instance.ngDoBootstrap)throw new Error(`The module ${stringify(moduleRef.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);moduleRef.instance.ngDoBootstrap(appRef)}this._modules.push(moduleRef)}onDestroy(callback){this._destroyListeners.push(callback)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(module=>module.destroy()),this._destroyListeners.forEach(listener=>listener()),this._destroyed=!0}get destroyed(){return this._destroyed}}return PlatformRef.fac=function(t){return new(t||PlatformRef)(inject(Injector))},PlatformRef.prov=defineInjectable({token:PlatformRef,factory:PlatformRef.fac}),PlatformRef})();function optionsReducer(dst,objs){return Array.isArray(objs)?objs.reduce(optionsReducer,dst):Object.assign(Object.assign({},dst),objs)}let core_ApplicationRef=(()=>{class ApplicationRef{constructor(_zone,_console,_injector,_exceptionHandler,_componentFactoryResolver,_initStatus){this._zone=_zone,this._console=_console,this._injector=_injector,this._exceptionHandler=_exceptionHandler,this._componentFactoryResolver=_componentFactoryResolver,this._initStatus=_initStatus,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=isDevMode(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const isCurrentlyStable=new Observable_Observable(observer=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{observer.next(this._stable),observer.complete()})}),isStable=new Observable_Observable(observer=>{let stableSub;this._zone.runOutsideAngular(()=>{stableSub=this._zone.onStable.subscribe(()=>{NgZone.assertNotInAngularZone(),scheduleMicroTask(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,observer.next(!0))})})});const unstableSub=this._zone.onUnstable.subscribe(()=>{NgZone.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{observer.next(!1)}))});return()=>{stableSub.unsubscribe(),unstableSub.unsubscribe()}});this.isStable=merge(isCurrentlyStable,isStable.pipe(share()))}bootstrap(componentOrFactory,rootSelectorOrNode){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let componentFactory;componentFactory=componentOrFactory instanceof ComponentFactory?componentOrFactory:this._componentFactoryResolver.resolveComponentFactory(componentOrFactory),this.componentTypes.push(componentFactory.componentType);const ngModule=componentFactory.isBoundToModule?void 0:this._injector.get(NgModuleRef),compRef=componentFactory.create(Injector.NULL,[],rootSelectorOrNode||componentFactory.selector,ngModule);compRef.onDestroy(()=>{this._unloadComponent(compRef)});const testability=compRef.injector.get(Testability,null);return testability&&compRef.injector.get(TestabilityRegistry).registerApplication(compRef.location.nativeElement,testability),this._loadComponent(compRef),isDevMode()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),compRef}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let view of this._views)view.detectChanges();if(this._enforceNoNewChanges)for(let view of this._views)view.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(viewRef){const view=viewRef;this._views.push(view),view.attachToAppRef(this)}detachView(viewRef){const view=viewRef;remove(this._views,view),view.detachFromAppRef()}_loadComponent(componentRef){this.attachView(componentRef.hostView),this.tick(),this.components.push(componentRef),this._injector.get(APP_BOOTSTRAP_LISTENER,[]).concat(this._bootstrapListeners).forEach(listener=>listener(componentRef))}_unloadComponent(componentRef){this.detachView(componentRef.hostView),remove(this.components,componentRef)}ngOnDestroy(){this._views.slice().forEach(view=>view.destroy())}get viewCount(){return this._views.length}}return ApplicationRef.fac=function(t){return new(t||ApplicationRef)(inject(NgZone),inject(Console),inject(Injector),inject(ErrorHandler),inject(ComponentFactoryResolver),inject(ApplicationInitStatus))},ApplicationRef.prov=defineInjectable({token:ApplicationRef,factory:ApplicationRef.fac}),ApplicationRef})();function remove(list,el){const index=list.indexOf(el);index>-1&&list.splice(index,1)}class NgModuleFactoryLoader{}class SystemJsNgModuleLoaderConfig{}const DEFAULT_CONFIG={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let SystemJsNgModuleLoader=(()=>{class SystemJsNgModuleLoader{constructor(_compiler,config){this._compiler=_compiler,this._config=config||DEFAULT_CONFIG}load(path){return this.loadAndCompile(path)}loadAndCompile(path){let[module,exportName]=path.split("#");return void 0===exportName&&(exportName="default"),__webpack_require__("zn8P")(module).then(module=>module[exportName]).then(type=>checkNotEmpty(type,module,exportName)).then(type=>this._compiler.compileModuleAsync(type))}loadFactory(path){let[module,exportName]=path.split("#"),factoryClassSuffix="NgFactory";return void 0===exportName&&(exportName="default",factoryClassSuffix=""),__webpack_require__("zn8P")(this._config.factoryPathPrefix+module+this._config.factoryPathSuffix).then(module=>module[exportName+factoryClassSuffix]).then(factory=>checkNotEmpty(factory,module,exportName))}}return SystemJsNgModuleLoader.fac=function(t){return new(t||SystemJsNgModuleLoader)(inject(Compiler),inject(SystemJsNgModuleLoaderConfig,8))},SystemJsNgModuleLoader.prov=defineInjectable({token:SystemJsNgModuleLoader,factory:SystemJsNgModuleLoader.fac}),SystemJsNgModuleLoader})();function checkNotEmpty(value,modulePath,exportName){if(!value)throw new Error(`Cannot find '${exportName}' in '${modulePath}'`);return value}const platformCore=createPlatformFactory(null,"core",[{provide:PLATFORM_ID,useValue:"unknown"},{provide:PlatformRef,deps:[Injector]},{provide:TestabilityRegistry,deps:[]},{provide:Console,deps:[]}]),APPLICATION_MODULE_PROVIDERS=[{provide:core_ApplicationRef,useClass:core_ApplicationRef,deps:[NgZone,Console,Injector,ErrorHandler,ComponentFactoryResolver,ApplicationInitStatus]},{provide:SCHEDULER,deps:[NgZone],useFactory:function(ngZone){let queue=[];return ngZone.onStable.subscribe(()=>{for(;queue.length;)queue.pop()()}),function(fn){queue.push(fn)}}},{provide:ApplicationInitStatus,useClass:ApplicationInitStatus,deps:[[new Optional,APP_INITIALIZER]]},{provide:Compiler,useClass:Compiler,deps:[]},APP_ID_RANDOM_PROVIDER,{provide:IterableDiffers,useFactory:function(){return defaultIterableDiffers},deps:[]},{provide:KeyValueDiffers,useFactory:function(){return defaultKeyValueDiffers},deps:[]},{provide:LOCALE_ID$1,useFactory:function(locale){return setLocaleId(locale=locale||"undefined"!=typeof $localize&&$localize.locale||"en-US"),locale},deps:[[new Inject(LOCALE_ID$1),new Optional,new SkipSelf]]},{provide:DEFAULT_CURRENCY_CODE,useValue:"USD"}];let ApplicationModule=(()=>{class ApplicationModule{constructor(appRef){}}return ApplicationModule.mod=defineNgModule({type:ApplicationModule}),ApplicationModule.inj=defineInjector({factory:function(t){return new(t||ApplicationModule)(inject(core_ApplicationRef))},providers:APPLICATION_MODULE_PROVIDERS}),ApplicationModule})(),_DOM=null;function getDOM(){return _DOM}const common_DOCUMENT=new InjectionToken("DocumentToken");let common_PlatformLocation=(()=>{class PlatformLocation{}return PlatformLocation.fac=function(t){return new(t||PlatformLocation)},PlatformLocation.prov=defineInjectable({factory:useBrowserPlatformLocation,token:PlatformLocation,providedIn:"platform"}),PlatformLocation})();function useBrowserPlatformLocation(){return inject(common_BrowserPlatformLocation)}const LOCATION_INITIALIZED=new InjectionToken("Location Initialized");let common_BrowserPlatformLocation=(()=>{class BrowserPlatformLocation extends common_PlatformLocation{constructor(_doc){super(),this._doc=_doc,this._init()}_init(){this.location=getDOM().getLocation(),this._history=getDOM().getHistory()}getBaseHrefFromDOM(){return getDOM().getBaseHref(this._doc)}onPopState(fn){getDOM().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",fn,!1)}onHashChange(fn){getDOM().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",fn,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(newPath){this.location.pathname=newPath}pushState(state,title,url){supportsState()?this._history.pushState(state,title,url):this.location.hash=url}replaceState(state,title,url){supportsState()?this._history.replaceState(state,title,url):this.location.hash=url}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return BrowserPlatformLocation.fac=function(t){return new(t||BrowserPlatformLocation)(inject(common_DOCUMENT))},BrowserPlatformLocation.prov=defineInjectable({factory:createBrowserPlatformLocation,token:BrowserPlatformLocation,providedIn:"platform"}),BrowserPlatformLocation})();function supportsState(){return!!window.history.pushState}function createBrowserPlatformLocation(){return new common_BrowserPlatformLocation(inject(common_DOCUMENT))}function joinWithSlash(start,end){if(0==start.length)return end;if(0==end.length)return start;let slashes=0;return start.endsWith("/")&&slashes++,end.startsWith("/")&&slashes++,2==slashes?start+end.substring(1):1==slashes?start+end:start+"/"+end}function stripTrailingSlash(url){const match=url.match(/#|\?|$/),pathEndIdx=match&&match.index||url.length;return url.slice(0,pathEndIdx-("/"===url[pathEndIdx-1]?1:0))+url.slice(pathEndIdx)}function normalizeQueryParams(params){return params&&"?"!==params[0]?"?"+params:params}let common_LocationStrategy=(()=>{class LocationStrategy{}return LocationStrategy.fac=function(t){return new(t||LocationStrategy)},LocationStrategy.prov=defineInjectable({factory:provideLocationStrategy,token:LocationStrategy,providedIn:"root"}),LocationStrategy})();function provideLocationStrategy(platformLocation){const location=inject(common_DOCUMENT).location;return new common_PathLocationStrategy(inject(common_PlatformLocation),location&&location.origin||"")}const APP_BASE_HREF=new InjectionToken("appBaseHref");let common_PathLocationStrategy=(()=>{class PathLocationStrategy extends common_LocationStrategy{constructor(_platformLocation,href){if(super(),this._platformLocation=_platformLocation,null==href&&(href=this._platformLocation.getBaseHrefFromDOM()),null==href)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=href}onPopState(fn){this._platformLocation.onPopState(fn),this._platformLocation.onHashChange(fn)}getBaseHref(){return this._baseHref}prepareExternalUrl(internal){return joinWithSlash(this._baseHref,internal)}path(includeHash=!1){const pathname=this._platformLocation.pathname+normalizeQueryParams(this._platformLocation.search),hash=this._platformLocation.hash;return hash&&includeHash?`${pathname}${hash}`:pathname}pushState(state,title,url,queryParams){const externalUrl=this.prepareExternalUrl(url+normalizeQueryParams(queryParams));this._platformLocation.pushState(state,title,externalUrl)}replaceState(state,title,url,queryParams){const externalUrl=this.prepareExternalUrl(url+normalizeQueryParams(queryParams));this._platformLocation.replaceState(state,title,externalUrl)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return PathLocationStrategy.fac=function(t){return new(t||PathLocationStrategy)(inject(common_PlatformLocation),inject(APP_BASE_HREF,8))},PathLocationStrategy.prov=defineInjectable({token:PathLocationStrategy,factory:PathLocationStrategy.fac}),PathLocationStrategy})(),common_HashLocationStrategy=(()=>{class HashLocationStrategy extends common_LocationStrategy{constructor(_platformLocation,_baseHref){super(),this._platformLocation=_platformLocation,this._baseHref="",null!=_baseHref&&(this._baseHref=_baseHref)}onPopState(fn){this._platformLocation.onPopState(fn),this._platformLocation.onHashChange(fn)}getBaseHref(){return this._baseHref}path(includeHash=!1){let path=this._platformLocation.hash;return null==path&&(path="#"),path.length>0?path.substring(1):path}prepareExternalUrl(internal){const url=joinWithSlash(this._baseHref,internal);return url.length>0?"#"+url:url}pushState(state,title,path,queryParams){let url=this.prepareExternalUrl(path+normalizeQueryParams(queryParams));0==url.length&&(url=this._platformLocation.pathname),this._platformLocation.pushState(state,title,url)}replaceState(state,title,path,queryParams){let url=this.prepareExternalUrl(path+normalizeQueryParams(queryParams));0==url.length&&(url=this._platformLocation.pathname),this._platformLocation.replaceState(state,title,url)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return HashLocationStrategy.fac=function(t){return new(t||HashLocationStrategy)(inject(common_PlatformLocation),inject(APP_BASE_HREF,8))},HashLocationStrategy.prov=defineInjectable({token:HashLocationStrategy,factory:HashLocationStrategy.fac}),HashLocationStrategy})(),common_Location=(()=>{class Location{constructor(platformStrategy,platformLocation){this._subject=new core_EventEmitter,this._urlChangeListeners=[],this._platformStrategy=platformStrategy;const browserBaseHref=this._platformStrategy.getBaseHref();this._platformLocation=platformLocation,this._baseHref=stripTrailingSlash(_stripIndexHtml(browserBaseHref)),this._platformStrategy.onPopState(ev=>{this._subject.emit({url:this.path(!0),pop:!0,state:ev.state,type:ev.type})})}path(includeHash=!1){return this.normalize(this._platformStrategy.path(includeHash))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(path,query=""){return this.path()==this.normalize(path+normalizeQueryParams(query))}normalize(url){return Location.stripTrailingSlash(function(baseHref,url){return baseHref&&url.startsWith(baseHref)?url.substring(baseHref.length):url}(this._baseHref,_stripIndexHtml(url)))}prepareExternalUrl(url){return url&&"/"!==url[0]&&(url="/"+url),this._platformStrategy.prepareExternalUrl(url)}go(path,query="",state=null){this._platformStrategy.pushState(state,"",path,query),this._notifyUrlChangeListeners(this.prepareExternalUrl(path+normalizeQueryParams(query)),state)}replaceState(path,query="",state=null){this._platformStrategy.replaceState(state,"",path,query),this._notifyUrlChangeListeners(this.prepareExternalUrl(path+normalizeQueryParams(query)),state)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(fn){this._urlChangeListeners.push(fn),this.subscribe(v=>{this._notifyUrlChangeListeners(v.url,v.state)})}_notifyUrlChangeListeners(url="",state){this._urlChangeListeners.forEach(fn=>fn(url,state))}subscribe(onNext,onThrow,onReturn){return this._subject.subscribe({next:onNext,error:onThrow,complete:onReturn})}}return Location.fac=function(t){return new(t||Location)(inject(common_LocationStrategy),inject(common_PlatformLocation))},Location.normalizeQueryParams=normalizeQueryParams,Location.joinWithSlash=joinWithSlash,Location.stripTrailingSlash=stripTrailingSlash,Location.prov=defineInjectable({factory:createLocation,token:Location,providedIn:"root"}),Location})();function createLocation(){return new common_Location(inject(common_LocationStrategy),inject(common_PlatformLocation))}function _stripIndexHtml(url){return url.replace(/\/index.html$/,"")}const Plural=function(){var Plural={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return Plural[Plural.Zero]="Zero",Plural[Plural.One]="One",Plural[Plural.Two]="Two",Plural[Plural.Few]="Few",Plural[Plural.Many]="Many",Plural[Plural.Other]="Other",Plural}();class NgLocalization{}let common_NgLocaleLocalization=(()=>{class NgLocaleLocalization extends NgLocalization{constructor(locale){super(),this.locale=locale}getPluralCategory(value,locale){switch(function(locale){return function(locale){const normalizedLocale=function(locale){return locale.toLowerCase().replace(/_/g,"-")}(locale);let match=getLocaleData(normalizedLocale);if(match)return match;const parentLocale=normalizedLocale.split("-")[0];if(match=getLocaleData(parentLocale),match)return match;if("en"===parentLocale)return localeEn;throw new Error(`Missing locale data for the locale "${locale}".`)}(locale)[LocaleDataIndex.PluralCase]}(locale||this.locale)(value)){case Plural.Zero:return"zero";case Plural.One:return"one";case Plural.Two:return"two";case Plural.Few:return"few";case Plural.Many:return"many";default:return"other"}}}return NgLocaleLocalization.fac=function(t){return new(t||NgLocaleLocalization)(inject(LOCALE_ID$1))},NgLocaleLocalization.prov=defineInjectable({token:NgLocaleLocalization,factory:NgLocaleLocalization.fac}),NgLocaleLocalization})(),common_NgClass=(()=>{class NgClass{constructor(_iterableDiffers,_keyValueDiffers,_ngEl,_renderer){this._iterableDiffers=_iterableDiffers,this._keyValueDiffers=_keyValueDiffers,this._ngEl=_ngEl,this._renderer=_renderer,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(value){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof value?value.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(value){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof value?value.split(/\s+/):value,this._rawClass&&(isListLikeIterable$1(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const iterableChanges=this._iterableDiffer.diff(this._rawClass);iterableChanges&&this._applyIterableChanges(iterableChanges)}else if(this._keyValueDiffer){const keyValueChanges=this._keyValueDiffer.diff(this._rawClass);keyValueChanges&&this._applyKeyValueChanges(keyValueChanges)}}_applyKeyValueChanges(changes){changes.forEachAddedItem(record=>this._toggleClass(record.key,record.currentValue)),changes.forEachChangedItem(record=>this._toggleClass(record.key,record.currentValue)),changes.forEachRemovedItem(record=>{record.previousValue&&this._toggleClass(record.key,!1)})}_applyIterableChanges(changes){changes.forEachAddedItem(record=>{if("string"!=typeof record.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+stringify(record.item));this._toggleClass(record.item,!0)}),changes.forEachRemovedItem(record=>this._toggleClass(record.item,!1))}_applyClasses(rawClassVal){rawClassVal&&(Array.isArray(rawClassVal)||rawClassVal instanceof Set?rawClassVal.forEach(klass=>this._toggleClass(klass,!0)):Object.keys(rawClassVal).forEach(klass=>this._toggleClass(klass,!!rawClassVal[klass])))}_removeClasses(rawClassVal){rawClassVal&&(Array.isArray(rawClassVal)||rawClassVal instanceof Set?rawClassVal.forEach(klass=>this._toggleClass(klass,!1)):Object.keys(rawClassVal).forEach(klass=>this._toggleClass(klass,!1)))}_toggleClass(klass,enabled){(klass=klass.trim())&&klass.split(/\s+/g).forEach(klass=>{enabled?this._renderer.addClass(this._ngEl.nativeElement,klass):this._renderer.removeClass(this._ngEl.nativeElement,klass)})}}return NgClass.fac=function(t){return new(t||NgClass)(directiveInject(IterableDiffers),directiveInject(KeyValueDiffers),directiveInject(ElementRef),directiveInject(Renderer2))},NgClass.dir=defineDirective({type:NgClass,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),NgClass})();class NgForOfContext{constructor($implicit,ngForOf,index,count){this.$implicit=$implicit,this.ngForOf=ngForOf,this.index=index,this.count=count}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let common_NgForOf=(()=>{class NgForOf{constructor(_viewContainer,_template,_differs){this._viewContainer=_viewContainer,this._template=_template,this._differs=_differs,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(ngForOf){this._ngForOf=ngForOf,this._ngForOfDirty=!0}set ngForTrackBy(fn){isDevMode()&&null!=fn&&"function"!=typeof fn&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(fn)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=fn}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(value){value&&(this._template=value)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const value=this._ngForOf;if(!this._differ&&value)try{this._differ=this._differs.find(value).create(this.ngForTrackBy)}catch(_a){throw new Error(`Cannot find a differ supporting object '${value}' of type '${type=value,type.name||typeof type}'. NgFor only supports binding to Iterables such as Arrays.`)}}var type;if(this._differ){const changes=this._differ.diff(this._ngForOf);changes&&this._applyChanges(changes)}}_applyChanges(changes){const insertTuples=[];changes.forEachOperation((item,adjustedPreviousIndex,currentIndex)=>{if(null==item.previousIndex){const view=this._viewContainer.createEmbeddedView(this._template,new NgForOfContext(null,this._ngForOf,-1,-1),null===currentIndex?void 0:currentIndex),tuple=new RecordViewTuple(item,view);insertTuples.push(tuple)}else if(null==currentIndex)this._viewContainer.remove(null===adjustedPreviousIndex?void 0:adjustedPreviousIndex);else if(null!==adjustedPreviousIndex){const view=this._viewContainer.get(adjustedPreviousIndex);this._viewContainer.move(view,currentIndex);const tuple=new RecordViewTuple(item,view);insertTuples.push(tuple)}});for(let i=0;i<insertTuples.length;i++)this._perViewChange(insertTuples[i].view,insertTuples[i].record);for(let i=0,ilen=this._viewContainer.length;i<ilen;i++){const viewRef=this._viewContainer.get(i);viewRef.context.index=i,viewRef.context.count=ilen,viewRef.context.ngForOf=this._ngForOf}changes.forEachIdentityChange(record=>{this._viewContainer.get(record.currentIndex).context.$implicit=record.item})}_perViewChange(view,record){view.context.$implicit=record.item}static ngTemplateContextGuard(dir,ctx){return!0}}return NgForOf.fac=function(t){return new(t||NgForOf)(directiveInject(ViewContainerRef),directiveInject(TemplateRef),directiveInject(IterableDiffers))},NgForOf.dir=defineDirective({type:NgForOf,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),NgForOf})();class RecordViewTuple{constructor(record,view){this.record=record,this.view=view}}let common_NgIf=(()=>{class NgIf{constructor(_viewContainer,templateRef){this._viewContainer=_viewContainer,this._context=new NgIfContext,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=templateRef}set ngIf(condition){this._context.$implicit=this._context.ngIf=condition,this._updateView()}set ngIfThen(templateRef){assertTemplate("ngIfThen",templateRef),this._thenTemplateRef=templateRef,this._thenViewRef=null,this._updateView()}set ngIfElse(templateRef){assertTemplate("ngIfElse",templateRef),this._elseTemplateRef=templateRef,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(dir,ctx){return!0}}return NgIf.fac=function(t){return new(t||NgIf)(directiveInject(ViewContainerRef),directiveInject(TemplateRef))},NgIf.dir=defineDirective({type:NgIf,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),NgIf})();class NgIfContext{constructor(){this.$implicit=null,this.ngIf=null}}function assertTemplate(property,templateRef){if(templateRef&&!templateRef.createEmbeddedView)throw new Error(`${property} must be a TemplateRef, but received '${stringify(templateRef)}'.`)}class SwitchView{constructor(_viewContainerRef,_templateRef){this._viewContainerRef=_viewContainerRef,this._templateRef=_templateRef,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(created){created&&!this._created?this.create():!created&&this._created&&this.destroy()}}let common_NgSwitch=(()=>{class NgSwitch{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(newValue){this._ngSwitch=newValue,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(view){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(view)}_matchCase(value){const matched=value==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||matched,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),matched}_updateDefaultCases(useDefault){if(this._defaultViews&&useDefault!==this._defaultUsed){this._defaultUsed=useDefault;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(useDefault)}}}return NgSwitch.fac=function(t){return new(t||NgSwitch)},NgSwitch.dir=defineDirective({type:NgSwitch,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),NgSwitch})(),common_NgSwitchCase=(()=>{class NgSwitchCase{constructor(viewContainer,templateRef,ngSwitch){this.ngSwitch=ngSwitch,ngSwitch._addCase(),this._view=new SwitchView(viewContainer,templateRef)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return NgSwitchCase.fac=function(t){return new(t||NgSwitchCase)(directiveInject(ViewContainerRef),directiveInject(TemplateRef),directiveInject(common_NgSwitch,1))},NgSwitchCase.dir=defineDirective({type:NgSwitchCase,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),NgSwitchCase})(),common_NgSwitchDefault=(()=>{class NgSwitchDefault{constructor(viewContainer,templateRef,ngSwitch){ngSwitch._addDefault(new SwitchView(viewContainer,templateRef))}}return NgSwitchDefault.fac=function(t){return new(t||NgSwitchDefault)(directiveInject(ViewContainerRef),directiveInject(TemplateRef),directiveInject(common_NgSwitch,1))},NgSwitchDefault.dir=defineDirective({type:NgSwitchDefault,selectors:[["","ngSwitchDefault",""]]}),NgSwitchDefault})(),common_NgStyle=(()=>{class NgStyle{constructor(_ngEl,_differs,_renderer){this._ngEl=_ngEl,this._differs=_differs,this._renderer=_renderer,this._ngStyle=null,this._differ=null}set ngStyle(values){this._ngStyle=values,!this._differ&&values&&(this._differ=this._differs.find(values).create())}ngDoCheck(){if(this._differ){const changes=this._differ.diff(this._ngStyle);changes&&this._applyChanges(changes)}}_setStyle(nameAndUnit,value){const[name,unit]=nameAndUnit.split(".");null!=(value=null!=value&&unit?`${value}${unit}`:value)?this._renderer.setStyle(this._ngEl.nativeElement,name,value):this._renderer.removeStyle(this._ngEl.nativeElement,name)}_applyChanges(changes){changes.forEachRemovedItem(record=>this._setStyle(record.key,null)),changes.forEachAddedItem(record=>this._setStyle(record.key,record.currentValue)),changes.forEachChangedItem(record=>this._setStyle(record.key,record.currentValue))}}return NgStyle.fac=function(t){return new(t||NgStyle)(directiveInject(ElementRef),directiveInject(KeyValueDiffers),directiveInject(Renderer2))},NgStyle.dir=defineDirective({type:NgStyle,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),NgStyle})(),common_NgTemplateOutlet=(()=>{class NgTemplateOutlet{constructor(_viewContainerRef){this._viewContainerRef=_viewContainerRef,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(changes){if(this._shouldRecreateView(changes)){const viewContainerRef=this._viewContainerRef;this._viewRef&&viewContainerRef.remove(viewContainerRef.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)}_shouldRecreateView(changes){const ctxChange=changes.ngTemplateOutletContext;return!!changes.ngTemplateOutlet||ctxChange&&this._hasContextShapeChanged(ctxChange)}_hasContextShapeChanged(ctxChange){const prevCtxKeys=Object.keys(ctxChange.previousValue||{}),currCtxKeys=Object.keys(ctxChange.currentValue||{});if(prevCtxKeys.length===currCtxKeys.length){for(let propName of currCtxKeys)if(-1===prevCtxKeys.indexOf(propName))return!0;return!1}return!0}_updateExistingContext(ctx){for(let propName of Object.keys(ctx))this._viewRef.context[propName]=this.ngTemplateOutletContext[propName]}}return NgTemplateOutlet.fac=function(t){return new(t||NgTemplateOutlet)(directiveInject(ViewContainerRef))},NgTemplateOutlet.dir=defineDirective({type:NgTemplateOutlet,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[NgOnChangesFeature]}),NgTemplateOutlet})(),common_CommonModule=(()=>{class CommonModule{}return CommonModule.mod=defineNgModule({type:CommonModule}),CommonModule.inj=defineInjector({factory:function(t){return new(t||CommonModule)},providers:[{provide:NgLocalization,useClass:common_NgLocaleLocalization}]}),CommonModule})(),common_ViewportScroller=(()=>{class ViewportScroller{}return ViewportScroller.prov=defineInjectable({token:ViewportScroller,providedIn:"root",factory:()=>new BrowserViewportScroller(inject(common_DOCUMENT),window,inject(ErrorHandler))}),ViewportScroller})();class BrowserViewportScroller{constructor(document,window,errorHandler){this.document=document,this.window=window,this.errorHandler=errorHandler,this.offset=()=>[0,0]}setOffset(offset){this.offset=Array.isArray(offset)?()=>offset:offset}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(position){this.supportScrollRestoration()&&this.window.scrollTo(position[0],position[1])}scrollToAnchor(anchor){if(this.supportScrollRestoration()){anchor=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(anchor):anchor.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const elSelectedById=this.document.querySelector("#"+anchor);if(elSelectedById)return void this.scrollToElement(elSelectedById);const elSelectedByName=this.document.querySelector(`[name='${anchor}']`);if(elSelectedByName)return void this.scrollToElement(elSelectedByName)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(scrollRestoration){if(this.supportScrollRestoration()){const history=this.window.history;history&&history.scrollRestoration&&(history.scrollRestoration=scrollRestoration)}}scrollToElement(el){const rect=el.getBoundingClientRect(),left=rect.left+this.window.pageXOffset,top=rect.top+this.window.pageYOffset,offset=this.offset();this.window.scrollTo(left-offset[0],top-offset[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(_a){return!1}}}class platform_browser_BrowserDomAdapter extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var adapter;adapter=new platform_browser_BrowserDomAdapter,_DOM||(_DOM=adapter)}getProperty(el,name){return el[name]}log(error){window.console&&window.console.log&&window.console.log(error)}logGroup(error){window.console&&window.console.group&&window.console.group(error)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(el,evt,listener){return el.addEventListener(evt,listener,!1),()=>{el.removeEventListener(evt,listener,!1)}}dispatchEvent(el,evt){el.dispatchEvent(evt)}remove(node){return node.parentNode&&node.parentNode.removeChild(node),node}getValue(el){return el.value}createElement(tagName,doc){return(doc=doc||this.getDefaultDocument()).createElement(tagName)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(node){return node.nodeType===Node.ELEMENT_NODE}isShadowRoot(node){return node instanceof DocumentFragment}getGlobalEventTarget(doc,target){return"window"===target?window:"document"===target?doc:"body"===target?doc.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(doc){const href=baseElement||(baseElement=document.querySelector("base"),baseElement)?baseElement.getAttribute("href"):null;return null==href?null:(url=href,urlParsingNode||(urlParsingNode=document.createElement("a")),urlParsingNode.setAttribute("href",url),"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname);var url}resetBaseElement(){baseElement=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(name){return function(cookieStr,name){name=encodeURIComponent(name);for(const cookie of cookieStr.split(";")){const eqIndex=cookie.indexOf("="),[cookieName,cookieValue]=-1==eqIndex?[cookie,""]:[cookie.slice(0,eqIndex),cookie.slice(eqIndex+1)];if(cookieName.trim()===name)return decodeURIComponent(cookieValue)}return null}(document.cookie,name)}}let urlParsingNode,baseElement=null;const TRANSITION_ID=new InjectionToken("TRANSITION_ID"),SERVER_TRANSITION_PROVIDERS=[{provide:APP_INITIALIZER,useFactory:function(transitionId,document,injector){return()=>{injector.get(ApplicationInitStatus).donePromise.then(()=>{const dom=getDOM();Array.prototype.slice.apply(document.querySelectorAll("style[ng-transition]")).filter(el=>el.getAttribute("ng-transition")===transitionId).forEach(el=>dom.remove(el))})}},deps:[TRANSITION_ID,common_DOCUMENT,Injector],multi:!0}];class platform_browser_BrowserGetTestability{static init(){!function(getter){_testabilityGetter=getter}(new platform_browser_BrowserGetTestability)}addToWindow(registry){_global.getAngularTestability=(elem,findInAncestors=!0)=>{const testability=registry.findTestabilityInTree(elem,findInAncestors);if(null==testability)throw new Error("Could not find testability for element.");return testability},_global.getAllAngularTestabilities=()=>registry.getAllTestabilities(),_global.getAllAngularRootElements=()=>registry.getAllRootElements(),_global.frameworkStabilizers||(_global.frameworkStabilizers=[]),_global.frameworkStabilizers.push(callback=>{const testabilities=_global.getAllAngularTestabilities();let count=testabilities.length,didWork=!1;const decrement=function(didWork_){didWork=didWork||didWork_,count--,0==count&&callback(didWork)};testabilities.forEach((function(testability){testability.whenStable(decrement)}))})}findTestabilityInTree(registry,elem,findInAncestors){if(null==elem)return null;const t=registry.getTestability(elem);return null!=t?t:findInAncestors?getDOM().isShadowRoot(elem)?this.findTestabilityInTree(registry,elem.host,!0):this.findTestabilityInTree(registry,elem.parentElement,!0):null}}const EVENT_MANAGER_PLUGINS=new InjectionToken("EventManagerPlugins");let platform_browser_EventManager=(()=>{class EventManager{constructor(plugins,_zone){this._zone=_zone,this._eventNameToPlugin=new Map,plugins.forEach(p=>p.manager=this),this._plugins=plugins.slice().reverse()}addEventListener(element,eventName,handler){return this._findPluginFor(eventName).addEventListener(element,eventName,handler)}addGlobalEventListener(target,eventName,handler){return this._findPluginFor(eventName).addGlobalEventListener(target,eventName,handler)}getZone(){return this._zone}_findPluginFor(eventName){const plugin=this._eventNameToPlugin.get(eventName);if(plugin)return plugin;const plugins=this._plugins;for(let i=0;i<plugins.length;i++){const plugin=plugins[i];if(plugin.supports(eventName))return this._eventNameToPlugin.set(eventName,plugin),plugin}throw new Error("No event manager plugin found for event "+eventName)}}return EventManager.fac=function(t){return new(t||EventManager)(inject(EVENT_MANAGER_PLUGINS),inject(NgZone))},EventManager.prov=defineInjectable({token:EventManager,factory:EventManager.fac}),EventManager})();class platform_browser_EventManagerPlugin{constructor(_doc){this._doc=_doc}addGlobalEventListener(element,eventName,handler){const target=getDOM().getGlobalEventTarget(this._doc,element);if(!target)throw new Error(`Unsupported event target ${target} for event ${eventName}`);return this.addEventListener(target,eventName,handler)}}let platform_browser_SharedStylesHost=(()=>{class SharedStylesHost{constructor(){this._stylesSet=new Set}addStyles(styles){const additions=new Set;styles.forEach(style=>{this._stylesSet.has(style)||(this._stylesSet.add(style),additions.add(style))}),this.onStylesAdded(additions)}onStylesAdded(additions){}getAllStyles(){return Array.from(this._stylesSet)}}return SharedStylesHost.fac=function(t){return new(t||SharedStylesHost)},SharedStylesHost.prov=defineInjectable({token:SharedStylesHost,factory:SharedStylesHost.fac}),SharedStylesHost})(),platform_browser_DomSharedStylesHost=(()=>{class DomSharedStylesHost extends platform_browser_SharedStylesHost{constructor(_doc){super(),this._doc=_doc,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(_doc.head)}_addStylesToHost(styles,host){styles.forEach(style=>{const styleEl=this._doc.createElement("style");styleEl.textContent=style,this._styleNodes.add(host.appendChild(styleEl))})}addHost(hostNode){this._addStylesToHost(this._stylesSet,hostNode),this._hostNodes.add(hostNode)}removeHost(hostNode){this._hostNodes.delete(hostNode)}onStylesAdded(additions){this._hostNodes.forEach(hostNode=>this._addStylesToHost(additions,hostNode))}ngOnDestroy(){this._styleNodes.forEach(styleNode=>getDOM().remove(styleNode))}}return DomSharedStylesHost.fac=function(t){return new(t||DomSharedStylesHost)(inject(common_DOCUMENT))},DomSharedStylesHost.prov=defineInjectable({token:DomSharedStylesHost,factory:DomSharedStylesHost.fac}),DomSharedStylesHost})();const NAMESPACE_URIS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},COMPONENT_REGEX=/%COMP%/g;function flattenStyles(compId,styles,target){for(let i=0;i<styles.length;i++){let style=styles[i];Array.isArray(style)?flattenStyles(compId,style,target):(style=style.replace(COMPONENT_REGEX,compId),target.push(style))}return target}function decoratePreventDefault(eventHandler){return event=>{if("__ngUnwrap__"===event)return eventHandler;!1===eventHandler(event)&&(event.preventDefault(),event.returnValue=!1)}}let platform_browser_DomRendererFactory2=(()=>{class DomRendererFactory2{constructor(eventManager,sharedStylesHost,appId){this.eventManager=eventManager,this.sharedStylesHost=sharedStylesHost,this.appId=appId,this.rendererByCompId=new Map,this.defaultRenderer=new platform_browser_DefaultDomRenderer2(eventManager)}createRenderer(element,type){if(!element||!type)return this.defaultRenderer;switch(type.encapsulation){case ViewEncapsulation$1.Emulated:{let renderer=this.rendererByCompId.get(type.id);return renderer||(renderer=new EmulatedEncapsulationDomRenderer2(this.eventManager,this.sharedStylesHost,type,this.appId),this.rendererByCompId.set(type.id,renderer)),renderer.applyToHost(element),renderer}case ViewEncapsulation$1.Native:case ViewEncapsulation$1.ShadowDom:return new platform_browser_ShadowDomRenderer(this.eventManager,this.sharedStylesHost,element,type);default:if(!this.rendererByCompId.has(type.id)){const styles=flattenStyles(type.id,type.styles,[]);this.sharedStylesHost.addStyles(styles),this.rendererByCompId.set(type.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return DomRendererFactory2.fac=function(t){return new(t||DomRendererFactory2)(inject(platform_browser_EventManager),inject(platform_browser_DomSharedStylesHost),inject(APP_ID))},DomRendererFactory2.prov=defineInjectable({token:DomRendererFactory2,factory:DomRendererFactory2.fac}),DomRendererFactory2})();class platform_browser_DefaultDomRenderer2{constructor(eventManager){this.eventManager=eventManager,this.data=Object.create(null)}destroy(){}createElement(name,namespace){return namespace?document.createElementNS(NAMESPACE_URIS[namespace]||namespace,name):document.createElement(name)}createComment(value){return document.createComment(value)}createText(value){return document.createTextNode(value)}appendChild(parent,newChild){parent.appendChild(newChild)}insertBefore(parent,newChild,refChild){parent&&parent.insertBefore(newChild,refChild)}removeChild(parent,oldChild){parent&&parent.removeChild(oldChild)}selectRootElement(selectorOrNode,preserveContent){let el="string"==typeof selectorOrNode?document.querySelector(selectorOrNode):selectorOrNode;if(!el)throw new Error(`The selector "${selectorOrNode}" did not match any elements`);return preserveContent||(el.textContent=""),el}parentNode(node){return node.parentNode}nextSibling(node){return node.nextSibling}setAttribute(el,name,value,namespace){if(namespace){name=namespace+":"+name;const namespaceUri=NAMESPACE_URIS[namespace];namespaceUri?el.setAttributeNS(namespaceUri,name,value):el.setAttribute(name,value)}else el.setAttribute(name,value)}removeAttribute(el,name,namespace){if(namespace){const namespaceUri=NAMESPACE_URIS[namespace];namespaceUri?el.removeAttributeNS(namespaceUri,name):el.removeAttribute(`${namespace}:${name}`)}else el.removeAttribute(name)}addClass(el,name){el.classList.add(name)}removeClass(el,name){el.classList.remove(name)}setStyle(el,style,value,flags){flags&RendererStyleFlags2.DashCase?el.style.setProperty(style,value,flags&RendererStyleFlags2.Important?"important":""):el.style[style]=value}removeStyle(el,style,flags){flags&RendererStyleFlags2.DashCase?el.style.removeProperty(style):el.style[style]=""}setProperty(el,name,value){el[name]=value}setValue(node,value){node.nodeValue=value}listen(target,event,callback){return"string"==typeof target?this.eventManager.addGlobalEventListener(target,event,decoratePreventDefault(callback)):this.eventManager.addEventListener(target,event,decoratePreventDefault(callback))}}class EmulatedEncapsulationDomRenderer2 extends platform_browser_DefaultDomRenderer2{constructor(eventManager,sharedStylesHost,component,appId){super(eventManager),this.component=component;const styles=flattenStyles(appId+"-"+component.id,component.styles,[]);sharedStylesHost.addStyles(styles),this.contentAttr="_ngcontent-%COMP%".replace(COMPONENT_REGEX,appId+"-"+component.id),this.hostAttr=function(componentShortId){return"_nghost-%COMP%".replace(COMPONENT_REGEX,componentShortId)}(appId+"-"+component.id)}applyToHost(element){super.setAttribute(element,this.hostAttr,"")}createElement(parent,name){const el=super.createElement(parent,name);return super.setAttribute(el,this.contentAttr,""),el}}class platform_browser_ShadowDomRenderer extends platform_browser_DefaultDomRenderer2{constructor(eventManager,sharedStylesHost,hostEl,component){super(eventManager),this.sharedStylesHost=sharedStylesHost,this.hostEl=hostEl,this.component=component,this.shadowRoot=component.encapsulation===ViewEncapsulation$1.ShadowDom?hostEl.attachShadow({mode:"open"}):hostEl.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const styles=flattenStyles(component.id,component.styles,[]);for(let i=0;i<styles.length;i++){const styleEl=document.createElement("style");styleEl.textContent=styles[i],this.shadowRoot.appendChild(styleEl)}}nodeOrShadowRoot(node){return node===this.hostEl?this.shadowRoot:node}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(parent,newChild){return super.appendChild(this.nodeOrShadowRoot(parent),newChild)}insertBefore(parent,newChild,refChild){return super.insertBefore(this.nodeOrShadowRoot(parent),newChild,refChild)}removeChild(parent,oldChild){return super.removeChild(this.nodeOrShadowRoot(parent),oldChild)}parentNode(node){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(node)))}}let platform_browser_DomEventsPlugin=(()=>{class DomEventsPlugin extends platform_browser_EventManagerPlugin{constructor(doc){super(doc)}supports(eventName){return!0}addEventListener(element,eventName,handler){return element.addEventListener(eventName,handler,!1),()=>this.removeEventListener(element,eventName,handler)}removeEventListener(target,eventName,callback){return target.removeEventListener(eventName,callback)}}return DomEventsPlugin.fac=function(t){return new(t||DomEventsPlugin)(inject(common_DOCUMENT))},DomEventsPlugin.prov=defineInjectable({token:DomEventsPlugin,factory:DomEventsPlugin.fac}),DomEventsPlugin})();const MODIFIER_KEYS=["alt","control","meta","shift"],_keyMap={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_chromeNumKeyPadMap={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"},MODIFIER_KEY_GETTERS={alt:event=>event.altKey,control:event=>event.ctrlKey,meta:event=>event.metaKey,shift:event=>event.shiftKey};let platform_browser_KeyEventsPlugin=(()=>{class KeyEventsPlugin extends platform_browser_EventManagerPlugin{constructor(doc){super(doc)}supports(eventName){return null!=KeyEventsPlugin.parseEventName(eventName)}addEventListener(element,eventName,handler){const parsedEvent=KeyEventsPlugin.parseEventName(eventName),outsideHandler=KeyEventsPlugin.eventCallback(parsedEvent.fullKey,handler,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>getDOM().onAndCancel(element,parsedEvent.domEventName,outsideHandler))}static parseEventName(eventName){const parts=eventName.toLowerCase().split("."),domEventName=parts.shift();if(0===parts.length||"keydown"!==domEventName&&"keyup"!==domEventName)return null;const key=KeyEventsPlugin._normalizeKey(parts.pop());let fullKey="";if(MODIFIER_KEYS.forEach(modifierName=>{const index=parts.indexOf(modifierName);index>-1&&(parts.splice(index,1),fullKey+=modifierName+".")}),fullKey+=key,0!=parts.length||0===key.length)return null;const result={};return result.domEventName=domEventName,result.fullKey=fullKey,result}static getEventFullKey(event){let fullKey="",key=function(event){let key=event.key;if(null==key){if(key=event.keyIdentifier,null==key)return"Unidentified";key.startsWith("U+")&&(key=String.fromCharCode(parseInt(key.substring(2),16)),3===event.location&&_chromeNumKeyPadMap.hasOwnProperty(key)&&(key=_chromeNumKeyPadMap[key]))}return _keyMap[key]||key}(event);return key=key.toLowerCase()," "===key?key="space":"."===key&&(key="dot"),MODIFIER_KEYS.forEach(modifierName=>{modifierName!=key&&(0,MODIFIER_KEY_GETTERS[modifierName])(event)&&(fullKey+=modifierName+".")}),fullKey+=key,fullKey}static eventCallback(fullKey,handler,zone){return event=>{KeyEventsPlugin.getEventFullKey(event)===fullKey&&zone.runGuarded(()=>handler(event))}}static _normalizeKey(keyName){switch(keyName){case"esc":return"escape";default:return keyName}}}return KeyEventsPlugin.fac=function(t){return new(t||KeyEventsPlugin)(inject(common_DOCUMENT))},KeyEventsPlugin.prov=defineInjectable({token:KeyEventsPlugin,factory:KeyEventsPlugin.fac}),KeyEventsPlugin})(),platform_browser_DomSanitizer=(()=>{class DomSanitizer{}return DomSanitizer.fac=function(t){return new(t||DomSanitizer)},DomSanitizer.prov=defineInjectable({factory:function(){return inject(platform_browser_DomSanitizerImpl)},token:DomSanitizer,providedIn:"root"}),DomSanitizer})(),platform_browser_DomSanitizerImpl=(()=>{class DomSanitizerImpl extends platform_browser_DomSanitizer{constructor(_doc){super(),this._doc=_doc}sanitize(ctx,value){if(null==value)return null;switch(ctx){case SecurityContext.NONE:return value;case SecurityContext.HTML:return allowSanitizationBypassAndThrow(value,"HTML")?unwrapSafeValue(value):_sanitizeHtml(this._doc,String(value));case SecurityContext.STYLE:return allowSanitizationBypassAndThrow(value,"Style")?unwrapSafeValue(value):function(value){if(!(value=String(value).trim()))return"";const urlMatch=value.match(URL_RE);return urlMatch&&_sanitizeUrl(urlMatch[1])===urlMatch[1]||value.match(SAFE_STYLE_VALUE)&&function(value){let outsideSingle=!0,outsideDouble=!0;for(let i=0;i<value.length;i++){const c=value.charAt(i);"'"===c&&outsideDouble?outsideSingle=!outsideSingle:'"'===c&&outsideSingle&&(outsideDouble=!outsideDouble)}return outsideSingle&&outsideDouble}(value)?value:(isDevMode()&&console.warn(`WARNING: sanitizing unsafe style value ${value} (see http://g.co/ng/security#xss).`),"unsafe")}(value);case SecurityContext.SCRIPT:if(allowSanitizationBypassAndThrow(value,"Script"))return unwrapSafeValue(value);throw new Error("unsafe value used in a script context");case SecurityContext.URL:return getSanitizationBypassType(value),allowSanitizationBypassAndThrow(value,"URL")?unwrapSafeValue(value):_sanitizeUrl(String(value));case SecurityContext.RESOURCE_URL:if(allowSanitizationBypassAndThrow(value,"ResourceURL"))return unwrapSafeValue(value);throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${ctx} (see http://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(value){return new SafeHtmlImpl(value)}bypassSecurityTrustStyle(value){return new SafeStyleImpl(value)}bypassSecurityTrustScript(value){return new SafeScriptImpl(value)}bypassSecurityTrustUrl(value){return new SafeUrlImpl(value)}bypassSecurityTrustResourceUrl(value){return new SafeResourceUrlImpl(value)}}return DomSanitizerImpl.fac=function(t){return new(t||DomSanitizerImpl)(inject(common_DOCUMENT))},DomSanitizerImpl.prov=defineInjectable({factory:function(){return injector=inject(INJECTOR),new platform_browser_DomSanitizerImpl(injector.get(common_DOCUMENT));var injector},token:DomSanitizerImpl,providedIn:"root"}),DomSanitizerImpl})();const platformBrowser=createPlatformFactory(platformCore,"browser",[{provide:PLATFORM_ID,useValue:"browser"},{provide:PLATFORM_INITIALIZER,useValue:function(){platform_browser_BrowserDomAdapter.makeCurrent(),platform_browser_BrowserGetTestability.init()},multi:!0},{provide:common_DOCUMENT,useFactory:function(){return function(document){DOCUMENT=document}(document),document},deps:[]}]),BROWSER_MODULE_PROVIDERS=[[],{provide:INJECTOR_SCOPE,useValue:"root"},{provide:ErrorHandler,useFactory:function(){return new ErrorHandler},deps:[]},{provide:EVENT_MANAGER_PLUGINS,useClass:platform_browser_DomEventsPlugin,multi:!0,deps:[common_DOCUMENT,NgZone,PLATFORM_ID]},{provide:EVENT_MANAGER_PLUGINS,useClass:platform_browser_KeyEventsPlugin,multi:!0,deps:[common_DOCUMENT]},[],{provide:platform_browser_DomRendererFactory2,useClass:platform_browser_DomRendererFactory2,deps:[platform_browser_EventManager,platform_browser_DomSharedStylesHost,APP_ID]},{provide:RendererFactory2,useExisting:platform_browser_DomRendererFactory2},{provide:platform_browser_SharedStylesHost,useExisting:platform_browser_DomSharedStylesHost},{provide:platform_browser_DomSharedStylesHost,useClass:platform_browser_DomSharedStylesHost,deps:[common_DOCUMENT]},{provide:Testability,useClass:Testability,deps:[NgZone]},{provide:platform_browser_EventManager,useClass:platform_browser_EventManager,deps:[EVENT_MANAGER_PLUGINS,NgZone]},[]];let platform_browser_BrowserModule=(()=>{class BrowserModule{constructor(parentModule){if(parentModule)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(params){return{ngModule:BrowserModule,providers:[{provide:APP_ID,useValue:params.appId},{provide:TRANSITION_ID,useExisting:APP_ID},SERVER_TRANSITION_PROVIDERS]}}}return BrowserModule.mod=defineNgModule({type:BrowserModule}),BrowserModule.inj=defineInjector({factory:function(t){return new(t||BrowserModule)(inject(BrowserModule,12))},providers:BROWSER_MODULE_PROVIDERS,imports:[common_CommonModule,ApplicationModule]}),BrowserModule})();function of(...args){let scheduler=args[args.length-1];return isScheduler(scheduler)?(args.pop(),scheduleArray(args,scheduler)):fromArray(args)}"undefined"!=typeof window&&window;class BehaviorSubject_BehaviorSubject extends Subject_Subject{constructor(_value){super(),this._value=_value}get value(){return this.getValue()}_subscribe(subscriber){const subscription=super._subscribe(subscriber);return subscription&&!subscription.closed&&subscriber.next(this._value),subscription}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value}next(value){super.next(this._value=value)}}const EmptyError=(()=>{function EmptyErrorImpl(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return EmptyErrorImpl.prototype=Object.create(Error.prototype),EmptyErrorImpl})(),NONE={};function combineLatest(...observables){let resultSelector=null,scheduler=null;return isScheduler(observables[observables.length-1])&&(scheduler=observables.pop()),"function"==typeof observables[observables.length-1]&&(resultSelector=observables.pop()),1===observables.length&&isArray(observables[0])&&(observables=observables[0]),fromArray(observables,scheduler).lift(new CombineLatestOperator(resultSelector))}class CombineLatestOperator{constructor(resultSelector){this.resultSelector=resultSelector}call(subscriber,source){return source.subscribe(new combineLatest_CombineLatestSubscriber(subscriber,this.resultSelector))}}class combineLatest_CombineLatestSubscriber extends OuterSubscriber_OuterSubscriber{constructor(destination,resultSelector){super(destination),this.resultSelector=resultSelector,this.active=0,this.values=[],this.observables=[]}_next(observable){this.values.push(NONE),this.observables.push(observable)}_complete(){const observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{this.active=len,this.toRespond=len;for(let i=0;i<len;i++){const observable=observables[i];this.add(subscribeToResult(this,observable,observable,i))}}}notifyComplete(unused){0==(this.active-=1)&&this.destination.complete()}notifyNext(outerValue,innerValue,outerIndex,innerIndex,innerSub){const values=this.values,toRespond=this.toRespond?values[outerIndex]===NONE?--this.toRespond:this.toRespond:0;values[outerIndex]=innerValue,0===toRespond&&(this.resultSelector?this._tryResultSelector(values):this.destination.next(values.slice()))}_tryResultSelector(values){let result;try{result=this.resultSelector.apply(this,values)}catch(err){return void this.destination.error(err)}this.destination.next(result)}}const empty_EMPTY=new Observable_Observable(subscriber=>subscriber.complete());function empty_empty(scheduler){return scheduler?function(scheduler){return new Observable_Observable(subscriber=>scheduler.schedule(()=>subscriber.complete()))}(scheduler):empty_EMPTY}function defer(observableFactory){return new Observable_Observable(subscriber=>{let input;try{input=observableFactory()}catch(err){return void subscriber.error(err)}return(input?from_from(input):empty_empty()).subscribe(subscriber)})}function concatAll(){return mergeAll(1)}function filter_filter(predicate,thisArg){return function(source){return source.lift(new FilterOperator(predicate,thisArg))}}class FilterOperator{constructor(predicate,thisArg){this.predicate=predicate,this.thisArg=thisArg}call(subscriber,source){return source.subscribe(new filter_FilterSubscriber(subscriber,this.predicate,this.thisArg))}}class filter_FilterSubscriber extends Subscriber_Subscriber{constructor(destination,predicate,thisArg){super(destination),this.predicate=predicate,this.thisArg=thisArg,this.count=0}_next(value){let result;try{result=this.predicate.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}result&&this.destination.next(value)}}const ArgumentOutOfRangeError=(()=>{function ArgumentOutOfRangeErrorImpl(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return ArgumentOutOfRangeErrorImpl.prototype=Object.create(Error.prototype),ArgumentOutOfRangeErrorImpl})();function takeLast(count){return function(source){return 0===count?empty_empty():source.lift(new takeLast_TakeLastOperator(count))}}class takeLast_TakeLastOperator{constructor(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError}call(subscriber,source){return source.subscribe(new takeLast_TakeLastSubscriber(subscriber,this.total))}}class takeLast_TakeLastSubscriber extends Subscriber_Subscriber{constructor(destination,total){super(destination),this.total=total,this.ring=new Array,this.count=0}_next(value){const ring=this.ring,total=this.total,count=this.count++;ring.length<total?ring.push(value):ring[count%total]=value}_complete(){const destination=this.destination;let count=this.count;if(count>0){const total=this.count>=this.total?this.total:this.count,ring=this.ring;for(let i=0;i<total;i++){const idx=count++%total;destination.next(ring[idx])}}destination.complete()}}function throwIfEmpty(errorFactory=defaultErrorFactory){return source=>source.lift(new ThrowIfEmptyOperator(errorFactory))}class ThrowIfEmptyOperator{constructor(errorFactory){this.errorFactory=errorFactory}call(subscriber,source){return source.subscribe(new throwIfEmpty_ThrowIfEmptySubscriber(subscriber,this.errorFactory))}}class throwIfEmpty_ThrowIfEmptySubscriber extends Subscriber_Subscriber{constructor(destination,errorFactory){super(destination),this.errorFactory=errorFactory,this.hasValue=!1}_next(value){this.hasValue=!0,this.destination.next(value)}_complete(){if(this.hasValue)return this.destination.complete();{let err;try{err=this.errorFactory()}catch(e){err=e}this.destination.error(err)}}}function defaultErrorFactory(){return new EmptyError}function defaultIfEmpty(defaultValue=null){return source=>source.lift(new DefaultIfEmptyOperator(defaultValue))}class DefaultIfEmptyOperator{constructor(defaultValue){this.defaultValue=defaultValue}call(subscriber,source){return source.subscribe(new defaultIfEmpty_DefaultIfEmptySubscriber(subscriber,this.defaultValue))}}class defaultIfEmpty_DefaultIfEmptySubscriber extends Subscriber_Subscriber{constructor(destination,defaultValue){super(destination),this.defaultValue=defaultValue,this.isEmpty=!0}_next(value){this.isEmpty=!1,this.destination.next(value)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function last_last(predicate,defaultValue){const hasDefaultValue=arguments.length>=2;return source=>source.pipe(predicate?filter_filter((v,i)=>predicate(v,i,source)):identity_identity,takeLast(1),hasDefaultValue?defaultIfEmpty(defaultValue):throwIfEmpty(()=>new EmptyError))}function catchError(selector){return function(source){const operator=new CatchOperator(selector),caught=source.lift(operator);return operator.caught=caught}}class CatchOperator{constructor(selector){this.selector=selector}call(subscriber,source){return source.subscribe(new catchError_CatchSubscriber(subscriber,this.selector,this.caught))}}class catchError_CatchSubscriber extends OuterSubscriber_OuterSubscriber{constructor(destination,selector,caught){super(destination),this.selector=selector,this.caught=caught}error(err){if(!this.isStopped){let result;try{result=this.selector(err,this.caught)}catch(err2){return void super.error(err2)}this._unsubscribeAndRecycle();const innerSubscriber=new InnerSubscriber_InnerSubscriber(this,void 0,void 0);this.add(innerSubscriber);const innerSubscription=subscribeToResult(this,result,void 0,void 0,innerSubscriber);innerSubscription!==innerSubscriber&&this.add(innerSubscription)}}}function take_take(count){return source=>0===count?empty_empty():source.lift(new take_TakeOperator(count))}class take_TakeOperator{constructor(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError}call(subscriber,source){return source.subscribe(new take_TakeSubscriber(subscriber,this.total))}}class take_TakeSubscriber extends Subscriber_Subscriber{constructor(destination,total){super(destination),this.total=total,this.count=0}_next(value){const total=this.total,count=++this.count;count<=total&&(this.destination.next(value),count===total&&(this.destination.complete(),this.unsubscribe()))}}function first_first(predicate,defaultValue){const hasDefaultValue=arguments.length>=2;return source=>source.pipe(predicate?filter_filter((v,i)=>predicate(v,i,source)):identity_identity,take_take(1),hasDefaultValue?defaultIfEmpty(defaultValue):throwIfEmpty(()=>new EmptyError))}class EveryOperator{constructor(predicate,thisArg,source){this.predicate=predicate,this.thisArg=thisArg,this.source=source}call(observer,source){return source.subscribe(new every_EverySubscriber(observer,this.predicate,this.thisArg,this.source))}}class every_EverySubscriber extends Subscriber_Subscriber{constructor(destination,predicate,thisArg,source){super(destination),this.predicate=predicate,this.thisArg=thisArg,this.source=source,this.index=0,this.thisArg=thisArg||this}notifyComplete(everyValueMatch){this.destination.next(everyValueMatch),this.destination.complete()}_next(value){let result=!1;try{result=this.predicate.call(this.thisArg,value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function switchMap(project,resultSelector){return"function"==typeof resultSelector?source=>source.pipe(switchMap((a,i)=>from_from(project(a,i)).pipe(map_map((b,ii)=>resultSelector(a,b,i,ii))))):source=>source.lift(new SwitchMapOperator(project))}class SwitchMapOperator{constructor(project){this.project=project}call(subscriber,source){return source.subscribe(new switchMap_SwitchMapSubscriber(subscriber,this.project))}}class switchMap_SwitchMapSubscriber extends OuterSubscriber_OuterSubscriber{constructor(destination,project){super(destination),this.project=project,this.index=0}_next(value){let result;const index=this.index++;try{result=this.project(value,index)}catch(error){return void this.destination.error(error)}this._innerSub(result,value,index)}_innerSub(result,value,index){const innerSubscription=this.innerSubscription;innerSubscription&&innerSubscription.unsubscribe();const innerSubscriber=new InnerSubscriber_InnerSubscriber(this,value,index),destination=this.destination;destination.add(innerSubscriber),this.innerSubscription=subscribeToResult(this,result,void 0,void 0,innerSubscriber),this.innerSubscription!==innerSubscriber&&destination.add(this.innerSubscription)}_complete(){const{innerSubscription:innerSubscription}=this;innerSubscription&&!innerSubscription.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(innerSub){this.destination.remove(innerSub),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)}}function concat(...observables){return concatAll()(of(...observables))}function scan(accumulator,seed){let hasSeed=!1;return arguments.length>=2&&(hasSeed=!0),function(source){return source.lift(new ScanOperator(accumulator,seed,hasSeed))}}class ScanOperator{constructor(accumulator,seed,hasSeed=!1){this.accumulator=accumulator,this.seed=seed,this.hasSeed=hasSeed}call(subscriber,source){return source.subscribe(new scan_ScanSubscriber(subscriber,this.accumulator,this.seed,this.hasSeed))}}class scan_ScanSubscriber extends Subscriber_Subscriber{constructor(destination,accumulator,_seed,hasSeed){super(destination),this.accumulator=accumulator,this._seed=_seed,this.hasSeed=hasSeed,this.index=0}get seed(){return this._seed}set seed(value){this.hasSeed=!0,this._seed=value}_next(value){if(this.hasSeed)return this._tryNext(value);this.seed=value,this.destination.next(value)}_tryNext(value){const index=this.index++;let result;try{result=this.accumulator(this.seed,value,index)}catch(err){this.destination.error(err)}this.seed=result,this.destination.next(result)}}function concatMap(project,resultSelector){return mergeMap(project,resultSelector,1)}function noop_noop(){}function tap(nextOrObserver,error,complete){return function(source){return source.lift(new DoOperator(nextOrObserver,error,complete))}}class DoOperator{constructor(nextOrObserver,error,complete){this.nextOrObserver=nextOrObserver,this.error=error,this.complete=complete}call(subscriber,source){return source.subscribe(new tap_TapSubscriber(subscriber,this.nextOrObserver,this.error,this.complete))}}class tap_TapSubscriber extends Subscriber_Subscriber{constructor(destination,observerOrNext,error,complete){super(destination),this._tapNext=noop_noop,this._tapError=noop_noop,this._tapComplete=noop_noop,this._tapError=error||noop_noop,this._tapComplete=complete||noop_noop,isFunction(observerOrNext)?(this._context=this,this._tapNext=observerOrNext):observerOrNext&&(this._context=observerOrNext,this._tapNext=observerOrNext.next||noop_noop,this._tapError=observerOrNext.error||noop_noop,this._tapComplete=observerOrNext.complete||noop_noop)}_next(value){try{this._tapNext.call(this._context,value)}catch(err){return void this.destination.error(err)}this.destination.next(value)}_error(err){try{this._tapError.call(this._context,err)}catch(err){return void this.destination.error(err)}this.destination.error(err)}_complete(){try{this._tapComplete.call(this._context)}catch(err){return void this.destination.error(err)}return this.destination.complete()}}class FinallyOperator{constructor(callback){this.callback=callback}call(subscriber,source){return source.subscribe(new finalize_FinallySubscriber(subscriber,this.callback))}}class finalize_FinallySubscriber extends Subscriber_Subscriber{constructor(destination,callback){super(destination),this.add(new Subscription_Subscription(callback))}}class RouterEvent{constructor(id,url){this.id=id,this.url=url}}class NavigationStart extends RouterEvent{constructor(id,url,navigationTrigger="imperative",restoredState=null){super(id,url),this.navigationTrigger=navigationTrigger,this.restoredState=restoredState}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class NavigationEnd extends RouterEvent{constructor(id,url,urlAfterRedirects){super(id,url),this.urlAfterRedirects=urlAfterRedirects}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class NavigationCancel extends RouterEvent{constructor(id,url,reason){super(id,url),this.reason=reason}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class NavigationError extends RouterEvent{constructor(id,url,error){super(id,url),this.error=error}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class RoutesRecognized extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GuardsCheckStart extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GuardsCheckEnd extends RouterEvent{constructor(id,url,urlAfterRedirects,state,shouldActivate){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state,this.shouldActivate=shouldActivate}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ResolveStart extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ResolveEnd extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RouteConfigLoadStart{constructor(route){this.route=route}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class RouteConfigLoadEnd{constructor(route){this.route=route}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ChildActivationStart{constructor(snapshot){this.snapshot=snapshot}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ChildActivationEnd{constructor(snapshot){this.snapshot=snapshot}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ActivationStart{constructor(snapshot){this.snapshot=snapshot}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ActivationEnd{constructor(snapshot){this.snapshot=snapshot}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Scroll{constructor(routerEvent,position,anchor){this.routerEvent=routerEvent,this.position=position,this.anchor=anchor}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let router_EmptyOutletComponent=(()=>{class EmptyOutletComponent{}return EmptyOutletComponent.fac=function(t){return new(t||EmptyOutletComponent)},EmptyOutletComponent.cmp=defineComponent({type:EmptyOutletComponent,selectors:[["ng-component"]],decls:1,vars:0,template:function(rf,ctx){1&rf&&element(0,"router-outlet")},directives:function(){return[router_RouterOutlet]},encapsulation:2}),EmptyOutletComponent})();class ParamsAsMap{constructor(params){this.params=params||{}}has(name){return this.params.hasOwnProperty(name)}get(name){if(this.has(name)){const v=this.params[name];return Array.isArray(v)?v[0]:v}return null}getAll(name){if(this.has(name)){const v=this.params[name];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function convertToParamMap(params){return new ParamsAsMap(params)}function navigationCancelingError(message){const error=Error("NavigationCancelingError: "+message);return error.ngNavigationCancelingError=!0,error}function defaultUrlMatcher(segments,segmentGroup,route){const parts=route.path.split("/");if(parts.length>segments.length)return null;if("full"===route.pathMatch&&(segmentGroup.hasChildren()||parts.length<segments.length))return null;const posParams={};for(let index=0;index<parts.length;index++){const part=parts[index],segment=segments[index];if(part.startsWith(":"))posParams[part.substring(1)]=segment;else if(part!==segment.path)return null}return{consumed:segments.slice(0,parts.length),posParams:posParams}}class LoadedRouterConfig{constructor(routes,module){this.routes=routes,this.module=module}}function validateConfig(config,parentPath=""){for(let i=0;i<config.length;i++){const route=config[i];router_validateNode(route,getFullPath(parentPath,route))}}function router_validateNode(route,fullPath){if(!route)throw new Error(`\n      Invalid configuration of route '${fullPath}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(route))throw new Error(`Invalid configuration of route '${fullPath}': Array cannot be specified`);if(!route.component&&!route.children&&!route.loadChildren&&route.outlet&&"primary"!==route.outlet)throw new Error(`Invalid configuration of route '${fullPath}': a componentless route without children or loadChildren cannot have a named outlet set`);if(route.redirectTo&&route.children)throw new Error(`Invalid configuration of route '${fullPath}': redirectTo and children cannot be used together`);if(route.redirectTo&&route.loadChildren)throw new Error(`Invalid configuration of route '${fullPath}': redirectTo and loadChildren cannot be used together`);if(route.children&&route.loadChildren)throw new Error(`Invalid configuration of route '${fullPath}': children and loadChildren cannot be used together`);if(route.redirectTo&&route.component)throw new Error(`Invalid configuration of route '${fullPath}': redirectTo and component cannot be used together`);if(route.path&&route.matcher)throw new Error(`Invalid configuration of route '${fullPath}': path and matcher cannot be used together`);if(void 0===route.redirectTo&&!route.component&&!route.children&&!route.loadChildren)throw new Error(`Invalid configuration of route '${fullPath}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===route.path&&void 0===route.matcher)throw new Error(`Invalid configuration of route '${fullPath}': routes must have either a path or a matcher specified`);if("string"==typeof route.path&&"/"===route.path.charAt(0))throw new Error(`Invalid configuration of route '${fullPath}': path cannot start with a slash`);if(""===route.path&&void 0!==route.redirectTo&&void 0===route.pathMatch)throw new Error(`Invalid configuration of route '{path: "${fullPath}", redirectTo: "${route.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==route.pathMatch&&"full"!==route.pathMatch&&"prefix"!==route.pathMatch)throw new Error(`Invalid configuration of route '${fullPath}': pathMatch can only be set to 'prefix' or 'full'`);route.children&&validateConfig(route.children,fullPath)}function getFullPath(parentPath,currentRoute){return currentRoute?parentPath||currentRoute.path?parentPath&&!currentRoute.path?parentPath+"/":!parentPath&&currentRoute.path?currentRoute.path:`${parentPath}/${currentRoute.path}`:"":parentPath}function standardizeConfig(r){const children=r.children&&r.children.map(standardizeConfig),c=children?Object.assign(Object.assign({},r),{children:children}):Object.assign({},r);return!c.component&&(children||c.loadChildren)&&c.outlet&&"primary"!==c.outlet&&(c.component=router_EmptyOutletComponent),c}function shallowEqual(a,b){const k1=Object.keys(a),k2=Object.keys(b);if(!k1||!k2||k1.length!=k2.length)return!1;let key;for(let i=0;i<k1.length;i++)if(key=k1[i],!equalArraysOrString(a[key],b[key]))return!1;return!0}function equalArraysOrString(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length==b.length&&a.every(aItem=>b.indexOf(aItem)>-1):a===b}function router_flatten(arr){return Array.prototype.concat.apply([],arr)}function router_last(a){return a.length>0?a[a.length-1]:null}function forEach(map,callback){for(const prop in map)map.hasOwnProperty(prop)&&callback(map[prop],prop)}function wrapIntoObservable(value){return isObservable(value)?value:core_isPromise(value)?from_from(Promise.resolve(value)):of(value)}function containsTree(container,containee,exact){return exact?function(container,containee){return shallowEqual(container,containee)}(container.queryParams,containee.queryParams)&&function equalSegmentGroups(container,containee){if(!equalPath(container.segments,containee.segments))return!1;if(container.numberOfChildren!==containee.numberOfChildren)return!1;for(const c in containee.children){if(!container.children[c])return!1;if(!equalSegmentGroups(container.children[c],containee.children[c]))return!1}return!0}(container.root,containee.root):function(container,containee){return Object.keys(containee).length<=Object.keys(container).length&&Object.keys(containee).every(key=>equalArraysOrString(container[key],containee[key]))}(container.queryParams,containee.queryParams)&&function containsSegmentGroup(container,containee){return function containsSegmentGroupHelper(container,containee,containeePaths){if(container.segments.length>containeePaths.length)return!!equalPath(container.segments.slice(0,containeePaths.length),containeePaths)&&!containee.hasChildren();if(container.segments.length===containeePaths.length){if(!equalPath(container.segments,containeePaths))return!1;for(const c in containee.children){if(!container.children[c])return!1;if(!containsSegmentGroup(container.children[c],containee.children[c]))return!1}return!0}{const current=containeePaths.slice(0,container.segments.length),next=containeePaths.slice(container.segments.length);return!!equalPath(container.segments,current)&&!!container.children.primary&&containsSegmentGroupHelper(container.children.primary,containee,next)}}(container,containee,containee.segments)}(container.root,containee.root)}class UrlTree{constructor(root,queryParams,fragment){this.root=root,this.queryParams=queryParams,this.fragment=fragment}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=convertToParamMap(this.queryParams)),this._queryParamMap}toString(){return DEFAULT_SERIALIZER.serialize(this)}}class UrlSegmentGroup{constructor(segments,children){this.segments=segments,this.children=children,this.parent=null,forEach(children,(v,k)=>v.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return serializePaths(this)}}class UrlSegment{constructor(path,parameters){this.path=path,this.parameters=parameters}get parameterMap(){return this._parameterMap||(this._parameterMap=convertToParamMap(this.parameters)),this._parameterMap}toString(){return serializePath(this)}}function equalPath(as,bs){return as.length===bs.length&&as.every((a,i)=>a.path===bs[i].path)}function mapChildrenIntoArray(segment,fn){let res=[];return forEach(segment.children,(child,childOutlet)=>{"primary"===childOutlet&&(res=res.concat(fn(child,childOutlet)))}),forEach(segment.children,(child,childOutlet)=>{"primary"!==childOutlet&&(res=res.concat(fn(child,childOutlet)))}),res}class UrlSerializer{}class DefaultUrlSerializer{parse(url){const p=new UrlParser(url);return new UrlTree(p.parseRootSegment(),p.parseQueryParams(),p.parseFragment())}serialize(tree){return`${"/"+function serializeSegment(segment,root){if(!segment.hasChildren())return serializePaths(segment);if(root){const primary=segment.children.primary?serializeSegment(segment.children.primary,!1):"",children=[];return forEach(segment.children,(v,k)=>{"primary"!==k&&children.push(`${k}:${serializeSegment(v,!1)}`)}),children.length>0?`${primary}(${children.join("//")})`:primary}{const children=mapChildrenIntoArray(segment,(v,k)=>"primary"===k?[serializeSegment(segment.children.primary,!1)]:[`${k}:${serializeSegment(v,!1)}`]);return`${serializePaths(segment)}/(${children.join("//")})`}}(tree.root,!0)}${function(params){const strParams=Object.keys(params).map(name=>{const value=params[name];return Array.isArray(value)?value.map(v=>`${encodeUriQuery(name)}=${encodeUriQuery(v)}`).join("&"):`${encodeUriQuery(name)}=${encodeUriQuery(value)}`});return strParams.length?"?"+strParams.join("&"):""}(tree.queryParams)}${"string"==typeof tree.fragment?"#"+encodeURI(tree.fragment):""}`}}const DEFAULT_SERIALIZER=new DefaultUrlSerializer;function serializePaths(segment){return segment.segments.map(p=>serializePath(p)).join("/")}function encodeUriString(s){return encodeURIComponent(s).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function encodeUriQuery(s){return encodeUriString(s).replace(/%3B/gi,";")}function encodeUriSegment(s){return encodeUriString(s).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function decode(s){return decodeURIComponent(s)}function decodeQuery(s){return decode(s.replace(/\+/g,"%20"))}function serializePath(path){return`${encodeUriSegment(path.path)}${params=path.parameters,Object.keys(params).map(key=>`;${encodeUriSegment(key)}=${encodeUriSegment(params[key])}`).join("")}`;var params}const SEGMENT_RE=/^[^\/()?;=#]+/;function matchSegments(str){const match=str.match(SEGMENT_RE);return match?match[0]:""}const QUERY_PARAM_RE=/^[^=?&#]+/,QUERY_PARAM_VALUE_RE=/^[^?&#]+/;class UrlParser{constructor(url){this.url=url,this.remaining=url}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new UrlSegmentGroup([],{}):new UrlSegmentGroup([],this.parseChildren())}parseQueryParams(){const params={};if(this.consumeOptional("?"))do{this.parseQueryParam(params)}while(this.consumeOptional("&"));return params}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const segments=[];for(this.peekStartsWith("(")||segments.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),segments.push(this.parseSegment());let children={};this.peekStartsWith("/(")&&(this.capture("/"),children=this.parseParens(!0));let res={};return this.peekStartsWith("(")&&(res=this.parseParens(!1)),(segments.length>0||Object.keys(children).length>0)&&(res.primary=new UrlSegmentGroup(segments,children)),res}parseSegment(){const path=matchSegments(this.remaining);if(""===path&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(path),new UrlSegment(decode(path),this.parseMatrixParams())}parseMatrixParams(){const params={};for(;this.consumeOptional(";");)this.parseParam(params);return params}parseParam(params){const key=matchSegments(this.remaining);if(!key)return;this.capture(key);let value="";if(this.consumeOptional("=")){const valueMatch=matchSegments(this.remaining);valueMatch&&(value=valueMatch,this.capture(value))}params[decode(key)]=decode(value)}parseQueryParam(params){const key=function(str){const match=str.match(QUERY_PARAM_RE);return match?match[0]:""}(this.remaining);if(!key)return;this.capture(key);let value="";if(this.consumeOptional("=")){const valueMatch=function(str){const match=str.match(QUERY_PARAM_VALUE_RE);return match?match[0]:""}(this.remaining);valueMatch&&(value=valueMatch,this.capture(value))}const decodedKey=decodeQuery(key),decodedVal=decodeQuery(value);if(params.hasOwnProperty(decodedKey)){let currentVal=params[decodedKey];Array.isArray(currentVal)||(currentVal=[currentVal],params[decodedKey]=currentVal),currentVal.push(decodedVal)}else params[decodedKey]=decodedVal}parseParens(allowPrimary){const segments={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const path=matchSegments(this.remaining),next=this.remaining[path.length];if("/"!==next&&")"!==next&&";"!==next)throw new Error(`Cannot parse url '${this.url}'`);let outletName=void 0;path.indexOf(":")>-1?(outletName=path.substr(0,path.indexOf(":")),this.capture(outletName),this.capture(":")):allowPrimary&&(outletName="primary");const children=this.parseChildren();segments[outletName]=1===Object.keys(children).length?children.primary:new UrlSegmentGroup([],children),this.consumeOptional("//")}return segments}peekStartsWith(str){return this.remaining.startsWith(str)}consumeOptional(str){return!!this.peekStartsWith(str)&&(this.remaining=this.remaining.substring(str.length),!0)}capture(str){if(!this.consumeOptional(str))throw new Error(`Expected "${str}".`)}}class Tree{constructor(root){this._root=root}get root(){return this._root.value}parent(t){const p=this.pathFromRoot(t);return p.length>1?p[p.length-2]:null}children(t){const n=findNode(t,this._root);return n?n.children.map(t=>t.value):[]}firstChild(t){const n=findNode(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const p=findPath(t,this._root);return p.length<2?[]:p[p.length-2].children.map(c=>c.value).filter(cc=>cc!==t)}pathFromRoot(t){return findPath(t,this._root).map(s=>s.value)}}function findNode(value,node){if(value===node.value)return node;for(const child of node.children){const node=findNode(value,child);if(node)return node}return null}function findPath(value,node){if(value===node.value)return[node];for(const child of node.children){const path=findPath(value,child);if(path.length)return path.unshift(node),path}return[]}class TreeNode{constructor(value,children){this.value=value,this.children=children}toString(){return`TreeNode(${this.value})`}}function nodeChildrenAsMap(node){const map={};return node&&node.children.forEach(child=>map[child.value.outlet]=child),map}class RouterState extends Tree{constructor(root,snapshot){super(root),this.snapshot=snapshot,setRouterState(this,root)}toString(){return this.snapshot.toString()}}function createEmptyState(urlTree,rootComponent){const snapshot=function(urlTree,rootComponent){const activated=new ActivatedRouteSnapshot([],{},{},"",{},"primary",rootComponent,null,urlTree.root,-1,{});return new RouterStateSnapshot("",new TreeNode(activated,[]))}(urlTree,rootComponent),emptyUrl=new BehaviorSubject_BehaviorSubject([new UrlSegment("",{})]),emptyParams=new BehaviorSubject_BehaviorSubject({}),emptyData=new BehaviorSubject_BehaviorSubject({}),emptyQueryParams=new BehaviorSubject_BehaviorSubject({}),fragment=new BehaviorSubject_BehaviorSubject(""),activated=new router_ActivatedRoute(emptyUrl,emptyParams,emptyQueryParams,fragment,emptyData,"primary",rootComponent,snapshot.root);return activated.snapshot=snapshot.root,new RouterState(new TreeNode(activated,[]),snapshot)}class router_ActivatedRoute{constructor(url,params,queryParams,fragment,data,outlet,component,futureSnapshot){this.url=url,this.params=params,this.queryParams=queryParams,this.fragment=fragment,this.data=data,this.outlet=outlet,this.component=component,this._futureSnapshot=futureSnapshot}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(map_map(p=>convertToParamMap(p)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(map_map(p=>convertToParamMap(p)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function inheritedParamsDataResolve(route,paramsInheritanceStrategy="emptyOnly"){const pathFromRoot=route.pathFromRoot;let inheritingStartingFrom=0;if("always"!==paramsInheritanceStrategy)for(inheritingStartingFrom=pathFromRoot.length-1;inheritingStartingFrom>=1;){const current=pathFromRoot[inheritingStartingFrom],parent=pathFromRoot[inheritingStartingFrom-1];if(current.routeConfig&&""===current.routeConfig.path)inheritingStartingFrom--;else{if(parent.component)break;inheritingStartingFrom--}}return function(pathFromRoot){return pathFromRoot.reduce((res,curr)=>({params:Object.assign(Object.assign({},res.params),curr.params),data:Object.assign(Object.assign({},res.data),curr.data),resolve:Object.assign(Object.assign({},res.resolve),curr._resolvedData)}),{params:{},data:{},resolve:{}})}(pathFromRoot.slice(inheritingStartingFrom))}class ActivatedRouteSnapshot{constructor(url,params,queryParams,fragment,data,outlet,component,routeConfig,urlSegment,lastPathIndex,resolve){this.url=url,this.params=params,this.queryParams=queryParams,this.fragment=fragment,this.data=data,this.outlet=outlet,this.component=component,this.routeConfig=routeConfig,this._urlSegment=urlSegment,this._lastPathIndex=lastPathIndex,this._resolve=resolve}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=convertToParamMap(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=convertToParamMap(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(segment=>segment.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class RouterStateSnapshot extends Tree{constructor(url,root){super(root),this.url=url,setRouterState(this,root)}toString(){return serializeNode(this._root)}}function setRouterState(state,node){node.value._routerState=state,node.children.forEach(c=>setRouterState(state,c))}function serializeNode(node){const c=node.children.length>0?` { ${node.children.map(serializeNode).join(", ")} } `:"";return`${node.value}${c}`}function advanceActivatedRoute(route){if(route.snapshot){const currentSnapshot=route.snapshot,nextSnapshot=route._futureSnapshot;route.snapshot=nextSnapshot,shallowEqual(currentSnapshot.queryParams,nextSnapshot.queryParams)||route.queryParams.next(nextSnapshot.queryParams),currentSnapshot.fragment!==nextSnapshot.fragment&&route.fragment.next(nextSnapshot.fragment),shallowEqual(currentSnapshot.params,nextSnapshot.params)||route.params.next(nextSnapshot.params),function(a,b){if(a.length!==b.length)return!1;for(let i=0;i<a.length;++i)if(!shallowEqual(a[i],b[i]))return!1;return!0}(currentSnapshot.url,nextSnapshot.url)||route.url.next(nextSnapshot.url),shallowEqual(currentSnapshot.data,nextSnapshot.data)||route.data.next(nextSnapshot.data)}else route.snapshot=route._futureSnapshot,route.data.next(route._futureSnapshot.data)}function equalParamsAndUrlSegments(a,b){var as,bs;return shallowEqual(a.params,b.params)&&equalPath(as=a.url,bs=b.url)&&as.every((a,i)=>shallowEqual(a.parameters,bs[i].parameters))&&!(!a.parent!=!b.parent)&&(!a.parent||equalParamsAndUrlSegments(a.parent,b.parent))}function isMatrixParams(command){return"object"==typeof command&&null!=command&&!command.outlets&&!command.segmentPath}function router_tree(oldSegmentGroup,newSegmentGroup,urlTree,queryParams,fragment){let qp={};return queryParams&&forEach(queryParams,(value,name)=>{qp[name]=Array.isArray(value)?value.map(v=>""+v):""+value}),new UrlTree(urlTree.root===oldSegmentGroup?newSegmentGroup:function replaceSegment(current,oldSegment,newSegment){const children={};return forEach(current.children,(c,outletName)=>{children[outletName]=c===oldSegment?newSegment:replaceSegment(c,oldSegment,newSegment)}),new UrlSegmentGroup(current.segments,children)}(urlTree.root,oldSegmentGroup,newSegmentGroup),qp,fragment)}class Navigation{constructor(isAbsolute,numberOfDoubleDots,commands){if(this.isAbsolute=isAbsolute,this.numberOfDoubleDots=numberOfDoubleDots,this.commands=commands,isAbsolute&&commands.length>0&&isMatrixParams(commands[0]))throw new Error("Root segment cannot have matrix parameters");const cmdWithOutlet=commands.find(c=>"object"==typeof c&&null!=c&&c.outlets);if(cmdWithOutlet&&cmdWithOutlet!==router_last(commands))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Position{constructor(segmentGroup,processChildren,index){this.segmentGroup=segmentGroup,this.processChildren=processChildren,this.index=index}}function getPath(command){return"object"==typeof command&&null!=command&&command.outlets?command.outlets.primary:""+command}function updateSegmentGroup(segmentGroup,startIndex,commands){if(segmentGroup||(segmentGroup=new UrlSegmentGroup([],{})),0===segmentGroup.segments.length&&segmentGroup.hasChildren())return updateSegmentGroupChildren(segmentGroup,startIndex,commands);const m=function(segmentGroup,startIndex,commands){let currentCommandIndex=0,currentPathIndex=startIndex;const noMatch={match:!1,pathIndex:0,commandIndex:0};for(;currentPathIndex<segmentGroup.segments.length;){if(currentCommandIndex>=commands.length)return noMatch;const path=segmentGroup.segments[currentPathIndex],curr=getPath(commands[currentCommandIndex]),next=currentCommandIndex<commands.length-1?commands[currentCommandIndex+1]:null;if(currentPathIndex>0&&void 0===curr)break;if(curr&&next&&"object"==typeof next&&void 0===next.outlets){if(!compare(curr,next,path))return noMatch;currentCommandIndex+=2}else{if(!compare(curr,{},path))return noMatch;currentCommandIndex++}currentPathIndex++}return{match:!0,pathIndex:currentPathIndex,commandIndex:currentCommandIndex}}(segmentGroup,startIndex,commands),slicedCommands=commands.slice(m.commandIndex);if(m.match&&m.pathIndex<segmentGroup.segments.length){const g=new UrlSegmentGroup(segmentGroup.segments.slice(0,m.pathIndex),{});return g.children.primary=new UrlSegmentGroup(segmentGroup.segments.slice(m.pathIndex),segmentGroup.children),updateSegmentGroupChildren(g,0,slicedCommands)}return m.match&&0===slicedCommands.length?new UrlSegmentGroup(segmentGroup.segments,{}):m.match&&!segmentGroup.hasChildren()?createNewSegmentGroup(segmentGroup,startIndex,commands):m.match?updateSegmentGroupChildren(segmentGroup,0,slicedCommands):createNewSegmentGroup(segmentGroup,startIndex,commands)}function updateSegmentGroupChildren(segmentGroup,startIndex,commands){if(0===commands.length)return new UrlSegmentGroup(segmentGroup.segments,{});{const outlets=function(commands){return"object"!=typeof commands[0]||void 0===commands[0].outlets?{primary:commands}:commands[0].outlets}(commands),children={};return forEach(outlets,(commands,outlet)=>{null!==commands&&(children[outlet]=updateSegmentGroup(segmentGroup.children[outlet],startIndex,commands))}),forEach(segmentGroup.children,(child,childOutlet)=>{void 0===outlets[childOutlet]&&(children[childOutlet]=child)}),new UrlSegmentGroup(segmentGroup.segments,children)}}function createNewSegmentGroup(segmentGroup,startIndex,commands){const paths=segmentGroup.segments.slice(0,startIndex);let i=0;for(;i<commands.length;){if("object"==typeof commands[i]&&void 0!==commands[i].outlets){const children=createNewSegmentChildren(commands[i].outlets);return new UrlSegmentGroup(paths,children)}if(0===i&&isMatrixParams(commands[0])){paths.push(new UrlSegment(segmentGroup.segments[startIndex].path,commands[0])),i++;continue}const curr=getPath(commands[i]),next=i<commands.length-1?commands[i+1]:null;curr&&next&&isMatrixParams(next)?(paths.push(new UrlSegment(curr,router_stringify(next))),i+=2):(paths.push(new UrlSegment(curr,{})),i++)}return new UrlSegmentGroup(paths,{})}function createNewSegmentChildren(outlets){const children={};return forEach(outlets,(commands,outlet)=>{null!==commands&&(children[outlet]=createNewSegmentGroup(new UrlSegmentGroup([],{}),0,commands))}),children}function router_stringify(params){const res={};return forEach(params,(v,k)=>res[k]=""+v),res}function compare(path,params,segment){return path==segment.path&&shallowEqual(params,segment.parameters)}class ActivateRoutes{constructor(routeReuseStrategy,futureState,currState,forwardEvent){this.routeReuseStrategy=routeReuseStrategy,this.futureState=futureState,this.currState=currState,this.forwardEvent=forwardEvent}activate(parentContexts){const futureRoot=this.futureState._root,currRoot=this.currState?this.currState._root:null;this.deactivateChildRoutes(futureRoot,currRoot,parentContexts),advanceActivatedRoute(this.futureState.root),this.activateChildRoutes(futureRoot,currRoot,parentContexts)}deactivateChildRoutes(futureNode,currNode,contexts){const children=nodeChildrenAsMap(currNode);futureNode.children.forEach(futureChild=>{const childOutletName=futureChild.value.outlet;this.deactivateRoutes(futureChild,children[childOutletName],contexts),delete children[childOutletName]}),forEach(children,(v,childName)=>{this.deactivateRouteAndItsChildren(v,contexts)})}deactivateRoutes(futureNode,currNode,parentContext){const future=futureNode.value,curr=currNode?currNode.value:null;if(future===curr)if(future.component){const context=parentContext.getContext(future.outlet);context&&this.deactivateChildRoutes(futureNode,currNode,context.children)}else this.deactivateChildRoutes(futureNode,currNode,parentContext);else curr&&this.deactivateRouteAndItsChildren(currNode,parentContext)}deactivateRouteAndItsChildren(route,parentContexts){this.routeReuseStrategy.shouldDetach(route.value.snapshot)?this.detachAndStoreRouteSubtree(route,parentContexts):this.deactivateRouteAndOutlet(route,parentContexts)}detachAndStoreRouteSubtree(route,parentContexts){const context=parentContexts.getContext(route.value.outlet);if(context&&context.outlet){const componentRef=context.outlet.detach(),contexts=context.children.onOutletDeactivated();this.routeReuseStrategy.store(route.value.snapshot,{componentRef:componentRef,route:route,contexts:contexts})}}deactivateRouteAndOutlet(route,parentContexts){const context=parentContexts.getContext(route.value.outlet);if(context){const children=nodeChildrenAsMap(route),contexts=route.value.component?context.children:parentContexts;forEach(children,(v,k)=>this.deactivateRouteAndItsChildren(v,contexts)),context.outlet&&(context.outlet.deactivate(),context.children.onOutletDeactivated())}}activateChildRoutes(futureNode,currNode,contexts){const children=nodeChildrenAsMap(currNode);futureNode.children.forEach(c=>{this.activateRoutes(c,children[c.value.outlet],contexts),this.forwardEvent(new ActivationEnd(c.value.snapshot))}),futureNode.children.length&&this.forwardEvent(new ChildActivationEnd(futureNode.value.snapshot))}activateRoutes(futureNode,currNode,parentContexts){const future=futureNode.value,curr=currNode?currNode.value:null;if(advanceActivatedRoute(future),future===curr)if(future.component){const context=parentContexts.getOrCreateContext(future.outlet);this.activateChildRoutes(futureNode,currNode,context.children)}else this.activateChildRoutes(futureNode,currNode,parentContexts);else if(future.component){const context=parentContexts.getOrCreateContext(future.outlet);if(this.routeReuseStrategy.shouldAttach(future.snapshot)){const stored=this.routeReuseStrategy.retrieve(future.snapshot);this.routeReuseStrategy.store(future.snapshot,null),context.children.onOutletReAttached(stored.contexts),context.attachRef=stored.componentRef,context.route=stored.route.value,context.outlet&&context.outlet.attach(stored.componentRef,stored.route.value),advanceActivatedRouteNodeAndItsChildren(stored.route)}else{const config=function(snapshot){for(let s=snapshot.parent;s;s=s.parent){const route=s.routeConfig;if(route&&route._loadedConfig)return route._loadedConfig;if(route&&route.component)return null}return null}(future.snapshot),cmpFactoryResolver=config?config.module.componentFactoryResolver:null;context.attachRef=null,context.route=future,context.resolver=cmpFactoryResolver,context.outlet&&context.outlet.activateWith(future,cmpFactoryResolver),this.activateChildRoutes(futureNode,null,context.children)}}else this.activateChildRoutes(futureNode,null,parentContexts)}}function advanceActivatedRouteNodeAndItsChildren(node){advanceActivatedRoute(node.value),node.children.forEach(advanceActivatedRouteNodeAndItsChildren)}function router_isFunction(v){return"function"==typeof v}function isUrlTree(v){return v instanceof UrlTree}class NoMatch{constructor(segmentGroup){this.segmentGroup=segmentGroup||null}}class AbsoluteRedirect{constructor(urlTree){this.urlTree=urlTree}}function noMatch(segmentGroup){return new Observable_Observable(obs=>obs.error(new NoMatch(segmentGroup)))}function absoluteRedirect(newTree){return new Observable_Observable(obs=>obs.error(new AbsoluteRedirect(newTree)))}function namedOutletsRedirect(redirectTo){return new Observable_Observable(obs=>obs.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${redirectTo}'`)))}class router_ApplyRedirects{constructor(moduleInjector,configLoader,urlSerializer,urlTree,config){this.configLoader=configLoader,this.urlSerializer=urlSerializer,this.urlTree=urlTree,this.config=config,this.allowRedirects=!0,this.ngModule=moduleInjector.get(NgModuleRef)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(map_map(rootSegmentGroup=>this.createUrlTree(rootSegmentGroup,this.urlTree.queryParams,this.urlTree.fragment))).pipe(catchError(e=>{if(e instanceof AbsoluteRedirect)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof NoMatch)throw this.noMatchError(e);throw e}))}match(tree){return this.expandSegmentGroup(this.ngModule,this.config,tree.root,"primary").pipe(map_map(rootSegmentGroup=>this.createUrlTree(rootSegmentGroup,tree.queryParams,tree.fragment))).pipe(catchError(e=>{if(e instanceof NoMatch)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(rootCandidate,queryParams,fragment){const root=rootCandidate.segments.length>0?new UrlSegmentGroup([],{primary:rootCandidate}):rootCandidate;return new UrlTree(root,queryParams,fragment)}expandSegmentGroup(ngModule,routes,segmentGroup,outlet){return 0===segmentGroup.segments.length&&segmentGroup.hasChildren()?this.expandChildren(ngModule,routes,segmentGroup).pipe(map_map(children=>new UrlSegmentGroup([],children))):this.expandSegment(ngModule,segmentGroup,routes,segmentGroup.segments,outlet,!0)}expandChildren(ngModule,routes,segmentGroup){return function(obj,fn){if(0===Object.keys(obj).length)return of({});const waitHead=[],waitTail=[],res={};return forEach(obj,(a,k)=>{const mapped=fn(k,a).pipe(map_map(r=>res[k]=r));"primary"===k?waitHead.push(mapped):waitTail.push(mapped)}),of.apply(null,waitHead.concat(waitTail)).pipe(concatAll(),last_last(),map_map(()=>res))}(segmentGroup.children,(childOutlet,child)=>this.expandSegmentGroup(ngModule,routes,child,childOutlet))}expandSegment(ngModule,segmentGroup,routes,segments,outlet,allowRedirects){return of(...routes).pipe(map_map(r=>this.expandSegmentAgainstRoute(ngModule,segmentGroup,routes,r,segments,outlet,allowRedirects).pipe(catchError(e=>{if(e instanceof NoMatch)return of(null);throw e}))),concatAll(),first_first(s=>!!s),catchError((e,_)=>{if(e instanceof EmptyError||"EmptyError"===e.name){if(this.noLeftoversInUrl(segmentGroup,segments,outlet))return of(new UrlSegmentGroup([],{}));throw new NoMatch(segmentGroup)}throw e}))}noLeftoversInUrl(segmentGroup,segments,outlet){return 0===segments.length&&!segmentGroup.children[outlet]}expandSegmentAgainstRoute(ngModule,segmentGroup,routes,route,paths,outlet,allowRedirects){return getOutlet(route)!==outlet?noMatch(segmentGroup):void 0===route.redirectTo?this.matchSegmentAgainstRoute(ngModule,segmentGroup,route,paths):allowRedirects&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(ngModule,segmentGroup,routes,route,paths,outlet):noMatch(segmentGroup)}expandSegmentAgainstRouteUsingRedirect(ngModule,segmentGroup,routes,route,segments,outlet){return"**"===route.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(ngModule,routes,route,outlet):this.expandRegularSegmentAgainstRouteUsingRedirect(ngModule,segmentGroup,routes,route,segments,outlet)}expandWildCardWithParamsAgainstRouteUsingRedirect(ngModule,routes,route,outlet){const newTree=this.applyRedirectCommands([],route.redirectTo,{});return route.redirectTo.startsWith("/")?absoluteRedirect(newTree):this.lineralizeSegments(route,newTree).pipe(mergeMap(newSegments=>{const group=new UrlSegmentGroup(newSegments,{});return this.expandSegment(ngModule,group,routes,newSegments,outlet,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(ngModule,segmentGroup,routes,route,segments,outlet){const{matched:matched,consumedSegments:consumedSegments,lastChild:lastChild,positionalParamSegments:positionalParamSegments}=router_match(segmentGroup,route,segments);if(!matched)return noMatch(segmentGroup);const newTree=this.applyRedirectCommands(consumedSegments,route.redirectTo,positionalParamSegments);return route.redirectTo.startsWith("/")?absoluteRedirect(newTree):this.lineralizeSegments(route,newTree).pipe(mergeMap(newSegments=>this.expandSegment(ngModule,segmentGroup,routes,newSegments.concat(segments.slice(lastChild)),outlet,!1)))}matchSegmentAgainstRoute(ngModule,rawSegmentGroup,route,segments){if("**"===route.path)return route.loadChildren?this.configLoader.load(ngModule.injector,route).pipe(map_map(cfg=>(route._loadedConfig=cfg,new UrlSegmentGroup(segments,{})))):of(new UrlSegmentGroup(segments,{}));const{matched:matched,consumedSegments:consumedSegments,lastChild:lastChild}=router_match(rawSegmentGroup,route,segments);if(!matched)return noMatch(rawSegmentGroup);const rawSlicedSegments=segments.slice(lastChild);return this.getChildConfig(ngModule,route,segments).pipe(mergeMap(routerConfig=>{const childModule=routerConfig.module,childConfig=routerConfig.routes,{segmentGroup:segmentGroup,slicedSegments:slicedSegments}=function(segmentGroup,consumedSegments,slicedSegments,config){return slicedSegments.length>0&&function(segmentGroup,segments,routes){return routes.some(r=>isEmptyPathRedirect(segmentGroup,segments,r)&&"primary"!==getOutlet(r))}(segmentGroup,slicedSegments,config)?{segmentGroup:mergeTrivialChildren(new UrlSegmentGroup(consumedSegments,function(routes,primarySegmentGroup){const res={};res.primary=primarySegmentGroup;for(const r of routes)""===r.path&&"primary"!==getOutlet(r)&&(res[getOutlet(r)]=new UrlSegmentGroup([],{}));return res}(config,new UrlSegmentGroup(slicedSegments,segmentGroup.children)))),slicedSegments:[]}:0===slicedSegments.length&&function(segmentGroup,segments,routes){return routes.some(r=>isEmptyPathRedirect(segmentGroup,segments,r))}(segmentGroup,slicedSegments,config)?{segmentGroup:mergeTrivialChildren(new UrlSegmentGroup(segmentGroup.segments,function(segmentGroup,slicedSegments,routes,children){const res={};for(const r of routes)isEmptyPathRedirect(segmentGroup,slicedSegments,r)&&!children[getOutlet(r)]&&(res[getOutlet(r)]=new UrlSegmentGroup([],{}));return Object.assign(Object.assign({},children),res)}(segmentGroup,slicedSegments,config,segmentGroup.children))),slicedSegments:slicedSegments}:{segmentGroup:segmentGroup,slicedSegments:slicedSegments}}(rawSegmentGroup,consumedSegments,rawSlicedSegments,childConfig);return 0===slicedSegments.length&&segmentGroup.hasChildren()?this.expandChildren(childModule,childConfig,segmentGroup).pipe(map_map(children=>new UrlSegmentGroup(consumedSegments,children))):0===childConfig.length&&0===slicedSegments.length?of(new UrlSegmentGroup(consumedSegments,{})):this.expandSegment(childModule,segmentGroup,childConfig,slicedSegments,"primary",!0).pipe(map_map(cs=>new UrlSegmentGroup(consumedSegments.concat(cs.segments),cs.children)))}))}getChildConfig(ngModule,route,segments){return route.children?of(new LoadedRouterConfig(route.children,ngModule)):route.loadChildren?void 0!==route._loadedConfig?of(route._loadedConfig):function(moduleInjector,route,segments){const canLoad=route.canLoad;return canLoad&&0!==canLoad.length?from_from(canLoad).pipe(map_map(injectionToken=>{const guard=moduleInjector.get(injectionToken);let guardVal;if(function(guard){return guard&&router_isFunction(guard.canLoad)}(guard))guardVal=guard.canLoad(route,segments);else{if(!router_isFunction(guard))throw new Error("Invalid CanLoad guard");guardVal=guard(route,segments)}return wrapIntoObservable(guardVal)})).pipe(concatAll(),(predicate=result=>!0===result,source=>source.lift(new EveryOperator(predicate,void 0,source)))):of(!0);var predicate}(ngModule.injector,route,segments).pipe(mergeMap(shouldLoad=>shouldLoad?this.configLoader.load(ngModule.injector,route).pipe(map_map(cfg=>(route._loadedConfig=cfg,cfg))):function(route){return new Observable_Observable(obs=>obs.error(navigationCancelingError(`Cannot load children because the guard of the route "path: '${route.path}'" returned false`)))}(route))):of(new LoadedRouterConfig([],ngModule))}lineralizeSegments(route,urlTree){let res=[],c=urlTree.root;for(;;){if(res=res.concat(c.segments),0===c.numberOfChildren)return of(res);if(c.numberOfChildren>1||!c.children.primary)return namedOutletsRedirect(route.redirectTo);c=c.children.primary}}applyRedirectCommands(segments,redirectTo,posParams){return this.applyRedirectCreatreUrlTree(redirectTo,this.urlSerializer.parse(redirectTo),segments,posParams)}applyRedirectCreatreUrlTree(redirectTo,urlTree,segments,posParams){const newRoot=this.createSegmentGroup(redirectTo,urlTree.root,segments,posParams);return new UrlTree(newRoot,this.createQueryParams(urlTree.queryParams,this.urlTree.queryParams),urlTree.fragment)}createQueryParams(redirectToParams,actualParams){const res={};return forEach(redirectToParams,(v,k)=>{if("string"==typeof v&&v.startsWith(":")){const sourceName=v.substring(1);res[k]=actualParams[sourceName]}else res[k]=v}),res}createSegmentGroup(redirectTo,group,segments,posParams){const updatedSegments=this.createSegments(redirectTo,group.segments,segments,posParams);let children={};return forEach(group.children,(child,name)=>{children[name]=this.createSegmentGroup(redirectTo,child,segments,posParams)}),new UrlSegmentGroup(updatedSegments,children)}createSegments(redirectTo,redirectToSegments,actualSegments,posParams){return redirectToSegments.map(s=>s.path.startsWith(":")?this.findPosParam(redirectTo,s,posParams):this.findOrReturn(s,actualSegments))}findPosParam(redirectTo,redirectToUrlSegment,posParams){const pos=posParams[redirectToUrlSegment.path.substring(1)];if(!pos)throw new Error(`Cannot redirect to '${redirectTo}'. Cannot find '${redirectToUrlSegment.path}'.`);return pos}findOrReturn(redirectToUrlSegment,actualSegments){let idx=0;for(const s of actualSegments){if(s.path===redirectToUrlSegment.path)return actualSegments.splice(idx),s;idx++}return redirectToUrlSegment}}function router_match(segmentGroup,route,segments){if(""===route.path)return"full"===route.pathMatch&&(segmentGroup.hasChildren()||segments.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const res=(route.matcher||defaultUrlMatcher)(segments,segmentGroup,route);return res?{matched:!0,consumedSegments:res.consumed,lastChild:res.consumed.length,positionalParamSegments:res.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function mergeTrivialChildren(s){if(1===s.numberOfChildren&&s.children.primary){const c=s.children.primary;return new UrlSegmentGroup(s.segments.concat(c.segments),c.children)}return s}function isEmptyPathRedirect(segmentGroup,segments,r){return(!(segmentGroup.hasChildren()||segments.length>0)||"full"!==r.pathMatch)&&""===r.path&&void 0!==r.redirectTo}function getOutlet(route){return route.outlet||"primary"}class CanActivate{constructor(path){this.path=path,this.route=this.path[this.path.length-1]}}class CanDeactivate{constructor(component,route){this.component=component,this.route=route}}function getAllRouteGuards(future,curr,parentContexts){const futureRoot=future._root;return function getChildRouteGuards(futureNode,currNode,contexts,futurePath,checks={canDeactivateChecks:[],canActivateChecks:[]}){const prevChildren=nodeChildrenAsMap(currNode);return futureNode.children.forEach(c=>{!function(futureNode,currNode,parentContexts,futurePath,checks={canDeactivateChecks:[],canActivateChecks:[]}){const future=futureNode.value,curr=currNode?currNode.value:null,context=parentContexts?parentContexts.getContext(futureNode.value.outlet):null;if(curr&&future.routeConfig===curr.routeConfig){const shouldRun=function(curr,future,mode){if("function"==typeof mode)return mode(curr,future);switch(mode){case"pathParamsChange":return!equalPath(curr.url,future.url);case"pathParamsOrQueryParamsChange":return!equalPath(curr.url,future.url)||!shallowEqual(curr.queryParams,future.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!equalParamsAndUrlSegments(curr,future)||!shallowEqual(curr.queryParams,future.queryParams);case"paramsChange":default:return!equalParamsAndUrlSegments(curr,future)}}(curr,future,future.routeConfig.runGuardsAndResolvers);shouldRun?checks.canActivateChecks.push(new CanActivate(futurePath)):(future.data=curr.data,future._resolvedData=curr._resolvedData),getChildRouteGuards(futureNode,currNode,future.component?context?context.children:null:parentContexts,futurePath,checks),shouldRun&&checks.canDeactivateChecks.push(new CanDeactivate(context&&context.outlet&&context.outlet.component||null,curr))}else curr&&deactivateRouteAndItsChildren(currNode,context,checks),checks.canActivateChecks.push(new CanActivate(futurePath)),getChildRouteGuards(futureNode,null,future.component?context?context.children:null:parentContexts,futurePath,checks)}(c,prevChildren[c.value.outlet],contexts,futurePath.concat([c.value]),checks),delete prevChildren[c.value.outlet]}),forEach(prevChildren,(v,k)=>deactivateRouteAndItsChildren(v,contexts.getContext(k),checks)),checks}(futureRoot,curr?curr._root:null,parentContexts,[futureRoot.value])}function getToken(token,snapshot,moduleInjector){const config=function(snapshot){if(!snapshot)return null;for(let s=snapshot.parent;s;s=s.parent){const route=s.routeConfig;if(route&&route._loadedConfig)return route._loadedConfig}return null}(snapshot);return(config?config.module.injector:moduleInjector).get(token)}function deactivateRouteAndItsChildren(route,context,checks){const children=nodeChildrenAsMap(route),r=route.value;forEach(children,(node,childName)=>{deactivateRouteAndItsChildren(node,r.component?context?context.children.getContext(childName):null:context,checks)}),checks.canDeactivateChecks.push(new CanDeactivate(r.component&&context&&context.outlet&&context.outlet.isActivated?context.outlet.component:null,r))}const INITIAL_VALUE=Symbol("INITIAL_VALUE");function prioritizedGuardValue(){return switchMap(obs=>combineLatest(...obs.map(o=>o.pipe(take_take(1),function(...array){const scheduler=array[array.length-1];return isScheduler(scheduler)?(array.pop(),source=>concat(array,source,scheduler)):source=>concat(array,source)}(INITIAL_VALUE)))).pipe(scan((acc,list)=>{let isPending=!1;return list.reduce((innerAcc,val,i)=>{if(innerAcc!==INITIAL_VALUE)return innerAcc;if(val===INITIAL_VALUE&&(isPending=!0),!isPending){if(!1===val)return val;if(i===list.length-1||isUrlTree(val))return val}return innerAcc},acc)},INITIAL_VALUE),filter_filter(item=>item!==INITIAL_VALUE),map_map(item=>isUrlTree(item)?item:!0===item),take_take(1)))}function fireActivationStart(snapshot,forwardEvent){return null!==snapshot&&forwardEvent&&forwardEvent(new ActivationStart(snapshot)),of(!0)}function fireChildActivationStart(snapshot,forwardEvent){return null!==snapshot&&forwardEvent&&forwardEvent(new ChildActivationStart(snapshot)),of(!0)}function runCanActivate(futureRSS,futureARS,moduleInjector){const canActivate=futureARS.routeConfig?futureARS.routeConfig.canActivate:null;return canActivate&&0!==canActivate.length?of(canActivate.map(c=>defer(()=>{const guard=getToken(c,futureARS,moduleInjector);let observable;if(function(guard){return guard&&router_isFunction(guard.canActivate)}(guard))observable=wrapIntoObservable(guard.canActivate(futureARS,futureRSS));else{if(!router_isFunction(guard))throw new Error("Invalid CanActivate guard");observable=wrapIntoObservable(guard(futureARS,futureRSS))}return observable.pipe(first_first())}))).pipe(prioritizedGuardValue()):of(!0)}function runCanActivateChild(futureRSS,path,moduleInjector){const futureARS=path[path.length-1],canActivateChildGuardsMapped=path.slice(0,path.length-1).reverse().map(p=>function(p){const canActivateChild=p.routeConfig?p.routeConfig.canActivateChild:null;return canActivateChild&&0!==canActivateChild.length?{node:p,guards:canActivateChild}:null}(p)).filter(_=>null!==_).map(d=>defer(()=>of(d.guards.map(c=>{const guard=getToken(c,d.node,moduleInjector);let observable;if(function(guard){return guard&&router_isFunction(guard.canActivateChild)}(guard))observable=wrapIntoObservable(guard.canActivateChild(futureARS,futureRSS));else{if(!router_isFunction(guard))throw new Error("Invalid CanActivateChild guard");observable=wrapIntoObservable(guard(futureARS,futureRSS))}return observable.pipe(first_first())})).pipe(prioritizedGuardValue())));return of(canActivateChildGuardsMapped).pipe(prioritizedGuardValue())}class NoMatch$1{}class router_Recognizer{constructor(rootComponentType,config,urlTree,url,paramsInheritanceStrategy,relativeLinkResolution){this.rootComponentType=rootComponentType,this.config=config,this.urlTree=urlTree,this.url=url,this.paramsInheritanceStrategy=paramsInheritanceStrategy,this.relativeLinkResolution=relativeLinkResolution}recognize(){try{const rootSegmentGroup=split$1(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,children=this.processSegmentGroup(this.config,rootSegmentGroup,"primary"),root=new ActivatedRouteSnapshot([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),rootNode=new TreeNode(root,children),routeState=new RouterStateSnapshot(this.url,rootNode);return this.inheritParamsAndData(routeState._root),of(routeState)}catch(e){return new Observable_Observable(obs=>obs.error(e))}}inheritParamsAndData(routeNode){const route=routeNode.value,i=inheritedParamsDataResolve(route,this.paramsInheritanceStrategy);route.params=Object.freeze(i.params),route.data=Object.freeze(i.data),routeNode.children.forEach(n=>this.inheritParamsAndData(n))}processSegmentGroup(config,segmentGroup,outlet){return 0===segmentGroup.segments.length&&segmentGroup.hasChildren()?this.processChildren(config,segmentGroup):this.processSegment(config,segmentGroup,segmentGroup.segments,outlet)}processChildren(config,segmentGroup){const children=mapChildrenIntoArray(segmentGroup,(child,childOutlet)=>this.processSegmentGroup(config,child,childOutlet));return function(nodes){const names={};nodes.forEach(n=>{const routeWithSameOutletName=names[n.value.outlet];if(routeWithSameOutletName){const p=routeWithSameOutletName.url.map(s=>s.toString()).join("/"),c=n.value.url.map(s=>s.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${p}' and '${c}'.`)}names[n.value.outlet]=n.value})}(children),children.sort((a,b)=>"primary"===a.value.outlet?-1:"primary"===b.value.outlet?1:a.value.outlet.localeCompare(b.value.outlet)),children}processSegment(config,segmentGroup,segments,outlet){for(const r of config)try{return this.processSegmentAgainstRoute(r,segmentGroup,segments,outlet)}catch(e){if(!(e instanceof NoMatch$1))throw e}if(this.noLeftoversInUrl(segmentGroup,segments,outlet))return[];throw new NoMatch$1}noLeftoversInUrl(segmentGroup,segments,outlet){return 0===segments.length&&!segmentGroup.children[outlet]}processSegmentAgainstRoute(route,rawSegment,segments,outlet){if(route.redirectTo)throw new NoMatch$1;if((route.outlet||"primary")!==outlet)throw new NoMatch$1;let snapshot,consumedSegments=[],rawSlicedSegments=[];if("**"===route.path){const params=segments.length>0?router_last(segments).parameters:{};snapshot=new ActivatedRouteSnapshot(segments,params,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,getData(route),outlet,route.component,route,getSourceSegmentGroup(rawSegment),getPathIndexShift(rawSegment)+segments.length,getResolve(route))}else{const result=function(segmentGroup,route,segments){if(""===route.path){if("full"===route.pathMatch&&(segmentGroup.hasChildren()||segments.length>0))throw new NoMatch$1;return{consumedSegments:[],lastChild:0,parameters:{}}}const res=(route.matcher||defaultUrlMatcher)(segments,segmentGroup,route);if(!res)throw new NoMatch$1;const posParams={};forEach(res.posParams,(v,k)=>{posParams[k]=v.path});const parameters=res.consumed.length>0?Object.assign(Object.assign({},posParams),res.consumed[res.consumed.length-1].parameters):posParams;return{consumedSegments:res.consumed,lastChild:res.consumed.length,parameters:parameters}}(rawSegment,route,segments);consumedSegments=result.consumedSegments,rawSlicedSegments=segments.slice(result.lastChild),snapshot=new ActivatedRouteSnapshot(consumedSegments,result.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,getData(route),outlet,route.component,route,getSourceSegmentGroup(rawSegment),getPathIndexShift(rawSegment)+consumedSegments.length,getResolve(route))}const childConfig=function(route){return route.children?route.children:route.loadChildren?route._loadedConfig.routes:[]}(route),{segmentGroup:segmentGroup,slicedSegments:slicedSegments}=split$1(rawSegment,consumedSegments,rawSlicedSegments,childConfig,this.relativeLinkResolution);if(0===slicedSegments.length&&segmentGroup.hasChildren()){const children=this.processChildren(childConfig,segmentGroup);return[new TreeNode(snapshot,children)]}if(0===childConfig.length&&0===slicedSegments.length)return[new TreeNode(snapshot,[])];const children=this.processSegment(childConfig,segmentGroup,slicedSegments,"primary");return[new TreeNode(snapshot,children)]}}function getSourceSegmentGroup(segmentGroup){let s=segmentGroup;for(;s._sourceSegment;)s=s._sourceSegment;return s}function getPathIndexShift(segmentGroup){let s=segmentGroup,res=s._segmentIndexShift?s._segmentIndexShift:0;for(;s._sourceSegment;)s=s._sourceSegment,res+=s._segmentIndexShift?s._segmentIndexShift:0;return res-1}function split$1(segmentGroup,consumedSegments,slicedSegments,config,relativeLinkResolution){if(slicedSegments.length>0&&function(segmentGroup,slicedSegments,routes){return routes.some(r=>emptyPathMatch(segmentGroup,slicedSegments,r)&&"primary"!==getOutlet$1(r))}(segmentGroup,slicedSegments,config)){const s=new UrlSegmentGroup(consumedSegments,function(segmentGroup,consumedSegments,routes,primarySegment){const res={};res.primary=primarySegment,primarySegment._sourceSegment=segmentGroup,primarySegment._segmentIndexShift=consumedSegments.length;for(const r of routes)if(""===r.path&&"primary"!==getOutlet$1(r)){const s=new UrlSegmentGroup([],{});s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,res[getOutlet$1(r)]=s}return res}(segmentGroup,consumedSegments,config,new UrlSegmentGroup(slicedSegments,segmentGroup.children)));return s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,{segmentGroup:s,slicedSegments:[]}}if(0===slicedSegments.length&&function(segmentGroup,slicedSegments,routes){return routes.some(r=>emptyPathMatch(segmentGroup,slicedSegments,r))}(segmentGroup,slicedSegments,config)){const s=new UrlSegmentGroup(segmentGroup.segments,function(segmentGroup,consumedSegments,slicedSegments,routes,children,relativeLinkResolution){const res={};for(const r of routes)if(emptyPathMatch(segmentGroup,slicedSegments,r)&&!children[getOutlet$1(r)]){const s=new UrlSegmentGroup([],{});s._sourceSegment=segmentGroup,s._segmentIndexShift="legacy"===relativeLinkResolution?segmentGroup.segments.length:consumedSegments.length,res[getOutlet$1(r)]=s}return Object.assign(Object.assign({},children),res)}(segmentGroup,consumedSegments,slicedSegments,config,segmentGroup.children,relativeLinkResolution));return s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,{segmentGroup:s,slicedSegments:slicedSegments}}const s=new UrlSegmentGroup(segmentGroup.segments,segmentGroup.children);return s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,{segmentGroup:s,slicedSegments:slicedSegments}}function emptyPathMatch(segmentGroup,slicedSegments,r){return(!(segmentGroup.hasChildren()||slicedSegments.length>0)||"full"!==r.pathMatch)&&""===r.path&&void 0===r.redirectTo}function getOutlet$1(route){return route.outlet||"primary"}function getData(route){return route.data||{}}function getResolve(route){return route.resolve||{}}function getResolver(injectionToken,futureARS,futureRSS,moduleInjector){const resolver=getToken(injectionToken,futureARS,moduleInjector);return wrapIntoObservable(resolver.resolve?resolver.resolve(futureARS,futureRSS):resolver(futureARS,futureRSS))}function switchTap(next){return function(source){return source.pipe(switchMap(v=>{const nextResult=next(v);return nextResult?from_from(nextResult).pipe(map_map(()=>v)):from_from([v])}))}}class DefaultRouteReuseStrategy{shouldDetach(route){return!1}store(route,detachedTree){}shouldAttach(route){return!1}retrieve(route){return null}shouldReuseRoute(future,curr){return future.routeConfig===curr.routeConfig}}const ROUTES=new InjectionToken("ROUTES");class router_RouterConfigLoader{constructor(loader,compiler,onLoadStartListener,onLoadEndListener){this.loader=loader,this.compiler=compiler,this.onLoadStartListener=onLoadStartListener,this.onLoadEndListener=onLoadEndListener}load(parentInjector,route){return this.onLoadStartListener&&this.onLoadStartListener(route),this.loadModuleFactory(route.loadChildren).pipe(map_map(factory=>{this.onLoadEndListener&&this.onLoadEndListener(route);const module=factory.create(parentInjector);return new LoadedRouterConfig(router_flatten(module.injector.get(ROUTES)).map(standardizeConfig),module)}))}loadModuleFactory(loadChildren){return"string"==typeof loadChildren?from_from(this.loader.load(loadChildren)):wrapIntoObservable(loadChildren()).pipe(mergeMap(t=>t instanceof NgModuleFactory?of(t):from_from(this.compiler.compileModuleAsync(t))))}}class DefaultUrlHandlingStrategy{shouldProcessUrl(url){return!0}extract(url){return url}merge(newUrlPart,wholeUrl){return newUrlPart}}function defaultErrorHandler(error){throw error}function defaultMalformedUriErrorHandler(error,urlSerializer,url){return urlSerializer.parse("/")}function defaultRouterHook(snapshot,runExtras){return of(null)}let router_Router=(()=>{class Router{constructor(rootComponentType,urlSerializer,rootContexts,location,injector,loader,compiler,config){this.rootComponentType=rootComponentType,this.urlSerializer=urlSerializer,this.rootContexts=rootContexts,this.location=location,this.config=config,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Subject_Subject,this.errorHandler=defaultErrorHandler,this.malformedUriErrorHandler=defaultMalformedUriErrorHandler,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:defaultRouterHook,afterPreactivation:defaultRouterHook},this.urlHandlingStrategy=new DefaultUrlHandlingStrategy,this.routeReuseStrategy=new DefaultRouteReuseStrategy,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=injector.get(NgModuleRef),this.console=injector.get(Console);const ngZone=injector.get(NgZone);this.isNgZoneEnabled=ngZone instanceof NgZone,this.resetConfig(config),this.currentUrlTree=new UrlTree(new UrlSegmentGroup([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new router_RouterConfigLoader(loader,compiler,r=>this.triggerEvent(new RouteConfigLoadStart(r)),r=>this.triggerEvent(new RouteConfigLoadEnd(r))),this.routerState=createEmptyState(this.currentUrlTree,this.rootComponentType),this.transitions=new BehaviorSubject_BehaviorSubject({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(transitions){const eventsSubject=this.events;return transitions.pipe(filter_filter(t=>0!==t.id),map_map(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),switchMap(t=>{let completed=!1,errored=!1;return of(t).pipe(tap(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),switchMap(t=>{const urlTransition=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||urlTransition)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return of(t).pipe(switchMap(t=>{const transition=this.transitions.getValue();return eventsSubject.next(new NavigationStart(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),transition!==this.transitions.getValue()?empty_EMPTY:[t]}),switchMap(t=>Promise.resolve(t)),(moduleInjector=this.ngModule.injector,configLoader=this.configLoader,urlSerializer=this.urlSerializer,config=this.config,function(source){return source.pipe(switchMap(t=>function(moduleInjector,configLoader,urlSerializer,urlTree,config){return new router_ApplyRedirects(moduleInjector,configLoader,urlSerializer,urlTree,config).apply()}(moduleInjector,configLoader,urlSerializer,t.extractedUrl,config).pipe(map_map(urlAfterRedirects=>Object.assign(Object.assign({},t),{urlAfterRedirects:urlAfterRedirects})))))}),tap(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(rootComponentType,config,serializer,paramsInheritanceStrategy,relativeLinkResolution){return function(source){return source.pipe(mergeMap(t=>function(rootComponentType,config,urlTree,url,paramsInheritanceStrategy="emptyOnly",relativeLinkResolution="legacy"){return new router_Recognizer(rootComponentType,config,urlTree,url,paramsInheritanceStrategy,relativeLinkResolution).recognize()}(rootComponentType,config,t.urlAfterRedirects,serializer(t.urlAfterRedirects),paramsInheritanceStrategy,relativeLinkResolution).pipe(map_map(targetSnapshot=>Object.assign(Object.assign({},t),{targetSnapshot:targetSnapshot})))))}}(this.rootComponentType,this.config,url=>this.serializeUrl(url),this.paramsInheritanceStrategy,this.relativeLinkResolution),tap(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),tap(t=>{const routesRecognized=new RoutesRecognized(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);eventsSubject.next(routesRecognized)}));var moduleInjector,configLoader,urlSerializer,config;if(urlTransition&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:id,extractedUrl:extractedUrl,source:source,restoredState:restoredState,extras:extras}=t,navStart=new NavigationStart(id,this.serializeUrl(extractedUrl),source,restoredState);eventsSubject.next(navStart);const targetSnapshot=createEmptyState(extractedUrl,this.rootComponentType).snapshot;return of(Object.assign(Object.assign({},t),{targetSnapshot:targetSnapshot,urlAfterRedirects:extractedUrl,extras:Object.assign(Object.assign({},extras),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),empty_EMPTY}),switchTap(t=>{const{targetSnapshot:targetSnapshot,id:navigationId,extractedUrl:appliedUrlTree,rawUrl:rawUrlTree,extras:{skipLocationChange:skipLocationChange,replaceUrl:replaceUrl}}=t;return this.hooks.beforePreactivation(targetSnapshot,{navigationId:navigationId,appliedUrlTree:appliedUrlTree,rawUrlTree:rawUrlTree,skipLocationChange:!!skipLocationChange,replaceUrl:!!replaceUrl})}),tap(t=>{const guardsStart=new GuardsCheckStart(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(guardsStart)}),map_map(t=>Object.assign(Object.assign({},t),{guards:getAllRouteGuards(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(moduleInjector,forwardEvent){return function(source){return source.pipe(mergeMap(t=>{const{targetSnapshot:targetSnapshot,currentSnapshot:currentSnapshot,guards:{canActivateChecks:canActivateChecks,canDeactivateChecks:canDeactivateChecks}}=t;return 0===canDeactivateChecks.length&&0===canActivateChecks.length?of(Object.assign(Object.assign({},t),{guardsResult:!0})):function(checks,futureRSS,currRSS,moduleInjector){return from_from(checks).pipe(mergeMap(check=>function(component,currARS,currRSS,futureRSS,moduleInjector){const canDeactivate=currARS&&currARS.routeConfig?currARS.routeConfig.canDeactivate:null;return canDeactivate&&0!==canDeactivate.length?of(canDeactivate.map(c=>{const guard=getToken(c,currARS,moduleInjector);let observable;if(function(guard){return guard&&router_isFunction(guard.canDeactivate)}(guard))observable=wrapIntoObservable(guard.canDeactivate(component,currARS,currRSS,futureRSS));else{if(!router_isFunction(guard))throw new Error("Invalid CanDeactivate guard");observable=wrapIntoObservable(guard(component,currARS,currRSS,futureRSS))}return observable.pipe(first_first())})).pipe(prioritizedGuardValue()):of(!0)}(check.component,check.route,currRSS,futureRSS,moduleInjector)),first_first(result=>!0!==result,!0))}(canDeactivateChecks,targetSnapshot,currentSnapshot,moduleInjector).pipe(mergeMap(canDeactivate=>canDeactivate&&"boolean"==typeof canDeactivate?function(futureSnapshot,checks,moduleInjector,forwardEvent){return from_from(checks).pipe(concatMap(check=>from_from([fireChildActivationStart(check.route.parent,forwardEvent),fireActivationStart(check.route,forwardEvent),runCanActivateChild(futureSnapshot,check.path,moduleInjector),runCanActivate(futureSnapshot,check.route,moduleInjector)]).pipe(concatAll(),first_first(result=>!0!==result,!0))),first_first(result=>!0!==result,!0))}(targetSnapshot,canActivateChecks,moduleInjector,forwardEvent):of(canDeactivate)),map_map(guardsResult=>Object.assign(Object.assign({},t),{guardsResult:guardsResult})))}))}}(this.ngModule.injector,evt=>this.triggerEvent(evt)),tap(t=>{if(isUrlTree(t.guardsResult)){const error=navigationCancelingError(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw error.url=t.guardsResult,error}}),tap(t=>{const guardsEnd=new GuardsCheckEnd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(guardsEnd)}),filter_filter(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const navCancel=new NavigationCancel(t.id,this.serializeUrl(t.extractedUrl),"");return eventsSubject.next(navCancel),t.resolve(!1),!1}return!0}),switchTap(t=>{if(t.guards.canActivateChecks.length)return of(t).pipe(tap(t=>{const resolveStart=new ResolveStart(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(resolveStart)}),(paramsInheritanceStrategy=this.paramsInheritanceStrategy,moduleInjector=this.ngModule.injector,function(source){return source.pipe(mergeMap(t=>{const{targetSnapshot:targetSnapshot,guards:{canActivateChecks:canActivateChecks}}=t;return canActivateChecks.length?from_from(canActivateChecks).pipe(concatMap(check=>function(futureARS,futureRSS,paramsInheritanceStrategy,moduleInjector){return function(resolve,futureARS,futureRSS,moduleInjector){const keys=Object.keys(resolve);if(0===keys.length)return of({});if(1===keys.length){const key=keys[0];return getResolver(resolve[key],futureARS,futureRSS,moduleInjector).pipe(map_map(value=>({[key]:value})))}const data={};return from_from(keys).pipe(mergeMap(key=>getResolver(resolve[key],futureARS,futureRSS,moduleInjector).pipe(map_map(value=>(data[key]=value,value))))).pipe(last_last(),map_map(()=>data))}(futureARS._resolve,futureARS,futureRSS,moduleInjector).pipe(map_map(resolvedData=>(futureARS._resolvedData=resolvedData,futureARS.data=Object.assign(Object.assign({},futureARS.data),inheritedParamsDataResolve(futureARS,paramsInheritanceStrategy).resolve),null)))}(check.route,targetSnapshot,paramsInheritanceStrategy,moduleInjector)),function(accumulator,seed){return arguments.length>=2?function(source){return pipe(scan(accumulator,seed),takeLast(1),defaultIfEmpty(seed))(source)}:function(source){return pipe(scan((acc,value,index)=>accumulator(acc,value,index+1)),takeLast(1))(source)}}((_,__)=>_),map_map(_=>t)):of(t)}))}),tap(t=>{const resolveEnd=new ResolveEnd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(resolveEnd)}));var paramsInheritanceStrategy,moduleInjector}),switchTap(t=>{const{targetSnapshot:targetSnapshot,id:navigationId,extractedUrl:appliedUrlTree,rawUrl:rawUrlTree,extras:{skipLocationChange:skipLocationChange,replaceUrl:replaceUrl}}=t;return this.hooks.afterPreactivation(targetSnapshot,{navigationId:navigationId,appliedUrlTree:appliedUrlTree,rawUrlTree:rawUrlTree,skipLocationChange:!!skipLocationChange,replaceUrl:!!replaceUrl})}),map_map(t=>{const targetRouterState=function(routeReuseStrategy,curr,prevState){const root=function createNode(routeReuseStrategy,curr,prevState){if(prevState&&routeReuseStrategy.shouldReuseRoute(curr.value,prevState.value.snapshot)){const value=prevState.value;value._futureSnapshot=curr.value;const children=function(routeReuseStrategy,curr,prevState){return curr.children.map(child=>{for(const p of prevState.children)if(routeReuseStrategy.shouldReuseRoute(p.value.snapshot,child.value))return createNode(routeReuseStrategy,child,p);return createNode(routeReuseStrategy,child)})}(routeReuseStrategy,curr,prevState);return new TreeNode(value,children)}{const detachedRouteHandle=routeReuseStrategy.retrieve(curr.value);if(detachedRouteHandle){const tree=detachedRouteHandle.route;return function setFutureSnapshotsOfActivatedRoutes(curr,result){if(curr.value.routeConfig!==result.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(curr.children.length!==result.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");result.value._futureSnapshot=curr.value;for(let i=0;i<curr.children.length;++i)setFutureSnapshotsOfActivatedRoutes(curr.children[i],result.children[i])}(curr,tree),tree}{const value=new router_ActivatedRoute(new BehaviorSubject_BehaviorSubject((c=curr.value).url),new BehaviorSubject_BehaviorSubject(c.params),new BehaviorSubject_BehaviorSubject(c.queryParams),new BehaviorSubject_BehaviorSubject(c.fragment),new BehaviorSubject_BehaviorSubject(c.data),c.outlet,c.component,c),children=curr.children.map(c=>createNode(routeReuseStrategy,c));return new TreeNode(value,children)}}var c}(routeReuseStrategy,curr._root,prevState?prevState._root:void 0);return new RouterState(root,curr)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:targetRouterState})}),tap(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(rootContexts=this.rootContexts,routeReuseStrategy=this.routeReuseStrategy,forwardEvent=evt=>this.triggerEvent(evt),map_map(t=>(new ActivateRoutes(routeReuseStrategy,t.targetRouterState,t.currentRouterState,forwardEvent).activate(rootContexts),t))),tap({next(){completed=!0},complete(){completed=!0}}),(callback=()=>{if(!completed&&!errored){this.resetUrlToCurrentUrlTree();const navCancel=new NavigationCancel(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);eventsSubject.next(navCancel),t.resolve(!1)}this.currentNavigation=null},source=>source.lift(new FinallyOperator(callback))),catchError(e=>{if(errored=!0,(error=e)&&error.ngNavigationCancelingError){const redirecting=isUrlTree(e.url);redirecting||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const navCancel=new NavigationCancel(t.id,this.serializeUrl(t.extractedUrl),e.message);eventsSubject.next(navCancel),redirecting?setTimeout(()=>{const mergedTree=this.urlHandlingStrategy.merge(e.url,this.rawUrlTree);return this.scheduleNavigation(mergedTree,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const navError=new NavigationError(t.id,this.serializeUrl(t.extractedUrl),e);eventsSubject.next(navError);try{t.resolve(this.errorHandler(e))}catch(ee){t.reject(ee)}}var error;return empty_EMPTY}));var callback,rootContexts,routeReuseStrategy,forwardEvent}))}resetRootComponentType(rootComponentType){this.rootComponentType=rootComponentType,this.routerState.root.component=this.rootComponentType}getTransition(){const transition=this.transitions.value;return transition.urlAfterRedirects=this.browserUrlTree,transition}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(change=>{let rawUrlTree=this.parseUrl(change.url);const source="popstate"===change.type?"popstate":"hashchange",state=change.state&&change.state.navigationId?change.state:null;setTimeout(()=>{this.scheduleNavigation(rawUrlTree,source,state,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(event){this.events.next(event)}resetConfig(config){validateConfig(config),this.config=config.map(standardizeConfig),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(commands,navigationExtras={}){const{relativeTo:relativeTo,queryParams:queryParams,fragment:fragment,preserveQueryParams:preserveQueryParams,queryParamsHandling:queryParamsHandling,preserveFragment:preserveFragment}=navigationExtras;isDevMode()&&preserveQueryParams&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const a=relativeTo||this.routerState.root,f=preserveFragment?this.currentUrlTree.fragment:fragment;let q=null;if(queryParamsHandling)switch(queryParamsHandling){case"merge":q=Object.assign(Object.assign({},this.currentUrlTree.queryParams),queryParams);break;case"preserve":q=this.currentUrlTree.queryParams;break;default:q=queryParams||null}else q=preserveQueryParams?this.currentUrlTree.queryParams:queryParams||null;return null!==q&&(q=this.removeEmptyProps(q)),function(route,urlTree,commands,queryParams,fragment){if(0===commands.length)return router_tree(urlTree.root,urlTree.root,urlTree,queryParams,fragment);const nav=function(commands){if("string"==typeof commands[0]&&1===commands.length&&"/"===commands[0])return new Navigation(!0,0,commands);let numberOfDoubleDots=0,isAbsolute=!1;const res=commands.reduce((res,cmd,cmdIdx)=>{if("object"==typeof cmd&&null!=cmd){if(cmd.outlets){const outlets={};return forEach(cmd.outlets,(commands,name)=>{outlets[name]="string"==typeof commands?commands.split("/"):commands}),[...res,{outlets:outlets}]}if(cmd.segmentPath)return[...res,cmd.segmentPath]}return"string"!=typeof cmd?[...res,cmd]:0===cmdIdx?(cmd.split("/").forEach((urlPart,partIndex)=>{0==partIndex&&"."===urlPart||(0==partIndex&&""===urlPart?isAbsolute=!0:".."===urlPart?numberOfDoubleDots++:""!=urlPart&&res.push(urlPart))}),res):[...res,cmd]},[]);return new Navigation(isAbsolute,numberOfDoubleDots,res)}(commands);if(nav.toRoot())return router_tree(urlTree.root,new UrlSegmentGroup([],{}),urlTree,queryParams,fragment);const startingPosition=function(nav,tree,route){if(nav.isAbsolute)return new Position(tree.root,!0,0);if(-1===route.snapshot._lastPathIndex)return new Position(route.snapshot._urlSegment,!0,0);const modifier=isMatrixParams(nav.commands[0])?0:1;return function(group,index,numberOfDoubleDots){let g=group,ci=index,dd=numberOfDoubleDots;for(;dd>ci;){if(dd-=ci,g=g.parent,!g)throw new Error("Invalid number of '../'");ci=g.segments.length}return new Position(g,!1,ci-dd)}(route.snapshot._urlSegment,route.snapshot._lastPathIndex+modifier,nav.numberOfDoubleDots)}(nav,urlTree,route),segmentGroup=startingPosition.processChildren?updateSegmentGroupChildren(startingPosition.segmentGroup,startingPosition.index,nav.commands):updateSegmentGroup(startingPosition.segmentGroup,startingPosition.index,nav.commands);return router_tree(startingPosition.segmentGroup,segmentGroup,urlTree,queryParams,fragment)}(a,this.currentUrlTree,commands,q,f)}navigateByUrl(url,extras={skipLocationChange:!1}){isDevMode()&&this.isNgZoneEnabled&&!NgZone.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const urlTree=isUrlTree(url)?url:this.parseUrl(url),mergedTree=this.urlHandlingStrategy.merge(urlTree,this.rawUrlTree);return this.scheduleNavigation(mergedTree,"imperative",null,extras)}navigate(commands,extras={skipLocationChange:!1}){return function(commands){for(let i=0;i<commands.length;i++){const cmd=commands[i];if(null==cmd)throw new Error(`The requested path contains ${cmd} segment at index ${i}`)}}(commands),this.navigateByUrl(this.createUrlTree(commands,extras),extras)}serializeUrl(url){return this.urlSerializer.serialize(url)}parseUrl(url){let urlTree;try{urlTree=this.urlSerializer.parse(url)}catch(e){urlTree=this.malformedUriErrorHandler(e,this.urlSerializer,url)}return urlTree}isActive(url,exact){if(isUrlTree(url))return containsTree(this.currentUrlTree,url,exact);const urlTree=this.parseUrl(url);return containsTree(this.currentUrlTree,urlTree,exact)}removeEmptyProps(params){return Object.keys(params).reduce((result,key)=>{const value=params[key];return null!=value&&(result[key]=value),result},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new NavigationEnd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(rawUrl,source,restoredState,extras,priorPromise){const lastNavigation=this.getTransition();if(lastNavigation&&"imperative"!==source&&"imperative"===lastNavigation.source&&lastNavigation.rawUrl.toString()===rawUrl.toString())return Promise.resolve(!0);if(lastNavigation&&"hashchange"==source&&"popstate"===lastNavigation.source&&lastNavigation.rawUrl.toString()===rawUrl.toString())return Promise.resolve(!0);if(lastNavigation&&"popstate"==source&&"hashchange"===lastNavigation.source&&lastNavigation.rawUrl.toString()===rawUrl.toString())return Promise.resolve(!0);let resolve,reject,promise;priorPromise?(resolve=priorPromise.resolve,reject=priorPromise.reject,promise=priorPromise.promise):promise=new Promise((res,rej)=>{resolve=res,reject=rej});const id=++this.navigationId;return this.setTransition({id:id,source:source,restoredState:restoredState,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:rawUrl,extras:extras,resolve:resolve,reject:reject,promise:promise,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),promise.catch(e=>Promise.reject(e))}setBrowserUrl(url,replaceUrl,id,state){const path=this.urlSerializer.serialize(url);state=state||{},this.location.isCurrentPathEqualTo(path)||replaceUrl?this.location.replaceState(path,"",Object.assign(Object.assign({},state),{navigationId:id})):this.location.go(path,"",Object.assign(Object.assign({},state),{navigationId:id}))}resetStateAndUrl(storedState,storedUrl,rawUrl){this.routerState=storedState,this.currentUrlTree=storedUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,rawUrl),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return Router.fac=function(t){invalidFactory()},Router.dir=defineDirective({type:Router}),Router})(),router_RouterLink=(()=>{class RouterLink{constructor(router,route,tabIndex,renderer,el){this.router=router,this.route=route,this.commands=[],null==tabIndex&&renderer.setAttribute(el.nativeElement,"tabindex","0")}set routerLink(commands){this.commands=null!=commands?Array.isArray(commands)?commands:[commands]:[]}set preserveQueryParams(value){isDevMode()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated!, use queryParamsHandling instead."),this.preserve=value}onClick(){const extras={skipLocationChange:attrBoolValue(this.skipLocationChange),replaceUrl:attrBoolValue(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,extras),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:attrBoolValue(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:attrBoolValue(this.preserveFragment)})}}return RouterLink.fac=function(t){return new(t||RouterLink)(directiveInject(router_Router),directiveInject(router_ActivatedRoute),injectAttribute("tabindex"),directiveInject(Renderer2),directiveInject(ElementRef))},RouterLink.dir=defineDirective({type:RouterLink,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(rf,ctx){1&rf&&listener("click",(function(){return ctx.onClick()}))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"}}),RouterLink})(),router_RouterLinkWithHref=(()=>{class RouterLinkWithHref{constructor(router,route,locationStrategy){this.router=router,this.route=route,this.locationStrategy=locationStrategy,this.commands=[],this.subscription=router.events.subscribe(s=>{s instanceof NavigationEnd&&this.updateTargetUrlAndHref()})}set routerLink(commands){this.commands=null!=commands?Array.isArray(commands)?commands:[commands]:[]}set preserveQueryParams(value){isDevMode()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=value}ngOnChanges(changes){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(button,ctrlKey,metaKey,shiftKey){if(0!==button||ctrlKey||metaKey||shiftKey)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const extras={skipLocationChange:attrBoolValue(this.skipLocationChange),replaceUrl:attrBoolValue(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,extras),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:attrBoolValue(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:attrBoolValue(this.preserveFragment)})}}return RouterLinkWithHref.fac=function(t){return new(t||RouterLinkWithHref)(directiveInject(router_Router),directiveInject(router_ActivatedRoute),directiveInject(common_LocationStrategy))},RouterLinkWithHref.dir=defineDirective({type:RouterLinkWithHref,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(rf,ctx){1&rf&&listener("click",(function($event){return ctx.onClick($event.button,$event.ctrlKey,$event.metaKey,$event.shiftKey)})),2&rf&&(hostProperty("href",ctx.href,sanitizeUrl),attribute("target",ctx.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[NgOnChangesFeature]}),RouterLinkWithHref})();function attrBoolValue(s){return""===s||!!s}let router_RouterLinkActive=(()=>{class RouterLinkActive{constructor(router,element,renderer,link,linkWithHref){this.router=router,this.element=element,this.renderer=renderer,this.link=link,this.linkWithHref=linkWithHref,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.subscription=router.events.subscribe(s=>{s instanceof NavigationEnd&&this.update()})}ngAfterContentInit(){this.links.changes.subscribe(_=>this.update()),this.linksWithHrefs.changes.subscribe(_=>this.update()),this.update()}set routerLinkActive(data){const classes=Array.isArray(data)?data:data.split(" ");this.classes=classes.filter(c=>!!c)}ngOnChanges(changes){this.update()}ngOnDestroy(){this.subscription.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const hasActiveLinks=this.hasActiveLinks();this.isActive!==hasActiveLinks&&(this.isActive=hasActiveLinks,this.classes.forEach(c=>{hasActiveLinks?this.renderer.addClass(this.element.nativeElement,c):this.renderer.removeClass(this.element.nativeElement,c)}))})}isLinkActive(router){return link=>router.isActive(link.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const isActiveCheckFn=this.isLinkActive(this.router);return this.link&&isActiveCheckFn(this.link)||this.linkWithHref&&isActiveCheckFn(this.linkWithHref)||this.links.some(isActiveCheckFn)||this.linksWithHrefs.some(isActiveCheckFn)}}return RouterLinkActive.fac=function(t){return new(t||RouterLinkActive)(directiveInject(router_Router),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(router_RouterLink,8),directiveInject(router_RouterLinkWithHref,8))},RouterLinkActive.dir=defineDirective({type:RouterLinkActive,selectors:[["","routerLinkActive",""]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&(contentQuery(dirIndex,router_RouterLink,!0),contentQuery(dirIndex,router_RouterLinkWithHref,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.links=_t),queryRefresh(_t=loadQuery())&&(ctx.linksWithHrefs=_t))},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[NgOnChangesFeature]}),RouterLinkActive})();class OutletContext{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ChildrenOutletContexts,this.attachRef=null}}class ChildrenOutletContexts{constructor(){this.contexts=new Map}onChildOutletCreated(childName,outlet){const context=this.getOrCreateContext(childName);context.outlet=outlet,this.contexts.set(childName,context)}onChildOutletDestroyed(childName){const context=this.getContext(childName);context&&(context.outlet=null)}onOutletDeactivated(){const contexts=this.contexts;return this.contexts=new Map,contexts}onOutletReAttached(contexts){this.contexts=contexts}getOrCreateContext(childName){let context=this.getContext(childName);return context||(context=new OutletContext,this.contexts.set(childName,context)),context}getContext(childName){return this.contexts.get(childName)||null}}let router_RouterOutlet=(()=>{class RouterOutlet{constructor(parentContexts,location,resolver,name,changeDetector){this.parentContexts=parentContexts,this.location=location,this.resolver=resolver,this.changeDetector=changeDetector,this.activated=null,this._activatedRoute=null,this.activateEvents=new core_EventEmitter,this.deactivateEvents=new core_EventEmitter,this.name=name||"primary",parentContexts.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const context=this.parentContexts.getContext(this.name);context&&context.route&&(context.attachRef?this.attach(context.attachRef,context.route):this.activateWith(context.route,context.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const cmp=this.activated;return this.activated=null,this._activatedRoute=null,cmp}attach(ref,activatedRoute){this.activated=ref,this._activatedRoute=activatedRoute,this.location.insert(ref.hostView)}deactivate(){if(this.activated){const c=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(c)}}activateWith(activatedRoute,resolver){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=activatedRoute;const factory=(resolver=resolver||this.resolver).resolveComponentFactory(activatedRoute._futureSnapshot.routeConfig.component),childContexts=this.parentContexts.getOrCreateContext(this.name).children,injector=new OutletInjector(activatedRoute,childContexts,this.location.injector);this.activated=this.location.createComponent(factory,this.location.length,injector),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return RouterOutlet.fac=function(t){return new(t||RouterOutlet)(directiveInject(ChildrenOutletContexts),directiveInject(ViewContainerRef),directiveInject(ComponentFactoryResolver),injectAttribute("name"),directiveInject(ChangeDetectorRef))},RouterOutlet.dir=defineDirective({type:RouterOutlet,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),RouterOutlet})();class OutletInjector{constructor(route,childContexts,parent){this.route=route,this.childContexts=childContexts,this.parent=parent}get(token,notFoundValue){return token===router_ActivatedRoute?this.route:token===ChildrenOutletContexts?this.childContexts:this.parent.get(token,notFoundValue)}}class PreloadingStrategy{}class router_NoPreloading{preload(route,fn){return of(null)}}let router_RouterPreloader=(()=>{class RouterPreloader{constructor(router,moduleLoader,compiler,injector,preloadingStrategy){this.router=router,this.injector=injector,this.preloadingStrategy=preloadingStrategy,this.loader=new router_RouterConfigLoader(moduleLoader,compiler,r=>router.triggerEvent(new RouteConfigLoadStart(r)),r=>router.triggerEvent(new RouteConfigLoadEnd(r)))}setUpPreloading(){this.subscription=this.router.events.pipe(filter_filter(e=>e instanceof NavigationEnd),concatMap(()=>this.preload())).subscribe(()=>{})}preload(){const ngModule=this.injector.get(NgModuleRef);return this.processRoutes(ngModule,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(ngModule,routes){const res=[];for(const route of routes)if(route.loadChildren&&!route.canLoad&&route._loadedConfig){const childConfig=route._loadedConfig;res.push(this.processRoutes(childConfig.module,childConfig.routes))}else route.loadChildren&&!route.canLoad?res.push(this.preloadConfig(ngModule,route)):route.children&&res.push(this.processRoutes(ngModule,route.children));return from_from(res).pipe(mergeAll(),map_map(_=>{}))}preloadConfig(ngModule,route){return this.preloadingStrategy.preload(route,()=>this.loader.load(ngModule.injector,route).pipe(mergeMap(config=>(route._loadedConfig=config,this.processRoutes(config.module,config.routes)))))}}return RouterPreloader.fac=function(t){return new(t||RouterPreloader)(inject(router_Router),inject(NgModuleFactoryLoader),inject(Compiler),inject(Injector),inject(PreloadingStrategy))},RouterPreloader.prov=defineInjectable({token:RouterPreloader,factory:RouterPreloader.fac}),RouterPreloader})(),router_RouterScroller=(()=>{class RouterScroller{constructor(router,viewportScroller,options={}){this.router=router,this.viewportScroller=viewportScroller,this.options=options,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},options.scrollPositionRestoration=options.scrollPositionRestoration||"disabled",options.anchorScrolling=options.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof NavigationStart?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof NavigationEnd&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Scroll&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(routerEvent,anchor){this.router.triggerEvent(new Scroll(routerEvent,"popstate"===this.lastSource?this.store[this.restoredId]:null,anchor))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return RouterScroller.fac=function(t){invalidFactory()},RouterScroller.dir=defineDirective({type:RouterScroller}),RouterScroller})();const ROUTER_CONFIGURATION=new InjectionToken("ROUTER_CONFIGURATION"),ROUTER_FORROOT_GUARD=new InjectionToken("ROUTER_FORROOT_GUARD"),ROUTER_PROVIDERS=[common_Location,{provide:UrlSerializer,useClass:DefaultUrlSerializer},{provide:router_Router,useFactory:function(urlSerializer,contexts,location,injector,loader,compiler,config,opts={},urlHandlingStrategy,routeReuseStrategy){const router=new router_Router(null,urlSerializer,contexts,location,injector,loader,compiler,router_flatten(config));if(urlHandlingStrategy&&(router.urlHandlingStrategy=urlHandlingStrategy),routeReuseStrategy&&(router.routeReuseStrategy=routeReuseStrategy),opts.errorHandler&&(router.errorHandler=opts.errorHandler),opts.malformedUriErrorHandler&&(router.malformedUriErrorHandler=opts.malformedUriErrorHandler),opts.enableTracing){const dom=getDOM();router.events.subscribe(e=>{dom.logGroup("Router Event: "+e.constructor.name),dom.log(e.toString()),dom.log(e),dom.logGroupEnd()})}return opts.onSameUrlNavigation&&(router.onSameUrlNavigation=opts.onSameUrlNavigation),opts.paramsInheritanceStrategy&&(router.paramsInheritanceStrategy=opts.paramsInheritanceStrategy),opts.urlUpdateStrategy&&(router.urlUpdateStrategy=opts.urlUpdateStrategy),opts.relativeLinkResolution&&(router.relativeLinkResolution=opts.relativeLinkResolution),router},deps:[UrlSerializer,ChildrenOutletContexts,common_Location,Injector,NgModuleFactoryLoader,Compiler,ROUTES,ROUTER_CONFIGURATION,[class{},new Optional],[class{},new Optional]]},ChildrenOutletContexts,{provide:router_ActivatedRoute,useFactory:function(router){return router.routerState.root},deps:[router_Router]},{provide:NgModuleFactoryLoader,useClass:SystemJsNgModuleLoader},router_RouterPreloader,router_NoPreloading,class{preload(route,fn){return fn().pipe(catchError(()=>of(null)))}},{provide:ROUTER_CONFIGURATION,useValue:{enableTracing:!1}}];function routerNgProbeToken(){return new NgProbeToken("Router",router_Router)}let router_RouterModule=(()=>{class RouterModule{constructor(guard,router){}static forRoot(routes,config){return{ngModule:RouterModule,providers:[ROUTER_PROVIDERS,provideRoutes(routes),{provide:ROUTER_FORROOT_GUARD,useFactory:provideForRootGuard,deps:[[router_Router,new Optional,new SkipSelf]]},{provide:ROUTER_CONFIGURATION,useValue:config||{}},{provide:common_LocationStrategy,useFactory:router_provideLocationStrategy,deps:[common_PlatformLocation,[new Inject(APP_BASE_HREF),new Optional],ROUTER_CONFIGURATION]},{provide:router_RouterScroller,useFactory:createRouterScroller,deps:[router_Router,common_ViewportScroller,ROUTER_CONFIGURATION]},{provide:PreloadingStrategy,useExisting:config&&config.preloadingStrategy?config.preloadingStrategy:router_NoPreloading},{provide:NgProbeToken,multi:!0,useFactory:routerNgProbeToken},[router_RouterInitializer,{provide:APP_INITIALIZER,multi:!0,useFactory:getAppInitializer,deps:[router_RouterInitializer]},{provide:ROUTER_INITIALIZER,useFactory:getBootstrapListener,deps:[router_RouterInitializer]},{provide:APP_BOOTSTRAP_LISTENER,multi:!0,useExisting:ROUTER_INITIALIZER}]]}}static forChild(routes){return{ngModule:RouterModule,providers:[provideRoutes(routes)]}}}return RouterModule.mod=defineNgModule({type:RouterModule}),RouterModule.inj=defineInjector({factory:function(t){return new(t||RouterModule)(inject(ROUTER_FORROOT_GUARD,8),inject(router_Router,8))}}),RouterModule})();function createRouterScroller(router,viewportScroller,config){return config.scrollOffset&&viewportScroller.setOffset(config.scrollOffset),new router_RouterScroller(router,viewportScroller,config)}function router_provideLocationStrategy(platformLocationStrategy,baseHref,options={}){return options.useHash?new common_HashLocationStrategy(platformLocationStrategy,baseHref):new common_PathLocationStrategy(platformLocationStrategy,baseHref)}function provideForRootGuard(router){if(router)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function provideRoutes(routes){return[{provide:ANALYZE_FOR_ENTRY_COMPONENTS,multi:!0,useValue:routes},{provide:ROUTES,multi:!0,useValue:routes}]}let router_RouterInitializer=(()=>{class RouterInitializer{constructor(injector){this.injector=injector,this.initNavigation=!1,this.resultOfPreactivationDone=new Subject_Subject}appInitializer(){return this.injector.get(LOCATION_INITIALIZED,Promise.resolve(null)).then(()=>{let resolve=null;const res=new Promise(r=>resolve=r),router=this.injector.get(router_Router),opts=this.injector.get(ROUTER_CONFIGURATION);if(this.isLegacyDisabled(opts)||this.isLegacyEnabled(opts))resolve(!0);else if("disabled"===opts.initialNavigation)router.setUpLocationChangeListener(),resolve(!0);else{if("enabled"!==opts.initialNavigation)throw new Error(`Invalid initialNavigation options: '${opts.initialNavigation}'`);router.hooks.afterPreactivation=()=>this.initNavigation?of(null):(this.initNavigation=!0,resolve(!0),this.resultOfPreactivationDone),router.initialNavigation()}return res})}bootstrapListener(bootstrappedComponentRef){const opts=this.injector.get(ROUTER_CONFIGURATION),preloader=this.injector.get(router_RouterPreloader),routerScroller=this.injector.get(router_RouterScroller),router=this.injector.get(router_Router),ref=this.injector.get(core_ApplicationRef);bootstrappedComponentRef===ref.components[0]&&(this.isLegacyEnabled(opts)?router.initialNavigation():this.isLegacyDisabled(opts)&&router.setUpLocationChangeListener(),preloader.setUpPreloading(),routerScroller.init(),router.resetRootComponentType(ref.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(opts){return"legacy_enabled"===opts.initialNavigation||!0===opts.initialNavigation||void 0===opts.initialNavigation}isLegacyDisabled(opts){return"legacy_disabled"===opts.initialNavigation||!1===opts.initialNavigation}}return RouterInitializer.fac=function(t){return new(t||RouterInitializer)(inject(Injector))},RouterInitializer.prov=defineInjectable({token:RouterInitializer,factory:RouterInitializer.fac}),RouterInitializer})();function getAppInitializer(r){return r.appInitializer.bind(r)}function getBootstrapListener(r){return r.bootstrapListener.bind(r)}const ROUTER_INITIALIZER=new InjectionToken("Router Initializer");class AnimationBuilder{}function trigger(name,definitions){return{type:7,name:name,definitions:definitions,options:{}}}function animations_animate(timings,styles=null){return{type:4,styles:styles,timings:timings}}function sequence(steps,options=null){return{type:2,steps:steps,options:options}}function animations_style(tokens){return{type:6,styles:tokens,offset:null}}function animations_state(name,styles,options){return{type:0,name:name,styles:styles,options:options}}function animations_transition(stateChangeExpr,steps,options=null){return{type:1,expr:stateChangeExpr,animation:steps,options:options}}function animations_scheduleMicroTask(cb){Promise.resolve(null).then(cb)}class NoopAnimationPlayer{constructor(duration=0,delay=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this.parentPlayer=null,this.totalTime=duration+delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(fn=>fn()),this._onDoneFns=[])}onStart(fn){this._onStartFns.push(fn)}onDone(fn){this._onDoneFns.push(fn)}onDestroy(fn){this._onDestroyFns.push(fn)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){animations_scheduleMicroTask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(fn=>fn()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(fn=>fn()),this._onDestroyFns=[])}reset(){}setPosition(position){}getPosition(){return 0}triggerCallback(phaseName){const methods="start"==phaseName?this._onStartFns:this._onDoneFns;methods.forEach(fn=>fn()),methods.length=0}}class AnimationGroupPlayer{constructor(_players){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=_players;let doneCount=0,destroyCount=0,startCount=0;const total=this.players.length;0==total?animations_scheduleMicroTask(()=>this._onFinish()):this.players.forEach(player=>{player.onDone(()=>{++doneCount==total&&this._onFinish()}),player.onDestroy(()=>{++destroyCount==total&&this._onDestroy()}),player.onStart(()=>{++startCount==total&&this._onStart()})}),this.totalTime=this.players.reduce((time,player)=>Math.max(time,player.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(fn=>fn()),this._onDoneFns=[])}init(){this.players.forEach(player=>player.init())}onStart(fn){this._onStartFns.push(fn)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(fn=>fn()),this._onStartFns=[])}onDone(fn){this._onDoneFns.push(fn)}onDestroy(fn){this._onDestroyFns.push(fn)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(player=>player.play())}pause(){this.players.forEach(player=>player.pause())}restart(){this.players.forEach(player=>player.restart())}finish(){this._onFinish(),this.players.forEach(player=>player.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(player=>player.destroy()),this._onDestroyFns.forEach(fn=>fn()),this._onDestroyFns=[])}reset(){this.players.forEach(player=>player.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(p){const timeAtPosition=p*this.totalTime;this.players.forEach(player=>{const position=player.totalTime?Math.min(1,timeAtPosition/player.totalTime):1;player.setPosition(position)})}getPosition(){let min=0;return this.players.forEach(player=>{const p=player.getPosition();min=Math.min(p,min)}),min}beforeDestroy(){this.players.forEach(player=>{player.beforeDestroy&&player.beforeDestroy()})}triggerCallback(phaseName){const methods="start"==phaseName?this._onStartFns:this._onDoneFns;methods.forEach(fn=>fn()),methods.length=0}}class SkipOperator{constructor(total){this.total=total}call(subscriber,source){return source.subscribe(new skip_SkipSubscriber(subscriber,this.total))}}class skip_SkipSubscriber extends Subscriber_Subscriber{constructor(destination,total){super(destination),this.total=total,this.count=0}_next(x){++this.count>this.total&&this.destination.next(x)}}let fesm2015_MessageService=(()=>{class MessageService{constructor(){this.changes=new Subject_Subject}notify(rtl){this.changes.next({rtl:rtl})}get(key){}}return MessageService.fac=function(t){return new(t||MessageService)},MessageService.prov=defineInjectable({token:MessageService,factory:MessageService.fac}),MessageService})(),fesm2015_ComponentMessages=(()=>{class ComponentMessages{get override(){return!1}ngOnChanges(changes){this.register(changes),Object.keys(changes).some(field=>!changes[field].isFirstChange())&&this.service.notifyChanges()}ngOnInit(){this.subscription=this.service.changes.pipe((1,source=>source.lift(new SkipOperator(1)))).subscribe(()=>this.register(this))}register(changes){Object.keys(changes).forEach(key=>this.service.register(key,this[key],this.override))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return ComponentMessages.fac=function(t){return new(t||ComponentMessages)},ComponentMessages.dir=defineDirective({type:ComponentMessages,features:[NgOnChangesFeature]}),ComponentMessages})();const RTL=new InjectionToken("Kendo UI Right-to-Left token"),L10N_PREFIX=new InjectionToken("Localization key prefix");let fesm2015_LocalizationService=(()=>{class LocalizationService{constructor(prefix,messageService,_rtl){this.prefix=prefix,this.messageService=messageService,this._rtl=_rtl,this.changes=new BehaviorSubject_BehaviorSubject({rtl:this._rtl}),this.dictionary={},messageService&&(this.subscription=messageService.changes.pipe(map_map(({rtl:rtl})=>void 0!==rtl?rtl:this._rtl),tap(rtl=>this._rtl=rtl)).subscribe(rtl=>{this.dictionary={},this.changes.next({rtl:rtl})}))}get rtl(){return this._rtl}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}get(shortKey){const key=this.key(shortKey);return this.dictionary[key]}register(shortKey,value,override=!1){const key=this.key(shortKey);let message=value;if(!override){if(this.dictionary.hasOwnProperty(key))return;message=this.defaultValue(key,value)}this.dictionary[key]=message}notifyChanges(){this.changes.next({rtl:this.rtl})}key(shortKey){return this.prefix+"."+shortKey}defaultValue(key,value){if(!this.messageService)return value;const alt=this.messageService.get(key);return void 0===alt?value:alt}}return LocalizationService.fac=function(t){return new(t||LocalizationService)(inject(L10N_PREFIX),inject(fesm2015_MessageService,8),inject(RTL,8))},LocalizationService.prov=defineInjectable({token:LocalizationService,factory:LocalizationService.fac}),LocalizationService})();const _c0=["container"],_c3=["closeTitle",$localize`:kendo.notification.closeTitle|The title of the close buttonec4f6e0c77992a6dd3518cec396079fd0bd06d532647775058951488820:Close`];function NotificationComponent_span_4_Template(rf,ctx){1&rf&&element(0,"span",9),2&rf&&property("ngClass",nextContext().typeIconClass())}function NotificationComponent_ng_template_6_Template(rf,ctx){}function NotificationComponent_ng_template_7_Template(rf,ctx){1&rf&&text(0),2&rf&&textInterpolate1(" ",nextContext().templateString," ")}function NotificationComponent_a_10_Template(rf,ctx){if(1&rf){const _r6=getCurrentView();elementStart(0,"a",10),listener("click",(function(){return restoreView(_r6),nextContext().onCloseClick()})),elementEnd()}2&rf&&attribute("title",nextContext().closeButtonTitle)}const _c4=["group"];let fesm2015_NotificationComponent=(()=>{class NotificationComponent{constructor(cdr,element,renderer,builder,localizationService){this.cdr=cdr,this.element=element,this.renderer=renderer,this.builder=builder,this.localizationService=localizationService,this.close=new core_EventEmitter,this.width=null,this.height=null,this.defaultHideAfter=5e3,this.animationEnd=new core_EventEmitter,this.rtl=!1,this.dynamicRTLSubscription=localizationService.changes.subscribe(({rtl:rtl})=>{this.rtl=rtl,this.direction=this.rtl?"rtl":"ltr"})}get containerClass(){return!0}get closeButtonTitle(){return this.closeTitle||this.localizationService.get("closeTitle")}notificationClasses(){return`${this.type?this.typeClass():""}\n            ${this.closable?"k-notification-closable":""}`}ngOnInit(){clearTimeout(this.hideTimeout)}ngOnDestroy(){clearTimeout(this.hideTimeout),this.dynamicRTLSubscription&&this.dynamicRTLSubscription.unsubscribe()}ngAfterViewInit(){this.closable||this.animation||this.setHideTimeout(),!this.closable&&this.animation&&this.animationEnd.pipe(take_take(1)).subscribe(()=>this.setHideTimeout()),this.animation&&this.animate(this.animation)}typeClass(){return{none:"",success:"k-notification-success",warning:"k-notification-warning",error:"k-notification-error",info:"k-notification-info"}[this.type.style]}typeIconClass(){return{none:"",success:"k-i-success",warning:"k-i-warning",error:"k-i-error",info:"k-i-info"}[this.type.style]}onCloseClick(){clearTimeout(this.hideTimeout),this.hide()}hide(customComponent){const elementHeight=getComputedStyle(this.element.nativeElement).height;if(this.animation&&elementHeight)return this.animate(this.animation,!0),void this.animationEnd.subscribe(()=>{this.emitClose(customComponent)});this.emitClose(customComponent)}setHideTimeout(){this.hideTimeout=window.setTimeout(()=>this.onCloseClick(),this.hideAfter||this.defaultHideAfter)}emitClose(customComponent){customComponent&&customComponent.destroy(),this.close.emit()}play(animation,animatedElement){const factory=this.builder.build(animation),element=this.element.nativeElement;this.renderer.addClass(element,"k-notification-container-animating");let player=factory.create(animatedElement);player.onDone(()=>{this.renderer.removeClass(element,"k-notification-container-animating"),this.animationEnd.emit(),player&&(player.destroy(),player=null)}),player.play()}animate(animation,onclose){const element=this.element.nativeElement,duration=animation.duration,generatedAnimation="slide"===animation.type?this.slideAnimation(element.offsetHeight,duration,onclose):this.fadeAnimation(duration,onclose);this.play(generatedAnimation,element)}slideAnimation(height,duration,onclose){return onclose?function(height,duration){return[animations_style({height:height+"px"}),animations_animate(duration+"ms ease-in",animations_style({overflow:"hidden",height:0}))]}(height,duration):function(height,duration){return[animations_style({overflow:"hidden",height:0}),animations_animate(duration+"ms ease-in",animations_style({height:height+"px"}))]}(height,duration)}fadeAnimation(duration,onclose){return onclose?function(duration){return[animations_style({opacity:1}),animations_animate(duration+"ms ease-in",animations_style({opacity:0}))]}(duration):function(duration){return[animations_style({opacity:0}),animations_animate(duration+"ms ease-in",animations_style({opacity:1}))]}(duration)}}return NotificationComponent.fac=function(t){return new(t||NotificationComponent)(directiveInject(ChangeDetectorRef),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(AnimationBuilder),directiveInject(fesm2015_LocalizationService))},NotificationComponent.cmp=defineComponent({type:NotificationComponent,selectors:[["kendo-notification"]],viewQuery:function(rf,ctx){var _t;1&rf&&staticViewQuery(_c0,!0,ViewContainerRef),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.container=_t.first)},hostVars:3,hostBindings:function(rf,ctx){2&rf&&(attribute("dir",ctx.direction),classProp("k-notification-container",ctx.containerClass))},inputs:{width:"width",height:"height",templateRef:"templateRef",templateString:"templateString",cssClass:"cssClass",hideAfter:"hideAfter",closable:"closable",type:"type",animation:"animation"},features:[ProvidersFeature([fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.notification"}])],decls:11,vars:13,consts:[["kendoNotificationLocalizedMessages","",6,"closeTitle"],[3,"ngClass"],[1,"k-notification-wrap"],["class","k-icon",3,"ngClass",4,"ngIf"],[1,"k-notification-content"],[3,"ngIf","ngTemplateOutlet"],[3,"ngIf"],["container",""],["class","k-icon k-i-close",3,"click",4,"ngIf"],[1,"k-icon",3,"ngClass"],[1,"k-icon","k-i-close",3,"click"]],template:function(rf,ctx){var v0;1&rf&&(elementContainerStart(0,0),i18nAttributes(1,_c3),elementContainerEnd(),elementStart(2,"div",1),elementStart(3,"div",2),template(4,NotificationComponent_span_4_Template,1,1,"span",3),elementStart(5,"div",4),template(6,NotificationComponent_ng_template_6_Template,0,0,"ng-template",5),template(7,NotificationComponent_ng_template_7_Template,1,1,"ng-template",6),elementContainer(8,null,7),elementEnd(),template(10,NotificationComponent_a_10_Template,1,1,"a",8),elementEnd(),elementEnd()),2&rf&&(advance(2),"k-widget k-notification ",v0=ctx.notificationClasses(),"",checkStylingMap(keyValueArraySet,classStringParser,interpolation1(getLView(),"k-widget k-notification ",v0,""),!0),styleProp("height",ctx.height,"px")("width",ctx.width,"px"),property("ngClass",ctx.cssClass),advance(2),property("ngIf",ctx.type&&ctx.type.icon&&"none"!==ctx.type.style),advance(2),property("ngIf",ctx.templateRef)("ngTemplateOutlet",ctx.templateRef),advance(1),property("ngIf",ctx.templateString),advance(3),property("ngIf",ctx.closable))},directives:function(){return[fesm2015_LocalizedMessagesDirective,common_NgClass,common_NgIf,common_NgTemplateOutlet]},encapsulation:2}),NotificationComponent})(),fesm2015_NotificationContainerComponent=(()=>{class NotificationContainerComponent{constructor(element,renderer,resolver){this.element=element,this.renderer=renderer,this.resolver=resolver,this.id="",this.notifications=[]}ngOnDestroy(){this.notifications.forEach(notification=>{notification.closeClickSubscription&&notification.closeClickSubscription.unsubscribe()}),this.notifications=[]}addNotification(settings){this.position=settings.position,this.id=`${this.position.horizontal} ${this.position.vertical}`;const factory=this.resolver.resolveComponentFactory(fesm2015_NotificationComponent),notificationRef=this.container.createComponent(factory);this.applySettings(notificationRef,settings);let customComponent=null;if("function"==typeof settings.content){const customFactory=this.resolver.resolveComponentFactory(settings.content);customComponent=notificationRef.instance.container.createComponent(customFactory)}return notificationRef.changeDetectorRef.detectChanges(),this.notifications.push(notificationRef.instance),settings.appendTo&&this.applyAbsolutePosition(settings.appendTo),this.applyPosition(),this.applyContainerWrap(),{afterHide:notificationRef.instance.close,hide:()=>notificationRef.instance.hide(customComponent),notification:notificationRef,content:customComponent||null}}hide(notificationRef){const instance=notificationRef.instance,index=this.notifications.indexOf(instance);this.notifications.splice(index,1),instance.closeClickSubscription&&instance.closeClickSubscription.unsubscribe(),instance.templateRef=null,instance.templateString=null,notificationRef.destroy()}applyContainerWrap(){this.renderer.setStyle(this.group.nativeElement,"flex-wrap","right"===this.position.horizontal?"wrap-reverse":"wrap")}applySettings(notificationRef,settings){const notification=notificationRef.instance,content=settings.content,animation=settings.animation||null;notification.closeClickSubscription=notification.close.subscribe(()=>this.hide(notificationRef)),"string"==typeof content&&(notification.templateString=content),content instanceof TemplateRef&&(notification.templateRef=content),notification.animation=animation;let type=settings.type;type&&void 0===type.style&&(type.style="none"),type&&void 0===type.icon&&(type.icon=!0),notification.type=type,notification.closeTitle=settings.closeTitle,settings.cssClass&&(notification.cssClass=settings.cssClass),notification.closable=settings.closable,notification.hideAfter=settings.hideAfter,notification.width=settings.width,notification.height=settings.height}applyAbsolutePosition(appendToContainer){const appendTo=appendToContainer.element.nativeElement,el=this.element.nativeElement.children[0];"static"===window.getComputedStyle(appendTo).position&&this.renderer.setStyle(appendTo,"position","relative"),this.renderer.setStyle(el,"position","absolute")}applyPosition(){const element=this.element.nativeElement.children[0],elementHalfWidth=element.getBoundingClientRect().width/2,positionStyles=this.setContainerPosition(this.position,elementHalfWidth);Object.keys(positionStyles).forEach(cssStyle=>{element.style[cssStyle]=positionStyles[cssStyle]})}setContainerPosition(position,offsetMargin){const positionLayout={horizontal:{left:{left:0,alignItems:"flex-start"},right:{right:0,alignItems:"flex-start"},center:{left:"50%",marginLeft:-offsetMargin+"px",alignItems:"center"}},vertical:{top:{top:0},bottom:{bottom:0}}};return Object.assign({},positionLayout.horizontal[position.horizontal],positionLayout.vertical[position.vertical])}}return NotificationContainerComponent.fac=function(t){return new(t||NotificationContainerComponent)(directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(ComponentFactoryResolver))},NotificationContainerComponent.cmp=defineComponent({type:NotificationContainerComponent,selectors:[["kendo-notification-container"]],viewQuery:function(rf,ctx){var _t;1&rf&&(staticViewQuery(_c0,!0,ViewContainerRef),staticViewQuery(_c4,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.container=_t.first),queryRefresh(_t=loadQuery())&&(ctx.group=_t.first))},inputs:{id:"id"},decls:4,vars:0,consts:[[1,"k-notification-group"],["group",""],["container",""]],template:function(rf,ctx){1&rf&&(elementStart(0,"div",0,1),elementContainer(2,null,2),elementEnd())},encapsulation:2}),NotificationContainerComponent})();const NOTIFICATION_CONTAINER=new InjectionToken("Notification Container");let fesm2015_NotificationService=(()=>{class NotificationService{constructor(resolver,injector,container){this.resolver=resolver,this.injector=injector,this.container=container,this.notificationContainers=[],this.position={horizontal:"right",vertical:"top"}}show(settings){if(!settings)throw new Error("NotificationSettings settings are required");let target=this.findGroupContainer(settings);const position=settings.position||this.position,currentId=`${position.horizontal} ${position.vertical}`;let container,notificationRef,notificationContainer=this.notificationContainers.find(c=>target.nativeElement.contains(c.element.nativeElement)&&c.id===currentId);if(!notificationContainer){container=this.resolver.resolveComponentFactory(fesm2015_NotificationContainerComponent).create(this.injector),notificationContainer=container.instance,this.appRef.attachView(container.hostView);const hostViewElement=container.location.nativeElement;let groupContainer=this.findGroupContainer(settings);if(!groupContainer)throw new Error("\n                    View Container not found! Inject the NOTIFICATION_CONTAINER or define a specific ViewContainerRef via\n                    the appendTo option. See http://www.telerik.com/kendo-angular-ui/components/notification/api/NOTIFICATION_CONTAINER/\n                    for more details.\n                ");groupContainer.nativeElement.appendChild(hostViewElement),this.notificationContainers.push(notificationContainer)}return settings.position=position,notificationRef=notificationContainer.addNotification(settings),notificationRef}get appRef(){return this.applicationRef||(this.applicationRef=this.injector.get(core_ApplicationRef)),this.applicationRef}findGroupContainer(settings){let container;if(settings.appendTo)container=settings.appendTo.element;else if(this.container)container=this.container;else{const appRoot=this.appRef.components&&this.appRef.components[0];container=appRoot?appRoot.location:null}return container}}return NotificationService.fac=function(t){return new(t||NotificationService)(inject(ComponentFactoryResolver),inject(Injector),inject(NOTIFICATION_CONTAINER,8))},NotificationService.prov=defineInjectable({token:NotificationService,factory:NotificationService.fac}),NotificationService})(),fesm2015_LocalizedMessagesDirective=(()=>{class LocalizedMessagesDirective extends fesm2015_ComponentMessages{constructor(service){super(),this.service=service}}return LocalizedMessagesDirective.fac=function(t){return new(t||LocalizedMessagesDirective)(directiveInject(fesm2015_LocalizationService))},LocalizedMessagesDirective.dir=defineDirective({type:LocalizedMessagesDirective,selectors:[["","kendoNotificationLocalizedMessages",""]],inputs:{closeTitle:"closeTitle"},features:[ProvidersFeature([{provide:fesm2015_ComponentMessages,useExisting:forwardRef(()=>LocalizedMessagesDirective)}]),InheritDefinitionFeature]}),LocalizedMessagesDirective})(),fesm2015_NotificationModule=(()=>{class NotificationModule{}return NotificationModule.mod=defineNgModule({type:NotificationModule}),NotificationModule.inj=defineInjector({factory:function(t){return new(t||NotificationModule)},providers:[fesm2015_NotificationService],imports:[[common_CommonModule]]}),NotificationModule})();function owner_document_ownerDocument(element){return element.ownerDocument||element.document||element}var es2015_window=element=>owner_document_ownerDocument(element).defaultView,es2015_document=element=>owner_document_ownerDocument(element).documentElement;let cachedWidth=0;function scrollbarWidth(){if(!cachedWidth&&"undefined"!=typeof document){const div=document.createElement("div");div.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",div.innerHTML="&nbsp;",document.body.appendChild(div),cachedWidth=div.offsetWidth-div.scrollWidth,document.body.removeChild(div)}return cachedWidth}function windowViewport(element){const win=es2015_window(element),document=es2015_document(element),result={height:win.innerHeight,width:win.innerWidth};return document.scrollHeight-document.clientHeight>0&&(result.width-=scrollbarWidth()),result}var offset_parent=element=>{let offsetParent=element.offsetParent;for(;offsetParent&&"static"===offsetParent.style.position;)offsetParent=offsetParent.offsetParent;return offsetParent||es2015_document(element)},es2015_offset=element=>{let rect=element.getBoundingClientRect(),{left:left,top:top}=rect;return rect.height||rect.width||(rect=(element=>{const{display:display,left:left,position:position}=element.style;element.style.display="",element.style.left="-10000px",element.style.position="absolute";const rect=element.getBoundingClientRect();return element.style.display=display,element.style.left=left,element.style.position=position,rect})(element)),{top:top,left:left,height:rect.height,width:rect.width}},es2015_parents=(element,until)=>{const result=[];let next=element.parentNode;for(;next&&(result.push(next),next!==until);)next=next.parentNode;return result};function scrollPosition(element){const documentElement=es2015_document(element),win=es2015_window(element);return{x:win.pageXOffset||documentElement.scrollLeft||0,y:win.pageYOffset||documentElement.scrollTop||0}}var element_scroll_position=element=>element===(element.ownerDocument||{}).body?scrollPosition(element):{x:element.scrollLeft,y:element.scrollTop},position_with_scroll=(element,parent,scale=1)=>{const offsetParentElement=parent?offset_parent(parent):null,{top:top,left:left,height:height,width:width}=((element,parent)=>{const win=es2015_window(element),elementStyles=win.getComputedStyle(element),offset=es2015_offset(element),parentElement=parent||offset_parent(element),ownerDocument=element.ownerDocument;let parentOffset={top:0,left:0};if("fixed"!==elementStyles.position&&parentElement!==ownerDocument.body&&parentElement!==ownerDocument.documentElement){const parentStyles=win.getComputedStyle(parentElement);parentOffset=es2015_offset(parentElement),parentOffset.top+=parseInt(parentStyles.borderTopWidth,10),parentOffset.left+=parseInt(parentStyles.borderLeftWidth,10)}return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left,height:offset.height,width:offset.width}})(element,offsetParentElement),{x:x,y:y}=((offsetParentElement,element)=>offsetParentElement?element_scroll_position(offsetParentElement):function(element){const parent=offset_parent(element);return parent?element_scroll_position(parent):{x:0,y:0}}(element))(offsetParentElement,element),ownerDocument=element.ownerDocument,positionScale=offsetParentElement===ownerDocument.body||offsetParentElement===ownerDocument.documentElement?1:scale;return{top:top+y*positionScale,left:left+x*positionScale,height:height,width:width}};const fit=function(position,size,viewPortSize){let output=0;return position+size>viewPortSize&&(output=viewPortSize-(position+size)),position<0&&(output=-position),output},restrict_to_view_flip=function({offset:offset,size:size,anchorSize:anchorSize,viewPortSize:viewPortSize,anchorAlignPoint:anchorAlignPoint,elementAlignPoint:elementAlignPoint,margin:margin}){let output=0;const marginToAdd=2*margin;if(elementAlignPoint!==anchorAlignPoint&&"center"!==elementAlignPoint&&"middle"!==elementAlignPoint&&"center"!==anchorAlignPoint&&"middle"!==anchorAlignPoint){const isBeforeAnchor="top"===anchorAlignPoint||"left"===anchorAlignPoint;offset<0&&isBeforeAnchor?(output=size+anchorSize+marginToAdd,offset+output+size>viewPortSize&&(output=0)):offset>=0&&!isBeforeAnchor&&(offset+size>viewPortSize&&(output+=-(anchorSize+size+marginToAdd)),offset+output<0&&(output=0))}return output};var siblings=element=>{const result=[];let sibling=element.parentNode.firstElementChild;for(;sibling;)sibling!==element&&result.push(sibling),sibling=sibling.nextElementSibling;return result};const main_proxy=(a,b)=>e=>b(a(e)),bind=(el,event,callback)=>el.addEventListener&&el.addEventListener(event,callback),unbind=(el,event,callback)=>el&&el.removeEventListener&&el.removeEventListener(event,callback),main_noop=()=>{},main_preventDefault=e=>e.preventDefault(),touchRegExp=/touch/;function normalizeEvent(e){return e.type.match(touchRegExp)?{pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY,clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY,type:e.type,originalEvent:e,isTouch:!0}:{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,offsetX:e.offsetX,offsetY:e.offsetY,type:e.type,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,originalEvent:e}}var es2015_main=(()=>{class Draggable{static supportPointerEvent(){return"undefined"!=typeof window&&window.PointerEvent}constructor({press:press=main_noop,drag:drag=main_noop,release:release=main_noop,mouseOnly:mouseOnly=!1}){this._pressHandler=main_proxy(normalizeEvent,press),this._dragHandler=main_proxy(normalizeEvent,drag),this._releaseHandler=main_proxy(normalizeEvent,release),this._ignoreMouse=!1,this._mouseOnly=mouseOnly,this._touchstart=e=>{1===e.touches.length&&this._pressHandler(e)},this._touchmove=e=>{1===e.touches.length&&this._dragHandler(e)},this._touchend=e=>{0===e.touches.length&&1===e.changedTouches.length&&(this._releaseHandler(e),this._ignoreMouse=!0,setTimeout(this._restoreMouse,2e3))},this._restoreMouse=()=>{this._ignoreMouse=!1},this._mousedown=e=>{const{which:which}=e;which&&which>1||this._ignoreMouse||(bind(document,"mousemove",this._mousemove),bind(document,"mouseup",this._mouseup),this._pressHandler(e))},this._mousemove=e=>{this._dragHandler(e)},this._mouseup=e=>{unbind(document,"mousemove",this._mousemove),unbind(document,"mouseup",this._mouseup),this._releaseHandler(e)},this._pointerdown=e=>{e.isPrimary&&0===e.button&&(bind(document,"pointermove",this._pointermove),bind(document,"pointerup",this._pointerup),bind(document,"pointercancel",this._pointerup),bind(document,"contextmenu",main_preventDefault),this._pressHandler(e))},this._pointermove=e=>{e.isPrimary&&this._dragHandler(e)},this._pointerup=e=>{e.isPrimary&&(unbind(document,"pointermove",this._pointermove),unbind(document,"pointerup",this._pointerup),unbind(document,"pointercancel",this._pointerup),unbind(document,"contextmenu",main_preventDefault),this._releaseHandler(e))}}bindTo(element){element!==this._element&&(this._element&&this._unbindFromCurrent(),this._element=element,this._bindToCurrent())}_bindToCurrent(){const element=this._element;this._usePointers()?bind(element,"pointerdown",this._pointerdown):(bind(element,"mousedown",this._mousedown),this._mouseOnly||(bind(element,"touchstart",this._touchstart),bind(element,"touchmove",this._touchmove),bind(element,"touchend",this._touchend)))}_unbindFromCurrent(){const element=this._element;if(this._usePointers())return unbind(element,"pointerdown",this._pointerdown),unbind(document,"pointermove",this._pointermove),unbind(document,"pointerup",this._pointerup),unbind(document,"contextmenu",main_preventDefault),void unbind(document,"pointercancel",this._pointerup);unbind(element,"mousedown",this._mousedown),this._mouseOnly||(unbind(element,"touchstart",this._touchstart),unbind(element,"touchmove",this._touchmove),unbind(element,"touchend",this._touchend))}_usePointers(){return!this._mouseOnly&&Draggable.supportPointerEvent()}update({press:press=main_noop,drag:drag=main_noop,release:release=main_noop,mouseOnly:mouseOnly=!1}){this._pressHandler=main_proxy(normalizeEvent,press),this._dragHandler=main_proxy(normalizeEvent,drag),this._releaseHandler=main_proxy(normalizeEvent,release),this._mouseOnly=mouseOnly}destroy(){this._unbindFromCurrent(),this._element=null}}return Draggable.default=Draggable,Draggable})();class Action_Action extends Subscription_Subscription{constructor(scheduler,work){super()}schedule(state,delay=0){return this}}class AsyncAction_AsyncAction extends Action_Action{constructor(scheduler,work){super(scheduler,work),this.scheduler=scheduler,this.work=work,this.pending=!1}schedule(state,delay=0){if(this.closed)return this;this.state=state;const id=this.id,scheduler=this.scheduler;return null!=id&&(this.id=this.recycleAsyncId(scheduler,id,delay)),this.pending=!0,this.delay=delay,this.id=this.id||this.requestAsyncId(scheduler,this.id,delay),this}requestAsyncId(scheduler,id,delay=0){return setInterval(scheduler.flush.bind(scheduler,this),delay)}recycleAsyncId(scheduler,id,delay=0){if(null!==delay&&this.delay===delay&&!1===this.pending)return id;clearInterval(id)}execute(state,delay){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const error=this._execute(state,delay);if(error)return error;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(state,delay){let errored=!1,errorValue=void 0;try{this.work(state)}catch(e){errored=!0,errorValue=!!e&&e||new Error(e)}if(errored)return this.unsubscribe(),errorValue}_unsubscribe(){const id=this.id,scheduler=this.scheduler,actions=scheduler.actions,index=actions.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==index&&actions.splice(index,1),null!=id&&(this.id=this.recycleAsyncId(scheduler,id,null)),this.delay=null}}let Scheduler=(()=>{class Scheduler{constructor(SchedulerAction,now=Scheduler.now){this.SchedulerAction=SchedulerAction,this.now=now}schedule(work,delay=0,state){return new this.SchedulerAction(this,work).schedule(state,delay)}}return Scheduler.now=()=>Date.now(),Scheduler})();class AsyncScheduler_AsyncScheduler extends Scheduler{constructor(SchedulerAction,now=Scheduler.now){super(SchedulerAction,()=>AsyncScheduler_AsyncScheduler.delegate&&AsyncScheduler_AsyncScheduler.delegate!==this?AsyncScheduler_AsyncScheduler.delegate.now():now()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(work,delay=0,state){return AsyncScheduler_AsyncScheduler.delegate&&AsyncScheduler_AsyncScheduler.delegate!==this?AsyncScheduler_AsyncScheduler.delegate.schedule(work,delay,state):super.schedule(work,delay,state)}flush(action){const{actions:actions}=this;if(this.active)return void actions.push(action);let error;this.active=!0;do{if(error=action.execute(action.state,action.delay))break}while(action=actions.shift());if(this.active=!1,error){for(;action=actions.shift();)action.unsubscribe();throw error}}}const async_async=new AsyncScheduler_AsyncScheduler(AsyncAction_AsyncAction);class AuditOperator{constructor(durationSelector){this.durationSelector=durationSelector}call(subscriber,source){return source.subscribe(new audit_AuditSubscriber(subscriber,this.durationSelector))}}class audit_AuditSubscriber extends OuterSubscriber_OuterSubscriber{constructor(destination,durationSelector){super(destination),this.durationSelector=durationSelector,this.hasValue=!1}_next(value){if(this.value=value,this.hasValue=!0,!this.throttled){let duration;try{const{durationSelector:durationSelector}=this;duration=durationSelector(value)}catch(err){return this.destination.error(err)}const innerSubscription=subscribeToResult(this,duration);!innerSubscription||innerSubscription.closed?this.clearThrottle():this.add(this.throttled=innerSubscription)}}clearThrottle(){const{value:value,hasValue:hasValue,throttled:throttled}=this;throttled&&(this.remove(throttled),this.throttled=null,throttled.unsubscribe()),hasValue&&(this.value=null,this.hasValue=!1,this.destination.next(value))}notifyNext(outerValue,innerValue,outerIndex,innerIndex){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function isNumeric(val){return!isArray(val)&&val-parseFloat(val)+1>=0}function timer_dispatch(state){const{index:index,period:period,subscriber:subscriber}=state;if(subscriber.next(index),!subscriber.closed){if(-1===period)return subscriber.complete();state.index=index+1,this.schedule(state,period)}}function auditTime(duration,scheduler=async_async){return durationSelector=()=>function(dueTime=0,periodOrScheduler,scheduler){let period=-1;return isNumeric(periodOrScheduler)?period=Number(periodOrScheduler)<1?1:Number(periodOrScheduler):isScheduler(periodOrScheduler)&&(scheduler=periodOrScheduler),isScheduler(scheduler)||(scheduler=async_async),new Observable_Observable(subscriber=>{const due=isNumeric(dueTime)?dueTime:+dueTime-scheduler.now();return scheduler.schedule(timer_dispatch,due,{index:0,period:period,subscriber:subscriber})})}(duration,scheduler),function(source){return source.lift(new AuditOperator(durationSelector))};var durationSelector}function fromEvent(target,eventName,options,resultSelector){return isFunction(options)&&(resultSelector=options,options=void 0),resultSelector?fromEvent(target,eventName,options).pipe(map_map(args=>isArray(args)?resultSelector(...args):resultSelector(args))):new Observable_Observable(subscriber=>{!function setupSubscription(sourceObj,eventName,handler,subscriber,options){let unsubscribe;if(function(sourceObj){return sourceObj&&"function"==typeof sourceObj.addEventListener&&"function"==typeof sourceObj.removeEventListener}(sourceObj)){const source=sourceObj;sourceObj.addEventListener(eventName,handler,options),unsubscribe=()=>source.removeEventListener(eventName,handler,options)}else if(function(sourceObj){return sourceObj&&"function"==typeof sourceObj.on&&"function"==typeof sourceObj.off}(sourceObj)){const source=sourceObj;sourceObj.on(eventName,handler),unsubscribe=()=>source.off(eventName,handler)}else if(function(sourceObj){return sourceObj&&"function"==typeof sourceObj.addListener&&"function"==typeof sourceObj.removeListener}(sourceObj)){const source=sourceObj;sourceObj.addListener(eventName,handler),unsubscribe=()=>source.removeListener(eventName,handler)}else{if(!sourceObj||!sourceObj.length)throw new TypeError("Invalid event target");for(let i=0,len=sourceObj.length;i<len;i++)setupSubscription(sourceObj[i],eventName,handler,subscriber,options)}subscriber.add(unsubscribe)}(target,eventName,(function(e){subscriber.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),subscriber,options)})}const isDocumentAvailable=()=>"undefined"!=typeof document,isChanged=(propertyName,changes,skipFirstChange=!0)=>!(void 0===changes[propertyName]||changes[propertyName].isFirstChange()&&skipFirstChange||changes[propertyName].previousValue===changes[propertyName].currentValue),anyChanged=(propertyNames,changes,skipFirstChange=!0)=>propertyNames.some(name=>isChanged(name,changes,skipFirstChange)),hasObservers=emitter=>emitter&&emitter.observers.length>0,guid=()=>{let id="";for(let i=0;i<32;i++){const random=16*Math.random()|0;8!==i&&12!==i&&16!==i&&20!==i||(id+="-"),id+=(12===i?4:16===i?3&random|8:random).toString(16)}return id};let fesm2015_DraggableDirective=(()=>{class DraggableDirective{constructor(element,ngZone){this.element=element,this.ngZone=ngZone,this.enableDrag=!0,this.kendoPress=new core_EventEmitter,this.kendoDrag=new core_EventEmitter,this.kendoRelease=new core_EventEmitter}ngOnInit(){this.toggleDraggable()}ngOnChanges(changes){isChanged("enableDrag",changes)&&this.toggleDraggable()}ngOnDestroy(){this.destroyDraggable()}toggleDraggable(){isDocumentAvailable()&&(this.destroyDraggable(),this.enableDrag&&(this.draggable=new es2015_main({drag:e=>this.kendoDrag.next(e),press:e=>this.kendoPress.next(e),release:e=>this.kendoRelease.next(e)}),this.ngZone.runOutsideAngular(()=>this.draggable.bindTo(this.element.nativeElement))))}destroyDraggable(){this.draggable&&(this.draggable.destroy(),this.draggable=null)}}return DraggableDirective.fac=function(t){return new(t||DraggableDirective)(directiveInject(ElementRef),directiveInject(NgZone))},DraggableDirective.dir=defineDirective({type:DraggableDirective,selectors:[["","kendoDraggable",""]],inputs:{enableDrag:"enableDrag"},outputs:{kendoPress:"kendoPress",kendoDrag:"kendoDrag",kendoRelease:"kendoRelease"},features:[NgOnChangesFeature]}),DraggableDirective})(),fesm2015_DraggableModule=(()=>{class DraggableModule{}return DraggableModule.mod=defineNgModule({type:DraggableModule}),DraggableModule.inj=defineInjector({factory:function(t){return new(t||DraggableModule)},imports:[[common_CommonModule]]}),DraggableModule})(),fesm2015_EventsOutsideAngularDirective=(()=>{class EventsOutsideAngularDirective{constructor(element,ngZone,renderer){this.element=element,this.ngZone=ngZone,this.renderer=renderer,this.events={}}ngOnInit(){if(!this.element||!this.element.nativeElement)return;const events=this.events;this.subscriptions=[],this.ngZone.runOutsideAngular(()=>{for(let name in events)events.hasOwnProperty(name)&&this.subscriptions.push(this.renderer.listen(this.element.nativeElement,name,this.scope?events[name].bind(this.scope):events[name]))})}ngOnDestroy(){if(this.subscriptions){for(let idx=0;idx<this.subscriptions.length;idx++)this.subscriptions[idx]();this.subscriptions=null}}}return EventsOutsideAngularDirective.fac=function(t){return new(t||EventsOutsideAngularDirective)(directiveInject(ElementRef),directiveInject(NgZone),directiveInject(Renderer2))},EventsOutsideAngularDirective.dir=defineDirective({type:EventsOutsideAngularDirective,selectors:[["","kendoEventsOutsideAngular",""]],inputs:{events:["kendoEventsOutsideAngular","events"],scope:"scope"}}),EventsOutsideAngularDirective})(),fesm2015_EventsModule=(()=>{class EventsModule{}return EventsModule.mod=defineNgModule({type:EventsModule}),EventsModule.inj=defineInjector({factory:function(t){return new(t||EventsModule)}}),EventsModule})();class fesm2015_ResizeService{constructor(resizeBatchService){this.resizeBatchService=resizeBatchService,this.resize=new core_EventEmitter,this.acceptedSize=!1,this.state=0}acceptSize(size=this.measure()){this.lastWidth=size.width,this.lastHeight=size.height,this.acceptedSize=!0}checkChanges(){isDocumentAvailable()&&0===this.state&&(this.state=1,this.resizeBatchService.schedule(this,this.init))}destroy(){this.resizeBatchService.cancel(this)}checkSize(){if(!this.parentElement)return;const{width:width,height:height}=this.measure();return width===this.lastWidth&&height===this.lastHeight?void 0:(this.lastWidth=width,this.lastHeight=height,this.acceptedSize=!1,this.resize.emit(),!0)}initSize(){const size=this.measure();this.lastWidth=size.width,this.lastHeight=size.height}measure(){let width=0,height=0;return this.parentElement&&(height=this.parentElement.offsetHeight,width=this.parentElement.offsetWidth),{height:height,width:width}}}const div=style=>{const el=document.createElement("div");return el.style.cssText=style,el},WRAP_STYLE="position: absolute; display: block; left: 0; top: 0; right: 0; bottom: 0; z-index: -1;overflow: hidden; visibility: hidden;";class fesm2015_ResizeCompatService extends fesm2015_ResizeService{constructor(resizeBatchService,element,ngZone){super(resizeBatchService),this.element=element,this.ngZone=ngZone}checkChanges(){2!==this.state?super.checkChanges():this.resizeBatchService.isScheduled(this)||this.resizeBatchService.schedule(this,this.checkSize)}destroy(){if(super.destroy(),this.subscription&&this.subscription.unsubscribe(),this.expand){const element=this.element.nativeElement;element.removeChild(this.expand),element.removeChild(this.shrink),this.expand.removeChild(this.expandChild),this.expand=this.expandChild=this.shrink=this.element=null}}checkSize(){if(super.checkSize())return this.reset(),!0}init(){const parentElement=this.parentElement=this.element.nativeElement.parentElement;"static"===getComputedStyle(parentElement,null).getPropertyValue("position")&&(parentElement.style.position="relative"),this.state=2,this.render(),this.reset(),this.initSize(),this.subscribe()}render(){const element=this.element.nativeElement;element.style.cssText=WRAP_STYLE,element.setAttribute("dir","ltr"),this.expand=div(WRAP_STYLE),this.expandChild=div("position: absolute; left: 0; top: 0; transition: 0s;"),this.expand.appendChild(this.expandChild),element.appendChild(this.expand),this.shrink=div(WRAP_STYLE);const shrinkChild=div("position: absolute; left: 0; top: 0; transition: 0s;width: 200%; height: 200%;");this.shrink.appendChild(shrinkChild),element.appendChild(this.shrink)}reset(){const expandChild=this.expandChild;expandChild.style.width="100000px",expandChild.style.height="100000px";const expand=this.expand;expand.scrollLeft=1e5,expand.scrollTop=1e5;const shrink=this.shrink;shrink.scrollLeft=1e5,shrink.scrollTop=1e5}subscribe(){this.ngZone.runOutsideAngular(()=>{this.subscription=merge(fromEvent(this.shrink,"scroll"),fromEvent(this.expand,"scroll")).subscribe(()=>{this.checkSize()})})}}const HAS_OBSERVER="undefined"!=typeof ResizeObserver;class ResizeObserverService extends fesm2015_ResizeService{constructor(resizeBatchService,element,ngZone){super(resizeBatchService),this.element=element,this.ngZone=ngZone}static supported(){return HAS_OBSERVER}destroy(){super.destroy(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.parentElement=null}init(){this.parentElement=this.element.nativeElement.parentElement,this.initSize(),this.state=2,this.ngZone.runOutsideAngular(()=>{this.resizeObserver=new ResizeObserver(()=>{this.checkSize()}),this.resizeObserver.observe(this.parentElement)})}}let fesm2015_ResizeBatchService=(()=>{class ResizeBatchService{constructor(ngZone){this.ngZone=ngZone,this.scheduled=[],this.resolvedPromise=Promise.resolve(null),this.flush=this.flush.bind(this)}schedule(instance,method){this.scheduled.push({instance:instance,method:method}),this.subscription||this.ngZone.runOutsideAngular(()=>{this.subscription=from_from(this.resolvedPromise).subscribe(this.flush)})}isScheduled(instance){return Boolean(this.scheduled.find(item=>item.instance===instance))}cancel(instance){const scheduled=this.scheduled,count=scheduled.length;for(let idx=0;idx<count;idx++)if(scheduled[idx].instance===instance)return scheduled.splice(idx,1),void(scheduled.length||this.unsubscribe())}ngOnDestroy(){this.unsubscribe()}unsubscribe(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}flush(){this.scheduled.forEach(item=>{item.method.call(item.instance)}),this.scheduled=[],this.unsubscribe()}}return ResizeBatchService.fac=function(t){return new(t||ResizeBatchService)(inject(NgZone))},ResizeBatchService.prov=defineInjectable({token:ResizeBatchService,factory:ResizeBatchService.fac}),ResizeBatchService})(),fesm2015_ResizeSensorComponent=(()=>{class ResizeSensorComponent{constructor(resizeBatchService,element,ngZone){this.rateLimit=10,this.resize=new core_EventEmitter;const serviceType=ResizeObserverService.supported()?ResizeObserverService:fesm2015_ResizeCompatService;this.resizeService=new serviceType(resizeBatchService,element,ngZone),this.subscription=this.resizeService.resize.pipe(auditTime(1e3/(this.rateLimit||10))).subscribe(()=>{this.resizeService.acceptedSize||this.resize.emit()})}ngAfterViewChecked(){this.resizeService.checkChanges()}ngOnDestroy(){this.subscription.unsubscribe(),this.resizeService.destroy()}acceptSize(size){this.resizeService.acceptSize(size)}}return ResizeSensorComponent.fac=function(t){return new(t||ResizeSensorComponent)(directiveInject(fesm2015_ResizeBatchService),directiveInject(ElementRef),directiveInject(NgZone))},ResizeSensorComponent.cmp=defineComponent({type:ResizeSensorComponent,selectors:[["kendo-resize-sensor"]],inputs:{rateLimit:"rateLimit"},outputs:{resize:"resize"},decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),ResizeSensorComponent})(),fesm2015_ResizeSensorModule=(()=>{class ResizeSensorModule{}return ResizeSensorModule.mod=defineNgModule({type:ResizeSensorModule}),ResizeSensorModule.inj=defineInjector({factory:function(t){return new(t||ResizeSensorModule)},providers:[fesm2015_ResizeBatchService]}),ResizeSensorModule})();class KendoInput{}var Keys=function(Keys){return Keys[Keys.Alt=18]="Alt",Keys[Keys.ArrowDown=40]="ArrowDown",Keys[Keys.ArrowLeft=37]="ArrowLeft",Keys[Keys.ArrowRight=39]="ArrowRight",Keys[Keys.ArrowUp=38]="ArrowUp",Keys[Keys.Backspace=8]="Backspace",Keys[Keys.Control=17]="Control",Keys[Keys.Delete=46]="Delete",Keys[Keys.Digit0=48]="Digit0",Keys[Keys.Digit1=49]="Digit1",Keys[Keys.Digit2=50]="Digit2",Keys[Keys.Digit3=51]="Digit3",Keys[Keys.Digit4=52]="Digit4",Keys[Keys.Digit5=53]="Digit5",Keys[Keys.Digit6=54]="Digit6",Keys[Keys.Digit7=55]="Digit7",Keys[Keys.Digit8=56]="Digit8",Keys[Keys.Digit9=57]="Digit9",Keys[Keys.End=35]="End",Keys[Keys.Enter=13]="Enter",Keys[Keys.Escape=27]="Escape",Keys[Keys.F1=112]="F1",Keys[Keys.F2=113]="F2",Keys[Keys.F10=121]="F10",Keys[Keys.Home=36]="Home",Keys[Keys.Insert=45]="Insert",Keys[Keys.KeyA=65]="KeyA",Keys[Keys.KeyB=66]="KeyB",Keys[Keys.KeyC=67]="KeyC",Keys[Keys.KeyD=68]="KeyD",Keys[Keys.KeyE=69]="KeyE",Keys[Keys.KeyF=70]="KeyF",Keys[Keys.KeyG=71]="KeyG",Keys[Keys.KeyH=72]="KeyH",Keys[Keys.KeyI=73]="KeyI",Keys[Keys.KeyJ=74]="KeyJ",Keys[Keys.KeyK=75]="KeyK",Keys[Keys.KeyL=76]="KeyL",Keys[Keys.KeyM=77]="KeyM",Keys[Keys.KeyN=78]="KeyN",Keys[Keys.KeyO=79]="KeyO",Keys[Keys.KeyP=80]="KeyP",Keys[Keys.KeyQ=81]="KeyQ",Keys[Keys.KeyR=82]="KeyR",Keys[Keys.KeyS=83]="KeyS",Keys[Keys.KeyT=84]="KeyT",Keys[Keys.KeyU=85]="KeyU",Keys[Keys.KeyV=86]="KeyV",Keys[Keys.KeyW=87]="KeyW",Keys[Keys.KeyX=88]="KeyX",Keys[Keys.KeyY=89]="KeyY",Keys[Keys.KeyZ=90]="KeyZ",Keys[Keys.NumpadDecimal=110]="NumpadDecimal",Keys[Keys.PageDown=34]="PageDown",Keys[Keys.PageUp=33]="PageUp",Keys[Keys.Shift=16]="Shift",Keys[Keys.Space=32]="Space",Keys[Keys.Tab=9]="Tab",Keys}({});const fesm2015_c0=["container"];function PopupComponent_ng_template_3_Template(rf,ctx){}const _c1=["*"],eitherRect=(rect,offset$$1)=>rect||{height:0,left:offset$$1.left,top:offset$$1.top,width:0},isWindowAvailable=()=>"undefined"!=typeof window,OVERFLOW_REGEXP=/auto|scroll/,overflowStyle=element=>(element=>`${element.style.overflow}${element.style.overflowX}${element.style.overflowY}`)(element)||(element=>{const styles=window.getComputedStyle(element);return`${styles.overflow}${styles.overflowX}${styles.overflowY}`})(element);function memoize(fun){let result,called=!1;return(...args)=>(called||(result=fun(...args),called=!0),result)}const hasRelativeStackingContext=memoize(()=>{if(!isDocumentAvailable()&&null!==document.body)return!1;const parent=document.createElement("div");parent.style.transform="matrix(10, 0, 0, 10, 0, 0)",parent.innerHTML='<div style="position: fixed; top: 10px;">child</div>',document.body.appendChild(parent);const isDifferent=10!==parent.children[0].getBoundingClientRect().top;return document.body.removeChild(parent),isDifferent}),scaleRect=(rect,scale)=>rect&&1!==scale?{height:rect.height/scale,left:rect.left/scale,top:rect.top/scale,width:rect.width/scale}:rect,STYLES=["font-size","font-family","font-stretch","font-style","font-weight","line-height"];let fesm2015_DOMService=(()=>{class DOMService{addOffset(current,addition){return{left:current.left+addition.left,top:current.top+addition.top}}addScroll(rect,scroll){return function(rect,scroll){return{top:rect.top+scroll.y,left:rect.left+scroll.x,height:rect.height,width:rect.width}}(rect,scroll)}align(settings){return(options=>{const{anchorRect:anchorRect,anchorAlign:anchorAlign,elementRect:elementRect,elementAlign:elementAlign,margin:margin={}}=options,anchorHorizontal=anchorAlign.horizontal,anchorVertical=anchorAlign.vertical,elementHorizontal=elementAlign.horizontal,elementVertical=elementAlign.vertical;let horizontalMargin=margin.horizontal||0,verticalMargin=margin.vertical||0,top=anchorRect.top,left=anchorRect.left;return"bottom"===anchorVertical&&(top+=anchorRect.height),"center"!==anchorVertical&&"middle"!==anchorVertical||(top+=Math.round(anchorRect.height/2)),"bottom"===elementVertical&&(top-=elementRect.height,verticalMargin*=-1),"center"!==elementVertical&&"middle"!==elementVertical||(top-=Math.round(elementRect.height/2),verticalMargin*=-1),"right"===anchorHorizontal&&(left+=anchorRect.width),"center"!==anchorHorizontal&&"middle"!==anchorHorizontal||(left+=Math.round(anchorRect.width/2)),"right"===elementHorizontal&&(left-=elementRect.width,horizontalMargin*=-1),"center"!==elementHorizontal&&"middle"!==elementHorizontal||(left-=Math.round(elementRect.width/2),horizontalMargin*=-1),{top:top+verticalMargin,left:left+horizontalMargin}})(settings)}boundingOffset(el){return(element=>{if(!element.getBoundingClientRect){const viewport=windowViewport(element);return{bottom:viewport.height,left:0,right:viewport.width,top:0}}const{bottom:bottom,left:left,right:right,top:top}=element.getBoundingClientRect();return{bottom:bottom,left:left,right:right,top:top}})(this.nativeElement(el))}getFontStyles(el){const window=this.getWindow();if(!window||!el)return[];const computedStyles=window.getComputedStyle(this.nativeElement(el));return STYLES.map(font=>({key:font,value:computedStyles[font]}))}getWindow(){return isWindowAvailable()?window:null}hasOffsetParent(el){return!!el&&!!this.nativeElement(el).offsetParent}offset(el){return el?es2015_offset(this.nativeElement(el)):null}offsetAtPoint(el,currentLocation){if(!el)return null;const element=this.nativeElement(el),{left:left,top:top,transition:transition}=element.style;element.style.transition="none",element.style.left=currentLocation.left+"px",element.style.top=currentLocation.top+"px";const currentOffset=es2015_offset(element);return element.style.left=left,element.style.top=top,element.style.transition=transition,currentOffset}nativeElement(el){return el?el.nativeElement||el:null}position(element,popup,scale=1){return element&&popup?position_with_scroll(this.nativeElement(element),this.nativeElement(popup),scale):null}removeScroll(rect,scroll){return function(rect,scroll){return{top:rect.top-scroll.y,left:rect.left-scroll.x,height:rect.height,width:rect.width}}(rect,scroll)}restrictToView(settings){return(options=>{const{anchorRect:anchorRect,anchorAlign:anchorAlign,elementRect:elementRect,elementAlign:elementAlign,collisions:collisions,viewPort:viewPort,margin:margin={}}=options,{top:elementTop,left:elementLeft,height:elementHeight,width:elementWidth}=elementRect,{height:viewPortHeight,width:viewPortWidth}=viewPort,horizontalMargin=margin.horizontal||0,verticalMargin=margin.vertical||0;let left=0,top=0;const isHorizontalFlip="flip"===collisions.horizontal,isVerticalFlip="flip"===collisions.vertical;"fit"===collisions.vertical&&(top+=fit(elementTop,elementHeight,viewPortHeight)),"fit"===collisions.horizontal&&(left+=fit(elementLeft,elementWidth,viewPortWidth)),isVerticalFlip&&(top+=restrict_to_view_flip({margin:verticalMargin,offset:elementTop,size:elementHeight,anchorSize:anchorRect.height,viewPortSize:viewPortHeight,anchorAlignPoint:anchorAlign.vertical,elementAlignPoint:elementAlign.vertical})),isHorizontalFlip&&(left+=restrict_to_view_flip({margin:horizontalMargin,offset:elementLeft,size:elementWidth,anchorSize:anchorRect.width,viewPortSize:viewPortWidth,anchorAlignPoint:anchorAlign.horizontal,elementAlignPoint:elementAlign.horizontal}));const flippedHorizontal=isHorizontalFlip&&0!==left,flippedVertical=isVerticalFlip&&0!==top;return{flipped:flippedHorizontal||flippedVertical,flip:{horizontal:flippedHorizontal,vertical:flippedVertical},offset:{left:left,top:top}}})(settings)}scrollPosition(el){return scrollPosition(this.nativeElement(el))}scrollableParents(el){return(element=>{const parentElements=[];if(!isDocumentAvailable()||!isWindowAvailable())return parentElements;let parent=element.parentElement;for(;parent;)(OVERFLOW_REGEXP.test(overflowStyle(parent))||parent.hasAttribute("data-scrollable"))&&parentElements.push(parent),parent=parent.parentElement;return parentElements.push(window),parentElements})(this.nativeElement(el))}stackingElementOffset(el){const relativeContextElement=this.getRelativeContextElement(el);return relativeContextElement?es2015_offset(relativeContextElement):null}stackingElementScroll(el){const relativeContextElement=this.getRelativeContextElement(el);return relativeContextElement?{x:relativeContextElement.scrollLeft,y:relativeContextElement.scrollTop}:{x:0,y:0}}getRelativeContextElement(el){if(!el||!hasRelativeStackingContext())return null;let parent=this.nativeElement(el).parentElement;for(;parent;){if("none"!==window.getComputedStyle(parent).transform)return parent;parent=parent.parentElement}return null}useRelativePosition(el){return!!this.getRelativeContextElement(el)}windowViewPort(el){return windowViewport(this.nativeElement(el))}zIndex(anchor,container){return((anchor,container)=>{if(!anchor||!isDocumentAvailable()||!isWindowAvailable())return null;const sibling=((anchor,container)=>{const parentElements=es2015_parents(anchor);let siblingElements,result,containerElement=container;for(;containerElement&&(siblingElements=siblings(containerElement),result=parentElements.reduce((list,p)=>list.concat(siblingElements.filter(s=>s===p)),[])[0],!result);)containerElement=containerElement.parentElement;return result})(anchor,container);if(!sibling)return null;const result=[anchor].concat(es2015_parents(anchor,sibling)).reduce((index,p)=>{const zIndexStyle=p.style.zIndex||window.getComputedStyle(p).zIndex,current=parseInt(zIndexStyle,10);return current>index?current:index},0);return result?result+1:null})(this.nativeElement(anchor),this.nativeElement(container))}zoomLevel(){return isDocumentAvailable()&&isWindowAvailable()&&parseFloat((document.documentElement.clientWidth/window.innerWidth).toFixed(2))||1}isZoomed(){return this.zoomLevel()>1}}return DOMService.fac=function(t){return new(t||DOMService)},DOMService.prov=defineInjectable({token:DOMService,factory:DOMService.fac}),DOMService})();const SCALE=new InjectionToken("Popup Document Scale");let fesm2015_AlignService=(()=>{class AlignService{constructor(_dom,scale=1){this._dom=_dom,this.scale=scale}alignElement(settings){const{anchor:anchor,element:element,anchorAlign:anchorAlign,elementAlign:elementAlign,margin:margin,offset:offset$$1,positionMode:positionMode}=settings,scale=this.scale||1,anchorRect="fixed"!==positionMode&&this._dom.hasOffsetParent(element)?this.relativeRect(anchor,element,offset$$1,scale):this.absoluteRect(anchor,element,offset$$1,scale),elementRect=scaleRect(this._dom.offset(element),scale);return this._dom.align({anchorAlign:anchorAlign,anchorRect:anchorRect,elementAlign:elementAlign,elementRect:elementRect,margin:margin})}absoluteRect(anchor,element,offset$$1,scale){const scrollPos=this.elementScrollPosition(anchor,element),rect=eitherRect(this._dom.offset(anchor),offset$$1),stackScale=2*scale,stackScroll=this._dom.stackingElementScroll(element);1!==scale&&stackScroll&&(stackScroll.x/=stackScale,stackScroll.y/=stackScale);const stackOffset=this._dom.stackingElementOffset(element);return 1!==scale&&stackOffset&&(stackOffset.left/=stackScale,stackOffset.top/=stackScale),this._dom.removeScroll(this._dom.addScroll(((rect,stackingOffset)=>stackingOffset?{height:rect.height,left:rect.left-stackingOffset.left,top:rect.top-stackingOffset.top,width:rect.width}:rect)(scaleRect(rect,scale),stackOffset),stackScroll),scrollPos)}elementScrollPosition(anchor,element){return anchor?{x:0,y:0}:this._dom.scrollPosition(element)}relativeRect(anchor,element,offset$$1,scale){const rect=eitherRect(this._dom.position(anchor,element,scale),offset$$1);return scaleRect(rect,scale)}}return AlignService.fac=function(t){return new(t||AlignService)(inject(fesm2015_DOMService),inject(SCALE,8))},AlignService.prov=defineInjectable({token:AlignService,factory:AlignService.fac}),AlignService})(),fesm2015_PositionService=(()=>{class PositionService{constructor(_dom,scale=1){this._dom=_dom,this.scale=scale}positionElement(settings){const{anchor:anchor,currentLocation:currentLocation,element:element,anchorAlign:anchorAlign,elementAlign:elementAlign,collisions:collisions,margin:margin}=settings,dom=this._dom,scale=this.scale||1,elementOffset=dom.offsetAtPoint(element,currentLocation),elementRect=scaleRect(elementOffset,scale),anchorOffset=scaleRect(dom.offset(anchor),scale),anchorRect=eitherRect(anchorOffset,currentLocation),viewPort=settings.viewPort||dom.windowViewPort(element);viewPort.width=viewPort.width/scale,viewPort.height=viewPort.height/scale;const result=dom.restrictToView({anchorAlign:anchorAlign,anchorRect:anchorRect,collisions:collisions,elementAlign:elementAlign,elementRect:elementRect,margin:margin,viewPort:viewPort}),offset$$1=dom.addOffset(currentLocation,result.offset);return{flip:result.flip,flipped:result.flipped,offset:offset$$1}}}return PositionService.fac=function(t){return new(t||PositionService)(inject(fesm2015_DOMService),inject(SCALE,8))},PositionService.prov=defineInjectable({token:PositionService,factory:PositionService.fac}),PositionService})(),dist_fesm2015_ResizeService=(()=>{class ResizeService{constructor(_dom,_zone){this._dom=_dom,this._zone=_zone}subscribe(callback){isDocumentAvailable()&&this._zone.runOutsideAngular(()=>{this.subscription=fromEvent(this._dom.getWindow(),"resize").pipe(auditTime(1e3/60)).subscribe(()=>callback())})}unsubscribe(){this.subscription&&this.subscription.unsubscribe()}isUnsubscribed(){return this.subscription&&this.subscription.closed}}return ResizeService.fac=function(t){return new(t||ResizeService)(inject(fesm2015_DOMService),inject(NgZone))},ResizeService.prov=defineInjectable({token:ResizeService,factory:ResizeService.fac}),ResizeService})(),fesm2015_ScrollableService=(()=>{class ScrollableService{constructor(_dom,_zone){this._dom=_dom,this._zone=_zone}forElement(element){return this.unsubscribe(),this.element=element,this}subscribe(callback){if(!callback||!isDocumentAvailable()||!this.element)return;const nativeElement=this._dom.nativeElement(this.element),parents$$1=this._dom.scrollableParents(this.element);this._zone.runOutsideAngular(()=>{const observables=parents$$1.map(p=>fromEvent(p,"scroll").pipe(auditTime(1e3/60)));this.subscription=merge(...observables).subscribe(e=>{const target=e.target,isParent=parents$$1.filter(p=>p===target).length>0,isDocument=target===document,isWindow=target===window;(isParent||isDocument||isWindow)&&callback(this.isVisible(nativeElement,target))})})}unsubscribe(){this.subscription&&this.subscription.unsubscribe()}isVisible(elem,container){const elemRect=this._dom.boundingOffset(elem),containerRect=this._dom.boundingOffset(container);return!(1<containerRect.top-elemRect.bottom||1<elemRect.top-containerRect.bottom||1<elemRect.left-containerRect.right||1<containerRect.left-elemRect.right)}}return ScrollableService.fac=function(t){return new(t||ScrollableService)(inject(fesm2015_DOMService),inject(NgZone))},ScrollableService.prov=defineInjectable({token:ScrollableService,factory:ScrollableService.fac}),ScrollableService})();const animationTypes=function(){return{expand:direction=>{const scale="up"===direction||"down"===direction?"scaleY":"scaleX";let origin;return origin="down"===direction?"top":"left"===direction?"right":"right"===direction?"left":"bottom",{start:{transform:scale+"(0)",transformOrigin:origin},end:{transform:scale+"(1)"}}},slide:direction=>{const translate="left"===direction||"right"===direction?"translateX":"translateY";return{start:{transform:`${translate}(${"right"===direction||"down"===direction?-100:100}%)`},end:{transform:translate+"(0%)"}}},fade:()=>({start:{opacity:0},end:{opacity:1}}),zoom:()=>({start:{transform:"scale(0)"},end:{transform:"scale(1)"}})}}();let fesm2015_AnimationService=(()=>{class AnimationService{constructor(animationBuilder){this.animationBuilder=animationBuilder,this.start=new core_EventEmitter,this.end=new core_EventEmitter}play(element,options,flip){if(!this.flip||this.flip.horizontal!==flip.horizontal||this.flip.vertical!==flip.vertical){this.flip=flip;const type=options.type||"slide",statesFn=animationTypes[type];if(statesFn){const states=statesFn(this.getDirection(flip,options));this.playStates(element,states,options)}else if(isDevMode())throw new Error(`Unsupported animation type: "${type}". The supported types are slide, expand, fade and zoom.`)}}ngOnDestroy(){this.stopPlayer()}playStates(element,states,options){this.stopPlayer();const duration=options.duration||100,factory=this.animationBuilder.build([animations_style(states.start),animations_animate(duration+"ms ease-in",animations_style(states.end))]),player=this.player=factory.create(element);player.onDone(()=>{this.end.emit(),this.stopPlayer()}),this.start.emit(),player.play()}getDirection(flip,options){let direction=options.direction||"down";return flip.horizontal&&("left"===direction?direction="right":"right"===direction&&(direction="left")),flip.vertical&&("down"===direction?direction="up":"up"===direction&&(direction="down")),direction}stopPlayer(){this.player&&(this.player.destroy(),this.player=null)}}return AnimationService.fac=function(t){return new(t||AnimationService)(inject(AnimationBuilder))},AnimationService.prov=defineInjectable({token:AnimationService,factory:AnimationService.fac}),AnimationService})();const DEFAULT_OFFSET={left:-1e4,top:0};let fesm2015_PopupComponent=(()=>{class PopupComponent{constructor(container,_alignService,domService,_positionService,_resizeService,_scrollableService,animationService,_renderer,_zone){this.container=container,this._alignService=_alignService,this.domService=domService,this._positionService=_positionService,this._resizeService=_resizeService,this._scrollableService=_scrollableService,this.animationService=animationService,this._renderer=_renderer,this._zone=_zone,this.animate=!0,this.anchorAlign={horizontal:"left",vertical:"bottom"},this.collision={horizontal:"fit",vertical:"flip"},this.popupAlign={horizontal:"left",vertical:"top"},this.copyAnchorStyles=!1,this.positionMode="fixed",this.offset=DEFAULT_OFFSET,this.anchorViewportLeave=new core_EventEmitter,this.close=new core_EventEmitter,this.open=new core_EventEmitter,this.positionChange=new core_EventEmitter,this.resolvedPromise=Promise.resolve(null),this.initialCheck=!0,this._renderer.addClass(container.nativeElement,"k-animation-container"),this.updateFixedClass()}ngOnInit(){this.reposition=this.reposition.bind(this),this._resizeService.subscribe(this.reposition),this.animationSubscriptions=this.animationService.start.subscribe(this.onAnimationStart.bind(this)),this.animationSubscriptions.add(this.animationService.end.subscribe(this.onAnimationEnd.bind(this))),this._scrollableService.forElement(this.anchor||this.container).subscribe(this.onScroll.bind(this)),this.currentOffset=DEFAULT_OFFSET,this.setZIndex(),this.copyFontStyles(),this.updateFixedClass()}ngOnChanges(changes){changes.copyAnchorStyles&&this.copyFontStyles(),changes.positionMode&&this.updateFixedClass()}ngAfterViewInit(){this.reposition(),this.animate||this.resolvedPromise.then(()=>{this.onAnimationEnd()})}ngAfterViewChecked(){this.initialCheck?this.initialCheck=!1:this._zone.runOutsideAngular(()=>{this.unsubscribeReposition(),this.repositionSubscription=from_from(this.resolvedPromise).subscribe(this.reposition)})}ngOnDestroy(){this.anchorViewportLeave.complete(),this.positionChange.complete(),this.close.emit(),this.close.complete(),this._resizeService.unsubscribe(),this._scrollableService.unsubscribe(),this.animationSubscriptions.unsubscribe(),this.unsubscribeReposition()}onResize(){this.reposition()}onAnimationStart(){this._renderer.removeClass(this.container.nativeElement,"k-animation-container-shown")}onAnimationEnd(){this._renderer.addClass(this.container.nativeElement,"k-animation-container-shown"),this.open.emit(),this.open.complete()}get currentOffset(){return this._currentOffset}set currentOffset(offset$$1){this.setContainerStyle("left",offset$$1.left+"px"),this.setContainerStyle("top",offset$$1.top+"px"),this._currentOffset=offset$$1}setZIndex(){this.anchor&&this.setContainerStyle("z-index",String(this.domService.zIndex(this.anchor,this.container)))}reposition(){if(!isDocumentAvailable())return;const{flip:flip,offset:offset$$1}=this.position();this.currentOffset&&!((oldOffset,newOffset)=>{const{left:oldLeft,top:oldTop}=oldOffset,{left:newLeft,top:newTop}=newOffset;return Math.abs(oldLeft-newLeft)>=1||Math.abs(oldTop-newTop)>=1})(this.currentOffset,offset$$1)||(this.currentOffset=offset$$1,hasObservers(this.positionChange)&&this._zone.run(()=>this.positionChange.emit({offset:offset$$1,flip:flip}))),this.animate&&this.animationService.play(this.contentContainer.nativeElement,this.animate,flip),this.resizeSensor.acceptSize()}position(){const alignedOffset=this._alignService.alignElement({anchor:this.anchor,anchorAlign:this.anchorAlign,element:this.container,elementAlign:this.popupAlign,margin:this.margin,offset:this.offset,positionMode:this.positionMode});return this._positionService.positionElement({anchor:this.anchor,anchorAlign:this.anchorAlign,collisions:this.collision,currentLocation:alignedOffset,element:this.container,elementAlign:this.popupAlign,margin:this.margin})}onScroll(isInViewPort){const hasLeaveObservers=hasObservers(this.anchorViewportLeave);isInViewPort||!hasLeaveObservers?this.reposition():hasLeaveObservers&&this._zone.run(()=>{this.anchorViewportLeave.emit()})}copyFontStyles(){this.anchor&&this.copyAnchorStyles&&this.domService.getFontStyles(this.anchor).forEach(s=>this.setContainerStyle(s.key,s.value))}updateFixedClass(){this._renderer["fixed"===this.positionMode?"addClass":"removeClass"](this.container.nativeElement,"k-animation-container-fixed")}setContainerStyle(name,value){this._renderer.setStyle(this.container.nativeElement,name,value)}unsubscribeReposition(){this.repositionSubscription&&this.repositionSubscription.unsubscribe()}}return PopupComponent.fac=function(t){return new(t||PopupComponent)(directiveInject(ElementRef),directiveInject(fesm2015_AlignService),directiveInject(fesm2015_DOMService),directiveInject(fesm2015_PositionService),directiveInject(dist_fesm2015_ResizeService),directiveInject(fesm2015_ScrollableService),directiveInject(fesm2015_AnimationService),directiveInject(Renderer2),directiveInject(NgZone))},PopupComponent.cmp=defineComponent({type:PopupComponent,selectors:[["kendo-popup"]],viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(fesm2015_c0,!0),viewQuery(fesm2015_ResizeSensorComponent,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.contentContainer=_t.first),queryRefresh(_t=loadQuery())&&(ctx.resizeSensor=_t.first))},inputs:{animate:"animate",anchorAlign:"anchorAlign",collision:"collision",popupAlign:"popupAlign",copyAnchorStyles:"copyAnchorStyles",positionMode:"positionMode",offset:"offset",anchor:"anchor",popupClass:"popupClass",margin:"margin"},outputs:{anchorViewportLeave:"anchorViewportLeave",close:"close",open:"open",positionChange:"positionChange"},exportAs:["kendo-popup"],features:[ProvidersFeature([fesm2015_AlignService,fesm2015_AnimationService,fesm2015_DOMService,fesm2015_PositionService,dist_fesm2015_ResizeService,fesm2015_ScrollableService]),NgOnChangesFeature],ngContentSelectors:_c1,decls:5,vars:4,consts:[[1,"k-popup",3,"ngClass"],["container",""],[3,"ngTemplateOutlet","ngIf"],[3,"rateLimit","resize"]],template:function(rf,ctx){1&rf&&(projectionDef(),elementStart(0,"div",0,1),projection(2),template(3,PopupComponent_ng_template_3_Template,0,0,"ng-template",2),elementStart(4,"kendo-resize-sensor",3),listener("resize",(function(){return ctx.onResize()})),elementEnd(),elementEnd()),2&rf&&(property("ngClass",ctx.popupClass),advance(3),property("ngTemplateOutlet",ctx.content)("ngIf",ctx.content),advance(1),property("rateLimit",100))},directives:[common_NgClass,common_NgTemplateOutlet,common_NgIf,fesm2015_ResizeSensorComponent],encapsulation:2}),PopupComponent})();const POPUP_CONTAINER=new InjectionToken("Popup Container");let fesm2015_PopupService=(()=>{class PopupService{constructor(applicationRef,componentFactoryResolver,injector,container){this.applicationRef=applicationRef,this.componentFactoryResolver=componentFactoryResolver,this.injector=injector,this.container=container}get rootViewContainer(){const rootComponents=this.applicationRef.components||[];if(rootComponents[0])return rootComponents[0];throw new Error("\n            View Container not found! Inject the POPUP_CONTAINER or define a specific ViewContainerRef via the appendTo option.\n            See http://www.telerik.com/kendo-angular-ui/components/popup/api/POPUP_CONTAINER/ for more details.\n        ")}get rootViewContainerNode(){return this.container?this.container.nativeElement:this.getComponentRootNode(this.rootViewContainer)}open(options={}){const{component:component,nodes:nodes}=this.contentFrom(options.content),popupComponentRef=this.appendPopup(nodes,options.appendTo),popupInstance=popupComponentRef.instance;this.projectComponentInputs(popupComponentRef,options),popupComponentRef.changeDetectorRef.detectChanges(),component&&component.changeDetectorRef.detectChanges();const popupElement=this.getComponentRootNode(popupComponentRef);return{close:()=>{var element;component&&component.destroy(),popupComponentRef.destroy(),(element=popupElement)&&element.parentNode&&element.parentNode.removeChild(element)},content:component,popup:popupComponentRef,popupAnchorViewportLeave:popupInstance.anchorViewportLeave,popupClose:popupInstance.close,popupElement:popupElement,popupOpen:popupInstance.open,popupPositionChange:popupInstance.positionChange}}appendPopup(nodes,container){const popupComponentRef=this.createComponent(fesm2015_PopupComponent,nodes,container);return container||this.rootViewContainerNode.appendChild(this.getComponentRootNode(popupComponentRef)),popupComponentRef}getComponentRootNode(componentRef){return componentRef.location.nativeElement}getComponentFactory(componentClass){return this.componentFactoryResolver.resolveComponentFactory(componentClass)}createComponent(componentClass,nodes,container){const factory=this.getComponentFactory(componentClass);if(container)return container.createComponent(factory,void 0,this.injector,nodes);{const component=factory.create(this.injector,nodes);return this.applicationRef.attachView(component.hostView),component}}projectComponentInputs(component,options){return Object.getOwnPropertyNames(options).filter(prop=>"content"!==prop||options.content instanceof TemplateRef).map(prop=>{component.instance[prop]=options[prop]}),component}contentFrom(content){if(!content||content instanceof TemplateRef)return{component:null,nodes:[[]]};const component=this.createComponent(content);return{component:component,nodes:[component?[component.location.nativeElement]:[]]}}}return PopupService.fac=function(t){return new(t||PopupService)(inject(core_ApplicationRef),inject(ComponentFactoryResolver),inject(Injector),inject(POPUP_CONTAINER,8))},PopupService.prov=defineInjectable({token:PopupService,factory:PopupService.fac}),PopupService})(),fesm2015_PopupModule=(()=>{class PopupModule{}return PopupModule.mod=defineNgModule({type:PopupModule}),PopupModule.inj=defineInjector({factory:function(t){return new(t||PopupModule)},providers:[fesm2015_PopupService],imports:[[common_CommonModule,fesm2015_ResizeSensorModule]]}),PopupModule})();function takeUntil(notifier){return source=>source.lift(new takeUntil_TakeUntilOperator(notifier))}class takeUntil_TakeUntilOperator{constructor(notifier){this.notifier=notifier}call(subscriber,source){const takeUntilSubscriber=new takeUntil_TakeUntilSubscriber(subscriber),notifierSubscription=subscribeToResult(takeUntilSubscriber,this.notifier);return notifierSubscription&&!takeUntilSubscriber.seenValue?(takeUntilSubscriber.add(notifierSubscription),source.subscribe(takeUntilSubscriber)):takeUntilSubscriber}}class takeUntil_TakeUntilSubscriber extends OuterSubscriber_OuterSubscriber{constructor(destination){super(destination),this.seenValue=!1}notifyNext(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.seenValue=!0,this.complete()}notifyComplete(){}}const dist_fesm2015_c0=[[["","kendoButton",""]]],fesm2015_c1=["[kendoButton]"];let fesm2015_KendoButtonService=(()=>{class KendoButtonService{constructor(){this.buttonLookChange=new BehaviorSubject_BehaviorSubject("default"),this.buttonClicked=new Subject_Subject,this.buttonClicked$=this.buttonClicked.asObservable()}click(button){this.buttonClicked.next(button)}setButtonLook(look){this.buttonLookChange.next(look)}}return KendoButtonService.fac=function(t){return new(t||KendoButtonService)},KendoButtonService.prov=defineInjectable({token:KendoButtonService,factory:KendoButtonService.fac}),KendoButtonService})(),fesm2015_ButtonDirective=(()=>{class ButtonDirective{constructor(element,renderer,service,localization,ngZone){this.service=service,this.ngZone=ngZone,this.toggleable=!1,this.primary=!1,this.look="default",this.role="button",this.selectedChange=new core_EventEmitter,this.click=new core_EventEmitter,this.isDisabled=!1,this.isIcon=!1,this.isIconClass=!1,this._focused=!1,this.domEvents=[],this.direction=localization.rtl?"rtl":"ltr",this.localizationChangeSubscription=localization.changes.subscribe(({rtl:rtl})=>this.direction=rtl?"rtl":"ltr"),this.element=element.nativeElement,this.renderer=renderer}get togglable(){return this.toggleable}set togglable(value){this.toggleable=value}get selected(){return this._selected||!1}set selected(value){this._selected=value}set tabIndex(index){this.element.tabIndex=index}get tabIndex(){return this.element.tabIndex}set icon(icon){icon?this.iconSetter(icon,()=>{this.isIcon=!0,this.addIcon("k-icon k-i-"+icon)}):(this.isIcon=!1,this.updateIconNode())}set iconClass(iconClassName){iconClassName?this.iconSetter(iconClassName,()=>{this.isIconClass=!0,this.addIcon(iconClassName)}):(this.isIconClass=!1,this.updateIconNode())}set imageUrl(imageUrl){imageUrl?this.iconSetter(imageUrl,this.addImgIcon.bind(this)):this.removeImageNode()}set disabled(disabled){this.isDisabled=disabled,this.renderer.setProperty(this.element,"disabled",disabled)}get disabled(){return this.isDisabled}set isFocused(isFocused){this.toggleClass("k-state-focused",isFocused),this._focused=isFocused}get isFocused(){return this._focused}get classButton(){return!0}get classPrimary(){return this.primary}get isFlat(){return"flat"===this.look}get isBare(){return"bare"===this.look}get isOutline(){return"outline"===this.look}get classDisabled(){return this.isDisabled}get classActive(){return this.selected}get getDirection(){return this.direction}onFocus(){this.isFocused=!0}onBlur(){this.isFocused=!1}ngOnInit(){const isSpan="SPAN"===this.element.tagName;this.service&&(this.buttonLookChangeSubscription=this.service.buttonLookChange.pipe(filter_filter(look=>"default"!==look)).subscribe(look=>this.look=look)),!this.element.hasAttribute("role")&&this.togglable&&this.toggleAriaCheckbox(this.toggleable),this.role&&this.setAttribute("role",this.role),this.ngZone.runOutsideAngular(()=>{this.domEvents.push(this.renderer.listen(this.element,"click",this._onButtonClick.bind(this))),this.domEvents.push(this.renderer.listen(this.element,"keydown",event=>{!isSpan||event.keyCode!==Keys.Space&&event.keyCode!==Keys.Enter||(this.click.emit(event),this._onButtonClick())}))})}ngOnChanges(change){(isChanged("togglable",change)||isChanged("toggleable",change))&&this.toggleAriaCheckbox(this.toggleable)}ngAfterViewChecked(){this.setIconTextClasses()}ngOnDestroy(){this.imageNode=null,this.iconNode=null,this.renderer=null,this.localizationChangeSubscription.unsubscribe(),this.service&&this.buttonLookChangeSubscription&&this.buttonLookChangeSubscription.unsubscribe(),clearTimeout(this.deferTimeout),this.domEvents.forEach(unbindHandler=>unbindHandler())}focus(){isDocumentAvailable()&&(this.element.focus(),this.isFocused=!0)}blur(){isDocumentAvailable()&&(this.element.blur(),this.isFocused=!1)}setAttribute(attribute,value){this.renderer.setAttribute(this.element,attribute,value)}removeAttribute(attribute){this.renderer.removeAttribute(this.element,attribute)}setSelected(value){const changed=this.selected!==value;this.selected=value,this.setAttribute("aria-checked",this.selected.toString()),this.toggleClass("k-state-active",this.selected),changed&&hasObservers(this.selectedChange)&&this.ngZone.run(()=>{this.selectedChange.emit(value)})}toggleAriaCheckbox(shouldSet){isDocumentAvailable()&&(shouldSet?(this.role="checkbox",this.setAttribute("role",this.role),this.setAttribute("aria-checked",this.selected.toString())):(this.role="button",this.setAttribute("role",this.role),this.removeAttribute("aria-checked")))}hasText(){return!!isDocumentAvailable()&&String(this.element.textContent).trim().length>0}addImgIcon(imageUrl){let renderer=this.renderer;this.imageNode?renderer.setProperty(this.imageNode,"src",imageUrl):isDocumentAvailable()&&(this.imageNode=renderer.createElement("img"),renderer.setProperty(this.imageNode,"src",imageUrl),renderer.setProperty(this.imageNode,"className","k-image"),renderer.setAttribute(this.imageNode,"role","presentation"),this.prependChild(this.imageNode))}addIcon(classNames){let renderer=this.renderer;this.iconNode?renderer.setProperty(this.iconNode,"className",classNames):isDocumentAvailable()&&(this.iconNode=renderer.createElement("span"),renderer.setProperty(this.iconNode,"className",classNames),renderer.setAttribute(this.iconNode,"role","presentation"),this.prependChild(this.iconNode))}prependChild(node){this.defer(()=>{this.renderer&&node!==this.element.firstChild&&this.renderer.insertBefore(this.element,node,this.element.firstChild)})}defer(callback){this.ngZone.runOutsideAngular(()=>{this.deferTimeout=setTimeout(callback,0)})}iconSetter(icon,insertIcon){icon&&insertIcon(icon),this.setIconTextClasses()}removeImageNode(){this.imageNode&&this.renderer.parentNode(this.imageNode)&&(this.renderer.removeChild(this.element,this.imageNode),this.imageNode=null)}removeIconNode(){this.iconNode&&this.renderer.parentNode(this.iconNode)&&(this.renderer.removeChild(this.element,this.iconNode),this.iconNode=null)}updateIconNode(){this.isIcon||this.isIconClass||this.removeIconNode()}setIconTextClasses(){const hasIcon=this.isIcon||this.isIconClass||this.imageNode,hasText=this.hasText();this.toggleClass("k-button-icon",hasIcon&&!hasText),this.toggleClass("k-button-icontext",hasIcon&&hasText)}toggleClass(className,add){add?this.renderer.addClass(this.element,className):this.renderer.removeClass(this.element,className)}_onButtonClick(){!this.disabled&&this.service&&this.ngZone.run(()=>{this.service.click(this)}),this.togglable&&!this.service&&this.setSelected(!this.selected)}}return ButtonDirective.fac=function(t){return new(t||ButtonDirective)(directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_KendoButtonService,8),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone))},ButtonDirective.dir=defineDirective({type:ButtonDirective,selectors:[["button","kendoButton",""],["span","kendoButton",""]],hostVars:17,hostBindings:function(rf,ctx){1&rf&&listener("focus",(function(){return ctx.onFocus()}))("blur",(function(){return ctx.onBlur()})),2&rf&&(attribute("aria-disabled",ctx.classDisabled)("aria-pressed",ctx.classActive)("dir",ctx.getDirection),classProp("k-button",ctx.classButton)("k-primary",ctx.classPrimary)("k-flat",ctx.isFlat)("k-bare",ctx.isBare)("k-outline",ctx.isOutline)("k-state-disabled",ctx.classDisabled)("k-state-active",ctx.classActive))},inputs:{toggleable:"toggleable",primary:"primary",look:"look",role:"role",togglable:"togglable",selected:"selected",tabIndex:"tabIndex",icon:"icon",iconClass:"iconClass",imageUrl:"imageUrl",disabled:"disabled"},outputs:{selectedChange:"selectedChange",click:"click"},exportAs:["kendoButton"],features:[ProvidersFeature([fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.button"}]),NgOnChangesFeature]}),ButtonDirective})();class PreventableEvent{constructor(){this.prevented=!1}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}let fesm2015_ButtonGroupComponent=(()=>{class ButtonGroupComponent{constructor(service,localization,element){this.service=service,this.element=element,this.selection="multiple",this.look="default",this.navigate=new core_EventEmitter,this._tabIndex=0,this.currentTabIndex=0,this.localizationChangeSubscription=localization.changes.subscribe(({rtl:rtl})=>this.direction=rtl?"rtl":"ltr")}set tabIndex(value){this._tabIndex=value,this.currentTabIndex=value}get tabIndex(){return this._tabIndex}get wrapperClass(){return!0}get disabledClass(){return this.disabled}get stretchedClass(){return!!this.width}get isFlat(){return"flat"===this.look}get isBare(){return"bare"===this.look}get isOutline(){return"outline"===this.look}get getRole(){return this.isSelectionSingle()?"radiogroup":"group"}get dir(){return this.direction}get ariaDisabled(){return this.disabled}get wrapperWidth(){return this.width}get wrapperTabIndex(){return this.disabled?void 0:this.currentTabIndex}keydown(event){this.disabled||this.navigateFocus(event)}onFocus(){this.currentTabIndex=-1;const focusedIndex=this.buttons.toArray().findIndex(current=>-1!==current.element.tabIndex),index=-1===focusedIndex?0:focusedIndex;this.focus(this.buttons.filter((_current,i)=>i===index))}focusout(event){event.relatedTarget&&event.relatedTarget.parentNode!==this.element.nativeElement&&(this.defocus(this.buttons.toArray()),this.currentTabIndex=this.tabIndex)}ngOnInit(){this.service.setButtonLook(this.look),this.subscription=this.service.buttonClicked$.subscribe(button=>{let newSelectionValue;this.isSelectionSingle()?(newSelectionValue=!0,this.deactivate(this.buttons.filter(current=>current!==button))):(this.defocus(this.buttons.toArray()),newSelectionValue=!button.selected),button.togglable&&(button.setSelected(newSelectionValue),button.setAttribute("aria-checked",newSelectionValue.toString())),button.setAttribute("tabindex","0")})}ngOnChanges(change){isChanged("disabled",change)&&this.buttons.forEach(button=>{null!=this.disabled&&(button.disabled=this.disabled)})}ngAfterContentInit(){const buttonsRole=this.isSelectionSingle()?"radio":"checkbox";this.buttons.forEach(button=>{button.togglable&&(button.setAttribute("aria-checked",button.selected.toString()),button.setAttribute("role",buttonsRole)),button.setAttribute("tabindex",button.selected?"0":"-1")})}ngAfterViewChecked(){this.buttons.length&&(this.buttons.first.renderer.addClass(this.buttons.first.element,"k-group-start"),this.buttons.last.renderer.addClass(this.buttons.last.element,"k-group-end"))}ngOnDestroy(){this.subscription.unsubscribe(),this.localizationChangeSubscription.unsubscribe()}ngAfterContentChecked(){this.verifySettings()}navigateFocus(event){let focusedIndex=this.buttons.toArray().findIndex(current=>-1!==current.element.tabIndex);const lastIndex=this.buttons.length-1,eventArgs=new PreventableEvent;event.keyCode===Keys.ArrowRight&&focusedIndex<lastIndex&&(this.navigate.emit(eventArgs),eventArgs.isDefaultPrevented()||(this.defocus(this.buttons.toArray()),this.focus(this.buttons.filter((_current,index)=>index===focusedIndex+1)))),event.keyCode===Keys.ArrowLeft&&focusedIndex>0&&(this.navigate.emit(eventArgs),eventArgs.isDefaultPrevented()||(this.defocus(this.buttons.toArray()),this.focus(this.buttons.filter((_current,index)=>index===focusedIndex-1))))}deactivate(buttons){buttons.forEach(button=>{button.setSelected(!1),button.setAttribute("aria-checked",button.selected.toString()),button.setAttribute("tabindex","-1")})}activate(buttons){buttons.forEach(button=>{button.setSelected(!0),button.setAttribute("aria-checked",button.selected.toString()),button.setAttribute("tabindex","0"),button.focus()})}defocus(buttons){buttons.forEach(button=>{button.setAttribute("tabindex","-1")})}focus(buttons){buttons.forEach(button=>{button.setAttribute("tabindex","0"),button.focus()})}verifySettings(){if(isDevMode()&&this.isSelectionSingle()&&this.buttons.filter(button=>button.selected).length>1)throw new Error("Having multiple selected buttons with single selection mode is not supported")}isSelectionSingle(){return"single"===this.selection}}return ButtonGroupComponent.fac=function(t){return new(t||ButtonGroupComponent)(directiveInject(fesm2015_KendoButtonService),directiveInject(fesm2015_LocalizationService),directiveInject(ElementRef))},ButtonGroupComponent.cmp=defineComponent({type:ButtonGroupComponent,selectors:[["kendo-buttongroup"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,fesm2015_ButtonDirective,!1),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.buttons=_t)},hostVars:18,hostBindings:function(rf,ctx){1&rf&&listener("keydown",(function($event){return ctx.keydown($event)}))("focus",(function(){return ctx.onFocus()}))("focusout",(function($event){return ctx.focusout($event)})),2&rf&&(attribute("role",ctx.getRole)("dir",ctx.dir)("aria-disalbed",ctx.ariaDisabled)("tabindex",ctx.wrapperTabIndex),styleProp("width",ctx.wrapperWidth),classProp("k-button-group",ctx.wrapperClass)("k-state-disabled",ctx.disabledClass)("k-button-group-stretched",ctx.stretchedClass)("k-button-group-flat",ctx.isFlat)("k-button-group-bare",ctx.isBare)("k-button-group-outline",ctx.isOutline))},inputs:{selection:"selection",look:"look",tabIndex:"tabIndex",disabled:"disabled",width:"width"},outputs:{navigate:"navigate"},exportAs:["kendoButtonGroup"],features:[ProvidersFeature([fesm2015_KendoButtonService,fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.buttongroup"}]),NgOnChangesFeature],ngContentSelectors:fesm2015_c1,decls:1,vars:0,template:function(rf,ctx){1&rf&&(projectionDef(dist_fesm2015_c0),projection(0))},encapsulation:2}),ButtonGroupComponent})(),fesm2015_ButtonModule=(()=>{class ButtonModule{}return ButtonModule.mod=defineNgModule({type:ButtonModule}),ButtonModule.inj=defineInjector({factory:function(t){return new(t||ButtonModule)}}),ButtonModule})(),fesm2015_ButtonGroupModule=(()=>{class ButtonGroupModule{}return ButtonGroupModule.mod=defineNgModule({type:ButtonGroupModule}),ButtonGroupModule.inj=defineInjector({factory:function(t){return new(t||ButtonGroupModule)},imports:[[common_CommonModule,fesm2015_ButtonModule]]}),ButtonGroupModule})(),fesm2015_ListModule=(()=>{class ListModule{}return ListModule.mod=defineNgModule({type:ListModule}),ListModule.inj=defineInjector({factory:function(t){return new(t||ListModule)},imports:[[common_CommonModule]]}),ListModule})(),fesm2015_SplitButtonModule=(()=>{class SplitButtonModule{}return SplitButtonModule.mod=defineNgModule({type:SplitButtonModule}),SplitButtonModule.inj=defineInjector({factory:function(t){return new(t||SplitButtonModule)},imports:[[common_CommonModule,fesm2015_PopupModule,fesm2015_ButtonModule,fesm2015_ListModule],fesm2015_ListModule]}),SplitButtonModule})(),fesm2015_DropDownButtonModule=(()=>{class DropDownButtonModule{}return DropDownButtonModule.mod=defineNgModule({type:DropDownButtonModule}),DropDownButtonModule.inj=defineInjector({factory:function(t){return new(t||DropDownButtonModule)},imports:[[common_CommonModule,fesm2015_PopupModule,fesm2015_ListModule,fesm2015_ButtonModule],fesm2015_ListModule]}),DropDownButtonModule})(),fesm2015_ChipModule=(()=>{class ChipModule{}return ChipModule.mod=defineNgModule({type:ChipModule}),ChipModule.inj=defineInjector({factory:function(t){return new(t||ChipModule)},imports:[[common_CommonModule]]}),ChipModule})(),fesm2015_ButtonsModule=(()=>{class ButtonsModule{}return ButtonsModule.mod=defineNgModule({type:ButtonsModule}),ButtonsModule.inj=defineInjector({factory:function(t){return new(t||ButtonsModule)},imports:[fesm2015_ButtonGroupModule,fesm2015_ButtonModule,fesm2015_SplitButtonModule,fesm2015_DropDownButtonModule,fesm2015_ChipModule]}),ButtonsModule})();const _ivy_ngcc_dist_fesm2015_c0=["overflowButton"],dist_fesm2015_c1=["popupTemplate"],fesm2015_c2=["resizeSensor"],dist_fesm2015_c3=["container"],dist_fesm2015_c4=["toolbarRenderer"],fesm2015_c5=["overflowRenderer"];function ToolBarComponent_ng_container_0_Template(rf,ctx){if(1&rf){const _r10=getCurrentView();elementContainerStart(0),elementStart(1,"kendo-toolbar-renderer",5,6),listener("rendererClick",(function($event){return restoreView(_r10),nextContext().onRendererClick($event)})),elementEnd(),elementContainerEnd()}if(2&rf){const tool_r6=ctx.$implicit,ctx_r0=nextContext();advance(1),property("location","toolbar")("resizable",ctx_r0.overflow)("tool",tool_r6)}}function ToolBarComponent_button_1_Template(rf,ctx){if(1&rf){const _r13=getCurrentView();elementStart(0,"button",7,8),listener("click",(function(){return restoreView(_r13),nextContext().showPopup()})),element(2,"span",9),elementEnd()}2&rf&&styleProp("visibility",nextContext().displayAnchor)}function ToolBarComponent_ng_template_2_ng_container_1_Template(rf,ctx){if(1&rf){const _r19=getCurrentView();elementContainerStart(0),elementStart(1,"li",11),elementStart(2,"kendo-toolbar-renderer",5,12),listener("rendererClick",(function($event){return restoreView(_r19),nextContext(2).onRendererClick($event)})),elementEnd(),elementEnd(),elementContainerEnd()}if(2&rf){const tool_r15=ctx.$implicit,ctx_r14=nextContext(2);advance(2),property("location","overflow")("resizable",ctx_r14.overflow)("tool",tool_r15)}}function ToolBarComponent_ng_template_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"ul",10),template(1,ToolBarComponent_ng_template_2_ng_container_1_Template,4,3,"ng-container",0),elementEnd()),2&rf){const ctx_r3=nextContext();advance(1),property("ngForOf",ctx_r3.allTools)}}function ToolBarComponent_kendo_resize_sensor_6_Template(rf,ctx){1&rf&&element(0,"kendo-resize-sensor",13,14),2&rf&&property("rateLimit",1e3)}const fesm2015_c6=["toolbarTemplate"],fesm2015_c7=["toolbarButton"];function ToolBarButtonComponent_ng_template_0_Template(rf,ctx){if(1&rf){const _r6=getCurrentView();elementStart(0,"button",2,3),listener("click",(function($event){return restoreView(_r6),nextContext().click.emit($event)}))("selectedChange",(function($event){return restoreView(_r6),nextContext().selectedChange.emit($event)}))("blur",(function(){return restoreView(_r6),nextContext().onBlur()})),text(2),elementEnd()}if(2&rf){const ctx_r1=nextContext();property("tabindex",ctx_r1.tabIndex)("ngStyle",ctx_r1.style)("ngClass",ctx_r1.className)("disabled",ctx_r1.disabled)("toggleable",ctx_r1.toggleable)("primary",ctx_r1.primary)("selected",ctx_r1.selected)("icon",ctx_r1.toolbarOptions.icon)("iconClass",ctx_r1.toolbarOptions.iconClass)("imageUrl",ctx_r1.toolbarOptions.imageUrl)("look",ctx_r1.look),attribute("title",ctx_r1.title),advance(2),textInterpolate1(" ",ctx_r1.toolbarOptions.text," ")}}function ToolBarButtonComponent_ng_template_2_Template(rf,ctx){if(1&rf){const _r11=getCurrentView();elementStart(0,"button",4,5),listener("click",(function($event){return restoreView(_r11),nextContext().click.emit($event)}))("selectedChange",(function($event){return restoreView(_r11),nextContext().selectedChange.emit($event)})),text(2),elementEnd()}if(2&rf){const ctx_r3=nextContext();property("ngStyle",ctx_r3.style)("ngClass",ctx_r3.className)("disabled",ctx_r3.disabled)("toggleable",ctx_r3.toggleable)("primary",ctx_r3.primary)("selected",ctx_r3.selected)("icon",ctx_r3.overflowOptions.icon)("iconClass",ctx_r3.overflowOptions.iconClass)("imageUrl",ctx_r3.overflowOptions.imageUrl)("look",ctx_r3.look),attribute("title",ctx_r3.title),advance(2),textInterpolate1(" ",ctx_r3.overflowOptions.text," ")}}const fesm2015_c8=["toolbarButtonGroup"],fesm2015_c9=["overflowButtonGroup"];function ToolBarButtonGroupComponent_ng_template_0_span_2_Template(rf,ctx){if(1&rf){const _r8=getCurrentView();elementStart(0,"span",5),listener("click",(function($event){restoreView(_r8);const button_r6=ctx.$implicit,ctx_r7=nextContext(2);return button_r6.click.emit($event),ctx_r7.onButtonClick($event)}))("selectedChange",(function($event){restoreView(_r8);const button_r6=ctx.$implicit;return nextContext(2).selectedChangeHandler($event,button_r6)})),text(1),elementEnd()}if(2&rf){const button_r6=ctx.$implicit;property("ngStyle",button_r6.style)("ngClass",button_r6.className)("disabled",button_r6.disabled)("togglable",button_r6.togglable)("primary",button_r6.primary)("selected",button_r6.selected)("icon",button_r6.toolbarOptions.icon)("iconClass",button_r6.toolbarOptions.iconClass)("imageUrl",button_r6.toolbarOptions.imageUrl),attribute("title",button_r6.title),advance(1),textInterpolate1(" ",button_r6.toolbarOptions.text," ")}}function ToolBarButtonGroupComponent_ng_template_0_Template(rf,ctx){if(1&rf){const _r11=getCurrentView();elementStart(0,"kendo-buttongroup",2,3),listener("navigate",(function($event){return restoreView(_r11),nextContext().onNavigate($event)}))("focus",(function(){return restoreView(_r11),nextContext().onFocus()})),template(2,ToolBarButtonGroupComponent_ng_template_0_span_2_Template,2,11,"span",4),elementEnd()}if(2&rf){const ctx_r1=nextContext();property("tabIndex",-1)("selection",ctx_r1.selection)("disabled",ctx_r1.disabled)("look",ctx_r1.look)("width",ctx_r1.width),advance(2),property("ngForOf",ctx_r1.buttonComponents)}}function ToolBarButtonGroupComponent_ng_template_2_span_2_Template(rf,ctx){if(1&rf){const _r17=getCurrentView();elementStart(0,"span",9),listener("click",(function($event){restoreView(_r17);const button_r15=ctx.$implicit,ctx_r16=nextContext(2);return button_r15.click.emit($event),ctx_r16.onButtonClick($event)}))("selectedChange",(function($event){restoreView(_r17);const button_r15=ctx.$implicit;return nextContext(2).selectedChangeHandler($event,button_r15)})),text(1),elementEnd()}if(2&rf){const button_r15=ctx.$implicit;property("ngStyle",button_r15.style)("ngClass",button_r15.className)("disabled",button_r15.disabled)("togglable",button_r15.togglable)("primary",button_r15.primary)("selected",button_r15.selected)("icon",button_r15.overflowOptions.icon)("iconClass",button_r15.overflowOptions.iconClass)("imageUrl",button_r15.overflowOptions.imageUrl),attribute("title",button_r15.title),advance(1),textInterpolate1(" ",button_r15.overflowOptions.text," ")}}function ToolBarButtonGroupComponent_ng_template_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"kendo-buttongroup",6,7),template(2,ToolBarButtonGroupComponent_ng_template_2_span_2_Template,2,11,"span",8),elementEnd()),2&rf){const ctx_r3=nextContext();property("tabIndex",-1)("selection",ctx_r3.selection)("disabled",ctx_r3.disabled)("look",ctx_r3.look)("width",ctx_r3.width),advance(2),property("ngForOf",ctx_r3.buttonComponents)}}const _c17=["separator"];function ToolBarSeparatorComponent_ng_template_0_Template(rf,ctx){1&rf&&element(0,"div",1)}function ToolBarRendererComponent_ng_container_0_ng_template_1_Template(rf,ctx){}function ToolBarRendererComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),template(1,ToolBarRendererComponent_ng_container_0_ng_template_1_Template,0,0,"ng-template",1),elementContainerEnd()),2&rf){const ctx_r0=nextContext();advance(1),property("ngTemplateOutlet",ctx_r0.template)}}function ToolBarRendererComponent_ng_container_1_ng_template_1_Template(rf,ctx){}function ToolBarRendererComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),template(1,ToolBarRendererComponent_ng_container_1_ng_template_1_Template,0,0,"ng-template",1),elementContainerEnd()),2&rf){const ctx_r1=nextContext();advance(1),property("ngTemplateOutlet",ctx_r1.template)}}let fesm2015_RefreshService=(()=>{class RefreshService{constructor(){this.onRefresh=new core_EventEmitter}refresh(tool){this.onRefresh.emit(tool)}}return RefreshService.fac=function(t){return new(t||RefreshService)},RefreshService.prov=defineInjectable({token:RefreshService,factory:RefreshService.fac}),RefreshService})();const focusableRegex=/^(?:a|input|select|textarea|button|object)$/i;function fesm2015_outerWidth(element){var width=element.offsetWidth,style=getComputedStyle(element);return width+(parseFloat(style.marginLeft)||0+parseFloat(style.marginRight)||0)}const findElement=(node,predicate,matchSelf=!0)=>{if(node){if(matchSelf&&predicate(node))return node;for(node=node.firstChild;node;){if(1===node.nodeType){const element=findElement(node,predicate);if(element)return element}node=node.nextSibling}}},isFocusable=(element,checkVisibility=!0)=>{if(element.tagName){const tagName=element.tagName.toLowerCase();let focusable=null!==element.getAttribute("tabIndex");return focusableRegex.test(tagName)&&(focusable=!element.disabled),focusable&&(!checkVisibility||(element=>{const rect=element.getBoundingClientRect();return(rect.width>0&&rect.height>0||0!==rect.x&&0!==rect.y)&&"hidden"!==window.getComputedStyle(element).visibility})(element))}return!1},findFocusableSibling=(element,checkVisibility=!0,reverse)=>{let node=reverse?element.prevSibling:element.nextSibling;for(;node;){if(1===node.nodeType){const result=findElement(node,el=>isFocusable(el,checkVisibility));if(result)return result}node=reverse?node.prevSibling:node.nextSibling}},fesm2015_isPresent=value=>null!=value,getValueForLocation=(property,displayMode,overflows)=>{switch(displayMode){case"toolbar":return overflows?void 0:property;case"overflow":return overflows?property:void 0;default:return property}};let dist_fesm2015_NavigationService=(()=>{class NavigationService{constructor(){this.focused={renderedTool:null,index:-1},this.renderedTools=[],this.isPopupFocused=!1,this.isOverflowButtonFocused=!1}setRenderedTools(rts){this.renderedTools=[...rts]}click({context:context,event:ev}){this.focused.renderedTool!==context&&ev&&this.focus(context,ev)}moveFocusToToolBar(){this.isPopupFocused=!1,this.focusOverflowButton()}moveFocusToPopup(){this.isPopupFocused=!0,this.blurOverflowButton(),this.focus()}focusNext(ev){if(!this.isOverflowButtonFocused&&this.focused.renderedTool&&!this.focused.renderedTool.tool.handleKey(ev)){const nextRT=this.getFocusableTools().slice(this.focused.index+1)[0];nextRT?this.focus(nextRT,ev):this.isOverflowButtonVisible()&&!this.isPopupFocused&&this.focusOverflowButton()}}focusPrev(ev){if(this.isOverflowButtonFocused){const lastFocusableRT=this.getFocusableTools().reverse()[0];this.focus(lastFocusableRT,ev)}else if(this.focused.renderedTool&&!this.focused.renderedTool.tool.handleKey(ev)){const prevRT=this.getFocusableTools().slice(0,this.focused.index).reverse()[0];prevRT&&this.focus(prevRT,ev)}}resetNavigation(){this.blurOverflowButton(),this.focused.renderedTool=null,this.focused.index=-1}focusFirst(ev){const firstTool=this.getFocusableTools()[0];firstTool&&(this.focused.renderedTool=firstTool,this.focused.index=this.getFocusableTools().findIndex(rt=>rt===firstTool),this.focus(firstTool,ev))}getFocusableTools(){return this.renderedTools.filter(rt=>rt.tool.overflows===this.isPopupFocused&&rt.tool.canFocus())}focus(renderedTool,ev){if(renderedTool)renderedTool.tool.canFocus&&renderedTool.tool.canFocus()&&(this.focused.renderedTool=renderedTool,this.focused.index=this.getFocusableTools().findIndex(rt=>rt===renderedTool),renderedTool.tool.focus(ev),this.blurOverflowButton());else{const focusableRTs=this.getFocusableTools(),lastFocusedRT=focusableRTs.find(rt=>rt===this.focused.renderedTool)||focusableRTs[0];lastFocusedRT&&(this.focused.renderedTool=lastFocusedRT,this.focused.index=this.getFocusableTools().findIndex(rt=>rt===lastFocusedRT),lastFocusedRT.tool.focus(ev))}}blurOverflowButton(){this.overflowButton&&(this.isOverflowButtonFocused=!1,this.overflowButton.nativeElement.tabIndex=-1)}focusOverflowButton(){this.isOverflowButtonFocused=!0,this.overflowButton.nativeElement.tabIndex=0,this.overflowButton.nativeElement.focus()}isOverflowButtonVisible(){return fesm2015_isPresent(this.overflowButton)&&"visible"===window.getComputedStyle(this.overflowButton.nativeElement).getPropertyValue("visibility")}}return NavigationService.fac=function(t){return new(t||NavigationService)},NavigationService.prov=defineInjectable({token:NavigationService,factory:NavigationService.fac}),NavigationService})(),fesm2015_ToolBarToolComponent=(()=>{class ToolBarToolComponent{constructor(){this.tabIndex=-1,this.overflows=!0,this.responsive=!0}get toolbarDisplay(){return this.overflows?"none":"inline-block"}get overflowDisplay(){return this.overflows?"block":"none"}canFocus(){return!1}focus(ev){}handleKey(ev){return!1}}return ToolBarToolComponent.fac=function(t){return new(t||ToolBarToolComponent)},ToolBarToolComponent.cmp=defineComponent({type:ToolBarToolComponent,selectors:[["toolbar-tool"]],inputs:{responsive:"responsive"},decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),ToolBarToolComponent})();class fesm2015_PreventableEvent{constructor(){this.prevented=!1}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}const getInitialPopupSettings=isRtl=>({animate:!0,anchorAlign:{horizontal:isRtl?"left":"right",vertical:"bottom"},popupAlign:{horizontal:isRtl?"left":"right",vertical:"top"}});let fesm2015_ToolBarComponent=(()=>{class ToolBarComponent{constructor(localization,popupService,refreshService,navigationService,element,cdr,zone,renderer){this.localization=localization,this.popupService=popupService,this.refreshService=refreshService,this.navigationService=navigationService,this.element=element,this.cdr=cdr,this.zone=zone,this.renderer=renderer,this.overflow=!1,this.tabindex=0,this.open=new core_EventEmitter,this.close=new core_EventEmitter,this.hostClasses=!0,this.cancelRenderedToolsSubscription$=new Subject_Subject,this.direction=localization.rtl?"rtl":"ltr"}set resizable(value){this.overflow=value}get resizable(){return this.overflow}set popupSettings(settings){this._popupSettings=Object.assign({},getInitialPopupSettings(this.localization.rtl),settings)}get popupSettings(){return this._popupSettings||getInitialPopupSettings(this.localization.rtl)}set tabIndex(tabIndex){this.tabindex=tabIndex}get tabIndex(){return this.tabindex}get appendTo(){const{appendTo:appendTo}=this.popupSettings;if(appendTo&&"root"!==appendTo)return"component"===appendTo?this.container:appendTo}set popupOpen(open){if(this.popupOpen===open)return;const eventArgs=new fesm2015_PreventableEvent;open?this.open.emit(eventArgs):this.close.emit(eventArgs),eventArgs.isDefaultPrevented()||this.toggle(open)}get popupOpen(){return this._open}onFocus(ev){this.navigationService.resetNavigation(),this.navigationService.focusFirst(ev),this.tabIndex=-1}onFocusOut(){this.tabIndex=0}get getTabIndex(){return this.tabindex}get getRole(){return"toolbar"}get getDir(){return this.direction}get resizableClass(){return this.overflow}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.toolbarKeydownListener=this.renderer.listen(this.element.nativeElement,"keydown",ev=>{switch(ev.keyCode){case Keys.ArrowLeft:this.zone.run(()=>{ev.preventDefault(),"ltr"===this.direction?this.navigationService.focusPrev(ev):this.navigationService.focusNext(ev),this.tabIndex=-1});break;case Keys.ArrowRight:this.zone.run(()=>{ev.preventDefault(),"ltr"===this.direction?this.navigationService.focusNext(ev):this.navigationService.focusPrev(ev),this.tabIndex=-1});break;case Keys.Tab:this.zone.run(()=>this.navigationService.resetNavigation());break;case Keys.Escape:this.zone.run(()=>this.toggle(!1))}})}),this.overflow&&(this.resizeSubscription=this.resizeSensor.resize.pipe(filter_filter(()=>this.overflow)).subscribe(()=>{this.onResize()}),this.zone.runOutsideAngular(()=>setTimeout(()=>this.onResize())),this.navigationService.overflowButton=this.overflowButton),this.navigationService.setRenderedTools(this.renderedTools.toArray()),this.renderedTools.changes.pipe(takeUntil(this.cancelRenderedToolsSubscription$)).subscribe(rts=>this.navigationService.setRenderedTools(rts.toArray()))}ngOnInit(){this.localizationChangesSubscription=this.localization.changes.subscribe(({rtl:rtl})=>this.direction=rtl?"rtl":"ltr"),isDocumentAvailable()&&this.zone.runOutsideAngular(()=>this.closeOverflowSubscription=fromEvent(document,"click").pipe(filter_filter(()=>!!this.popupRef),filter_filter(ev=>!this.popupRef.popup.instance.container.nativeElement.contains(ev.target)),filter_filter(ev=>!this.overflowButton.nativeElement.contains(ev.target))).subscribe(()=>{this.zone.run(()=>{this.popupOpen=!1})}))}ngOnDestroy(){this.resizeSubscription&&this.resizeSubscription.unsubscribe(),this.localizationChangesSubscription&&this.localizationChangesSubscription.unsubscribe(),this.closeOverflowSubscription&&this.closeOverflowSubscription.unsubscribe(),this.popupRef&&this.popupRef.close(),this.toolbarKeydownListener&&this.toolbarKeydownListener(),this.cancelRenderedToolsSubscription$.next()}onRendererClick(data){this.navigationService.click(data),this.tabIndex=-1}showPopup(){this.popupOpen=!this.popupOpen,this.navigationService.click({context:void 0,event:void 0})}toggle(popupOpen){this._open=void 0!==popupOpen?popupOpen:!this.popupOpen,this.popupRef&&(this.popupRef.close(),this.popupRef=null),this.popupOpen&&(this.popupRef=this.popupService.open({anchor:this.overflowButton,anchorAlign:this.popupSettings.anchorAlign,popupAlign:this.popupSettings.popupAlign,content:this.popupTemplate,appendTo:this.appendTo,animate:this.popupSettings.animate,popupClass:this.popupSettings.popupClass,positionMode:"absolute"}),this.setPopupContentDimensions(),this.popupRef.popupOpen.subscribe(this.onPopupOpen.bind(this)),this.popupRef.popupClose.subscribe(this.onPopupClose.bind(this)))}onResize(){if(isDocumentAvailable()){const containerWidth=(width=(element=this.element.nativeElement).offsetWidth,style=getComputedStyle(element),width-=parseFloat(style.paddingLeft)||0+parseFloat(style.borderLeftWidth)||0,(width-=parseFloat(style.paddingRight)||0+parseFloat(style.borderRightWidth)||0)-this.overflowAnchorWidth);this.shrink(containerWidth,this.childrenWidth),this.stretch(containerWidth,this.childrenWidth)}var element,width,style;this.cdr.detectChanges(),this.resizeSensor.acceptSize()}onPopupOpen(){this.zone.runOutsideAngular(()=>{this.overflowKeydownListener=this.renderer.listen(this.popupRef.popupElement,"keydown",ev=>{switch(ev.keyCode){case Keys.ArrowUp:this.zone.run(()=>{ev.preventDefault(),this.navigationService.focusPrev(ev)});break;case Keys.ArrowDown:this.zone.run(()=>{ev.preventDefault(),this.navigationService.focusNext(ev)});break;case Keys.Escape:this.zone.run(()=>this.toggle(!1));break;case Keys.Tab:this.zone.run(()=>{this.toggle(!1),this.navigationService.resetNavigation()})}})}),this.cancelRenderedToolsSubscription$.next(),this.navigationService.moveFocusToPopup(),this.navigationService.setRenderedTools(this.overflowRenderedTools.toArray()),this.overflowRenderedTools.changes.pipe(takeUntil(this.cancelRenderedToolsSubscription$)).subscribe(rts=>this.navigationService.setRenderedTools(rts.toArray()))}onPopupClose(){this.cancelRenderedToolsSubscription$.next(),this.navigationService.setRenderedTools(this.renderedTools.toArray()),this.renderedTools.changes.pipe(takeUntil(this.cancelRenderedToolsSubscription$)).subscribe(rts=>this.navigationService.setRenderedTools(rts.toArray())),this.navigationService.moveFocusToToolBar(),this.overflowKeydownListener&&this.overflowKeydownListener()}get displayAnchor(){return this.allTools.filter(t=>t.overflows&&t.responsive).length>0?"visible":"hidden"}get popupWidth(){return this.popupSettings&&this.popupSettings.width?isNaN(this.popupSettings.width)?this.popupSettings.width:this.popupSettings.width+"px":"150px"}get popupHeight(){if(this.popupSettings&&this.popupSettings.height)return isNaN(this.popupSettings.height)?this.popupSettings.height:this.popupSettings.height+"px"}get overflowAnchorWidth(){return this.overflow?(this.cachedOverflowAnchorWidth||(this.cachedOverflowAnchorWidth=fesm2015_outerWidth(this.overflowButton.nativeElement)),this.cachedOverflowAnchorWidth):0}get childrenWidth(){const width=this.renderedTools.reduce((totalWidth,tool)=>tool.width+totalWidth,0);return Math.ceil(width)}get visibleTools(){return this.allTools.filter(tool=>!1===tool.overflows)}get overflowTools(){return this.allTools.filter(tool=>!0===tool.overflows)}shrink(containerWidth,childrenWidth){let width;if(containerWidth<childrenWidth)for(var i=this.visibleTools.length-1;i>=0&&!(containerWidth>childrenWidth);i--)width=this.hideLastVisibleTool(),childrenWidth-=width}stretch(containerWidth,childrenWidth){let width;if(containerWidth>childrenWidth)for(var i=this.overflowTools.length-1;i>=0&&(width=this.showFirstHiddenTool(containerWidth,childrenWidth),width);i--)childrenWidth+=width}hideLastVisibleTool(){const tool=this.visibleTools[this.visibleTools.length-1],width=this.renderedTools.find(r=>r.tool===tool).width;return tool.overflows=!0,this.refreshService.refresh(tool),width}showFirstHiddenTool(containerWidth,childrenWidth){const tool=this.overflowTools[0],renderedElement=this.renderedTools.find(r=>r.tool===tool);return tool.overflows=!1,tool.visibility="hidden",this.refreshService.refresh(tool),containerWidth>childrenWidth+renderedElement.width?(tool.visibility="visible",this.refreshService.refresh(tool)):(tool.overflows=!0,this.refreshService.refresh(tool)),renderedElement.width}setPopupContentDimensions(){const popupContentContainer=this.popupRef.popup.instance.contentContainer.nativeElement;popupContentContainer.style.width=this.popupWidth,popupContentContainer.style.height=this.popupHeight,popupContentContainer.style.overflow="auto"}}return ToolBarComponent.fac=function(t){return new(t||ToolBarComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_PopupService),directiveInject(fesm2015_RefreshService),directiveInject(dist_fesm2015_NavigationService),directiveInject(ElementRef),directiveInject(ChangeDetectorRef),directiveInject(NgZone),directiveInject(Renderer2))},ToolBarComponent.cmp=defineComponent({type:ToolBarComponent,selectors:[["kendo-toolbar"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,fesm2015_ToolBarToolComponent,!1),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.allTools=_t)},viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(_ivy_ngcc_dist_fesm2015_c0,!0),staticViewQuery(dist_fesm2015_c1,!0),viewQuery(fesm2015_c2,!0),viewQuery(dist_fesm2015_c3,!0,ViewContainerRef),viewQuery(dist_fesm2015_c4,!0),viewQuery(fesm2015_c5,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.overflowButton=_t.first),queryRefresh(_t=loadQuery())&&(ctx.popupTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.resizeSensor=_t.first),queryRefresh(_t=loadQuery())&&(ctx.container=_t.first),queryRefresh(_t=loadQuery())&&(ctx.renderedTools=_t),queryRefresh(_t=loadQuery())&&(ctx.overflowRenderedTools=_t))},hostVars:9,hostBindings:function(rf,ctx){1&rf&&listener("focus",(function($event){return ctx.onFocus($event)}))("focusout",(function(){return ctx.onFocusOut()})),2&rf&&(attribute("tabindex",ctx.getTabIndex)("role",ctx.getRole)("dir",ctx.getDir),classProp("k-widget",ctx.hostClasses)("k-toolbar",ctx.hostClasses)("k-toolbar-resizable",ctx.resizableClass))},inputs:{overflow:"overflow",tabindex:"tabindex",resizable:"resizable",popupSettings:"popupSettings",tabIndex:"tabIndex"},outputs:{open:"open",close:"close"},exportAs:["kendoToolBar"],features:[ProvidersFeature([fesm2015_RefreshService,dist_fesm2015_NavigationService,fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.toolbar"}])],decls:7,vars:3,consts:[[4,"ngFor","ngForOf"],["type","button","tabindex","-1","class","k-overflow-anchor k-button",3,"visibility","click",4,"ngIf"],["popupTemplate",""],["container",""],[3,"rateLimit",4,"ngIf"],[3,"location","resizable","tool","rendererClick"],["toolbarRenderer",""],["type","button","tabindex","-1",1,"k-overflow-anchor","k-button",3,"click"],["overflowButton",""],[1,"k-icon","k-i-more-vertical"],[1,"k-overflow-container","k-list-container","k-reset"],[1,"k-item"],["overflowRenderer",""],[3,"rateLimit"],["resizeSensor",""]],template:function(rf,ctx){1&rf&&(template(0,ToolBarComponent_ng_container_0_Template,3,3,"ng-container",0),template(1,ToolBarComponent_button_1_Template,3,2,"button",1),template(2,ToolBarComponent_ng_template_2_Template,2,1,"ng-template",null,2,templateRefExtractor),elementContainer(4,null,3),template(6,ToolBarComponent_kendo_resize_sensor_6_Template,2,1,"kendo-resize-sensor",4)),2&rf&&(property("ngForOf",ctx.allTools),advance(1),property("ngIf",ctx.overflow),advance(5),property("ngIf",ctx.overflow))},directives:function(){return[common_NgForOf,common_NgIf,fesm2015_ToolBarRendererComponent,fesm2015_ResizeSensorComponent]},encapsulation:2}),ToolBarComponent})(),fesm2015_ToolBarButtonComponent=(()=>{class ToolBarButtonComponent extends fesm2015_ToolBarToolComponent{constructor(){super(),this.showText="both",this.showIcon="both",this.toggleable=!1,this.primary=!1,this.look="default",this.selected=!1,this.click=new core_EventEmitter,this.selectedChange=new core_EventEmitter,this.toolbarOptions={text:"",icon:"",iconClass:"",imageUrl:""},this.overflowOptions={text:"",icon:"",iconClass:"",imageUrl:""}}set text(text){this.toolbarOptions.text=getValueForLocation(text,this.showText,!1),this.overflowOptions.text=getValueForLocation(text,this.showText,!0)}get togglable(){return this.toggleable}set togglable(value){this.toggleable=value}set icon(icon){this.toolbarOptions.icon=getValueForLocation(icon,this.showIcon,!1),this.overflowOptions.icon=getValueForLocation(icon,this.showIcon,!0)}set iconClass(iconClass){this.toolbarOptions.iconClass=getValueForLocation(iconClass,this.showIcon,!1),this.overflowOptions.iconClass=getValueForLocation(iconClass,this.showIcon,!0)}set imageUrl(imageUrl){this.toolbarOptions.imageUrl=getValueForLocation(imageUrl,this.showIcon,!1),this.overflowOptions.imageUrl=getValueForLocation(imageUrl,this.showIcon,!0)}onBlur(){this.getButton().tabIndex=-1}canFocus(){return!this.disabled}focus(ev){ev&&"focus"!==ev.type&&"keydown"!==ev.type||this.getButton().focus(),this.getButton().tabIndex=0}handleKey(){return this.getButton().tabIndex=-1,!1}getButton(){return(this.overflows?this.overflowButtonElement:this.toolbarButtonElement).nativeElement}}return ToolBarButtonComponent.fac=function(t){return new(t||ToolBarButtonComponent)},ToolBarButtonComponent.cmp=defineComponent({type:ToolBarButtonComponent,selectors:[["kendo-toolbar-button"]],viewQuery:function(rf,ctx){var _t;1&rf&&(staticViewQuery(fesm2015_c6,!0),staticViewQuery(dist_fesm2015_c1,!0),viewQuery(fesm2015_c7,!0,ElementRef),viewQuery(_ivy_ngcc_dist_fesm2015_c0,!0,ElementRef)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.toolbarTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.popupTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.toolbarButtonElement=_t.first),queryRefresh(_t=loadQuery())&&(ctx.overflowButtonElement=_t.first))},inputs:{showText:"showText",showIcon:"showIcon",toggleable:"toggleable",primary:"primary",look:"look",selected:"selected",text:"text",togglable:"togglable",icon:"icon",iconClass:"iconClass",imageUrl:"imageUrl",style:"style",className:"className",title:"title",disabled:"disabled"},outputs:{click:"click",selectedChange:"selectedChange"},exportAs:["kendoToolBarButton"],features:[ProvidersFeature([{provide:fesm2015_ToolBarToolComponent,useExisting:forwardRef(()=>ToolBarButtonComponent)}]),InheritDefinitionFeature],decls:4,vars:0,consts:[["toolbarTemplate",""],["popupTemplate",""],["type","button","kendoButton","",3,"tabindex","ngStyle","ngClass","disabled","toggleable","primary","selected","icon","iconClass","imageUrl","look","click","selectedChange","blur"],["toolbarButton",""],["tabindex","-1","type","button","kendoButton","",1,"k-overflow-button",3,"ngStyle","ngClass","disabled","toggleable","primary","selected","icon","iconClass","imageUrl","look","click","selectedChange"],["overflowButton",""]],template:function(rf,ctx){1&rf&&(template(0,ToolBarButtonComponent_ng_template_0_Template,3,13,"ng-template",null,0,templateRefExtractor),template(2,ToolBarButtonComponent_ng_template_2_Template,3,12,"ng-template",null,1,templateRefExtractor))},directives:[fesm2015_ButtonDirective,common_NgStyle,common_NgClass],encapsulation:2}),ToolBarButtonComponent})(),fesm2015_ToolBarButtonGroupComponent=(()=>{class ToolBarButtonGroupComponent extends fesm2015_ToolBarToolComponent{constructor(localization){super(),this.localization=localization,this.selection="multiple",this.look="default",this.focusedIndex=-1,this.getNextKey=((rtl=!1)=>(overflows=!0)=>overflows?Keys.ArrowDown:rtl?Keys.ArrowLeft:Keys.ArrowRight)(this.localization.rtl),this.getPrevKey=((rtl=!1)=>(overflows=!0)=>overflows?Keys.ArrowUp:rtl?Keys.ArrowRight:Keys.ArrowLeft)(this.localization.rtl)}get buttonElements(){return this.getButtonGroup().buttons.filter(b=>!b.isDisabled).map(b=>b.element)}onFocus(){this.focusedIndex=0}onNavigate(ev){ev.preventDefault()}selectedChangeHandler(state,button){button.selected=state,button.selectedChange.emit(state)}onButtonClick(ev){this.focusedIndex=this.buttonElements.findIndex(be=>be===ev.target||be.contains(ev.target)),this.focusButton(this.focusedIndex,ev)}canFocus(){return!(this.disabled||0===this.buttonElements.length)}focus(ev={}){const nextKey=this.getNextKey(this.overflows),prevKey=this.getPrevKey(this.overflows);var prevKeyCode,nextKeyCode,collection;this.focusedIndex=(prevKeyCode=prevKey,nextKeyCode=nextKey,collection=this.buttonElements,ev=>{switch(ev.type){case"keydown":if(ev.keyCode===prevKeyCode)return collection.length-1;if(ev.keyCode===nextKeyCode)return 0;break;case"click":return collection.findIndex(be=>be===ev.target||be.contains(ev.target));case"focus":default:return 0}})(ev),this.focusButton(this.focusedIndex,ev)}handleKey(ev){const nextKey=this.getNextKey(this.overflows),prevKey=this.getPrevKey(this.overflows),peekAtIndex=(collection=this.buttonElements,index=>fesm2015_isPresent(collection[index])),isUnmodified=(first=this.focusedIndex,second=>first===second);var first,collection,prevKeyCode,nextKeyCode,seeker;return this.focusedIndex=(prevKeyCode=prevKey,nextKeyCode=nextKey,seeker=peekAtIndex,(startIndex,ev)=>{switch(ev.keyCode){case prevKeyCode:return seeker(startIndex-1)?startIndex-1:startIndex;case nextKeyCode:return seeker(startIndex+1)?startIndex+1:startIndex;default:return startIndex}})(this.focusedIndex,ev),this.focusButton(this.focusedIndex,ev),!isUnmodified(this.focusedIndex)}getButtonGroup(){return this.overflows?this.overflowButtonGroup:this.toolbarButtonGroup}focusButton(index,ev){ev.type&&"focus"!==ev.type&&"keydown"!==ev.type||this.buttonElements[index].focus()}}return ToolBarButtonGroupComponent.fac=function(t){return new(t||ToolBarButtonGroupComponent)(directiveInject(fesm2015_LocalizationService))},ToolBarButtonGroupComponent.cmp=defineComponent({type:ToolBarButtonGroupComponent,selectors:[["kendo-toolbar-buttongroup"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,fesm2015_ToolBarButtonComponent,!1),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.buttonComponents=_t)},viewQuery:function(rf,ctx){var _t;1&rf&&(staticViewQuery(fesm2015_c6,!0),staticViewQuery(dist_fesm2015_c1,!0),viewQuery(fesm2015_c8,!0),viewQuery(fesm2015_c9,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.toolbarTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.popupTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.toolbarButtonGroup=_t.first),queryRefresh(_t=loadQuery())&&(ctx.overflowButtonGroup=_t.first))},inputs:{selection:"selection",look:"look",disabled:"disabled",width:"width"},exportAs:["kendoToolBarButtonGroup"],features:[ProvidersFeature([fesm2015_LocalizationService,{provide:fesm2015_ToolBarToolComponent,useExisting:forwardRef(()=>ToolBarButtonGroupComponent)}]),InheritDefinitionFeature],decls:4,vars:0,consts:[["toolbarTemplate",""],["popupTemplate",""],[3,"tabIndex","selection","disabled","look","width","navigate","focus"],["toolbarButtonGroup",""],["kendoButton","",3,"ngStyle","ngClass","disabled","togglable","primary","selected","icon","iconClass","imageUrl","click","selectedChange",4,"ngFor","ngForOf"],["kendoButton","",3,"ngStyle","ngClass","disabled","togglable","primary","selected","icon","iconClass","imageUrl","click","selectedChange"],[1,"k-overflow-button",3,"tabIndex","selection","disabled","look","width"],["overflowButtonGroup",""],["kendoButton","","class","k-overflow-button",3,"ngStyle","ngClass","disabled","togglable","primary","selected","icon","iconClass","imageUrl","click","selectedChange",4,"ngFor","ngForOf"],["kendoButton","",1,"k-overflow-button",3,"ngStyle","ngClass","disabled","togglable","primary","selected","icon","iconClass","imageUrl","click","selectedChange"]],template:function(rf,ctx){1&rf&&(template(0,ToolBarButtonGroupComponent_ng_template_0_Template,3,6,"ng-template",null,0,templateRefExtractor),template(2,ToolBarButtonGroupComponent_ng_template_2_Template,3,6,"ng-template",null,1,templateRefExtractor))},directives:[fesm2015_ButtonGroupComponent,common_NgForOf,fesm2015_ButtonDirective,common_NgStyle,common_NgClass],encapsulation:2}),ToolBarButtonGroupComponent})(),fesm2015_ToolBarSeparatorComponent=(()=>{class ToolBarSeparatorComponent extends fesm2015_ToolBarToolComponent{constructor(){super()}canFocus(){return!1}focus(){}handleKey(){return!1}ngAfterViewInit(){this.popupTemplate||(this.popupTemplate=this.toolbarTemplate)}}return ToolBarSeparatorComponent.fac=function(t){return new(t||ToolBarSeparatorComponent)},ToolBarSeparatorComponent.cmp=defineComponent({type:ToolBarSeparatorComponent,selectors:[["kendo-toolbar-separator"]],viewQuery:function(rf,ctx){var _t;1&rf&&(staticViewQuery(dist_fesm2015_c1,!0),staticViewQuery(fesm2015_c6,!0),viewQuery(_c17,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.popupTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.toolbarTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.separator=_t.first))},exportAs:["kendoToolBarSeparator"],features:[ProvidersFeature([{provide:fesm2015_ToolBarToolComponent,useExisting:forwardRef(()=>ToolBarSeparatorComponent)}]),InheritDefinitionFeature],decls:2,vars:0,consts:[["toolbarTemplate",""],[1,"k-separator"]],template:function(rf,ctx){1&rf&&template(0,ToolBarSeparatorComponent_ng_template_0_Template,1,0,"ng-template",null,0,templateRefExtractor)},encapsulation:2}),ToolBarSeparatorComponent})(),fesm2015_RendererService=(()=>{class RendererService{getElement(){return this.element.nativeElement}querySelector(selector){return this.element.nativeElement.querySelector(selector)}querySelectorAll(selector){return this.element.nativeElement.querySelectorAll(selector)}findFocusable(){return((element,checkVisibility=!0)=>findElement(this.element.nativeElement,node=>isFocusable(node,checkVisibility)))(0,!1)}findFocusableChild(element){return element||(element=this.findFocusable()),((element,checkVisibility=!0)=>findElement(element,node=>isFocusable(node,checkVisibility),!1))(element,!1)}findNextFocusableSibling(element){return element||(element=this.findFocusable()),findFocusableSibling(element,!1)}findPrevFocusableSibling(element){return element||(element=this.findFocusable()),findFocusableSibling(element,!1,!0)}setAttribute(element,attr,value){this.renderer.setAttribute(element,attr,value)}}return RendererService.fac=function(t){return new(t||RendererService)},RendererService.prov=defineInjectable({token:RendererService,factory:RendererService.fac}),RendererService})(),fesm2015_ToolBarRendererComponent=(()=>{class ToolBarRendererComponent{constructor(element,renderer,rendererService,refreshService){this.element=element,this.renderer=renderer,this.rendererService=rendererService,this.refreshService=refreshService,this.rendererClick=new core_EventEmitter,this.rendererService.element=element,this.rendererService.renderer=this,this.refreshSubscription=this.refreshService.onRefresh.subscribe(tool=>{this.tool===tool&&this.refresh()})}onClick(ev){this.rendererClick.emit({context:this,event:ev})}ngOnInit(){this.resizable?"toolbar"===this.location?(this.template=this.tool.toolbarTemplate,this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.renderer.setStyle(this.element.nativeElement,"display","none")):(this.template=this.tool.popupTemplate,this.renderer.setStyle(this.element.nativeElement,"display","none")):(this.tool.overflows=!1,this.template=this.tool.toolbarTemplate,this.renderer.setStyle(this.element.nativeElement,"visibility","display"),this.renderer.setStyle(this.element.nativeElement,"display","inline-block"))}ngOnDestroy(){this.refreshSubscription.unsubscribe()}ngAfterViewInit(){this.resizable&&this.refresh()}get width(){return this.tool.overflows?0:fesm2015_outerWidth(this.element.nativeElement)}isDisplayed(){return"none"!==this.element.nativeElement.style.display}refresh(){this.resizable&&("toolbar"===this.location?(this.renderer.setStyle(this.element.nativeElement,"visibility",this.tool.visibility),this.renderer.setStyle(this.element.nativeElement,"display",this.tool.toolbarDisplay)):this.renderer.setStyle(this.element.nativeElement,"display",this.tool.overflowDisplay))}setAttribute(element,attr,value){this.renderer.setAttribute(element,attr,value)}}return ToolBarRendererComponent.fac=function(t){return new(t||ToolBarRendererComponent)(directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_RendererService),directiveInject(fesm2015_RefreshService))},ToolBarRendererComponent.cmp=defineComponent({type:ToolBarRendererComponent,selectors:[["kendo-toolbar-renderer"]],hostBindings:function(rf,ctx){1&rf&&listener("click",(function($event){return ctx.onClick($event)}))},inputs:{tool:"tool",location:"location",resizable:"resizable"},outputs:{rendererClick:"rendererClick"},exportAs:["kendoToolBarRenderer"],features:[ProvidersFeature([fesm2015_RendererService])],decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(rf,ctx){1&rf&&(template(0,ToolBarRendererComponent_ng_container_0_Template,2,1,"ng-container",0),template(1,ToolBarRendererComponent_ng_container_1_Template,2,1,"ng-container",0)),2&rf&&(property("ngIf","toolbar"===ctx.location),advance(1),property("ngIf","overflow"===ctx.location&&ctx.tool.responsive))},directives:[common_NgIf,common_NgTemplateOutlet],encapsulation:2}),ToolBarRendererComponent})(),fesm2015_ToolBarModule=(()=>{class ToolBarModule{}return ToolBarModule.mod=defineNgModule({type:ToolBarModule}),ToolBarModule.inj=defineInjector({factory:function(t){return new(t||ToolBarModule)},imports:[[common_CommonModule,fesm2015_ButtonsModule,fesm2015_PopupModule,fesm2015_ResizeSensorModule]]}),ToolBarModule})();var lodash_es_isUndefined=function(value){return void 0===value},_root=__webpack_require__("Ju5/"),_Symbol=_root.a.Symbol,_arrayMap=function(array,iteratee){for(var index=-1,length=null==array?0:array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result},lodash_es_isArray=Array.isArray,objectProto=Object.prototype,_getRawTag_hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=_Symbol?_Symbol.toStringTag:void 0,_objectToString_nativeObjectToString=Object.prototype.toString,_baseGetTag_symToStringTag=_Symbol?_Symbol.toStringTag:void 0,_baseGetTag=function(value){return null==value?void 0===value?"[object Undefined]":"[object Null]":_baseGetTag_symToStringTag&&_baseGetTag_symToStringTag in Object(value)?function(value){var isOwn=_getRawTag_hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch(e){}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}(value):function(value){return _objectToString_nativeObjectToString.call(value)}(value)},lodash_es_isObjectLike=function(value){return null!=value&&"object"==typeof value},lodash_es_isSymbol=function(value){return"symbol"==typeof value||lodash_es_isObjectLike(value)&&"[object Symbol]"==_baseGetTag(value)},symbolProto=_Symbol?_Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0,_baseToString=function baseToString(value){if("string"==typeof value)return value;if(lodash_es_isArray(value))return _arrayMap(value,baseToString)+"";if(lodash_es_isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-1/0?"-0":result},_castSlice=function(array,start,end){var length=array.length;return end=void 0===end?length:end,!start&&end>=length?array:function(array,start,end){var index=-1,length=array.length;start<0&&(start=-start>length?0:length+start),(end=end>length?length:end)<0&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0;for(var result=Array(length);++index<length;)result[index]=array[index+start];return result}(array,start,end)},_baseFindIndex=function(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1},_baseIsNaN=function(value){return value!=value},_baseIndexOf=function(array,value,fromIndex){return value==value?function(array,value,fromIndex){for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index;return-1}(array,value,fromIndex):_baseFindIndex(array,_baseIsNaN,fromIndex)},_charsStartIndex=function(strSymbols,chrSymbols){for(var index=-1,length=strSymbols.length;++index<length&&_baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index},reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),rsCombo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",reOptMod="(?:"+rsCombo+"|"+rsFitz+")?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+"(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*",rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,"[\\ud800-\\udfff]"].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),_stringToArray=function(string){return function(string){return reHasUnicode.test(string)}(string)?function(string){return string.match(reUnicode)||[]}(string):function(string){return string.split("")}(string)},lodash_es_toString=function(value){return null==value?"":_baseToString(value)},reTrimStart=/^\s+/,reTrim=/^\s+|\s+$/g,lodash_es_eq=function(value,other){return value===other||value!=value&&other!=other},_assocIndexOf=function(array,key){for(var length=array.length;length--;)if(lodash_es_eq(array[length][0],key))return length;return-1},splice=Array.prototype.splice;function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(key){var data=this.__data__,index=_assocIndexOf(data,key);return!(index<0||(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,0))},ListCache.prototype.get=function(key){var data=this.__data__,index=_assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return _assocIndexOf(this.__data__,key)>-1},ListCache.prototype.set=function(key,value){var data=this.__data__,index=_assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this};var uid,_ListCache=ListCache,lodash_es_isObject=function(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)},lodash_es_isFunction=function(value){if(!lodash_es_isObject(value))return!1;var tag=_baseGetTag(value);return"[object Function]"==tag||"[object GeneratorFunction]"==tag||"[object AsyncFunction]"==tag||"[object Proxy]"==tag},coreJsData=_root.a["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",funcToString=Function.prototype.toString,_toSource=function(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""},reIsHostCtor=/^\[object .+?Constructor\]$/,reIsNative=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_getNative=function(object,key){var value=function(object,key){return null==object?void 0:object[key]}(object,key);return function(value){return!(!lodash_es_isObject(value)||(func=value,maskSrcKey&&maskSrcKey in func))&&(lodash_es_isFunction(value)?reIsNative:reIsHostCtor).test(_toSource(value));var func}(value)?value:void 0},_Map=_getNative(_root.a,"Map"),_nativeCreate=_getNative(Object,"create"),_hashGet_hasOwnProperty=Object.prototype.hasOwnProperty,_hashHas_hasOwnProperty=Object.prototype.hasOwnProperty;function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=function(){this.__data__=_nativeCreate?_nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(_nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return _hashGet_hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return _nativeCreate?void 0!==data[key]:_hashHas_hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=_nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this};var _Hash=Hash,_getMapData=function(map,key){var value,type,data=map.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map};function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new _Hash,map:new(_Map||_ListCache),string:new _Hash}},MapCache.prototype.delete=function(key){var result=_getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function(key){return _getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return _getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=_getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this};var _MapCache=MapCache;function Stack(entries){var data=this.__data__=new _ListCache(entries);this.size=data.size}Stack.prototype.clear=function(){this.__data__=new _ListCache,this.size=0},Stack.prototype.delete=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof _ListCache){var pairs=data.__data__;if(!_Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new _MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var _Stack=Stack;function SetCache(values){var index=-1,length=null==values?0:values.length;for(this.__data__=new _MapCache;++index<length;)this.add(values[index])}SetCache.prototype.add=SetCache.prototype.push=function(value){return this.__data__.set(value,"__lodash_hash_undefined__"),this},SetCache.prototype.has=function(value){return this.__data__.has(value)};var _SetCache=SetCache,_arraySome=function(array,predicate){for(var index=-1,length=null==array?0:array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1},_cacheHas=function(cache,key){return cache.has(key)},_equalArrays=function(array,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked&&stack.get(other))return stacked==other;var index=-1,result=!0,seen=2&bitmask?new _SetCache:void 0;for(stack.set(array,other),stack.set(other,array);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!_arraySome(other,(function(othValue,othIndex){if(!_cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack)))return seen.push(othIndex)}))){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,bitmask,customizer,stack)){result=!1;break}}return stack.delete(array),stack.delete(other),result},_Uint8Array=_root.a.Uint8Array,_mapToArray=function(map){var index=-1,result=Array(map.size);return map.forEach((function(value,key){result[++index]=[key,value]})),result},_setToArray=function(set){var index=-1,result=Array(set.size);return set.forEach((function(value){result[++index]=value})),result},_equalByTag_symbolProto=_Symbol?_Symbol.prototype:void 0,symbolValueOf=_equalByTag_symbolProto?_equalByTag_symbolProto.valueOf:void 0,propertyIsEnumerable=Object.prototype.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,_getSymbols=nativeGetSymbols?function(object){return null==object?[]:(object=Object(object),function(array,predicate){for(var index=-1,length=null==array?0:array.length,resIndex=0,result=[];++index<length;){var value=array[index];propertyIsEnumerable.call(object,value)&&(result[resIndex++]=value)}return result}(nativeGetSymbols(object)))}:function(){return[]},_baseIsArguments=function(value){return lodash_es_isObjectLike(value)&&"[object Arguments]"==_baseGetTag(value)},isArguments_objectProto=Object.prototype,isArguments_hasOwnProperty=isArguments_objectProto.hasOwnProperty,isArguments_propertyIsEnumerable=isArguments_objectProto.propertyIsEnumerable,lodash_es_isArguments=_baseIsArguments(function(){return arguments}())?_baseIsArguments:function(value){return lodash_es_isObjectLike(value)&&isArguments_hasOwnProperty.call(value,"callee")&&!isArguments_propertyIsEnumerable.call(value,"callee")},isBuffer=__webpack_require__("WOAq"),reIsUint=/^(?:0|[1-9]\d*)$/,_isIndex=function(value,length){var type=typeof value;return!!(length=null==length?9007199254740991:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length},lodash_es_isLength=function(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991},typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1;var func,transform,_baseUnary=function(func){return function(value){return func(value)}},_nodeUtil=__webpack_require__("xutz"),nodeIsTypedArray=_nodeUtil.a&&_nodeUtil.a.isTypedArray,lodash_es_isTypedArray=nodeIsTypedArray?_baseUnary(nodeIsTypedArray):function(value){return lodash_es_isObjectLike(value)&&lodash_es_isLength(value.length)&&!!typedArrayTags[_baseGetTag(value)]},_arrayLikeKeys_hasOwnProperty=Object.prototype.hasOwnProperty,_isPrototype_objectProto=Object.prototype,_nativeKeys=(func=Object.keys,transform=Object,function(arg){return func(transform(arg))}),_baseKeys_hasOwnProperty=Object.prototype.hasOwnProperty,lodash_es_isArrayLike=function(value){return null!=value&&lodash_es_isLength(value.length)&&!lodash_es_isFunction(value)},lodash_es_keys=function(object){return lodash_es_isArrayLike(object)?function(value,inherited){var isArr=lodash_es_isArray(value),isArg=!isArr&&lodash_es_isArguments(value),isBuff=!isArr&&!isArg&&Object(isBuffer.a)(value),isType=!isArr&&!isArg&&!isBuff&&lodash_es_isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(var key in value)!inherited&&!_arrayLikeKeys_hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||_isIndex(key,length))||result.push(key);return result}(object):function(object){if((value=object)!==("function"==typeof(Ctor=value&&value.constructor)&&Ctor.prototype||_isPrototype_objectProto))return _nativeKeys(object);var value,Ctor,result=[];for(var key in Object(object))_baseKeys_hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}(object)},_getAllKeys=function(object){return function(object,keysFunc,symbolsFunc){var result=keysFunc(object);return lodash_es_isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,lodash_es_keys,_getSymbols)},_equalObjects_hasOwnProperty=Object.prototype.hasOwnProperty,_DataView=_getNative(_root.a,"DataView"),_Promise=_getNative(_root.a,"Promise"),_Set=_getNative(_root.a,"Set"),_WeakMap=_getNative(_root.a,"WeakMap"),dataViewCtorString=_toSource(_DataView),mapCtorString=_toSource(_Map),promiseCtorString=_toSource(_Promise),setCtorString=_toSource(_Set),weakMapCtorString=_toSource(_WeakMap),getTag=_baseGetTag;(_DataView&&"[object DataView]"!=getTag(new _DataView(new ArrayBuffer(1)))||_Map&&"[object Map]"!=getTag(new _Map)||_Promise&&"[object Promise]"!=getTag(_Promise.resolve())||_Set&&"[object Set]"!=getTag(new _Set)||_WeakMap&&"[object WeakMap]"!=getTag(new _WeakMap))&&(getTag=function(value){var result=_baseGetTag(value),Ctor="[object Object]"==result?value.constructor:void 0,ctorString=Ctor?_toSource(Ctor):"";if(ctorString)switch(ctorString){case dataViewCtorString:return"[object DataView]";case mapCtorString:return"[object Map]";case promiseCtorString:return"[object Promise]";case setCtorString:return"[object Set]";case weakMapCtorString:return"[object WeakMap]"}return result});var _getTag=getTag,_baseIsEqualDeep_hasOwnProperty=Object.prototype.hasOwnProperty,_baseIsEqual=function baseIsEqual(value,other,bitmask,customizer,stack){return value===other||(null==value||null==other||!lodash_es_isObjectLike(value)&&!lodash_es_isObjectLike(other)?value!=value&&other!=other:function(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=lodash_es_isArray(object),othIsArr=lodash_es_isArray(other),objTag=objIsArr?"[object Array]":_getTag(object),othTag=othIsArr?"[object Array]":_getTag(other),objIsObj="[object Object]"==(objTag="[object Arguments]"==objTag?"[object Object]":objTag),othIsObj="[object Object]"==(othTag="[object Arguments]"==othTag?"[object Object]":othTag),isSameTag=objTag==othTag;if(isSameTag&&Object(isBuffer.a)(object)){if(!Object(isBuffer.a)(other))return!1;objIsArr=!0,objIsObj=!1}if(isSameTag&&!objIsObj)return stack||(stack=new _Stack),objIsArr||lodash_es_isTypedArray(object)?_equalArrays(object,other,bitmask,customizer,equalFunc,stack):function(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case"[object DataView]":if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case"[object ArrayBuffer]":return!(object.byteLength!=other.byteLength||!equalFunc(new _Uint8Array(object),new _Uint8Array(other)));case"[object Boolean]":case"[object Date]":case"[object Number]":return lodash_es_eq(+object,+other);case"[object Error]":return object.name==other.name&&object.message==other.message;case"[object RegExp]":case"[object String]":return object==other+"";case"[object Map]":var convert=_mapToArray;case"[object Set]":if(convert||(convert=_setToArray),object.size!=other.size&&!(1&bitmask))return!1;var stacked=stack.get(object);if(stacked)return stacked==other;bitmask|=2,stack.set(object,other);var result=_equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);return stack.delete(object),result;case"[object Symbol]":if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}(object,other,objTag,bitmask,customizer,equalFunc,stack);if(!(1&bitmask)){var objIsWrapped=objIsObj&&_baseIsEqualDeep_hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&_baseIsEqualDeep_hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new _Stack),equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}return!!isSameTag&&(stack||(stack=new _Stack),function(object,other,bitmask,customizer,equalFunc,stack){var isPartial=1&bitmask,objProps=_getAllKeys(object),objLength=objProps.length;if(objLength!=_getAllKeys(other).length&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:_equalObjects_hasOwnProperty.call(other,key)))return!1}var stacked=stack.get(object);if(stacked&&stack.get(other))return stacked==other;var result=!0;stack.set(object,other),stack.set(other,object);for(var skipCtor=isPartial;++index<objLength;){var objValue=object[key=objProps[index]],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor==othCtor||!("constructor"in object)||!("constructor"in other)||"function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor||(result=!1)}return stack.delete(object),stack.delete(other),result}(object,other,bitmask,customizer,equalFunc,stack))}(value,other,bitmask,customizer,baseIsEqual,stack))},_isStrictComparable=function(value){return value==value&&!lodash_es_isObject(value)},_matchesStrictComparable=function(key,srcValue){return function(object){return null!=object&&object[key]===srcValue&&(void 0!==srcValue||key in Object(object))}},reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,_isKey=function(value,object){if(lodash_es_isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!lodash_es_isSymbol(value))||reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object)};function memoize_memoize(func,resolver){if("function"!=typeof func||null!=resolver&&"function"!=typeof resolver)throw new TypeError("Expected a function");var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result)||cache,result};return memoized.cache=new(memoize_memoize.Cache||_MapCache),memoized}memoize_memoize.Cache=_MapCache;var object,lodash_es_memoize=memoize_memoize,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,_stringToPath=function(func){var result=lodash_es_memoize((function(string){var result=[];return 46===string.charCodeAt(0)&&result.push(""),string.replace(rePropName,(function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)})),result}),(function(key){return 500===cache.size&&cache.clear(),key})),cache=result.cache;return result}(),_castPath=function(value,object){return lodash_es_isArray(value)?value:_isKey(value,object)?[value]:_stringToPath(lodash_es_toString(value))},_toKey=function(value){if("string"==typeof value||lodash_es_isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-1/0?"-0":result},_baseGet=function(object,path){for(var index=0,length=(path=_castPath(path,object)).length;null!=object&&index<length;)object=object[_toKey(path[index++])];return index&&index==length?object:void 0},_baseHasIn=function(object,key){return null!=object&&key in Object(object)},_baseMatchesProperty=function(path,srcValue){return _isKey(path)&&_isStrictComparable(srcValue)?_matchesStrictComparable(_toKey(path),srcValue):function(object){var objValue=function(object,path,defaultValue){var result=null==object?void 0:_baseGet(object,path);return void 0===result?void 0:result}(object,path);return void 0===objValue&&objValue===srcValue?function(object,path){return null!=object&&function(object,path,hasFunc){for(var index=-1,length=(path=_castPath(path,object)).length,result=!1;++index<length;){var key=_toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}return result||++index!=length?result:!!(length=null==object?0:object.length)&&lodash_es_isLength(length)&&_isIndex(key,length)&&(lodash_es_isArray(object)||lodash_es_isArguments(object))}(object,path,_baseHasIn)}(object,path):_baseIsEqual(srcValue,objValue,3)}},lodash_es_identity=function(value){return value},_baseIteratee=function(value){return"function"==typeof value?value:null==value?lodash_es_identity:"object"==typeof value?lodash_es_isArray(value)?_baseMatchesProperty(value[0],value[1]):1==(matchData=function(object){for(var result=lodash_es_keys(object),length=result.length;length--;){var key=result[length],value=object[key];result[length]=[key,value,_isStrictComparable(value)]}return result}(source=value)).length&&matchData[0][2]?_matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||function(object,source,matchData,customizer){var index=matchData.length,length=index;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){var key=(data=matchData[index])[0],objValue=object[key],srcValue=data[1];if(data[2]){if(void 0===objValue&&!(key in object))return!1}else{var result,stack=new _Stack;if(!(void 0===result?_baseIsEqual(srcValue,objValue,3,void 0,stack):result))return!1}}return!0}(object,0,matchData)}:_isKey(path=value)?(key=_toKey(path),function(object){return null==object?void 0:object[key]}):function(path){return function(object){return _baseGet(object,path)}}(path);var path,key,source,matchData},toNumber_reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,lodash_es_toInteger=function(value){var result=function(value){return value?(value=function(value){if("number"==typeof value)return value;if(lodash_es_isSymbol(value))return NaN;if(lodash_es_isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=lodash_es_isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(toNumber_reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NaN:+value}(value))===1/0||value===-1/0?17976931348623157e292*(value<0?-1:1):value==value?value:0:0===value?value:0}(value),remainder=result%1;return result==result?remainder?result-remainder:result:0},nativeMax=Math.max,lodash_es_find=function(collection,predicate,fromIndex){var iterable=Object(collection);if(!lodash_es_isArrayLike(collection)){var iteratee=_baseIteratee(predicate);collection=lodash_es_keys(collection),predicate=function(key){return iteratee(iterable[key],key,iterable)}}var index=function(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:lodash_es_toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),_baseFindIndex(array,_baseIteratee(predicate),index)}(collection,predicate,fromIndex);return index>-1?iterable[iteratee?collection[index]:index]:void 0},includes_nativeMax=Math.max,lodash_es_includes=function(collection,value,fromIndex,guard){collection=lodash_es_isArrayLike(collection)?collection:function(object){return null==object?[]:function(object,props){return _arrayMap(props,(function(key){return object[key]}))}(object,lodash_es_keys(object))}(collection),fromIndex=fromIndex&&!guard?lodash_es_toInteger(fromIndex):0;var length=collection.length;return fromIndex<0&&(fromIndex=includes_nativeMax(length+fromIndex,0)),function(value){return"string"==typeof value||!lodash_es_isArray(value)&&lodash_es_isObjectLike(value)&&"[object String]"==_baseGetTag(value)}(collection)?fromIndex<=length&&collection.indexOf(value,fromIndex)>-1:!!length&&_baseIndexOf(collection,value,fromIndex)>-1},_unescapeHtmlChar=(object={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},function(key){return null==object?void 0:object[key]}),reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reHasEscapedHtml=RegExp(reEscapedHtml.source);class TextSelection{}var htmlAttributes=function(htmlAttributes){return htmlAttributes.groupUuuid="group-uuid",htmlAttributes.groupLabel="group-label",htmlAttributes.groupComment="group-comment",htmlAttributes.groupTypeName="group-type-name",htmlAttributes.textSelectionUuid="text-selection-uuid",htmlAttributes.groupColor="group-color",htmlAttributes.style="style",htmlAttributes.contenteditable="contenteditable",htmlAttributes.link="link",htmlAttributes.linkObjectUuid="link-uuid",htmlAttributes.linkName="link-name",htmlAttributes}({});let markupCommon_service_MarkupCommonService=(()=>{class MarkupCommonService{getSelection(){let selection=null;return window.getSelection?selection=window.getSelection():document.getSelection&&(selection=document.getSelection()),selection}getTextSelection(selected){if(selected&&selected.rangeCount&&1===selected.rangeCount){const range=selected.getRangeAt(0),startContainer=range.startContainer,container=document.createElement("div");container.appendChild(range.cloneContents()),startContainer.textContent&&container.innerHTML.indexOf("<span")>0&&container.innerHTML.trim()!==container.innerText.trim()&&range.setEnd(range.startContainer,startContainer.textContent.length)}}trimSpacesFromSelection(selected){if(selected&&selected.rangeCount&&1===selected.rangeCount){const range=selected.getRangeAt(0),startContainer=range.startContainer,endContainer=range.endContainer,container=document.createElement("div");if(container.appendChild(range.cloneContents()),container.innerHTML.trim()===container.innerText.trim()&&startContainer.isSameNode(endContainer)){const selectedtext=container.innerHTML,leftTrim=function(string,chars,guard){if((string=lodash_es_toString(string))&&void 0===chars)return string.replace(reTrimStart,"");if(!string||!(chars=_baseToString(chars)))return string;var strSymbols=_stringToArray(string),start=_charsStartIndex(strSymbols,_stringToArray(chars));return _castSlice(strSymbols,start).join("")}(selectedtext);range.setStart(range.startContainer,range.startOffset+(selectedtext.length-leftTrim.length));const endOffset=range.startOffset+function(string,chars,guard){if((string=lodash_es_toString(string))&&(guard||void 0===chars))return string.replace(reTrim,"");if(!string||!(chars=_baseToString(chars)))return string;var strSymbols=_stringToArray(string),chrSymbols=_stringToArray(chars),start=_charsStartIndex(strSymbols,chrSymbols),end=function(strSymbols,chrSymbols){for(var index=strSymbols.length;index--&&_baseIndexOf(chrSymbols,strSymbols[index],0)>-1;);return index}(strSymbols,chrSymbols)+1;return _castSlice(strSymbols,start,end).join("")}(selectedtext).length;range.setEnd(range.endContainer,endOffset)}}}setManualMarkupTextSelection(selected,enforceMaxLength){if(selected&&0===selected.toString().trim().length);else if(enforceMaxLength&&selected&&selected.toString().trim().length>60);else if(selected&&this.selectionContainsSpan(selected));else if(selected&&!this.isTextSelectionWithinNode(selected));else{if(selected&&selected.toString().trim().length>0){const textSelection=new TextSelection;return textSelection.selectedString=selected.toString(),textSelection.range=selected.getRangeAt(0),textSelection.selected=selected,textSelection.selected.removeAllRanges(),textSelection}selected&&selected.removeAllRanges()}}highlightSelectedGroup(target,textSelectionGroups,onSelectGroup){if("SPAN"===target.nodeName&&target.hasAttribute("group-uuid")){const groupUuid=target.getAttribute("group-uuid"),group=lodash_es_find(textSelectionGroups,{groupUuid:groupUuid});group&&(onSelectGroup({selectedRows:[group]}),target.blur())}}getTextSelectionMatchesFound(selectedString,structuredTextHtml){let matchesFound=0;if(selectedString){let pos=structuredTextHtml.indexOf(selectedString);for(;pos>-1;)this.isFoundTextInSpan(structuredTextHtml,pos,selectedString)||++matchesFound,pos=structuredTextHtml.indexOf(selectedString,pos+1);matchesFound>0&&--matchesFound}return matchesFound}createUUID(){const s=[];for(let i=0;i<36;i++)s[i]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return s[14]="4",s[19]="0123456789abcdef".substr(s[19]?3:8,1),s[8]=s[13]=s[18]=s[23]="-",s.join("")}isFoundTextInSpan(structuredTextHtml,pos,searchedText){if("</span>"===structuredTextHtml.substr(pos-"</span>".indexOf(searchedText),"</span>".length))return!0;const endSpanPos=structuredTextHtml.indexOf("</span>",pos);if(-1===endSpanPos)return!1;{const startSpanPos=structuredTextHtml.indexOf("<span",pos);return-1===startSpanPos||startSpanPos>endSpanPos}}selectionContainsSpan(selected){let selectionContainsSpan=!1;if(selected.rangeCount){const container=document.createElement("div");for(let i=0,len=selected.rangeCount;i<len;++i){const parentNode=selected.getRangeAt(i).startContainer.parentNode;parentNode&&"SPAN"===parentNode.nodeName&&(selectionContainsSpan=!0),container.appendChild(selected.getRangeAt(i).cloneContents())}(lodash_es_includes(container.innerHTML,"<span")||lodash_es_includes(container.innerHTML,"</span>"))&&(selectionContainsSpan=!0)}return selectionContainsSpan}isTextSelectionWithinNode(selected){let textSelectionWithinNode=!1;if(selected&&selected.rangeCount&&1===selected.rangeCount){const range=selected.getRangeAt(0),container=document.createElement("div");container.appendChild(range.cloneContents()),(string=container.innerHTML,(string=lodash_es_toString(string))&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,_unescapeHtmlChar):string).trim()===container.innerText.trim()&&(textSelectionWithinNode=!0)}var string;return textSelectionWithinNode}replaceTextSelectionWithElement(pos,foundTextString,structuredTextHtml,groupUuid,groupLabel,groupComment,groupTypeName,groupColor){const endPosition=pos+foundTextString.length,element=this.createTextSelectionElement(groupUuid,groupLabel,groupComment,groupTypeName,groupColor);return element.innerText=foundTextString,[structuredTextHtml.substring(0,pos)+element.outerHTML+structuredTextHtml.substring(endPosition),pos+element.outerHTML.length,element.getAttribute(htmlAttributes.textSelectionUuid),element.textContent]}createTextSelectionElement(groupUuid,groupLabel,groupComment,groupTypeName,groupColor){const textSelectionUuid=this.createUUID(),element=document.createElement("span");return element.setAttribute(htmlAttributes.groupUuuid,groupUuid),element.setAttribute(htmlAttributes.groupLabel,groupLabel),element.setAttribute(htmlAttributes.groupComment,groupComment),element.setAttribute(htmlAttributes.groupTypeName,groupTypeName),element.setAttribute(htmlAttributes.textSelectionUuid,textSelectionUuid),element.setAttribute(htmlAttributes.groupColor,groupColor),element.setAttribute(htmlAttributes.style,"border-color:"+groupColor+";cursor:pointer"),element.setAttribute(htmlAttributes.contenteditable,"false"),element}}return MarkupCommonService.fac=function(t){return new(t||MarkupCommonService)},MarkupCommonService.prov=defineInjectable({token:MarkupCommonService,factory:MarkupCommonService.fac,providedIn:"root"}),MarkupCommonService})();var _baseEach=function(collection,iteratee){if(null==collection)return collection;if(!lodash_es_isArrayLike(collection))return function(object,iteratee){return object&&function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[++index];if(!1===iteratee(iterable[key],key,iterable))break}return object}(object,iteratee,lodash_es_keys)}(collection,iteratee);for(var length=collection.length,index=-1,iterable=Object(collection);++index<length&&!1!==iteratee(iterable[index],index,iterable););return collection},_compareAscending=function(value,other){if(value!==other){var valIsDefined=void 0!==value,valIsNull=null===value,valIsReflexive=value==value,valIsSymbol=lodash_es_isSymbol(value),othIsDefined=void 0!==other,othIsNull=null===other,othIsReflexive=other==other,othIsSymbol=lodash_es_isSymbol(other);if(!othIsNull&&!othIsSymbol&&!valIsSymbol&&value>other||valIsSymbol&&othIsDefined&&othIsReflexive&&!othIsNull&&!othIsSymbol||valIsNull&&othIsDefined&&othIsReflexive||!valIsDefined&&othIsReflexive||!valIsReflexive)return 1;if(!valIsNull&&!valIsSymbol&&!othIsSymbol&&value<other||othIsSymbol&&valIsDefined&&valIsReflexive&&!valIsNull&&!valIsSymbol||othIsNull&&valIsDefined&&valIsReflexive||!othIsDefined&&valIsReflexive||!othIsReflexive)return-1}return 0},_baseOrderBy=function(collection,iteratees,orders){var index=-1;return iteratees=_arrayMap(iteratees.length?iteratees:[lodash_es_identity],_baseUnary(_baseIteratee)),function(array,comparer){var length=array.length;for(array.sort((function(object,other){return function(object,other,orders){for(var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;++index<length;){var result=_compareAscending(objCriteria[index],othCriteria[index]);if(result)return index>=ordersLength?result:result*("desc"==orders[index]?-1:1)}return object.index-other.index}(object,other,orders)}));length--;)array[length]=array[length].value;return array}(function(collection,iteratee){var index=-1,result=lodash_es_isArrayLike(collection)?Array(collection.length):[];return _baseEach(collection,(function(value,key,collection){result[++index]=iteratee(value)})),result}(collection,(function(value,key,collection){return{criteria:_arrayMap(iteratees,(function(iteratee){return iteratee(value)})),index:++index,value:value}})))};let regexMarkup_service_RegexMarkupService=(()=>{class RegexMarkupService{constructor(){this.concepts=["nlpPerson","nlpPlace","nlpPhone","nlpEmail"],this.personMarkers=["1Lt","1stLt","2Lt","2ndLt","Amb","BG","BGen","BrigGen","Brother","Capt","CAPT","CDR","Col","COL","CPT","Dean","Dr","Drs","ENS","Est","Gen","GEN","Gov","Hon","Judge","Justice","LCDR","LCpl","Lt","LT","LTC","LtCol","LTG","LtGen","LTJG","Maj","MAJ","MajGen","Mayor","Mdme","MG","Miss","Mr","Mrs","Ms","MSG","Msgr","MSgt","Prince","Prof","Rabbi","RADM","Rev","RT","Senator","Sir","Sister"],this.addressMarkers=["Building","Church","College","Farm","Hotel","House","Lighthouse","Mall","Manor","Monument","Museum","Office","Residence","School","Theatre","Tower","University","Zoo","Alley","Ally","Aly","Anex","Annex","Annx","Anx","Arc","Arcade","Av","Ave","Aven","Avenu","Avenue","Avn","Avnue","Bayoo","Bayou","Bch","Beach","Bend","Bnd","Blf","Bluf","Bluff","Bluffs","Bot","Btm","Bottm","Bottom","Blvd","Boul","Boulevard","Boulv","Br","Brnch","Branch","Brdge","Brg","Bridge","Brk","Brook","Brooks","Burg","Burgs","Byp","Bypa","Bypas","Bypass","Byps","Camp","Cp","Cmp","Canyn","Canyon","Cnyn","Cape","Cpe","Causeway","Causwa","Cswy","Cen","Cent","Center","Centr","Centre","Cnter","Cntr","Ctr","Centers","Cir","Circ","Circl","Circle","Crcl","Crcle","Circles","Clf","Cliff","Clfs","Cliffs","Clb","Club","Common","Commons","Cor","Corner","Corners","Cors","Course","Crse","Court","Ct","Courts","Cts","Cove","Cv","Coves","Creek","Crk","Crescent","Cres","Crsent","Crsnt","Crest","Cross","Crossing","Crssng","Xing","Crossroad","Crossroads","Curve","Dale","Dl","Dam","Dm","Div","Divide","Dv","Dvd","Dr","Driv","Drive","Drv","Drives","Est","Estate","Estates","Ests","Exp","Expr","Express","Expressway","Expw","Expy","Ext","Extension","Extn","Extnsn","Exts","Fall","Falls","Fls","Ferry","Frry","Fry","Field","Fld","Fields","Flds","Flat","Flt","Flats","Flts","Ford","Frd","Fords","Forest","Forests","Frst","Forg","Forge","Frg","Forges","Fork","Frk","Forks","Frks","Fort","Frt","Ft","Freeway","Freewy","Frway","Frwy","Fwy","Garden","Gardn","Grden","Grdn","Gardens","Gdns","Grdns","Gateway","Gatewy","Gatway","Gtway","Gtwy","Glen","Gln","Glens","Green","Grn","Greens","Grov","Grove","Grv","Groves","Harb","Harbor","Harbr","Hbr","Hrbor","Harbors","Haven","Hvn","Heights","Ht","Hts","Highway","Highwy","Hiway","Hiwy","Hway","Hwy","Hill","Hl","Hills","Hls","Hllw","Hollow","Hollows","Holw","Holws","Inlt","Is","Island","Islnd","Islands","Islnds","Iss","Isle","Isles","Jct","Jction","Jctn","Junction","Junctn","Juncton","Jctns","Jcts","Junctions","Key","Ky","Keys","Kys","Knl","Knol","Knoll","Knls","Knolls","Lk","Lake","Lks","Lakes","Land","Landing","Lndg","Lndng","Lane","Ln","Lgt","Light","Lights","Lf","Loaf","Lck","Lock","Lcks","Locks","Ldg","Ldge","Lodg","Lodge","Loop","Loops","Mall","Mnr","Manor","Manors","Mnrs","Meadow","Mdw","Mdws","Meadows","Medows","Mews","Mill","Mills","Missn","Mssn","Motorway","Mnt","Mt","Mount","Mntain","Mntn","Mountain","Mountin","Mtin","Mtn","Mntns","Mountains","Nck","Neck","Orch","Orchard","Orchrd","Oval","Ovl","Overpass","Park","Prk","Parks","Parkway","Parkwy","Pkway","Pkwy","Pky","Parkways","Pkwys","Pass","Passage","Path","Paths","Pike","Pikes","Pine","Pines","Pnes","Pl","Plain","Pln","Plains","Plns","Plaza","Plz","Plza","Point","Pt","Points","Pts","Port","Prt","Ports","Prts","Pr","Prairie","Prr","Rad","Radial","Radiel","Radl","Ramp","Ranch","Ranches","Rnch","Rnchs","Rapid","Rpd","Rapids","Rpds","Rest","Rst","Rdg","Rdge","Ridge","Rdgs","Ridges","Riv","River","Rvr","Rivr","Rd","Road","Roads","Rds","Route","Row","Rue","Run","Shl","Shoal","Shls","Shoals","Shoar","Shore","Shr","Shoars","Shores","Shrs","Skyway","Spg","Spng","Spring","Sprng","Spgs","Spngs","Springs","Sprngs","Spur","Spurs","Sq","Sqr","Sqre","Squ","Square","Sqrs","Squares","Sta","Station","Statn","Stn","Stra","Strav","Straven","Stravenue","Stravn","Strvn","Strvnue","Stream","Streme","Strm","Street","Strt","St","Str","Streets","Smt","Sumit","Sumitt","Summit","Ter","Terr","Terrace","Throughway","Trace","Traces","Trce","Track","Tracks","Trak","Trk","Trks","Trafficway","Trail","Trails","Trl","Trls","Trailer","Trlr","Trlrs","Tunel","Tunl","Tunls","Tunnel","Tunnels","Tunnl","Trnpk","Turnpike","Turnpk","Underpass","Un","Union","Unions","Valley","Vally","Vlly","Vly","Valleys","Vlys","Vdct","Via","Viadct","Viaduct","View","Vw","Views","Vws","Vill","Villag","Village","Villg","Villiage","Vlg","Villages","Vlgs","Ville","Vl","Vis","Vist","Vista","Vst","Vsta","Walk","Walks","Wall","Wy","Way","Ways","Well","Wells","Wls","Borough","City","District","Parish","Suburb","Town","Township","Village","[A-Z]{2,3} \\d{4,5}[ \\-]?\\d{4,5}","[A-Z]{1,2}\\d{1,2} ?\\d[A-Z]{2}"],this.upperRanges=["A-Z","-","-"],this.lowerRanges=["a-z","-","-"],this.word=this.lowerRanges.join("")+this.upperRanges.join(""),this.wordUpper=this.upperRanges.join(""),this.email=new RegExp("\\b([0-9"+this.word+"][0-9"+this.word+"._-]*@[0-9"+this.word+"][0-9"+this.word+"._\\-]*["+this.word+"])\\b","g"),this.phone=new RegExp("[\\b+]?(?:(?:\\d{1,5}|\\(\\d{1,5}\\))[ \\-]*\\d{1,3}){2,3}\\d\\b","g"),this.person=new RegExp("\\b(?:"+this.personMarkers.join("|")+")\\b\\s*\\.?(?:\\s*["+this.wordUpper+"]["+this.word+"\\-]*)+","g"),this.personClean=new RegExp("\\b(?:"+this.personMarkers.join("|")+")\\b\\s*\\.?s*","g"),this.address=new RegExp("(?:[0-9"+this.wordUpper+"][0-9"+this.word+"\\-]*[,\\s]+)+\\b(?:"+this.addressMarkers.join("|")+")\\b(?:[,\\s]+[0-9"+this.wordUpper+"][0-9"+this.word+"\\-]*)*","g")}getRedaction(text){const markup=[];return text=text.replace(/\n/g," . "),this.addTextGroupings("nlpPerson",this.findPerson(text),markup),this.addTextGroupings("nlpPlace",this.findAddress(text),markup),this.addTextGroupings("nlpEmail",this.findEmail(text),markup),this.addTextGroupings("nlpPhone",this.findPhone(text),markup),markup}getRedactionConcepts(){return this.concepts}addTextGroupings(group,list,entityTextGroups){return Array.from(new Set(list)).forEach(text=>{entityTextGroups.push({text:text,group:group})})}getSupportedConcepts(){return this.concepts}getSuggestedMappings(selectedText,entityName){return"person"===entityName?this.personMappings(selectedText[0]):"telecoms"===entityName?this.telecomMappings(selectedText[0]):"location"===entityName?this.locationMappings(selectedText[0]):[]}findEmail(text){var _a;return null!==(_a=text.match(this.email))&&void 0!==_a?_a:[]}findPhone(text){var _a;return null!==(_a=text.match(this.phone))&&void 0!==_a?_a:[]}findPerson(text){var _a;const people=[];return null===(_a=text.match(this.person))||void 0===_a||_a.forEach(fullname=>{people.push(fullname);const prefix=fullname.match(this.personClean);let honorific;(null==prefix?void 0:prefix.length)&&(honorific=prefix[0].trim());const cleanName=fullname.replace(this.personClean,"");people.push(cleanName),cleanName.split(/\s+/).forEach(name=>{honorific&&people.push(honorific+" "+name),people.push(name)})}),people}findAddress(text){var _a;const addresses=[];return null===(_a=text.match(this.address))||void 0===_a||_a.forEach(address=>{addresses.push(address),addresses.push(...address.split(/\s*,\s*/g))}),addresses}locationMappings(selectedText){let words=[];selectedText=selectedText.replace(/^(\d+)\s*/,(_match,number)=>(words.push(number),"")),words=words.concat(selectedText.split(",").filter(word=>word.length>0&&word.trim()));const mappings=[];return 4===words.length?(mappings.push({label:"Building or house number",field:"building_number",value:words[0]}),mappings.push({label:"Street",field:"street",value:words[1]}),mappings.push({label:"Town or city",field:"town",value:words[2]}),mappings.push({label:"Postcode/ZIP",field:"postcode_zip",value:words[3]})):3===words.length?(mappings.push({label:"Building or house number",field:"building_number",value:words[0]}),mappings.push({label:"Street",field:"street",value:words[1]}),mappings.push({label:"Town or City",field:"town",value:words[2]})):2===words.length?(mappings.push({label:"Street",field:"street",value:words[0]}),mappings.push({label:"Town or City",field:"town",value:words[1]})):mappings.push({label:"Street",field:"street",value:words[0]}),mappings}personMappings(selectedText){const words=selectedText.split(" ").filter(word=>word.length>0),mappings=[];if(3===words.length){const title=words[0].replace(/[^\w]/g,"");mappings.push({label:"Title",field:"title",value:title,isReference:!0}),mappings.push({label:"First name",field:"first_name",value:words[1]}),mappings.push({label:"Last Name",field:"last_name",value:words[2]})}else 2===words.length?(mappings.push({label:"First name",field:"first_name",value:words[0]}),mappings.push({label:"Last Name",field:"last_name",value:words[1]})):mappings.push({label:"First name",field:"first_name",value:words[0]});return mappings}telecomMappings(selectedText){const mappings=[{label:"Detail",field:"detail",value:selectedText}];return selectedText.match(this.email)?mappings.push({label:"Type",field:"telecoms_type",value:"E-mail Address"}):selectedText.match(this.phone)&&mappings.push({label:"Type",field:"telecoms_type",value:"Landline"}),mappings}}return RegexMarkupService.fac=function(t){return new(t||RegexMarkupService)},RegexMarkupService.prov=defineInjectable({token:RegexMarkupService,factory:RegexMarkupService.fac,providedIn:"root"}),RegexMarkupService})(),redaction_component_service_RedactionComponentService=(()=>{class RedactionComponentService{constructor(markupCommonService,regexMarkupService){this.markupCommonService=markupCommonService,this.regexMarkupService=regexMarkupService}manualRedactText(redactionText,editableConentEl,openMultiSelectDialog){const selectedText=this.markupCommonService.getSelection();if(this.markupCommonService.getTextSelection(selectedText),this.markupCommonService.trimSpacesFromSelection(selectedText),selectedText&&selectedText.anchorOffset!==selectedText.focusOffset){const textSelection=this.markupCommonService.setManualMarkupTextSelection(selectedText,!1);if(textSelection)return this.checkMultipleMatchesAndMarkup(textSelection,editableConentEl,redactionText,openMultiSelectDialog)}}automaticRedactText(redactionText,groupTypes){const html="<div>"+redactionText.replace(/(<\/?div>|<\/?p>|<br>)/g,"$1\n")+"</div>",text=$(html).text();return[(collection=this.regexMarkupService.getRedaction(text),iteratees=group=>group.text.length,orders="desc",null==collection?[]:(lodash_es_isArray(iteratees)||(iteratees=null==iteratees?[]:[iteratees]),lodash_es_isArray(orders=orders)||(orders=null==orders?[]:[orders]),_baseOrderBy(collection,iteratees,orders))).reduce((groups,textGrouping)=>{if(textGrouping.text){const groupUuid=this.markupCommonService.createUUID(),type=lodash_es_find(groupTypes,{name:textGrouping.group});let returnObj;if(returnObj=this.markupMultipleTextSelections(redactionText,groupUuid,textGrouping.text,type?type.label:"",textGrouping.group,"#000000",textGrouping.text),returnObj)return redactionText=returnObj.updatedRedactionText,groups.push(returnObj.group),groups}return groups},[]),redactionText];var collection,iteratees,orders}redactSpans(editableConentEl,standardRedactionLength,showLabel){return editableConentEl.nativeElement.querySelectorAll("span[text-selection-uuid]").forEach(redactedSpan=>{if(redactedSpan.setAttribute("style","background-color: black; color: white"),redactedSpan.setAttribute("class","redacted-text"),redactedSpan.removeAttribute("group-label"),redactedSpan.removeAttribute("group-type-name"),!redactedSpan.getAttribute("redacted")&&(redactedSpan.innerHTML=standardRedactionLength?"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;":redactedSpan.innerHTML.replace(/\S|\s/g,"&nbsp;&nbsp;"),showLabel)){const context=redactedSpan.getAttribute("group-comment");context&&(redactedSpan.innerHTML=context.length>this.patternCounter(redactedSpan.innerHTML,/&nbsp;&nbsp;/g)?context:context+redactedSpan.innerHTML.substring(12*context.length),redactedSpan.removeAttribute("group-comment"))}redactedSpan.setAttribute("redacted","true")}),editableConentEl.nativeElement.innerHTML}removeRedactGroup(target,editableConentEl,redactionGroups,selectedGroupUuid){if("SPAN"===target.nodeName&&target.hasAttribute("group-uuid")&&!target.hasAttribute("redacted")){const uuid=target.getAttribute("group-uuid"),spans=editableConentEl.nativeElement.querySelectorAll("span[group-uuid='"+uuid+"']");$(spans).contents().unwrap();const selected=this.markupCommonService.getSelection();return selected&&selected.removeAllRanges(),{redactionGroups:redactionGroups.filter(group=>group.groupUuid!==uuid),clearSelectedGroup:uuid===selectedGroupUuid}}return{redactionGroups:redactionGroups,clearSelectedGroup:!1}}removeRedactionGroup(selectedGroup,editableConentEl,redactionGroups){const spans=editableConentEl.nativeElement.querySelectorAll("span[group-uuid='"+selectedGroup.groupUuid+"']");return $(spans).contents().unwrap(),redactionGroups.filter(group=>group.groupUuid!==selectedGroup.groupUuid)}highlightText(isManualRedact,target,redactionGroups,onSelectGroup,redactionText,editableConentEl,openMultiSelectDialog){return this.markupCommonService.highlightSelectedGroup(target,redactionGroups,onSelectGroup),isManualRedact?this.manualRedactText(redactionText,editableConentEl,openMultiSelectDialog):void 0}highlightSelectedGroup(editableConentEl,selectedRedactionGroup){const unSelectedSpans=editableConentEl.nativeElement.querySelectorAll("span.selected-span");$(unSelectedSpans).removeClass("selected-span");const selectedSpans=editableConentEl.nativeElement.querySelectorAll("span[group-uuid='"+selectedRedactionGroup.groupUuid+"']");$(selectedSpans).addClass("selected-span")}updateSelectedGroupComment(redactionGroup,newGroupComment,editableConentEl){if(redactionGroup.groupComment!==newGroupComment){redactionGroup.groupComment=newGroupComment;const selectedSpans=editableConentEl.nativeElement.querySelectorAll("span[group-uuid='"+redactionGroup.groupUuid+"']");$(selectedSpans).attr(htmlAttributes.groupComment,newGroupComment)}}patternCounter(str,pattern){return((str||"").match(pattern)||[]).length}checkMultipleMatchesAndMarkup(textSelection,editableConentEl,redactionText,openMultiSelectDialog){const matches=this.markupCommonService.getTextSelectionMatchesFound(textSelection.selectedString,redactionText);return matches>0?void openMultiSelectDialog(matches,textSelection):this.markUpText(redactionText,textSelection,editableConentEl,textSelection.selectedString)}markUpText(redactionText,textSelection,editableConentEl,groupLabel="",includeFoundTextSelections=!1,selectedInstances,groupColor="black",groupUuid,groupComment="",groupTypeName=""){if(groupUuid){const spans=editableConentEl.nativeElement.querySelectorAll("span[group-uuid='"+groupUuid+"']");$(spans).attr("group-label",groupLabel).attr("group-comment",groupComment).attr("group-type-name",groupTypeName)}else groupUuid=this.markupCommonService.createUUID();if(includeFoundTextSelections&&textSelection){const returnObj=this.markupMultipleTextSelections(redactionText,groupUuid,groupLabel,groupComment,groupTypeName,groupColor,textSelection.selectedString,selectedInstances);return returnObj?[returnObj.group,returnObj.updatedRedactionText]:void 0}if(textSelection){const element=this.markupCommonService.createTextSelectionElement(groupUuid,groupLabel,groupComment,groupTypeName,groupColor);return textSelection.range.surroundContents(element),[{groupUuid:groupUuid,groupLabel:groupLabel,groupComment:groupComment,groupTypeName:groupTypeName,groupTypeLabel:null,groupTypeLinkEntity:null,groupColor:groupColor,textSelections:[{groupUuid:groupUuid,textSelectionUuid:element.getAttribute(htmlAttributes.textSelectionUuid),selectedText:element.textContent}]},redactionText]}}markupMultipleTextSelections(redactionText,groupUuid,groupLabel,groupComment,groupTypeName,groupColor,foundTextString,selectedInstances){let pos=redactionText.indexOf(foundTextString),currentMatch=0;const textSelections=[];for(;pos>-1;){if(!selectedInstances&&!this.markupCommonService.isFoundTextInSpan(redactionText,pos,foundTextString)||selectedInstances&&currentMatch<selectedInstances.length&&selectedInstances[currentMatch].redact&&!this.markupCommonService.isFoundTextInSpan(redactionText,pos,foundTextString)){const[updateRedactionText,newPos,textSelectionUuid,selectedText]=this.markupCommonService.replaceTextSelectionWithElement(pos,foundTextString,redactionText,groupUuid,groupLabel,groupComment,groupTypeName,groupColor);redactionText=updateRedactionText,pos=newPos,textSelections.push({groupUuid:groupUuid,textSelectionUuid:textSelectionUuid,selectedText:selectedText})}this.markupCommonService.isFoundTextInSpan(redactionText,pos,foundTextString)||currentMatch++,pos=redactionText.indexOf(foundTextString,pos+1)}return textSelections.length>0?{group:{groupUuid:groupUuid,groupLabel:groupLabel,groupComment:groupComment,groupTypeName:groupTypeName,groupTypeLabel:null,groupTypeLinkEntity:null,groupColor:groupColor,textSelections:textSelections},updatedRedactionText:redactionText}:void 0}}return RedactionComponentService.fac=function(t){return new(t||RedactionComponentService)(inject(markupCommon_service_MarkupCommonService),inject(regexMarkup_service_RegexMarkupService))},RedactionComponentService.prov=defineInjectable({token:RedactionComponentService,factory:RedactionComponentService.fac,providedIn:"root"}),RedactionComponentService})();function forkJoinInternal(sources,keys){return new Observable_Observable(subscriber=>{const len=sources.length;if(0===len)return void subscriber.complete();const values=new Array(len);let completed=0,emitted=0;for(let i=0;i<len;i++){const source=from_from(sources[i]);let hasValue=!1;subscriber.add(source.subscribe({next:value=>{hasValue||(hasValue=!0,emitted++),values[i]=value},error:err=>subscriber.error(err),complete:()=>{completed++,completed!==len&&hasValue||(emitted===len&&subscriber.next(keys?keys.reduce((result,key,i)=>(result[key]=values[i],result),{}):values),subscriber.complete())}}))}})}const NG_VALUE_ACCESSOR=new InjectionToken("NgValueAccessor"),CHECKBOX_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>forms_CheckboxControlValueAccessor),multi:!0};let forms_CheckboxControlValueAccessor=(()=>{class CheckboxControlValueAccessor{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=_=>{},this.onTouched=()=>{}}writeValue(value){this._renderer.setProperty(this._elementRef.nativeElement,"checked",value)}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",isDisabled)}}return CheckboxControlValueAccessor.fac=function(t){return new(t||CheckboxControlValueAccessor)(directiveInject(Renderer2),directiveInject(ElementRef))},CheckboxControlValueAccessor.dir=defineDirective({type:CheckboxControlValueAccessor,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(rf,ctx){1&rf&&listener("change",(function($event){return ctx.onChange($event.target.checked)}))("blur",(function(){return ctx.onTouched()}))},features:[ProvidersFeature([CHECKBOX_VALUE_ACCESSOR])]}),CheckboxControlValueAccessor})();const DEFAULT_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>forms_DefaultValueAccessor),multi:!0},COMPOSITION_BUFFER_MODE=new InjectionToken("CompositionEventMode");let forms_DefaultValueAccessor=(()=>{class DefaultValueAccessor{constructor(_renderer,_elementRef,_compositionMode){this._renderer=_renderer,this._elementRef=_elementRef,this._compositionMode=_compositionMode,this.onChange=_=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const userAgent=getDOM()?getDOM().getUserAgent():"";return/android (\d+)/.test(userAgent.toLowerCase())}())}writeValue(value){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==value?"":value)}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",isDisabled)}_handleInput(value){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(value)}_compositionStart(){this._composing=!0}_compositionEnd(value){this._composing=!1,this._compositionMode&&this.onChange(value)}}return DefaultValueAccessor.fac=function(t){return new(t||DefaultValueAccessor)(directiveInject(Renderer2),directiveInject(ElementRef),directiveInject(COMPOSITION_BUFFER_MODE,8))},DefaultValueAccessor.dir=defineDirective({type:DefaultValueAccessor,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(rf,ctx){1&rf&&listener("input",(function($event){return ctx._handleInput($event.target.value)}))("blur",(function(){return ctx.onTouched()}))("compositionstart",(function(){return ctx._compositionStart()}))("compositionend",(function($event){return ctx._compositionEnd($event.target.value)}))},features:[ProvidersFeature([DEFAULT_VALUE_ACCESSOR])]}),DefaultValueAccessor})(),forms_AbstractControlDirective=(()=>{class AbstractControlDirective{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(value){this.control&&this.control.reset(value)}hasError(errorCode,path){return!!this.control&&this.control.hasError(errorCode,path)}getError(errorCode,path){return this.control?this.control.getError(errorCode,path):null}}return AbstractControlDirective.fac=function(t){return new(t||AbstractControlDirective)},AbstractControlDirective.dir=defineDirective({type:AbstractControlDirective}),AbstractControlDirective})(),forms_ControlContainer=(()=>{class ControlContainer extends forms_AbstractControlDirective{get formDirective(){return null}get path(){return null}}return ControlContainer.fac=function(t){return ControlContainer_BaseFactory(t||ControlContainer)},ControlContainer.dir=defineDirective({type:ControlContainer,features:[InheritDefinitionFeature]}),ControlContainer})();const ControlContainer_BaseFactory=getInheritedFactory(forms_ControlContainer);function unimplemented(){throw new Error("unimplemented")}class NgControl extends forms_AbstractControlDirective{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return unimplemented()}get asyncValidator(){return unimplemented()}}class AbstractControlStatus{constructor(cd){this._cd=cd}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let forms_NgControlStatus=(()=>{class NgControlStatus extends AbstractControlStatus{constructor(cd){super(cd)}}return NgControlStatus.fac=function(t){return new(t||NgControlStatus)(directiveInject(NgControl,2))},NgControlStatus.dir=defineDirective({type:NgControlStatus,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(rf,ctx){2&rf&&classProp("ng-untouched",ctx.ngClassUntouched)("ng-touched",ctx.ngClassTouched)("ng-pristine",ctx.ngClassPristine)("ng-dirty",ctx.ngClassDirty)("ng-valid",ctx.ngClassValid)("ng-invalid",ctx.ngClassInvalid)("ng-pending",ctx.ngClassPending)},features:[InheritDefinitionFeature]}),NgControlStatus})(),forms_NgControlStatusGroup=(()=>{class NgControlStatusGroup extends AbstractControlStatus{constructor(cd){super(cd)}}return NgControlStatusGroup.fac=function(t){return new(t||NgControlStatusGroup)(directiveInject(forms_ControlContainer,2))},NgControlStatusGroup.dir=defineDirective({type:NgControlStatusGroup,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(rf,ctx){2&rf&&classProp("ng-untouched",ctx.ngClassUntouched)("ng-touched",ctx.ngClassTouched)("ng-pristine",ctx.ngClassPristine)("ng-dirty",ctx.ngClassDirty)("ng-valid",ctx.ngClassValid)("ng-invalid",ctx.ngClassInvalid)("ng-pending",ctx.ngClassPending)},features:[InheritDefinitionFeature]}),NgControlStatusGroup})();function isEmptyInputValue(value){return null==value||0===value.length}const NG_VALIDATORS=new InjectionToken("NgValidators"),NG_ASYNC_VALIDATORS=new InjectionToken("NgAsyncValidators"),EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class forms_Validators{static min(min){return control=>{if(isEmptyInputValue(control.value)||isEmptyInputValue(min))return null;const value=parseFloat(control.value);return!isNaN(value)&&value<min?{min:{min:min,actual:control.value}}:null}}static max(max){return control=>{if(isEmptyInputValue(control.value)||isEmptyInputValue(max))return null;const value=parseFloat(control.value);return!isNaN(value)&&value>max?{max:{max:max,actual:control.value}}:null}}static required(control){return isEmptyInputValue(control.value)?{required:!0}:null}static requiredTrue(control){return!0===control.value?null:{required:!0}}static email(control){return isEmptyInputValue(control.value)||EMAIL_REGEXP.test(control.value)?null:{email:!0}}static minLength(minLength){return control=>{if(isEmptyInputValue(control.value))return null;const length=control.value?control.value.length:0;return length<minLength?{minlength:{requiredLength:minLength,actualLength:length}}:null}}static maxLength(maxLength){return control=>{const length=control.value?control.value.length:0;return length>maxLength?{maxlength:{requiredLength:maxLength,actualLength:length}}:null}}static pattern(pattern){if(!pattern)return forms_Validators.nullValidator;let regex,regexStr;return"string"==typeof pattern?(regexStr="","^"!==pattern.charAt(0)&&(regexStr+="^"),regexStr+=pattern,"$"!==pattern.charAt(pattern.length-1)&&(regexStr+="$"),regex=new RegExp(regexStr)):(regexStr=pattern.toString(),regex=pattern),control=>{if(isEmptyInputValue(control.value))return null;const value=control.value;return regex.test(value)?null:{pattern:{requiredPattern:regexStr,actualValue:value}}}}static nullValidator(control){return null}static compose(validators){if(!validators)return null;const presentValidators=validators.filter(forms_isPresent);return 0==presentValidators.length?null:function(control){return _mergeErrors(function(control,validators){return validators.map(v=>v(control))}(control,presentValidators))}}static composeAsync(validators){if(!validators)return null;const presentValidators=validators.filter(forms_isPresent);return 0==presentValidators.length?null:function(control){return function(...sources){if(1===sources.length){const first=sources[0];if(isArray(first))return forkJoinInternal(first,null);if(isObject(first)&&Object.getPrototypeOf(first)===Object.prototype){const keys=Object.keys(first);return forkJoinInternal(keys.map(key=>first[key]),keys)}}if("function"==typeof sources[sources.length-1]){const resultSelector=sources.pop();return forkJoinInternal(sources=1===sources.length&&isArray(sources[0])?sources[0]:sources,null).pipe(map_map(args=>resultSelector(...args)))}return forkJoinInternal(sources,null)}(function(control,validators){return validators.map(v=>v(control))}(control,presentValidators).map(toObservable)).pipe(map_map(_mergeErrors))}}}function forms_isPresent(o){return null!=o}function toObservable(r){const obs=core_isPromise(r)?from_from(r):r;if(!isObservable(obs))throw new Error("Expected validator to return Promise or Observable.");return obs}function _mergeErrors(arrayOfErrors){let res={};return arrayOfErrors.forEach(errors=>{res=null!=errors?Object.assign(Object.assign({},res),errors):res}),0===Object.keys(res).length?null:res}function normalizeValidator(validator){return validator.validate?c=>validator.validate(c):validator}function normalizeAsyncValidator(validator){return validator.validate?c=>validator.validate(c):validator}const NUMBER_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>forms_NumberValueAccessor),multi:!0};let forms_NumberValueAccessor=(()=>{class NumberValueAccessor{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=_=>{},this.onTouched=()=>{}}writeValue(value){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==value?"":value)}registerOnChange(fn){this.onChange=value=>{fn(""==value?null:parseFloat(value))}}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",isDisabled)}}return NumberValueAccessor.fac=function(t){return new(t||NumberValueAccessor)(directiveInject(Renderer2),directiveInject(ElementRef))},NumberValueAccessor.dir=defineDirective({type:NumberValueAccessor,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(rf,ctx){1&rf&&listener("change",(function($event){return ctx.onChange($event.target.value)}))("input",(function($event){return ctx.onChange($event.target.value)}))("blur",(function(){return ctx.onTouched()}))},features:[ProvidersFeature([NUMBER_VALUE_ACCESSOR])]}),NumberValueAccessor})();const RADIO_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>forms_RadioControlValueAccessor),multi:!0};let forms_RadioControlRegistry=(()=>{class RadioControlRegistry{constructor(){this._accessors=[]}add(control,accessor){this._accessors.push([control,accessor])}remove(accessor){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===accessor)return void this._accessors.splice(i,1)}select(accessor){this._accessors.forEach(c=>{this._isSameGroup(c,accessor)&&c[1]!==accessor&&c[1].fireUncheck(accessor.value)})}_isSameGroup(controlPair,accessor){return!!controlPair[0].control&&controlPair[0]._parent===accessor._control._parent&&controlPair[1].name===accessor.name}}return RadioControlRegistry.fac=function(t){return new(t||RadioControlRegistry)},RadioControlRegistry.prov=defineInjectable({token:RadioControlRegistry,factory:RadioControlRegistry.fac}),RadioControlRegistry})(),forms_RadioControlValueAccessor=(()=>{class RadioControlValueAccessor{constructor(_renderer,_elementRef,_registry,_injector){this._renderer=_renderer,this._elementRef=_elementRef,this._registry=_registry,this._injector=_injector,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(NgControl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(value){this._state=value===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(fn){this._fn=fn,this.onChange=()=>{fn(this.value),this._registry.select(this)}}fireUncheck(value){this.writeValue(value)}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",isDisabled)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return RadioControlValueAccessor.fac=function(t){return new(t||RadioControlValueAccessor)(directiveInject(Renderer2),directiveInject(ElementRef),directiveInject(forms_RadioControlRegistry),directiveInject(Injector))},RadioControlValueAccessor.dir=defineDirective({type:RadioControlValueAccessor,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(rf,ctx){1&rf&&listener("change",(function(){return ctx.onChange()}))("blur",(function(){return ctx.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ProvidersFeature([RADIO_VALUE_ACCESSOR])]}),RadioControlValueAccessor})();const RANGE_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>forms_RangeValueAccessor),multi:!0};let forms_RangeValueAccessor=(()=>{class RangeValueAccessor{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=_=>{},this.onTouched=()=>{}}writeValue(value){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(value))}registerOnChange(fn){this.onChange=value=>{fn(""==value?null:parseFloat(value))}}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",isDisabled)}}return RangeValueAccessor.fac=function(t){return new(t||RangeValueAccessor)(directiveInject(Renderer2),directiveInject(ElementRef))},RangeValueAccessor.dir=defineDirective({type:RangeValueAccessor,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(rf,ctx){1&rf&&listener("change",(function($event){return ctx.onChange($event.target.value)}))("input",(function($event){return ctx.onChange($event.target.value)}))("blur",(function(){return ctx.onTouched()}))},features:[ProvidersFeature([RANGE_VALUE_ACCESSOR])]}),RangeValueAccessor})();const FormErrorExamples_formControlName='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',FormErrorExamples_formGroupName='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',FormErrorExamples_ngModelGroup='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>';class ReactiveErrors{static controlParentException(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+FormErrorExamples_formControlName)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${FormErrorExamples_formGroupName}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        ${FormErrorExamples_ngModelGroup}`)}static missingFormException(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+FormErrorExamples_formControlName)}static groupParentException(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+FormErrorExamples_formGroupName)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(directiveName){console.warn(`\n    It looks like you're using ngModel on the same form field as ${directiveName}. \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===directiveName?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const SELECT_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>forms_SelectControlValueAccessor),multi:!0};let forms_SelectControlValueAccessor=(()=>{class SelectControlValueAccessor{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this._optionMap=new Map,this._idCounter=0,this.onChange=_=>{},this.onTouched=()=>{},this._compareWith=looseIdentical}set compareWith(fn){if("function"!=typeof fn)throw new Error("compareWith must be a function, but received "+JSON.stringify(fn));this._compareWith=fn}writeValue(value){this.value=value;const id=this._getOptionId(value);null==id&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const valueString=function(id,value){return null==id?""+value:(value&&"object"==typeof value&&(value="Object"),`${id}: ${value}`.slice(0,50))}(id,value);this._renderer.setProperty(this._elementRef.nativeElement,"value",valueString)}registerOnChange(fn){this.onChange=valueString=>{this.value=this._getOptionValue(valueString),fn(this.value)}}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",isDisabled)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(value){for(const id of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(id),value))return id;return null}_getOptionValue(valueString){const id=function(valueString){return valueString.split(":")[0]}(valueString);return this._optionMap.has(id)?this._optionMap.get(id):valueString}}return SelectControlValueAccessor.fac=function(t){return new(t||SelectControlValueAccessor)(directiveInject(Renderer2),directiveInject(ElementRef))},SelectControlValueAccessor.dir=defineDirective({type:SelectControlValueAccessor,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(rf,ctx){1&rf&&listener("change",(function($event){return ctx.onChange($event.target.value)}))("blur",(function(){return ctx.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ProvidersFeature([SELECT_VALUE_ACCESSOR])]}),SelectControlValueAccessor})();const SELECT_MULTIPLE_VALUE_ACCESSOR={provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>forms_SelectMultipleControlValueAccessor),multi:!0};let forms_SelectMultipleControlValueAccessor=(()=>{class SelectMultipleControlValueAccessor{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this._optionMap=new Map,this._idCounter=0,this.onChange=_=>{},this.onTouched=()=>{},this._compareWith=looseIdentical}set compareWith(fn){if("function"!=typeof fn)throw new Error("compareWith must be a function, but received "+JSON.stringify(fn));this._compareWith=fn}writeValue(value){let optionSelectedStateSetter;if(this.value=value,Array.isArray(value)){const ids=value.map(v=>this._getOptionId(v));optionSelectedStateSetter=(opt,o)=>{opt._setSelected(ids.indexOf(o.toString())>-1)}}else optionSelectedStateSetter=(opt,o)=>{opt._setSelected(!1)};this._optionMap.forEach(optionSelectedStateSetter)}registerOnChange(fn){this.onChange=_=>{const selected=[];if(_.hasOwnProperty("selectedOptions")){const options=_.selectedOptions;for(let i=0;i<options.length;i++){const opt=options.item(i),val=this._getOptionValue(opt.value);selected.push(val)}}else{const options=_.options;for(let i=0;i<options.length;i++){const opt=options.item(i);if(opt.selected){const val=this._getOptionValue(opt.value);selected.push(val)}}}this.value=selected,fn(selected)}}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",isDisabled)}_registerOption(value){const id=(this._idCounter++).toString();return this._optionMap.set(id,value),id}_getOptionId(value){for(const id of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(id)._value,value))return id;return null}_getOptionValue(valueString){const id=function(valueString){return valueString.split(":")[0]}(valueString);return this._optionMap.has(id)?this._optionMap.get(id)._value:valueString}}return SelectMultipleControlValueAccessor.fac=function(t){return new(t||SelectMultipleControlValueAccessor)(directiveInject(Renderer2),directiveInject(ElementRef))},SelectMultipleControlValueAccessor.dir=defineDirective({type:SelectMultipleControlValueAccessor,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(rf,ctx){1&rf&&listener("change",(function($event){return ctx.onChange($event.target)}))("blur",(function(){return ctx.onTouched()}))},inputs:{compareWith:"compareWith"},features:[ProvidersFeature([SELECT_MULTIPLE_VALUE_ACCESSOR])]}),SelectMultipleControlValueAccessor})();function controlPath(name,parent){return[...parent.path,name]}function setUpControl(control,dir){control||forms_throwError(dir,"Cannot find control with"),dir.valueAccessor||forms_throwError(dir,"No value accessor for form control with"),control.validator=forms_Validators.compose([control.validator,dir.validator]),control.asyncValidator=forms_Validators.composeAsync([control.asyncValidator,dir.asyncValidator]),dir.valueAccessor.writeValue(control.value),function(control,dir){dir.valueAccessor.registerOnChange(newValue=>{control._pendingValue=newValue,control._pendingChange=!0,control._pendingDirty=!0,"change"===control.updateOn&&updateControl(control,dir)})}(control,dir),function(control,dir){control.registerOnChange((newValue,emitModelEvent)=>{dir.valueAccessor.writeValue(newValue),emitModelEvent&&dir.viewToModelUpdate(newValue)})}(control,dir),function(control,dir){dir.valueAccessor.registerOnTouched(()=>{control._pendingTouched=!0,"blur"===control.updateOn&&control._pendingChange&&updateControl(control,dir),"submit"!==control.updateOn&&control.markAsTouched()})}(control,dir),dir.valueAccessor.setDisabledState&&control.registerOnDisabledChange(isDisabled=>{dir.valueAccessor.setDisabledState(isDisabled)}),dir._rawValidators.forEach(validator=>{validator.registerOnValidatorChange&&validator.registerOnValidatorChange(()=>control.updateValueAndValidity())}),dir._rawAsyncValidators.forEach(validator=>{validator.registerOnValidatorChange&&validator.registerOnValidatorChange(()=>control.updateValueAndValidity())})}function updateControl(control,dir){control._pendingDirty&&control.markAsDirty(),control.setValue(control._pendingValue,{emitModelToViewChange:!1}),dir.viewToModelUpdate(control._pendingValue),control._pendingChange=!1}function forms_throwError(dir,message){let messageEnd;throw messageEnd=dir.path.length>1?`path: '${dir.path.join(" -> ")}'`:dir.path[0]?`name: '${dir.path}'`:"unspecified name attribute",new Error(`${message} ${messageEnd}`)}function composeValidators(validators){return null!=validators?forms_Validators.compose(validators.map(normalizeValidator)):null}function composeAsyncValidators(validators){return null!=validators?forms_Validators.composeAsync(validators.map(normalizeAsyncValidator)):null}function isPropertyUpdated(changes,viewModel){if(!changes.hasOwnProperty("model"))return!1;const change=changes.model;return!!change.isFirstChange()||!looseIdentical(viewModel,change.currentValue)}const BUILTIN_ACCESSORS=[forms_CheckboxControlValueAccessor,forms_RangeValueAccessor,forms_NumberValueAccessor,forms_SelectControlValueAccessor,forms_SelectMultipleControlValueAccessor,forms_RadioControlValueAccessor];function selectValueAccessor(dir,valueAccessors){if(!valueAccessors)return null;Array.isArray(valueAccessors)||forms_throwError(dir,"Value accessor was not provided as an array for form control with");let defaultAccessor=void 0,builtinAccessor=void 0,customAccessor=void 0;return valueAccessors.forEach(v=>{var valueAccessor;v.constructor===forms_DefaultValueAccessor?defaultAccessor=v:(valueAccessor=v,BUILTIN_ACCESSORS.some(a=>valueAccessor.constructor===a)?(builtinAccessor&&forms_throwError(dir,"More than one built-in value accessor matches form control with"),builtinAccessor=v):(customAccessor&&forms_throwError(dir,"More than one custom value accessor matches form control with"),customAccessor=v))}),customAccessor||builtinAccessor||defaultAccessor||(forms_throwError(dir,"No valid value accessor for form control with"),null)}function coerceToValidator(validatorOrOpts){const validator=isOptionsObj(validatorOrOpts)?validatorOrOpts.validators:validatorOrOpts;return Array.isArray(validator)?composeValidators(validator):validator||null}function coerceToAsyncValidator(asyncValidator,validatorOrOpts){const origAsyncValidator=isOptionsObj(validatorOrOpts)?validatorOrOpts.asyncValidators:asyncValidator;return Array.isArray(origAsyncValidator)?composeAsyncValidators(origAsyncValidator):origAsyncValidator||null}function isOptionsObj(validatorOrOpts){return null!=validatorOrOpts&&!Array.isArray(validatorOrOpts)&&"object"==typeof validatorOrOpts}class forms_AbstractControl{constructor(validator,asyncValidator){this.validator=validator,this.asyncValidator=asyncValidator,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(newValidator){this.validator=coerceToValidator(newValidator)}setAsyncValidators(newValidator){this.asyncValidator=coerceToAsyncValidator(newValidator)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(opts={}){this.touched=!0,this._parent&&!opts.onlySelf&&this._parent.markAsTouched(opts)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(control=>control.markAllAsTouched())}markAsUntouched(opts={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(control=>{control.markAsUntouched({onlySelf:!0})}),this._parent&&!opts.onlySelf&&this._parent._updateTouched(opts)}markAsDirty(opts={}){this.pristine=!1,this._parent&&!opts.onlySelf&&this._parent.markAsDirty(opts)}markAsPristine(opts={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(control=>{control.markAsPristine({onlySelf:!0})}),this._parent&&!opts.onlySelf&&this._parent._updatePristine(opts)}markAsPending(opts={}){this.status="PENDING",!1!==opts.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!opts.onlySelf&&this._parent.markAsPending(opts)}disable(opts={}){const skipPristineCheck=this._parentMarkedDirty(opts.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(control=>{control.disable(Object.assign(Object.assign({},opts),{onlySelf:!0}))}),this._updateValue(),!1!==opts.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},opts),{skipPristineCheck:skipPristineCheck})),this._onDisabledChange.forEach(changeFn=>changeFn(!0))}enable(opts={}){const skipPristineCheck=this._parentMarkedDirty(opts.onlySelf);this.status="VALID",this._forEachChild(control=>{control.enable(Object.assign(Object.assign({},opts),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:opts.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},opts),{skipPristineCheck:skipPristineCheck})),this._onDisabledChange.forEach(changeFn=>changeFn(!1))}_updateAncestors(opts){this._parent&&!opts.onlySelf&&(this._parent.updateValueAndValidity(opts),opts.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(parent){this._parent=parent}updateValueAndValidity(opts={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(opts.emitEvent)),!1!==opts.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!opts.onlySelf&&this._parent.updateValueAndValidity(opts)}_updateTreeValidity(opts={emitEvent:!0}){this._forEachChild(ctrl=>ctrl._updateTreeValidity(opts)),this.updateValueAndValidity({onlySelf:!0,emitEvent:opts.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(emitEvent){if(this.asyncValidator){this.status="PENDING";const obs=toObservable(this.asyncValidator(this));this._asyncValidationSubscription=obs.subscribe(errors=>this.setErrors(errors,{emitEvent:emitEvent}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(errors,opts={}){this.errors=errors,this._updateControlsErrors(!1!==opts.emitEvent)}get(path){return function(control,path,delimiter){if(null==path)return null;if(Array.isArray(path)||(path=path.split(".")),Array.isArray(path)&&0===path.length)return null;let controlToFind=control;return path.forEach(name=>{controlToFind=controlToFind instanceof FormGroup?controlToFind.controls.hasOwnProperty(name)?controlToFind.controls[name]:null:controlToFind instanceof FormArray&&controlToFind.at(name)||null}),controlToFind}(this,path)}getError(errorCode,path){const control=path?this.get(path):this;return control&&control.errors?control.errors[errorCode]:null}hasError(errorCode,path){return!!this.getError(errorCode,path)}get root(){let x=this;for(;x._parent;)x=x._parent;return x}_updateControlsErrors(emitEvent){this.status=this._calculateStatus(),emitEvent&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(emitEvent)}_initObservables(){this.valueChanges=new core_EventEmitter,this.statusChanges=new core_EventEmitter}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(status){return this._anyControls(control=>control.status===status)}_anyControlsDirty(){return this._anyControls(control=>control.dirty)}_anyControlsTouched(){return this._anyControls(control=>control.touched)}_updatePristine(opts={}){this.pristine=!this._anyControlsDirty(),this._parent&&!opts.onlySelf&&this._parent._updatePristine(opts)}_updateTouched(opts={}){this.touched=this._anyControlsTouched(),this._parent&&!opts.onlySelf&&this._parent._updateTouched(opts)}_isBoxedValue(formState){return"object"==typeof formState&&null!==formState&&2===Object.keys(formState).length&&"value"in formState&&"disabled"in formState}_registerOnCollectionChange(fn){this._onCollectionChange=fn}_setUpdateStrategy(opts){isOptionsObj(opts)&&null!=opts.updateOn&&(this._updateOn=opts.updateOn)}_parentMarkedDirty(onlySelf){return!onlySelf&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class FormControl extends forms_AbstractControl{constructor(formState=null,validatorOrOpts,asyncValidator){super(coerceToValidator(validatorOrOpts),coerceToAsyncValidator(asyncValidator,validatorOrOpts)),this._onChange=[],this._applyFormState(formState),this._setUpdateStrategy(validatorOrOpts),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(value,options={}){this.value=this._pendingValue=value,this._onChange.length&&!1!==options.emitModelToViewChange&&this._onChange.forEach(changeFn=>changeFn(this.value,!1!==options.emitViewToModelChange)),this.updateValueAndValidity(options)}patchValue(value,options={}){this.setValue(value,options)}reset(formState=null,options={}){this._applyFormState(formState),this.markAsPristine(options),this.markAsUntouched(options),this.setValue(this.value,options),this._pendingChange=!1}_updateValue(){}_anyControls(condition){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(fn){this._onChange.push(fn)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(fn){this._onDisabledChange.push(fn)}_forEachChild(cb){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(formState){this._isBoxedValue(formState)?(this.value=this._pendingValue=formState.value,formState.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=formState}}class FormGroup extends forms_AbstractControl{constructor(controls,validatorOrOpts,asyncValidator){super(coerceToValidator(validatorOrOpts),coerceToAsyncValidator(asyncValidator,validatorOrOpts)),this.controls=controls,this._initObservables(),this._setUpdateStrategy(validatorOrOpts),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(name,control){return this.controls[name]?this.controls[name]:(this.controls[name]=control,control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange),control)}addControl(name,control){this.registerControl(name,control),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(name){this.controls[name]&&this.controls[name]._registerOnCollectionChange(()=>{}),delete this.controls[name],this.updateValueAndValidity(),this._onCollectionChange()}setControl(name,control){this.controls[name]&&this.controls[name]._registerOnCollectionChange(()=>{}),delete this.controls[name],control&&this.registerControl(name,control),this.updateValueAndValidity(),this._onCollectionChange()}contains(controlName){return this.controls.hasOwnProperty(controlName)&&this.controls[controlName].enabled}setValue(value,options={}){this._checkAllValuesPresent(value),Object.keys(value).forEach(name=>{this._throwIfControlMissing(name),this.controls[name].setValue(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}patchValue(value,options={}){Object.keys(value).forEach(name=>{this.controls[name]&&this.controls[name].patchValue(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}reset(value={},options={}){this._forEachChild((control,name)=>{control.reset(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this._updatePristine(options),this._updateTouched(options),this.updateValueAndValidity(options)}getRawValue(){return this._reduceChildren({},(acc,control,name)=>(acc[name]=control instanceof FormControl?control.value:control.getRawValue(),acc))}_syncPendingControls(){let subtreeUpdated=this._reduceChildren(!1,(updated,child)=>!!child._syncPendingControls()||updated);return subtreeUpdated&&this.updateValueAndValidity({onlySelf:!0}),subtreeUpdated}_throwIfControlMissing(name){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[name])throw new Error(`Cannot find form control with name: ${name}.`)}_forEachChild(cb){Object.keys(this.controls).forEach(k=>cb(this.controls[k],k))}_setUpControls(){this._forEachChild(control=>{control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(condition){let res=!1;return this._forEachChild((control,name)=>{res=res||this.contains(name)&&condition(control)}),res}_reduceValue(){return this._reduceChildren({},(acc,control,name)=>((control.enabled||this.disabled)&&(acc[name]=control.value),acc))}_reduceChildren(initValue,fn){let res=initValue;return this._forEachChild((control,name)=>{res=fn(res,control,name)}),res}_allControlsDisabled(){for(const controlName of Object.keys(this.controls))if(this.controls[controlName].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(value){this._forEachChild((control,name)=>{if(void 0===value[name])throw new Error(`Must supply a value for form control with name: '${name}'.`)})}}class FormArray extends forms_AbstractControl{constructor(controls,validatorOrOpts,asyncValidator){super(coerceToValidator(validatorOrOpts),coerceToAsyncValidator(asyncValidator,validatorOrOpts)),this.controls=controls,this._initObservables(),this._setUpdateStrategy(validatorOrOpts),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(index){return this.controls[index]}push(control){this.controls.push(control),this._registerControl(control),this.updateValueAndValidity(),this._onCollectionChange()}insert(index,control){this.controls.splice(index,0,control),this._registerControl(control),this.updateValueAndValidity()}removeAt(index){this.controls[index]&&this.controls[index]._registerOnCollectionChange(()=>{}),this.controls.splice(index,1),this.updateValueAndValidity()}setControl(index,control){this.controls[index]&&this.controls[index]._registerOnCollectionChange(()=>{}),this.controls.splice(index,1),control&&(this.controls.splice(index,0,control),this._registerControl(control)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(value,options={}){this._checkAllValuesPresent(value),value.forEach((newValue,index)=>{this._throwIfControlMissing(index),this.at(index).setValue(newValue,{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}patchValue(value,options={}){value.forEach((newValue,index)=>{this.at(index)&&this.at(index).patchValue(newValue,{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}reset(value=[],options={}){this._forEachChild((control,index)=>{control.reset(value[index],{onlySelf:!0,emitEvent:options.emitEvent})}),this._updatePristine(options),this._updateTouched(options),this.updateValueAndValidity(options)}getRawValue(){return this.controls.map(control=>control instanceof FormControl?control.value:control.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(control=>control._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let subtreeUpdated=this.controls.reduce((updated,child)=>!!child._syncPendingControls()||updated,!1);return subtreeUpdated&&this.updateValueAndValidity({onlySelf:!0}),subtreeUpdated}_throwIfControlMissing(index){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(index))throw new Error("Cannot find form control at index "+index)}_forEachChild(cb){this.controls.forEach((control,index)=>{cb(control,index)})}_updateValue(){this.value=this.controls.filter(control=>control.enabled||this.disabled).map(control=>control.value)}_anyControls(condition){return this.controls.some(control=>control.enabled&&condition(control))}_setUpControls(){this._forEachChild(control=>this._registerControl(control))}_checkAllValuesPresent(value){this._forEachChild((control,i)=>{if(void 0===value[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const control of this.controls)if(control.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(control){control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange)}}const formDirectiveProvider={provide:forms_ControlContainer,useExisting:forwardRef(()=>forms_NgForm)},forms_resolvedPromise=(()=>Promise.resolve(null))();let forms_NgForm=(()=>{class NgForm extends forms_ControlContainer{constructor(validators,asyncValidators){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new core_EventEmitter,this.form=new FormGroup({},composeValidators(validators),composeAsyncValidators(asyncValidators))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(dir){forms_resolvedPromise.then(()=>{const container=this._findContainer(dir.path);dir.control=container.registerControl(dir.name,dir.control),setUpControl(dir.control,dir),dir.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(dir)})}getControl(dir){return this.form.get(dir.path)}removeControl(dir){forms_resolvedPromise.then(()=>{const container=this._findContainer(dir.path);container&&container.removeControl(dir.name),function(list,el){const index=list.indexOf(el);index>-1&&list.splice(index,1)}(this._directives,dir)})}addFormGroup(dir){forms_resolvedPromise.then(()=>{const container=this._findContainer(dir.path),group=new FormGroup({});(function(control,dir){null==control&&forms_throwError(dir,"Cannot find control with"),control.validator=forms_Validators.compose([control.validator,dir.validator]),control.asyncValidator=forms_Validators.composeAsync([control.asyncValidator,dir.asyncValidator])})(group,dir),container.registerControl(dir.name,group),group.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(dir){forms_resolvedPromise.then(()=>{const container=this._findContainer(dir.path);container&&container.removeControl(dir.name)})}getFormGroup(dir){return this.form.get(dir.path)}updateModel(dir,value){forms_resolvedPromise.then(()=>{this.form.get(dir.path).setValue(value)})}setValue(value){this.control.setValue(value)}onSubmit($event){return this.submitted=!0,directives=this._directives,this.form._syncPendingControls(),directives.forEach(dir=>{const control=dir.control;"submit"===control.updateOn&&control._pendingChange&&(dir.viewToModelUpdate(control._pendingValue),control._pendingChange=!1)}),this.ngSubmit.emit($event),!1;var directives}onReset(){this.resetForm()}resetForm(value){this.form.reset(value),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(path){return path.pop(),path.length?this.form.get(path):this.form}}return NgForm.fac=function(t){return new(t||NgForm)(directiveInject(NG_VALIDATORS,10),directiveInject(NG_ASYNC_VALIDATORS,10))},NgForm.dir=defineDirective({type:NgForm,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(rf,ctx){1&rf&&listener("submit",(function($event){return ctx.onSubmit($event)}))("reset",(function(){return ctx.onReset()}))},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ProvidersFeature([formDirectiveProvider]),InheritDefinitionFeature]}),NgForm})(),forms_AbstractFormGroupDirective=(()=>{class AbstractFormGroupDirective extends forms_ControlContainer{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return controlPath(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return composeValidators(this._validators)}get asyncValidator(){return composeAsyncValidators(this._asyncValidators)}_checkParentType(){}}return AbstractFormGroupDirective.fac=function(t){return AbstractFormGroupDirective_BaseFactory(t||AbstractFormGroupDirective)},AbstractFormGroupDirective.dir=defineDirective({type:AbstractFormGroupDirective,features:[InheritDefinitionFeature]}),AbstractFormGroupDirective})();const AbstractFormGroupDirective_BaseFactory=getInheritedFactory(forms_AbstractFormGroupDirective);class TemplateDrivenErrors{static modelParentException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup's partner directive "formControlName" instead.  Example:\n\n      ${FormErrorExamples_formControlName}\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  `)}static formGroupNameException(){throw new Error(`\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      ${FormErrorExamples_formGroupName}\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      ${FormErrorExamples_ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')}static modelGroupParentException(){throw new Error(`\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      ${FormErrorExamples_formGroupName}\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      ${FormErrorExamples_ngModelGroup}`)}}const modelGroupProvider={provide:forms_ControlContainer,useExisting:forwardRef(()=>forms_NgModelGroup)};let forms_NgModelGroup=(()=>{class NgModelGroup extends forms_AbstractFormGroupDirective{constructor(parent,validators,asyncValidators){super(),this._parent=parent,this._validators=validators,this._asyncValidators=asyncValidators}_checkParentType(){this._parent instanceof NgModelGroup||this._parent instanceof forms_NgForm||TemplateDrivenErrors.modelGroupParentException()}}return NgModelGroup.fac=function(t){return new(t||NgModelGroup)(directiveInject(forms_ControlContainer,5),directiveInject(NG_VALIDATORS,10),directiveInject(NG_ASYNC_VALIDATORS,10))},NgModelGroup.dir=defineDirective({type:NgModelGroup,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[ProvidersFeature([modelGroupProvider]),InheritDefinitionFeature]}),NgModelGroup})();const formControlBinding={provide:NgControl,useExisting:forwardRef(()=>forms_NgModel)},resolvedPromise$1=(()=>Promise.resolve(null))();let forms_NgModel=(()=>{class NgModel extends NgControl{constructor(parent,validators,asyncValidators,valueAccessors){super(),this.control=new FormControl,this._registered=!1,this.update=new core_EventEmitter,this._parent=parent,this._rawValidators=validators||[],this._rawAsyncValidators=asyncValidators||[],this.valueAccessor=selectValueAccessor(this,valueAccessors)}ngOnChanges(changes){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in changes&&this._updateDisabled(changes),isPropertyUpdated(changes,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?controlPath(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return composeValidators(this._rawValidators)}get asyncValidator(){return composeAsyncValidators(this._rawAsyncValidators)}viewToModelUpdate(newValue){this.viewModel=newValue,this.update.emit(newValue)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){setUpControl(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof forms_NgModelGroup)&&this._parent instanceof forms_AbstractFormGroupDirective?TemplateDrivenErrors.formGroupNameException():this._parent instanceof forms_NgModelGroup||this._parent instanceof forms_NgForm||TemplateDrivenErrors.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||TemplateDrivenErrors.missingNameException()}_updateValue(value){resolvedPromise$1.then(()=>{this.control.setValue(value,{emitViewToModelChange:!1})})}_updateDisabled(changes){const disabledValue=changes.isDisabled.currentValue,isDisabled=""===disabledValue||disabledValue&&"false"!==disabledValue;resolvedPromise$1.then(()=>{isDisabled&&!this.control.disabled?this.control.disable():!isDisabled&&this.control.disabled&&this.control.enable()})}}return NgModel.fac=function(t){return new(t||NgModel)(directiveInject(forms_ControlContainer,9),directiveInject(NG_VALIDATORS,10),directiveInject(NG_ASYNC_VALIDATORS,10),directiveInject(NG_VALUE_ACCESSOR,10))},NgModel.dir=defineDirective({type:NgModel,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ProvidersFeature([formControlBinding]),InheritDefinitionFeature,NgOnChangesFeature]}),NgModel})(),forms_NgNoValidate=(()=>{class NgNoValidate{}return NgNoValidate.fac=function(t){return new(t||NgNoValidate)},NgNoValidate.dir=defineDirective({type:NgNoValidate,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),NgNoValidate})();const NG_MODEL_WITH_FORM_CONTROL_WARNING=new InjectionToken("NgModelWithFormControlWarning"),formControlBinding$1={provide:NgControl,useExisting:forwardRef(()=>forms_FormControlDirective)};let forms_FormControlDirective=(()=>{class FormControlDirective extends NgControl{constructor(validators,asyncValidators,valueAccessors,_ngModelWarningConfig){super(),this._ngModelWarningConfig=_ngModelWarningConfig,this.update=new core_EventEmitter,this._ngModelWarningSent=!1,this._rawValidators=validators||[],this._rawAsyncValidators=asyncValidators||[],this.valueAccessor=selectValueAccessor(this,valueAccessors)}set isDisabled(isDisabled){ReactiveErrors.disabledAttrWarning()}ngOnChanges(changes){var type,warningConfig;this._isControlChanged(changes)&&(setUpControl(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),isPropertyUpdated(changes,this.viewModel)&&("formControl",type=FormControlDirective,this,warningConfig=this._ngModelWarningConfig,isDevMode()&&"never"!==warningConfig&&((null!==warningConfig&&"once"!==warningConfig||type._ngModelWarningSentOnce)&&("always"!==warningConfig||this._ngModelWarningSent)||(ReactiveErrors.ngModelWarning("formControl"),type._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.form.setValue(this.model),this.viewModel=this.model)}get path(){return[]}get validator(){return composeValidators(this._rawValidators)}get asyncValidator(){return composeAsyncValidators(this._rawAsyncValidators)}get control(){return this.form}viewToModelUpdate(newValue){this.viewModel=newValue,this.update.emit(newValue)}_isControlChanged(changes){return changes.hasOwnProperty("form")}}return FormControlDirective.fac=function(t){return new(t||FormControlDirective)(directiveInject(NG_VALIDATORS,10),directiveInject(NG_ASYNC_VALIDATORS,10),directiveInject(NG_VALUE_ACCESSOR,10),directiveInject(NG_MODEL_WITH_FORM_CONTROL_WARNING,8))},FormControlDirective.dir=defineDirective({type:FormControlDirective,selectors:[["","formControl",""]],inputs:{isDisabled:["disabled","isDisabled"],form:["formControl","form"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[ProvidersFeature([formControlBinding$1]),InheritDefinitionFeature,NgOnChangesFeature]}),FormControlDirective._ngModelWarningSentOnce=!1,FormControlDirective})(),forms_InternalFormsSharedModule=(()=>{class InternalFormsSharedModule{}return InternalFormsSharedModule.mod=defineNgModule({type:InternalFormsSharedModule}),InternalFormsSharedModule.inj=defineInjector({factory:function(t){return new(t||InternalFormsSharedModule)}}),InternalFormsSharedModule})(),forms_FormBuilder=(()=>{class FormBuilder{group(controlsConfig,options=null){const controls=this._reduceControls(controlsConfig);let validators=null,asyncValidators=null,updateOn=void 0;return null!=options&&(function(options){return void 0!==options.asyncValidators||void 0!==options.validators||void 0!==options.updateOn}(options)?(validators=null!=options.validators?options.validators:null,asyncValidators=null!=options.asyncValidators?options.asyncValidators:null,updateOn=null!=options.updateOn?options.updateOn:void 0):(validators=null!=options.validator?options.validator:null,asyncValidators=null!=options.asyncValidator?options.asyncValidator:null)),new FormGroup(controls,{asyncValidators:asyncValidators,updateOn:updateOn,validators:validators})}control(formState,validatorOrOpts,asyncValidator){return new FormControl(formState,validatorOrOpts,asyncValidator)}array(controlsConfig,validatorOrOpts,asyncValidator){const controls=controlsConfig.map(c=>this._createControl(c));return new FormArray(controls,validatorOrOpts,asyncValidator)}_reduceControls(controlsConfig){const controls={};return Object.keys(controlsConfig).forEach(controlName=>{controls[controlName]=this._createControl(controlsConfig[controlName])}),controls}_createControl(controlConfig){return controlConfig instanceof FormControl||controlConfig instanceof FormGroup||controlConfig instanceof FormArray?controlConfig:Array.isArray(controlConfig)?this.control(controlConfig[0],controlConfig.length>1?controlConfig[1]:null,controlConfig.length>2?controlConfig[2]:null):this.control(controlConfig)}}return FormBuilder.fac=function(t){return new(t||FormBuilder)},FormBuilder.prov=defineInjectable({token:FormBuilder,factory:FormBuilder.fac}),FormBuilder})(),forms_FormsModule=(()=>{class FormsModule{}return FormsModule.mod=defineNgModule({type:FormsModule}),FormsModule.inj=defineInjector({factory:function(t){return new(t||FormsModule)},providers:[forms_RadioControlRegistry],imports:[forms_InternalFormsSharedModule]}),FormsModule})(),forms_ReactiveFormsModule=(()=>{class ReactiveFormsModule{static withConfig(opts){return{ngModule:ReactiveFormsModule,providers:[{provide:NG_MODEL_WITH_FORM_CONTROL_WARNING,useValue:opts.warnOnNgModelWithFormControl}]}}}return ReactiveFormsModule.mod=defineNgModule({type:ReactiveFormsModule}),ReactiveFormsModule.inj=defineInjector({factory:function(t){return new(t||ReactiveFormsModule)},providers:[forms_FormBuilder,forms_RadioControlRegistry],imports:[forms_InternalFormsSharedModule]}),ReactiveFormsModule})(),ng_stack_contenteditable_ContenteditableDirective=(()=>{class ContenteditableDirective{constructor(elementRef,renderer){this.elementRef=elementRef,this.renderer=renderer,this.propValueAccessor="textContent",this.contenteditable=!0}callOnChange(){"function"==typeof this.onChange&&this.onChange(this.elementRef.nativeElement[this.propValueAccessor])}callOnTouched(){"function"==typeof this.onTouched&&this.onTouched()}writeValue(value){this.renderer.setProperty(this.elementRef.nativeElement,this.propValueAccessor,null==value?"":value)}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){isDisabled?(this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","true"),this.removeDisabledState=this.renderer.listen(this.elementRef.nativeElement,"keydown",this.listenerDisabledState)):this.removeDisabledState&&(this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled"),this.removeDisabledState())}listenerDisabledState(e){e.preventDefault()}}return ContenteditableDirective.fac=function(t){return new(t||ContenteditableDirective)(directiveInject(ElementRef),directiveInject(Renderer2))},ContenteditableDirective.dir=defineDirective({type:ContenteditableDirective,selectors:[["","contenteditable",""]],hostVars:1,hostBindings:function(rf,ctx){1&rf&&listener("input",(function(){return ctx.callOnChange()}))("blur",(function(){return ctx.callOnTouched()})),2&rf&&attribute("contenteditable",ctx.contenteditable)},inputs:{propValueAccessor:"propValueAccessor",contenteditable:"contenteditable"},features:[ProvidersFeature([{provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>ContenteditableDirective),multi:!0}])]}),ContenteditableDirective})(),ng_stack_contenteditable_ContenteditableModule=(()=>{class ContenteditableModule{}return ContenteditableModule.mod=defineNgModule({type:ContenteditableModule}),ContenteditableModule.inj=defineInjector({factory:function(t){return new(t||ContenteditableModule)}}),ContenteditableModule})();class ZipOperator{constructor(resultSelector){this.resultSelector=resultSelector}call(subscriber,source){return source.subscribe(new zip_ZipSubscriber(subscriber,this.resultSelector))}}class zip_ZipSubscriber extends Subscriber_Subscriber{constructor(destination,resultSelector,values=Object.create(null)){super(destination),this.iterators=[],this.active=0,this.resultSelector="function"==typeof resultSelector?resultSelector:null,this.values=values}_next(value){const iterators=this.iterators;isArray(value)?iterators.push(new zip_StaticArrayIterator(value)):iterators.push("function"==typeof value[iterator_iterator]?new StaticIterator(value[iterator_iterator]()):new zip_ZipBufferIterator(this.destination,this,value))}_complete(){const iterators=this.iterators,len=iterators.length;if(this.unsubscribe(),0!==len){this.active=len;for(let i=0;i<len;i++){let iterator=iterators[i];iterator.stillUnsubscribed?this.destination.add(iterator.subscribe(iterator,i)):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const iterators=this.iterators,len=iterators.length,destination=this.destination;for(let i=0;i<len;i++){let iterator=iterators[i];if("function"==typeof iterator.hasValue&&!iterator.hasValue())return}let shouldComplete=!1;const args=[];for(let i=0;i<len;i++){let iterator=iterators[i],result=iterator.next();if(iterator.hasCompleted()&&(shouldComplete=!0),result.done)return void destination.complete();args.push(result.value)}this.resultSelector?this._tryresultSelector(args):destination.next(args),shouldComplete&&destination.complete()}_tryresultSelector(args){let result;try{result=this.resultSelector.apply(this,args)}catch(err){return void this.destination.error(err)}this.destination.next(result)}}class StaticIterator{constructor(iterator){this.iterator=iterator,this.nextResult=iterator.next()}hasValue(){return!0}next(){const result=this.nextResult;return this.nextResult=this.iterator.next(),result}hasCompleted(){const nextResult=this.nextResult;return nextResult&&nextResult.done}}class zip_StaticArrayIterator{constructor(array){this.array=array,this.index=0,this.length=0,this.length=array.length}[iterator_iterator](){return this}next(value){const i=this.index++;return i<this.length?{value:this.array[i],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class zip_ZipBufferIterator extends OuterSubscriber_OuterSubscriber{constructor(destination,parent,observable){super(destination),this.parent=parent,this.observable=observable,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[iterator_iterator](){return this}next(){const buffer=this.buffer;return 0===buffer.length&&this.isComplete?{value:null,done:!0}:{value:buffer.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.buffer.push(innerValue),this.parent.checkIterators()}subscribe(value,index){return subscribeToResult(this,this.observable,this,index)}}function interval_interval(period=0,scheduler=async_async){return(!isNumeric(period)||period<0)&&(period=0),scheduler&&"function"==typeof scheduler.schedule||(scheduler=async_async),new Observable_Observable(subscriber=>(subscriber.add(scheduler.schedule(interval_dispatch,period,{subscriber:subscriber,counter:0,period:period})),subscriber))}function interval_dispatch(state){const{subscriber:subscriber,counter:counter,period:period}=state;subscriber.next(counter),this.schedule({subscriber:subscriber,counter:counter+1,period:period},period)}class DistinctUntilChangedOperator{constructor(compare,keySelector){this.compare=compare,this.keySelector=keySelector}call(subscriber,source){return source.subscribe(new distinctUntilChanged_DistinctUntilChangedSubscriber(subscriber,this.compare,this.keySelector))}}class distinctUntilChanged_DistinctUntilChangedSubscriber extends Subscriber_Subscriber{constructor(destination,compare,keySelector){super(destination),this.keySelector=keySelector,this.hasKey=!1,"function"==typeof compare&&(this.compare=compare)}compare(x,y){return x===y}_next(value){let key;try{const{keySelector:keySelector}=this;key=keySelector?keySelector(value):value}catch(err){return this.destination.error(err)}let result=!1;if(this.hasKey)try{const{compare:compare}=this;result=compare(this.key,key)}catch(err){return this.destination.error(err)}else this.hasKey=!0;result||(this.key=key,this.destination.next(value))}}const defaultThrottleConfig={leading:!0,trailing:!1};class ThrottleTimeOperator{constructor(duration,scheduler,leading,trailing){this.duration=duration,this.scheduler=scheduler,this.leading=leading,this.trailing=trailing}call(subscriber,source){return source.subscribe(new throttleTime_ThrottleTimeSubscriber(subscriber,this.duration,this.scheduler,this.leading,this.trailing))}}class throttleTime_ThrottleTimeSubscriber extends Subscriber_Subscriber{constructor(destination,duration,scheduler,leading,trailing){super(destination),this.duration=duration,this.scheduler=scheduler,this.leading=leading,this.trailing=trailing,this._hasTrailingValue=!1,this._trailingValue=null}_next(value){this.throttled?this.trailing&&(this._trailingValue=value,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(value):this.trailing&&(this._trailingValue=value,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const throttled=this.throttled;throttled&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),throttled.unsubscribe(),this.remove(throttled),this.throttled=null)}}function dispatchNext(arg){const{subscriber:subscriber}=arg;subscriber.clearThrottle()}function switchMapTo(innerObservable,resultSelector){return resultSelector?switchMap(()=>innerObservable,resultSelector):switchMap(()=>innerObservable)}let Notification_Notification=(()=>{class Notification{constructor(kind,value,error){this.kind=kind,this.value=value,this.error=error,this.hasValue="N"===kind}observe(observer){switch(this.kind){case"N":return observer.next&&observer.next(this.value);case"E":return observer.error&&observer.error(this.error);case"C":return observer.complete&&observer.complete()}}do(next,error,complete){switch(this.kind){case"N":return next&&next(this.value);case"E":return error&&error(this.error);case"C":return complete&&complete()}}accept(nextOrObserver,error,complete){return nextOrObserver&&"function"==typeof nextOrObserver.next?this.observe(nextOrObserver):this.do(nextOrObserver,error,complete)}toObservable(){switch(this.kind){case"N":return of(this.value);case"E":return error=this.error,new Observable_Observable(subscriber=>subscriber.error(error));case"C":return empty_empty()}var error;throw new Error("unexpected notification kind value")}static createNext(value){return void 0!==value?new Notification("N",value):Notification.undefinedValueNotification}static createError(err){return new Notification("E",void 0,err)}static createComplete(){return Notification.completeNotification}}return Notification.completeNotification=new Notification("C"),Notification.undefinedValueNotification=new Notification("N",void 0),Notification})();function delay_delay(delay,scheduler=async_async){var value;const delayFor=(value=delay)instanceof Date&&!isNaN(+value)?+delay-scheduler.now():Math.abs(delay);return source=>source.lift(new DelayOperator(delayFor,scheduler))}class DelayOperator{constructor(delay,scheduler){this.delay=delay,this.scheduler=scheduler}call(subscriber,source){return source.subscribe(new delay_DelaySubscriber(subscriber,this.delay,this.scheduler))}}class delay_DelaySubscriber extends Subscriber_Subscriber{constructor(destination,delay,scheduler){super(destination),this.delay=delay,this.scheduler=scheduler,this.queue=[],this.active=!1,this.errored=!1}static dispatch(state){const source=state.source,queue=source.queue,scheduler=state.scheduler,destination=state.destination;for(;queue.length>0&&queue[0].time-scheduler.now()<=0;)queue.shift().notification.observe(destination);if(queue.length>0){const delay=Math.max(0,queue[0].time-scheduler.now());this.schedule(state,delay)}else this.unsubscribe(),source.active=!1}_schedule(scheduler){this.active=!0,this.destination.add(scheduler.schedule(delay_DelaySubscriber.dispatch,this.delay,{source:this,destination:this.destination,scheduler:scheduler}))}scheduleNotification(notification){if(!0===this.errored)return;const scheduler=this.scheduler,message=new DelayMessage(scheduler.now()+this.delay,notification);this.queue.push(message),!1===this.active&&this._schedule(scheduler)}_next(value){this.scheduleNotification(Notification_Notification.createNext(value))}_error(err){this.errored=!0,this.queue=[],this.destination.error(err),this.unsubscribe()}_complete(){this.scheduleNotification(Notification_Notification.createComplete()),this.unsubscribe()}}class DelayMessage{constructor(time,notification){this.time=time,this.notification=notification}}class DebounceTimeOperator{constructor(dueTime,scheduler){this.dueTime=dueTime,this.scheduler=scheduler}call(subscriber,source){return source.subscribe(new debounceTime_DebounceTimeSubscriber(subscriber,this.dueTime,this.scheduler))}}class debounceTime_DebounceTimeSubscriber extends Subscriber_Subscriber{constructor(destination,dueTime,scheduler){super(destination),this.dueTime=dueTime,this.scheduler=scheduler,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(value){this.clearDebounce(),this.lastValue=value,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(debounceTime_dispatchNext,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:lastValue}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(lastValue)}}clearDebounce(){const debouncedSubscription=this.debouncedSubscription;null!==debouncedSubscription&&(this.remove(debouncedSubscription),debouncedSubscription.unsubscribe(),this.debouncedSubscription=null)}}function debounceTime_dispatchNext(subscriber){subscriber.debouncedNext()}class BufferCountOperator{constructor(bufferSize,startBufferEvery){this.bufferSize=bufferSize,this.startBufferEvery=startBufferEvery,this.subscriberClass=startBufferEvery&&bufferSize!==startBufferEvery?bufferCount_BufferSkipCountSubscriber:bufferCount_BufferCountSubscriber}call(subscriber,source){return source.subscribe(new this.subscriberClass(subscriber,this.bufferSize,this.startBufferEvery))}}class bufferCount_BufferCountSubscriber extends Subscriber_Subscriber{constructor(destination,bufferSize){super(destination),this.bufferSize=bufferSize,this.buffer=[]}_next(value){const buffer=this.buffer;buffer.push(value),buffer.length==this.bufferSize&&(this.destination.next(buffer),this.buffer=[])}_complete(){const buffer=this.buffer;buffer.length>0&&this.destination.next(buffer),super._complete()}}class bufferCount_BufferSkipCountSubscriber extends Subscriber_Subscriber{constructor(destination,bufferSize,startBufferEvery){super(destination),this.bufferSize=bufferSize,this.startBufferEvery=startBufferEvery,this.buffers=[],this.count=0}_next(value){const{bufferSize:bufferSize,startBufferEvery:startBufferEvery,buffers:buffers,count:count}=this;this.count++,count%startBufferEvery==0&&buffers.push([]);for(let i=buffers.length;i--;){const buffer=buffers[i];buffer.push(value),buffer.length===bufferSize&&(buffers.splice(i,1),this.destination.next(buffer))}}_complete(){const{buffers:buffers,destination:destination}=this;for(;buffers.length>0;){let buffer=buffers.shift();buffer.length>0&&destination.next(buffer)}super._complete()}}const utils_isPresent=value=>null!=value,isBlank=value=>null==value,isCompositeFilterDescriptor=source=>utils_isPresent(source.filters),ifElse=(predicate,right,left)=>value=>predicate(value)?right(value):left(value),compose=(...args)=>data=>args.reduceRight((acc,curr)=>curr(acc),data),getterCache={},FIELD_REGEX=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g;getterCache[void 0]=obj=>obj;const getter=(field,safe)=>{const key=field+safe;if(getterCache[key])return getterCache[key];const fields=[];return field.replace(FIELD_REGEX,(_,index,indexAccessor,field)=>{fields.push(utils_isPresent(index)?index:indexAccessor||field)}),getterCache[key]=obj=>{let result=obj;for(let idx=0;idx<fields.length;idx++)if(result=result[fields[idx]],!utils_isPresent(result)&&safe)return result;return result},getterCache[key]},pairwise=key=>value=>[key,value],operators_empty=()=>null,has=accessor=>value=>utils_isPresent(accessor(value)),isNotEmpty=accessor=>value=>(value=>utils_isPresent(value)&&(value=>Array.isArray(value))(value)&&value.length>0)(accessor(value)),runOrEmpty=(predicate,fn)=>ifElse(predicate,fn,operators_empty),formatDescriptors=(accessor,formatter)=>state=>accessor(state).map(formatter).join("~"),sanitizeDateLiterals=compose(...[['"',""],[":","-"]].map(([left,right])=>s=>s.replace(new RegExp(left,"g"),right))),removeAfterDot=str=>str.slice(0,str.indexOf(".")),directionFormatter=({field:field,dir:dir="asc"})=>`${field}-${dir}`,operators_take=getter("take"),aggregates=getter("aggregates"),operators_skip=getter("skip"),operators_group=getter("group"),operators_sort=getter("sort",!0),formatSort=formatDescriptors(operators_sort,directionFormatter),formatGroup=formatDescriptors(operators_group,directionFormatter),formatAggregates=formatDescriptors(aggregates,({field:field,aggregate:aggregate})=>`${field}-${aggregate}`),formatDateValue=compose(value=>`datetime'${value}'`,removeAfterDot,sanitizeDateLiterals,JSON.stringify,date=>new Date(Date.UTC(date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()))),transformSkip=compose(pairwise("page"),({skip:skip,take:take})=>Math.floor((skip||0)/take)+1),transformTake=compose(pairwise("pageSize"),operators_take),transformGroup=compose(pairwise("group"),formatGroup),transformSort=compose(pairwise("sort"),formatSort),transformAggregates=compose(pairwise("aggregate"),formatAggregates),filterFormatter=(runOrEmpty(has(operators_skip),transformSkip),runOrEmpty(has(operators_take),transformTake),runOrEmpty(isNotEmpty(operators_group),transformGroup),runOrEmpty(has(aggregates),transformAggregates),compose(runOrEmpty(isNotEmpty(operators_sort),transformSort),state=>Object.assign({},state,{sort:(operators_sort(state)||[]).filter(({dir:dir})=>!(value=>isBlank(value)||0===value.trim().length)(dir))})),({field:field,operator:operator,value:value})=>`${field}~${operator}~${value}`),set=(ifElse(x=>{return(value=x.value)&&value.getTime;var value},compose(filterFormatter,({field:field,value:value,ignoreCase:ignoreCase,operator:operator})=>({value:formatDateValue(value),field:field,ignoreCase:ignoreCase,operator:operator})),filterFormatter),(field,target,value)=>(target[field]=value,target)),deserialization_prop=fieldName=>obj=>{const value=obj[fieldName];return utils_isPresent(value)?value:obj[(str=fieldName,str.replace(/(^[A-Z])/g,(_,g1)=>g1.toLowerCase()))];var str},deserialization_convert=(deserialization_prop("Member"),deserialization_prop("AggregateMethodName"),deserialization_prop("Value"),mapper=>values=>Object.keys(values).reduce(mapper.bind(null,values),{})),translateAggregate=deserialization_convert((source,acc,field)=>set(field.toLowerCase(),acc,source[field])),translateAggregates=deserialization_convert((source,acc,field)=>set(field,acc,translateAggregate(source[field]))),valueOrDefault=(value,defaultValue)=>utils_isPresent(value)?value:defaultValue,translateGroup=compose(({field:field,hasSubgroups:hasSubgroups,value:value,aggregates:aggregates,items:items})=>({aggregates:translateAggregates(aggregates),field:field,items:hasSubgroups?items.map(translateGroup):items,value:value}),group=>({aggregates:group.Aggregates||group.aggregates,field:group.Member||group.member||group.field,hasSubgroups:group.HasSubgroups||group.hasSubgroups||!1,items:group.Items||group.items,value:valueOrDefault(group.Key,valueOrDefault(group.key,group.value))})),sort_array_operator_compare=(a,b)=>isBlank(a)?a===b?0:-1:isBlank(b)?1:a.localeCompare?a.localeCompare(b):a>b?1:a<b?-1:0,compareDesc=(a,b)=>sort_array_operator_compare(b,a),descriptorAsFunc=descriptor=>{const prop=getter(descriptor.field,!0);return(a,b)=>("asc"===descriptor.dir?sort_array_operator_compare:compareDesc)(prop(a),prop(b))},sort_array_operator_initial=(_a,_b)=>0,transducers_map=transform=>reduce=>(acc,curr,index)=>reduce(acc,transform(curr,index)),sort_sort=(transducers_map(x=>x),transducers_map(x=>x),(data,start,end,compare)=>{if(end-start<2)return;const mid=start+end>>>1;sort_sort(data,start,mid,compare),sort_sort(data,mid,end,compare),((data,left,middle,right,compare)=>{let leftLength=middle-left,rightLength=right-middle;const temp=[];for(let idx=0;idx<leftLength;idx++)temp.push(data[left+idx]);let cursor1=0,cursor2=middle,dest=left;do{compare(data[cursor2],temp[cursor1])<0?(data[dest++]=data[cursor2++],rightLength--):(data[dest++]=temp[cursor1++],leftLength--)}while(rightLength>0&&leftLength>0);for(;leftLength;)data[dest++]=temp[cursor1++],leftLength--;for(;rightLength;)data[dest++]=data[cursor2++],rightLength--})(data,start,mid,end,compare)}),array_operators_orderBy=(data,descriptors)=>{if(descriptors.some(x=>utils_isPresent(x.dir))){data=data.slice(0);const comparer=(descriptors=>descriptors.filter(x=>utils_isPresent(x.dir)).map(descriptor=>descriptorAsFunc(descriptor)).reduce((acc,curr)=>(a,b)=>acc(a,b)||curr(a,b),sort_array_operator_initial))(descriptors);sort_sort(data,0,data.length,comparer)}return data},util_isWindowAvailable=()=>"undefined"!=typeof window,agentRxs={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)(\.(\d+(\.\d+)?))?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},osRxs={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},desktopBrowserRxs={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i},mobileBrowserRxs={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i},testRx=(agent,rxs,dflt)=>{for(let rx in rxs)if(rxs.hasOwnProperty(rx)&&rxs[rx].test(agent))return rx;return void 0!==dflt?dflt:agent},support_userAgent=util_isWindowAvailable()&&window.navigator?window.navigator.userAgent:null,browser=support_userAgent?(ua=>{let browserInfo=null,match=[];for(let agent in desktopBrowserRxs)if(desktopBrowserRxs.hasOwnProperty(agent)&&(match=ua.match(desktopBrowserRxs[agent]),match)){browserInfo={},browserInfo[agent]=!0,browserInfo[match[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,browserInfo.version=parseInt(document.documentMode||match[2],10);break}return browserInfo})(support_userAgent):null,mobileOS=support_userAgent?(ua=>{let minorVersion,match=[];for(let agent in agentRxs)if(agentRxs.hasOwnProperty(agent)){if(match=ua.match(agentRxs[agent]),!match)continue;if("windows"===agent&&"plugins"in window.navigator)return null;const os={};return os.device=agent,os.browser=testRx(ua,mobileBrowserRxs,"default"),os.name=testRx(agent,osRxs),os[os.name]=!0,os.majorVersion=match[2],os.minorVersion=match[3]?match[3].replace("_","."):".0",minorVersion=os.minorVersion.replace(".","").substr(0,2),os.flatVersion=os.majorVersion+minorVersion+new Array(3-(minorVersion.length<3?minorVersion.length:2)).join("0"),os.cordova=void 0!==typeof window.PhoneGap||void 0!==typeof window.cordova,os.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||os.cordova,os}return null})(support_userAgent):null,touch=util_isWindowAvailable()&&"ontouchstart"in window,msPointers=browser&&!browser.chrome&&window.MSPointerEvent,pointers=browser&&!browser.chrome&&window.PointerEvent,support_touchEnabled=mobileOS&&(touch||msPointers||pointers),field_list_FIELD_REGEX=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,getter_getterCache=function(){return{undefined:obj=>obj}}();function skipWhile(predicate){return source=>source.lift(new SkipWhileOperator(predicate))}class SkipWhileOperator{constructor(predicate){this.predicate=predicate}call(subscriber,source){return source.subscribe(new skipWhile_SkipWhileSubscriber(subscriber,this.predicate))}}class skipWhile_SkipWhileSubscriber extends Subscriber_Subscriber{constructor(destination,predicate){super(destination),this.predicate=predicate,this.skipping=!0,this.index=0}_next(value){const destination=this.destination;this.skipping&&this.tryCallPredicate(value),this.skipping||destination.next(value)}tryCallPredicate(value){try{const result=this.predicate(value,this.index++);this.skipping=Boolean(result)}catch(err){this.destination.error(err)}}}const kendo_angular_dropdowns_ivy_ngcc_dist_fesm2015_c0=["input"],_ivy_ngcc_dist_fesm2015_c1=["content"],dist_fesm2015_c2=["list"];function ListComponent_div_0_1_ng_template_0_Template(rf,ctx){}const _ivy_ngcc_dist_fesm2015_c3=function(a0,a1){return{templateRef:a0,$implicit:a1}};function ListComponent_div_0_1_Template(rf,ctx){if(1&rf&&template(0,ListComponent_div_0_1_ng_template_0_Template,0,0,"ng-template",9),2&rf){const ctx_r6=nextContext(2);property("templateContext",pureFunction2(1,_ivy_ngcc_dist_fesm2015_c3,ctx_r6.fixedGroupTemplate.templateRef,ctx_r6.currentGroup))}}function ListComponent_div_0_ng_template_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"strong"),text(1),elementEnd()),2&rf){const ctx_r7=nextContext(2);advance(1),textInterpolate(ctx_r7.currentGroup)}}const _ivy_ngcc_dist_fesm2015_c4=function(a0){return{"k-virtual-item":a0}},dist_fesm2015_c5=function(a0,a1,a2){return{"height.px":a0,"minHeight.px":a1,boxSizing:a2}};function ListComponent_div_0_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",7),template(1,ListComponent_div_0_1_Template,1,4,void 0,5),template(2,ListComponent_div_0_ng_template_2_Template,2,1,"ng-template",8),elementEnd()),2&rf){const ctx_r0=nextContext();property("ngClass",pureFunction1(4,_ivy_ngcc_dist_fesm2015_c4,ctx_r0.virtual))("ngStyle",pureFunction3(6,dist_fesm2015_c5,null==ctx_r0.virtual?null:ctx_r0.virtual.itemHeight,null==ctx_r0.virtual?null:ctx_r0.virtual.itemHeight,ctx_r0.virtual?"border-box":"inherit")),advance(1),property("ngIf",ctx_r0.fixedGroupTemplate),advance(1),property("ngIf",!ctx_r0.fixedGroupTemplate)}}function ListComponent_5_ng_template_0_1_ng_template_0_Template(rf,ctx){}function ListComponent_5_ng_template_0_1_Template(rf,ctx){if(1&rf&&template(0,ListComponent_5_ng_template_0_1_ng_template_0_Template,0,0,"ng-template",9),2&rf){const dataItem_r10=nextContext().$implicit,ctx_r12=nextContext(2);property("templateContext",pureFunction2(1,_ivy_ngcc_dist_fesm2015_c3,ctx_r12.template.templateRef,dataItem_r10))}}function ListComponent_5_ng_template_0_ng_template_2_Template(rf,ctx){if(1&rf&&text(0),2&rf){const dataItem_r10=nextContext().$implicit;textInterpolate(nextContext(2).getText(dataItem_r10))}}const dist_fesm2015_c6=function(a0,a1){return{"k-virtual-item":a0,"k-state-disabled":a1}};function ListComponent_5_ng_template_0_Template(rf,ctx){if(1&rf&&(elementStart(0,"li",11),template(1,ListComponent_5_ng_template_0_1_Template,1,4,void 0,5),template(2,ListComponent_5_ng_template_0_ng_template_2_Template,1,1,"ng-template",8),elementEnd()),2&rf){const dataItem_r10=ctx.$implicit,itemIndex_r11=ctx.index,ctx_r9=nextContext(2);property("height",null==ctx_r9.virtual?null:ctx_r9.virtual.itemHeight)("index",itemIndex_r11+ctx_r9.startFrom)("multipleSelection",ctx_r9.multipleSelection)("ngClass",pureFunction2(8,dist_fesm2015_c6,ctx_r9.virtual,ctx_r9.isDisabled(itemIndex_r11))),attribute("id",ctx_r9.optionPrefix+"-"+ctx_r9.getValue(dataItem_r10))("tabIndex",-1),advance(1),property("ngIf",ctx_r9.template),advance(1),property("ngIf",!ctx_r9.template)}}function ListComponent_5_Template(rf,ctx){1&rf&&template(0,ListComponent_5_ng_template_0_Template,3,11,"ng-template",10),2&rf&&property("ngForOf",nextContext().data)}function ListComponent_6_ng_template_0_li_0_1_ng_template_0_Template(rf,ctx){}function ListComponent_6_ng_template_0_li_0_1_Template(rf,ctx){if(1&rf&&template(0,ListComponent_6_ng_template_0_li_0_1_ng_template_0_Template,0,0,"ng-template",9),2&rf){const dataItem_r18=nextContext(2).$implicit,ctx_r22=nextContext(2);property("templateContext",pureFunction2(1,_ivy_ngcc_dist_fesm2015_c3,ctx_r22.groupTemplate.templateRef,dataItem_r18.value))}}function ListComponent_6_ng_template_0_li_0_ng_template_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"strong"),text(1),elementEnd()),2&rf){const dataItem_r18=nextContext(2).$implicit;advance(1),textInterpolate1(" ",dataItem_r18.value,"")}}function ListComponent_6_ng_template_0_li_0_Template(rf,ctx){if(1&rf&&(elementStart(0,"li",14),template(1,ListComponent_6_ng_template_0_li_0_1_Template,1,4,void 0,5),template(2,ListComponent_6_ng_template_0_li_0_ng_template_2_Template,2,1,"ng-template",8),elementEnd()),2&rf){const dataItem_r18=nextContext().$implicit,ctx_r20=nextContext(2);property("ngClass",pureFunction1(7,_ivy_ngcc_dist_fesm2015_c4,ctx_r20.virtual))("ngStyle",pureFunction3(9,dist_fesm2015_c5,null==ctx_r20.virtual?null:ctx_r20.virtual.itemHeight,null==ctx_r20.virtual?null:ctx_r20.virtual.itemHeight,ctx_r20.virtual?"border-box":"inherit")),attribute("group-index",dataItem_r18.index)("id",ctx_r20.optionPrefix+"-"+ctx_r20.getValue(dataItem_r18.value))("tabIndex",-1),advance(1),property("ngIf",ctx_r20.groupTemplate),advance(1),property("ngIf",!ctx_r20.groupTemplate)}}function ListComponent_6_ng_template_0_li_1_1_ng_template_0_Template(rf,ctx){}function ListComponent_6_ng_template_0_li_1_1_Template(rf,ctx){if(1&rf&&template(0,ListComponent_6_ng_template_0_li_1_1_ng_template_0_Template,0,0,"ng-template",9),2&rf){const dataItem_r18=nextContext(2).$implicit,ctx_r28=nextContext(2);property("templateContext",pureFunction2(1,_ivy_ngcc_dist_fesm2015_c3,ctx_r28.template.templateRef,dataItem_r18.value))}}function ListComponent_6_ng_template_0_li_1_ng_template_2_Template(rf,ctx){if(1&rf&&text(0),2&rf){const dataItem_r18=nextContext(2).$implicit;textInterpolate(nextContext(2).getText(dataItem_r18.value))}}function ListComponent_6_ng_template_0_li_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"li",11),template(1,ListComponent_6_ng_template_0_li_1_1_Template,1,4,void 0,5),template(2,ListComponent_6_ng_template_0_li_1_ng_template_2_Template,1,1,"ng-template",8),elementEnd()),2&rf){const dataItem_r18=nextContext().$implicit,ctx_r21=nextContext(2);property("height",null==ctx_r21.virtual?null:ctx_r21.virtual.itemHeight)("index",dataItem_r18.offsetIndex)("multipleSelection",ctx_r21.multipleSelection)("ngClass",pureFunction2(9,dist_fesm2015_c6,ctx_r21.virtual,ctx_r21.isDisabled(dataItem_r18.offsetIndex))),attribute("absolute-index",dataItem_r18.index)("id",ctx_r21.optionPrefix+"-"+ctx_r21.getValue(dataItem_r18.value))("tabIndex",-1),advance(1),property("ngIf",ctx_r21.template),advance(1),property("ngIf",!ctx_r21.template)}}function ListComponent_6_ng_template_0_Template(rf,ctx){if(1&rf&&(template(0,ListComponent_6_ng_template_0_li_0_Template,3,13,"li",12),template(1,ListComponent_6_ng_template_0_li_1_Template,3,12,"li",13)),2&rf){const dataItem_r18=ctx.$implicit;property("ngIf",dataItem_r18.header&&dataItem_r18.index>0),advance(1),property("ngIf",!dataItem_r18.header)}}function ListComponent_6_Template(rf,ctx){1&rf&&template(0,ListComponent_6_ng_template_0_Template,2,2,"ng-template",10),2&rf&&property("ngForOf",nextContext().data)}function ListComponent_div_7_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",15),element(1,"div"),elementEnd()),2&rf){const ctx_r5=nextContext();advance(1),styleProp("height",ctx_r5.scrollHeight,"px")}}const dist_fesm2015_c7=function(a0,a1){return{"k-virtual-content":a0,"k-list-scroller":a1}},dist_fesm2015_c8=function(a0){return{"k-virtual-list":a0}},dist_fesm2015_c9=["container"],fesm2015_c10=["popupTemplate"],fesm2015_c11=["optionsList"],fesm2015_c16=["noDataText",$localize`:kendo.autocomplete.noDataText|The text displayed in the popup when there are no items4e9993e088a293543eb0c2801343518c115b6f202690656529626907484:NO DATA FOUND`,"clearTitle",$localize`:kendo.autocomplete.clearTitle|The title of the clear button7cf49cc2d50eebd29f8d61564512383caaaac7a64821453594854847070:clear`];function AutoCompleteComponent_span_4_Template(rf,ctx){if(1&rf){const _r8=getCurrentView();elementStart(0,"span",8),listener("click",(function($event){return restoreView(_r8),nextContext().clearValue($event)}))("mousedown",(function($event){return restoreView(_r8),$event.preventDefault()})),elementEnd()}2&rf&&attribute("title",nextContext().clearTitle)}function AutoCompleteComponent_span_5_Template(rf,ctx){1&rf&&element(0,"span",9)}function AutoCompleteComponent_ng_template_6_0_ng_template_0_Template(rf,ctx){}const fesm2015_c17=function(a0){return{templateRef:a0}};function AutoCompleteComponent_ng_template_6_0_Template(rf,ctx){if(1&rf&&template(0,AutoCompleteComponent_ng_template_6_0_ng_template_0_Template,0,0,"ng-template",14),2&rf){const ctx_r10=nextContext(2);property("templateContext",pureFunction1(1,fesm2015_c17,ctx_r10.headerTemplate.templateRef))}}function AutoCompleteComponent_ng_template_6_div_3_ng_template_1_Template(rf,ctx){}function AutoCompleteComponent_ng_template_6_div_3_ng_template_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"div"),text(1),elementEnd()),2&rf){const ctx_r16=nextContext(3);advance(1),textInterpolate(ctx_r16.noDataText)}}function AutoCompleteComponent_ng_template_6_div_3_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",15),template(1,AutoCompleteComponent_ng_template_6_div_3_ng_template_1_Template,0,0,"ng-template",16),template(2,AutoCompleteComponent_ng_template_6_div_3_ng_template_2_Template,2,1,"ng-template",6),elementEnd()),2&rf){const ctx_r12=nextContext(2);advance(1),property("ngIf",ctx_r12.noDataTemplate)("templateContext",pureFunction1(3,fesm2015_c17,null==ctx_r12.noDataTemplate?null:ctx_r12.noDataTemplate.templateRef)),advance(1),property("ngIf",!ctx_r12.noDataTemplate)}}function AutoCompleteComponent_ng_template_6_4_ng_template_0_Template(rf,ctx){}function AutoCompleteComponent_ng_template_6_4_Template(rf,ctx){if(1&rf&&template(0,AutoCompleteComponent_ng_template_6_4_ng_template_0_Template,0,0,"ng-template",14),2&rf){const ctx_r13=nextContext(2);property("templateContext",pureFunction1(1,fesm2015_c17,ctx_r13.footerTemplate.templateRef))}}function AutoCompleteComponent_ng_template_6_Template(rf,ctx){if(1&rf){const _r19=getCurrentView();template(0,AutoCompleteComponent_ng_template_6_0_Template,1,3,void 0,10),elementStart(1,"kendo-list",11,12),listener("pageChange",(function($event){return restoreView(_r19),nextContext().pageChange($event)})),elementEnd(),template(3,AutoCompleteComponent_ng_template_6_div_3_Template,3,5,"div",13),template(4,AutoCompleteComponent_ng_template_6_4_Template,1,3,void 0,10)}if(2&rf){const ctx_r4=nextContext();property("ngIf",ctx_r4.headerTemplate),advance(1),property("id",ctx_r4.listBoxId)("optionPrefix",ctx_r4.optionPrefix)("data",ctx_r4.data)("textField",ctx_r4.valueField)("valueField",ctx_r4.valueField)("template",ctx_r4.template)("groupTemplate",ctx_r4.groupTemplate)("fixedGroupTemplate",ctx_r4.fixedGroupTemplate)("height",ctx_r4.listHeight)("show",ctx_r4.isOpen)("virtual",ctx_r4.virtual),advance(2),property("ngIf",0===ctx_r4.data.length),advance(1),property("ngIf",ctx_r4.footerTemplate)}}function AutoCompleteComponent_ng_template_8_Template(rf,ctx){if(1&rf){const _r21=getCurrentView();elementStart(0,"kendo-resize-sensor",17),listener("resize",(function(){return restoreView(_r21),nextContext().onResize()})),elementEnd()}}$localize`:kendo.combobox.noDataText|The text displayed in the popup when there are no items2b6e00c74a6d9c98c03a6274d0224e9bd457ff897708502966028483300:NO DATA FOUND`,$localize`:kendo.combobox.clearTitle|The title of the clear button069e8fae80677e3e785861123bef446b3ff41ab42025597431468961462:clear`;const _c24=["wrapper"],_c27=["noDataText",$localize`:kendo.dropdownlist.noDataText|The text displayed in the popup when there are no items4fc2f70c9c8cf7b18affd6b938105996d6ac33068289552890585138350:NO DATA FOUND`];function DropDownListComponent_5_ng_template_0_Template(rf,ctx){}function DropDownListComponent_5_Template(rf,ctx){if(1&rf&&template(0,DropDownListComponent_5_ng_template_0_Template,0,0,"ng-template",10),2&rf){const ctx_r1=nextContext();property("templateContext",pureFunction2(1,_ivy_ngcc_dist_fesm2015_c3,ctx_r1.valueTemplate.templateRef,ctx_r1.dataItem))}}function DropDownListComponent_ng_template_6_Template(rf,ctx){1&rf&&text(0),2&rf&&textInterpolate(nextContext().getText())}function DropDownListComponent_ng_template_9_ng_template_0_Template(rf,ctx){if(1&rf){const _r16=getCurrentView();elementStart(0,"span",14),listener("click",(function($event){return restoreView(_r16),$event.stopImmediatePropagation()})),elementStart(1,"input",15),listener("ngModelChange",(function($event){return restoreView(_r16),nextContext(2).filterText=$event}))("keydown",(function($event){return restoreView(_r16),nextContext(2).keydown($event)}))("input",(function($event){return restoreView(_r16),nextContext(2).handleFilter($event)}))("focus",(function(){return restoreView(_r16),nextContext(2).onFilterFocus()}))("blur",(function(){return restoreView(_r16),nextContext(2).blurFilterInput()})),elementEnd(),element(2,"span",16),elementEnd()}if(2&rf){const ctx_r8=nextContext(2);advance(1),property("filterInput",ctx_r8.isFocused&&!ctx_r8.touchEnabled)("dir",ctx_r8.direction)("ngModel",ctx_r8.filterText),attribute("aria-owns",ctx_r8.ariaOwns)("aria-activedescendant",ctx_r8.ariaActivedescendant)("aria-label",ctx_r8.noDataLabel)}}const _c28=function(a0){return{"k-state-disabled":a0}};function DropDownListComponent_ng_template_9_ng_template_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",17),text(1),elementEnd()),2&rf){const ctx_r9=nextContext(2);property("ngClass",pureFunction1(3,_c28,ctx_r9.isDisabledDefaultItem))("index",-1),advance(1),textInterpolate1(" ",ctx_r9.getDefaultItemText()," ")}}function DropDownListComponent_ng_template_9_ng_template_2_ng_template_1_Template(rf,ctx){}function DropDownListComponent_ng_template_9_ng_template_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",17),template(1,DropDownListComponent_ng_template_9_ng_template_2_ng_template_1_Template,0,0,"ng-template",10),elementEnd()),2&rf){const ctx_r10=nextContext(2);property("ngClass",pureFunction1(3,_c28,ctx_r10.isDisabledDefaultItem))("index",-1),advance(1),property("templateContext",pureFunction2(5,_ivy_ngcc_dist_fesm2015_c3,ctx_r10.itemTemplate.templateRef,ctx_r10.defaultItem))}}function DropDownListComponent_ng_template_9_3_ng_template_0_Template(rf,ctx){}function DropDownListComponent_ng_template_9_3_Template(rf,ctx){if(1&rf&&template(0,DropDownListComponent_ng_template_9_3_ng_template_0_Template,0,0,"ng-template",10),2&rf){const ctx_r11=nextContext(2);property("templateContext",pureFunction1(1,fesm2015_c17,ctx_r11.headerTemplate.templateRef))}}function DropDownListComponent_ng_template_9_div_6_ng_template_1_Template(rf,ctx){}function DropDownListComponent_ng_template_9_div_6_ng_template_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"div"),text(1),elementEnd()),2&rf){const ctx_r25=nextContext(3);advance(1),textInterpolate(ctx_r25.noDataText)}}function DropDownListComponent_ng_template_9_div_6_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",18),template(1,DropDownListComponent_ng_template_9_div_6_ng_template_1_Template,0,0,"ng-template",19),template(2,DropDownListComponent_ng_template_9_div_6_ng_template_2_Template,2,1,"ng-template",5),elementEnd()),2&rf){const ctx_r13=nextContext(2);advance(1),property("ngIf",ctx_r13.noDataTemplate)("templateContext",pureFunction1(3,fesm2015_c17,ctx_r13.noDataTemplate?ctx_r13.noDataTemplate.templateRef:void 0)),advance(1),property("ngIf",!ctx_r13.noDataTemplate)}}function DropDownListComponent_ng_template_9_7_ng_template_0_Template(rf,ctx){}function DropDownListComponent_ng_template_9_7_Template(rf,ctx){if(1&rf&&template(0,DropDownListComponent_ng_template_9_7_ng_template_0_Template,0,0,"ng-template",10),2&rf){const ctx_r14=nextContext(2);property("templateContext",pureFunction1(1,fesm2015_c17,ctx_r14.footerTemplate.templateRef))}}function DropDownListComponent_ng_template_9_Template(rf,ctx){if(1&rf){const _r28=getCurrentView();template(0,DropDownListComponent_ng_template_9_ng_template_0_Template,3,6,"ng-template",5),template(1,DropDownListComponent_ng_template_9_ng_template_1_Template,2,5,"ng-template",5),template(2,DropDownListComponent_ng_template_9_ng_template_2_Template,2,8,"ng-template",5),template(3,DropDownListComponent_ng_template_9_3_Template,1,3,void 0,4),elementStart(4,"kendo-list",11,12),listener("pageChange",(function($event){return restoreView(_r28),nextContext().pageChange($event)})),elementEnd(),template(6,DropDownListComponent_ng_template_9_div_6_Template,3,5,"div",13),template(7,DropDownListComponent_ng_template_9_7_Template,1,3,void 0,4)}if(2&rf){const ctx_r4=nextContext();property("ngIf",ctx_r4.filterable),advance(1),property("ngIf",ctx_r4.defaultItem&&!ctx_r4.itemTemplate),advance(1),property("ngIf",ctx_r4.defaultItem&&ctx_r4.itemTemplate),advance(1),property("ngIf",ctx_r4.headerTemplate),advance(1),property("id",ctx_r4.listBoxId)("optionPrefix",ctx_r4.optionPrefix)("data",ctx_r4.data)("textField",ctx_r4.textField)("valueField",ctx_r4.valueField)("template",ctx_r4.itemTemplate)("groupTemplate",ctx_r4.groupTemplate)("fixedGroupTemplate",ctx_r4.fixedGroupTemplate)("height",ctx_r4.listHeight)("show",ctx_r4.isOpen)("virtual",ctx_r4.virtual),advance(2),property("ngIf",0===ctx_r4.data.length),advance(1),property("ngIf",ctx_r4.footerTemplate)}}function DropDownListComponent_ng_template_11_Template(rf,ctx){if(1&rf){const _r30=getCurrentView();elementStart(0,"kendo-resize-sensor",20),listener("resize",(function(){return restoreView(_r30),nextContext().onResize()})),elementEnd()}}const _c29=function(a1,a2,a3){return{"k-dropdown-wrap":!0,"k-state-default":a1,"k-state-disabled":a2,"k-state-focused":a3}};$localize`:kendo.multiselect.noDataText|The text displayed in the popup when there are no items3cc1323f79a5fe012960578e513f8a35b2af1e961450213984397806503:NO DATA FOUND`,$localize`:kendo.combobox.clearTitle|The title of the clear button069e8fae80677e3e785861123bef446b3ff41ab42025597431468961462:clear`;var fesm2015_Keys=function(Keys){return Keys[Keys.backspace=8]="backspace",Keys[Keys.tab=9]="tab",Keys[Keys.enter=13]="enter",Keys[Keys.shift=16]="shift",Keys[Keys.ctrl=17]="ctrl",Keys[Keys.alt=18]="alt",Keys[Keys["pause/break"]=19]="pause/break",Keys[Keys["caps lock"]=20]="caps lock",Keys[Keys.esc=27]="esc",Keys[Keys.space=32]="space",Keys[Keys["page up"]=33]="page up",Keys[Keys["page down"]=34]="page down",Keys[Keys.end=35]="end",Keys[Keys.home=36]="home",Keys[Keys.left=37]="left",Keys[Keys.up=38]="up",Keys[Keys.right=39]="right",Keys[Keys.down=40]="down",Keys[Keys.insert=45]="insert",Keys[Keys.delete=46]="delete",Keys[Keys.command=91]="command",Keys[Keys["left command"]=91]="left command",Keys[Keys["right command"]=93]="right command",Keys[Keys["numpad *"]=106]="numpad *",Keys[Keys["numpad +"]=107]="numpad +",Keys[Keys["numpad -"]=109]="numpad -",Keys[Keys["numpad ."]=110]="numpad .",Keys[Keys["numpad /"]=111]="numpad /",Keys[Keys["num lock"]=144]="num lock",Keys[Keys["scroll lock"]=145]="scroll lock",Keys[Keys["my computer"]=182]="my computer",Keys[Keys["my calculator"]=183]="my calculator",Keys[Keys[";"]=186]=";",Keys[Keys["="]=187]="=",Keys[Keys[","]=188]=",",Keys[Keys["-"]=189]="-",Keys[Keys["."]=190]=".",Keys[Keys["/"]=191]="/",Keys[Keys["`"]=192]="`",Keys[Keys["["]=219]="[",Keys[Keys["\\"]=220]="\\",Keys[Keys["]"]=221]="]",Keys[Keys["'"]=222]="'",Keys}({});const dist_fesm2015_isPresent=value=>null!=value,fesm2015_guid=()=>{let i,random,id="";for(i=0;i<32;i++)random=16*Math.random()|0,8!==i&&12!==i&&16!==i&&20!==i||(id+="-"),id+=(12===i?4:16===i?3&random|8:random).toString(16);return id},fesm2015_isWindowAvailable=()=>"undefined"!=typeof window,fesm2015_getter=(dataItem,field,usePrimitive=!1)=>{if(dist_fesm2015_isPresent(dataItem))return usePrimitive?field&&dist_fesm2015_isPresent(dataItem[field])?dataItem[field]:dataItem:field?dataItem[field]:dataItem},matchText=(text,word,ignoreCase)=>{if(!dist_fesm2015_isPresent(text))return!1;let temp=String(text);return ignoreCase&&(temp=temp.toLowerCase()),0===temp.indexOf(word)};let fesm2015_SearchBarComponent=(()=>{class SearchBarComponent{constructor(localization,renderer){this.localization=localization,this.valueChange=new core_EventEmitter,this.onBlur=new core_EventEmitter,this.onFocus=new core_EventEmitter,this.onClick=new core_EventEmitter,this.onNavigate=new core_EventEmitter,this.searchBarClass=!0,this._userInput="",this._previousValue="",this._placeholder="",this.direction=localization.rtl?"rtl":"ltr",this.renderer=renderer}get userInput(){return this._userInput}set userInput(userInput){this._userInput=userInput||""}get value(){return this.input.nativeElement.value}set placeholder(text){this._placeholder=text||"",this.setInputSize()}get placeholder(){return this._placeholder}ngOnInit(){this.localizationChangeSubscription=this.localization.changes.subscribe(({rtl:rtl})=>this.direction=rtl?"rtl":"ltr")}ngOnChanges(changes){let previousUserInput;if(this.input&&(changes.userInput||changes.suggestedText)){previousUserInput=changes.userInput&&changes.userInput.previousValue?this._previousValue===changes.userInput.previousValue?this._previousValue:changes.userInput.currentValue||"":this._previousValue;const caretIndex=this.input.nativeElement.selectionStart,caretAtEnd=previousUserInput.length===caretIndex;this.writeInputValue(this.suggestedText?(begin=this.userInput).concat((end=this.suggestedText).substr(end.toLowerCase().indexOf(begin.toLowerCase())+begin.length)):this.userInput),this.suggestedText?this.setInputSelection(this.userInput.length,this.suggestedText.length):caretAtEnd?this.setInputSelection(this.userInput.length,this.userInput.length):this.setInputSelection(caretIndex,caretIndex),this._previousValue=this.userInput}var begin,end}ngOnDestroy(){this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe()}writeInputValue(text){isDocumentAvailable()&&this.renderer.setProperty(this.input.nativeElement,"value",text)}setInputSelection(start,end){if(isDocumentAvailable()&&this.input.nativeElement===document.activeElement)try{this.input.nativeElement.setSelectionRange(start,end)}catch(e){}}handleInput(event){const value=event.target.value;value!==this.userInput&&(this._previousValue=value,this.valueChange.emit(value))}handleFocus(event){this.onFocus.emit(event)}handleBlur(event){this.onBlur.emit(event)}handleKeydown(event){[fesm2015_Keys.up,fesm2015_Keys.down,fesm2015_Keys.left,fesm2015_Keys.right,fesm2015_Keys.enter,fesm2015_Keys.esc,fesm2015_Keys.delete,fesm2015_Keys.backspace,fesm2015_Keys.home,fesm2015_Keys.end].indexOf(event.keyCode)>-1&&this.onNavigate.emit(event)}focus(){isDocumentAvailable()&&this.input.nativeElement.focus()}blur(){isDocumentAvailable()&&this.input.nativeElement.blur()}setInputSize(){const lengthOf=x=>x?x.length:0,input=this.input.nativeElement,placeholderLength=lengthOf(this.placeholder),textLength=lengthOf(this.value),size=Math.max(placeholderLength,textLength,1);this.renderer.setAttribute(input,"size",size.toString())}}return SearchBarComponent.fac=function(t){return new(t||SearchBarComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(Renderer2))},SearchBarComponent.cmp=defineComponent({type:SearchBarComponent,selectors:[["kendo-searchbar"]],viewQuery:function(rf,ctx){var _t;1&rf&&staticViewQuery(kendo_angular_dropdowns_ivy_ngcc_dist_fesm2015_c0,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.input=_t.first)},hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-searchbar",ctx.searchBarClass)},inputs:{userInput:"userInput",placeholder:"placeholder",id:"id",listId:"listId",tagListId:"tagListId",activeDescendant:"activeDescendant",noDataLabel:"noDataLabel",disabled:"disabled",readonly:"readonly",tabIndex:"tabIndex",popupOpen:"popupOpen",role:"role",suggestedText:"suggestedText"},outputs:{valueChange:"valueChange",onBlur:"onBlur",onFocus:"onFocus",onClick:"onClick",onNavigate:"onNavigate"},features:[NgOnChangesFeature],decls:2,vars:16,consts:[["autocomplete","off","aria-haspopup","listbox",3,"id","disabled","readonly","placeholder","input","focus","blur","keydown"],["input",""]],template:function(rf,ctx){1&rf&&(elementStart(0,"input",0,1),listener("input",(function($event){return ctx.handleInput($event)}))("focus",(function($event){return ctx.handleFocus($event)}))("blur",(function($event){return ctx.handleBlur($event)}))("keydown",(function($event){return ctx.handleKeydown($event)})),elementEnd()),2&rf&&(classMap("k-input"),property("id",ctx.id)("disabled",ctx.disabled)("readonly",ctx.readonly)("placeholder",ctx.placeholder),attribute("tabIndex",ctx.tabIndex)("dir",ctx.direction)("role",ctx.role)("aria-disabled",ctx.disabled)("aria-readonly",ctx.readonly)("aria-expanded",ctx.popupOpen)("aria-owns",ctx.listId)("aria-describedby",ctx.tagListId)("aria-activedescendant",ctx.activeDescendant)("aria-label",ctx.noDataLabel))},encapsulation:2}),SearchBarComponent})(),fesm2015_ItemTemplateDirective=(()=>{class ItemTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return ItemTemplateDirective.fac=function(t){return new(t||ItemTemplateDirective)(directiveInject(TemplateRef))},ItemTemplateDirective.dir=defineDirective({type:ItemTemplateDirective,selectors:[["","kendoDropDownListItemTemplate",""],["","kendoComboBoxItemTemplate",""],["","kendoAutoCompleteItemTemplate",""],["","kendoMultiSelectItemTemplate",""]]}),ItemTemplateDirective})(),fesm2015_HeaderTemplateDirective=(()=>{class HeaderTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return HeaderTemplateDirective.fac=function(t){return new(t||HeaderTemplateDirective)(directiveInject(TemplateRef))},HeaderTemplateDirective.dir=defineDirective({type:HeaderTemplateDirective,selectors:[["","kendoDropDownListHeaderTemplate",""],["","kendoComboBoxHeaderTemplate",""],["","kendoAutoCompleteHeaderTemplate",""],["","kendoMultiSelectHeaderTemplate",""]]}),HeaderTemplateDirective})(),fesm2015_FooterTemplateDirective=(()=>{class FooterTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return FooterTemplateDirective.fac=function(t){return new(t||FooterTemplateDirective)(directiveInject(TemplateRef))},FooterTemplateDirective.dir=defineDirective({type:FooterTemplateDirective,selectors:[["","kendoDropDownListFooterTemplate",""],["","kendoComboBoxFooterTemplate",""],["","kendoAutoCompleteFooterTemplate",""],["","kendoMultiSelectFooterTemplate",""]]}),FooterTemplateDirective})(),fesm2015_GroupTemplateDirective=(()=>{class GroupTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return GroupTemplateDirective.fac=function(t){return new(t||GroupTemplateDirective)(directiveInject(TemplateRef))},GroupTemplateDirective.dir=defineDirective({type:GroupTemplateDirective,selectors:[["","kendoDropDownListGroupTemplate",""],["","kendoComboBoxGroupTemplate",""],["","kendoAutoCompleteGroupTemplate",""],["","kendoMultiSelectGroupTemplate",""]]}),GroupTemplateDirective})(),fesm2015_FixedGroupTemplateDirective=(()=>{class FixedGroupTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return FixedGroupTemplateDirective.fac=function(t){return new(t||FixedGroupTemplateDirective)(directiveInject(TemplateRef))},FixedGroupTemplateDirective.dir=defineDirective({type:FixedGroupTemplateDirective,selectors:[["","kendoDropDownListFixedGroupTemplate",""],["","kendoComboBoxFixedGroupTemplate",""],["","kendoAutoCompleteFixedGroupTemplate",""],["","kendoMultiSelectFixedGroupTemplate",""]]}),FixedGroupTemplateDirective})(),fesm2015_SelectionService=(()=>{class SelectionService{constructor(){this.onSelect=new core_EventEmitter,this.onChange=new core_EventEmitter,this.onFocus=new core_EventEmitter,this.total=0,this.selectedIndices=[]}getTotal(){return this.total}isSelected(index){return dist_fesm2015_isPresent(this.selectedIndices.find(current=>current===index))}isFocused(index){return index===this.focused}focus(index){this.isFocused(index)||(this.focused=index,this.onFocus.emit(index))}select(index){this.isSelected(index)||(this.selectedIndices=[index],this.focused=index,this.onSelect.emit({indices:[index],newSelection:dist_fesm2015_isPresent(index)}))}add(index){this.isSelected(index)||(this.selectedIndices.push(index),this.focused=index,this.onChange.emit({added:index,indices:this.selectedIndices.slice()}))}unselect(index){if(!this.isSelected(index))return;const position=this.selectedIndices.indexOf(index);this.selectedIndices.splice(position,1),this.focused=index,this.onChange.emit({indices:this.selectedIndices.slice(),removed:index})}change(index){const newSelection=dist_fesm2015_isPresent(index)&&!this.isSelected(index);this.selectedIndices=[index],this.focused=index,this.onChange.emit({indices:[index],newSelection:newSelection})}resetSelection(index){this.selectedIndices=index instanceof Array?index:[index],this.focused=this.selectedIndices[this.selectedIndices.length-1]}get selected(){return this.selectedIndices.slice()}get focused(){return this.focusedIndex}set focused(index){this.focusedIndex!==index&&(this.focusedIndex=index,this.onFocus.emit(index))}}return SelectionService.fac=function(t){return new(t||SelectionService)},SelectionService.prov=defineInjectable({token:SelectionService,factory:SelectionService.fac}),SelectionService})();var fesm2015_NavigationAction=function(NavigationAction){return NavigationAction[NavigationAction.Undefined=0]="Undefined",NavigationAction[NavigationAction.Open=1]="Open",NavigationAction[NavigationAction.Close=2]="Close",NavigationAction[NavigationAction.Enter=3]="Enter",NavigationAction[NavigationAction.Tab=4]="Tab",NavigationAction[NavigationAction.Esc=5]="Esc",NavigationAction[NavigationAction.Delete=6]="Delete",NavigationAction[NavigationAction.Backspace=7]="Backspace",NavigationAction[NavigationAction.Home=8]="Home",NavigationAction[NavigationAction.End=9]="End",NavigationAction[NavigationAction.Up=10]="Up",NavigationAction[NavigationAction.Down=11]="Down",NavigationAction[NavigationAction.Left=12]="Left",NavigationAction[NavigationAction.Right=13]="Right",NavigationAction}({});let fesm2015_DataService=(()=>{class DataService{constructor(){this.grouped=!1,this.groupIndices=[]}set data(data){this._data=data,this.grouped=this.isGrouped(data),this.grouped&&(this.groupIndices=this.getGroupIndices(data),this._flatData=this.flatten(data))}get data(){return this.grouped?this._flatData:this._data}get itemsCount(){return dist_fesm2015_isPresent(this.data)&&0!==this.data.length?(this.grouped?this._flatData.filter(item=>!item.header):this.data).length:0}isGrouped(data){return dist_fesm2015_isPresent(data)&&0!==data.length&&dist_fesm2015_isPresent(data[0])&&(props=["aggregates","field","items","value"],!!dist_fesm2015_isPresent(obj=data[0])&&props.every(prop=>obj.hasOwnProperty(prop)));var obj,props}getGroupIndices(data){let groupIndices=[];for(let i=0;i<=data.length-1;i++)groupIndices[i]=(groupIndices[i-1]||0)+data[i].items.length;return groupIndices}filter(predicate){let result=[];if(this.isGrouped(this.data))for(let i=0;i<=this.groupIndices.length-1;i++){const matches=this.data[i].items.filter(predicate);matches&&(result=result.concat(matches))}else result=this.data.filter(predicate);return result}indexOf(item,startFrom=0){let predicate=element=>element===item;return this.grouped&&(predicate=element=>element.value===item),this.findIndex(predicate,startFrom)}findIndex(predicate,startFrom=0){let index=-1;if(this.grouped){const data=this._flatData.filter(item=>!item.header&&item.offsetIndex>=startFrom);index=data.findIndex(predicate),index=data[index]?data[index].offsetIndex:-1}else{const itemIndex=this.data.slice(startFrom).findIndex(predicate);index=-1!==itemIndex?itemIndex+startFrom:-1}return index}closestGroup(index){for(let i=index;i>=0;i--)if(this._flatData[i].header)return this._flatData[i]}find(predicate){const index=this.findIndex(predicate);return this.itemAt(index)}flatIndex(index){if(0===this.itemsCount)return-1;if(!this.grouped)return index;{const match=this._flatData.find(item=>!item.header&&item.offsetIndex===index);if(match)return match.index}return-1}itemAt(index){let dataItem;if(0===this.itemsCount)return dataItem;if(this.grouped){const match=this._flatData.find(item=>!item.header&&item.offsetIndex===index);match&&(dataItem=match.value)}else dataItem=this.data[index];return dataItem}groupAt(index){if(0!==this.itemsCount&&this.isGrouped)return this._flatData.find(item=>item.header&&item.index===index)}groupField(){if(0!==this.itemsCount&&this.isGrouped)return this._data[0].field}itemGroup(item){if(!item||0===this.itemsCount||!this.isGrouped)return;const fieldName=this.groupField();return fieldName?item[fieldName]:void 0}flatten(data,group,offset=0,groupIndex=0){let flat=[];dist_fesm2015_isPresent(group)&&flat.push({header:!0,index:groupIndex+offset,offsetIndex:groupIndex,value:group});for(let i=0;i<data.length;i++){let result=[];data[i].items?(result=this.flatten(data[i].items,data[i].value,offset,i),offset+=data[i].items.length):result.push({header:!1,index:groupIndex+offset+i+1,offsetIndex:offset+i,value:data[i]}),flat=flat.concat(result)}return flat}}return DataService.fac=function(t){return new(t||DataService)},DataService.prov=defineInjectable({token:DataService,factory:DataService.fac}),DataService})(),fesm2015_DisabledItemsService=(()=>{class DisabledItemsService{constructor(dataService){this.dataService=dataService,this.itemDisabled=null}isIndexDisabled(index){if(this.itemDisabled){const item=this.dataService.itemAt(index);if(dist_fesm2015_isPresent(item))return this.itemDisabled({dataItem:item,index:index});if(dist_fesm2015_isPresent(this.defaultItem))return this.itemDisabled({dataItem:this.defaultItem,index:-1})}}isItemDisabled(item){if(this.itemDisabled){const index=this.dataService.indexOf(item);if(-1!==index)return this.itemDisabled({dataItem:item,index:index});if(dist_fesm2015_isPresent(this.defaultItem))return this.itemDisabled({dataItem:this.defaultItem,index:-1})}}}return DisabledItemsService.fac=function(t){return new(t||DisabledItemsService)(inject(fesm2015_DataService))},DisabledItemsService.prov=defineInjectable({token:DisabledItemsService,factory:DisabledItemsService.fac}),DisabledItemsService})();class NavigationEvent{constructor(index,originalEvent){this.index=index,this.originalEvent=originalEvent}}let _ivy_ngcc_dist_fesm2015_NavigationService=(()=>{class NavigationService{constructor(disabledItemsService,selectionService){this.disabledItemsService=disabledItemsService,this.selectionService=selectionService,this.open=new core_EventEmitter,this.close=new core_EventEmitter,this.enter=new core_EventEmitter,this.tab=new core_EventEmitter,this.esc=new core_EventEmitter,this.up=new core_EventEmitter,this.right=new core_EventEmitter,this.down=new core_EventEmitter,this.left=new core_EventEmitter,this.delete=new core_EventEmitter,this.backspace=new core_EventEmitter,this.home=new core_EventEmitter,this.end=new core_EventEmitter}process(args){const keyCode=args.originalEvent.keyCode,altKey=args.originalEvent.altKey;let index,action=fesm2015_NavigationAction.Undefined;altKey&&keyCode===fesm2015_Keys.down?action=fesm2015_NavigationAction.Open:altKey&&keyCode===fesm2015_Keys.up?action=fesm2015_NavigationAction.Close:keyCode===fesm2015_Keys.enter?action=fesm2015_NavigationAction.Enter:keyCode===fesm2015_Keys.esc?action=fesm2015_NavigationAction.Esc:keyCode===fesm2015_Keys.tab?action=fesm2015_NavigationAction.Tab:keyCode===fesm2015_Keys.up?(index=this.next({current:args.current,start:args.min,end:args.max,step:-1}),action=fesm2015_NavigationAction.Up):keyCode===fesm2015_Keys.left?(index=this.next({current:args.current,start:args.min,end:args.max,step:-1}),action=fesm2015_NavigationAction.Left):keyCode===fesm2015_Keys.down?(index=this.next({current:args.current,start:args.min,end:args.max,step:1}),action=fesm2015_NavigationAction.Down):keyCode===fesm2015_Keys.right?(index=this.next({current:args.current,start:args.min,end:args.max,step:1}),action=fesm2015_NavigationAction.Right):keyCode===fesm2015_Keys.home?(index=this.isDisabled(0)?args.current:0,action=fesm2015_NavigationAction.Home):keyCode===fesm2015_Keys.end?(index=this.isDisabled(args.max)?args.current:args.max,action=fesm2015_NavigationAction.End):keyCode===fesm2015_Keys.delete?action=fesm2015_NavigationAction.Delete:keyCode===fesm2015_Keys.backspace&&(action=fesm2015_NavigationAction.Backspace);const eventData=new NavigationEvent(index,args.originalEvent);return action!==fesm2015_NavigationAction.Undefined&&this[fesm2015_NavigationAction[action].toLowerCase()].emit(eventData),action}next(args){const{current:current,start:start,end:end,step:step}=args,nextIndex=dist_fesm2015_isPresent(current)?this.clampIndex(current+step,start,end):start,firstFocusableIndex=this.firstFocusableIndex(nextIndex,start,end,step);return dist_fesm2015_isPresent(firstFocusableIndex)?firstFocusableIndex:this.selectionService.isSelected(current)&&current>=start?current:this.firstFocusableIndex(nextIndex,start,end,-1*step)}clampIndex(index,min,max){return!dist_fesm2015_isPresent(index)||index<min?min:index>max?max:index}firstFocusableIndex(startIndex,min,max,step){for(;min<=startIndex&&startIndex<=max;){if(!this.isDisabled(startIndex))return startIndex;startIndex+=step}}isDisabled(index){if(this.disabledItemsService)return this.disabledItemsService.isIndexDisabled(index)}}return NavigationService.fac=function(t){return new(t||NavigationService)(inject(fesm2015_DisabledItemsService),inject(fesm2015_SelectionService))},NavigationService.prov=defineInjectable({token:NavigationService,factory:NavigationService.fac}),NavigationService})(),fesm2015_NoDataTemplateDirective=(()=>{class NoDataTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return NoDataTemplateDirective.fac=function(t){return new(t||NoDataTemplateDirective)(directiveInject(TemplateRef))},NoDataTemplateDirective.dir=defineDirective({type:NoDataTemplateDirective,selectors:[["","kendoDropDownListNoDataTemplate",""],["","kendoComboBoxNoDataTemplate",""],["","kendoAutoCompleteNoDataTemplate",""],["","kendoMultiSelectNoDataTemplate",""]]}),NoDataTemplateDirective})();class dist_fesm2015_PreventableEvent{constructor(){this.prevented=!1}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}class FilterableDropDownComponentBase{}let fesm2015_ListItemDirective=(()=>{class ListItemDirective{constructor(element){this.element=element}}return ListItemDirective.fac=function(t){return new(t||ListItemDirective)(directiveInject(ElementRef))},ListItemDirective.dir=defineDirective({type:ListItemDirective,selectors:[["li","role","option"],["li","role","group"]]}),ListItemDirective})(),dist_fesm2015_ListComponent=(()=>{class ListComponent{constructor(dataService,wrapper,selectionService,disabledItemsService,cdr,zone,renderer){this.dataService=dataService,this.wrapper=wrapper,this.selectionService=selectionService,this.disabledItemsService=disabledItemsService,this.cdr=cdr,this.zone=zone,this.renderer=renderer,this.selected=[],this.focused=-1,this.show=!0,this.multipleSelection=!1,this.onClick=new core_EventEmitter,this.pageChange=new core_EventEmitter,this.startFrom=0,this.lastLoaded=0,this.lastScrollTop=0,this.scrollToFocused=!1,this.selectSubscription=merge(this.selectionService.onSelect.pipe(map_map(args=>args.indices[0])),this.selectionService.onFocus).subscribe(this.scrollToItem.bind(this))}set data(data){this._data=data[0]&&data[0].header?data.slice(0):data}get data(){return this._data}set items(items){this._items=items}get items(){return this._items}get pageSize(){return this.virtual.pageSize?this.virtual.pageSize:Math.round(this.height/this.virtual.itemHeight)}get scrollHeight(){return(this.dataService.grouped?this.virtual.total-1:this.virtual.total)*this.virtual.itemHeight}ngOnChanges(changes){isChanged("data",changes,!1)&&this.lastLoaded<=0&&(this.lastLoaded=this.data.length-1,this.scrollToFocused=!changes.data.isFirstChange())}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.scrollSubscription=fromEvent(this.content.nativeElement,"scroll").pipe(auditTime(100),tap(this.prefetchData.bind(this)),tap(this.findCurrentGroup.bind(this))).subscribe(()=>{this.lastScrollTop=this.content.nativeElement.scrollTop})})}ngAfterViewChecked(){this.virtual&&this.positionItems(),this.items&&this.scrollToFocused&&(this.scrollToFocused=!1,this.scrollToItem(this.items.length&&-1===this.selectionService.focused?0:this.selectionService.focused)),this.dataService.grouped&&this.findCurrentGroup()}ngOnDestroy(){this.selectSubscription.unsubscribe(),this.scrollSubscription&&this.scrollSubscription.unsubscribe()}firstVisibleItem(){const content=this.content.nativeElement,contentParent=content.offsetParent;return document.elementFromPoint((contentParent?contentParent.offsetLeft:0)+content.offsetLeft+1,(contentParent?contentParent.offsetTop:0)+content.offsetTop+1)}findCurrentGroup(){if(!this.dataService.grouped)return void(this.currentGroup=void 0);const item=this.firstVisibleItem();if(item){let index;"group"===item.getAttribute("role")?(index=parseInt(item.getAttribute("group-index"),10),this.currentGroup=this.dataService.groupAt(index).value):(index=parseInt(item.getAttribute("index"),10),this.currentGroup=this.dataService.itemGroup(this.dataService.itemAt(index)))}else this.currentGroup=void 0;this.cdr.detectChanges()}prefetchData(){if(!this.virtual)return;const visibleItems=Math.trunc(this.content.nativeElement.clientHeight/this.virtual.itemHeight),offsetY=this.content.nativeElement.scrollTop,start=Math.trunc(offsetY/this.virtual.itemHeight),down=offsetY>this.lastScrollTop,prevPage=this.lastLoaded-this.pageSize+visibleItems>=start-(this.pageSize-(this.lastLoaded-this.startFrom));down&&start+visibleItems>=this.lastLoaded&&this.lastLoaded<this.virtual.total-1&&this.changePage(start),!down&&prevPage&&this.changePage(start-this.pageSize+visibleItems+1)}changePage(start){this.zone.run(()=>{let end=this.pageSize+start;end>this.virtual.total&&(start--,end=this.virtual.total),start<0&&(start=0),this.startFrom=start,this.lastLoaded=end,this.pageChange.emit({skip:start,take:this.pageSize})})}index(groupIndex,itemIndex){return groupIndex>0?this.dataService.groupIndices[groupIndex-1]+itemIndex:itemIndex}getText(dataItem){return fesm2015_getter(dataItem,this.textField)}getValue(dataItem){return fesm2015_getter(dataItem,this.valueField)}isDisabled(index){return this.disabledItemsService.isIndexDisabled(index)}scrollToItem(index){let flatIndex=index;if(this.dataService.grouped&&(flatIndex=this.dataService.flatIndex(index),flatIndex+=this.firstGroupHeaderInTargetedPage(flatIndex)?-1:0),this.virtual&&flatIndex>-1)return void this.scrollToIndex(flatIndex);const items=this.items.toArray();dist_fesm2015_isPresent(items[flatIndex])&&-1!==flatIndex&&this.scroll(items[flatIndex].element)}scrollToIndex(index){let content=this.content.nativeElement,contentScrollTop=content.scrollTop;const itemOffsetTop=index*this.virtual.itemHeight,contentOffsetHeight=content.clientHeight,bottomDistance=itemOffsetTop+this.virtual.itemHeight;contentScrollTop>itemOffsetTop?contentScrollTop=itemOffsetTop:bottomDistance>contentScrollTop+contentOffsetHeight&&(contentScrollTop=bottomDistance-contentOffsetHeight),content.scrollTop=contentScrollTop}scroll(item){if(!item)return;const nativeElement=item.nativeElement;let content=this.content.nativeElement,itemOffsetTop=nativeElement.offsetTop,contentScrollTop=content.scrollTop,contentOffsetHeight=content.clientHeight,bottomDistance=itemOffsetTop+nativeElement.offsetHeight;contentScrollTop>itemOffsetTop?contentScrollTop=itemOffsetTop:bottomDistance>contentScrollTop+contentOffsetHeight&&(contentScrollTop=bottomDistance-contentOffsetHeight),content.scrollTop=contentScrollTop}positionItems(){this.items.forEach((item,index)=>{this.renderer.setStyle(item.element.nativeElement,"transform",`translateY(${(index+this.startFrom)*this.virtual.itemHeight}px`)})}firstGroupHeaderInTargetedPage(itemIndex){return!dist_fesm2015_isPresent(this.virtual)||0===this.virtual.skip&&this.virtual.pageSize>itemIndex}}return ListComponent.fac=function(t){return new(t||ListComponent)(directiveInject(fesm2015_DataService),directiveInject(ElementRef),directiveInject(fesm2015_SelectionService),directiveInject(fesm2015_DisabledItemsService),directiveInject(ChangeDetectorRef),directiveInject(NgZone),directiveInject(Renderer2))},ListComponent.cmp=defineComponent({type:ListComponent,selectors:[["kendo-list"]],viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(_ivy_ngcc_dist_fesm2015_c1,!0),viewQuery(dist_fesm2015_c2,!0),viewQuery(fesm2015_ListItemDirective,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.content=_t.first),queryRefresh(_t=loadQuery())&&(ctx.list=_t.first),queryRefresh(_t=loadQuery())&&(ctx.items=_t))},inputs:{selected:"selected",focused:"focused",show:"show",multipleSelection:"multipleSelection",data:"data",textField:"textField",valueField:"valueField",height:"height",template:"template",groupTemplate:"groupTemplate",fixedGroupTemplate:"fixedGroupTemplate",id:"id",optionPrefix:"optionPrefix",virtual:"virtual"},outputs:{onClick:"onClick",pageChange:"pageChange"},features:[NgOnChangesFeature],decls:8,vars:15,consts:[["class","k-outer-group-header k-first",3,"ngClass","ngStyle",4,"ngIf"],["unselectable","on",3,"ngClass"],["content",""],["role","listbox",1,"k-list","k-reset",3,"ngClass"],["list",""],[4,"ngIf"],["class","k-height-container","role","presentation",4,"ngIf"],[1,"k-outer-group-header","k-first",3,"ngClass","ngStyle"],[3,"ngIf"],[3,"templateContext"],["ngFor","",3,"ngForOf"],["role","option","kendoDropDownsSelectable","",1,"k-item",3,"height","index","multipleSelection","ngClass"],["role","group","class","k-outer-group-header",3,"ngClass","ngStyle",4,"ngIf"],["role","option","kendoDropDownsSelectable","","class","k-item",3,"height","index","multipleSelection","ngClass",4,"ngIf"],["role","group",1,"k-outer-group-header",3,"ngClass","ngStyle"],["role","presentation",1,"k-height-container"]],template:function(rf,ctx){1&rf&&(template(0,ListComponent_div_0_Template,3,10,"div",0),elementStart(1,"div",1,2),elementStart(3,"ul",3,4),template(5,ListComponent_5_Template,1,1,void 0,5),template(6,ListComponent_6_Template,1,1,void 0,5),elementEnd(),template(7,ListComponent_div_7_Template,2,2,"div",6),elementEnd()),2&rf&&(property("ngIf",ctx.dataService.grouped),advance(1),styleProp("max-height",ctx.height,"px"),property("ngClass",pureFunction2(10,dist_fesm2015_c7,ctx.virtual,!ctx.virtual)),advance(2),property("ngClass",pureFunction1(13,dist_fesm2015_c8,ctx.virtual)),attribute("id",ctx.id)("aria-hidden",!ctx.show),advance(2),property("ngIf",!ctx.dataService.grouped&&ctx.show),advance(1),property("ngIf",ctx.dataService.grouped),advance(1),property("ngIf",ctx.virtual))},directives:function(){return[common_NgIf,common_NgClass,common_NgStyle,dist_fesm2015_TemplateContextDirective,common_NgForOf,fesm2015_ListItemDirective,fesm2015_SelectableDirective]},encapsulation:2}),ListComponent})();const DEFAULTS={pageSize:50,itemHeight:28},normalizeVirtualizationSettings=settings=>!0===settings?DEFAULTS:settings?Object.assign({pageSize:DEFAULTS.pageSize},settings):null,AUTOCOMPLETE_VALUE_ACCESSOR={multi:!0,provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>fesm2015_AutoCompleteComponent)};let fesm2015_AutoCompleteComponent=(()=>{class AutoCompleteComponent{constructor(localization,dataService,popupService,selectionService,navigationService,disabledItemsService,_zone,cdr,renderer,wrapper){this.localization=localization,this.dataService=dataService,this.popupService=popupService,this.selectionService=selectionService,this.navigationService=navigationService,this.disabledItemsService=disabledItemsService,this._zone=_zone,this.cdr=cdr,this.renderer=renderer,this.highlightFirst=!0,this.focusableId="k-"+fesm2015_guid(),this.placeholder="",this.listHeight=200,this.clearButton=!0,this.disabled=!1,this.readonly=!1,this.tabindex=0,this.filterable=!1,this.valueChange=new core_EventEmitter,this.filterChange=new core_EventEmitter,this.open=new core_EventEmitter,this.close=new core_EventEmitter,this.onFocus=new core_EventEmitter,this.onBlur=new core_EventEmitter,this.widgetClasses=!0,this.listBoxId=fesm2015_guid(),this.optionPrefix=fesm2015_guid(),this.onChangeCallback=_value=>{},this.onTouchedCallback=_=>{},this.popupMouseDownHandler=event=>event.preventDefault(),this._popupSettings={animate:!0},this._open=!1,this._value="",this._previousValue="",this._filtering=!1,this.valueChangeSubject=new Subject_Subject,this._isFocused=!1,this.direction=localization.rtl?"rtl":"ltr",this.wrapper=wrapper.nativeElement,this.data=[],this.subscribeEvents(),this.selectionService.resetSelection([-1])}get width(){let wrapperOffsetWidth=0;isDocumentAvailable()&&(wrapperOffsetWidth=this.wrapper.offsetWidth);const width=this.popupSettings.width||wrapperOffsetWidth;return{min:isNaN(wrapperOffsetWidth)?wrapperOffsetWidth:wrapperOffsetWidth+"px",max:isNaN(width)?width:width+"px"}}get height(){const popupHeight=this.popupSettings.height;return dist_fesm2015_isPresent(popupHeight)?popupHeight+"px":"auto"}get listContainerClasses(){const containerClasses=["k-list-container","k-reset"];return this.popupSettings.popupClass&&containerClasses.push(this.popupSettings.popupClass),containerClasses}get suggestion(){if(!this.text||!this.suggestedText)return void(this.suggestedText=void 0);const hasMatch=this.suggestedText.toLowerCase().startsWith(this.text.toLowerCase());return this.suggest&&!this.backspacePressed&&hasMatch?this.suggestedText:void 0}get appendTo(){const{appendTo:appendTo}=this.popupSettings;if(appendTo&&"root"!==appendTo)return"component"===appendTo?this.container:appendTo}toggle(open){Promise.resolve(null).then(()=>{this._toggle(open)})}get isOpen(){return this._open}togglePopup(open){this.disabled||this.readonly||this.isOpen===open||this.triggerPopupEvents(open)||this._toggle(open)}get activeDescendant(){if(!this.isOpen||!dist_fesm2015_isPresent(this.selectionService.focused)||-1===this.selectionService.focused)return null;const dataItem=this.dataService.itemAt(this.selectionService.focused);return this.optionPrefix+"-"+fesm2015_getter(dataItem,this.valueField)}get noDataLabel(){if(0===this.data.length)return this.noDataText}get clearTitle(){return this.localization.get("clearTitle")}set data(data){this.dataService.data=data||[],this.virtual&&(this.virtual.skip=0),this.setState(this.value),this.filterable&&(this.selectionService.focused=this.isOpen&&this.data.length&&this.highlightFirst?this.firstFocusableIndex(0):-1),this.suggest&&this.dataService.itemsCount>0&&(this.suggestedText=fesm2015_getter(this.dataService.itemAt(0),this.valueField))}get data(){const virtual=this.virtual;if(virtual){const start=virtual.skip||0,end=start+virtual.pageSize;return virtual.total=this.dataService.data.length,this.dataService.data.slice(start,end)}return this.dataService.data}set value(newValue){this.verifySettings(newValue),this._value=newValue||"",this.cdr.markForCheck()}get value(){return this._value||""}set popupSettings(settings){this._popupSettings=Object.assign({animate:!0},settings)}get popupSettings(){return this._popupSettings}set itemDisabled(fn){if("function"!=typeof fn)throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(fn)}.`);this.disabledItemsService.itemDisabled=fn}set tabIndex(tabIndex){this.tabindex=tabIndex}get tabIndex(){return this.tabindex}set virtual(settings){this._virtualSettings=normalizeVirtualizationSettings(settings)}get virtual(){return this._virtualSettings}get isFocused(){return this._isFocused}set isFocused(isFocused){this._isFocused=isFocused}get isDisabled(){return this.disabled}get dir(){return this.direction}ngOnInit(){this.renderer.removeAttribute(this.wrapper,"tabindex"),this.localizationChangeSubscription=this.localization.changes.subscribe(({rtl:rtl})=>{this.direction=rtl?"rtl":"ltr",this.setMessages()}),this.setMessages()}ngOnDestroy(){this.destroyPopup(),this.unsubscribeEvents(),clearTimeout(this.messagesTimeout),this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe()}ngOnChanges(changes){const virtual=this.virtual;virtual&&changes.data&&changes.data.isFirstChange()&&this.pageChange({skip:0,take:virtual.pageSize}),/(value|valueField)/g.test(Object.keys(changes).join())&&this.setState(this.value)}reset(){this.setState("")}clearValue(event){event.stopImmediatePropagation(),this.focus(),this.change(""),this.filterable&&this.filterChange.emit(""),this.selectionService.resetSelection([])}writeValue(value){this.setState(value)}registerOnChange(fn){this.onChangeCallback=fn}registerOnTouched(fn){this.onTouchedCallback=fn}setDisabledState(isDisabled){this.disabled=isDisabled}focus(){this.disabled||this.searchbar.focus()}blur(){this.disabled||this.searchbar.blur()}onResize(){if(this._open){const popupWrapper=this.popupRef.popupElement,{min:min,max:max}=this.width;popupWrapper.style.minWidth=min,popupWrapper.style.width=max}}emitChange(){this.value!==this._previousValue&&(this._previousValue=this.value,this.onChangeCallback(this.value),this.valueChange.emit(this.value))}verifySettings(newValue){if(isDevMode()&&dist_fesm2015_isPresent(newValue)&&"string"!=typeof newValue)throw new Error("Expected value of type string. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/autocomplete/#toc-value")}search(text,startFrom=0){let index;index=text.length&&this.dataService.itemsCount?this.dataService.findIndex(this.findIndexPredicate(text),startFrom):-1,this.disabledItemsService.isIndexDisabled(index)?index+1<this.dataService.itemsCount?this.search(text,index+1):this.selectionService.focus(-1):(this.selectionService.focus(index),this.suggest&&(this.suggestedText=fesm2015_getter(this.dataService.itemAt(index),this.valueField)))}navigate(index){this.isOpen&&this.selectionService.focus(index)}handleNavigate(event){const focused=isNaN(this.selectionService.focused)?this.firstFocusableIndex(0):this.selectionService.focused;if(this.disabled||this.readonly||isNaN(focused))return;const action=this.navigationService.process({current:focused,max:this.dataService.itemsCount-1,min:0,originalEvent:event});action!==fesm2015_NavigationAction.Undefined&&action!==fesm2015_NavigationAction.Backspace&&action!==fesm2015_NavigationAction.Delete&&action!==fesm2015_NavigationAction.Home&&action!==fesm2015_NavigationAction.End&&action!==fesm2015_NavigationAction.Left&&action!==fesm2015_NavigationAction.Right&&(action===fesm2015_NavigationAction.Enter&&this.isOpen||action!==fesm2015_NavigationAction.Enter)&&event.preventDefault()}handleEnter(event){const focused=this.selectionService.focused;let value;if(this._filtering=!1,this.isOpen&&event.originalEvent.preventDefault(),focused>=0)value=fesm2015_getter(this.dataService.itemAt(focused),this.valueField);else{const match=this.suggest&&this.suggestedText&&this.data.length&&fesm2015_getter(this.dataService.itemAt(0),this.valueField,!0).toLowerCase()===this.searchbar.value.toLowerCase();value=this.isOpen&&match?this.suggestedText:this.searchbar.value}this.change(value)}handleEscape(){this.togglePopup(!1),this.selectionService.focused=-1,this.suggestedText=null}searchBarChange(text){const currentTextLength=dist_fesm2015_isPresent(this.text)?this.text.length:0;this.backspacePressed=text.length<currentTextLength,this.text=text,this.togglePopup(text.length>0),this._filtering=!0,this.highlightFirst||(this.selectionService.focused=-1),this.filterable?this.filterChange.emit(text):this.highlightFirst&&this.search(text)}handleFocus(){this.isFocused=!0,this.onFocus.emit()}handleBlur(){this._filtering=!1;const focused=this.filterable?this.selectionService.focused:-1;let dataItem,text;-1!==focused?(dataItem=this.dataService.itemAt(focused),text=fesm2015_getter(dataItem,this.valueField,!0)||""):text=this.searchbar.value;const exactMatch=text===this.searchbar.value,insensitiveMatch=text.toLowerCase()===this.searchbar.value.toLowerCase();!exactMatch&&insensitiveMatch&&this.selectionService.resetSelection([]),this.change(this.searchbar.value),this.togglePopup(!1),this.isFocused=!1,this.onBlur.emit(),this.onTouchedCallback()}pageChange(event){this.virtual.skip=event.skip}setState(newValue){this._filtering||(this.value=newValue,this._previousValue=this.value,this.text=this.value)}change(value){this.togglePopup(!1),this.valueChangeSubject.next(value)}subscribeEvents(){isDocumentAvailable()&&(this.valueChangeSubscription=this.valueChangeSubject.pipe(filter_filter(candidate=>!(this.value===candidate&&this.text===candidate))).subscribe(value=>{this.value=value,this.text=value,this.emitChange()}),this.changeSubscription=this.selectionService.onChange.subscribe(this.handleItemChange.bind(this)),this.focusSubscription=this.selectionService.onFocus.subscribe(this.handleItemFocus.bind(this)),this.navigationSubscription=merge(this.navigationService.up,this.navigationService.down).subscribe(event=>this.navigate(event.index)),this.closeSubscription=this.navigationService.close.subscribe(()=>this.togglePopup(!1)),this.enterSubscription=this.navigationService.enter.subscribe(this.handleEnter.bind(this)),this.escSubscription=this.navigationService.esc.subscribe(this.handleEscape.bind(this)))}unsubscribeEvents(){isDocumentAvailable()&&(this.changeSubscription.unsubscribe(),this.navigationSubscription.unsubscribe(),this.closeSubscription.unsubscribe(),this.enterSubscription.unsubscribe(),this.escSubscription.unsubscribe(),this.valueChangeSubscription.unsubscribe(),this.focusSubscription.unsubscribe())}handleItemChange(event){const index=event.indices.length?event.indices[0]:void 0;if(this._filtering=!1,this.selectionService.resetSelection([-1]),!dist_fesm2015_isPresent(index))return;let text=fesm2015_getter(this.dataService.itemAt(index),this.valueField);this.change(text)}handleItemFocus(_event){const focused=this.selectionService.focused;Boolean(this.suggest&&this.data&&this.data.length&&focused>=0)&&(this.suggestedText=fesm2015_getter(this.dataService.itemAt(focused),this.valueField))}createPopup(){this.virtual&&(this.virtual.skip=0);const horizontalAlign="rtl"===this.direction?"right":"left";this.popupRef=this.popupService.open({anchor:this.wrapper,animate:this.popupSettings.animate,appendTo:this.appendTo,content:this.popupTemplate,popupClass:this.listContainerClasses,positionMode:"absolute",popupAlign:{horizontal:horizontalAlign,vertical:"top"},anchorAlign:{horizontal:horizontalAlign,vertical:"bottom"}});const popupWrapper=this.popupRef.popupElement,{min:min,max:max}=this.width;popupWrapper.addEventListener("mousedown",this.popupMouseDownHandler),popupWrapper.style.minWidth=min,popupWrapper.style.width=max,popupWrapper.style.height=this.height,popupWrapper.setAttribute("dir",this.direction),this.popupRef.popupOpen.subscribe(()=>{this.cdr.detectChanges(),this.optionsList.scrollToItem(this.selectionService.focused)}),this.popupRef.popupAnchorViewportLeave.subscribe(()=>this.togglePopup(!1))}destroyPopup(){this.popupRef&&(this.popupRef.popupElement.removeEventListener("mousedown",this.popupMouseDownHandler),this.popupRef.close(),this.popupRef=null)}_toggle(open){this._open=void 0===open?!this._open:open,this.destroyPopup(),this._open&&this.createPopup()}triggerPopupEvents(open){const eventArgs=new dist_fesm2015_PreventableEvent;return open?this.open.emit(eventArgs):this.close.emit(eventArgs),eventArgs.isDefaultPrevented()}firstFocusableIndex(index){const maxIndex=this.data.length-1;return this.disabledItemsService.isIndexDisabled(index)?index<maxIndex?this.firstFocusableIndex(index+1):void 0:index}findIndexPredicate(text){return this.dataService.grouped?item=>{let itemText=fesm2015_getter(item.value,this.valueField);return itemText=dist_fesm2015_isPresent(itemText)?itemText.toString().toLowerCase():"",itemText.startsWith(text.toLowerCase())}:item=>{let itemText=fesm2015_getter(item,this.valueField);return itemText=dist_fesm2015_isPresent(itemText)?itemText.toString().toLowerCase():"",itemText.startsWith(text.toLowerCase())}}setMessages(){this._zone.runOutsideAngular(()=>{clearTimeout(this.messagesTimeout),this.messagesTimeout=setTimeout(()=>{this.noDataText=this.localization.get("noDataText"),this.cdr.detectChanges()})})}}return AutoCompleteComponent.fac=function(t){return new(t||AutoCompleteComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_DataService),directiveInject(fesm2015_PopupService),directiveInject(fesm2015_SelectionService),directiveInject(_ivy_ngcc_dist_fesm2015_NavigationService),directiveInject(fesm2015_DisabledItemsService),directiveInject(NgZone),directiveInject(ChangeDetectorRef),directiveInject(Renderer2),directiveInject(ElementRef))},AutoCompleteComponent.cmp=defineComponent({type:AutoCompleteComponent,selectors:[["kendo-autocomplete"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&(contentQuery(dirIndex,fesm2015_ItemTemplateDirective,!0),contentQuery(dirIndex,fesm2015_HeaderTemplateDirective,!0),contentQuery(dirIndex,fesm2015_FooterTemplateDirective,!0),contentQuery(dirIndex,fesm2015_NoDataTemplateDirective,!0),contentQuery(dirIndex,fesm2015_GroupTemplateDirective,!0),contentQuery(dirIndex,fesm2015_FixedGroupTemplateDirective,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.template=_t.first),queryRefresh(_t=loadQuery())&&(ctx.headerTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.footerTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.noDataTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.groupTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.fixedGroupTemplate=_t.first))},viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(dist_fesm2015_c9,!0,ViewContainerRef),viewQuery(fesm2015_c10,!0),viewQuery(fesm2015_SearchBarComponent,!0),viewQuery(fesm2015_c11,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.container=_t.first),queryRefresh(_t=loadQuery())&&(ctx.popupTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.searchbar=_t.first),queryRefresh(_t=loadQuery())&&(ctx.optionsList=_t.first))},hostVars:11,hostBindings:function(rf,ctx){2&rf&&(attribute("dir",ctx.dir),classProp("k-widget",ctx.widgetClasses)("k-autocomplete",ctx.widgetClasses)("k-header",ctx.widgetClasses)("k-state-focused",ctx.isFocused)("k-state-disabled",ctx.isDisabled))},inputs:{highlightFirst:"highlightFirst",focusableId:"focusableId",placeholder:"placeholder",listHeight:"listHeight",clearButton:"clearButton",disabled:"disabled",readonly:"readonly",tabindex:"tabindex",filterable:"filterable",data:"data",value:"value",popupSettings:"popupSettings",itemDisabled:"itemDisabled",tabIndex:"tabIndex",virtual:"virtual",valueField:"valueField",loading:"loading",suggest:"suggest"},outputs:{valueChange:"valueChange",filterChange:"filterChange",open:"open",close:"close",onFocus:"focus",onBlur:"blur"},exportAs:["kendoAutoComplete"],features:[ProvidersFeature([AUTOCOMPLETE_VALUE_ACCESSOR,fesm2015_DataService,fesm2015_SelectionService,_ivy_ngcc_dist_fesm2015_NavigationService,fesm2015_DisabledItemsService,fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.autocomplete"},{provide:FilterableDropDownComponentBase,useExisting:forwardRef(()=>AutoCompleteComponent)},{provide:KendoInput,useExisting:forwardRef(()=>AutoCompleteComponent)}]),NgOnChangesFeature],decls:11,vars:15,consts:[["kendoAutoCompleteLocalizedMessages","",6,"noDataText","clearTitle"],[3,"role","id","listId","activeDescendant","noDataLabel","userInput","suggestedText","disabled","readonly","tabIndex","popupOpen","placeholder","onNavigate","valueChange","onBlur","onFocus"],["searchbar",""],["class","k-icon k-clear-value k-i-close","role","button","tabindex","-1",3,"click","mousedown",4,"ngIf"],["class","k-icon k-i-loading",4,"ngIf"],["popupTemplate",""],[3,"ngIf"],["container",""],["role","button","tabindex","-1",1,"k-icon","k-clear-value","k-i-close",3,"click","mousedown"],[1,"k-icon","k-i-loading"],[4,"ngIf"],[3,"id","optionPrefix","data","textField","valueField","template","groupTemplate","fixedGroupTemplate","height","show","virtual","pageChange"],["optionsList",""],["class","k-nodata",4,"ngIf"],[3,"templateContext"],[1,"k-nodata"],[3,"ngIf","templateContext"],[3,"resize"]],template:function(rf,ctx){1&rf&&(elementContainerStart(0,0),i18nAttributes(1,fesm2015_c16),elementContainerEnd(),elementStart(2,"kendo-searchbar",1,2),listener("onNavigate",(function($event){return ctx.handleNavigate($event)}))("valueChange",(function($event){return ctx.searchBarChange($event)}))("onBlur",(function(){return ctx.handleBlur()}))("onFocus",(function(){return ctx.handleFocus()})),elementEnd(),template(4,AutoCompleteComponent_span_4_Template,1,1,"span",3),template(5,AutoCompleteComponent_span_5_Template,1,0,"span",4),template(6,AutoCompleteComponent_ng_template_6_Template,5,14,"ng-template",null,5,templateRefExtractor),template(8,AutoCompleteComponent_ng_template_8_Template,1,0,"ng-template",6),elementContainer(9,null,7)),2&rf&&(advance(2),property("role","combobox")("id",ctx.focusableId)("listId",ctx.listBoxId)("activeDescendant",ctx.activeDescendant)("noDataLabel",ctx.noDataLabel)("userInput",ctx.text)("suggestedText",ctx.suggestion)("disabled",ctx.disabled)("readonly",ctx.readonly)("tabIndex",ctx.tabIndex)("popupOpen",ctx.isOpen)("placeholder",ctx.placeholder),advance(2),property("ngIf",!ctx.loading&&!ctx.readonly&&ctx.clearButton&&(null==ctx.text?null:ctx.text.length)),advance(1),property("ngIf",ctx.loading),advance(3),property("ngIf",ctx.isOpen))},directives:function(){return[dist_fesm2015_LocalizedMessagesDirective,fesm2015_SearchBarComponent,common_NgIf,dist_fesm2015_ListComponent,dist_fesm2015_TemplateContextDirective,fesm2015_ResizeSensorComponent]},encapsulation:2}),AutoCompleteComponent})();const TOUCH_ENABLED=new InjectionToken("dropdowns-touch-enabled");let fesm2015_ValueTemplateDirective=(()=>{class ValueTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return ValueTemplateDirective.fac=function(t){return new(t||ValueTemplateDirective)(directiveInject(TemplateRef))},ValueTemplateDirective.dir=defineDirective({type:ValueTemplateDirective,selectors:[["","kendoDropDownListValueTemplate",""]]}),ValueTemplateDirective})();const DROPDOWNLIST_VALUE_ACCESSOR={multi:!0,provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>fesm2015_DropDownListComponent)};let fesm2015_DropDownListComponent=(()=>{class DropDownListComponent{constructor(localization,popupService,selectionService,navigationService,disabledItemsService,dataService,_zone,renderer,hostElement,cdr,touchEnabled){this.localization=localization,this.popupService=popupService,this.selectionService=selectionService,this.navigationService=navigationService,this.disabledItemsService=disabledItemsService,this.dataService=dataService,this._zone=_zone,this.renderer=renderer,this.hostElement=hostElement,this.cdr=cdr,this.touchEnabled=touchEnabled,this.focusableId="k-"+fesm2015_guid(),this.listHeight=200,this.disabled=!1,this.readonly=!1,this.filterable=!1,this.ignoreCase=!0,this.delay=500,this.tabindex=0,this.valueChange=new core_EventEmitter,this.filterChange=new core_EventEmitter,this.selectionChange=new core_EventEmitter,this.open=new core_EventEmitter,this.close=new core_EventEmitter,this.onFocus=new core_EventEmitter,this.onBlur=new core_EventEmitter,this.widgetClasses=!0,this.groupIndices=[],this.listBoxId=fesm2015_guid(),this.optionPrefix=fesm2015_guid(),this.filterText="",this.isFocused=!1,this.onTouchedCallback=_=>{},this.onChangeCallback=_=>{},this.word="",this.last="",this.filterFocused=new core_EventEmitter,this.filterBlurred=new core_EventEmitter,this.wrapperFocused=new core_EventEmitter,this.wrapperBlurred=new core_EventEmitter,this.selectionSubscription=new Subscription_Subscription,this._open=!1,this._popupSettings={animate:!0},this.direction=localization.rtl?"rtl":"ltr",this.data=[],this.subscribeEvents(),this.hostElement=hostElement.nativeElement,this.popupMouseDownHandler=this.onMouseDown.bind(this)}get width(){const wrapperWidth=isDocumentAvailable()?this.wrapper.nativeElement.offsetWidth:0,width=this.popupSettings.width||wrapperWidth;return{min:isNaN(wrapperWidth)?wrapperWidth:wrapperWidth+"px",max:isNaN(width)?width:width+"px"}}get height(){const popupHeight=this.popupSettings.height;return dist_fesm2015_isPresent(popupHeight)?popupHeight+"px":"auto"}get widgetTabIndex(){if(this.disabled)return;const providedTabIndex=Number(this.tabIndex);return isNaN(providedTabIndex)?0:providedTabIndex}get ariaExpanded(){return this.isOpen}get ariaOwns(){if(this.isOpen)return this.listBoxId}get ariaActivedescendant(){if(dist_fesm2015_isPresent(this.dataItem))return this.optionPrefix+"-"+fesm2015_getter(this.dataItem,this.valueField)}get noDataLabel(){if(0===this.dataService.itemsCount)return this.noDataText}get appendTo(){const{appendTo:appendTo}=this.popupSettings;if(appendTo&&"root"!==appendTo)return"component"===appendTo?this.container:appendTo}set data(data){this.dataService.data=data||[],this.virtual&&(this.virtual.skip=0),this.setState()}get data(){const virtual=this.virtual;if(virtual){const start=virtual.skip||0,end=start+virtual.pageSize;return virtual.total=this.dataService.data.length,this.dataService.data.slice(start,end)}return this.dataService.data}set value(newValue){this._value=newValue,this.cdr.markForCheck()}get value(){return this._value}set popupSettings(settings){this._popupSettings=Object.assign({animate:!0},settings)}get popupSettings(){return this._popupSettings}set itemDisabled(fn){if("function"!=typeof fn)throw new Error(`itemDisabled must be a function, but received ${JSON.stringify(fn)}.`);this.disabledItemsService.itemDisabled=fn}set virtual(settings){this._virtualSettings=normalizeVirtualizationSettings(settings)}get virtual(){return this._virtualSettings}set tabIndex(tabIndex){this.tabindex=tabIndex}get tabIndex(){return this.tabindex}blurComponent(){this.wrapperBlurred.emit()}blurFilterInput(){this.filterBlurred.emit()}focusComponent(){this.wrapperFocused.emit(),this.isFocused||(this.isFocused=!0,this.onFocus.emit())}keydown(event){const firstIndex=dist_fesm2015_isPresent(this.defaultItem)?-1:0;let focused=isNaN(this.selectionService.focused)?this.firstFocusableIndex(firstIndex):this.selectionService.focused,offset=0;if(this.disabled||this.readonly)return;if(this.filterable&&this.isFocused&&this.isOpen&&(event.keyCode===fesm2015_Keys.home||event.keyCode===fesm2015_Keys.end))return;const hasSelected=dist_fesm2015_isPresent(this.selectionService.selected[0]),focusedItemNotSelected=dist_fesm2015_isPresent(this.selectionService.focused)&&!this.selectionService.isSelected(this.selectionService.focused);hasSelected&&!focusedItemNotSelected||(event.keyCode===fesm2015_Keys.down||event.keyCode===fesm2015_Keys.right?offset=-1:event.keyCode!==fesm2015_Keys.up&&event.keyCode!==fesm2015_Keys.left||(offset=1));const eventData=event,action=this.navigationService.process({current:focused+offset,max:this.dataService.itemsCount-1,min:this.defaultItem?-1:0,originalEvent:eventData});action===fesm2015_NavigationAction.Undefined||action===fesm2015_NavigationAction.Tab||action===fesm2015_NavigationAction.Backspace||action===fesm2015_NavigationAction.Delete||(action===fesm2015_NavigationAction.Left||action===fesm2015_NavigationAction.Right)&&this.filterable||action===fesm2015_NavigationAction.Enter||eventData.preventDefault()}keypress(event){this.disabled||this.readonly||this.filterable||this.onKeyPress(event)}click(){this.focus(),this.togglePopup(!this.isOpen)}onResize(){if(this._open){const popupWrapper=this.popupRef.popupElement,{min:min,max:max}=this.width;popupWrapper.style.minWidth=min,popupWrapper.style.width=max}}get dir(){return this.direction}ngOnInit(){this.renderer.removeAttribute(this.hostElement,"tabindex"),this.localizationChangesSubscription=this.localization.changes.subscribe(({rtl:rtl})=>{this.direction=rtl?"rtl":"ltr",this.setMessages()}),this.setMessages(),this.assignAriaDescribedBy()}isEmpty(){const value=this.value;return!(0===value||!1===value||value||this.defaultItem)}onFilterFocus(){this.filterFocused.emit()}ngOnDestroy(){this.destroyPopup(),this.unsubscribeEvents(),clearTimeout(this.messagesTimeout),this.localizationChangesSubscription&&this.localizationChangesSubscription.unsubscribe()}ngOnChanges(_changes){const virtual=this.virtual;virtual&&_changes.data&&_changes.data.isFirstChange()&&this.pageChange({skip:0,take:virtual.pageSize}),void 0===this.valuePrimitive&&(this.valuePrimitive=!this.valueField),_changes.hasOwnProperty("value")&&(this.verifySettings(_changes.value.currentValue),dist_fesm2015_isPresent(this.value)||(this._previousDataItem=void 0)),_changes.hasOwnProperty("defaultItem")&&(this.disabledItemsService.defaultItem=this.defaultItem),/(value|textField|valueField|valuePrimitive|defaultItem|itemDisabled)/g.test(Object.keys(_changes).join())&&this.setState()}focus(){this.disabled||this.wrapper.nativeElement.focus()}blur(){this.disabled||this.wrapper.nativeElement.blur()}toggle(open){Promise.resolve(null).then(()=>{this._toggle(open)})}_toggle(open){this._open=void 0===open?!this._open:open,this.destroyPopup(),this._open&&this.createPopup()}triggerPopupEvents(open){const eventArgs=new dist_fesm2015_PreventableEvent;return open?this.open.emit(eventArgs):this.close.emit(eventArgs),eventArgs.isDefaultPrevented()}togglePopup(open){this.disabled||this.readonly||this.isOpen===open||this.triggerPopupEvents(open)||(!open&&this.filterable&&this.isFocused&&this.focus(),this._toggle(open))}get isOpen(){return this._open}reset(){this._previousDataItem=void 0,this.value=void 0,this.setState()}writeValue(value){this.verifySettings(value),this.value=null===value?void 0:value,dist_fesm2015_isPresent(value)||(this._previousDataItem=void 0),this.setState()}registerOnChange(fn){this.onChangeCallback=fn}registerOnTouched(fn){this.onTouchedCallback=fn}setDisabledState(isDisabled){this.disabled=isDisabled}get buttonClasses(){return this.loading?"k-i-loading":this.iconClass||"k-i-arrow-s"}get listContainerClasses(){const containerClasses=["k-list-container","k-reset"];return this.popupSettings.popupClass&&containerClasses.push(this.popupSettings.popupClass),containerClasses}get isDisabledDefaultItem(){return this.disabledItemsService.isItemDisabled(this.defaultItem)}getText(){return this.text}getDefaultItemText(){return fesm2015_getter(this.defaultItem,this.textField)}createPopup(){this.virtual&&(this.virtual.skip=0);const horizontalAlign="rtl"===this.direction?"right":"left";this.popupRef=this.popupService.open({anchor:this.wrapper,anchorAlign:{horizontal:horizontalAlign,vertical:"bottom"},animate:this.popupSettings.animate,appendTo:this.appendTo,content:this.popupTemplate,popupAlign:{horizontal:horizontalAlign,vertical:"top"},popupClass:this.listContainerClasses,positionMode:"absolute"});const popupWrapper=this.popupRef.popupElement,{min:min,max:max}=this.width;popupWrapper.addEventListener("mousedown",this.popupMouseDownHandler),popupWrapper.style.minWidth=min,popupWrapper.style.width=max,popupWrapper.style.height=this.height,popupWrapper.setAttribute("dir",this.direction),this.popupRef.popupOpen.subscribe(()=>{this.cdr.detectChanges(),this.optionsList.scrollToItem(this.selectionService.focused)}),this.filterable||this.popupRef.popupAnchorViewportLeave.subscribe(()=>this.togglePopup(!1))}destroyPopup(){this.popupRef&&(this.popupRef.popupElement.removeEventListener("mousedown",this.popupMouseDownHandler),this.popupRef.close(),this.popupRef=null)}updateState({dataItem:dataItem,confirm:confirm=!1}){this.dataItem=dataItem,this.text=this.prop(this.textField,this.valuePrimitive)(dataItem),confirm&&(this._previousDataItem=dataItem)}clearState(){this.text=void 0,this.dataItem=void 0}resetSelection(index){const clear=!dist_fesm2015_isPresent(index);this.selectionService.resetSelection(clear?[]:[index]),this.selectionService.focused=clear?this.firstFocusableIndex(0):index}onSelectionChange({dataItem:dataItem}){this.updateState({dataItem:dataItem}),this.selectionChange.emit(dataItem),this.assignAriaDescribedBy()}subscribeEvents(){isDocumentAvailable()&&(this.selectionSubscription.add(this.selectionService.onSelect.pipe(filter_filter(_=>this.isOpen),map_map(this.itemFromEvent.bind(this))).subscribe(this.onSelectionChange.bind(this))),this.selectionSubscription.add(merge(this.selectionService.onSelect.pipe(filter_filter(_=>!this.isOpen)),this.selectionService.onChange).pipe(map_map(this.itemFromEvent.bind(this)),tap(_=>this.togglePopup(!1))).subscribe(({dataItem:dataItem,value:newValue,newSelection:newSelection})=>{newSelection&&this.onSelectionChange({dataItem:dataItem});const shouldUsePrevious=!dist_fesm2015_isPresent(dataItem)&&this._previousDataItem,shouldUseNewValue=newValue!==this.prop(this.valueField,this.valuePrimitive)(this.value);shouldUsePrevious?(this.updateState({dataItem:this._previousDataItem}),this.resetSelection()):shouldUseNewValue&&(this.value=this.valuePrimitive?newValue:dataItem,this._previousDataItem=dataItem,this.emitChange(this.value)),this.clearFilter()})),this.navigationSubscription=merge(this.navigationService.up,this.navigationService.down,this.navigationService.left.pipe(skipWhile(()=>this.filterable)),this.navigationService.right.pipe(skipWhile(()=>this.filterable)),this.navigationService.home,this.navigationService.end).pipe(filter_filter(event=>!isNaN(event.index))).subscribe(event=>this.selectionService.select(event.index)),this.openSubscription=this.navigationService.open.subscribe(()=>this.togglePopup(!0)),this.closeSubscription=this.navigationService.close.subscribe(()=>{this.togglePopup(!1),this.focus()}),this.enterSubscription=this.navigationService.enter.pipe(tap(event=>event.originalEvent.preventDefault())).subscribe(this.handleEnter.bind(this)),this.escSubscription=this.navigationService.esc.subscribe(this.handleEscape.bind(this)),this.filterBlurredSubscription=this.filterBlurred.pipe(concatMap(()=>interval_interval(10).pipe(take_take(1),takeUntil(this.wrapperFocused)))).subscribe(()=>{this.wrapperBlurred.emit()}),this._zone.runOutsideAngular(()=>{this.componentBlurredSubscription=merge(this.wrapperBlurred.pipe(concatMap(()=>interval_interval(10).pipe(take_take(1),takeUntil(this.filterFocused)))),this.navigationService.tab).pipe(tap(event=>event instanceof NavigationEvent&&this.focus()),filter_filter(()=>this.isFocused)).subscribe(()=>this._zone.run(()=>{this.componentBlur()}))}))}unsubscribeEvents(){isDocumentAvailable()&&(this.navigationSubscription.unsubscribe(),this.openSubscription.unsubscribe(),this.closeSubscription.unsubscribe(),this.enterSubscription.unsubscribe(),this.escSubscription.unsubscribe(),this.componentBlurredSubscription.unsubscribe(),this.filterBlurredSubscription.unsubscribe(),this.selectionSubscription&&this.selectionSubscription.unsubscribe())}itemFromEvent(event){const index=event.indices[0];let dataItem=this.dataService.itemAt(index);dataItem=dist_fesm2015_isPresent(dataItem)?dataItem:this.currentOrDefault(index);const value=this.prop(this.valueField,this.valuePrimitive)(dataItem);return{dataItem:dataItem,index:index,newSelection:event.newSelection,value:value}}currentOrDefault(selectedIndex){return dist_fesm2015_isPresent(this.dataItem)&&-1!==selectedIndex?this.dataItem:this.defaultItem}firstFocusableIndex(index){const maxIndex=this.dataService.itemsCount-1;return this.disabledItemsService.isIndexDisabled(index)?index<maxIndex?this.firstFocusableIndex(index+1):void 0:index}handleEnter(){this.isOpen?(this.selectionService.change(this.selectionService.focused),this.focus()):this.togglePopup(!0)}handleEscape(){dist_fesm2015_isPresent(this.selectionService.selected[0])?this.selectionService.change(this.selectionService.selected[0]):(this.togglePopup(!1),this.clearFilter()),this.focus()}clearFilter(){this.filterable&&this.filterText&&(this.filterText="",this.cdr.markForCheck(),this.filterChange.emit(this.filterText))}verifySettings(newValue){const valueOrText=!dist_fesm2015_isPresent(this.valueField)!=!dist_fesm2015_isPresent(this.textField);if(isDevMode()){if(this.defaultItem&&this.valueField&&"object"!=typeof this.defaultItem)throw new Error("defaultItem and data items must be of same type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/api/DropDownListComponent/#toc-defaultitem");if(!0===this.valuePrimitive&&dist_fesm2015_isPresent(newValue)&&"object"==typeof newValue)throw new Error("Expected value of primitive type. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-value-selection");if(!1===this.valuePrimitive&&dist_fesm2015_isPresent(newValue)&&"object"!=typeof newValue)throw new Error("Expected value of type Object. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-value-selection");if(valueOrText)throw new Error("Expected textField and valueField options to be set. See http://www.telerik.com/kendo-angular-ui/components/dropdowns/dropdownlist/#toc-bind-to-arrays-of-complex-data")}}componentBlur(){this.isFocused=!1,dist_fesm2015_isPresent(this.selectionService.selected[0])?this.selectionService.change(this.selectionService.selected[0]):(this.togglePopup(!1),this.clearFilter()),this.onBlur.emit(),this.onTouchedCallback()}onMouseDown(event){"input"!==event.target.tagName.toLowerCase()&&event.preventDefault()}onKeyPress(event){if(0===event.which||event.keyCode===fesm2015_Keys.enter)return;let character=String.fromCharCode(event.charCode||event.keyCode);this.ignoreCase&&(character=character.toLowerCase())," "===character&&event.preventDefault(),this.word+=character,this.last=character,this.search()}search(){clearTimeout(this.typingTimeout),this.filterable||(this.typingTimeout=setTimeout(()=>{this.word=""},this.delay),this.selectNext())}selectNext(){let data=this.dataService.filter(item=>dist_fesm2015_isPresent(item)&&!item.header&&!this.disabledItemsService.isItemDisabled(item)).map(item=>this.dataService.grouped?{item:item.value,itemIndex:item.offsetIndex}:{item:item,itemIndex:this.dataService.indexOf(item)});const isInLoop=((word,character)=>{for(let idx=0;idx<word.length;idx++)if(word.charAt(idx)!==character)return!1;return!0})(this.word,this.last);let text,index,defaultItem,dataLength=data.length,hasSelected=!isNaN(this.selectionService.selected[0]),startIndex=hasSelected?this.selectionService.selected[0]:0;for(this.defaultItem&&!this.disabledItemsService.isItemDisabled(this.defaultItem)&&(defaultItem={item:this.defaultItem,itemIndex:-1},dataLength+=1,startIndex+=1),startIndex+=isInLoop&&hasSelected?1:0,data=((data,splitIndex,defaultItem)=>{let result=data;return defaultItem&&(result=[defaultItem].concat(result)),result.slice(splitIndex).concat(result.slice(0,splitIndex))})(data,startIndex,defaultItem),index=0;index<dataLength;index++){text=fesm2015_getter(data[index].item,this.textField);const loopMatch=Boolean(isInLoop&&matchText(text,this.last,this.ignoreCase)),nextMatch=Boolean(matchText(text,this.word,this.ignoreCase));if(loopMatch||nextMatch){index=data[index].itemIndex;break}}index!==dataLength&&this.navigate(index)}emitChange(value){this.onChangeCallback(value),this.valueChange.emit(value)}navigate(index){this.selectionService.select(index)}prop(field,usePrimitive){return dataItem=>{return dist_fesm2015_isPresent(dataItem)?usePrimitive?field&&dist_fesm2015_isPresent(value=dataItem)&&"object"==typeof value?dataItem[field]:dataItem:dataItem[field]:null;var value}}findDataItem({primitive:primitive,valueField:valueField,value:value}){const result={dataItem:null,index:-1},prop=this.prop(valueField,primitive);let comparer;comparer=this.dataService.grouped?element=>prop(element.value)===prop(value):element=>prop(element)===prop(value);const index=this.dataService.findIndex(comparer);return result.dataItem=this.dataService.itemAt(index),result.index=index,result}setState(){const value=this.value,valueField=this.valueField,textField=this.textField,primitive=this.valuePrimitive;if(this.defaultItem){const defaultValue=this.prop(valueField,primitive)(this.defaultItem),currentValue=this.prop(valueField,primitive)(value);if(!dist_fesm2015_isPresent(value)||currentValue===defaultValue)return this.updateState({dataItem:this.defaultItem,confirm:!0}),this.resetSelection(-1),void(this.filterable&&this.filterText&&this.dataService.itemsCount&&(this.selectionService.focused=this.firstFocusableIndex(0)))}const resolved=this.findDataItem({primitive:primitive,valueField:valueField,value:value}),ofSameType=!(primitive&&textField);resolved.dataItem?(this.updateState({dataItem:resolved.dataItem,confirm:!0}),this.resetSelection(resolved.index)):dist_fesm2015_isPresent(value)&&ofSameType?(this.updateState({dataItem:value}),this.resetSelection()):this._previousDataItem?(this.updateState({dataItem:this._previousDataItem}),this.resetSelection()):(this.clearState(),this.resetSelection())}handleFilter(event){this.filterChange.emit(event.target.value)}pageChange(event){this.virtual.skip=event.skip}setMessages(){this._zone.runOutsideAngular(()=>{clearTimeout(this.messagesTimeout),this.messagesTimeout=setTimeout(()=>{this.noDataText=this.localization.get("noDataText"),this.cdr.detectChanges()})})}assignAriaDescribedBy(){const trimmed=(this.wrapper.nativeElement.getAttribute("aria-describedby")||"").replace(this.valueLabelId,"").trim();this.valueLabelId=fesm2015_guid();const newValue=`${this.valueLabelId} ${trimmed}`.trim();this.renderer.setAttribute(this.wrapper.nativeElement,"aria-describedby",newValue)}}return DropDownListComponent.fac=function(t){return new(t||DropDownListComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_PopupService),directiveInject(fesm2015_SelectionService),directiveInject(_ivy_ngcc_dist_fesm2015_NavigationService),directiveInject(fesm2015_DisabledItemsService),directiveInject(fesm2015_DataService),directiveInject(NgZone),directiveInject(Renderer2),directiveInject(ElementRef),directiveInject(ChangeDetectorRef),directiveInject(TOUCH_ENABLED,8))},DropDownListComponent.cmp=defineComponent({type:DropDownListComponent,selectors:[["kendo-dropdownlist"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&(contentQuery(dirIndex,fesm2015_ItemTemplateDirective,!0),contentQuery(dirIndex,fesm2015_GroupTemplateDirective,!0),contentQuery(dirIndex,fesm2015_FixedGroupTemplateDirective,!0),contentQuery(dirIndex,fesm2015_ValueTemplateDirective,!0),contentQuery(dirIndex,fesm2015_HeaderTemplateDirective,!0),contentQuery(dirIndex,fesm2015_FooterTemplateDirective,!0),contentQuery(dirIndex,fesm2015_NoDataTemplateDirective,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.itemTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.groupTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.fixedGroupTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.valueTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.headerTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.footerTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.noDataTemplate=_t.first))},viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(dist_fesm2015_c9,!0,ViewContainerRef),viewQuery(fesm2015_c10,!0),staticViewQuery(_c24,!0),viewQuery(fesm2015_c11,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.container=_t.first),queryRefresh(_t=loadQuery())&&(ctx.popupTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.wrapper=_t.first),queryRefresh(_t=loadQuery())&&(ctx.optionsList=_t.first))},hostVars:7,hostBindings:function(rf,ctx){2&rf&&(attribute("dir",ctx.dir),classProp("k-widget",ctx.widgetClasses)("k-dropdown",ctx.widgetClasses)("k-header",ctx.widgetClasses))},inputs:{focusableId:"focusableId",listHeight:"listHeight",disabled:"disabled",readonly:"readonly",filterable:"filterable",ignoreCase:"ignoreCase",delay:"delay",tabindex:"tabindex",data:"data",value:"value",popupSettings:"popupSettings",itemDisabled:"itemDisabled",virtual:"virtual",tabIndex:"tabIndex",valuePrimitive:"valuePrimitive",iconClass:"iconClass",loading:"loading",textField:"textField",valueField:"valueField",defaultItem:"defaultItem"},outputs:{valueChange:"valueChange",filterChange:"filterChange",selectionChange:"selectionChange",open:"open",close:"close",onFocus:"focus",onBlur:"blur"},exportAs:["kendoDropDownList"],features:[ProvidersFeature([DROPDOWNLIST_VALUE_ACCESSOR,fesm2015_DataService,fesm2015_SelectionService,_ivy_ngcc_dist_fesm2015_NavigationService,fesm2015_DisabledItemsService,fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.dropdownlist"},{provide:FilterableDropDownComponentBase,useExisting:forwardRef(()=>DropDownListComponent)},{provide:KendoInput,useExisting:forwardRef(()=>DropDownListComponent)}]),NgOnChangesFeature],decls:14,vars:20,consts:[["kendoDropDownListLocalizedMessages","",6,"noDataText"],["unselectable","on","role","listbox","aria-haspopup","listbox",3,"id","ngClass","focus","blur","keydown","keypress","click"],["wrapper",""],["unselectable","on",1,"k-input",3,"id"],[4,"ngIf"],[3,"ngIf"],["unselectable","on",1,"k-select"],["unselectable","on",1,"k-icon",3,"ngClass"],["popupTemplate",""],["container",""],[3,"templateContext"],[3,"id","optionPrefix","data","textField","valueField","template","groupTemplate","fixedGroupTemplate","height","show","virtual","pageChange"],["optionsList",""],["class","k-nodata",4,"ngIf"],[1,"k-list-filter",3,"click"],["tabindex","-1",1,"k-textbox",3,"filterInput","dir","ngModel","ngModelChange","keydown","input","focus","blur"],["unselectable","on",1,"k-icon","k-i-search"],["kendoDropDownsSelectable","",1,"k-list-optionlabel",3,"ngClass","index"],[1,"k-nodata"],[3,"ngIf","templateContext"],[3,"resize"]],template:function(rf,ctx){1&rf&&(elementContainerStart(0,0),i18nAttributes(1,_c27),elementContainerEnd(),elementStart(2,"span",1,2),listener("focus",(function(){return ctx.focusComponent()}))("blur",(function(){return ctx.blurComponent()}))("keydown",(function($event){return ctx.keydown($event)}))("keypress",(function($event){return ctx.keypress($event)}))("click",(function(){return ctx.click()})),elementStart(4,"span",3),template(5,DropDownListComponent_5_Template,1,4,void 0,4),template(6,DropDownListComponent_ng_template_6_Template,1,1,"ng-template",5),elementEnd(),elementStart(7,"span",6),element(8,"span",7),elementEnd(),template(9,DropDownListComponent_ng_template_9_Template,8,17,"ng-template",null,8,templateRefExtractor),elementEnd(),template(11,DropDownListComponent_ng_template_11_Template,1,0,"ng-template",5),elementContainer(12,null,9)),2&rf&&(advance(2),property("id",ctx.focusableId)("ngClass",pureFunction3(16,_c29,!ctx.disabled,ctx.disabled,ctx.isFocused)),attribute("dir",ctx.direction)("readonly",ctx.readonly)("tabindex",ctx.widgetTabIndex)("aria-disabled",ctx.disabled)("aria-readonly",ctx.readonly)("aria-expanded",ctx.ariaExpanded)("aria-owns",ctx.ariaOwns)("aria-activedescendant",ctx.ariaActivedescendant)("aria-label",ctx.noDataLabel),advance(2),property("id",ctx.valueLabelId),advance(1),property("ngIf",ctx.valueTemplate),advance(1),property("ngIf",!ctx.valueTemplate),advance(2),property("ngClass",ctx.buttonClasses),advance(3),property("ngIf",ctx.isOpen))},directives:function(){return[dist_fesm2015_LocalizedMessagesDirective,common_NgClass,common_NgIf,dist_fesm2015_TemplateContextDirective,dist_fesm2015_ListComponent,forms_DefaultValueAccessor,fesm2015_FilterInputDirective,forms_NgControlStatus,forms_NgModel,fesm2015_SelectableDirective,fesm2015_ResizeSensorComponent]},encapsulation:2}),DropDownListComponent})(),dist_fesm2015_TemplateContextDirective=(()=>{class TemplateContextDirective{constructor(viewContainerRef){this.viewContainerRef=viewContainerRef}set templateContext(context){this.insertedViewRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.insertedViewRef)),this.insertedViewRef=void 0),context.templateRef&&(this.insertedViewRef=this.viewContainerRef.createEmbeddedView(context.templateRef,context))}}return TemplateContextDirective.fac=function(t){return new(t||TemplateContextDirective)(directiveInject(ViewContainerRef))},TemplateContextDirective.dir=defineDirective({type:TemplateContextDirective,selectors:[["","templateContext",""]],inputs:{templateContext:"templateContext"}}),TemplateContextDirective})(),fesm2015_SelectableDirective=(()=>{class SelectableDirective{constructor(selectionService){this.multipleSelection=!1,this.selectionService=selectionService}get focusedClassName(){return this.selectionService.isFocused(this.index)}get selectedClassName(){return this.selectionService.isSelected(this.index)}onClick(event){event.stopPropagation(),this.multipleSelection?this.selectionService.isSelected(this.index)?this.selectionService.unselect(this.index):this.selectionService.add(this.index):this.selectionService.change(this.index)}}return SelectableDirective.fac=function(t){return new(t||SelectableDirective)(directiveInject(fesm2015_SelectionService))},SelectableDirective.dir=defineDirective({type:SelectableDirective,selectors:[["","kendoDropDownsSelectable",""]],hostVars:9,hostBindings:function(rf,ctx){1&rf&&listener("click",(function($event){return ctx.onClick($event)})),2&rf&&(attribute("index",ctx.index),styleProp("height",ctx.height,"px")("min-height",ctx.height,"px"),classProp("k-state-focused",ctx.focusedClassName)("k-state-selected",ctx.selectedClassName))},inputs:{multipleSelection:"multipleSelection",index:"index",height:"height"}}),SelectableDirective})(),fesm2015_Messages=(()=>{class Messages extends fesm2015_ComponentMessages{}return Messages.fac=function(t){return Messages_BaseFactory(t||Messages)},Messages.dir=defineDirective({type:Messages,inputs:{noDataText:"noDataText",clearTitle:"clearTitle"},features:[InheritDefinitionFeature]}),Messages})();const Messages_BaseFactory=getInheritedFactory(fesm2015_Messages);let dist_fesm2015_LocalizedMessagesDirective=(()=>{class LocalizedMessagesDirective extends fesm2015_Messages{constructor(service){super(),this.service=service}}return LocalizedMessagesDirective.fac=function(t){return new(t||LocalizedMessagesDirective)(directiveInject(fesm2015_LocalizationService))},LocalizedMessagesDirective.dir=defineDirective({type:LocalizedMessagesDirective,selectors:[["","kendoDropDownListLocalizedMessages",""],["","kendoComboBoxLocalizedMessages",""],["","kendoAutoCompleteLocalizedMessages",""],["","kendoMultiSelectLocalizedMessages",""]],features:[ProvidersFeature([{provide:fesm2015_Messages,useExisting:forwardRef(()=>LocalizedMessagesDirective)}]),InheritDefinitionFeature]}),LocalizedMessagesDirective})(),fesm2015_SharedDirectivesModule=(()=>{class SharedDirectivesModule{}return SharedDirectivesModule.mod=defineNgModule({type:SharedDirectivesModule}),SharedDirectivesModule.inj=defineInjector({factory:function(t){return new(t||SharedDirectivesModule)}}),SharedDirectivesModule})(),fesm2015_SharedModule=(()=>{class SharedModule{}return SharedModule.mod=defineNgModule({type:SharedModule}),SharedModule.inj=defineInjector({factory:function(t){return new(t||SharedModule)},imports:[[common_CommonModule,forms_FormsModule,fesm2015_PopupModule,fesm2015_ResizeSensorModule,fesm2015_SharedDirectivesModule],common_CommonModule,forms_FormsModule,fesm2015_PopupModule,fesm2015_ResizeSensorModule,fesm2015_SharedDirectivesModule]}),SharedModule})(),fesm2015_AutoCompleteModule=(()=>{class AutoCompleteModule{}return AutoCompleteModule.mod=defineNgModule({type:AutoCompleteModule}),AutoCompleteModule.inj=defineInjector({factory:function(t){return new(t||AutoCompleteModule)},imports:[[fesm2015_SharedModule],fesm2015_SharedDirectivesModule]}),AutoCompleteModule})();const fesm2015_agentRxs={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},fesm2015_osRxs={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},fesm2015_desktopBrowserRxs={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i},fesm2015_mobileBrowserRxs={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i},fesm2015_testRx=(agent,rxs,dflt)=>{for(let rx in rxs)if(rxs.hasOwnProperty(rx)&&rxs[rx].test(agent))return rx;return void 0!==dflt?dflt:agent},fesm2015_detectMobileOS=ua=>{let minorVersion,match=[];for(let agent in fesm2015_agentRxs)if(fesm2015_agentRxs.hasOwnProperty(agent)){if(match=ua.match(fesm2015_agentRxs[agent]),!match)continue;if("windows"===agent&&"plugins"in window.navigator)return null;const os={};return os.device=agent,os.browser=fesm2015_testRx(ua,fesm2015_mobileBrowserRxs,"default"),os.name=fesm2015_testRx(agent,fesm2015_osRxs),os[os.name]=!0,os.majorVersion=match[2],os.minorVersion=match[3].replace("_","."),minorVersion=os.minorVersion.replace(".","").substr(0,2),os.flatVersion=os.majorVersion+minorVersion+new Array(3-(minorVersion.length<3?minorVersion.length:2)).join("0"),os.cordova=void 0!==typeof window.PhoneGap||void 0!==typeof window.cordova,os.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||os.cordova,os}return null},fesm2015_detectDesktopBrowser=ua=>{let browserInfo=null,match=[];for(let agent in fesm2015_desktopBrowserRxs)if(fesm2015_desktopBrowserRxs.hasOwnProperty(agent)&&(match=ua.match(fesm2015_desktopBrowserRxs[agent]),match)){browserInfo={},browserInfo[agent]=!0,browserInfo[match[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,browserInfo.version=parseInt(document.documentMode||match[2],10);break}return browserInfo},fesm2015_userAgent=fesm2015_isWindowAvailable()&&window.navigator?window.navigator.userAgent:null,fesm2015_browser=fesm2015_userAgent?fesm2015_detectDesktopBrowser(fesm2015_userAgent):null,fesm2015_mobileOS=fesm2015_userAgent?fesm2015_detectMobileOS(fesm2015_userAgent):null,fesm2015_touch=fesm2015_isWindowAvailable()&&"ontouchstart"in window,fesm2015_msPointers=fesm2015_browser&&!fesm2015_browser.chrome&&window.MSPointerEvent,fesm2015_pointers=fesm2015_browser&&!fesm2015_browser.chrome&&window.PointerEvent,fesm2015_touchEnabled=fesm2015_mobileOS&&(fesm2015_touch||fesm2015_msPointers||fesm2015_pointers),dist_fesm2015_0$1=fesm2015_touchEnabled;let fesm2015_ComboBoxModule=(()=>{class ComboBoxModule{}return ComboBoxModule.mod=defineNgModule({type:ComboBoxModule}),ComboBoxModule.inj=defineInjector({factory:function(t){return new(t||ComboBoxModule)},providers:[{provide:TOUCH_ENABLED,useValue:dist_fesm2015_0$1}],imports:[[fesm2015_SharedModule],fesm2015_SharedDirectivesModule]}),ComboBoxModule})(),fesm2015_FilterInputDirective=(()=>{class FilterInputDirective{constructor(element,zone){this.element=element,this.zone=zone}ngOnChanges(){this.focused&&this.nextTick(()=>this.element.nativeElement.focus())}nextTick(fn){this.zone.runOutsideAngular(()=>setTimeout(fn))}}return FilterInputDirective.fac=function(t){return new(t||FilterInputDirective)(directiveInject(ElementRef),directiveInject(NgZone))},FilterInputDirective.dir=defineDirective({type:FilterInputDirective,selectors:[["","filterInput",""]],inputs:{focused:["filterInput","focused"]},features:[NgOnChangesFeature]}),FilterInputDirective})(),fesm2015_DropDownListModule=(()=>{class DropDownListModule{}return DropDownListModule.mod=defineNgModule({type:DropDownListModule}),DropDownListModule.inj=defineInjector({factory:function(t){return new(t||DropDownListModule)},imports:[[fesm2015_SharedModule],fesm2015_SharedDirectivesModule]}),DropDownListModule})();const fesm2015_0$2=fesm2015_touchEnabled;let fesm2015_MultiSelectModule=(()=>{class MultiSelectModule{}return MultiSelectModule.mod=defineNgModule({type:MultiSelectModule}),MultiSelectModule.inj=defineInjector({factory:function(t){return new(t||MultiSelectModule)},providers:[{provide:TOUCH_ENABLED,useValue:fesm2015_0$2}],imports:[[fesm2015_SharedModule],fesm2015_SharedDirectivesModule]}),MultiSelectModule})(),fesm2015_DropDownsModule=(()=>{class DropDownsModule{}return DropDownsModule.mod=defineNgModule({type:DropDownsModule}),DropDownsModule.inj=defineInjector({factory:function(t){return new(t||DropDownsModule)},imports:[fesm2015_AutoCompleteModule,fesm2015_ComboBoxModule,fesm2015_DropDownListModule,fesm2015_MultiSelectModule]}),DropDownsModule})();const es2015_util_isWindowAvailable=()=>"undefined"!=typeof window,support_agentRxs={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},support_osRxs={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},support_desktopBrowserRxs={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i},support_mobileBrowserRxs={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i},support_testRx=(agent,rxs,dflt)=>{for(let rx in rxs)if(rxs.hasOwnProperty(rx)&&rxs[rx].test(agent))return rx;return void 0!==dflt?dflt:agent},es2015_support_userAgent=es2015_util_isWindowAvailable()&&window.navigator?window.navigator.userAgent:null,support_browser=es2015_support_userAgent?(ua=>{let browserInfo=null,match=[];for(let agent in support_desktopBrowserRxs)if(support_desktopBrowserRxs.hasOwnProperty(agent)&&(match=ua.match(support_desktopBrowserRxs[agent]),match)){browserInfo={},browserInfo[agent]=!0,browserInfo[match[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,browserInfo.version=parseInt(document.documentMode||match[2],10);break}return browserInfo})(es2015_support_userAgent):null,support_mobileOS=es2015_support_userAgent?(ua=>{let minorVersion,match=[];for(let agent in support_agentRxs)if(support_agentRxs.hasOwnProperty(agent)){if(match=ua.match(support_agentRxs[agent]),!match)continue;if("windows"===agent&&"plugins"in window.navigator)return null;const os={};return os.device=agent,os.browser=support_testRx(ua,support_mobileBrowserRxs,"default"),os.name=support_testRx(agent,support_osRxs),os[os.name]=!0,os.majorVersion=match[2],os.minorVersion=match[3].replace("_","."),minorVersion=os.minorVersion.replace(".","").substr(0,2),os.flatVersion=os.majorVersion+minorVersion+new Array(3-(minorVersion.length<3?minorVersion.length:2)).join("0"),os.cordova=void 0!==typeof window.PhoneGap||void 0!==typeof window.cordova,os.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||os.cordova,os}return null})(es2015_support_userAgent):null;es2015_util_isWindowAvailable()&&window,support_browser&&!support_browser.chrome&&window,support_browser&&!support_browser.chrome&&window;var observers_mixin={extend:function(proto){for(let method in this)"extend"!==method&&(proto[method]=this[method])},observers:function(){return this._observers=this._observers||[],this._observers},addObserver:function(element){return this._observers?this._observers.push(element):this._observers=[element],this},removeObserver:function(element){const observers=this.observers(),index=observers.indexOf(element);return-1!==index&&observers.splice(index,1),this},trigger:function(methodName,event){const observers=this._observers;if(observers&&!this._suspended)for(let idx=0;idx<observers.length;idx++){let observer=observers[idx];observer[methodName]&&observer[methodName](event)}return this},optionsChange:function(e={}){e.element=this,this.trigger("optionsChange",e)},geometryChange:function(){this.trigger("geometryChange",{element:this})},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=Math.max((this._suspended||0)-1,0),this},_observerField:function(field,value){this[field]&&this[field].removeObserver(this),this[field]=value,value.addObserver(this)}};const animation_frame_wnd="undefined"!=typeof window?window:{},animationFrame=animation_frame_wnd.requestAnimationFrame||animation_frame_wnd.webkitRequestAnimationFrame||animation_frame_wnd.mozRequestAnimationFrame||animation_frame_wnd.oRequestAnimationFrame||animation_frame_wnd.msRequestAnimationFrame||function(callback){setTimeout(callback,1e3/60)};function animationFrameProxy(callback){animationFrame.call(animation_frame_wnd,callback)}class Class{}const ampRegExp=/&/g,ltRegExp=/</g,quoteRegExp=/"/g,aposRegExp=/'/g,gtRegExp=/>/g;function htmlEncode(value){return String(value).replace(ampRegExp,"&amp;").replace(ltRegExp,"&lt;").replace(gtRegExp,"&gt;").replace(quoteRegExp,"&quot;").replace(aposRegExp,"&#39;")}function observable_isFunction(value){return"function"==typeof value}function getArray(value){return"string"==typeof value?[value]:value}function observable_preventDefault(){this._defaultPrevented=!0}function isDefaultPrevented(){return!0===this._defaultPrevented}var common_observable=class extends Class{constructor(){super(),this._events={}}bind(eventName,handlers,one){const eventNames=getArray(eventName),handlersIsFunction=observable_isFunction(handlers),length=eventNames.length;if(void 0===handlers){for(let field in eventName)this.bind(field,eventName[field]);return this}for(let idx=0;idx<length;idx++){const eventName=eventNames[idx];let handler=handlersIsFunction?handlers:handlers[eventName];if(handler){if(one){const original=handler;handler=()=>{this.unbind(eventName,handler),original.apply(this,arguments)},handler.original=original}(this._events[eventName]=this._events[eventName]||[]).push(handler)}}return this}one(eventNames,handlers){return this.bind(eventNames,handlers,!0)}first(eventName,handlers){const eventNames=getArray(eventName),handlersIsFunction=observable_isFunction(handlers);for(let idx=0,length=eventNames.length;idx<length;idx++){const eventName=eventNames[idx],handler=handlersIsFunction?handlers:handlers[eventName];handler&&(this._events[eventName]=this._events[eventName]||[]).unshift(handler)}return this}trigger(eventName,e={}){let events=this._events[eventName];if(events){const length=events.length;e.sender=this,e._defaultPrevented=!1,e.preventDefault=observable_preventDefault,e.isDefaultPrevented=isDefaultPrevented,events=events.slice();for(let idx=0;idx<length;idx++)events[idx].call(this,e);return!0===e._defaultPrevented}return!1}unbind(eventName,handler){const events=this._events[eventName];if(void 0===eventName)this._events={};else if(events)if(handler)for(let idx=events.length-1;idx>=0;idx--)events[idx]!==handler&&events[idx].original!==handler||events.splice(idx,1);else this._events[eventName]=[];return this}};const support={};"undefined"!=typeof window&&(support.browser=function(userAgent){const browserRxs={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};let browser;for(let agent in browserRxs)if(browserRxs.hasOwnProperty(agent)){const match=userAgent.match(browserRxs[agent]);if(match){browser={},browser[agent]=!0,browser[match[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,browser.version=parseInt(document.documentMode||match[2],10);break}}return browser}(window.navigator.userAgent));var common_support=support;function throttle_now(){return(new Date).getTime()}var named_colors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};const parse_color_browser=common_support.browser;let matchNamedColor=color=>{const colorNames=Object.keys(named_colors);colorNames.push("transparent");const regexp=new RegExp("^("+colorNames.join("|")+")(\\W|$)","i");return matchNamedColor=color=>regexp.exec(color),regexp.exec(color)};class parse_color_BaseColor extends Class{constructor(){super()}toHSV(){return this}toRGB(){return this}toHex(){return this.toBytes().toHex()}toBytes(){return this}toCss(){return"#"+this.toHex()}toCssRgba(){const rgb=this.toBytes();return`rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${parseFloat(Number(this.a).toFixed(3))})`}toDisplay(){return parse_color_browser.msie&&parse_color_browser.version<9?this.toCss():this.toCssRgba()}equals(c){return c===this||null!==c&&this.toCssRgba()===parseColor(c).toCssRgba()}diff(other){if(null===other)return NaN;const c1=this.toBytes(),c2=other.toBytes();return Math.sqrt(Math.pow(.3*(c1.r-c2.r),2)+Math.pow(.59*(c1.g-c2.g),2)+Math.pow(.11*(c1.b-c2.b),2))}clone(){let c=this.toBytes();return c===this&&(c=new Bytes(c.r,c.g,c.b,c.a)),c}}class RGB extends parse_color_BaseColor{constructor(r,g,b,a){super(),this.r=r,this.g=g,this.b=b,this.a=a}toHSV(){const{r:r,g:g,b:b}=this,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min,v=max;let h,s;return 0===delta?new HSV(0,0,v,this.a):(0!==max?(s=delta/max,h=r===max?(g-b)/delta:g===max?2+(b-r)/delta:4+(r-g)/delta,h*=60,h<0&&(h+=360)):(s=0,h=-1),new HSV(h,s,v,this.a))}toHSL(){const{r:r,g:g,b:b}=this,max=Math.max(r,g,b),min=Math.min(r,g,b);let h,s,l=(max+min)/2;if(max===min)h=s=0;else{const d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}}return new HSL(60*h,100*s,100*l,this.a)}toBytes(){return new Bytes(255*this.r,255*this.g,255*this.b,this.a)}}class Bytes extends RGB{constructor(r,g,b,a){super(Math.round(r),Math.round(g),Math.round(b),a)}toRGB(){return new RGB(this.r/255,this.g/255,this.b/255,this.a)}toHSV(){return this.toRGB().toHSV()}toHSL(){return this.toRGB().toHSL()}toHex(){return hex(this.r,2)+hex(this.g,2)+hex(this.b,2)}toBytes(){return this}}function hex(n,width,pad="0"){let result=n.toString(16);for(;width>result.length;)result=pad+result;return result}class HSV extends parse_color_BaseColor{constructor(h,s,v,a){super(),this.h=h,this.s=s,this.v=v,this.a=a}toRGB(){let r,g,b,{h:h,s:s,v:v}=this;if(0===s)r=g=b=v;else{h/=60;const i=Math.floor(h),f=h-i,p=v*(1-s),q=v*(1-s*f),t=v*(1-s*(1-f));switch(i){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;default:r=v,g=p,b=q}}return new RGB(r,g,b,this.a)}toHSL(){return this.toRGB().toHSL()}toBytes(){return this.toRGB().toBytes()}}class HSL extends parse_color_BaseColor{constructor(h,s,l,a){super(),this.h=h,this.s=s,this.l=l,this.a=a}toRGB(){let r,g,b,h=this.h/360,s=this.s/100,l=this.l/100;if(0===s)r=g=b=l;else{const q=l<.5?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return new RGB(r,g,b,this.a)}toHSV(){return this.toRGB().toHSV()}toBytes(){return this.toRGB().toBytes()}}function hue2rgb(p,q,s){let t=s;return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p}function parseColor(value,safe){let m,ret;if(null==value||"none"===value)return null;if(value instanceof parse_color_BaseColor)return value;let color=value.toLowerCase();if(m=matchNamedColor(color))return color="transparent"===m[1]?new RGB(1,1,1,0):parseColor(named_colors[m[1]],safe),color.match=[m[1]],color;if((m=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(color))?ret=new Bytes(parseInt(m[1],16),parseInt(m[2],16),parseInt(m[3],16),1):(m=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(color))?ret=new Bytes(parseInt(m[1]+m[1],16),parseInt(m[2]+m[2],16),parseInt(m[3]+m[3],16),1):(m=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(color))?ret=new Bytes(parseInt(m[1],10),parseInt(m[2],10),parseInt(m[3],10),1):(m=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(color))?ret=new Bytes(parseInt(m[1],10),parseInt(m[2],10),parseInt(m[3],10),parseFloat(m[4])):(m=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(color))?ret=new RGB(parseFloat(m[1])/100,parseFloat(m[2])/100,parseFloat(m[3])/100,1):(m=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(color))&&(ret=new RGB(parseFloat(m[1])/100,parseFloat(m[2])/100,parseFloat(m[3])/100,parseFloat(m[4]))),ret)ret.match=m;else if(!safe)throw new Error("Cannot parse color: "+color);return ret}function append(first,second){return first.push.apply(first,second),first}const arabic_to_roman_literals={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};function arabicToRoman(n){const values=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1];let roman="";for(;n>0;)n<values[0]?values.shift():(roman+=arabic_to_roman_literals[values[0]],n-=values[0]);return roman}function createPromise(){let resolveFn,rejectFn;const promise=new Promise((resolve,reject)=>{resolveFn=data=>(promise._state="resolved",resolve(data),promise),rejectFn=data=>(promise._state="rejected",reject(data),promise)});return promise._state="pending",promise.resolve=resolveFn,promise.reject=rejectFn,promise.state=()=>promise._state,promise}function defined(value){return void 0!==value}let defId=1;function definitionId(){return"kdef"+defId++}const DEG_TO_RAD=Math.PI/180,MAX_NUM=Number.MAX_VALUE,MIN_NUM=-Number.MAX_VALUE;function deg(radians){return radians/DEG_TO_RAD}const fromCharCode=String.fromCharCode;function encodeUnit(codeUnit){return fromCharCode(codeUnit>>8)+fromCharCode(255&codeUnit)}function isTransparent(color){return""===color||null===color||"none"===color||"transparent"===color||!defined(color)}function util_last_last(array){if(array)return array[array.length-1]}function mergeSort(a,cmp){return a.length<2?a.slice():function sort(a){if(a.length<=1)return a;var m=Math.floor(a.length/2),left=a.slice(0,m),right=a.slice(m);return function(a,b){for(var r=[],ai=0,bi=0,i=0;ai<a.length&&bi<b.length;)cmp(a[ai],b[bi])<=0?r[i++]=a[ai++]:r[i++]=b[bi++];return ai<a.length&&r.push.apply(r,a.slice(ai)),bi<b.length&&r.push.apply(r,b.slice(bi)),r}(left=sort(left),right=sort(right))}(a)}function rad(degrees){return degrees*DEG_TO_RAD}function round(value,precision){const power=(p=precision)?Math.pow(10,p):1;var p;return Math.round(value*power)/power}function value_or_default_valueOrDefault(value,defaultValue){return defined(value)?value:defaultValue}function bindEvents(element,events){for(let eventName in events){const eventNames=eventName.trim().split(" ");for(let idx=0;idx<eventNames.length;idx++)element.addEventListener(eventNames[idx],events[eventName],!1)}}function element_styles_elementStyles(element,styles){const result={},style=window.getComputedStyle(element)||{},stylesArray=Array.isArray(styles)?styles:[styles];for(let idx=0;idx<stylesArray.length;idx++){let field=stylesArray[idx];result[field]=style[field]}return result}function getPixels(value){return isNaN(value)?value:value+"px"}function element_size_elementSize(element,size){if(!size){const size=element_styles_elementStyles(element,["width","height"]);return{width:parseInt(size.width,10),height:parseInt(size.height,10)}}{const{width:width,height:height}=size;defined(width)&&(element.style.width=getPixels(width)),defined(height)&&(element.style.height=getPixels(height))}}function unbindEvents(element,events={}){for(let name in events){const eventNames=name.trim().split(" ");for(let idx=0;idx<eventNames.length;idx++)element.removeEventListener(eventNames[idx],events[name],!1)}}var lru_cache=class extends Class{constructor(size){super(),this._size=size,this._length=0,this._map={}}put(key,value){const map=this._map,entry={key:key,value:value};map[key]=entry,this._head?(this._tail.newer=entry,entry.older=this._tail,this._tail=entry):this._head=this._tail=entry,this._length>=this._size?(map[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++}get(key){const entry=this._map[key];if(entry)return entry===this._head&&entry!==this._tail&&(this._head=entry.newer,this._head.older=null),entry!==this._tail&&(entry.older&&(entry.older.newer=entry.newer,entry.newer.older=entry.older),entry.older=this._tail,entry.newer=null,this._tail.newer=entry,this._tail=entry),entry.value}};const REPLACE_REGEX=/\r?\n|\r|\t/g;function normalizeText(text){return String(text).replace(REPLACE_REGEX," ")}const DEFAULT_OPTIONS={baselineMarkerSize:1};let defaultMeasureBox;"undefined"!=typeof document&&(defaultMeasureBox=document.createElement("div"),defaultMeasureBox.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;");var text_metrics=(()=>{class TextMetrics extends Class{constructor(options){super(),this._cache=new lru_cache(1e3),this.options=Object.assign({},DEFAULT_OPTIONS,options)}measure(text,style,options={}){if(!text)return{width:0,height:0,baseline:0};const cacheKey=function(str){let hash=2166136261;for(let i=0;i<str.length;++i)hash+=(hash<<1)+(hash<<4)+(hash<<7)+(hash<<8)+(hash<<24),hash^=str.charCodeAt(i);return hash>>>0}(text+function(object){const parts=[];for(let key in object)parts.push(key+object[key]);return parts.sort().join("")}(style)),cachedResult=this._cache.get(cacheKey);if(cachedResult)return cachedResult;const size={width:0,height:0,baseline:0},measureBox=options.box||defaultMeasureBox,baselineMarker=this._baselineMarker().cloneNode(!1);for(let key in style){let value=style[key];void 0!==value&&(measureBox.style[key]=value)}const textStr=!1!==options.normalizeText?normalizeText(text):String(text);return measureBox.textContent=textStr,measureBox.appendChild(baselineMarker),document.body.appendChild(measureBox),textStr.length&&(size.width=measureBox.offsetWidth-this.options.baselineMarkerSize,size.height=measureBox.offsetHeight,size.baseline=baselineMarker.offsetTop+this.options.baselineMarkerSize),size.width>0&&size.height>0&&this._cache.put(cacheKey,size),measureBox.parentNode.removeChild(measureBox),size}_baselineMarker(){const marker=document.createElement("div");return marker.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",marker}}return TextMetrics.current=new TextMetrics,TextMetrics})();function measureText(text,style,measureBox){return text_metrics.current.measure(text,style,measureBox)}const options_store_toString={}.toString;class options_store_OptionsStore extends Class{constructor(options,prefix=""){super(),this.prefix=prefix;for(let field in options){let member=options[field];member=this._wrap(member,field),this[field]=member}}get(field){const parts=field.split(".");let result=this;for(;parts.length&&result;)result=result[parts.shift()];return result}set(field,value){this.get(field)!==value&&(this._set(field,this._wrap(value,field)),this.optionsChange({field:this.prefix+field,value:value}))}_set(field,value){const composite=field.indexOf(".")>=0;let parentObj=this,fieldName=field;if(composite){const parts=fieldName.split(".");let prefix=this.prefix;for(;parts.length>1;){fieldName=parts.shift(),prefix+=fieldName+".";let obj=parentObj[fieldName];obj||(obj=new options_store_OptionsStore({},prefix),obj.addObserver(this),parentObj[fieldName]=obj),parentObj=obj}fieldName=parts[0]}parentObj._clear(fieldName),parentObj[fieldName]=value}_clear(field){const current=this[field];current&&current.removeObserver&&current.removeObserver(this)}_wrap(object,field){const type=options_store_toString.call(object);let wrapped=object;return null!==wrapped&&defined(wrapped)&&"[object Object]"===type&&(object instanceof options_store_OptionsStore||object instanceof Class||(wrapped=new options_store_OptionsStore(wrapped,this.prefix+field+".")),wrapped.addObserver(this)),wrapped}}observers_mixin.extend(options_store_OptionsStore.prototype);var options_store=options_store_OptionsStore;function setAccessor(field){return function(value){return this[field]!==value&&(this[field]=value,this.geometryChange()),this}}function getAccessor(field){return function(){return this[field]}}function defineAccessors(fn,fields){for(let i=0;i<fields.length;i++){let name=fields[i],capitalized=name.charAt(0).toUpperCase()+name.substring(1,name.length);fn["set"+capitalized]=setAccessor(name),fn["get"+capitalized]=getAccessor(name)}}var geometry_matrix=(()=>{class Matrix extends Class{constructor(a=0,b=0,c=0,d=0,e=0,f=0){super(),this.a=a,this.b=b,this.c=c,this.d=d,this.e=e,this.f=f}multiplyCopy(matrix){return new Matrix(this.a*matrix.a+this.c*matrix.b,this.b*matrix.a+this.d*matrix.b,this.a*matrix.c+this.c*matrix.d,this.b*matrix.c+this.d*matrix.d,this.a*matrix.e+this.c*matrix.f+this.e,this.b*matrix.e+this.d*matrix.f+this.f)}invert(){const{a:a,b:b,c:d,d:e,e:g,f:h}=this,det=a*e-b*d;return 0===det?null:new Matrix(e/det,-b/det,-d/det,a/det,(d*h-e*g)/det,(b*g-a*h)/det)}clone(){return new Matrix(this.a,this.b,this.c,this.d,this.e,this.f)}equals(other){return!!other&&this.a===other.a&&this.b===other.b&&this.c===other.c&&this.d===other.d&&this.e===other.e&&this.f===other.f}round(precision){return this.a=round(this.a,precision),this.b=round(this.b,precision),this.c=round(this.c,precision),this.d=round(this.d,precision),this.e=round(this.e,precision),this.f=round(this.f,precision),this}toArray(precision){const result=[this.a,this.b,this.c,this.d,this.e,this.f];if(defined(precision))for(let i=0;i<result.length;i++)result[i]=round(result[i],precision);return result}toString(precision,separator=","){return this.toArray(precision).join(separator)}static translate(x,y){return new Matrix(1,0,0,1,x,y)}static unit(){return new Matrix(1,0,0,1,0,0)}static rotate(angle,x,y){const matrix=new Matrix;return matrix.a=Math.cos(rad(angle)),matrix.b=Math.sin(rad(angle)),matrix.c=-matrix.b,matrix.d=matrix.a,matrix.e=x-x*matrix.a+y*matrix.b||0,matrix.f=y-y*matrix.a-x*matrix.b||0,matrix}static scale(scaleX,scaleY){return new Matrix(scaleX,0,0,scaleY,0,0)}}return Matrix.IDENTITY=Matrix.unit(),Matrix})();function toMatrix(transformation){return transformation&&"function"==typeof transformation.matrix?transformation.matrix():transformation}class point_Point extends Class{constructor(x,y){super(),this.x=x||0,this.y=y||0}equals(other){return other&&other.x===this.x&&other.y===this.y}clone(){return new point_Point(this.x,this.y)}rotate(angle,origin){const originPoint=point_Point.create(origin)||point_Point.ZERO;return this.transform(geometry_matrix.rotate(angle,originPoint.x,originPoint.y))}translate(x,y){return this.x+=x,this.y+=y,this.geometryChange(),this}translateWith(point){return this.translate(point.x,point.y)}move(x,y){return this.x=this.y=0,this.translate(x,y)}scale(scaleX,scaleY=scaleX){return this.x*=scaleX,this.y*=scaleY,this.geometryChange(),this}scaleCopy(scaleX,scaleY){return this.clone().scale(scaleX,scaleY)}transform(transformation){const matrix=toMatrix(transformation),{x:x,y:y}=this;return this.x=matrix.a*x+matrix.c*y+matrix.e,this.y=matrix.b*x+matrix.d*y+matrix.f,this.geometryChange(),this}transformCopy(transformation){const point=this.clone();return transformation&&point.transform(transformation),point}distanceTo(point){const dx=this.x-point.x,dy=this.y-point.y;return Math.sqrt(dx*dx+dy*dy)}round(digits){return this.x=round(this.x,digits),this.y=round(this.y,digits),this.geometryChange(),this}toArray(digits){const doRound=defined(digits);return[doRound?round(this.x,digits):this.x,doRound?round(this.y,digits):this.y]}toString(digits,separator=" "){let{x:x,y:y}=this;return defined(digits)&&(x=round(x,digits),y=round(y,digits)),x+separator+y}static create(arg0,arg1){if(defined(arg0))return arg0 instanceof point_Point?arg0:1===arguments.length&&2===arg0.length?new point_Point(arg0[0],arg0[1]):new point_Point(arg0,arg1)}static min(){let minX=MAX_NUM,minY=MAX_NUM;for(let i=0;i<arguments.length;i++){let point=arguments[i];minX=Math.min(point.x,minX),minY=Math.min(point.y,minY)}return new point_Point(minX,minY)}static max(){let maxX=MIN_NUM,maxY=MIN_NUM;for(let i=0;i<arguments.length;i++){const point=arguments[i];maxX=Math.max(point.x,maxX),maxY=Math.max(point.y,maxY)}return new point_Point(maxX,maxY)}static minPoint(){return new point_Point(MIN_NUM,MIN_NUM)}static maxPoint(){return new point_Point(MAX_NUM,MAX_NUM)}static get ZERO(){return new point_Point(0,0)}}defineAccessors(point_Point.prototype,["x","y"]),observers_mixin.extend(point_Point.prototype);var geometry_point=point_Point;class size_Size extends Class{constructor(width,height){super(),this.width=width||0,this.height=height||0}equals(other){return other&&other.width===this.width&&other.height===this.height}clone(){return new size_Size(this.width,this.height)}toArray(digits){const doRound=defined(digits);return[doRound?round(this.width,digits):this.width,doRound?round(this.height,digits):this.height]}static create(arg0,arg1){if(defined(arg0))return arg0 instanceof size_Size?arg0:1===arguments.length&&2===arg0.length?new size_Size(arg0[0],arg0[1]):new size_Size(arg0,arg1)}static get ZERO(){return new size_Size(0,0)}}defineAccessors(size_Size.prototype,["width","height"]),observers_mixin.extend(size_Size.prototype);var geometry_size=size_Size;class rect_Rect extends Class{constructor(origin=new geometry_point,size=new geometry_size){super(),this.setOrigin(origin),this.setSize(size)}clone(){return new rect_Rect(this.origin.clone(),this.size.clone())}equals(other){return other&&other.origin.equals(this.origin)&&other.size.equals(this.size)}setOrigin(value){return this._observerField("origin",geometry_point.create(value)),this.geometryChange(),this}getOrigin(){return this.origin}setSize(value){return this._observerField("size",geometry_size.create(value)),this.geometryChange(),this}getSize(){return this.size}width(){return this.size.width}height(){return this.size.height}topLeft(){return this.origin.clone()}bottomRight(){return this.origin.clone().translate(this.width(),this.height())}topRight(){return this.origin.clone().translate(this.width(),0)}bottomLeft(){return this.origin.clone().translate(0,this.height())}center(){return this.origin.clone().translate(this.width()/2,this.height()/2)}bbox(matrix){const tl=this.topLeft().transformCopy(matrix),tr=this.topRight().transformCopy(matrix),br=this.bottomRight().transformCopy(matrix),bl=this.bottomLeft().transformCopy(matrix);return rect_Rect.fromPoints(tl,tr,br,bl)}transformCopy(m){return rect_Rect.fromPoints(this.topLeft().transform(m),this.bottomRight().transform(m))}expand(x,y=x){return this.size.width+=2*x,this.size.height+=2*y,this.origin.translate(-x,-y),this}expandCopy(x,y){return this.clone().expand(x,y)}containsPoint(point){const origin=this.origin,bottomRight=this.bottomRight();return!(point.x<origin.x||point.y<origin.y||bottomRight.x<point.x||bottomRight.y<point.y)}_isOnPath(point,width){const rectOuter=this.expandCopy(width,width),rectInner=this.expandCopy(-width,-width);return rectOuter.containsPoint(point)&&!rectInner.containsPoint(point)}static fromPoints(){const topLeft=geometry_point.min.apply(null,arguments),bottomRight=geometry_point.max.apply(null,arguments),size=new geometry_size(bottomRight.x-topLeft.x,bottomRight.y-topLeft.y);return new rect_Rect(topLeft,size)}static union(a,b){return rect_Rect.fromPoints(geometry_point.min(a.topLeft(),b.topLeft()),geometry_point.max(a.bottomRight(),b.bottomRight()))}static intersect(a,b){const rect1={left:a.topLeft().x,top:a.topLeft().y,right:a.bottomRight().x,bottom:a.bottomRight().y},rect2={left:b.topLeft().x,top:b.topLeft().y,right:b.bottomRight().x,bottom:b.bottomRight().y};if(rect1.left<=rect2.right&&rect2.left<=rect1.right&&rect1.top<=rect2.bottom&&rect2.top<=rect1.bottom)return rect_Rect.fromPoints(new geometry_point(Math.max(rect1.left,rect2.left),Math.max(rect1.top,rect2.top)),new geometry_point(Math.min(rect1.right,rect2.right),Math.min(rect1.bottom,rect2.bottom)))}}observers_mixin.extend(rect_Rect.prototype);var geometry_rect=rect_Rect;class transformation_Transformation extends Class{constructor(matrix=geometry_matrix.unit()){super(),this._matrix=matrix}clone(){return new transformation_Transformation(this._matrix.clone())}equals(other){return other&&other._matrix.equals(this._matrix)}translate(x,y){return this._matrix=this._matrix.multiplyCopy(geometry_matrix.translate(x,y)),this._optionsChange(),this}scale(scaleX,scaleY=scaleX,origin=null){let originPoint=origin;return originPoint&&(originPoint=geometry_point.create(originPoint),this._matrix=this._matrix.multiplyCopy(geometry_matrix.translate(originPoint.x,originPoint.y))),this._matrix=this._matrix.multiplyCopy(geometry_matrix.scale(scaleX,scaleY)),originPoint&&(this._matrix=this._matrix.multiplyCopy(geometry_matrix.translate(-originPoint.x,-originPoint.y))),this._optionsChange(),this}rotate(angle,origin){const originPoint=geometry_point.create(origin)||geometry_point.ZERO;return this._matrix=this._matrix.multiplyCopy(geometry_matrix.rotate(angle,originPoint.x,originPoint.y)),this._optionsChange(),this}multiply(transformation){const matrix=toMatrix(transformation);return this._matrix=this._matrix.multiplyCopy(matrix),this._optionsChange(),this}matrix(value){return value?(this._matrix=value,this._optionsChange(),this):this._matrix}_optionsChange(){this.optionsChange({field:"transform",value:this})}}observers_mixin.extend(transformation_Transformation.prototype);var geometry_transformation=transformation_Transformation;function transform_transform(matrix){return null===matrix?null:matrix instanceof geometry_transformation?matrix:new geometry_transformation(matrix)}class element_Element extends Class{constructor(options){super(),this._initOptions(options)}_initOptions(options={}){const{clip:clip,transform:transform}=options;transform&&(options.transform=transform_transform(transform)),clip&&!clip.id&&(clip.id=definitionId()),this.options=new options_store(options),this.options.addObserver(this)}transform(value){if(!defined(value))return this.options.get("transform");this.options.set("transform",transform_transform(value))}parentTransform(){let parentMatrix,element=this;for(;element.parent;){element=element.parent;let transformation=element.transform();transformation&&(parentMatrix=transformation.matrix().multiplyCopy(parentMatrix||geometry_matrix.unit()))}if(parentMatrix)return transform_transform(parentMatrix)}currentTransform(parentTransform=this.parentTransform()){const elementMatrix=toMatrix(this.transform());let combinedMatrix,parentMatrix=toMatrix(parentTransform);if(combinedMatrix=elementMatrix&&parentMatrix?parentMatrix.multiplyCopy(elementMatrix):elementMatrix||parentMatrix,combinedMatrix)return transform_transform(combinedMatrix)}visible(value){return defined(value)?(this.options.set("visible",value),this):!1!==this.options.get("visible")}clip(value){const options=this.options;return defined(value)?(value&&!value.id&&(value.id=definitionId()),options.set("clip",value),this):options.get("clip")}opacity(value){return defined(value)?(this.options.set("opacity",value),this):value_or_default_valueOrDefault(this.options.get("opacity"),1)}clippedBBox(transformation){const bbox=this._clippedBBox(transformation);if(bbox){const clip=this.clip();return clip?geometry_rect.intersect(bbox,clip.bbox(transformation)):bbox}}containsPoint(point,parentTransform){if(this.visible()){const transform=this.currentTransform(parentTransform);let transformedPoint=point;return transform&&(transformedPoint=point.transformCopy(transform.matrix().invert())),this._hasFill()&&this._containsPoint(transformedPoint)||this._isOnPath&&this._hasStroke()&&this._isOnPath(transformedPoint)}return!1}_hasFill(){const fill=this.options.fill;return fill&&!isTransparent(fill.color)}_hasStroke(){const stroke=this.options.stroke;return stroke&&stroke.width>0&&!isTransparent(stroke.color)}_clippedBBox(transformation){return this.bbox(transformation)}}element_Element.prototype.nodeType="Element",observers_mixin.extend(element_Element.prototype);var shapes_element=element_Element;function ellipseExtremeAngles(center,rx,ry,matrix){let extremeX=0,extremeY=0;return matrix&&(extremeX=Math.atan2(matrix.c*ry,matrix.a*rx),0!==matrix.b&&(extremeY=Math.atan2(matrix.d*ry,matrix.b*rx))),{x:extremeX,y:extremeY}}const PI_DIV_2=Math.PI/2;class circle_Circle extends Class{constructor(center=new geometry_point,radius=0){super(),this.setCenter(center),this.setRadius(radius)}setCenter(value){return this._observerField("center",geometry_point.create(value)),this.geometryChange(),this}getCenter(){return this.center}equals(other){return other&&other.center.equals(this.center)&&other.radius===this.radius}clone(){return new circle_Circle(this.center.clone(),this.radius)}pointAt(angle){return this._pointAt(rad(angle))}bbox(matrix){const extremeAngles=ellipseExtremeAngles(0,this.radius,this.radius,matrix);let minPoint=geometry_point.maxPoint(),maxPoint=geometry_point.minPoint();for(let i=0;i<4;i++){let currentPointX=this._pointAt(extremeAngles.x+i*PI_DIV_2).transformCopy(matrix),currentPointY=this._pointAt(extremeAngles.y+i*PI_DIV_2).transformCopy(matrix),currentPoint=new geometry_point(currentPointX.x,currentPointY.y);minPoint=geometry_point.min(minPoint,currentPoint),maxPoint=geometry_point.max(maxPoint,currentPoint)}return geometry_rect.fromPoints(minPoint,maxPoint)}_pointAt(angle){const{center:center,radius:radius}=this;return new geometry_point(center.x+radius*Math.cos(angle),center.y+radius*Math.sin(angle))}containsPoint(point){const{center:center,radius:radius}=this;return Math.pow(point.x-center.x,2)+Math.pow(point.y-center.y,2)<=Math.pow(radius,2)}_isOnPath(point,width){const{center:center,radius:radius}=this,pointDistance=center.distanceTo(point);return radius-width<=pointDistance&&pointDistance<=radius+width}}defineAccessors(circle_Circle.prototype,["radius"]),observers_mixin.extend(circle_Circle.prototype);var circle=circle_Circle,paintable={extend:function(proto){proto.fill=this.fill,proto.stroke=this.stroke},fill:function(color,opacity){const options=this.options;if(defined(color)){if(color&&"Gradient"!==color.nodeType){const newFill={color:color};defined(opacity)&&(newFill.opacity=opacity),options.set("fill",newFill)}else options.set("fill",color);return this}return options.get("fill")},stroke:function(color,width,opacity){return defined(color)?(this.options.set("stroke.color",color),defined(width)&&this.options.set("stroke.width",width),defined(opacity)&&this.options.set("stroke.opacity",opacity),this):this.options.get("stroke")}};const IDENTITY_MATRIX_HASH=geometry_matrix.IDENTITY.toString();var measurable={extend:function(proto){proto.bbox=this.bbox,proto.geometryChange=this.geometryChange},bbox:function(transformation){const combinedMatrix=toMatrix(this.currentTransform(transformation)),matrixHash=combinedMatrix?combinedMatrix.toString():IDENTITY_MATRIX_HASH;let bbox;this._bboxCache&&this._matrixHash===matrixHash?bbox=this._bboxCache.clone():(bbox=this._bbox(combinedMatrix),this._bboxCache=bbox?bbox.clone():null,this._matrixHash=matrixHash);const strokeWidth=this.options.get("stroke.width");return strokeWidth&&bbox&&bbox.expand(strokeWidth/2),bbox},geometryChange:function(){delete this._bboxCache,this.trigger("geometryChange",{element:this})}};function geometryAccessor(name){const fieldName="_"+name;return function(value){return defined(value)?(this._observerField(fieldName,value),this.geometryChange(),this):this[fieldName]}}function defineGeometryAccessors(fn,names){for(let i=0;i<names.length;i++)fn[names[i]]=geometryAccessor(names[i])}class shapes_circle_Circle extends shapes_element{constructor(geometry=new circle,options={}){super(options),this.geometry(geometry),defined(this.options.stroke)||this.stroke("#000")}rawBBox(){return this._geometry.bbox()}_bbox(matrix){return this._geometry.bbox(matrix)}_containsPoint(point){return this.geometry().containsPoint(point)}_isOnPath(point){return this.geometry()._isOnPath(point,this.options.stroke.width/2)}}shapes_circle_Circle.prototype.nodeType="Circle",paintable.extend(shapes_circle_Circle.prototype),measurable.extend(shapes_circle_Circle.prototype),defineGeometryAccessors(shapes_circle_Circle.prototype,["geometry"]);var shapes_circle=shapes_circle_Circle;function close_close(a,b,tolerance=10){return 0===round(Math.abs(a-b),tolerance)}function closeOrLess(a,b,tolerance){return a<b||close_close(a,b,tolerance)}const arc_pow=Math.pow;class arc_Arc extends Class{constructor(center=new geometry_point,options={}){super(),this.setCenter(center),this.radiusX=options.radiusX,this.radiusY=options.radiusY||options.radiusX,this.startAngle=options.startAngle,this.endAngle=options.endAngle,this.anticlockwise=options.anticlockwise||!1,this.xRotation=options.xRotation}clone(){return new arc_Arc(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})}setCenter(value){return this._observerField("center",geometry_point.create(value)),this.geometryChange(),this}getCenter(){return this.center}pointAt(angle){const center=this.center,radian=rad(angle);return new geometry_point(center.x+this.radiusX*Math.cos(radian),center.y+this.radiusY*Math.sin(radian))}curvePoints(){const startAngle=this.startAngle,dir=this.anticlockwise?-1:1,curvePoints=[this.pointAt(startAngle)],interval=this._arcInterval(),intervalAngle=interval.endAngle-interval.startAngle,subIntervalsCount=Math.ceil(intervalAngle/45),subIntervalAngle=intervalAngle/subIntervalsCount;let transformation,currentAngle=startAngle;this.xRotation&&(transformation=transform_transform().rotate(this.xRotation,this.center));for(let i=1;i<=subIntervalsCount;i++){const nextAngle=currentAngle+dir*subIntervalAngle,points=this._intervalCurvePoints(currentAngle,nextAngle,transformation);curvePoints.push(points.cp1,points.cp2,points.p2),currentAngle=nextAngle}return curvePoints}bbox(matrix){const interval=this._arcInterval(),startAngle=interval.startAngle,endAngle=interval.endAngle,extremeAngles=ellipseExtremeAngles(0,this.radiusX,this.radiusY,matrix),extremeX=deg(extremeAngles.x),extremeY=deg(extremeAngles.y),endPoint=this.pointAt(endAngle).transformCopy(matrix);let currentAngleX=bboxStartAngle(extremeX,startAngle),currentAngleY=bboxStartAngle(extremeY,startAngle),currentPoint=this.pointAt(startAngle).transformCopy(matrix),minPoint=geometry_point.min(currentPoint,endPoint),maxPoint=geometry_point.max(currentPoint,endPoint);for(;currentAngleX<endAngle||currentAngleY<endAngle;){let currentPointX,currentPointY;currentAngleX<endAngle&&(currentPointX=this.pointAt(currentAngleX).transformCopy(matrix),currentAngleX+=90),currentAngleY<endAngle&&(currentPointY=this.pointAt(currentAngleY).transformCopy(matrix),currentAngleY+=90),currentPoint=new geometry_point(currentPointX.x,currentPointY.y),minPoint=geometry_point.min(minPoint,currentPoint),maxPoint=geometry_point.max(maxPoint,currentPoint)}return geometry_rect.fromPoints(minPoint,maxPoint)}_arcInterval(){let{startAngle:startAngle,endAngle:endAngle,anticlockwise:anticlockwise}=this;if(anticlockwise){let oldStart=startAngle;startAngle=endAngle,endAngle=oldStart}return(startAngle>endAngle||anticlockwise&&startAngle===endAngle)&&(endAngle+=360),{startAngle:startAngle,endAngle:endAngle}}_intervalCurvePoints(startAngle,endAngle,transformation){const p1=this.pointAt(startAngle),p2=this.pointAt(endAngle),p1Derivative=this._derivativeAt(startAngle),p2Derivative=this._derivativeAt(endAngle),t=(rad(endAngle)-rad(startAngle))/3,cp1=new geometry_point(p1.x+t*p1Derivative.x,p1.y+t*p1Derivative.y),cp2=new geometry_point(p2.x-t*p2Derivative.x,p2.y-t*p2Derivative.y);return transformation&&(p1.transform(transformation),p2.transform(transformation),cp1.transform(transformation),cp2.transform(transformation)),{p1:p1,cp1:cp1,cp2:cp2,p2:p2}}_derivativeAt(angle){const radian=rad(angle);return new geometry_point(-this.radiusX*Math.sin(radian),this.radiusY*Math.cos(radian))}containsPoint(point){const interval=this._arcInterval(),intervalAngle=interval.endAngle-interval.startAngle,{center:center,radiusX:radiusX,radiusY:radiusY}=this,distance=center.distanceTo(point),angleRad=Math.atan2(point.y-center.y,point.x-center.x),pointRadius=radiusX*radiusY/Math.sqrt(arc_pow(radiusX,2)*arc_pow(Math.sin(angleRad),2)+arc_pow(radiusY,2)*arc_pow(Math.cos(angleRad),2)),startPoint=this.pointAt(this.startAngle).round(10),endPoint=this.pointAt(this.endAngle).round(10),intersection=function(p0,p1,p2,p3){const s1x=p1.x-p0.x,s2x=p3.x-p2.x,s1y=p1.y-p0.y,s2y=p3.y-p2.y,nx=p0.x-p2.x,ny=p0.y-p2.y,d=s1x*s2y-s2x*s1y,s=(s1x*ny-s1y*nx)/d,t=(s2x*ny-s2y*nx)/d;if(s>=0&&s<=1&&t>=0&&t<=1)return new geometry_point(p0.x+t*s1x,p0.y+t*s1y)}(center,point.round(10),startPoint,endPoint);let containsPoint;if(intervalAngle<180)containsPoint=intersection&&closeOrLess(center.distanceTo(intersection),distance)&&closeOrLess(distance,pointRadius);else{let angle=calculateAngle(center.x,center.y,radiusX,radiusY,point.x,point.y);360!==angle&&(angle=(360+angle)%360);let inAngleRange=interval.startAngle<=angle&&angle<=interval.endAngle;containsPoint=inAngleRange&&closeOrLess(distance,pointRadius)||!inAngleRange&&(!intersection||intersection.equals(point))}return containsPoint}_isOnPath(point,width){const interval=this._arcInterval(),center=this.center;let angle=calculateAngle(center.x,center.y,this.radiusX,this.radiusY,point.x,point.y);return 360!==angle&&(angle=(360+angle)%360),interval.startAngle<=angle&&angle<=interval.endAngle&&this.pointAt(angle).distanceTo(point)<=width}static fromPoints(start,end,rx,ry,largeArc,swipe,rotation){const arcParameters=function(parameters){let{x1:x1,y1:y1,x2:x2,y2:y2,rx:rx,ry:ry,largeArc:largeArc,swipe:swipe,rotation:rotation=0}=parameters;const radians=rad(rotation),cosine=Math.cos(radians),sine=Math.sin(radians),xT=cosine*(x1-x2)/2+sine*(y1-y2)/2,yT=-sine*(x1-x2)/2+cosine*(y1-y2)/2,sign=largeArc!==swipe?1:-1,xt2=Math.pow(xT,2),yt2=Math.pow(yT,2);let rx2=Math.pow(rx,2),ry2=Math.pow(ry,2),delta=xt2/rx2+yt2/ry2;delta>1&&(delta=Math.sqrt(xt2/rx2+yt2/ry2),rx*=delta,rx2=Math.pow(rx,2),ry*=delta,ry2=Math.pow(ry,2));let constT=sign*Math.sqrt((rx2*ry2-rx2*yt2-ry2*xt2)/(rx2*yt2+ry2*xt2));isNaN(constT)&&(constT=0);const cxT=constT*(rx*yT)/ry,cyT=ry*xT*-constT/rx,cx=cosine*cxT-sine*cyT+(x1+x2)/2,cy=sine*cxT+cosine*cyT+(y1+y2)/2,uX=(xT-cxT)/rx,uY=(yT-cyT)/ry,vX=-(xT+cxT)/rx,vY=-(yT+cyT)/ry,startAngle=(uY>=0?1:-1)*deg(Math.acos(uX/Math.sqrt(uX*uX+uY*uY))),angleCosine=round((uX*vX+uY*vY)/(Math.sqrt(uX*uX+uY*uY)*Math.sqrt(vX*vX+vY*vY)),10);let angle=(uX*vY-uY*vX>=0?1:-1)*deg(Math.acos(angleCosine));!swipe&&angle>0&&(angle-=360),swipe&&angle<0&&(angle+=360);let endAngle=startAngle+angle;const signEndAngle=endAngle>=0?1:-1;return endAngle=Math.abs(endAngle)%360*signEndAngle,{center:new geometry_point(cx,cy),startAngle:startAngle,endAngle:endAngle,radiusX:rx,radiusY:ry,xRotation:rotation}}({x1:start.x,y1:start.y,x2:end.x,y2:end.y,rx:rx,ry:ry,largeArc:largeArc,swipe:swipe,rotation:rotation});return new arc_Arc(arcParameters.center,{startAngle:arcParameters.startAngle,endAngle:arcParameters.endAngle,radiusX:arcParameters.radiusX,radiusY:arcParameters.radiusY,xRotation:arcParameters.xRotation,anticlockwise:0===swipe})}}function calculateAngle(cx,cy,rx,ry,x,y){const cos=round((x-cx)/rx,3),sin=round((y-cy)/ry,3);return round(deg(Math.atan2(sin,cos)))}function bboxStartAngle(angle,start){let startAngle=angle;for(;startAngle<start;)startAngle+=90;return startAngle}defineAccessors(arc_Arc.prototype,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]),observers_mixin.extend(arc_Arc.prototype);var geometry_arc=arc_Arc;const push=[].push,pop=[].pop,elements_array_splice=[].splice,shift=[].shift,elements_array_slice=[].slice,unshift=[].unshift;class elements_array_ElementsArray extends Class{constructor(array=[]){super(),this.length=0,this._splice(0,array.length,array)}elements(value){return value?(this._splice(0,this.length,value),this._change(),this):this.slice(0)}push(){const elements=arguments,result=push.apply(this,elements);return this._add(elements),result}slice(){return elements_array_slice.call(this)}pop(){const length=this.length,result=pop.apply(this);return length&&this._remove([result]),result}splice(index,howMany){const elements=elements_array_slice.call(arguments,2),result=this._splice(index,howMany,elements);return this._change(),result}shift(){const length=this.length,result=shift.apply(this);return length&&this._remove([result]),result}unshift(){const elements=arguments,result=unshift.apply(this,elements);return this._add(elements),result}indexOf(element){const length=this.length;for(let idx=0;idx<length;idx++)if(this[idx]===element)return idx;return-1}_splice(index,howMany,elements){const result=elements_array_splice.apply(this,[index,howMany].concat(elements));return this._clearObserver(result),this._setObserver(elements),result}_add(elements){this._setObserver(elements),this._change()}_remove(elements){this._clearObserver(elements),this._change()}_setObserver(elements){for(let idx=0;idx<elements.length;idx++)elements[idx].addObserver(this)}_clearObserver(elements){for(let idx=0;idx<elements.length;idx++)elements[idx].removeObserver(this)}_change(){}}observers_mixin.extend(elements_array_ElementsArray.prototype);var elements_array=elements_array_ElementsArray,geometry_elements_array=class extends elements_array{_change(){this.geometryChange()}};function pointAccessor(name){const fieldName="_"+name;return function(value){return defined(value)?(this._observerField(fieldName,geometry_point.create(value)),this.geometryChange(),this):this[fieldName]}}function definePointAccessors(fn,names){for(let i=0;i<names.length;i++)fn[names[i]]=pointAccessor(names[i])}function isOutOfEndPoint(endPoint,controlPoint,point){const angle=deg(Math.atan2(controlPoint.y-endPoint.y,controlPoint.x-endPoint.x));return point.transformCopy(transform_transform().rotate(-angle,endPoint)).x<endPoint.x}function calculateCurveAt(t,field,points){const t1=1-t;return Math.pow(t1,3)*points[0][field]+3*Math.pow(t1,2)*t*points[1][field]+3*Math.pow(t,2)*t1*points[2][field]+Math.pow(t,3)*points[3][field]}function toCubicPolynomial(points,field){return[3*points[1][field]-points[0][field]-3*points[2][field]+points[3][field],3*(points[0][field]-2*points[1][field]+points[2][field]),3*(-points[0][field]+points[1][field]),points[0][field]]}class complex_number_ComplexNumber extends Class{constructor(real=0,img=0){super(),this.real=real,this.img=img}add(cNumber){return new complex_number_ComplexNumber(round(this.real+cNumber.real,10),round(this.img+cNumber.img,10))}addConstant(value){return new complex_number_ComplexNumber(this.real+value,this.img)}negate(){return new complex_number_ComplexNumber(-this.real,-this.img)}multiply(cNumber){return new complex_number_ComplexNumber(this.real*cNumber.real-this.img*cNumber.img,this.real*cNumber.img+this.img*cNumber.real)}multiplyConstant(value){return new complex_number_ComplexNumber(this.real*value,this.img*value)}nthRoot(n){const rad=Math.atan2(this.img,this.real),r=Math.sqrt(Math.pow(this.img,2)+Math.pow(this.real,2)),nthR=Math.pow(r,1/n);return new complex_number_ComplexNumber(nthR*Math.cos(rad/n),nthR*Math.sin(rad/n))}equals(cNumber){return this.real===cNumber.real&&this.img===cNumber.img}isReal(){return 0===this.img}}var complex_number=complex_number_ComplexNumber;function numberSign(x){return x<0?-1:1}function solveCubicEquation(a,b,c,d){if(0===a)return function(a,b,c){const squareRoot=Math.sqrt(Math.pow(b,2)-4*a*c);return[(-b+squareRoot)/(2*a),(-b-squareRoot)/(2*a)]}(b,c,d);const p=(3*a*c-Math.pow(b,2))/(3*Math.pow(a,2)),q=(2*Math.pow(b,3)-9*a*b*c+27*Math.pow(a,2)*d)/(27*Math.pow(a,3)),Q=Math.pow(p/3,3)+Math.pow(q/2,2),i=new complex_number(0,1),b3a=-b/(3*a);let x1,x2,y1,y2,y3,z1,z2;Q<0?(x1=new complex_number(-q/2,Math.sqrt(-Q)).nthRoot(3),x2=new complex_number(-q/2,-Math.sqrt(-Q)).nthRoot(3)):(x1=-q/2+Math.sqrt(Q),x1=new complex_number(numberSign(x1)*Math.pow(Math.abs(x1),1/3)),x2=-q/2-Math.sqrt(Q),x2=new complex_number(numberSign(x2)*Math.pow(Math.abs(x2),1/3))),y1=x1.add(x2),z1=x1.add(x2).multiplyConstant(-.5),z2=x1.add(x2.negate()).multiplyConstant(Math.sqrt(3)/2),y2=z1.add(i.multiply(z2)),y3=z1.add(i.negate().multiply(z2));const result=[];return y1.isReal()&&result.push(round(y1.real+b3a,10)),y2.isReal()&&result.push(round(y2.real+b3a,10)),y3.isReal()&&result.push(round(y3.real+b3a,10)),result}function hasRootsInRange(points,point,field,rootField,range){const polynomial=toCubicPolynomial(points,rootField),roots=solveCubicEquation(polynomial[0],polynomial[1],polynomial[2],polynomial[3]-point[rootField]);let intersection;for(let idx=0;idx<roots.length;idx++)if(0<=roots[idx]&&roots[idx]<=1&&(intersection=calculateCurveAt(roots[idx],field,points),Math.abs(intersection-point[field])<=range))return!0}function lineIntersectionsCount(a,b,point){let intersects;if(a.x!==b.x){const minX=Math.min(a.x,b.x),maxX=Math.max(a.x,b.x),minY=Math.min(a.y,b.y),maxY=Math.max(a.y,b.y),inRange=minX<=point.x&&point.x<maxX;intersects=minY===maxY?point.y<=minY&&inRange:inRange&&(maxY-minY)*((a.x-b.x)*(a.y-b.y)>0?point.x-minX:maxX-point.x)/(maxX-minX)+minY-point.y>=0}return intersects?1:0}class segment_Segment extends Class{constructor(anchor,controlIn,controlOut){super(),this.anchor(anchor||new geometry_point),this.controlIn(controlIn),this.controlOut(controlOut)}bboxTo(toSegment,matrix){const segmentAnchor=this.anchor().transformCopy(matrix),toSegmentAnchor=toSegment.anchor().transformCopy(matrix);let rect;return rect=this.controlOut()&&toSegment.controlIn()?this._curveBoundingBox(segmentAnchor,this.controlOut().transformCopy(matrix),toSegment.controlIn().transformCopy(matrix),toSegmentAnchor):this._lineBoundingBox(segmentAnchor,toSegmentAnchor),rect}_lineBoundingBox(p1,p2){return geometry_rect.fromPoints(p1,p2)}_curveBoundingBox(p1,cp1,cp2,p2){const points=[p1,cp1,cp2,p2],extremesX=this._curveExtremesFor(points,"x"),extremesY=this._curveExtremesFor(points,"y"),xLimits=arrayLimits([extremesX.min,extremesX.max,p1.x,p2.x]),yLimits=arrayLimits([extremesY.min,extremesY.max,p1.y,p2.y]);return geometry_rect.fromPoints(new geometry_point(xLimits.min,yLimits.min),new geometry_point(xLimits.max,yLimits.max))}_curveExtremesFor(points,field){const extremes=this._curveExtremes(points[0][field],points[1][field],points[2][field],points[3][field]);return{min:calculateCurveAt(extremes.min,field,points),max:calculateCurveAt(extremes.max,field,points)}}_curveExtremes(x1,x2,x3,x4){const a=x1-3*x2+3*x3-x4,b=-2*(x1-2*x2+x3),c=x1-x2,sqrt=Math.sqrt(b*b-4*a*c);let t1=0,t2=1;0===a?0!==b&&(t1=t2=-c/b):isNaN(sqrt)||(t1=(-b+sqrt)/(2*a),t2=(-b-sqrt)/(2*a));let min=Math.max(Math.min(t1,t2),0);(min<0||min>1)&&(min=0);let max=Math.min(Math.max(t1,t2),1);return(max>1||max<0)&&(max=1),{min:min,max:max}}_intersectionsTo(segment,point){let intersectionsCount;return intersectionsCount=this.controlOut()&&segment.controlIn()?function(points,point,bbox){const polynomial=toCubicPolynomial(points,"x"),roots=solveCubicEquation(polynomial[0],polynomial[1],polynomial[2],polynomial[3]-point.x);let rayIntersection,intersectsRay,count=0;for(let i=0;i<roots.length;i++)rayIntersection=calculateCurveAt(roots[i],"y",points),intersectsRay=close_close(rayIntersection,point.y)||rayIntersection>point.y,intersectsRay&&((0===roots[i]||1===roots[i])&&bbox.bottomRight().x>point.x||0<roots[i]&&roots[i]<1)&&count++;return count}([this.anchor(),this.controlOut(),segment.controlIn(),segment.anchor()],point,this.bboxTo(segment)):lineIntersectionsCount(this.anchor(),segment.anchor(),point),intersectionsCount}_isOnCurveTo(segment,point,width,endSegment){if(this.bboxTo(segment).expand(width,width).containsPoint(point)){const p1=this.anchor(),p2=this.controlOut(),p3=segment.controlIn(),p4=segment.anchor();if("start"===endSegment&&p1.distanceTo(point)<=width)return!isOutOfEndPoint(p1,p2,point);if("end"===endSegment&&p4.distanceTo(point)<=width)return!isOutOfEndPoint(p4,p3,point);const points=[p1,p2,p3,p4];if(hasRootsInRange(points,point,"x","y",width)||hasRootsInRange(points,point,"y","x",width))return!0;const rotation=transform_transform().rotate(45,point),rotatedPoints=[p1.transformCopy(rotation),p2.transformCopy(rotation),p3.transformCopy(rotation),p4.transformCopy(rotation)];return hasRootsInRange(rotatedPoints,point,"x","y",width)||hasRootsInRange(rotatedPoints,point,"y","x",width)}}_isOnLineTo(segment,point,width){const p1=this.anchor(),p2=segment.anchor(),angle=deg(Math.atan2(p2.y-p1.y,p2.x-p1.x));return new geometry_rect([p1.x,p1.y-width/2],[p1.distanceTo(p2),width]).containsPoint(point.transformCopy(transform_transform().rotate(-angle,p1)))}_isOnPathTo(segment,point,width,endSegment){let isOnPath;return isOnPath=this.controlOut()&&segment.controlIn()?this._isOnCurveTo(segment,point,width/2,endSegment):this._isOnLineTo(segment,point,width),isOnPath}}function arrayLimits(arr){let length=arr.length,min=MAX_NUM,max=MIN_NUM;for(let i=0;i<length;i++)max=Math.max(max,arr[i]),min=Math.min(min,arr[i]);return{min:min,max:max}}definePointAccessors(segment_Segment.prototype,["anchor","controlIn","controlOut"]),observers_mixin.extend(segment_Segment.prototype);var geometry_segment=segment_Segment;function elementsBoundingBox(elements,applyTransform,transformation){let boundingBox;for(let i=0;i<elements.length;i++){let element=elements[i];if(element.visible()){let elementBoundingBox=applyTransform?element.bbox(transformation):element.rawBBox();elementBoundingBox&&(boundingBox=boundingBox?geometry_rect.union(boundingBox,elementBoundingBox):elementBoundingBox)}}return boundingBox}function elementsClippedBoundingBox(elements,transformation){let boundingBox;for(let i=0;i<elements.length;i++){let element=elements[i];if(element.visible()){let elementBoundingBox=element.clippedBBox(transformation);elementBoundingBox&&(boundingBox=boundingBox?geometry_rect.union(boundingBox,elementBoundingBox):elementBoundingBox)}}return boundingBox}class multi_path_MultiPath extends shapes_element{constructor(options){super(options),this.paths=new geometry_elements_array,this.paths.addObserver(this),defined(this.options.stroke)||this.stroke("#000")}moveTo(x,y){const path=new shapes_path;return path.moveTo(x,y),this.paths.push(path),this}lineTo(x,y){return this.paths.length>0&&util_last_last(this.paths).lineTo(x,y),this}curveTo(controlOut,controlIn,point){return this.paths.length>0&&util_last_last(this.paths).curveTo(controlOut,controlIn,point),this}arc(startAngle,endAngle,radiusX,radiusY,anticlockwise){return this.paths.length>0&&util_last_last(this.paths).arc(startAngle,endAngle,radiusX,radiusY,anticlockwise),this}arcTo(end,rx,ry,largeArc,swipe,rotation){return this.paths.length>0&&util_last_last(this.paths).arcTo(end,rx,ry,largeArc,swipe,rotation),this}close(){return this.paths.length>0&&util_last_last(this.paths).close(),this}_bbox(matrix){return elementsBoundingBox(this.paths,!0,matrix)}rawBBox(){return elementsBoundingBox(this.paths,!1)}_containsPoint(point){const paths=this.paths;for(let idx=0;idx<paths.length;idx++)if(paths[idx]._containsPoint(point))return!0;return!1}_isOnPath(point){const paths=this.paths,width=this.options.stroke.width;for(let idx=0;idx<paths.length;idx++)if(paths[idx]._isOnPath(point,width))return!0;return!1}_clippedBBox(transformation){return elementsClippedBoundingBox(this.paths,this.currentTransform(transformation))}}multi_path_MultiPath.prototype.nodeType="MultiPath",paintable.extend(multi_path_MultiPath.prototype),measurable.extend(multi_path_MultiPath.prototype);var multi_path=multi_path_MultiPath;function toLineParamaters(parameters,isVertical,value){const insertPosition=isVertical?0:1;for(let i=0;i<parameters.length;i+=2)parameters.splice(i+insertPosition,0,value)}function reflectionPoint(point,center){if(point&&center)return center.scaleCopy(2).translate(-point.x,-point.y)}function quadraticToCubicControlPoints(position,controlPoint,endPoint){const scaledPoint=controlPoint.clone().scale(2/3);return{controlOut:scaledPoint.clone().translateWith(position.scaleCopy(1/3)),controlIn:scaledPoint.translateWith(endPoint.scaleCopy(1/3))}}var shape_map={l:function(path,options){const{parameters:parameters,position:position}=options;for(let i=0;i<parameters.length;i+=2){let point=new geometry_point(parameters[i],parameters[i+1]);options.isRelative&&point.translateWith(position),path.lineTo(point.x,point.y),position.x=point.x,position.y=point.y}},c:function(path,options){const{parameters:parameters,position:position}=options;for(let i=0;i<parameters.length;i+=6){let controlOut=new geometry_point(parameters[i],parameters[i+1]),controlIn=new geometry_point(parameters[i+2],parameters[i+3]),point=new geometry_point(parameters[i+4],parameters[i+5]);options.isRelative&&(controlIn.translateWith(position),controlOut.translateWith(position),point.translateWith(position)),path.curveTo(controlOut,controlIn,point),position.x=point.x,position.y=point.y}},v:function(path,options){toLineParamaters(options.parameters,!0,options.isRelative?0:options.position.x),this.l(path,options)},h:function(path,options){toLineParamaters(options.parameters,!1,options.isRelative?0:options.position.y),this.l(path,options)},a:function(path,options){const{parameters:parameters,position:position}=options;for(let i=0;i<parameters.length;i+=7){const radiusX=parameters[i],radiusY=parameters[i+1],rotation=parameters[i+2],largeArc=parameters[i+3],swipe=parameters[i+4],endPoint=new geometry_point(parameters[i+5],parameters[i+6]);options.isRelative&&endPoint.translateWith(position),position.x===endPoint.x&&position.y===endPoint.y||(path.arcTo(endPoint,radiusX,radiusY,largeArc,swipe,rotation),position.x=endPoint.x,position.y=endPoint.y)}},s:function(path,options){const{parameters:parameters,position:position,previousCommand:previousCommand}=options;let lastControlIn;"s"!==previousCommand&&"c"!==previousCommand||(lastControlIn=util_last_last(util_last_last(path.paths).segments).controlIn());for(let i=0;i<parameters.length;i+=4){let controlOut,controlIn=new geometry_point(parameters[i],parameters[i+1]),endPoint=new geometry_point(parameters[i+2],parameters[i+3]);options.isRelative&&(controlIn.translateWith(position),endPoint.translateWith(position)),controlOut=lastControlIn?reflectionPoint(lastControlIn,position):position.clone(),lastControlIn=controlIn,path.curveTo(controlOut,controlIn,endPoint),position.x=endPoint.x,position.y=endPoint.y}},q:function(path,options){const{parameters:parameters,position:position}=options;for(let i=0;i<parameters.length;i+=4){let controlPoint=new geometry_point(parameters[i],parameters[i+1]),endPoint=new geometry_point(parameters[i+2],parameters[i+3]);options.isRelative&&(controlPoint.translateWith(position),endPoint.translateWith(position));let cubicControlPoints=quadraticToCubicControlPoints(position,controlPoint,endPoint);path.curveTo(cubicControlPoints.controlOut,cubicControlPoints.controlIn,endPoint),position.x=endPoint.x,position.y=endPoint.y}},t:function(path,options){const{parameters:parameters,position:position,previousCommand:previousCommand}=options;let controlPoint;"q"!==previousCommand&&"t"!==previousCommand||(controlPoint=util_last_last(util_last_last(path.paths).segments).controlIn().clone().translateWith(position.scaleCopy(-1/3)).scale(1.5));for(let i=0;i<parameters.length;i+=2){let endPoint=new geometry_point(parameters[i],parameters[i+1]);options.isRelative&&endPoint.translateWith(position),controlPoint=controlPoint?reflectionPoint(controlPoint,position):position.clone();let cubicControlPoints=quadraticToCubicControlPoints(position,controlPoint,endPoint);path.curveTo(cubicControlPoints.controlOut,cubicControlPoints.controlIn,endPoint),position.x=endPoint.x,position.y=endPoint.y}}};const SEGMENT_REGEX=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,SPLIT_REGEX=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g;var path_parser=(()=>{class PathParser extends Class{parse(str,options){const multiPath=new multi_path(options),position=new geometry_point;let previousCommand;return str.replace(SEGMENT_REGEX,(match,element,params,closePath)=>{let command=element.toLowerCase();const isRelative=command===element,parameters=function(str){const parameters=[];return str.replace(SPLIT_REGEX,(function(match,number){parameters.push(parseFloat(number))})),parameters}(params.trim());if("m"===command&&(isRelative?(position.x+=parameters[0],position.y+=parameters[1]):(position.x=parameters[0],position.y=parameters[1]),multiPath.moveTo(position.x,position.y),parameters.length>2&&(command="l",parameters.splice(0,2))),shape_map[command])shape_map[command](multiPath,{parameters:parameters,position:position,isRelative:isRelative,previousCommand:previousCommand}),closePath&&"z"===closePath.toLowerCase()&&multiPath.close();else if("m"!==command)throw new Error("Error while parsing SVG path. Unsupported command: "+command);previousCommand=command}),multiPath}}return PathParser.current=new PathParser,PathParser})();class path_Path extends shapes_element{constructor(options){super(options),this.segments=new geometry_elements_array,this.segments.addObserver(this),defined(this.options.stroke)||(this.stroke("#000"),defined(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))}moveTo(x,y){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(x,y),this}lineTo(x,y){const point=defined(y)?new geometry_point(x,y):x,segment=new geometry_segment(point);return this.segments.push(segment),this}curveTo(controlOut,controlIn,point){if(this.segments.length>0){const lastSegment=util_last_last(this.segments),segment=new geometry_segment(point,controlIn);this.suspend(),lastSegment.controlOut(controlOut),this.resume(),this.segments.push(segment)}return this}arc(startAngle,endAngle,radiusX,radiusY,anticlockwise){if(this.segments.length>0){const anchor=util_last_last(this.segments).anchor(),start=rad(startAngle),center=new geometry_point(anchor.x-radiusX*Math.cos(start),anchor.y-radiusY*Math.sin(start)),arc=new geometry_arc(center,{startAngle:startAngle,endAngle:endAngle,radiusX:radiusX,radiusY:radiusY,anticlockwise:anticlockwise});this._addArcSegments(arc)}return this}arcTo(end,rx,ry,largeArc,swipe,rotation){if(this.segments.length>0){const anchor=util_last_last(this.segments).anchor(),arc=geometry_arc.fromPoints(anchor,end,rx,ry,largeArc,swipe,rotation);this._addArcSegments(arc)}return this}_addArcSegments(arc){this.suspend();const curvePoints=arc.curvePoints();for(let i=1;i<curvePoints.length;i+=3)this.curveTo(curvePoints[i],curvePoints[i+1],curvePoints[i+2]);this.resume(),this.geometryChange()}close(){return this.options.closed=!0,this.geometryChange(),this}rawBBox(){return this._bbox()}_containsPoint(point){const segments=this.segments,length=segments.length;let previous,current,intersectionsCount=0;for(let idx=1;idx<length;idx++)previous=segments[idx-1],current=segments[idx],intersectionsCount+=previous._intersectionsTo(current,point);return!this.options.closed&&segments[0].anchor().equals(segments[length-1].anchor())||(intersectionsCount+=lineIntersectionsCount(segments[0].anchor(),segments[length-1].anchor(),point)),intersectionsCount%2!=0}_isOnPath(point,width){const segments=this.segments,length=segments.length,pathWidth=width||this.options.stroke.width;if(length>1){if(segments[0]._isOnPathTo(segments[1],point,pathWidth,"start"))return!0;for(let idx=2;idx<=length-2;idx++)if(segments[idx-1]._isOnPathTo(segments[idx],point,pathWidth))return!0;if(segments[length-2]._isOnPathTo(segments[length-1],point,pathWidth,"end"))return!0}return!1}_bbox(matrix){const segments=this.segments,length=segments.length;let boundingBox;if(1===length){let anchor=segments[0].anchor().transformCopy(matrix);boundingBox=new geometry_rect(anchor,geometry_size.ZERO)}else if(length>0)for(let i=1;i<length;i++){let segmentBox=segments[i-1].bboxTo(segments[i],matrix);boundingBox=boundingBox?geometry_rect.union(boundingBox,segmentBox):segmentBox}return boundingBox}static fromRect(rect,options){return new path_Path(options).moveTo(rect.topLeft()).lineTo(rect.topRight()).lineTo(rect.bottomRight()).lineTo(rect.bottomLeft()).close()}static fromPoints(points,options){if(points){const path=new path_Path(options);for(let i=0;i<points.length;i++){let point=geometry_point.create(points[i]);point&&(0===i?path.moveTo(point):path.lineTo(point))}return path}}static fromArc(arc,options){const path=new path_Path(options),startAngle=arc.startAngle,start=arc.pointAt(startAngle);return path.moveTo(start.x,start.y),path.arc(startAngle,arc.endAngle,arc.radiusX,arc.radiusY,arc.anticlockwise),path}}path_Path.prototype.nodeType="Path",paintable.extend(path_Path.prototype),measurable.extend(path_Path.prototype),path_Path.parse=function(str,options){return path_parser.current.parse(str,options)};var shapes_path=path_Path;class shapes_arc_Arc extends shapes_element{constructor(geometry=new geometry_arc,options={}){super(options),this.geometry(geometry),defined(this.options.stroke)||this.stroke("#000")}_bbox(matrix){return this._geometry.bbox(matrix)}rawBBox(){return this.geometry().bbox()}toPath(){const path=new shapes_path,curvePoints=this.geometry().curvePoints();if(curvePoints.length>0){path.moveTo(curvePoints[0].x,curvePoints[0].y);for(let i=1;i<curvePoints.length;i+=3)path.curveTo(curvePoints[i],curvePoints[i+1],curvePoints[i+2])}return path}_containsPoint(point){return this.geometry().containsPoint(point)}_isOnPath(point){return this.geometry()._isOnPath(point,this.options.stroke.width/2)}}shapes_arc_Arc.prototype.nodeType="Arc",paintable.extend(shapes_arc_Arc.prototype),measurable.extend(shapes_arc_Arc.prototype),defineGeometryAccessors(shapes_arc_Arc.prototype,["geometry"]);class text_Text extends shapes_element{constructor(content,position=new geometry_point,options={}){super(options),this.content(content),this.position(position),this.options.font||(this.options.font="12px sans-serif"),defined(this.options.fill)||this.fill("#000")}content(value){return defined(value)?(this.options.set("content",value),this):this.options.get("content")}measure(){return measureText(this.content(),{font:this.options.get("font")})}rect(){const size=this.measure(),pos=this.position().clone();return new geometry_rect(pos,[size.width,size.height])}bbox(transformation){const combinedMatrix=toMatrix(this.currentTransform(transformation));return this.rect().bbox(combinedMatrix)}rawBBox(){return this.rect().bbox()}_containsPoint(point){return this.rect().containsPoint(point)}}text_Text.prototype.nodeType="Text",paintable.extend(text_Text.prototype),definePointAccessors(text_Text.prototype,["position"]);var shapes_text=text_Text;class image_Image extends shapes_element{constructor(src,rect=new geometry_rect,options={}){super(options),this.src(src),this.rect(rect)}src(value){return defined(value)?(this.options.set("src",value),this):this.options.get("src")}bbox(transformation){const combinedMatrix=toMatrix(this.currentTransform(transformation));return this._rect.bbox(combinedMatrix)}rawBBox(){return this._rect.bbox()}_containsPoint(point){return this._rect.containsPoint(point)}_hasFill(){return this.src()}}image_Image.prototype.nodeType="Image",defineGeometryAccessors(image_Image.prototype,["rect"]);var shapes_image=image_Image,traversable_extend=function(proto,childrenField){proto.traverse=function(callback){const children=this[childrenField];for(let i=0;i<children.length;i++){let child=children[i];child.traverse?child.traverse(callback):callback(child)}return this}};class group_Group extends shapes_element{constructor(options){super(options),this.children=[]}childrenChange(action,items,index){this.trigger("childrenChange",{action:action,items:items,index:index})}append(){return append(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this}insert(index,element){return this.children.splice(index,0,element),element.parent=this,this.childrenChange("add",[element],index),this}insertAt(element,index){return this.insert(index,element)}remove(element){const index=this.children.indexOf(element);return index>=0&&(this.children.splice(index,1),element.parent=null,this.childrenChange("remove",[element],index)),this}removeAt(index){if(0<=index&&index<this.children.length){let element=this.children[index];this.children.splice(index,1),element.parent=null,this.childrenChange("remove",[element],index)}return this}clear(){const items=this.children;return this.children=[],this._reparent(items,null),this.childrenChange("remove",items,0),this}bbox(transformation){return elementsBoundingBox(this.children,!0,this.currentTransform(transformation))}rawBBox(){return elementsBoundingBox(this.children,!1)}_clippedBBox(transformation){return elementsClippedBoundingBox(this.children,this.currentTransform(transformation))}currentTransform(transformation){return shapes_element.prototype.currentTransform.call(this,transformation)||null}containsPoint(point,parentTransform){if(this.visible()){const children=this.children,transform=this.currentTransform(parentTransform);for(let idx=0;idx<children.length;idx++)if(children[idx].containsPoint(point,transform))return!0}return!1}_reparent(elements,newParent){for(let i=0;i<elements.length;i++){const child=elements[i],parent=child.parent;parent&&parent!==this&&parent.remove&&parent.remove(child),child.parent=newParent}}}group_Group.prototype.nodeType="Group",traversable_extend(group_Group.prototype,"children");var shapes_group=group_Group;class shapes_rect_Rect extends shapes_element{constructor(geometry=new geometry_rect,options={}){super(options),this.geometry(geometry),defined(this.options.stroke)||this.stroke("#000")}_bbox(matrix){return this._geometry.bbox(matrix)}rawBBox(){return this._geometry.bbox()}_containsPoint(point){return this._geometry.containsPoint(point)}_isOnPath(point){return this.geometry()._isOnPath(point,this.options.stroke.width/2)}}shapes_rect_Rect.prototype.nodeType="Rect",paintable.extend(shapes_rect_Rect.prototype),measurable.extend(shapes_rect_Rect.prototype),defineGeometryAccessors(shapes_rect_Rect.prototype,["geometry"]);var stops_array=class extends elements_array{_change(){this.optionsChange({field:"stops"})}};function optionsAccessor(name){return function(value){return defined(value)?(this.options.set(name,value),this):this.options.get(name)}}class gradient_stop_GradientStop extends Class{constructor(offset,color,opacity){super(),this.options=new options_store({offset:offset,color:color,opacity:defined(opacity)?opacity:1}),this.options.addObserver(this)}static create(arg){if(defined(arg)){let stop;return stop=arg instanceof gradient_stop_GradientStop?arg:arg.length>1?new gradient_stop_GradientStop(arg[0],arg[1],arg[2]):new gradient_stop_GradientStop(arg.offset,arg.color,arg.opacity),stop}}}!function(fn,names){for(let i=0;i<names.length;i++)fn[names[i]]=optionsAccessor(names[i])}(gradient_stop_GradientStop.prototype,["offset","color","opacity"]),observers_mixin.extend(gradient_stop_GradientStop.prototype);var gradient_stop=gradient_stop_GradientStop;class gradient_Gradient extends Class{constructor(options={}){super(),this.stops=new stops_array(this._createStops(options.stops)),this.stops.addObserver(this),this._userSpace=options.userSpace,this.id=definitionId()}userSpace(value){return defined(value)?(this._userSpace=value,this.optionsChange(),this):this._userSpace}_createStops(stops=[]){const result=[];for(let idx=0;idx<stops.length;idx++)result.push(gradient_stop.create(stops[idx]));return result}addStop(offset,color,opacity){this.stops.push(new gradient_stop(offset,color,opacity))}removeStop(stop){const index=this.stops.indexOf(stop);index>=0&&this.stops.splice(index,1)}}gradient_Gradient.prototype.nodeType="Gradient",observers_mixin.extend(gradient_Gradient.prototype),Object.assign(gradient_Gradient.prototype,{optionsChange:function(e){this.trigger("optionsChange",{field:"gradient"+(e?"."+e.field:""),value:this})},geometryChange:function(){this.optionsChange()}});var gradients_gradient=gradient_Gradient;class linear_gradient_LinearGradient extends gradients_gradient{constructor(options={}){super(options),this.start(options.start||new geometry_point),this.end(options.end||new geometry_point(1,0))}}definePointAccessors(linear_gradient_LinearGradient.prototype,["start","end"]);var linear_gradient=linear_gradient_LinearGradient;class radial_gradient_RadialGradient extends gradients_gradient{constructor(options={}){super(options),this.center(options.center||new geometry_point),this._radius=defined(options.radius)?options.radius:1,this._fallbackFill=options.fallbackFill}radius(value){return defined(value)?(this._radius=value,this.geometryChange(),this):this._radius}fallbackFill(value){return defined(value)?(this._fallbackFill=value,this.optionsChange(),this):this._fallbackFill}}definePointAccessors(radial_gradient_RadialGradient.prototype,["center"]);var radial_gradient=radial_gradient_RadialGradient;function swing(position){return.5-Math.cos(position*Math.PI)/2}function linear(position){return position}function easeOutElastic(position,time,start,diff){let s=1.70158,p=0,a=diff;return 0===position?start:1===position?start+diff:(p||(p=.5),a<Math.abs(diff)?(a=diff,s=p/4):s=p/(2*Math.PI)*Math.asin(diff/a),a*Math.pow(2,-10*position)*Math.sin((Number(position)-s)*(1.1*Math.PI)/p)+diff+start)}var animation_factory=(()=>{class AnimationFactory extends Class{constructor(){super(),this._items=[]}register(name,type){this._items.push({name:name,type:type})}create(element,options){const items=this._items;let match;if(options&&options.type){const type=options.type.toLowerCase();for(let i=0;i<items.length;i++)if(items[i].name.toLowerCase()===type){match=items[i];break}}if(match)return new match.type(element,options)}}return AnimationFactory.current=new AnimationFactory,AnimationFactory})();const animation_now=Date.now||function(){return(new Date).getTime()};class animation_Animation extends Class{constructor(element,options){super(),this.options=Object.assign({},this.options,options),this.element=element}setup(){}step(){}play(){const options=this.options,{duration:duration,delay:delay=0}=options,easing=easing_functions_namespaceObject[options.easing],start=animation_now()+delay,finish=start+duration;0===duration?(this.step(1),this.abort()):setTimeout(()=>{const loop=()=>{if(this._stopped)return;const wallTime=animation_now(),time=Math.max(Math.min(wallTime-start,duration),0),easingPosition=easing(time/duration,time,0,1,duration);this.step(easingPosition),wallTime<finish?animationFrameProxy(loop):this.abort()};loop()},delay)}abort(){this._stopped=!0}destroy(){this.abort()}}animation_Animation.prototype.options={duration:500,easing:"swing"},animation_Animation.create=function(type,element,options){return animation_factory.current.create(type,element,options)};var surface_factory=(()=>{class SurfaceFactory extends Class{constructor(){super(),this._items=[]}register(name,type,order){const items=this._items,first=items[0],entry={name:name,type:type,order:order};!first||order<first.order?items.unshift(entry):items.push(entry)}create(element,options){const items=this._items;let match=items[0];if(options&&options.type){const preferred=options.type.toLowerCase();for(let i=0;i<items.length;i++)if(items[i].name===preferred){match=items[i];break}}if(match)return new match.type(element,options);!function(message){const console=window.console;void 0!==console&&console.log&&console.log(message)}("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG and Canvas. User agent: "+navigator.userAgent)}}return SurfaceFactory.current=new SurfaceFactory,SurfaceFactory})();const events=["click","mouseenter","mouseleave","mousemove","resize"];var core_surface=(()=>{class Surface extends common_observable{constructor(element,options){super(),this.options=Object.assign({},options),this.element=element,this.element._kendoExportVisual=this.exportVisual.bind(this),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._mousemove=this._handler("mousemove"),this._visual=new shapes_group,element_size_elementSize(element,this.options),this.bind(events,this.options),this._enableTracking()}draw(element){this._visual.children.push(element)}clear(){this._visual.children=[]}destroy(){this._visual=null,this.element._kendoExportVisual=null,this.unbind()}eventTarget(e){let node,domNode=function(e={}){return e.touch?e.touch.initialTouch:e.target}(e);for(;!node&&domNode&&(node=domNode._kendoNode,domNode!==this.element);)domNode=domNode.parentElement;if(node)return node.srcElement}exportVisual(){return this._visual}getSize(){return element_size_elementSize(this.element)}currentSize(size){if(!size)return this._size;this._size=size}setSize(size){element_size_elementSize(this.element,size),this.currentSize(size),this._resize()}resize(force){const size=this.getSize(),currentSize=this.currentSize();(force||(size.width>0||size.height>0)&&(!currentSize||size.width!==currentSize.width||size.height!==currentSize.height))&&(this.currentSize(size),this._resize(size,force),this.trigger("resize",size))}size(value){if(!value)return this.getSize();this.setSize(value)}suspendTracking(){this._suspendedTracking=!0}resumeTracking(){this._suspendedTracking=!1}_enableTracking(){}_resize(){}_handler(eventName){return e=>{const node=this.eventTarget(e);node&&!this._suspendedTracking&&this.trigger(eventName,{element:node,originalEvent:e,type:eventName})}}_elementOffset(){const element=this.element,{paddingLeft:paddingLeft,paddingTop:paddingTop}=element_styles_elementStyles(element,["paddingLeft","paddingTop"]),{left:left,top:top}=function(element){const box=element.getBoundingClientRect(),documentElement=document.documentElement;return{top:box.top+(window.pageYOffset||documentElement.scrollTop)-(documentElement.clientTop||0),left:box.left+(window.pageXOffset||documentElement.scrollLeft)-(documentElement.clientLeft||0)}}(element);return{left:left+parseInt(paddingLeft,10),top:top+parseInt(paddingTop,10)}}_surfacePoint(e){const offset=this._elementOffset(),coord=function(e){return defined((e.x||{}).location)?{x:e.x.location,y:e.y.location}:{x:e.pageX||e.clientX||0,y:e.pageY||e.clientY||0}}(e);return new geometry_point(coord.x-offset.left,coord.y-offset.top)}}return Surface.create=function(element,options){return surface_factory.current.create(element,options)},Surface.support={},Surface})(),base_node=class extends Class{constructor(srcElement){super(),this.childNodes=[],this.parent=null,srcElement&&(this.srcElement=srcElement,this.observe())}destroy(){this.srcElement&&this.srcElement.removeObserver(this);const children=this.childNodes;for(let i=0;i<children.length;i++)this.childNodes[i].destroy();this.parent=null}load(){}observe(){this.srcElement&&this.srcElement.addObserver(this)}append(node){this.childNodes.push(node),node.parent=this}insertAt(node,pos){this.childNodes.splice(pos,0,node),node.parent=this}remove(index,count){const end=index+count;for(let i=index;i<end;i++)this.childNodes[i].removeSelf();this.childNodes.splice(index,count)}removeSelf(){this.clear(),this.destroy()}clear(){this.remove(0,this.childNodes.length)}invalidate(){this.parent&&this.parent.invalidate()}geometryChange(){this.invalidate()}optionsChange(){this.invalidate()}childrenChange(e){"add"===e.action?this.load(e.items,e.index):"remove"===e.action&&this.remove(e.index,e.items.length),this.invalidate()}};function renderAttr(name,value){return defined(value)&&null!==value?` ${name}="${value}" `:""}function renderAllAttr(attrs){let output="";for(let i=0;i<attrs.length;i++)output+=renderAttr(attrs[i][0],attrs[i][1]);return output}function renderStyle(attrs){let output="";for(let i=0;i<attrs.length;i++){let value=attrs[i][1];defined(value)&&(output+=attrs[i][0]+":"+value+";")}if(""!==output)return output}var node_map={};const SVG_NS="http://www.w3.org/2000/svg";let renderSVG=function(container,svg){container.innerHTML=svg};if("undefined"!=typeof document){const testFragment="<svg xmlns='"+SVG_NS+"'></svg>",testContainer=document.createElement("div"),hasParser="undefined"!=typeof DOMParser;testContainer.innerHTML=testFragment,hasParser&&testContainer.firstChild.namespaceURI!==SVG_NS&&(renderSVG=function(container,svg){const chartDoc=(new DOMParser).parseFromString(svg,"text/xml"),importedDoc=document.adoptNode(chartDoc.documentElement);container.innerHTML="",container.appendChild(importedDoc)})}var render_svg=renderSVG;const DefinitionMap={clip:"clip-path",fill:"fill"};function isDefinition(type,value){return"clip"===type||"fill"===type&&(!value||"Gradient"===value.nodeType)}var svg_node=class extends base_node{constructor(srcElement,options){super(srcElement),this.definitions={},this.options=options}destroy(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),super.destroy()}load(elements,pos){for(let i=0;i<elements.length;i++){const srcElement=elements[i],children=srcElement.children,childNode=new node_map[srcElement.nodeType](srcElement,this.options);defined(pos)?this.insertAt(childNode,pos):this.append(childNode),childNode.createDefinitions(),children&&children.length>0&&childNode.load(children);const element=this.element;element&&childNode.attachTo(element,pos)}}root(){let root=this;for(;root.parent;)root=root.parent;return root}attachTo(domElement,pos){const container=document.createElement("div");render_svg(container,"<svg xmlns='"+SVG_NS+"' version='1.1'>"+this.render()+"</svg>");const element=container.firstChild.firstChild;element&&(defined(pos)?domElement.insertBefore(element,domElement.childNodes[pos]||null):domElement.appendChild(element),this.setElement(element))}setElement(element){this.element&&(this.element._kendoNode=null),this.element=element,this.element._kendoNode=this;const nodes=this.childNodes;for(let i=0;i<nodes.length;i++)nodes[i].setElement(element.childNodes[i])}clear(){this.clearDefinitions(),this.element&&(this.element.innerHTML="");const children=this.childNodes;for(let i=0;i<children.length;i++)children[i].destroy();this.childNodes=[]}removeSelf(){if(this.element){const parentNode=this.element.parentNode;parentNode&&parentNode.removeChild(this.element),this.element=null}super.removeSelf()}template(){return this.renderChildren()}render(){return this.template()}renderChildren(){const nodes=this.childNodes;let output="";for(let i=0;i<nodes.length;i++)output+=nodes[i].render();return output}optionsChange(e){const{field:field,value:value}=e;"visible"===field?this.css("display",value?"":"none"):DefinitionMap[field]&&isDefinition(field,value)?this.updateDefinition(field,value):"opacity"===field?this.attr("opacity",value):"cursor"===field?this.css("cursor",value):"id"===field&&(value?this.attr("id",value):this.removeAttr("id")),super.optionsChange(e)}attr(name,value){this.element&&this.element.setAttribute(name,value)}allAttr(attrs){for(let i=0;i<attrs.length;i++)this.attr(attrs[i][0],attrs[i][1])}css(name,value){this.element&&(this.element.style[name]=value)}allCss(styles){for(let i=0;i<styles.length;i++)this.css(styles[i][0],styles[i][1])}removeAttr(name){this.element&&this.element.removeAttribute(name)}mapTransform(transform){const attrs=[];return transform&&attrs.push(["transform","matrix("+transform.matrix().toString(6)+")"]),attrs}renderTransform(){return renderAllAttr(this.mapTransform(this.srcElement.transform()))}transformChange(value){value?this.allAttr(this.mapTransform(value)):this.removeAttr("transform")}mapStyle(){const options=this.srcElement.options,style=[["cursor",options.cursor]];return!1===options.visible&&style.push(["display","none"]),style}renderStyle(){return renderAttr("style",renderStyle(this.mapStyle(!0)))}renderOpacity(){return renderAttr("opacity",this.srcElement.options.opacity)}renderId(){return renderAttr("id",this.srcElement.options.id)}createDefinitions(){const srcElement=this.srcElement,definitions=this.definitions;if(srcElement){const options=srcElement.options;let hasDefinitions;for(let field in DefinitionMap){let definition=options.get(field);definition&&isDefinition(field,definition)&&(definitions[field]=definition,hasDefinitions=!0)}hasDefinitions&&this.definitionChange({action:"add",definitions:definitions})}}definitionChange(e){this.parent&&this.parent.definitionChange(e)}updateDefinition(type,value){const definitions=this.definitions,current=definitions[type],attr=DefinitionMap[type],definition={};current&&(definition[type]=current,this.definitionChange({action:"remove",definitions:definition}),delete definitions[type]),value?(definition[type]=value,this.definitionChange({action:"add",definitions:definition}),definitions[type]=value,this.attr(attr,this.refUrl(value.id))):current&&this.removeAttr(attr)}clearDefinitions(){this.definitionChange({action:"remove",definitions:this.definitions}),this.definitions={}}renderDefinitions(){return renderAllAttr(this.mapDefinitions())}mapDefinitions(){const definitions=this.definitions,attrs=[];for(let field in definitions)attrs.push([DefinitionMap[field],this.refUrl(definitions[field].id)]);return attrs}refUrl(id){const skipBaseHref=(this.options||{}).skipBaseHref,baseHref=this.baseUrl().replace(/'/g,"\\'");return`url(${skipBaseHref?"":baseHref}#${id})`}baseUrl(){return function(){const base=document.getElementsByTagName("base")[0];let href=document.location.href,url="";if(base&&!(common_support.browser||{}).msie){const hashIndex=href.indexOf("#");-1!==hashIndex&&(href=href.substring(0,hashIndex)),url=href}return url}()}},gradient_stop_node=class extends svg_node{template(){return`<stop ${this.renderOffset()} ${this.renderStyle()} />`}renderOffset(){return renderAttr("offset",this.srcElement.offset())}mapStyle(){const srcElement=this.srcElement;return[["stop-color",srcElement.color()],["stop-opacity",srcElement.opacity()]]}optionsChange(e){"offset"===e.field?this.attr(e.field,e.value):"color"!==e.field&&"opacity"!==e.field||this.css("stop-"+e.field,e.value)}},gradient_node=class extends svg_node{constructor(srcElement){super(srcElement),this.id=srcElement.id,this.loadStops()}loadStops(){const stops=this.srcElement.stops,element=this.element;for(let idx=0;idx<stops.length;idx++){let stopNode=new gradient_stop_node(stops[idx]);this.append(stopNode),element&&stopNode.attachTo(element)}}optionsChange(e){"gradient.stops"===e.field?(base_node.prototype.clear.call(this),this.loadStops()):"gradient"===e.field&&this.allAttr(this.mapCoordinates())}renderCoordinates(){return renderAllAttr(this.mapCoordinates())}mapSpace(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]}},linear_gradient_node=class extends gradient_node{template(){return`<linearGradient id='${this.id}' ${this.renderCoordinates()}>${this.renderChildren()}</linearGradient>`}mapCoordinates(){const srcElement=this.srcElement,start=srcElement.start(),end=srcElement.end();return[["x1",start.x],["y1",start.y],["x2",end.x],["y2",end.y],this.mapSpace()]}},radial_gradient_node=class extends gradient_node{template(){return`<radialGradient id='${this.id}' ${this.renderCoordinates()}>${this.renderChildren()}</radialGradient>`}mapCoordinates(){const srcElement=this.srcElement,center=srcElement.center(),radius=srcElement.radius();return[["cx",center.x],["cy",center.y],["r",radius],this.mapSpace()]}},clip_node=class extends svg_node{constructor(srcElement){super(),this.srcElement=srcElement,this.id=srcElement.id,this.load([srcElement])}template(){return`<clipPath id='${this.id}'>${this.renderChildren()}</clipPath>`}},definition_node=class extends svg_node{constructor(){super(),this.definitionMap={}}attachTo(domElement){this.element=domElement}template(){return`<defs>${this.renderChildren()}</defs>`}definitionChange(e){const{definitions:definitions,action:action}=e;"add"===action?this.addDefinitions(definitions):"remove"===action&&this.removeDefinitions(definitions)}createDefinition(type,item){let nodeType;return"clip"===type?nodeType=clip_node:"fill"===type&&(item instanceof linear_gradient?nodeType=linear_gradient_node:item instanceof radial_gradient&&(nodeType=radial_gradient_node)),new nodeType(item)}addDefinitions(definitions){for(let field in definitions)this.addDefinition(field,definitions[field])}addDefinition(type,srcElement){const{element:element,definitionMap:definitionMap}=this,id=srcElement.id,mapItem=definitionMap[id];if(mapItem)mapItem.count++;else{const node=this.createDefinition(type,srcElement);definitionMap[id]={element:node,count:1},this.append(node),element&&node.attachTo(this.element)}}removeDefinitions(definitions){for(let field in definitions)this.removeDefinition(definitions[field])}removeDefinition(srcElement){const definitionMap=this.definitionMap,id=srcElement.id,mapItem=definitionMap[id];mapItem&&(mapItem.count--,0===mapItem.count&&(this.remove(this.childNodes.indexOf(mapItem.element),1),delete definitionMap[id]))}},root_node=class extends svg_node{constructor(options){super(),this.options=options,this.defs=new definition_node}attachTo(domElement){this.element=domElement,this.defs.attachTo(domElement.firstElementChild)}clear(){base_node.prototype.clear.call(this)}template(){return this.defs.render()+this.renderChildren()}definitionChange(e){this.defs.definitionChange(e)}};class svg_surface_Surface extends core_surface{constructor(element,options){super(element,options),this._root=new root_node(Object.assign({rtl:"rtl"===element_styles_elementStyles(element,"direction").direction},this.options)),render_svg(this.element,this._template()),this._rootElement=this.element.firstElementChild,function(element){let ctm;try{ctm=element.getScreenCTM?element.getScreenCTM():null}catch(e){}if(ctm){const left=-ctm.e%1,top=-ctm.f%1,style=element.style;0===left&&0===top||(style.left=left+"px",style.top=top+"px")}}(this._rootElement),this._root.attachTo(this._rootElement),bindEvents(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove}),this.resize()}destroy(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,unbindEvents(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove})),super.destroy()}translate(offset){const viewBox=`${Math.round(offset.x)} ${Math.round(offset.y)} ${this._size.width} ${this._size.height}`;this._offset=offset,this._rootElement.setAttribute("viewBox",viewBox)}draw(element){super.draw(element),this._root.load([element])}clear(){super.clear(),this._root.clear()}svg(){return"<?xml version='1.0' ?>"+this._template()}exportVisual(){let{_visual:visual,_offset:offset}=this;if(offset){const wrap=new shapes_group;wrap.children.push(visual),wrap.transform(transform_transform().translate(-offset.x,-offset.y)),visual=wrap}return visual}_resize(){this._offset&&this.translate(this._offset)}_template(){return`<svg style='width: 100%; height: 100%; overflow: hidden;' xmlns='${SVG_NS}' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>${this._root.render()}</svg>`}}svg_surface_Surface.prototype.type="svg","undefined"!=typeof document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")&&(core_surface.support.svg=!0,surface_factory.current.register("svg",svg_surface_Surface,10)),node_map.Group=class extends svg_node{template(){return`<g${this.renderId()+this.renderTransform()+this.renderStyle()+this.renderOpacity()+this.renderDefinitions()}>${this.renderChildren()}</g>`}optionsChange(e){"transform"===e.field&&this.transformChange(e.value),super.optionsChange(e)}};const DASH_ARRAYS={dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},ATTRIBUTE_MAP={"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"};class path_node_PathNode extends svg_node{geometryChange(){this.attr("d",this.renderData()),this.invalidate()}optionsChange(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case"transform":this.transformChange(e.value);break;default:const name=ATTRIBUTE_MAP[e.field];name&&this.attr(name,e.value)}super.optionsChange(e)}content(){this.element&&(this.element.textContent=this.srcElement.content())}renderData(){return this.printPath(this.srcElement)}printPath(path){const segments=path.segments,length=segments.length;if(length>0){const parts=[];let output,currentType;for(let i=1;i<length;i++){let segmentType=this.segmentType(segments[i-1],segments[i]);segmentType!==currentType&&(currentType=segmentType,parts.push(segmentType)),parts.push("L"===segmentType?this.printPoints(segments[i].anchor()):this.printPoints(segments[i-1].controlOut(),segments[i].controlIn(),segments[i].anchor()))}return output="M"+this.printPoints(segments[0].anchor())+" "+parts.join(" "),path.options.closed&&(output+="Z"),output}}printPoints(){const points=arguments,length=points.length,result=[];for(let i=0;i<length;i++)result.push(points[i].toString(3));return result.join(" ")}segmentType(segmentStart,segmentEnd){return segmentStart.controlOut()&&segmentEnd.controlIn()?"C":"L"}mapStroke(stroke){const attrs=[];return stroke&&!isTransparent(stroke.color)?(attrs.push(["stroke",stroke.color]),attrs.push(["stroke-width",stroke.width]),attrs.push(["stroke-linecap",this.renderLinecap(stroke)]),attrs.push(["stroke-linejoin",stroke.lineJoin]),defined(stroke.opacity)&&attrs.push(["stroke-opacity",stroke.opacity]),defined(stroke.dashType)&&attrs.push(["stroke-dasharray",this.renderDashType(stroke)])):attrs.push(["stroke","none"]),attrs}renderStroke(){return renderAllAttr(this.mapStroke(this.srcElement.options.stroke))}renderDashType(stroke){const{dashType:dashType,width:width=1}=stroke;if(dashType&&"solid"!==dashType){const dashArray=DASH_ARRAYS[dashType.toLowerCase()],result=[];for(let i=0;i<dashArray.length;i++)result.push(dashArray[i]*width);return result.join(" ")}}renderLinecap(stroke){const{dashType:dashType,lineCap:lineCap}=stroke;return dashType&&"solid"!==dashType?"butt":lineCap}mapFill(fill){const attrs=[];return fill&&"Gradient"===fill.nodeType||(fill&&!isTransparent(fill.color)?(attrs.push(["fill",fill.color]),defined(fill.opacity)&&attrs.push(["fill-opacity",fill.opacity])):attrs.push(["fill","none"])),attrs}renderFill(){return renderAllAttr(this.mapFill(this.srcElement.options.fill))}template(){return`<path ${this.renderId()} ${this.renderStyle()} ${this.renderOpacity()} ${renderAttr("d",this.renderData())}${this.renderStroke()}${this.renderFill()}${this.renderDefinitions()}${this.renderTransform()}></path>`}}node_map.Path=path_node_PathNode;var path_node=path_node_PathNode;node_map.Arc=class extends path_node{renderData(){return this.printPath(this.srcElement.toPath())}},node_map.Circle=class extends path_node{geometryChange(){const center=this.center();this.attr("cx",center.x),this.attr("cy",center.y),this.attr("r",this.radius()),this.invalidate()}center(){return this.srcElement.geometry().center}radius(){return this.srcElement.geometry().radius}template(){return`<circle ${this.renderId()} ${this.renderStyle()} ${this.renderOpacity()}cx='${this.center().x}' cy='${this.center().y}' r='${this.radius()}'${this.renderStroke()} ${this.renderFill()} ${this.renderDefinitions()}`+this.renderTransform()+" ></circle>"}},node_map.Rect=class extends path_node{geometryChange(){const geometry=this.srcElement.geometry();this.attr("x",geometry.origin.x),this.attr("y",geometry.origin.y),this.attr("width",geometry.size.width),this.attr("height",geometry.size.height),this.invalidate()}size(){return this.srcElement.geometry().size}origin(){return this.srcElement.geometry().origin}template(){return`<rect ${this.renderId()} ${this.renderStyle()} ${this.renderOpacity()} x='${this.origin().x}' y='${this.origin().y}' width='${this.size().width}' height='${this.size().height}' ${this.renderStroke()} ${this.renderFill()} ${this.renderDefinitions()} ${this.renderTransform()} />`}},node_map.Image=class extends path_node{geometryChange(){this.allAttr(this.mapPosition()),this.invalidate()}optionsChange(e){"src"===e.field&&this.allAttr(this.mapSource()),super.optionsChange(e)}mapPosition(){const rect=this.srcElement.rect(),tl=rect.topLeft();return[["x",tl.x],["y",tl.y],["width",rect.width()+"px"],["height",rect.height()+"px"]]}renderPosition(){return renderAllAttr(this.mapPosition())}mapSource(encode){let src=this.srcElement.src();return encode&&(src=htmlEncode(src)),[["xlink:href",src]]}renderSource(){return renderAllAttr(this.mapSource(!0))}template(){return`<image preserveAspectRatio='none' ${this.renderId()} ${this.renderStyle()} ${this.renderTransform()} ${this.renderOpacity()}${this.renderPosition()} ${this.renderSource()} ${this.renderDefinitions()}></image>`}};const ENTITY_REGEX=/&(?:[a-zA-Z]+|#\d+);/g;function decodeEntities(text){if(!text||"string"!=typeof text||!ENTITY_REGEX.test(text))return text;const element=decodeEntities._element;return ENTITY_REGEX.lastIndex=0,text.replace(ENTITY_REGEX,match=>(element.innerHTML=match,element.textContent||element.innerText))}"undefined"!=typeof document&&(decodeEntities._element=document.createElement("span")),node_map.Text=class extends path_node{geometryChange(){const pos=this.pos();this.attr("x",pos.x),this.attr("y",pos.y),this.invalidate()}optionsChange(e){"font"===e.field?(this.attr("style",renderStyle(this.mapStyle())),this.geometryChange()):"content"===e.field&&super.content(this.srcElement.content()),super.optionsChange(e)}mapStyle(encode){const style=super.mapStyle(encode);let font=this.srcElement.options.font;return encode&&(font=htmlEncode(font)),style.push(["font",font],["white-space","pre"]),style}pos(){const pos=this.srcElement.position(),size=this.srcElement.measure();return pos.clone().setY(pos.y+size.baseline)}renderContent(){let content=this.srcElement.content();return content=decodeEntities(content),content=htmlEncode(content),normalizeText(content)}renderTextAnchor(){let anchor;return!(this.options||{}).rtl||common_support.browser.msie||common_support.browser.edge||(anchor="end"),renderAttr("text-anchor",anchor)}template(){return`<text ${this.renderId()} ${this.renderTextAnchor()} ${this.renderStyle()} ${this.renderOpacity()}x='${this.pos().x}' y='${this.pos().y}' ${this.renderStroke()} ${this.renderTransform()} ${this.renderDefinitions()}${this.renderFill()}>${this.renderContent()}</text>`}},node_map.MultiPath=class extends path_node{renderData(){const paths=this.srcElement.paths;if(paths.length>0){const result=[];for(let i=0;i<paths.length;i++)result.push(this.printPath(paths[i]));return result.join(" ")}}};var canvas_node_map={};function renderPath(ctx,path){const segments=path.segments;if(0===segments.length)return;let segment=segments[0],anchor=segment.anchor();ctx.moveTo(anchor.x,anchor.y);for(let i=1;i<segments.length;i++){segment=segments[i],anchor=segment.anchor();let prevOut=segments[i-1].controlOut(),controlIn=segment.controlIn();prevOut&&controlIn?ctx.bezierCurveTo(prevOut.x,prevOut.y,controlIn.x,controlIn.y,anchor.x,anchor.y):ctx.lineTo(anchor.x,anchor.y)}path.options.closed&&ctx.closePath()}var canvas_node=class extends base_node{constructor(srcElement){super(srcElement),srcElement&&this.initClip()}initClip(){const clip=this.srcElement.clip();clip&&(this.clip=clip,clip.addObserver(this))}clear(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),super.clear()}clearClip(){this.clip&&(this.clip.removeObserver(this),delete this.clip)}setClip(ctx){this.clip&&(ctx.beginPath(),renderPath(ctx,this.clip),ctx.clip())}optionsChange(e){"clip"===e.field&&(this.clearClip(),this.initClip()),super.optionsChange(e)}setTransform(ctx){if(this.srcElement){const transform=this.srcElement.transform();transform&&ctx.transform.apply(ctx,transform.matrix().toArray(6))}}loadElements(elements,pos,cors){for(let i=0;i<elements.length;i++){let srcElement=elements[i],children=srcElement.children,childNode=new canvas_node_map[srcElement.nodeType](srcElement,cors);children&&children.length>0&&childNode.load(children,pos,cors),defined(pos)?this.insertAt(childNode,pos):this.append(childNode)}}load(elements,pos,cors){this.loadElements(elements,pos,cors),this.invalidate()}setOpacity(ctx){if(this.srcElement){const opacity=this.srcElement.opacity();defined(opacity)&&this.globalAlpha(ctx,opacity)}}globalAlpha(ctx,value){let opactity=value;opactity&&ctx.globalAlpha&&(opactity*=ctx.globalAlpha),ctx.globalAlpha=opactity}visible(){const src=this.srcElement;return!src||src&&!1!==src.options.visible}};class canvas_group_node_GroupNode extends canvas_node{renderTo(ctx){if(!this.visible())return;ctx.save(),this.setTransform(ctx),this.setClip(ctx),this.setOpacity(ctx);const childNodes=this.childNodes;for(let i=0;i<childNodes.length;i++){let child=childNodes[i];child.visible()&&child.renderTo(ctx)}ctx.restore()}}traversable_extend(canvas_group_node_GroupNode.prototype,"childNodes"),canvas_node_map.Group=canvas_group_node_GroupNode;var canvas_group_node=canvas_group_node_GroupNode;class canvas_root_node_RootNode extends canvas_group_node{constructor(canvas,size){super(),this.canvas=canvas,this.size=size,this.ctx=canvas.getContext("2d");const invalidateHandler=this._invalidate.bind(this);this.invalidate=function(fn,delay){let timeout,lastExecTime=0;const throttled=function(){const elapsed=throttle_now()-lastExecTime,args=arguments,exec=function(){fn.apply(null,args),lastExecTime=throttle_now()};if(!lastExecTime)return exec();timeout&&clearTimeout(timeout),elapsed>1e3/60?exec():timeout=setTimeout(exec,1e3/60-elapsed)};return throttled.cancel=function(){clearTimeout(timeout)},throttled}(()=>{animationFrameProxy(invalidateHandler)})}destroy(){super.destroy(),this.canvas=null,this.ctx=null}load(elements,pos,cors){this.loadElements(elements,pos,cors),this._invalidate()}_rescale(){const{canvas:canvas,size:size}=this;let scale=1;"number"==typeof window.devicePixelRatio&&(scale=window.devicePixelRatio),canvas.width=size.width*scale,canvas.height=size.height*scale,this.ctx.scale(scale,scale)}_invalidate(){this.ctx&&(this._rescale(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx))}}traversable_extend(canvas_root_node_RootNode.prototype,"childNodes");var canvas_root_node=canvas_root_node_RootNode,quad_root=class extends Class{constructor(){super(),this.shapes=[]}_add(shape,bbox){this.shapes.push({bbox:bbox,shape:shape}),shape._quadNode=this}pointShapes(point){const shapes=this.shapes,length=shapes.length,result=[];for(let idx=0;idx<length;idx++)shapes[idx].bbox.containsPoint(point)&&result.push(shapes[idx].shape);return result}insert(shape,bbox){this._add(shape,bbox)}remove(shape){const shapes=this.shapes,length=shapes.length;for(let idx=0;idx<length;idx++)if(shapes[idx].shape===shape){shapes.splice(idx,1);break}}};class quad_node_QuadNode extends quad_root{constructor(rect){super(),this.children=[],this.rect=rect}inBounds(rect){const nodeRect=this.rect,nodeBottomRight=nodeRect.bottomRight(),bottomRight=rect.bottomRight();return nodeRect.origin.x<=rect.origin.x&&nodeRect.origin.y<=rect.origin.y&&bottomRight.x<=nodeBottomRight.x&&bottomRight.y<=nodeBottomRight.y}pointShapes(point){const children=this.children,length=children.length,result=super.pointShapes(point);for(let idx=0;idx<length;idx++)append(result,children[idx].pointShapes(point));return result}insert(shape,bbox){const children=this.children;let inserted=!1;if(this.inBounds(bbox)){if(this.shapes.length<4)this._add(shape,bbox);else{children.length||this._initChildren();for(let idx=0;idx<children.length;idx++)if(children[idx].insert(shape,bbox)){inserted=!0;break}inserted||this._add(shape,bbox)}inserted=!0}return inserted}_initChildren(){const{rect:rect,children:children}=this,center=rect.center(),halfWidth=rect.width()/2,halfHeight=rect.height()/2;children.push(new quad_node_QuadNode(new geometry_rect([rect.origin.x,rect.origin.y],[halfWidth,halfHeight])),new quad_node_QuadNode(new geometry_rect([center.x,rect.origin.y],[halfWidth,halfHeight])),new quad_node_QuadNode(new geometry_rect([rect.origin.x,center.y],[halfWidth,halfHeight])),new quad_node_QuadNode(new geometry_rect([center.x,center.y],[halfWidth,halfHeight])))}}var quad_node=quad_node_QuadNode;function zIndexComparer(x1,x2){return x1._zIndex<x2._zIndex?1:x1._zIndex>x2._zIndex?-1:0}var shapes_quad_tree=class extends Class{constructor(){super(),this.initRoots()}initRoots(){this.rootMap={},this.root=new quad_root,this.rootElements=[]}clear(){const rootElements=this.rootElements;for(let idx=0;idx<rootElements.length;idx++)this.remove(rootElements[idx]);this.initRoots()}pointShape(point){const sectorRoot=(this.rootMap[Math.floor(point.x/3e3)]||{})[Math.floor(point.y/3e3)];let result=this.root.pointShapes(point);sectorRoot&&(result=result.concat(sectorRoot.pointShapes(point))),this.assignZindex(result),result.sort(zIndexComparer);for(let idx=0;idx<result.length;idx++)if(result[idx].containsPoint(point))return result[idx]}assignZindex(elements){for(let idx=0;idx<elements.length;idx++){let element=elements[idx],zIndex=0,levelWeight=Math.pow(1e4,75),parents=[];for(;element;)parents.push(element),element=element.parent;for(;parents.length;)element=parents.pop(),zIndex+=((element.parent?element.parent.children:this.rootElements).indexOf(element)+1)*levelWeight,levelWeight/=1e4;elements[idx]._zIndex=zIndex}}optionsChange(e){"transform"!==e.field&&"stroke.width"!==e.field||this.bboxChange(e.element)}geometryChange(e){this.bboxChange(e.element)}bboxChange(element){if("Group"===element.nodeType)for(let idx=0;idx<element.children.length;idx++)this.bboxChange(element.children[idx]);else element._quadNode&&element._quadNode.remove(element),this._insertShape(element)}add(elements){const elementsArray=Array.isArray(elements)?elements.slice(0):[elements];append(this.rootElements,elementsArray),this._insert(elementsArray)}childrenChange(e){if("remove"===e.action)for(let idx=0;idx<e.items.length;idx++)this.remove(e.items[idx]);else this._insert(Array.prototype.slice.call(e.items,0))}_insert(elements){let element;for(;elements.length>0;)element=elements.pop(),element.addObserver(this),"Group"===element.nodeType?append(elements,element.children):this._insertShape(element)}_insertShape(shape){const bbox=shape.bbox();if(bbox){const sectors=this.getSectors(bbox),x=sectors[0][0],y=sectors[1][0];if(this.inRoot(sectors))this.root.insert(shape,bbox);else{const rootMap=this.rootMap;rootMap[x]||(rootMap[x]={}),rootMap[x][y]||(rootMap[x][y]=new quad_node(new geometry_rect([3e3*x,3e3*y],[3e3,3e3]))),rootMap[x][y].insert(shape,bbox)}}}remove(element){if(element.removeObserver(this),"Group"===element.nodeType){const children=element.children;for(let idx=0;idx<children.length;idx++)this.remove(children[idx])}else element._quadNode&&(element._quadNode.remove(element),delete element._quadNode)}inRoot(sectors){return sectors[0].length>1||sectors[1].length>1}getSectors(rect){const bottomRight=rect.bottomRight(),bottomX=Math.floor(bottomRight.x/3e3),bottomY=Math.floor(bottomRight.y/3e3),sectors=[[],[]];for(let x=Math.floor(rect.origin.x/3e3);x<=bottomX;x++)sectors[0].push(x);for(let y=Math.floor(rect.origin.y/3e3);y<=bottomY;y++)sectors[1].push(y);return sectors}};class canvas_surface_Surface extends core_surface{constructor(element,options){super(element,options),this.element.innerHTML=this._template(this);const canvas=this.element.firstElementChild,size=element_size_elementSize(element);canvas.width=size.width,canvas.height=size.height,this._rootElement=canvas,this._root=new canvas_root_node(canvas,size),this._mouseTrackHandler=this._trackMouse.bind(this),bindEvents(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})}destroy(){super.destroy(),this._root&&(this._root.destroy(),this._root=null),this._searchTree&&(this._searchTree.clear(),delete this._searchTree),this._cursor&&(this._cursor.destroy(),delete this._cursor),unbindEvents(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})}draw(element){super.draw(element),this._root.load([element],void 0,this.options.cors),this._searchTree&&this._searchTree.add([element])}clear(){super.clear(),this._root.clear(),this._searchTree&&this._searchTree.clear(),this._cursor&&this._cursor.clear()}eventTarget(e){if(this._searchTree){const point=this._surfacePoint(e);return this._searchTree.pointShape(point)}}image(){const{_root:root,_rootElement:rootElement}=this,loadingStates=[];root.traverse(childNode=>{childNode.loading&&loadingStates.push(childNode.loading)});const promise=createPromise(),resolveDataURL=()=>{root._invalidate();try{const data=rootElement.toDataURL();promise.resolve(data)}catch(e){promise.reject(e)}};var promises;return(promises=loadingStates,Promise.all(promises)).then(resolveDataURL,resolveDataURL),promise}suspendTracking(){super.suspendTracking(),this._searchTree&&(this._searchTree.clear(),delete this._searchTree)}resumeTracking(){if(super.resumeTracking(),!this._searchTree){this._searchTree=new shapes_quad_tree;const childNodes=this._root.childNodes,rootElements=[];for(let idx=0;idx<childNodes.length;idx++)rootElements.push(childNodes[idx].srcElement);this._searchTree.add(rootElements)}}_resize(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.size=this._size,this._root.invalidate()}_template(){return"<canvas style='width: 100%; height: 100%;'></canvas>"}_enableTracking(){this._searchTree=new shapes_quad_tree,this._cursor=new class{constructor(surface){surface.bind("mouseenter",this._mouseenter.bind(this)),surface.bind("mouseleave",this._mouseleave.bind(this)),this.element=surface.element}clear(){this._resetCursor()}destroy(){this._resetCursor(),delete this.element}_mouseenter(e){const cursor=this._shapeCursor(e);cursor?(this._current||(this._defaultCursor=this._getCursor()),this._setCursor(cursor)):this._resetCursor()}_mouseleave(){this._resetCursor()}_shapeCursor(e){let shape=e.element;for(;shape&&!defined(shape.options.cursor);)shape=shape.parent;if(shape)return shape.options.cursor}_getCursor(){if(this.element)return this.element.style.cursor}_setCursor(cursor){this.element&&(this.element.style.cursor=cursor,this._current=cursor)}_resetCursor(){this._current&&(this._setCursor(this._defaultCursor||""),delete this._current)}}(this),super._enableTracking()}_trackMouse(e){if(this._suspendedTracking)return;const shape=this.eventTarget(e);if("click"!==e.type){const currentShape=this._currentShape;currentShape&&currentShape!==shape&&this.trigger("mouseleave",{element:currentShape,originalEvent:e,type:"mouseleave"}),shape&&currentShape!==shape&&this.trigger("mouseenter",{element:shape,originalEvent:e,type:"mouseenter"}),this.trigger("mousemove",{element:shape,originalEvent:e,type:"mousemove"}),this._currentShape=shape}else shape&&this.trigger("click",{element:shape,originalEvent:e,type:"click"})}}canvas_surface_Surface.prototype.type="canvas","undefined"!=typeof document&&document.createElement("canvas").getContext&&(core_surface.support.canvas=!0,surface_factory.current.register("canvas",canvas_surface_Surface,20));class canvas_path_node_PathNode extends canvas_node{renderTo(ctx){ctx.save(),this.setTransform(ctx),this.setClip(ctx),this.setOpacity(ctx),ctx.beginPath(),this.renderPoints(ctx,this.srcElement),this.setLineDash(ctx),this.setLineCap(ctx),this.setLineJoin(ctx),this.setFill(ctx),this.setStroke(ctx),ctx.restore()}setFill(ctx){const fill=this.srcElement.options.fill;let hasFill=!1;return fill&&("Gradient"===fill.nodeType?(this.setGradientFill(ctx,fill),hasFill=!0):isTransparent(fill.color)||(ctx.fillStyle=fill.color,ctx.save(),this.globalAlpha(ctx,fill.opacity),ctx.fill(),ctx.restore(),hasFill=!0)),hasFill}setGradientFill(ctx,fill){const bbox=this.srcElement.rawBBox();let gradient;if(fill instanceof linear_gradient){let start=fill.start(),end=fill.end();gradient=ctx.createLinearGradient(start.x,start.y,end.x,end.y)}else if(fill instanceof radial_gradient){let center=fill.center();gradient=ctx.createRadialGradient(center.x,center.y,0,center.x,center.y,fill.radius())}!function(gradient,stops){for(let idx=0;idx<stops.length;idx++){let stop=stops[idx],color=parseColor(stop.color());color.a*=stop.opacity(),gradient.addColorStop(stop.offset(),color.toCssRgba())}}(gradient,fill.stops),ctx.save(),fill.userSpace()||ctx.transform(bbox.width(),0,0,bbox.height(),bbox.origin.x,bbox.origin.y),ctx.fillStyle=gradient,ctx.fill(),ctx.restore()}setStroke(ctx){const stroke=this.srcElement.options.stroke;if(stroke&&!isTransparent(stroke.color)&&stroke.width>0)return ctx.strokeStyle=stroke.color,ctx.lineWidth=value_or_default_valueOrDefault(stroke.width,1),ctx.save(),this.globalAlpha(ctx,stroke.opacity),ctx.stroke(),ctx.restore(),!0}dashType(){const stroke=this.srcElement.options.stroke;if(stroke&&stroke.dashType)return stroke.dashType.toLowerCase()}setLineDash(ctx){const dashType=this.dashType();if(dashType&&"solid"!==dashType){const dashArray=DASH_ARRAYS[dashType];ctx.setLineDash?ctx.setLineDash(dashArray):(ctx.mozDash=dashArray,ctx.webkitLineDash=dashArray)}}setLineCap(ctx){const dashType=this.dashType(),stroke=this.srcElement.options.stroke;dashType&&"solid"!==dashType?ctx.lineCap="butt":stroke&&stroke.lineCap&&(ctx.lineCap=stroke.lineCap)}setLineJoin(ctx){const stroke=this.srcElement.options.stroke;stroke&&stroke.lineJoin&&(ctx.lineJoin=stroke.lineJoin)}renderPoints(ctx,path){renderPath(ctx,path)}}canvas_node_map.Path=canvas_path_node_PathNode;var canvas_path_node=canvas_path_node_PathNode;canvas_node_map.Arc=class extends canvas_path_node{renderPoints(ctx){renderPath(ctx,this.srcElement.toPath())}},canvas_node_map.Circle=class extends canvas_path_node{renderPoints(ctx){const{center:center,radius:radius}=this.srcElement.geometry();ctx.arc(center.x,center.y,radius,0,2*Math.PI)}},canvas_node_map.Rect=class extends canvas_path_node{renderPoints(ctx){const{origin:origin,size:size}=this.srcElement.geometry();ctx.rect(origin.x,origin.y,size.width,size.height)}},canvas_node_map.Image=class extends canvas_path_node{constructor(srcElement,cors){super(srcElement),this.onLoad=this.onLoad.bind(this),this.onError=this.onError.bind(this),this.loading=createPromise();const img=this.img=new Image;cors&&!/^data:/i.test(srcElement.src())&&(img.crossOrigin=cors),img.src=srcElement.src(),img.complete?this.onLoad():(img.onload=this.onLoad,img.onerror=this.onError)}renderTo(ctx){"resolved"===this.loading.state()&&(ctx.save(),this.setTransform(ctx),this.setClip(ctx),this.drawImage(ctx),ctx.restore())}optionsChange(e){"src"===e.field?(this.loading=createPromise(),this.img.src=this.srcElement.src()):super.optionsChange(e)}onLoad(){this.loading.resolve(),this.invalidate()}onError(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))}drawImage(ctx){const rect=this.srcElement.rect(),topLeft=rect.topLeft();ctx.drawImage(this.img,topLeft.x,topLeft.y,rect.width(),rect.height())}},canvas_node_map.Text=class extends canvas_path_node{renderTo(ctx){const text=this.srcElement,pos=text.position(),size=text.measure();ctx.save(),this.setTransform(ctx),this.setClip(ctx),this.setOpacity(ctx),ctx.beginPath(),ctx.font=text.options.font,ctx.textAlign="left",this.setFill(ctx)&&ctx.fillText(text.content(),pos.x,pos.y+size.baseline),this.setStroke(ctx)&&(this.setLineDash(ctx),ctx.strokeText(text.content(),pos.x,pos.y+size.baseline)),ctx.restore()}},canvas_node_map.MultiPath=class extends canvas_path_node{renderPoints(ctx){const paths=this.srcElement.paths;for(let i=0;i<paths.length;i++)renderPath(ctx,paths[i])}};const HAS_TYPED_ARRAYS="undefined"!=typeof Uint8Array&&common_support.browser&&(!common_support.browser.msie||common_support.browser.version>9),BASE64=(keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",{decode:function(str){for(var input=str.replace(/[^A-Za-z0-9\+\/\=]/g,""),i=0,n=input.length,output=[];i<n;){var enc1=keyStr.indexOf(input.charAt(i++)),enc2=keyStr.indexOf(input.charAt(i++)),enc3=keyStr.indexOf(input.charAt(i++)),enc4=keyStr.indexOf(input.charAt(i++)),chr2=(15&enc2)<<4|enc3>>>2,chr3=(3&enc3)<<6|enc4;output.push(enc1<<2|enc2>>>4),64!=enc3&&output.push(chr2),64!=enc4&&output.push(chr3)}return output},encode:function(bytes){for(var i=0,n=bytes.length,output="";i<n;){var chr1=bytes[i++],chr2=bytes[i++],chr3=bytes[i++],enc2=(3&chr1)<<4|chr2>>>4,enc3=(15&chr2)<<2|chr3>>>6,enc4=63&chr3;i-n==2?enc3=enc4=64:i-n==1&&(enc4=64),output+=keyStr.charAt(chr1>>>2)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4)}return output}});var keyStr;function BinaryStream(data){var offset=0,length=0;null==data?data=HAS_TYPED_ARRAYS?new Uint8Array(256):[]:length=data.length;var ensure=HAS_TYPED_ARRAYS?function(len){if(len>=data.length){var tmp=new Uint8Array(Math.max(len+256,2*data.length));tmp.set(data,0),data=tmp}}:function(){},get=HAS_TYPED_ARRAYS?function(){return new Uint8Array(data.buffer,0,length)}:function(){return data},write=HAS_TYPED_ARRAYS?function(bytes){if("string"==typeof bytes)return writeString(bytes);var len=bytes.length;ensure(offset+len),data.set(bytes,offset),(offset+=len)>length&&(length=offset)}:function(bytes){if("string"==typeof bytes)return writeString(bytes);for(var i=0;i<bytes.length;++i)writeByte(bytes[i])};function readByte(){return offset<length?data[offset++]:0}function writeByte(b){ensure(offset),data[offset++]=255&b,offset>length&&(length=offset)}function readShort(){return readByte()<<8|readByte()}function writeShort(w){writeByte(w>>8),writeByte(w)}function readLong(){return 65536*readShort()+readShort()}function writeLong(w){writeShort(w>>>16&65535),writeShort(65535&w)}function readLong_(){var w=readLong();return w>=2147483648?w-4294967296:w}function writeLong_(w){writeLong(w<0?w+4294967296:w)}function read(len){return times(len,readByte)}function writeString(str){for(var i=0;i<str.length;++i)writeByte(str.charCodeAt(i))}function times(n,reader){for(var ret=new Array(n),i=0;i<n;++i)ret[i]=reader();return ret}var stream={eof:function(){return offset>=length},readByte:readByte,writeByte:writeByte,readShort:readShort,writeShort:writeShort,readLong:readLong,writeLong:writeLong,readFixed:function(){return readLong()/65536},writeFixed:function(f){writeLong(Math.round(65536*f))},readShort_:function(){var w=readShort();return w>=32768?w-65536:w},writeShort_:function(w){writeShort(w<0?w+65536:w)},readLong_:readLong_,writeLong_:writeLong_,readFixed_:function(){return readLong_()/65536},writeFixed_:function(f){writeLong_(Math.round(65536*f))},read:read,write:write,readString:function(len){return String.fromCharCode.apply(String,read(len))},writeString:writeString,times:times,get:get,slice:HAS_TYPED_ARRAYS?function(start,length){if(data.buffer.slice)return new Uint8Array(data.buffer.slice(start,start+length));var x=new Uint8Array(length);return x.set(new Uint8Array(data.buffer,start,length)),x}:function(start,length){return data.slice(start,start+length)},offset:function(pos){return null!=pos?(offset=pos,stream):offset},skip:function(nbytes){offset+=nbytes},toString:function(){throw new Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return length},saveExcursion:function(f){var pos=offset;try{return f()}finally{offset=pos}},writeBase64:function(base64){window.atob?writeString(window.atob(base64)):write(BASE64.decode(base64))},base64:function(){return BASE64.encode(get())}};return stream}function ttf_hasOwnProperty(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function sortedKeys(obj){return Object.keys(obj).sort((function(a,b){return a-b})).map(parseFloat)}function Directory(data){this.raw=data,this.scalerType=data.readLong(),this.tableCount=data.readShort(),this.searchRange=data.readShort(),this.entrySelector=data.readShort(),this.rangeShift=data.readShort();for(var tables=this.tables={},i=0;i<this.tableCount;++i){var entry={tag:data.readString(4),checksum:data.readLong(),offset:data.readLong(),length:data.readLong()};tables[entry.tag]=entry}}function deftable(methods){function Ctor(file,def){this.definition=def,this.length=def.length,this.offset=def.offset,this.file=file,this.rawData=file.raw,this.parse(file.raw)}for(var i in Ctor.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)},methods)ttf_hasOwnProperty(methods,i)&&(Ctor[i]=Ctor.prototype[i]=methods[i]);return Ctor}Directory.prototype={readTable:function(name,Ctor){var def=this.tables[name];if(!def)throw new Error("Table "+name+" not found in directory");return this[name]=def.table=new Ctor(this,def)},render:function(tables){var tableCount=Object.keys(tables).length,maxpow2=Math.pow(2,Math.floor(Math.log(tableCount)/Math.LN2)),searchRange=16*maxpow2,entrySelector=Math.floor(Math.log(maxpow2)/Math.LN2),rangeShift=16*tableCount-searchRange,out=BinaryStream();out.writeLong(this.scalerType),out.writeShort(tableCount),out.writeShort(searchRange),out.writeShort(entrySelector),out.writeShort(rangeShift);var directoryLength=16*tableCount,offset=out.offset()+directoryLength,headOffset=null,tableData=BinaryStream();for(var tag in tables)if(ttf_hasOwnProperty(tables,tag)){var table=tables[tag];for(out.writeString(tag),out.writeLong(this.checksum(table)),out.writeLong(offset),out.writeLong(table.length),tableData.write(table),"head"==tag&&(headOffset=offset),offset+=table.length;offset%4;)tableData.writeByte(0),offset++}out.write(tableData.get());var adjustment=2981146554-this.checksum(out.get());return out.offset(headOffset+8),out.writeLong(adjustment),out.get()},checksum:function(data){data=BinaryStream(data);for(var sum=0;!data.eof();)sum+=data.readLong();return 4294967295&sum}};var POSTSCRIPT_GLYPHS,HeadTable=deftable({parse:function(data){data.offset(this.offset),this.version=data.readLong(),this.revision=data.readLong(),this.checkSumAdjustment=data.readLong(),this.magicNumber=data.readLong(),this.flags=data.readShort(),this.unitsPerEm=data.readShort(),this.created=data.read(8),this.modified=data.read(8),this.xMin=data.readShort_(),this.yMin=data.readShort_(),this.xMax=data.readShort_(),this.yMax=data.readShort_(),this.macStyle=data.readShort(),this.lowestRecPPEM=data.readShort(),this.fontDirectionHint=data.readShort_(),this.indexToLocFormat=data.readShort_(),this.glyphDataFormat=data.readShort_()},render:function(indexToLocFormat){var out=BinaryStream();return out.writeLong(this.version),out.writeLong(this.revision),out.writeLong(0),out.writeLong(this.magicNumber),out.writeShort(this.flags),out.writeShort(this.unitsPerEm),out.write(this.created),out.write(this.modified),out.writeShort_(this.xMin),out.writeShort_(this.yMin),out.writeShort_(this.xMax),out.writeShort_(this.yMax),out.writeShort(this.macStyle),out.writeShort(this.lowestRecPPEM),out.writeShort_(this.fontDirectionHint),out.writeShort_(indexToLocFormat),out.writeShort_(this.glyphDataFormat),out.get()}}),LocaTable=deftable({parse:function(data){data.offset(this.offset),this.offsets=0===this.file.head.indexToLocFormat?data.times(this.length/2,(function(){return 2*data.readShort()})):data.times(this.length/4,data.readLong)},offsetOf:function(id){return this.offsets[id]},lengthOf:function(id){return this.offsets[id+1]-this.offsets[id]},render:function(offsets){for(var out=BinaryStream(),needsLongFormat=offsets[offsets.length-1]>65535,i=0;i<offsets.length;++i)needsLongFormat?out.writeLong(offsets[i]):out.writeShort(offsets[i]/2);return{format:needsLongFormat?1:0,table:out.get()}}}),HheaTable=deftable({parse:function(data){data.offset(this.offset),this.version=data.readLong(),this.ascent=data.readShort_(),this.descent=data.readShort_(),this.lineGap=data.readShort_(),this.advanceWidthMax=data.readShort(),this.minLeftSideBearing=data.readShort_(),this.minRightSideBearing=data.readShort_(),this.xMaxExtent=data.readShort_(),this.caretSlopeRise=data.readShort_(),this.caretSlopeRun=data.readShort_(),this.caretOffset=data.readShort_(),data.skip(8),this.metricDataFormat=data.readShort_(),this.numOfLongHorMetrics=data.readShort()},render:function(ids){var out=BinaryStream();return out.writeLong(this.version),out.writeShort_(this.ascent),out.writeShort_(this.descent),out.writeShort_(this.lineGap),out.writeShort(this.advanceWidthMax),out.writeShort_(this.minLeftSideBearing),out.writeShort_(this.minRightSideBearing),out.writeShort_(this.xMaxExtent),out.writeShort_(this.caretSlopeRise),out.writeShort_(this.caretSlopeRun),out.writeShort_(this.caretOffset),out.write([0,0,0,0,0,0,0,0]),out.writeShort_(this.metricDataFormat),out.writeShort(ids.length),out.get()}}),MaxpTable=deftable({parse:function(data){data.offset(this.offset),this.version=data.readLong(),this.numGlyphs=data.readShort(),this.maxPoints=data.readShort(),this.maxContours=data.readShort(),this.maxComponentPoints=data.readShort(),this.maxComponentContours=data.readShort(),this.maxZones=data.readShort(),this.maxTwilightPoints=data.readShort(),this.maxStorage=data.readShort(),this.maxFunctionDefs=data.readShort(),this.maxInstructionDefs=data.readShort(),this.maxStackElements=data.readShort(),this.maxSizeOfInstructions=data.readShort(),this.maxComponentElements=data.readShort(),this.maxComponentDepth=data.readShort()},render:function(glyphIds){var out=BinaryStream();return out.writeLong(this.version),out.writeShort(glyphIds.length),out.writeShort(this.maxPoints),out.writeShort(this.maxContours),out.writeShort(this.maxComponentPoints),out.writeShort(this.maxComponentContours),out.writeShort(this.maxZones),out.writeShort(this.maxTwilightPoints),out.writeShort(this.maxStorage),out.writeShort(this.maxFunctionDefs),out.writeShort(this.maxInstructionDefs),out.writeShort(this.maxStackElements),out.writeShort(this.maxSizeOfInstructions),out.writeShort(this.maxComponentElements),out.writeShort(this.maxComponentDepth),out.get()}}),HmtxTable=deftable({parse:function(data){data.offset(this.offset);var dir=this.file;this.metrics=data.times(dir.hhea.numOfLongHorMetrics,(function(){return{advance:data.readShort(),lsb:data.readShort_()}})),this.leftSideBearings=data.times(dir.maxp.numGlyphs-dir.hhea.numOfLongHorMetrics,data.readShort_)},forGlyph:function(id){var metrics=this.metrics,n=metrics.length;return id<n?metrics[id]:{advance:metrics[n-1].advance,lsb:this.leftSideBearings[id-n]}},render:function(glyphIds){for(var out=BinaryStream(),i=0;i<glyphIds.length;++i){var m=this.forGlyph(glyphIds[i]);out.writeShort(m.advance),out.writeShort_(m.lsb)}return out.get()}}),GlyfTable=function(){function SimpleGlyph(raw){this.raw=raw}function CompoundGlyph(data){this.raw=data;for(var ids=this.glyphIds=[],offsets=this.idOffsets=[];;){var flags=data.readShort();if(offsets.push(data.offset()),ids.push(data.readShort()),!(32&flags))break;data.skip(1&flags?4:2),128&flags?data.skip(8):64&flags?data.skip(4):8&flags&&data.skip(2)}}return SimpleGlyph.prototype={compound:!1,render:function(){return this.raw.get()}},CompoundGlyph.prototype={compound:!0,render:function(old2new){for(var out=BinaryStream(this.raw.get()),i=0;i<this.glyphIds.length;++i){var id=this.glyphIds[i];out.offset(this.idOffsets[i]),out.writeShort(old2new[id])}return out.get()}},deftable({parse:function(){this.cache={}},glyphFor:function(id){var cache=this.cache;if(ttf_hasOwnProperty(cache,id))return cache[id];var loca=this.file.loca,length=loca.lengthOf(id);if(0===length)return cache[id]=null;var data=this.rawData,offset=this.offset+loca.offsetOf(id),raw=BinaryStream(data.slice(offset,length)),numberOfContours=raw.readShort_(),xMin=raw.readShort_(),yMin=raw.readShort_(),xMax=raw.readShort_(),yMax=raw.readShort_(),glyph=cache[id]=-1==numberOfContours?new CompoundGlyph(raw):new SimpleGlyph(raw);return glyph.numberOfContours=numberOfContours,glyph.xMin=xMin,glyph.yMin=yMin,glyph.xMax=xMax,glyph.yMax=yMax,glyph},render:function(glyphs,oldIds,old2new){for(var out=BinaryStream(),offsets=[],i=0;i<oldIds.length;++i){var glyph=glyphs[oldIds[i]];offsets.push(out.offset()),glyph&&out.write(glyph.render(old2new))}return offsets.push(out.offset()),{table:out.get(),offsets:offsets}}})}(),NameTable=function(){function NameEntry(text,entry){this.text=text,this.length=text.length,this.platformID=entry.platformID,this.platformSpecificID=entry.platformSpecificID,this.languageID=entry.languageID,this.nameID=entry.nameID}return deftable({parse:function(data){data.offset(this.offset),data.readShort();for(var count=data.readShort(),stringOffset=this.offset+data.readShort(),nameRecords=data.times(count,(function(){return{platformID:data.readShort(),platformSpecificID:data.readShort(),languageID:data.readShort(),nameID:data.readShort(),length:data.readShort(),offset:data.readShort()+stringOffset}})),strings=this.strings={},i=0;i<nameRecords.length;++i){var rec=nameRecords[i];data.offset(rec.offset);var text=data.readString(rec.length);strings[rec.nameID]||(strings[rec.nameID]=[]),strings[rec.nameID].push(new NameEntry(text,rec))}this.postscriptEntry=strings[6][0],this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},render:function(psName){var strings=this.strings,strCount=0;for(var i in strings)ttf_hasOwnProperty(strings,i)&&(strCount+=strings[i].length);var out=BinaryStream(),strTable=BinaryStream();for(i in out.writeShort(0),out.writeShort(strCount),out.writeShort(6+12*strCount),strings)if(ttf_hasOwnProperty(strings,i))for(var list=6==i?[new NameEntry(psName,this.postscriptEntry)]:strings[i],j=0;j<list.length;++j){var str=list[j];out.writeShort(str.platformID),out.writeShort(str.platformSpecificID),out.writeShort(str.languageID),out.writeShort(str.nameID),out.writeShort(str.length),out.writeShort(strTable.offset()),strTable.writeString(str.text)}return out.write(strTable.get()),out.get()}})}(),PostTable=(POSTSCRIPT_GLYPHS=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g),deftable({parse:function(data){var numberOfGlyphs;switch(data.offset(this.offset),this.format=data.readLong(),this.italicAngle=data.readFixed_(),this.underlinePosition=data.readShort_(),this.underlineThickness=data.readShort_(),this.isFixedPitch=data.readLong(),this.minMemType42=data.readLong(),this.maxMemType42=data.readLong(),this.minMemType1=data.readLong(),this.maxMemType1=data.readLong(),this.format){case 65536:case 196608:break;case 131072:numberOfGlyphs=data.readShort(),this.glyphNameIndex=data.times(numberOfGlyphs,data.readShort),this.names=[];for(var limit=this.offset+this.length;data.offset()<limit;)this.names.push(data.readString(data.readByte()));break;case 151552:numberOfGlyphs=data.readShort(),this.offsets=data.read(numberOfGlyphs);break;case 262144:this.map=data.times(this.file.maxp.numGlyphs,data.readShort)}},glyphFor:function(code){switch(this.format){case 65536:return POSTSCRIPT_GLYPHS[code]||".notdef";case 131072:var index=this.glyphNameIndex[code];return index<POSTSCRIPT_GLYPHS.length?POSTSCRIPT_GLYPHS[index]:this.names[index-POSTSCRIPT_GLYPHS.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[code]||65535}},render:function(mapping){if(196608==this.format)return this.raw();var out=BinaryStream(this.rawData.slice(this.offset,32));out.writeLong(131072),out.offset(32);for(var indexes=[],strings=[],i=0;i<mapping.length;++i){var post=this.glyphFor(mapping[i]),index=POSTSCRIPT_GLYPHS.indexOf(post);index>=0?indexes.push(index):(indexes.push(POSTSCRIPT_GLYPHS.length+strings.length),strings.push(post))}for(out.writeShort(mapping.length),i=0;i<indexes.length;++i)out.writeShort(indexes[i]);for(i=0;i<strings.length;++i)out.writeByte(strings[i].length),out.writeString(strings[i]);return out.get()}})),CmapTable=function(){function CmapEntry(data,offset,codeMap){var self=this;self.platformID=data.readShort(),self.platformSpecificID=data.readShort(),self.offset=offset+data.readLong(),data.saveExcursion((function(){var code;switch(data.offset(self.offset),self.format=data.readShort(),self.format){case 0:self.length=data.readShort(),self.language=data.readShort();for(var i=0;i<256;++i)codeMap[i]=data.readByte();break;case 4:self.length=data.readShort(),self.language=data.readShort();var segCount=data.readShort()/2;data.skip(6);var endCode=data.times(segCount,data.readShort);data.skip(2);var startCode=data.times(segCount,data.readShort),idDelta=data.times(segCount,data.readShort_),idRangeOffset=data.times(segCount,data.readShort),count=(self.length+self.offset-data.offset())/2,glyphIds=data.times(count,data.readShort);for(i=0;i<segCount;++i){var start=startCode[i],end=endCode[i];for(code=start;code<=end;++code){var glyphId;0===idRangeOffset[i]?glyphId=code+idDelta[i]:0!==(glyphId=glyphIds[idRangeOffset[i]/2-(segCount-i)+(code-start)]||0)&&(glyphId+=idDelta[i]),codeMap[code]=65535&glyphId}}break;case 6:self.length=data.readShort(),self.language=data.readShort(),code=data.readShort();for(var length=data.readShort();length-- >0;)codeMap[code++]=data.readShort();break;case 12:data.readShort(),self.length=data.readLong(),self.language=data.readLong();for(var ngroups=data.readLong();ngroups-- >0;){code=data.readLong();for(var endCharCode=data.readLong(),glyphCode=data.readLong();code<=endCharCode;)codeMap[code++]=glyphCode++}break;default:window.console&&window.console.error("Unhandled CMAP format: "+self.format)}}))}return deftable({parse:function(data){var self=this,offset=self.offset;data.offset(offset),self.codeMap={},self.version=data.readShort();var tableCount=data.readShort();self.tables=data.times(tableCount,(function(){return new CmapEntry(data,offset,self.codeMap)}))},render:function(ncid2ogid,ogid2ngid){var out=BinaryStream();return out.writeShort(0),out.writeShort(1),out.write(function(ncid2ogid,ogid2ngid){var codes=sortedKeys(ncid2ogid),startCodes=[],endCodes=[],last=null,diff=null;function new_gid(charcode){return ogid2ngid[ncid2ogid[charcode]]}for(var i=0;i<codes.length;++i){var code=codes[i],delta=new_gid(code)-code;null!=last&&delta===diff||(last&&endCodes.push(last),startCodes.push(code),diff=delta),last=code}last&&endCodes.push(last),endCodes.push(65535),startCodes.push(65535);var segCount=startCodes.length,segCountX2=2*segCount,searchRange=2*Math.pow(2,Math.floor(Math.log(segCount)/Math.LN2)),entrySelector=Math.log(searchRange/2)/Math.LN2,rangeShift=segCountX2-searchRange,deltas=[],rangeOffsets=[],glyphIds=[];for(i=0;i<segCount;++i){var startCode=startCodes[i],endCode=endCodes[i];if(65535==startCode){deltas.push(0),rangeOffsets.push(0);break}var startGlyph=new_gid(startCode);if(startCode-startGlyph>=32768){deltas.push(0),rangeOffsets.push(2*(glyphIds.length+segCount-i));for(var j=startCode;j<=endCode;++j)glyphIds.push(new_gid(j))}else deltas.push(startGlyph-startCode),rangeOffsets.push(0)}var out=BinaryStream();return out.writeShort(3),out.writeShort(1),out.writeLong(12),out.writeShort(4),out.writeShort(16+8*segCount+2*glyphIds.length),out.writeShort(0),out.writeShort(segCountX2),out.writeShort(searchRange),out.writeShort(entrySelector),out.writeShort(rangeShift),endCodes.forEach(out.writeShort),out.writeShort(0),startCodes.forEach(out.writeShort),deltas.forEach(out.writeShort_),rangeOffsets.forEach(out.writeShort),glyphIds.forEach(out.writeShort),out.get()}(ncid2ogid,ogid2ngid)),out.get()}})}(),OS2Table=deftable({parse:function(data){data.offset(this.offset),this.version=data.readShort(),this.averageCharWidth=data.readShort_(),this.weightClass=data.readShort(),this.widthClass=data.readShort(),this.type=data.readShort(),this.ySubscriptXSize=data.readShort_(),this.ySubscriptYSize=data.readShort_(),this.ySubscriptXOffset=data.readShort_(),this.ySubscriptYOffset=data.readShort_(),this.ySuperscriptXSize=data.readShort_(),this.ySuperscriptYSize=data.readShort_(),this.ySuperscriptXOffset=data.readShort_(),this.ySuperscriptYOffset=data.readShort_(),this.yStrikeoutSize=data.readShort_(),this.yStrikeoutPosition=data.readShort_(),this.familyClass=data.readShort_(),this.panose=data.times(10,data.readByte),this.charRange=data.times(4,data.readLong),this.vendorID=data.readString(4),this.selection=data.readShort(),this.firstCharIndex=data.readShort(),this.lastCharIndex=data.readShort(),this.version>0&&(this.ascent=data.readShort_(),this.descent=data.readShort_(),this.lineGap=data.readShort_(),this.winAscent=data.readShort(),this.winDescent=data.readShort(),this.codePageRange=data.times(2,data.readLong),this.version>1&&(this.xHeight=data.readShort(),this.capHeight=data.readShort(),this.defaultChar=data.readShort(),this.breakChar=data.readShort(),this.maxContext=data.readShort()))},render:function(){return this.raw()}}),subsetTag=1e5;function Subfont(font){this.font=font,this.subset={},this.unicodes={},this.ogid2ngid={0:0},this.ngid2ogid={0:0},this.ncid2ogid={},this.next=this.firstChar=1,this.nextGid=1,this.psName=function(){for(var ret="",n=String(subsetTag),i=0;i<n.length;++i)ret+=String.fromCharCode(n.charCodeAt(i)-48+65);return++subsetTag,ret}()+"+"+this.font.psName}function TTFFont(rawData,name){var self=this,data=self.contents=BinaryStream(rawData);if("ttcf"==data.readString(4)){var offset;const parse=function(){data.offset(offset),self.parse()};if(!name)throw new Error("Must specify a name for TTC files");data.readLong();for(var numFonts=data.readLong(),i=0;i<numFonts;++i)if(offset=data.readLong(),data.saveExcursion(parse),self.psName==name)return;throw new Error("Font "+name+" not found in collection")}data.offset(0),self.parse()}Subfont.prototype={use:function(ch){var self=this;if("string"==typeof ch)return function(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}(ch).reduce((function(ret,code){return ret+String.fromCharCode(self.use(code))}),"");var code=self.unicodes[ch];if(!code){code=self.next++,self.subset[code]=ch,self.unicodes[ch]=code;var old_gid=self.font.cmap.codeMap[ch];if(old_gid&&(self.ncid2ogid[code]=old_gid,null==self.ogid2ngid[old_gid])){var new_gid=self.nextGid++;self.ogid2ngid[old_gid]=new_gid,self.ngid2ogid[new_gid]=old_gid}}return code},encodeText:function(text){return this.use(text)},glyphIds:function(){return sortedKeys(this.ogid2ngid)},glyphsFor:function(glyphIds,result){result||(result={});for(var i=0;i<glyphIds.length;++i){var id=glyphIds[i];if(!result[id]){var glyph=result[id]=this.font.glyf.glyphFor(id);glyph&&glyph.compound&&this.glyphsFor(glyph.glyphIds,result)}}return result},render:function(){var glyphs=this.glyphsFor(this.glyphIds());for(var old_gid in glyphs)if(ttf_hasOwnProperty(glyphs,old_gid)&&(old_gid=parseInt(old_gid,10),null==this.ogid2ngid[old_gid])){var new_gid=this.nextGid++;this.ogid2ngid[old_gid]=new_gid,this.ngid2ogid[new_gid]=old_gid}var old_gid_ids=sortedKeys(this.ngid2ogid).map((function(id){return this.ngid2ogid[id]}),this),font=this.font,glyf=font.glyf.render(glyphs,old_gid_ids,this.ogid2ngid),loca=font.loca.render(glyf.offsets);this.lastChar=this.next-1;var tables={cmap:CmapTable.render(this.ncid2ogid,this.ogid2ngid),glyf:glyf.table,loca:loca.table,hmtx:font.hmtx.render(old_gid_ids),hhea:font.hhea.render(old_gid_ids),maxp:font.maxp.render(old_gid_ids),post:font.post.render(old_gid_ids),name:font.name.render(this.psName),head:font.head.render(loca.format),"OS/2":font.os2.render()};return this.font.directory.render(tables)},cidToGidMap:function(){for(var out=BinaryStream(),len=0,cid=this.firstChar;cid<this.next;++cid){for(;len<cid;)out.writeShort(0),len++;var old_gid=this.ncid2ogid[cid];out.writeShort(old_gid?this.ogid2ngid[old_gid]:0),len++}return out.get()}},TTFFont.prototype={parse:function(){var dir=this.directory=new Directory(this.contents);this.head=dir.readTable("head",HeadTable),this.loca=dir.readTable("loca",LocaTable),this.hhea=dir.readTable("hhea",HheaTable),this.maxp=dir.readTable("maxp",MaxpTable),this.hmtx=dir.readTable("hmtx",HmtxTable),this.glyf=dir.readTable("glyf",GlyfTable),this.name=dir.readTable("name",NameTable),this.post=dir.readTable("post",PostTable),this.cmap=dir.readTable("cmap",CmapTable),this.os2=dir.readTable("OS/2",OS2Table),this.psName=this.name.postscriptName,this.ascent=this.os2.ascent||this.hhea.ascent,this.descent=this.os2.descent||this.hhea.descent,this.lineGap=this.os2.lineGap||this.hhea.lineGap,this.scale=1e3/this.head.unitsPerEm},widthOfGlyph:function(glyph){return this.hmtx.forGlyph(glyph).advance*this.scale},makeSubset:function(){return new Subfont(this)}};const deflate=__webpack_require__("wSl+").deflate,core_browser=common_support.browser,NL="\n";var RESOURCE_COUNTER=0;const PAPER_SIZE={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]};var FONT_CACHE={"Times-Roman":!0,"Times-Bold":!0,"Times-Italic":!0,"Times-BoldItalic":!0,Helvetica:!0,"Helvetica-Bold":!0,"Helvetica-Oblique":!0,"Helvetica-BoldOblique":!0,Courier:!0,"Courier-Bold":!0,"Courier-Oblique":!0,"Courier-BoldOblique":!0,Symbol:!0,ZapfDingbats:!0};function pad(str,len,ch){for(;str.length<len;)str=ch+str;return str}function zeropad(n,len){return pad(String(n),len,"0")}function core_hasOwnProperty(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}var core_isArray=Array.isArray||function(obj){return obj instanceof Array};function core_isDate(obj){return obj instanceof Date}function renderArray(a,out){out("["),a.length>0&&out.withIndent((function(){for(var i=0;i<a.length;++i)i>0&&i%8==0?out.indent(a[i]):out(" ",a[i])})),out(" ]")}function renderDate(date,out){out("(D:",zeropad(date.getUTCFullYear(),4),zeropad(date.getUTCMonth()+1,2),zeropad(date.getUTCDate(),2),zeropad(date.getUTCHours(),2),zeropad(date.getUTCMinutes(),2),zeropad(date.getUTCSeconds(),2),"Z)")}function mm2pt(mm){return mm*(72/25.4)}function cm2pt(cm){return mm2pt(10*cm)}function in2pt(inch){return 72*inch}function unitsToPoints(x,def){if("number"==typeof x)return x;var m;if("string"==typeof x&&(m=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(x))){var num=parseFloat(m[1]);if(!isNaN(num))return"pt"==m[2]?num:{mm:mm2pt,cm:cm2pt,in:in2pt}[m[2]](num)}if(null!=def)return def;throw new Error("Can't parse unit: "+x)}function PDFValue(){}function defclass(Ctor,proto,Base){for(var i in Base||(Base=PDFValue),Ctor.prototype=new Base,proto)core_hasOwnProperty(proto,i)&&(Ctor.prototype[i]=proto[i]);return Ctor}PDFValue.prototype.beforeRender=function(){};var PDFString=defclass((function(value,utf16be){this.value=value,this.utf16be=Boolean(utf16be)}),{render:function(out){let txt=this.value;txt.length>0&&(txt=this.value.replace(/([\(\)\\])/g,"\\$1"),this.utf16be&&(txt=""+function(input){let output="";for(let i=0;i<input.length;i++){const c=input.charCodeAt(i);if(c<65535)output+=encodeUnit(c);else{const trail=56320+(c-65536&1023);output+=encodeUnit(55296+(c-65536>>10)),output+=encodeUnit(trail)}}return output}(txt))),out("(",txt,")")},toString:function(){return this.value}}),PDFHexString=defclass((function(value){this.value=value}),{render:function(out){out("<");for(var i=0;i<this.value.length;++i)out(zeropad(this.value.charCodeAt(i).toString(16),4));out(">")}},PDFString),PDFName=defclass((function(name){this.name=name}),{render:function(out){out("/"+this.escape())},escape:function(){return this.name.replace(/[^\x21-\x7E]/g,(function(c){return"#"+zeropad(c.charCodeAt(0).toString(16),2)}))},toString:function(){return this.name}}),PDFName_cache={};function core_(name){return core_hasOwnProperty(PDFName_cache,name)?PDFName_cache[name]:PDFName_cache[name]=new PDFName(name)}PDFName.get=core_;var PDFDictionary=defclass((function(props){this.props=props}),{render:function(out){var props=this.props,empty=!0;out("<<"),out.withIndent((function(){for(var i in props)core_hasOwnProperty(props,i)&&!/^_/.test(i)&&(empty=!1,out.indent(core_(i)," ",props[i]))})),empty||out.indent(),out(">>")}}),core_PDFStream=defclass((function(data,props,compress){if("string"==typeof data){var tmp=BinaryStream();tmp.write(data),data=tmp}this.data=data,this.props=props||{},this.compress=compress}),{render:function(out){var data=this.data.get(),props=this.props;this.compress&&(props.Filter?props.Filter instanceof Array||(props.Filter=[props.Filter]):props.Filter=[],props.Filter.unshift(core_("FlateDecode")),data=deflate(data)),props.Length=data.length,out(new PDFDictionary(props)," stream",NL),out.writeData(data),out(NL,"endstream")}});defclass((function(){this.props={Type:core_("Catalog")}}),{setPages:function(pagesObj){this.props.Pages=pagesObj}},PDFDictionary),defclass((function(){this.props={Type:core_("Pages"),Kids:[],Count:0}}),{addPage:function(pageObj){this.props.Kids.push(pageObj),this.props.Count++}},PDFDictionary),defclass((function(name){this.props={Type:core_("Font"),Subtype:core_("Type1"),BaseFont:core_(name)},this._resourceName=core_("F"+ ++RESOURCE_COUNTER)}),{encodeText:function(str){return new PDFString(String(str))}},PDFDictionary);var PDFFont=defclass((function(pdf,font,props){(props=this.props=props||{}).Type=core_("Font"),props.Subtype=core_("Type0"),props.Encoding=core_("Identity-H"),this._pdf=pdf,this._font=font,this._sub=font.makeSubset(),this._resourceName=core_("F"+ ++RESOURCE_COUNTER);var head=font.head;this.name=font.psName;var scale=this.scale=font.scale;this.bbox=[head.xMin*scale,head.yMin*scale,head.xMax*scale,head.yMax*scale],this.italicAngle=font.post.italicAngle,this.ascent=font.ascent*scale,this.descent=font.descent*scale,this.lineGap=font.lineGap*scale,this.capHeight=font.os2.capHeight||this.ascent,this.xHeight=font.os2.xHeight||0,this.stemV=0,this.familyClass=(font.os2.familyClass||0)>>8,this.isSerif=this.familyClass>=1&&this.familyClass<=7,this.isScript=10==this.familyClass,this.flags=(font.post.isFixedPitch?1:0)|(this.isSerif?2:0)|(this.isScript?8:0)|(0!==this.italicAngle?64:0)|32}),{encodeText:function(text){return new PDFHexString(this._sub.encodeText(String(text)))},getTextWidth:function(fontSize,text){for(var width=0,codeMap=this._font.cmap.codeMap,i=0;i<text.length;++i){var glyphId=codeMap[text.charCodeAt(i)];width+=this._font.widthOfGlyph(glyphId||0)}return width*fontSize/1e3},beforeRender:function(){var self=this,sub=self._sub,data=sub.render(),fontStream=new core_PDFStream(BinaryStream(data),{Length1:data.length},!0),descriptor=self._pdf.attach(new PDFDictionary({Type:core_("FontDescriptor"),FontName:core_(self._sub.psName),FontBBox:self.bbox,Flags:self.flags,StemV:self.stemV,ItalicAngle:self.italicAngle,Ascent:self.ascent,Descent:self.descent,CapHeight:self.capHeight,XHeight:self.xHeight,FontFile2:self._pdf.attach(fontStream)})),cmap=sub.ncid2ogid,firstChar=sub.firstChar,lastChar=sub.lastChar,charWidths=[];!function loop(i,chunk){if(i<=lastChar){var gid=cmap[i];null==gid?loop(i+1):(chunk||charWidths.push(i,chunk=[]),chunk.push(self._font.widthOfGlyph(gid)),loop(i+1,chunk))}}(firstChar);var descendant=new PDFDictionary({Type:core_("Font"),Subtype:core_("CIDFontType2"),BaseFont:core_(self._sub.psName),CIDSystemInfo:new PDFDictionary({Registry:new PDFString("Adobe"),Ordering:new PDFString("Identity"),Supplement:0}),FontDescriptor:descriptor,FirstChar:firstChar,LastChar:lastChar,DW:Math.round(self._font.widthOfGlyph(0)),W:charWidths,CIDToGIDMap:self._pdf.attach(self._makeCidToGidMap())}),dict=self.props;dict.BaseFont=core_(self._sub.psName),dict.DescendantFonts=[self._pdf.attach(descendant)];var unimap=new PDFToUnicodeCmap(firstChar,lastChar,sub.subset),unimapStream=new core_PDFStream(function(){var indentLevel=0,output=BinaryStream();function out(){for(var i=0;i<arguments.length;++i){var x=arguments[i];if(void 0===x)throw new Error("Cannot output undefined to PDF");if(x instanceof PDFValue)x.beforeRender(out),x.render(out);else if(core_isArray(x))renderArray(x,out);else if(core_isDate(x))renderDate(x,out);else if("number"==typeof x){if(isNaN(x))throw new Error("Cannot output NaN to PDF");var num=x.toFixed(7);num.indexOf(".")>=0&&(num=num.replace(/\.?0+$/,"")),"-0"==num&&(num="0"),output.writeString(num)}else/string|boolean/.test(typeof x)?output.writeString(String(x)):"function"==typeof x.get?output.write(x.get()):"object"==typeof x&&(x?out(new PDFDictionary(x)):output.writeString("null"))}}return out.writeData=function(data){output.write(data)},out.withIndent=function(f){++indentLevel,f(out),--indentLevel},out.indent=function(){out(NL,pad("",2*indentLevel,"  ")),out.apply(null,arguments)},out.offset=function(){return output.offset()},out.toString=function(){throw new Error("FIX CALLER")},out.get=function(){return output.get()},out.stream=function(){return output},out}(),null,!0);unimapStream.data(unimap),dict.ToUnicode=self._pdf.attach(unimapStream)},_makeCidToGidMap:function(){return new core_PDFStream(BinaryStream(this._sub.cidToGidMap()),null,!0)}},PDFDictionary),PDFToUnicodeCmap=defclass((function(firstChar,lastChar,map){this.firstChar=firstChar,this.lastChar=lastChar,this.map=map}),{render:function(out){out.indent("/CIDInit /ProcSet findresource begin"),out.indent("12 dict begin"),out.indent("begincmap"),out.indent("/CIDSystemInfo <<"),out.indent("  /Registry (Adobe)"),out.indent("  /Ordering (UCS)"),out.indent("  /Supplement 0"),out.indent(">> def"),out.indent("/CMapName /Adobe-Identity-UCS def"),out.indent("/CMapType 2 def"),out.indent("1 begincodespacerange"),out.indent("  <0000><ffff>"),out.indent("endcodespacerange");var self=this;out.indent(self.lastChar-self.firstChar+1," beginbfchar"),out.withIndent((function(){for(var code=self.firstChar;code<=self.lastChar;++code){var str=[self.map[code]].map((function(value){var output="";return value>65535&&(value-=65536,output+=String.fromCharCode(value>>>10&1023|55296),value=56320|1023&value),output+String.fromCharCode(value)})).join("");out.indent("<",zeropad(code.toString(16),4),">","<");for(var i=0;i<str.length;++i)out(zeropad(str.charCodeAt(i).toString(16),4));out(">")}})),out.indent("endbfchar"),out.indent("endcmap"),out.indent("CMapName currentdict /CMap defineresource pop"),out.indent("end"),out.indent("end")}});function makeHash(a){return a.map((function(x){return core_isArray(x)?makeHash(x):"number"==typeof x?(Math.round(1e3*x)/1e3).toFixed(3):x})).join(" ")}function cacheColorGradientFunction(pdf,r1,g1,b1,r2,g2,b2){var hash=makeHash([r1,g1,b1,r2,g2,b2]),func=pdf.GRAD_COL_FUNCTIONS[hash];return func||(func=pdf.GRAD_COL_FUNCTIONS[hash]=pdf.attach(new PDFDictionary({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[r1,g1,b1],C1:[r2,g2,b2]}))),func}function cacheOpacityGradientFunction(pdf,a1,a2){var hash=makeHash([a1,a2]),func=pdf.GRAD_OPC_FUNCTIONS[hash];return func||(func=pdf.GRAD_OPC_FUNCTIONS[hash]=pdf.attach(new PDFDictionary({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[a1],C1:[a2]}))),func}defclass((function(pdf,props){this._pdf=pdf,this._rcount=0,this._textMode=!1,this._fontResources={},this._gsResources={},this._xResources={},this._patResources={},this._shResources={},this._opacity=1,this._matrix=[1,0,0,1,0,0],this._annotations=[],this._font=null,this._fontSize=null,this._contextStack=[],(props=this.props=props||{}).Type=core_("Page"),props.ProcSet=[core_("PDF"),core_("Text"),core_("ImageB"),core_("ImageC"),core_("ImageI")],props.Resources=new PDFDictionary({Font:new PDFDictionary(this._fontResources),ExtGState:new PDFDictionary(this._gsResources),XObject:new PDFDictionary(this._xResources),Pattern:new PDFDictionary(this._patResources),Shading:new PDFDictionary(this._shResources)}),props.Annots=this._annotations}),{_out:function(){this._content.data.apply(null,arguments)},transform:function(a,b,c,d,e,f){isIdentityMatrix(arguments)||(this._matrix=mmul(arguments,this._matrix),this._out(a," ",b," ",c," ",d," ",e," ",f," cm"),this._out(NL))},translate:function(dx,dy){this.transform(1,0,0,1,dx,dy)},scale:function(sx,sy){this.transform(sx,0,0,sy,0,0)},rotate:function(angle){var cos=Math.cos(angle),sin=Math.sin(angle);this.transform(cos,sin,-sin,cos,0,0)},beginText:function(){this._textMode=!0,this._out("BT",NL)},endText:function(){this._textMode=!1,this._out("ET",NL)},_requireTextMode:function(){if(!this._textMode)throw new Error("Text mode required; call page.beginText() first")},_requireFont:function(){if(!this._font)throw new Error("No font selected; call page.setFont() first")},setFont:function(font,size){this._requireTextMode(),null==font?font=this._font:font instanceof PDFFont||(font=this._pdf.getFont(font)),null==size&&(size=this._fontSize),this._fontResources[font._resourceName]=font,this._font=font,this._fontSize=size,this._out(font._resourceName," ",size," Tf",NL)},setTextLeading:function(size){this._requireTextMode(),this._out(size," TL",NL)},setTextRenderingMode:function(mode){this._requireTextMode(),this._out(mode," Tr",NL)},showText:function(text,requestedWidth){if(this._requireFont(),text.length>1&&requestedWidth&&this._font instanceof PDFFont){var outputWidth=this._font.getTextWidth(this._fontSize,text);this._out(requestedWidth/outputWidth*100," Tz ")}this._out(this._font.encodeText(text)," Tj",NL)},showTextNL:function(text){this._requireFont(),this._out(this._font.encodeText(text)," '",NL)},addLink:function(uri,box){var ll=this._toPage({x:box.left,y:box.bottom}),ur=this._toPage({x:box.right,y:box.top});this._annotations.push(new PDFDictionary({Type:core_("Annot"),Subtype:core_("Link"),Rect:[ll.x,ll.y,ur.x,ur.y],Border:[0,0,0],A:new PDFDictionary({Type:core_("Action"),S:core_("URI"),URI:new PDFString(uri)})}))},setStrokeColor:function(r,g,b){this._out(r," ",g," ",b," RG",NL)},setOpacity:function(opacity){this.setFillOpacity(opacity),this.setStrokeOpacity(opacity),this._opacity*=opacity},setStrokeOpacity:function(opacity){if(opacity<1){var gs=this._pdf.getOpacityGS(this._opacity*opacity,!0);this._gsResources[gs._resourceName]=gs,this._out(gs._resourceName," gs",NL)}},setFillColor:function(r,g,b){this._out(r," ",g," ",b," rg",NL)},setFillOpacity:function(opacity){if(opacity<1){var gs=this._pdf.getOpacityGS(this._opacity*opacity,!1);this._gsResources[gs._resourceName]=gs,this._out(gs._resourceName," gs",NL)}},gradient:function(gradient,box){this.save(),this.rect(box.left,box.top,box.width,box.height),this.clip(),gradient.userSpace||this.transform(box.width,0,0,box.height,box.left,box.top);var oname,g=function(pdf,gradient,box){var isRadial="radial"==gradient.type,funcs=function(pdf,stops){var i,cur,prevColor,curColor,hasAlpha=!1,opacities=[],colors=[],offsets=[],encode=[];for(i=1;i<stops.length;++i)colors.push(cacheColorGradientFunction(pdf,(prevColor=stops[i-1].color).r,prevColor.g,prevColor.b,(curColor=(cur=stops[i]).color).r,curColor.g,curColor.b)),(prevColor.a<1||curColor.a<1)&&(hasAlpha=!0),offsets.push(cur.offset),encode.push(0,1);if(hasAlpha)for(i=1;i<stops.length;++i)opacities.push(cacheOpacityGradientFunction(pdf,(prevColor=stops[i-1].color).a,(curColor=(cur=stops[i]).color).a));return offsets.pop(),{hasAlpha:hasAlpha,colors:assemble(colors),opacities:hasAlpha?assemble(opacities):null};function assemble(funcs){return 1==funcs.length?funcs[0]:{FunctionType:3,Functions:funcs,Domain:[0,1],Bounds:offsets,Encode:encode}}}(pdf,gradient.stops),coords=isRadial?[gradient.start.x,gradient.start.y,gradient.start.r,gradient.end.x,gradient.end.y,gradient.end.r]:[gradient.start.x,gradient.start.y,gradient.end.x,gradient.end.y],shading=function(pdf,isRadial,stops,coords,funcs,box){var shading,hash;if(!box){var a=[isRadial].concat(coords);stops.forEach((function(x){a.push(x.offset,x.color.r,x.color.g,x.color.b)})),hash=makeHash(a),shading=pdf.GRAD_COL[hash]}return shading||(shading=new PDFDictionary({Type:core_("Shading"),ShadingType:isRadial?3:2,ColorSpace:core_("DeviceRGB"),Coords:coords,Domain:[0,1],Function:funcs,Extend:[!0,!0]}),pdf.attach(shading),shading._resourceName="S"+ ++RESOURCE_COUNTER,hash&&(pdf.GRAD_COL[hash]=shading)),shading}(pdf,isRadial,gradient.stops,coords,funcs.colors,gradient.userSpace&&box),opacity=funcs.hasAlpha?function(pdf,isRadial,stops,coords,funcs,box){var opacity,hash;if(!box){var a=[isRadial].concat(coords);stops.forEach((function(x){a.push(x.offset,x.color.a)})),hash=makeHash(a),opacity=pdf.GRAD_OPC[hash]}return opacity||(opacity=new PDFDictionary({Type:core_("ExtGState"),AIS:!1,CA:1,ca:1,SMask:{Type:core_("Mask"),S:core_("Luminosity"),G:pdf.attach(new core_PDFStream("/a0 gs /s0 sh",{Type:core_("XObject"),Subtype:core_("Form"),FormType:1,BBox:box?[box.left,box.top+box.height,box.left+box.width,box.top]:[0,1,1,0],Group:{Type:core_("Group"),S:core_("Transparency"),CS:core_("DeviceGray"),I:!0},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:core_("DeviceGray"),Coords:coords,Domain:[0,1],ShadingType:isRadial?3:2,Function:funcs,Extend:[!0,!0]}}}}))}}),pdf.attach(opacity),opacity._resourceName="O"+ ++RESOURCE_COUNTER,hash&&(pdf.GRAD_OPC[hash]=opacity)),opacity}(pdf,isRadial,gradient.stops,coords,funcs.opacities,gradient.userSpace&&box):null;return{hasAlpha:funcs.hasAlpha,shading:shading,opacity:opacity}}(this._pdf,gradient,box),sname=g.shading._resourceName;this._shResources[sname]=g.shading,g.hasAlpha&&(this._gsResources[oname=g.opacity._resourceName]=g.opacity,this._out("/"+oname+" gs ")),this._out("/"+sname+" sh",NL),this.restore()},setDashPattern:function(dashArray,dashPhase){this._out(dashArray," ",dashPhase," d",NL)},setLineWidth:function(width){this._out(width," w",NL)},setLineCap:function(lineCap){this._out(lineCap," J",NL)},setLineJoin:function(lineJoin){this._out(lineJoin," j",NL)},setMitterLimit:function(mitterLimit){this._out(mitterLimit," M",NL)},save:function(){this._contextStack.push(this._context()),this._out("q",NL)},restore:function(){this._out("Q",NL),this._context(this._contextStack.pop())},moveTo:function(x,y){this._out(x," ",y," m",NL)},lineTo:function(x,y){this._out(x," ",y," l",NL)},bezier:function(x1,y1,x2,y2,x3,y3){this._out(x1," ",y1," ",x2," ",y2," ",x3," ",y3," c",NL)},bezier1:function(x1,y1,x3,y3){this._out(x1," ",y1," ",x3," ",y3," y",NL)},bezier2:function(x2,y2,x3,y3){this._out(x2," ",y2," ",x3," ",y3," v",NL)},close:function(){this._out("h",NL)},rect:function(x,y,w,h){this._out(x," ",y," ",w," ",h," re",NL)},ellipse:function(x,y,rx,ry){function _X(v){return x+v}function _Y(v){return y+v}var k=.5522847498307936;this.moveTo(_X(0),_Y(ry)),this.bezier(_X(rx*k),_Y(ry),_X(rx),_Y(ry*k),_X(rx),_Y(0)),this.bezier(_X(rx),_Y(-ry*k),_X(rx*k),_Y(-ry),_X(0),_Y(-ry)),this.bezier(_X(-rx*k),_Y(-ry),_X(-rx),_Y(-ry*k),_X(-rx),_Y(0)),this.bezier(_X(-rx),_Y(ry*k),_X(-rx*k),_Y(ry),_X(0),_Y(ry))},circle:function(x,y,r){this.ellipse(x,y,r,r)},stroke:function(){this._out("S",NL)},nop:function(){this._out("n",NL)},clip:function(){this._out("W n",NL)},clipStroke:function(){this._out("W S",NL)},closeStroke:function(){this._out("s",NL)},fill:function(){this._out("f",NL)},fillStroke:function(){this._out("B",NL)},drawImage:function(url){var img=this._pdf.getImage(url);img&&(this._xResources[img._resourceName]=img,this._out(img._resourceName," Do",NL))},comment:function(txt){var self=this;txt.split(/\r?\n/g).forEach((function(line){self._out("% ",line,NL)}))},_context:function(val){if(null==val)return{opacity:this._opacity,matrix:this._matrix};this._opacity=val.opacity,this._matrix=val.matrix},_toPage:function(p){var m=this._matrix;return{x:m[0]*p.x+m[2]*p.y+m[4],y:m[1]*p.x+m[3]*p.y+m[5]}}},PDFDictionary);var FONT_MAPPINGS={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique",zapfdingbats:"ZapfDingbats","zapfdingbats|bold":"ZapfDingbats","zapfdingbats|italic":"ZapfDingbats","zapfdingbats|bold|italic":"ZapfDingbats"};function fontAlias(alias,name){alias=alias.toLowerCase(),FONT_MAPPINGS[alias]=function(){return FONT_MAPPINGS[name]},FONT_MAPPINGS[alias+"|bold"]=function(){return FONT_MAPPINGS[name+"|bold"]},FONT_MAPPINGS[alias+"|italic"]=function(){return FONT_MAPPINGS[name+"|italic"]},FONT_MAPPINGS[alias+"|bold|italic"]=function(){return FONT_MAPPINGS[name+"|bold|italic"]}}function mmul(a,b){var a1=a[0],b1=a[1],c1=a[2],d1=a[3],e1=a[4],f1=a[5],a2=b[0],b2=b[1],c2=b[2],d2=b[3];return[a1*a2+b1*c2,a1*b2+b1*d2,c1*a2+d1*c2,c1*b2+d1*d2,e1*a2+f1*c2+b[4],e1*b2+f1*d2+b[5]]}function isIdentityMatrix(m){return 1===m[0]&&0===m[1]&&0===m[2]&&1===m[3]&&0===m[4]&&0===m[5]}fontAlias("Times New Roman","serif"),fontAlias("Courier New","monospace"),fontAlias("Arial","sans-serif"),fontAlias("Helvetica","sans-serif"),fontAlias("Verdana","sans-serif"),fontAlias("Tahoma","sans-serif"),fontAlias("Georgia","sans-serif"),fontAlias("Monaco","monospace"),fontAlias("Andale Mono","monospace");const html_core_browser=common_support.browser||{};function core_slice(thing){return Array.prototype.slice.call(thing)}var core_IMAGE_CACHE={},nodeInfo=function(){var nodeInfo={};return nodeInfo._root=nodeInfo,nodeInfo}();const microsoft=!("undefined"==typeof window)&&(html_core_browser.msie||html_core_browser.edge);class core_TextRect extends shapes_text{constructor(str,rect,options){super(str,rect.getOrigin(),options),this._pdfRect=rect}rect(){return this._pdfRect}rawBBox(){return this._pdfRect}}function setCSS(el,styles){Object.keys(styles).forEach((function(key){el.style[key]=styles[key]}))}var p,core_matches="undefined"!=typeof Element&&Element.prototype&&((p=Element.prototype).matches?function(el,selector){return el.matches(selector)}:p.webkitMatchesSelector?function(el,selector){return el.webkitMatchesSelector(selector)}:p.mozMatchesSelector?function(el,selector){return el.mozMatchesSelector(selector)}:p.msMatchesSelector?function(el,selector){return el.msMatchesSelector(selector)}:function(s){return-1!==[].indexOf.call(document.querySelectorAll(s),this)});function core_closest(el,selector){if(el.closest)return el.closest(selector);for(;el&&!/^\[object (?:HTML)?Document\]$/.test(String(el));){if(1==el.nodeType&&core_matches(el,selector))return el;el=el.parentNode}}var cloneNodes=function($){return $?function cloneNodes(el){var clone=el.cloneNode(!1);if(1==el.nodeType){var i,$el=$(el),$clone=$(clone),data=$el.data();for(i in data)$clone.data(i,data[i]);for(/^canvas$/i.test(el.tagName)?clone.getContext("2d").drawImage(el,0,0):/^(?:input|select|textarea|option)$/i.test(el.tagName)&&(clone.removeAttribute("id"),clone.removeAttribute("name"),/^textarea$/i.test(el.tagName)||(clone.value=el.value),clone.checked=el.checked,clone.selected=el.selected),i=el.firstChild;i;i=i.nextSibling)clone.appendChild(cloneNodes(i))}return clone}:function(el){const clone=function dive(node){const clone=node.cloneNode(!1);node._kendoExportVisual&&(clone._kendoExportVisual=node._kendoExportVisual);for(let i=node.firstChild;i;i=i.nextSibling)clone.appendChild(dive(i));return clone}(el),canvases=el.querySelectorAll("canvas");canvases.length&&core_slice(clone.querySelectorAll("canvas")).forEach((canvas,i)=>{canvas.getContext("2d").drawImage(canvases[i],0,0)});const orig=el.querySelectorAll("input, select, textarea, option");return core_slice(clone.querySelectorAll("input, select, textarea, option")).forEach((el,i)=>{el.removeAttribute("id"),el.removeAttribute("name"),/^textarea$/i.test(el.tagName)||(el.value=orig[i].value),el.checked=orig[i].checked,el.selected=orig[i].selected}),clone}}("undefined"!=typeof window&&window.kendo&&window.kendo.jQuery);function drawDOM(element,options){options||(options={});var promise=createPromise();if(!element)return promise.reject("No element to export");if("function"!=typeof window.getComputedStyle)throw new Error("window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.");!function defineFont(name,url){if(1==arguments.length)for(var i in name)core_hasOwnProperty(name,i)&&defineFont(i,name[i]);else switch(name=name.toLowerCase(),FONT_MAPPINGS[name]=url,name){case"dejavu sans":FONT_MAPPINGS["sans-serif"]=url;break;case"dejavu sans|bold":FONT_MAPPINGS["sans-serif|bold"]=url;break;case"dejavu sans|italic":FONT_MAPPINGS["sans-serif|italic"]=url;break;case"dejavu sans|bold|italic":FONT_MAPPINGS["sans-serif|bold|italic"]=url;break;case"dejavu serif":FONT_MAPPINGS.serif=url;break;case"dejavu serif|bold":FONT_MAPPINGS["serif|bold"]=url;break;case"dejavu serif|italic":FONT_MAPPINGS["serif|italic"]=url;break;case"dejavu serif|bold|italic":FONT_MAPPINGS["serif|bold|italic"]=url;break;case"dejavu mono":FONT_MAPPINGS.monospace=url;break;case"dejavu mono|bold":FONT_MAPPINGS["monospace|bold"]=url;break;case"dejavu mono|italic":FONT_MAPPINGS["monospace|italic"]=url;break;case"dejavu mono|bold|italic":FONT_MAPPINGS["monospace|bold|italic"]=url}}(getFontFaces(element.ownerDocument));var thing,scale="number"==typeof(thing=options.scale||1)?{x:thing,y:thing}:Array.isArray(thing)?{x:thing[0],y:thing[1]}:{x:thing.x,y:thing.y};function doOne(element){var el,cls,group=new shapes_group,pos=element.getBoundingClientRect();return setTransform(group,[scale.x,0,0,scale.y,-pos.left*scale.x,-pos.top*scale.y]),nodeInfo._clipbox=!1,nodeInfo._matrix=geometry_matrix.unit(),nodeInfo._stackingContext={element:element,group:group},nodeInfo._avoidLinks=!0===options.avoidLinks?"a":options.avoidLinks,cls="k-pdf-export",(el=element).classList?el.classList.add(cls):el.className+=" "+cls,renderElement(element,group),function(el,cls){el.classList?el.classList.remove(cls):el.className=el.className.split(/\s+/).reduce((function(a,word){return word!=cls&&a.push(word),a}),[]).join(" ")}(element,"k-pdf-export"),group}return cacheImages(element,(function(){var forceBreak=options&&options.forcePageBreak,hasPaperSize=options&&options.paperSize&&"auto"!=options.paperSize,paperOptions=function(getOption){if("function"!=typeof getOption){var options=getOption;getOption=function(key,def){return key in options?options[key]:def}}var paperSize=getOption("paperSize",PAPER_SIZE.a4);if(!paperSize)return{};if("string"==typeof paperSize&&null==(paperSize=PAPER_SIZE[paperSize.toLowerCase()]))throw new Error("Unknown paper size");paperSize[0]=unitsToPoints(paperSize[0]),paperSize[1]=unitsToPoints(paperSize[1]),getOption("landscape",!1)&&(paperSize=[Math.max(paperSize[0],paperSize[1]),Math.min(paperSize[0],paperSize[1])]);var margin=getOption("margin");return margin&&(margin="string"==typeof margin||"number"==typeof margin?{left:margin=unitsToPoints(margin,0),top:margin,right:margin,bottom:margin}:{left:unitsToPoints(margin.left,0),top:unitsToPoints(margin.top,0),right:unitsToPoints(margin.right,0),bottom:unitsToPoints(margin.bottom,0)},getOption("addMargin")&&(paperSize[0]+=margin.left+margin.right,paperSize[1]+=margin.top+margin.bottom)),{paperSize:paperSize,margin:margin}}((function(key,def){return"paperSize"==key?hasPaperSize?options[key]:"A4":key in options?options[key]:def})),pageWidth=hasPaperSize&&paperOptions.paperSize[0],pageHeight=hasPaperSize&&paperOptions.paperSize[1],margin=options.margin&&paperOptions.margin,hasMargin=Boolean(margin);if(forceBreak||pageHeight){margin||(margin={left:0,top:0,right:0,bottom:0}),pageWidth&&(pageWidth/=scale.x),pageHeight&&(pageHeight/=scale.y),margin.left/=scale.x,margin.right/=scale.x,margin.top/=scale.y,margin.bottom/=scale.y;var group=new shapes_group({pdf:{multiPage:!0,paperSize:hasPaperSize?paperOptions.paperSize:"auto",_ignoreMargin:hasMargin}});!function(callback,element,forceBreak,pageWidth,pageHeight,margin,options){var template=function(template){if(null!=template)return"string"==typeof template&&(template=function(){throw new Error("String template not yet supported.  Pass a function and use your preferred template engine.")}(template.replace(/^\s+|\s+$/g,""))),"function"==typeof template?function(data){var el=template(data);if(el&&"string"==typeof el){var div=document.createElement("div");div.innerHTML=el,el=div.firstElementChild}return el}:function(){return template.cloneNode(!0)}}(options.template),doc=element.ownerDocument,pages=[],copy=options._destructive?element:cloneNodes(element),container=doc.createElement("KENDO-PDF-DOCUMENT"),adjust=0;function doPageBreak(){("-"!=forceBreak||pageHeight)&&function splitElement(element){if("TABLE"==element.tagName&&setCSS(element,{tableLayout:"fixed"}),!keepTogether(element)){var style=core_getComputedStyle(element),bottomPadding=parseFloat(getPropertyValue(style,"padding-bottom")),bottomBorder=parseFloat(getPropertyValue(style,"border-bottom-width")),saveAdjust=adjust;adjust+=bottomPadding+bottomBorder;for(var isFirst=!0,el=element.firstChild;el;el=el.nextSibling)if(1==el.nodeType){if(isFirst=!1,core_matches(el,forceBreak)){breakAtElement(el);continue}if(!pageHeight){splitElement(el);continue}if(!/^(?:static|relative)$/.test(getPropertyValue(core_getComputedStyle(el),"position")))continue;var fall=fallsOnMargin(el);1==fall||fall&&keepTogether(el)?breakAtElement(el):splitElement(el)}else 3==el.nodeType&&pageHeight&&(splitText(el,isFirst),isFirst=!1);adjust=saveAdjust}}(copy);{let page=makePage();copy.parentNode.insertBefore(page,copy),page.appendChild(copy)}template&&pages.forEach((function(page,i){const el=template({element:page,pageNum:i+1,totalPages:pages.length});el&&page.appendChild(el)})),cacheImages(pages,(function(){!function(elements,callback){var pending=0;function next(){--pending<=0&&callback()}elements.forEach((function(el){for(var images=el.querySelectorAll("img"),i=0;i<images.length;++i){var img=images[i];img.complete||(pending++,img.onload=img.onerror=next)}})),pending||next()}(pages,(function(){callback({pages:pages,container:container})}))}))}function keepTogether(el){return!!(options.keepTogether&&core_matches(el,options.keepTogether)&&el.offsetHeight<=pageHeight-adjust)||!(/^h[1-6]$/i.test(el.tagName)&&el.offsetHeight>=pageHeight-adjust)&&(el.getAttribute("data-kendo-chart")||/^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(el.tagName))}function breakAtElement(el){if(1==el.nodeType&&el!==copy&&function(el){var p=el.parentNode,first=p.firstChild;if(el===first)return!0;if(el===p.children[0]){if(7==first.nodeType||8==first.nodeType)return!0;if(3==first.nodeType)return!/\S/.test(first.data)}return!1}(el))return breakAtElement(el.parentNode);var table,colgroup,thead,grid,gridHead;colgroup=(table=core_closest(el,"table"))&&table.querySelector("colgroup"),options.repeatHeaders&&(thead=table&&table.querySelector("thead"),(grid=core_closest(el,".k-grid.k-widget"))&&grid.querySelector(".k-auto-scrollable")&&(gridHead=grid.querySelector(".k-grid-header")));var page=makePage(),range=doc.createRange();range.setStartBefore(copy),range.setEndBefore(el),page.appendChild(range.extractContents()),copy.parentNode.insertBefore(page,copy),preventBulletOnListItem(el.parentNode),table&&(table=core_closest(el,"table"),options.repeatHeaders&&thead&&table.insertBefore(thead.cloneNode(!0),table.firstChild),colgroup&&table.insertBefore(colgroup.cloneNode(!0),table.firstChild)),options.repeatHeaders&&gridHead&&(grid=core_closest(el,".k-grid.k-widget")).insertBefore(gridHead.cloneNode(!0),grid.firstChild)}function makePage(){var page=doc.createElement("KENDO-PDF-PAGE");return setCSS(page,{display:"block",boxSizing:"content-box",width:pageWidth?pageWidth+"px":"auto",padding:margin.top+"px "+margin.right+"px "+margin.bottom+"px "+margin.left+"px",position:"relative",height:pageHeight?pageHeight+"px":"auto",overflow:pageHeight||pageWidth?"hidden":"visible",clear:"both"}),options&&options.pageClassName&&(page.className=options.pageClassName),pages.push(page),page}function fallsOnMargin(thing){var box=thing.getBoundingClientRect();if(0===box.width||0===box.height)return 0;var top=copy.getBoundingClientRect().top,available=pageHeight-adjust;return box.height>available?3:box.top-top>available?1:box.bottom-top>available?2:0}function splitText(node,isFirst){if(/\S/.test(node.data)){var len=node.data.length,range=doc.createRange();range.selectNodeContents(node);var fall=fallsOnMargin(range);if(fall){var nextnode=node;if(1==fall)breakAtElement(isFirst?node.parentNode:node);else if(function findEOP(min,pos,max){return range.setEnd(node,pos),min==pos||pos==max?pos:fallsOnMargin(range)?findEOP(min,min+pos>>1,pos):findEOP(pos,pos+max>>1,max)}(0,len>>1,len),!/\S/.test(range.toString())&&isFirst)breakAtElement(node.parentNode);else{nextnode=node.splitText(range.endOffset);var page=makePage();range.setStartBefore(copy),page.appendChild(range.extractContents()),copy.parentNode.insertBefore(page,copy),preventBulletOnListItem(nextnode.parentNode)}splitText(nextnode)}}}function preventBulletOnListItem(el){var li=core_closest(el,"li");li&&(li.setAttribute("kendo-no-bullet","1"),preventBulletOnListItem(li.parentNode))}core_slice(copy.querySelectorAll("tfoot")).forEach((function(tfoot){tfoot.parentNode.appendChild(tfoot)})),core_slice(copy.querySelectorAll("ol")).forEach((function(ol){core_slice(ol.children).forEach((function(li,index){li.setAttribute("kendo-split-index",index)}))})),setCSS(container,{display:"block",position:"absolute",boxSizing:"content-box",left:"-10000px",top:"-10000px"}),pageWidth&&(setCSS(container,{width:pageWidth+"px",paddingLeft:margin.left+"px",paddingRight:margin.right+"px"}),setCSS(copy,{overflow:"hidden"})),element.parentNode.insertBefore(container,element),container.appendChild(copy),options.beforePageBreak?setTimeout((function(){options.beforePageBreak(container,doPageBreak)}),15):setTimeout(doPageBreak,15)}((function(x){if(options.progress){var canceled=!1,pageNum=0;!function next(){if(pageNum<x.pages.length){var page=doOne(x.pages[pageNum]);group.append(page),options.progress({page:page,pageNum:++pageNum,totalPages:x.pages.length,cancel:function(){canceled=!0}}),canceled?x.container.parentNode.removeChild(x.container):setTimeout(next)}else x.container.parentNode.removeChild(x.container),promise.resolve(group)}()}else x.pages.forEach((function(page){group.append(doOne(page))})),x.container.parentNode.removeChild(x.container),promise.resolve(group)}),element,forceBreak,pageWidth?pageWidth-margin.left-margin.right:null,pageHeight?pageHeight-margin.top-margin.bottom:null,margin,options)}else promise.resolve(doOne(element))})),promise}drawDOM.getFontFaces=getFontFaces,drawDOM.drawText=function(element){var group=new shapes_group;return nodeInfo._clipbox=!1,nodeInfo._matrix=geometry_matrix.unit(),nodeInfo._stackingContext={element:element,group:group},pushNodeInfo(element,core_getComputedStyle(element),group),3==element.firstChild.nodeType?renderText(element,element.firstChild,group):_renderElement(element,group),popNodeInfo(),group};var cache,parseBackgroundImage=function(){var tok_linear_gradient=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/,tok_percent=/^([-0-9.]+%)/,tok_length=/^([-0-9.]+px)/,tok_keyword=/^(left|right|top|bottom|to|center)\W/,tok_angle=/^([-0-9.]+(deg|grad|rad|turn)|0)/,tok_whitespace=/^(\s+)/,tok_popen=/^(\()/,tok_pclose=/^(\))/,tok_comma=/^(,)/,tok_url=/^(url)\(/,tok_content=/^(.*?)\)/,cache1={},cache2={};function parse(input){var tok,orig=input;if(html_core_hasOwnProperty(cache1,orig))return cache1[orig];function read(token){!function(){var m=tok_whitespace.exec(input);m&&(input=input.substr(m[1].length))}();var m=token.exec(input);if(m)return input=input.substr(m[1].length),m[1]}function read_stop(){var length,percent,color=parseColor(input,!0);if(color){let match=/^#[0-9a-f]+/i.exec(input)||/^rgba?\(.*?\)/i.exec(input)||/^..*?\b/.exec(input);return input=input.substr(match[0].length),color=color.toRGB(),(length=read(tok_length))||(percent=read(tok_percent)),{color:color,length:length,percent:percent}}}return(tok=read(tok_linear_gradient))?tok=function(propName){var angle,to1,to2,stops=[],reverse=!1;if(read(tok_popen)){if("0"==(angle=read(tok_angle))&&(angle="0deg"),angle?(angle=function(angle){var num=parseFloat(angle);return/grad$/.test(angle)?Math.PI*num/200:/rad$/.test(angle)?num:/turn$/.test(angle)?Math.PI*num*2:/deg$/.test(angle)?Math.PI*num/180:void 0}(angle),read(tok_comma)):("to"==(to1=read(tok_keyword))?to1=read(tok_keyword):to1&&/^-/.test(propName)&&(reverse=!0),to2=read(tok_keyword),read(tok_comma)),/-moz-/.test(propName)&&null==angle&&null==to1){var x=read(tok_percent),y=read(tok_percent);reverse=!0,"0%"==x?to1="left":"100%"==x&&(to1="right"),"0%"==y?to2="top":"100%"==y&&(to2="bottom"),read(tok_comma)}for(;input&&!read(tok_pclose);){var stop=read_stop();if(!stop)break;stops.push(stop),read(tok_comma)}return{type:"linear",angle:angle,to:to1&&to2?to1+" "+to2:to1||to2||null,stops:stops,reverse:reverse}}}(tok):(tok=read(tok_url))&&(tok=function(){if(read(tok_popen)){var url=read(tok_content);return url=url.replace(/^['"]+|["']+$/g,""),read(tok_pclose),{type:"url",url:url}}}()),cache1[orig]=tok||{type:"none"}}return function(input){return html_core_hasOwnProperty(cache2,input)?cache2[input]:cache2[input]=splitProperty(input).map(parse)}}(),splitProperty=(cache={},function(input,separator){separator||(separator=/^\s*,\s*/);var cacheKey=input+separator;if(html_core_hasOwnProperty(cache,cacheKey))return cache[cacheKey];var m,ret=[],last=0,pos=0,in_paren=0,in_string=!1;function looking_at(rx){return m=rx.exec(input.substr(pos))}function trim(str){return str.replace(/^\s+|\s+$/g,"")}for(;pos<input.length;)!in_string&&looking_at(/^[\(\[\{]/)?(in_paren++,pos++):!in_string&&looking_at(/^[\)\]\}]/)?(in_paren--,pos++):!in_string&&looking_at(/^[\"\']/)?(in_string=m[0],pos++):"'"==in_string&&looking_at(/^\\\'/)||'"'==in_string&&looking_at(/^\\\"/)?pos+=2:"'"==in_string&&looking_at(/^\'/)||'"'==in_string&&looking_at(/^\"/)?(in_string=!1,pos++):looking_at(separator)?(!in_string&&!in_paren&&pos>last&&(ret.push(trim(input.substring(last,pos))),last=pos+m[0].length),pos+=m[0].length):pos++;return last<pos&&ret.push(trim(input.substring(last,pos))),cache[cacheKey]=ret}),core_getFontURL=function(cache){return function(el){var m,url=cache[el];return url||((m=/url\((['"]?)([^'")]*?)\1\)\s+format\((['"]?)truetype\3\)/.exec(el))||(m=/url\((['"]?)([^'")]*?\.ttf)\1\)/.exec(el)))&&(url=cache[el]=m[2]),url}}(Object.create(null)),getFontHeight=function(cache){return function(font){var height=cache[font];return null==height&&(height=cache[font]=measureText("Mapq",{font:font}).height),height}}(Object.create(null));function getFontFaces(doc){null==doc&&(doc=document);for(var result={},i=0;i<doc.styleSheets.length;++i)doStylesheet(doc.styleSheets[i]);return result;function doStylesheet(ss){if(ss){var rules=null;try{rules=ss.cssRules}catch(ex){}rules&&function(styleSheet,rules){for(var i=0;i<rules.length;++i){var r=rules[i];switch(r.type){case 3:doStylesheet(r.styleSheet);break;case 5:var style=r.style,family=splitProperty(getPropertyValue(style,"font-family")),bold=/^([56789]00|bold)$/i.test(getPropertyValue(style,"font-weight")),italic="italic"==getPropertyValue(style,"font-style"),src=findFonts(r);src.length>0&&addRule(styleSheet,family,bold,italic,src[0])}}}(ss,rules)}}function findFonts(rule){var src=getPropertyValue(rule.style,"src");if(src)return splitProperty(src).reduce((function(a,el){var font=core_getFontURL(el);return font&&a.push(font),a}),[]);var font=core_getFontURL(rule.cssText);return font?[font]:[]}function addRule(styleSheet,names,bold,italic,url){/^data:/i.test(url)||/^[^\/:]+:\/\//.test(url)||/^\//.test(url)||(url=String(styleSheet.href).replace(/[^\/]*$/,"")+url),names.forEach((function(name){name=name.replace(/^(['"]?)(.*?)\1$/,"$2"),bold&&(name+="|bold"),italic&&(name+="|italic"),result[name]=url}))}}function html_core_hasOwnProperty(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function incCounter(name,inc){var p=nodeInfo;for(name="_counter_"+name;p&&!html_core_hasOwnProperty(p,name);)p=Object.getPrototypeOf(p);p||(p=nodeInfo._root),p[name]=(p[name]||0)+(null==inc?1:inc)}function resetCounter(name,val){nodeInfo[name="_counter_"+name]=null==val?0:val}function doCounters(a,f,def){for(var i=0;i<a.length;){var name=a[i++],val=parseFloat(a[i]);isNaN(val)?f(name,def):(f(name,val),++i)}}function updateCounters(style){var counterReset=getPropertyValue(style,"counter-reset");counterReset&&doCounters(splitProperty(counterReset,/^\s+/),resetCounter,0);var counterIncrement=getPropertyValue(style,"counter-increment");counterIncrement&&doCounters(splitProperty(counterIncrement,/^\s+/),incCounter,1)}function core_parseColor(str,css){var color=parseColor(str,!0);return color&&(color=color.toRGB(),css?color=color.toCssRgba():0===color.a&&(color=null)),color}function cacheImages(element,callback){var urls=[];function add(url){core_IMAGE_CACHE[url]||(core_IMAGE_CACHE[url]=!0,urls.push(url))}function dive(element){/^img$/i.test(element.tagName)&&add(element.src),parseBackgroundImage(getPropertyValue(core_getComputedStyle(element),"background-image")).forEach((function(bg){"url"==bg.type&&add(bg.url)})),element.children&&core_slice(element.children).forEach(dive)}Array.isArray(element)?element.forEach(dive):dive(element);var count=urls.length;function next(){--count<=0&&callback()}0===count&&next(),urls.forEach((function(url){var img=core_IMAGE_CACHE[url]=new window.Image;/^data:/i.test(url)||(img.crossOrigin="Anonymous"),img.src=url,img.complete?next():(img.onload=next,img.onerror=function(){core_IMAGE_CACHE[url]=null,next()})}))}function alphaNumeral(n){var result="";do{result=String.fromCharCode(97+n%26)+result,n=Math.floor(n/26)}while(n>0);return result}function pushNodeInfo(element,style,group){(nodeInfo=Object.create(nodeInfo))[element.tagName.toLowerCase()]={element:element,style:style};var decoration=getPropertyValue(style,"text-decoration");if(decoration&&"none"!=decoration){var color=getPropertyValue(style,"color");decoration.split(/\s+/g).forEach((function(name){nodeInfo[name]||(nodeInfo[name]=color)}))}(function(style){function prop(name){return getPropertyValue(style,name)}if("none"!=prop("transform")||"static"!=prop("position")||"auto"!=prop("z-index")||prop("opacity")<1)return!0})(style)&&(nodeInfo._stackingContext={element:element,group:group})}function popNodeInfo(){nodeInfo=Object.getPrototypeOf(nodeInfo)}function updateClipbox(path){if(null!=nodeInfo._clipbox){var box=path.bbox(nodeInfo._matrix);nodeInfo._clipbox=nodeInfo._clipbox?geometry_rect.intersect(nodeInfo._clipbox,box):box}}function core_getComputedStyle(element,pseudoElt){return window.getComputedStyle(element,pseudoElt||null)}function getPropertyValue(style,prop,defa){var val=style.getPropertyValue(prop);return null!=val&&""!==val||(html_core_browser.webkit?val=style.getPropertyValue("-webkit-"+prop):html_core_browser.mozilla?val=style.getPropertyValue("-moz-"+prop):html_core_browser.opera?val=style.getPropertyValue("-o-"+prop):microsoft&&(val=style.getPropertyValue("-ms-"+prop))),arguments.length>2&&(null==val||""===val)?defa:val}function pleaseSetPropertyValue(style,prop,value,important){style.setProperty(prop,value,important),html_core_browser.webkit?style.setProperty("-webkit-"+prop,value,important):html_core_browser.mozilla?style.setProperty("-moz-"+prop,value,important):html_core_browser.opera?style.setProperty("-o-"+prop,value,important):microsoft&&(style.setProperty("-ms-"+prop,value,important),style[prop="ms"+prop.replace(/(^|-)([a-z])/g,(function(s,p1,p2){return p1+p2.toUpperCase()}))]=value)}function getBorder(style,side){return side="border-"+side,{width:parseFloat(getPropertyValue(style,side+"-width")),style:getPropertyValue(style,side+"-style"),color:core_parseColor(getPropertyValue(style,side+"-color"),!0)}}function saveStyle(element,func){var prev=element.style.cssText,result=func();return element.style.cssText=prev,result}function getBorderRadius(style,side){var r=getPropertyValue(style,"border-"+side+"-radius").split(/\s+/g).map(parseFloat);return 1==r.length&&r.push(r[0]),sanitizeRadius({x:r[0],y:r[1]})}function innerBox(box,prop,element){var style,wt,wr,wb,wl;return"string"==typeof prop?(style=core_getComputedStyle(element),wt=parseFloat(getPropertyValue(style,prop.replace("*","top"))),wr=parseFloat(getPropertyValue(style,prop.replace("*","right"))),wb=parseFloat(getPropertyValue(style,prop.replace("*","bottom"))),wl=parseFloat(getPropertyValue(style,prop.replace("*","left")))):"number"==typeof prop&&(wt=wr=wb=wl=prop),{top:box.top+wt,right:box.right-wr,bottom:box.bottom-wb,left:box.left+wl,width:box.right-box.left-wr-wl,height:box.bottom-box.top-wb-wt}}function radiansToDegrees(radians){return 180*radians/Math.PI%360}function setTransform(shape,m){return m=new geometry_matrix(m[0],m[1],m[2],m[3],m[4],m[5]),shape.transform(m),m}function core_setClipping(shape,clipPath){shape.clip(clipPath)}function addArcToPath(path,x,y,options){for(var points=new geometry_arc([x,y],options).curvePoints(),i=1;i<points.length;)path.curveTo(points[i++],points[i++],points[i++])}function sanitizeRadius(r){return(r.x<=0||r.y<=0)&&(r.x=r.y=0),r}function adjustBorderRadiusForBox(box,rTL,rTR,rBR,rBL){var tl_x=Math.max(0,rTL.x),tl_y=Math.max(0,rTL.y),tr_x=Math.max(0,rTR.x),tr_y=Math.max(0,rTR.y),br_x=Math.max(0,rBR.x),br_y=Math.max(0,rBR.y),bl_x=Math.max(0,rBL.x),bl_y=Math.max(0,rBL.y),f=Math.min(box.width/(tl_x+tr_x),box.height/(tr_y+br_y),box.width/(br_x+bl_x),box.height/(bl_y+tl_y));return f<1&&(tl_x*=f,tl_y*=f,tr_x*=f,tr_y*=f,br_x*=f,br_y*=f,bl_x*=f,bl_y*=f),{tl:{x:tl_x,y:tl_y},tr:{x:tr_x,y:tr_y},br:{x:br_x,y:br_y},bl:{x:bl_x,y:bl_y}}}function elementRoundBox(element,box,type){var style=core_getComputedStyle(element),rTL=getBorderRadius(style,"top-left"),rTR=getBorderRadius(style,"top-right"),rBL=getBorderRadius(style,"bottom-left"),rBR=getBorderRadius(style,"bottom-right");if("padding"==type||"content"==type){var bt=getBorder(style,"top"),br=getBorder(style,"right"),bb=getBorder(style,"bottom"),bl=getBorder(style,"left");if(rTL.x-=bl.width,rTL.y-=bt.width,rTR.x-=br.width,rTR.y-=bt.width,rBR.x-=br.width,rBR.y-=bb.width,rBL.x-=bl.width,rBL.y-=bb.width,"content"==type){var pt=parseFloat(getPropertyValue(style,"padding-top")),pr=parseFloat(getPropertyValue(style,"padding-right")),pb=parseFloat(getPropertyValue(style,"padding-bottom")),pl=parseFloat(getPropertyValue(style,"padding-left"));rTL.x-=pl,rTL.y-=pt,rTR.x-=pr,rTR.y-=pt,rBR.x-=pr,rBR.y-=pb,rBL.x-=pl,rBL.y-=pb}}return"number"==typeof type&&(rTL.x-=type,rTL.y-=type,rTR.x-=type,rTR.y-=type,rBR.x-=type,rBR.y-=type,rBL.x-=type,rBL.y-=type),roundBox(box,rTL,rTR,rBR,rBL)}function roundBox(box,rTL0,rTR0,rBR0,rBL0){var tmp=adjustBorderRadiusForBox(box,rTL0,rTR0,rBR0,rBL0),rTL=tmp.tl,rTR=tmp.tr,rBR=tmp.br,rBL=tmp.bl,path=new shapes_path({fill:null,stroke:null});return path.moveTo(box.left,box.top+rTL.y),rTL.x&&addArcToPath(path,box.left+rTL.x,box.top+rTL.y,{startAngle:-180,endAngle:-90,radiusX:rTL.x,radiusY:rTL.y}),path.lineTo(box.right-rTR.x,box.top),rTR.x&&addArcToPath(path,box.right-rTR.x,box.top+rTR.y,{startAngle:-90,endAngle:0,radiusX:rTR.x,radiusY:rTR.y}),path.lineTo(box.right,box.bottom-rBR.y),rBR.x&&addArcToPath(path,box.right-rBR.x,box.bottom-rBR.y,{startAngle:0,endAngle:90,radiusX:rBR.x,radiusY:rBR.y}),path.lineTo(box.left+rBL.x,box.bottom),rBL.x&&addArcToPath(path,box.left+rBL.x,box.bottom-rBL.y,{startAngle:90,endAngle:180,radiusX:rBL.x,radiusY:rBL.y}),path.close()}function formatCounter(val,style){var str=String(parseFloat(val));switch(style){case"decimal-leading-zero":return str.length<2&&(str="0"+str),str;case"lower-roman":return arabicToRoman(val).toLowerCase();case"upper-roman":return arabicToRoman(val).toUpperCase();case"lower-latin":case"lower-alpha":return alphaNumeral(val-1);case"upper-latin":case"upper-alpha":return alphaNumeral(val-1).toUpperCase();default:return str}}function getCssText(style){if(style.cssText)return style.cssText;for(var result=[],i=0;i<style.length;++i)result.push(style[i]+": "+getPropertyValue(style,style[i]));return result.join(";\n")}function _renderWithPseudoElements(element,group){if("KENDO-PSEUDO-ELEMENT"==element.tagName)return void _renderElement(element,group);let fake=[];function pseudo(kind,place){let style=core_getComputedStyle(element,kind),content=style.content;if(updateCounters(style),content&&"normal"!=content&&"none"!=content&&"0px"!=style.width){let psel=element.ownerDocument.createElement("KENDO-PSEUDO-ELEMENT");psel.style.cssText=getCssText(style),psel.textContent=function(element,content){function displayCounter(name,style,separator){return separator?(separator=separator.replace(/^\s*(["'])(.*)\1\s*$/,"$2"),function(name){var values=[],p=nodeInfo;for(name="_counter_"+name;p;)html_core_hasOwnProperty(p,name)&&values.push(p[name]),p=Object.getPrototypeOf(p);return values.reverse()}(name).map((function(val){return formatCounter(val,style)})).join(separator)):formatCounter(function(name){return nodeInfo[name="_counter_"+name]}(name)||0,style)}var m,a=splitProperty(content,/^\s+/),result=[];return a.forEach((function(el){var tmp;(m=/^\s*(["'])(.*)\1\s*$/.exec(el))?result.push(m[2].replace(/\\([0-9a-f]{4})/gi,(function(s,p){return String.fromCharCode(parseInt(p,16))}))):(m=/^\s*counter\((.*?)\)\s*$/.exec(el))?(tmp=splitProperty(m[1]),result.push(displayCounter(tmp[0],tmp[1]))):(m=/^\s*counters\((.*?)\)\s*$/.exec(el))?(tmp=splitProperty(m[1]),result.push(displayCounter(tmp[0],tmp[2],tmp[1]))):(m=/^\s*attr\((.*?)\)\s*$/.exec(el))?result.push(element.getAttribute(m[1])||""):result.push(el)})),result.join("")}(element,content),element.insertBefore(psel,place),fake.push(psel)}}if(pseudo(":before",element.firstChild),pseudo(":after",null),fake.length>0){let saveClass=element.className;element.className+=" kendo-pdf-hide-pseudo-elements",_renderElement(element,group),element.className=saveClass,fake.forEach((function(el){element.removeChild(el)}))}else _renderElement(element,group)}function _renderElement(element,group){var style=core_getComputedStyle(element),top=getBorder(style,"top"),right=getBorder(style,"right"),bottom=getBorder(style,"bottom"),left=getBorder(style,"left"),rTL0=getBorderRadius(style,"top-left"),rTR0=getBorderRadius(style,"top-right"),rBL0=getBorderRadius(style,"bottom-left"),rBR0=getBorderRadius(style,"bottom-right"),dir=getPropertyValue(style,"direction"),backgroundColor=getPropertyValue(style,"background-color");backgroundColor=core_parseColor(backgroundColor);var textOverflow,saveTextOverflow,backgroundImage=parseBackgroundImage(getPropertyValue(style,"background-image")),backgroundRepeat=splitProperty(getPropertyValue(style,"background-repeat")),backgroundPosition=splitProperty(getPropertyValue(style,"background-position")),backgroundOrigin=splitProperty(getPropertyValue(style,"background-origin")),backgroundSize=splitProperty(getPropertyValue(style,"background-size"));microsoft&&"ellipsis"==(textOverflow=style.textOverflow)&&(saveTextOverflow=element.style.textOverflow,element.style.textOverflow="clip"),html_core_browser.msie&&html_core_browser.version<10&&(backgroundPosition=splitProperty(element.currentStyle.backgroundPosition));var boxes,i,cells,innerbox=innerBox(element.getBoundingClientRect(),"border-*-width",element);!function(){var clip=getPropertyValue(style,"clip"),m=/^\s*rect\((.*)\)\s*$/.exec(clip);if(m){var a=m[1].split(/[ ,]+/g),top="auto"==a[0]?innerbox.top:parseFloat(a[0])+innerbox.top,right="auto"==a[1]?innerbox.right:parseFloat(a[1])+innerbox.left,bottom="auto"==a[2]?innerbox.bottom:parseFloat(a[2])+innerbox.top,left="auto"==a[3]?innerbox.left:parseFloat(a[3])+innerbox.left,tmp=new shapes_group,clipPath=(new shapes_path).moveTo(left,top).lineTo(right,top).lineTo(right,bottom).lineTo(left,bottom).close();core_setClipping(tmp,clipPath),group.append(tmp),group=tmp,updateClipbox(clipPath)}}();var display=getPropertyValue(style,"display");if("table-row"==display)for(boxes=[],i=0,cells=element.children;i<cells.length;++i)boxes.push(cells[i].getBoundingClientRect());else 1==(boxes=element.getClientRects()).length&&(boxes=[element.getBoundingClientRect()]);for(boxes=function(boxes){if(/^td$/i.test(element.tagName)){var table=nodeInfo.table;if(table&&"collapse"==getPropertyValue(table.style,"border-collapse")){var tableBorderLeft=getBorder(table.style,"left").width,tableBorderTop=getBorder(table.style,"top").width;if(0===tableBorderLeft&&0===tableBorderTop)return boxes;var tableBox=table.element.getBoundingClientRect(),firstCellBox=table.element.rows[0].cells[0].getBoundingClientRect();if(firstCellBox.top==tableBox.top||firstCellBox.left==tableBox.left)return core_slice(boxes).map((function(box){return{left:box.left+tableBorderLeft,top:box.top+tableBorderTop,right:box.right+tableBorderLeft,bottom:box.bottom+tableBorderTop,height:box.height,width:box.width}}))}}return boxes}(boxes),i=0;i<boxes.length;++i)drawOneBox(boxes[i],0===i,i==boxes.length-1);if("A"==element.tagName&&element.href&&!/^#?$/.test(element.getAttribute("href"))&&(!nodeInfo._avoidLinks||!core_matches(element,nodeInfo._avoidLinks))){const r=document.createRange();r.selectNodeContents(element),core_slice(r.getClientRects()).forEach((function(box){const g=new shapes_group;g._pdfLink={url:element.href,top:box.top,right:box.right,bottom:box.bottom,left:box.left},group.append(g)}))}return boxes.length>0&&"list-item"==display&&!element.getAttribute("kendo-no-bullet")&&function(){var listStyleType=getPropertyValue(style,"list-style-type");if("none"!=listStyleType){var listStylePosition=getPropertyValue(style,"list-style-position");switch(listStyleType){case"circle":case"disc":case"square":_drawBullet((function(bullet){bullet.style.fontSize="60%",bullet.style.lineHeight="200%",bullet.style.paddingRight="0.5em",bullet.style.fontFamily="DejaVu Serif",bullet.innerHTML={disc:"",circle:"",square:""}[listStyleType]}));break;case"decimal":case"decimal-leading-zero":_drawBullet((function(bullet){elementIndex((function(idx){++idx,"decimal-leading-zero"==listStyleType&&idx<10&&(idx="0"+idx),bullet.innerHTML=idx+"."}))}));break;case"lower-roman":case"upper-roman":_drawBullet((function(bullet){elementIndex((function(idx){idx=arabicToRoman(idx+1),"upper-roman"==listStyleType&&(idx=idx.toUpperCase()),bullet.innerHTML=idx+"."}))}));break;case"lower-latin":case"lower-alpha":case"upper-latin":case"upper-alpha":_drawBullet((function(bullet){elementIndex((function(idx){idx=alphaNumeral(idx),/^upper/i.test(listStyleType)&&(idx=idx.toUpperCase()),bullet.innerHTML=idx+"."}))}))}}function _drawBullet(f){saveStyle(element,(function(){element.style.position="relative";var bullet=element.ownerDocument.createElement("KENDO-PSEUDO-ELEMENT");bullet.style.position="absolute",bullet.style.boxSizing="border-box","outside"==listStylePosition?(bullet.style.width="6em",bullet.style.left="-6.8em",bullet.style.textAlign="right"):bullet.style.left="0px",f(bullet),element.insertBefore(bullet,element.firstChild),renderElement(bullet,group),element.removeChild(bullet)}))}function elementIndex(f){var a=element.parentNode.children,k=element.getAttribute("kendo-split-index");if(null!=k)return f(0|k,a.length);for(var i=0;i<a.length;++i)if(a[i]===element)return f(i,a.length)}}(),function(){function clipit(){var clipPath=elementRoundBox(element,innerbox,"padding"),tmp=new shapes_group;core_setClipping(tmp,clipPath),group.append(tmp),group=tmp,updateClipbox(clipPath)}!function(element){return/^(?:textarea|select|input)$/i.test(element.tagName)}(element)?(/^(hidden|auto|scroll)/.test(getPropertyValue(style,"overflow"))||/^(hidden|auto|scroll)/.test(getPropertyValue(style,"overflow-x"))||/^(hidden|auto|scroll)/.test(getPropertyValue(style,"overflow-y")))&&clipit():clipit()}(),function(element,group){var visual;if(element._kendoExportVisual)visual=element._kendoExportVisual();else if(window.kendo&&window.kendo.jQuery&&element.getAttribute(window.kendo.attr("role"))){var widget=window.kendo.widgetInstance(window.kendo.jQuery(element));widget&&(widget.exportDOMVisual||widget.exportVisual)&&(visual=widget.exportDOMVisual?widget.exportDOMVisual():widget.exportVisual())}if(!visual)return!1;var wrap=new shapes_group;wrap.children.push(visual);var bbox=element.getBoundingClientRect();return wrap.transform(transform_transform().translate(bbox.left,bbox.top)),group.append(wrap),!0}(element,group)||function renderContents(element,group){switch(nodeInfo._stackingContext.element===element&&(nodeInfo._stackingContext.group=group),element.tagName.toLowerCase()){case"img":renderImage(element,element.src,group);break;case"canvas":try{renderImage(element,element.toDataURL("image/png"),group)}catch(ex){}break;case"textarea":case"input":case"select":!function(element,group){var tag=element.tagName.toLowerCase();if("input"==tag&&("checkbox"==element.type||"radio"==element.type))return function(element,group){var color=getPropertyValue(core_getComputedStyle(element),"color"),box=element.getBoundingClientRect();"checkbox"==element.type?(group.append(shapes_path.fromRect(new geometry_rect([box.left+1,box.top+1],[box.width-2,box.height-2])).stroke(color,1)),element.checked&&group.append((new shapes_path).stroke(color,1.2).moveTo(box.left+.22*box.width,box.top+.55*box.height).lineTo(box.left+.45*box.width,box.top+.75*box.height).lineTo(box.left+.78*box.width,box.top+.22*box.width))):(group.append(new shapes_circle(new circle([(box.left+box.right)/2,(box.top+box.bottom)/2],Math.min(box.width-2,box.height-2)/2)).stroke(color,1)),element.checked&&group.append(new shapes_circle(new circle([(box.left+box.right)/2,(box.top+box.bottom)/2],Math.min(box.width-8,box.height-8)/2)).fill(color).stroke(null)))}(element,group);var option,p=element.parentNode,doc=element.ownerDocument,el=doc.createElement("KENDO-PSEUDO-ELEMENT");if(el.style.cssText=getCssText(core_getComputedStyle(element)),"input"==tag&&(el.style.whiteSpace="pre"),"select"!=tag&&"textarea"!=tag||(el.style.overflow="auto"),"select"==tag)if(element.multiple)for(var i=0;i<element.options.length;++i)(option=doc.createElement("KENDO-PSEUDO-ELEMENT")).style.cssText=getCssText(core_getComputedStyle(element.options[i])),option.style.display="block",option.textContent=element.options[i].textContent,el.appendChild(option);else(option=function(element){return element.selectedOptions&&element.selectedOptions.length>0?element.selectedOptions[0]:element.options[element.selectedIndex]}(element))&&(el.textContent=option.textContent);else el.textContent=element.value;p.insertBefore(el,element),el.scrollLeft=element.scrollLeft,el.scrollTop=element.scrollTop,element.style.display="none",renderContents(el,group),element.style.display="",p.removeChild(el)}(element,group);break;default:for(var children=[],floats=[],positioned=[],i=element.firstChild;i;i=i.nextSibling)switch(i.nodeType){case 3:/\S/.test(i.data)&&renderText(element,i,group);break;case 1:var style=core_getComputedStyle(i),floating=getPropertyValue(style,"float");"static"!=getPropertyValue(style,"position")?positioned.push(i):"none"!=floating?floats.push(i):children.push(i)}mergeSort(children,zIndexSort).forEach((function(el){renderElement(el,group)})),mergeSort(floats,zIndexSort).forEach((function(el){renderElement(el,group)})),mergeSort(positioned,zIndexSort).forEach((function(el){renderElement(el,group)}))}}(element,group),microsoft&&"ellipsis"==textOverflow&&(element.style.textOverflow=saveTextOverflow),group;function drawEdge(color,len,Wtop,Wleft,Wright,rl,rr,transform){if(!(Wtop<=0)){var path,edge=new shapes_group;setTransform(edge,transform),group.append(edge),sanitizeRadius(rl),sanitizeRadius(rr),path=new shapes_path({fill:{color:color},stroke:null}),edge.append(path),path.moveTo(rl.x?Math.max(rl.x,Wleft):0,0).lineTo(len-(rr.x?Math.max(rr.x,Wright):0),0).lineTo(len-Math.max(rr.x,Wright),Wtop).lineTo(Math.max(rl.x,Wleft),Wtop).close(),rl.x&&drawRoundCorner(Wleft,rl,[-1,0,0,1,rl.x,0]),rr.x&&drawRoundCorner(Wright,rr,[1,0,0,1,len-rr.x,0])}function drawRoundCorner(Wright,r,transform){var angle=Math.PI/2*Wright/(Wright+Wtop),ri={x:r.x-Wright,y:r.y-Wtop},path=new shapes_path({fill:{color:color},stroke:null}).moveTo(0,0);setTransform(path,transform),addArcToPath(path,0,r.y,{startAngle:-90,endAngle:-radiansToDegrees(angle),radiusX:r.x,radiusY:r.y}),ri.x>0&&ri.y>0?(path.lineTo(ri.x*Math.cos(angle),r.y-ri.y*Math.sin(angle)),addArcToPath(path,0,r.y,{startAngle:-radiansToDegrees(angle),endAngle:-90,radiusX:ri.x,radiusY:ri.y,anticlockwise:!0})):ri.x>0?path.lineTo(ri.x,Wtop).lineTo(0,Wtop):path.lineTo(ri.x,Wtop).lineTo(ri.x,0),edge.append(path.close())}}function drawOneBackground(group,box,background,backgroundRepeat,backgroundPosition,backgroundOrigin,backgroundSize){var gradient;if(background&&"none"!=background)if("url"==background.type){if(/^url\(\"data:image\/svg/i.test(background.url))return;var img=core_IMAGE_CACHE[background.url];img&&img.width>0&&img.height>0&&drawBackgroundImage(group,box,img.width,img.height,(function(group,rect){group.append(new shapes_image(background.url,rect))}))}else{if("linear"!=background.type)return;drawBackgroundImage(group,box,box.width,box.height,(gradient=background,function(group,rect){var width=rect.width(),height=rect.height();switch(gradient.type){case"linear":var angle=null!=gradient.angle?gradient.angle:Math.PI;switch(gradient.to){case"top":angle=0;break;case"left":angle=-Math.PI/2;break;case"bottom":angle=Math.PI;break;case"right":angle=Math.PI/2;break;case"top left":case"left top":angle=-Math.atan2(height,width);break;case"top right":case"right top":angle=Math.atan2(height,width);break;case"bottom left":case"left bottom":angle=Math.PI+Math.atan2(height,width);break;case"bottom right":case"right bottom":angle=Math.PI-Math.atan2(height,width)}gradient.reverse&&(angle-=Math.PI),(angle%=2*Math.PI)<0&&(angle+=2*Math.PI);var pxlen=Math.abs(width*Math.sin(angle))+Math.abs(height*Math.cos(angle)),scaledAngle=Math.atan(width*Math.tan(angle)/height),sin=Math.sin(scaledAngle),cos=Math.cos(scaledAngle),len=Math.abs(sin)+Math.abs(cos),x=len/2*sin,y=len/2*cos;angle>Math.PI/2&&angle<=3*Math.PI/2&&(x=-x,y=-y);var implicit=[],right=0,stops=gradient.stops.map((function(s,i){var offset=s.percent;offset?offset=parseFloat(offset)/100:s.length?offset=parseFloat(s.length)/pxlen:0===i?offset=0:i==gradient.stops.length-1&&(offset=1);var stop={color:s.color.toCssRgba(),offset:offset};return null!=offset?(right=offset,implicit.forEach((function(s,i){s.stop.offset=s.left+(right-s.left)*(i+1)/(implicit.length+1)})),implicit=[]):implicit.push({left:right,stop:stop}),stop})),start=[.5-x,.5+y],end=[.5+x,.5-y];group.append(shapes_path.fromRect(rect).stroke(null).fill(new linear_gradient({start:start,end:end,stops:stops,userSpace:!1})));break;case"radial":window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in HTML renderer")}}))}function drawBackgroundImage(group,box,img_width,img_height,renderBG){var f,aspect_ratio=img_width/img_height,orgBox=box;if("content-box"==backgroundOrigin?(orgBox=innerBox(orgBox,"border-*-width",element),orgBox=innerBox(orgBox,"padding-*",element)):"padding-box"==backgroundOrigin&&(orgBox=innerBox(orgBox,"border-*-width",element)),!/^\s*auto(\s+auto)?\s*$/.test(backgroundSize))if("contain"==backgroundSize)f=Math.min(orgBox.width/img_width,orgBox.height/img_height),img_width*=f,img_height*=f;else if("cover"==backgroundSize)f=Math.max(orgBox.width/img_width,orgBox.height/img_height),img_width*=f,img_height*=f;else{var size=backgroundSize.split(/\s+/g);img_width=/%$/.test(size[0])?orgBox.width*parseFloat(size[0])/100:parseFloat(size[0]),img_height=1==size.length||"auto"==size[1]?img_width/aspect_ratio:/%$/.test(size[1])?orgBox.height*parseFloat(size[1])/100:parseFloat(size[1])}var pos=String(backgroundPosition);switch(pos){case"bottom":pos="50% 100%";break;case"top":pos="50% 0";break;case"left":pos="0 50%";break;case"right":pos="100% 50%";break;case"center":pos="50% 50%"}1==(pos=pos.split(/\s+/)).length&&(pos[1]="50%"),pos[0]=/%$/.test(pos[0])?parseFloat(pos[0])/100*(orgBox.width-img_width):parseFloat(pos[0]),pos[1]=/%$/.test(pos[1])?parseFloat(pos[1])/100*(orgBox.height-img_height):parseFloat(pos[1]);var rect=new geometry_rect([orgBox.left+pos[0],orgBox.top+pos[1]],[img_width,img_height]);function rewX(){for(;rect.origin.x>box.left;)rect.origin.x-=img_width}function rewY(){for(;rect.origin.y>box.top;)rect.origin.y-=img_height}function repeatX(){for(;rect.origin.x<box.right;)renderBG(group,rect.clone()),rect.origin.x+=img_width}if("no-repeat"==backgroundRepeat)renderBG(group,rect);else if("repeat-x"==backgroundRepeat)rewX(),repeatX();else if("repeat-y"==backgroundRepeat)for(rewY();rect.origin.y<box.bottom;)renderBG(group,rect.clone()),rect.origin.y+=img_height;else if("repeat"==backgroundRepeat){rewX(),rewY();for(var origin=rect.origin.clone();rect.origin.y<box.bottom;)rect.origin.x=origin.x,repeatX(),rect.origin.y+=img_height}}}function drawOneBox(box,isFirst,isLast){if(0!==box.width&&0!==box.height){!function(box){var background=new shapes_group;if(core_setClipping(background,roundBox(box,rTL0,rTR0,rBR0,rBL0)),group.append(background),backgroundColor){var path=new shapes_path({fill:{color:backgroundColor.toCssRgba()},stroke:null});path.moveTo(box.left,box.top).lineTo(box.right,box.top).lineTo(box.right,box.bottom).lineTo(box.left,box.bottom).close(),background.append(path)}for(var i=backgroundImage.length;--i>=0;)drawOneBackground(background,box,backgroundImage[i],backgroundRepeat[i%backgroundRepeat.length],backgroundPosition[i%backgroundPosition.length],backgroundOrigin[i%backgroundOrigin.length],backgroundSize[i%backgroundSize.length])}(box);var shouldDrawLeft=left.width>0&&(isFirst&&"ltr"==dir||isLast&&"rtl"==dir),shouldDrawRight=right.width>0&&(isLast&&"ltr"==dir||isFirst&&"rtl"==dir);if(0!==top.width||0!==left.width||0!==right.width||0!==bottom.width){if(top.color==right.color&&top.color==bottom.color&&top.color==left.color&&top.width==right.width&&top.width==bottom.width&&top.width==left.width&&shouldDrawLeft&&shouldDrawRight){box=innerBox(box,top.width/2);var path=elementRoundBox(element,box,top.width/2);return path.options.stroke={color:top.color,width:top.width},void group.append(path)}if(0===rTL0.x&&0===rTR0.x&&0===rBR0.x&&0===rBL0.x&&top.width<2&&left.width<2&&right.width<2&&bottom.width<2)return top.width>0&&group.append(new shapes_path({stroke:{width:top.width,color:top.color}}).moveTo(box.left,box.top+top.width/2).lineTo(box.right,box.top+top.width/2)),bottom.width>0&&group.append(new shapes_path({stroke:{width:bottom.width,color:bottom.color}}).moveTo(box.left,box.bottom-bottom.width/2).lineTo(box.right,box.bottom-bottom.width/2)),shouldDrawLeft&&group.append(new shapes_path({stroke:{width:left.width,color:left.color}}).moveTo(box.left+left.width/2,box.top).lineTo(box.left+left.width/2,box.bottom)),void(shouldDrawRight&&group.append(new shapes_path({stroke:{width:right.width,color:right.color}}).moveTo(box.right-right.width/2,box.top).lineTo(box.right-right.width/2,box.bottom)));var tmp=adjustBorderRadiusForBox(box,rTL0,rTR0,rBR0,rBL0),rTL=tmp.tl,rTR=tmp.tr,rBR=tmp.br,rBL=tmp.bl;drawEdge(top.color,box.width,top.width,left.width,right.width,rTL,rTR,[1,0,0,1,box.left,box.top]),drawEdge(bottom.color,box.width,bottom.width,right.width,left.width,rBR,rBL,[-1,0,0,-1,box.right,box.bottom]),drawEdge(left.color,box.height,left.width,bottom.width,top.width,inv(rBL),inv(rTL),[0,-1,1,0,box.left,box.bottom]),drawEdge(right.color,box.height,right.width,top.width,bottom.width,inv(rTR),inv(rBR),[0,1,-1,0,box.right,box.top])}}function inv(p){return{x:p.y,y:p.x}}}}function renderImage(element,url,group){var box=function(element){var box=element.getBoundingClientRect();return box=innerBox(box,"border-*-width",element),innerBox(box,"padding-*",element)}(element),rect=new geometry_rect([box.left,box.top],[box.width,box.height]),image=new shapes_image(url,rect);core_setClipping(image,elementRoundBox(element,box,"content")),group.append(image)}function zIndexSort(a,b){var sa=core_getComputedStyle(a),sb=core_getComputedStyle(b),za=parseFloat(getPropertyValue(sa,"z-index")),zb=parseFloat(getPropertyValue(sb,"z-index")),pa=getPropertyValue(sa,"position"),pb=getPropertyValue(sb,"position");return isNaN(za)&&isNaN(zb)?/static|absolute/.test(pa)&&/static|absolute/.test(pb)?0:"static"==pa?-1:"static"==pb?1:0:isNaN(za)?0===zb?0:zb>0?-1:1:isNaN(zb)?0===za?0:za>0?1:-1:parseFloat(za)-parseFloat(zb)}function renderText(element,node,group){if(null!=(cb=nodeInfo._clipbox)&&!(cb?0===cb.width()||0===cb.height():void 0)){var cb,style=core_getComputedStyle(element);if(!(parseFloat(getPropertyValue(style,"text-indent"))<-500)){var text=node.data,start=0,end=text.search(/\S\s*$/)+1;if(end){var fontSize=getPropertyValue(style,"font-size"),lineHeight=getPropertyValue(style,"line-height"),font=[getPropertyValue(style,"font-style"),getPropertyValue(style,"font-variant"),getPropertyValue(style,"font-weight"),fontSize,getPropertyValue(style,"font-family")].join(" ");if(fontSize=parseFloat(fontSize),lineHeight=parseFloat(lineHeight),0!==fontSize){var color=getPropertyValue(style,"color"),range=element.ownerDocument.createRange(),isJustified="justify"==getPropertyValue(style,"text-align"),columnCount=getPropertyValue(style,"column-count",1),whiteSpace=getPropertyValue(style,"white-space"),textTransform=getPropertyValue(style,"text-transform"),estimateLineLength=element.getBoundingClientRect().width/fontSize*5;0===estimateLineLength&&(estimateLineLength=500);for(var prevLineBottom=null,underline=nodeInfo.underline,lineThrough=nodeInfo["line-through"],overline=nodeInfo.overline,hasDecoration=underline||lineThrough||overline;!doChunk(););return void(hasDecoration&&(range.selectNode(node),core_slice(range.getClientRects()).forEach((function(box){function line(color,ypos){if(color){var width=fontSize/12,path=new shapes_path({stroke:{width:width,color:color}});path.moveTo(box.left,ypos-=width).lineTo(box.right,ypos),group.append(path)}}line(underline,box.bottom),line(lineThrough,box.bottom-box.height/2.7),line(overline,box.top)}))))}}}}function actuallyGetRangeBoundingRect(range){if(microsoft||html_core_browser.chrome){for(var rectangles=range.getClientRects(),box={top:1/0,right:-1/0,bottom:-1/0,left:1/0},done=!1,i=0;i<rectangles.length;++i){var b=rectangles[i];b.width<=1||b.bottom===prevLineBottom||(box.left=Math.min(b.left,box.left),box.top=Math.min(b.top,box.top),box.right=Math.max(b.right,box.right),box.bottom=Math.max(b.bottom,box.bottom),done=!0)}return done?(box.width=box.right-box.left,box.height=box.bottom-box.top,box):range.getBoundingClientRect()}return range.getBoundingClientRect()}function doChunk(){var box,origStart=start,pos=text.substr(start).search(/\S/);if(start+=pos,pos<0||start>=end)return!0;range.setStart(node,start),range.setEnd(node,start+1),box=actuallyGetRangeBoundingRect(range);var found=!1;if((isJustified||columnCount>1)&&(pos=text.substr(start).search(/\s/))>=0){range.setEnd(node,start+pos);var r=actuallyGetRangeBoundingRect(range);r.bottom==box.bottom&&(box=r,found=!0,start+=pos)}if(!found){if((pos=function findEOL(min,eol,max){range.setEnd(node,eol);var r=actuallyGetRangeBoundingRect(range);return r.bottom!=box.bottom&&min<eol?findEOL(min,min+eol>>1,eol):r.right!=box.right?(box=r,eol<max?findEOL(eol,eol+max>>1,max):eol):eol}(start,Math.min(end,start+estimateLineLength),end))==start)return!0;if(start=pos,0===(pos=range.toString().search(/\s+$/)))return!1;pos>0&&(range.setEnd(node,range.startOffset+pos),box=actuallyGetRangeBoundingRect(range))}microsoft&&(box=range.getClientRects()[0]);var str=range.toString();if(/^(?:pre|pre-wrap)$/i.test(whiteSpace)){if(/\t/.test(str)){var cc=0;for(pos=origStart;pos<range.startOffset;++pos){var code=text.charCodeAt(pos);9==code?cc+=8-cc%8:10==code||13==code?cc=0:cc++}for(;(pos=str.search("\t"))>=0;){var indent="        ".substr(0,8-(cc+pos)%8);str=str.substr(0,pos)+indent+str.substr(pos+1)}}}else str=str.replace(/\s+/g," ");found||(prevLineBottom=box.bottom),function(str,box){if(microsoft&&!isNaN(lineHeight)){var height=getFontHeight(font),top=(box.top+box.bottom-height)/2;box={top:top,right:box.right,bottom:top+height,left:box.left,height:height,width:box.right-box.left}}switch(textTransform){case"uppercase":str=str.toUpperCase();break;case"lowercase":str=str.toLowerCase();break;case"capitalize":str=str.replace(/(?:^|\s)\S/g,l=>l.toUpperCase())}var text=new core_TextRect(str,new geometry_rect([box.left,box.top],[box.width,box.height]),{font:font,fill:{color:color}});group.append(text)}(str,box)}}function renderElement(element,container){var style=core_getComputedStyle(element);if(updateCounters(style),!/^(style|script|link|meta|iframe|svg|col|colgroup)$/i.test(element.tagName)&&null!=nodeInfo._clipbox){var opacity=parseFloat(getPropertyValue(style,"opacity")),visibility=getPropertyValue(style,"visibility"),display=getPropertyValue(style,"display");if(0!==opacity&&"hidden"!=visibility&&"none"!=display){var group,tr=function(style){var transform=getPropertyValue(style,"transform");if("none"==transform)return null;var matrix=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(transform);if(matrix){var origin=getPropertyValue(style,"transform-origin");return{matrix:matrix=matrix[1].split(/\s*,\s*/g).map(parseFloat),origin:origin=origin.split(/\s+/g).map(parseFloat)}}}(style),zIndex=getPropertyValue(style,"z-index");(tr||opacity<1)&&"auto"==zIndex&&(zIndex=0),group=function(element,group,zIndex){var main;"auto"!=zIndex?(main=nodeInfo._stackingContext.group,zIndex=parseFloat(zIndex)):(main=group,zIndex=0);for(var a=main.children,i=0;i<a.length&&!(null!=a[i]._dom_zIndex&&a[i]._dom_zIndex>zIndex);++i);var tmp=new shapes_group;if(main.insert(i,tmp),tmp._dom_zIndex=zIndex,main!==group&&nodeInfo._clipbox){var m=nodeInfo._matrix.invert(),r=nodeInfo._clipbox.transformCopy(m);core_setClipping(tmp,shapes_path.fromRect(r))}return tmp}(0,container,zIndex),opacity<1&&group.opacity(opacity*group.opacity()),pushNodeInfo(element,style,group),tr?saveStyle(element,(function(){pleaseSetPropertyValue(element.style,"transform","none","important"),pleaseSetPropertyValue(element.style,"transition","none","important"),"static"==getPropertyValue(style,"position")&&pleaseSetPropertyValue(element.style,"position","relative","important");var bbox=element.getBoundingClientRect(),x=bbox.left+tr.origin[0],y=bbox.top+tr.origin[1],m=[1,0,0,1,-x,-y];m=core_mmul(m,tr.matrix),m=core_mmul(m,[1,0,0,1,x,y]),m=setTransform(group,m),nodeInfo._matrix=nodeInfo._matrix.multiplyCopy(m),_renderWithPseudoElements(element,group)})):_renderWithPseudoElements(element,group),popNodeInfo()}}}function core_mmul(a,b){var a1=a[0],b1=a[1],c1=a[2],d1=a[3],e1=a[4],f1=a[5],a2=b[0],b2=b[1],c2=b[2],d2=b[3];return[a1*a2+b1*c2,a1*b2+b1*d2,c1*a2+d1*c2,c1*b2+d1*d2,e1*a2+f1*c2+b[4],e1*b2+f1*d2+b[5]]}function is_string_isString(value){return"string"==typeof value}const formatRegExp=/\{(\d+)}?\}/g;class IntlError{constructor({name:name,message:message}){if(!name||!message)throw new Error("{ name: string, message: string } object is required!");this.name=name,this.message=message}formatMessage(...values){const flattenValues=errors_flatten(values),formattedMessage=this.message.replace(formatRegExp,(function(match,index){return flattenValues[parseInt(index,10)]}));return`${this.name}: ${formattedMessage}`}error(...values){return new Error(this.formatMessage(values))}}const errors_flatten=function(arr){return arr.reduce((a,b)=>a.concat(b),[])},errors_errors=(errors={NoLocale:"Missing locale info for '{0}'",NoCurrency:"Cannot determine currency information. Please load the locale currencies data.",NoSupplementalCurrency:"Cannot determine currency. Please load the supplemental currencyData.",NoCurrencyRegion:"No currency data for region '{0}'",NoCurrencyDisplay:"Cannot determine currency display information. Please load the locale currencies data. The default culture does not include the all currencies data.",NoGMTInfo:"Cannot determine locale GMT format. Please load the locale timeZoneNames data.",NoWeekData:"Cannot determine locale first day of week. Please load the supplemental weekData.",NoFirstDay:"Cannot determine locale first day of week. Please load the supplemental weekData. The default culture includes only the 'en-US' first day info.",NoValidCurrency:"Cannot determine a default currency for the {0} locale. Please specify explicitly the currency with the format options.",NoDateFieldNames:"Cannot determine the locale date field names. Please load the locale dateFields data."},Object.keys(errors).reduce((function(prev,name){return prev[name]=new IntlError({name:name,message:errors[name]}),prev}),{}));var errors;const cldr={en:{name:"en",identity:{version:{_number:"$Revision: 12418 $",_cldrVersion:"29"},language:"en"},territory:"US",numbers:{symbols:{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"",perMille:"",infinity:"",nan:"NaN",timeSeparator:":"},decimal:{patterns:["n"],groupSize:[3]},scientific:{patterns:["nEn"],groupSize:[]},percent:{patterns:["n%"],groupSize:[3]},currency:{patterns:["$n"],groupSize:[3],"unitPattern-count-one":"n $","unitPattern-count-other":"n $"},currencies:{BGN:{displayName:"Bulgarian Lev","displayName-count-one":"Bulgarian lev","displayName-count-other":"Bulgarian leva",symbol:"BGN"},EUR:{displayName:"Euro","displayName-count-one":"euro","displayName-count-other":"euros",symbol:"","symbol-alt-narrow":""},USD:{displayName:"US Dollar","displayName-count-one":"US dollar","displayName-count-other":"US dollars",symbol:"$","symbol-alt-narrow":"$"}},localeCurrency:"USD",accounting:{patterns:["$n","($n)"],groupSize:[3]}},calendar:{gmtFormat:"GMT{0}",gmtZeroFormat:"GMT",patterns:{d:"M/d/y",D:"EEEE, MMMM d, y",m:"MMM d",M:"MMMM d",y:"MMM y",Y:"MMMM y",F:"EEEE, MMMM d, y h:mm:ss a",g:"M/d/y h:mm a",G:"M/d/y h:mm:ss a",t:"h:mm a",T:"h:mm:ss a",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{Bh:"h B",Bhm:"h:mm B",Bhms:"h:mm:ss B",d:"d",E:"ccc",EBhm:"E h:mm B",EBhms:"E h:mm:ss B",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d","MMMMW-count-one":"'week' W 'of' MMMM","MMMMW-count-other":"'week' W 'of' MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y","yw-count-one":"'week' w 'of' Y","yw-count-other":"'week' w 'of' Y"}},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},days:{format:{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},"stand-alone":{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},months:{format:{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},"stand-alone":{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]}},quarters:{format:{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},"stand-alone":{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]}},dayPeriods:{format:{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},narrow:{midnight:"mi",am:"a","am-alt-variant":"am",noon:"n",pm:"p","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"}},"stand-alone":{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},narrow:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"}}},eras:{format:{wide:{0:"Before Christ",1:"Anno Domini","0-alt-variant":"Before Common Era","1-alt-variant":"Common Era"},abbreviated:{0:"BC",1:"AD","0-alt-variant":"BCE","1-alt-variant":"CE"},narrow:{0:"B",1:"A","0-alt-variant":"BCE","1-alt-variant":"CE"}}},dateFields:{era:{wide:"era"},year:{wide:"year",short:"yr.",narrow:"yr."},quarter:{wide:"quarter",short:"qtr.",narrow:"qtr."},month:{wide:"month",short:"mo.",narrow:"mo."},week:{wide:"week",short:"wk.",narrow:"wk."},day:{wide:"day",short:"day",narrow:"day"},weekday:{wide:"day of the week"},dayperiod:{wide:"AM/PM"},hour:{wide:"hour",short:"hr.",narrow:"hr."},minute:{wide:"minute",short:"min.",narrow:"min."},second:{wide:"second",short:"sec.",narrow:"sec."},zone:{wide:"time zone"}}}},supplemental:{likelySubtags:{en:"en-Latn-US"},currencyData:{region:{US:[{USD:{_from:"1792-01-01"}}]}},weekData:{firstDay:{US:"sun"},weekendStart:{"001":"sat"},weekendEnd:{"001":"sun"}}}};function getLocaleInfo(locale){let info;return info=is_string_isString(locale)?info_localeInfo(locale):locale,info}function info_localeInfo(locale){if(cldr[locale])return cldr[locale];if(cldr.supplemental.likelySubtags){const parts=locale.split("-"),language=parts[0],suffixes=parts.slice(1),fullName=function(language,suffixes){const likelySubtags=cldr.supplemental.likelySubtags;for(let idx=0;idx<suffixes.length;idx++){let name=likelySubtags[language+"-"+suffixes[idx]];if(name)return name}if(likelySubtags[language])return likelySubtags[language]}(language,suffixes),info=fullName?function(fullName,suffixes){const parts=fullName.split("-"),language=parts[0],script=parts[1],territory=parts[2];return cldr[fullName]||-1!==suffixes.indexOf(territory)&&cldr[language+"-"+territory]||-1!==suffixes.indexOf(script)&&cldr[language+"-"+script]||cldr[language]}(fullName,suffixes):null;if(info)return info}throw errors_errors.NoLocale.error(locale)}function localeTerritory(info){if(info.territory)return info.territory;const identity=info.identity;let territory;return territory=identity&&identity.territory?identity.territory:function(name,identity){const likelySubtags=cldr.supplemental.likelySubtags;let parts=name.split("-");if(likelySubtags){const likelyName=likelySubtags[name]||likelySubtags[parts[0]];likelyName&&(parts=likelyName.split("-"))}if(identity)for(let idx=parts.length-1;idx>=1;idx--){const part=parts[idx];part!==identity.variant&&part!==identity.script||parts.splice(idx,1)}const length=parts.length;if(length>1)return parts[length-1].toUpperCase()}(info.name,identity),info.territory=territory,territory}function dateFieldName(options,locale="en"){const dateFields=info_localeInfo(locale).calendar.dateFields;if(!dateFields)throw errors_errors.NoDateFieldNames.error();const fieldNameInfo=dateFields[options.type]||{};return fieldNameInfo[options.nameType]||fieldNameInfo.wide}function dateFormatNames(locale,options){const{type:type,nameType:nameType,standAlone:standAlone,lower:lower}=options,lowerNameType=(lower?"lower-":"")+nameType,formatNames=getLocaleInfo(locale).calendar[type][standAlone?"stand-alone":"format"];let result=formatNames[lowerNameType];var obj;return!result&&lower&&(result=formatNames[lowerNameType]=(obj=formatNames[nameType],Array.isArray(obj)?function(arr){const result=[];for(let idx=0;idx<arr.length;idx++)result.push(arr[idx].toLowerCase());return result}(obj):function(obj){const result={};for(let field in obj)result[field]=obj[field].toLowerCase();return result}(obj))),result}function parseRangeDate(value){const parts=value.split("-"),year=parseInt(parts[0],10),month=parseInt(parts[1],10)-1,day=parseInt(parts[2],10);return new Date(year,month,day)}const{NoCurrency:NoCurrency,NoCurrencyDisplay:NoCurrencyDisplay,NoSupplementalCurrency:NoSupplementalCurrency,NoCurrencyRegion:NoCurrencyRegion,NoValidCurrency:NoValidCurrency}=errors_errors,SYMBOL="symbol",GLOBAL_CURRENCIES={"001":"USD",150:"EUR"};function getCurrencyInfo(locale,currency,throwIfNoValid){const currencies=getLocaleInfo(locale).numbers.currencies;if(!currencies){if(throwIfNoValid)throw NoCurrency.error();return}const currencyDisplayInfo=currencies[currency];if(currencyDisplayInfo)return currencyDisplayInfo;if(throwIfNoValid)throw NoCurrencyDisplay.error()}function lengthComparer(a,b){return b.length-a.length}function localeCurrency(locale,throwIfNoValid){const info=getLocaleInfo(locale),numbers=info.numbers;if(!numbers.localeCurrency){const currency=function(territory,throwIfNoValid=!0){if(GLOBAL_CURRENCIES[territory])return GLOBAL_CURRENCIES[territory];const currencyData=cldr.supplemental.currencyData;if(!currencyData){if(throwIfNoValid)throw NoSupplementalCurrency.error();return}const regionCurrencies=currencyData.region[territory];if(regionCurrencies)return function(regionCurrencies){let latestValidUntil,latestValidUntilRange,latestStillValid,latestStillValidDate;for(let idx=0;idx<regionCurrencies.length;idx++){const currency=regionCurrencies[idx],code=Object.keys(currency)[0],info=currency[code];if("XXX"!==code&&"false"!==info._tender&&info._from)if(info._to){if(!latestStillValid){const validFrom=parseRangeDate(info._from),validTo=parseRangeDate(info._to);(!latestValidUntilRange||latestValidUntilRange.to<validTo||latestValidUntilRange.from<validFrom)&&(latestValidUntil=code,latestValidUntilRange={from:validFrom,to:validTo})}}else{const stillValidDate=parseRangeDate(info._from);(!latestStillValidDate||latestStillValidDate<stillValidDate)&&(latestStillValid=code,latestStillValidDate=stillValidDate)}}return latestStillValid||latestValidUntil}(regionCurrencies);if(throwIfNoValid)throw NoCurrencyRegion.error(territory)}(localeTerritory(info),throwIfNoValid);if(!currency&&throwIfNoValid)throw NoValidCurrency.error(info.name);numbers.localeCurrency=currency}return numbers.localeCurrency}const DAYS_OF_WEEK=["sun","mon","tue","wed","thu","fri","sat"],{NoWeekData:NoWeekData,NoFirstDay:NoFirstDay}=errors_errors;function first_day_firstDay(locale){const info=getLocaleInfo(locale);if(!isNaN(info.firstDay))return info.firstDay;const weekData=cldr.supplemental.weekData;if(!weekData)throw NoWeekData.error();const firstDay=weekData.firstDay[localeTerritory(info)]||weekData.firstDay["001"];if(!firstDay)throw NoFirstDay.error();return info.firstDay=DAYS_OF_WEEK.indexOf(firstDay),info.firstDay}const{NoWeekData:weekend_range_NoWeekData}=errors_errors;function weekendRange(locale){const info=getLocaleInfo(locale);if(info.weekendRange)return info.weekendRange;const weekData=cldr.supplemental.weekData;if(!weekData)throw weekend_range_NoWeekData.error();const territory=localeTerritory(info),end=weekData.weekendEnd[territory]||weekData.weekendEnd["001"];return info.weekendRange={start:DAYS_OF_WEEK.indexOf(weekData.weekendStart[territory]||weekData.weekendStart["001"]),end:DAYS_OF_WEEK.indexOf(end)},info.weekendRange}function numberSymbols(locale){return getLocaleInfo(locale).numbers.symbols}function isNegativeZero(value){return 1/value==-1/0}function formatCurrencySymbol(info,options={}){return options.currency||(options.currency=localeCurrency(info,!0)),function(locale,options){const{value:value,currency:currency,currencyDisplay:currencyDisplay=SYMBOL}=options;if("code"===currencyDisplay)return currency;const currencyInfo=getCurrencyInfo(locale,currency,!0);let result;return result=currencyDisplay===SYMBOL?currencyInfo["symbol-alt-narrow"]||currencyInfo[SYMBOL]:void 0===typeof value||1!==value?currencyInfo["displayName-count-other"]:currencyInfo["displayName-count-one"],result}(info,options)}function groupInteger(number,start,end,options,info){const symbols=info.numbers.symbols,decimalIndex=number.indexOf(symbols.decimal),groupSizes=options.groupSize.slice();let groupSize=groupSizes.shift(),integerEnd=-1!==decimalIndex?decimalIndex:end+1,integer=number.substring(start,integerEnd),result=number;const integerLength=integer.length;if(integerLength>=groupSize){let idx=integerLength,parts=[];for(;idx>-1;){let value=integer.substring(idx-groupSize,idx);value&&parts.push(value),idx-=groupSize;let newGroupSize=groupSizes.shift();if(groupSize=void 0!==newGroupSize?newGroupSize:groupSize,0===groupSize){value=integer.substring(0,idx),value&&parts.push(value);break}}integer=parts.reverse().join(symbols.group),result=number.substring(0,start)+integer+number.substring(integerEnd)}return result}function isCurrencyStyle(style){return"currency"===style||"accounting"===style}function pad_pad(number,digits=2,right=!1){const count=digits-String(number).length;let result=number;if(count>0){const padString=new Array(count+1).join("0");result=right?number+padString:padString+number}return result}function round_round(value,precision){let result=value,decimals=precision||0;return result=result.toString().split("e"),result=Math.round(Number(result[0]+"e"+(result[1]?Number(result[1])+decimals:decimals))),result=result.toString().split("e"),result=Number(result[0]+"e"+(result[1]?Number(result[1])-decimals:-decimals)),result.toFixed(Math.min(decimals,20))}const trailingZeroRegex=/0+$/,literalRegExp=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g;function setStyleOptions(formatOptions,info){const format=formatOptions.format;-1!==format.indexOf("%")&&(formatOptions.style="percent",formatOptions.symbol=info.numbers.symbols.percentSign,formatOptions.number*=100),-1!==format.indexOf("$")&&(formatOptions.style="currency",formatOptions.symbol=formatCurrencySymbol(info))}function setFormatLiterals(formatOptions){let format=formatOptions.format;if(format.indexOf("'")>-1||format.indexOf('"')>-1||format.indexOf("\\")>-1){const literals=formatOptions.literals=[];formatOptions.format=format.replace(literalRegExp,(function(match){const quoteChar=match.charAt(0).replace("\\",""),literal=match.slice(1).replace(quoteChar,"");return literals.push(literal),"__??__"}))}}const trailingZerosRegExp=/(\.(?:[0-9]*[1-9])?)0+$/g,trailingPointRegExp=/\.$/,commaRegExp=/\,/g;function placeholderIndex(index1,index2,start){let index;return index=-1===index1&&-1!==index2?index2:-1!==index1&&-1===index2?index1:start?Math.min(index1,index2):Math.max(index1,index2),index}const standardFormatRegExp=/^(n|c|p|e|a)(\d*)$/i;function format_options_formatOptions(format){let options;return options=is_string_isString(format)?function(format){const formatAndPrecision=standardFormatRegExp.exec(format);if(formatAndPrecision){const options={style:"decimal"};let style=formatAndPrecision[1].toLowerCase();return"c"===style?options.style="currency":"a"===style?options.style="accounting":"p"===style?options.style="percent":"e"===style&&(options.style="scientific"),formatAndPrecision[2]&&(options.minimumFractionDigits=options.maximumFractionDigits=parseInt(formatAndPrecision[2],10)),options}}(format):format,options}function format_number_formatNumber(number,format="n",locale="en"){if(null==number)return"";if(!isFinite(number))return String(number);const info=info_localeInfo(locale),options=format_options_formatOptions(format);let result;return result=options?function(number,options,info){const symbols=info.numbers.symbols,{style:style}=options,isCurrency=isCurrencyStyle(style);if("scientific"===style)return(void 0!==options.minimumFractionDigits?number.toExponential(options.minimumFractionDigits):number.toExponential()).replace(".",symbols.decimal);let symbol,value=number;isCurrency&&(options.value=value,symbol=formatCurrencySymbol(info,options)),"percent"===style&&(value*=100,symbol=symbols.percentSign);const{minimumFractionDigits:minimumFractionDigits,maximumFractionDigits:maximumFractionDigits}=function(options){let{minimumFractionDigits:minimumFractionDigits,maximumFractionDigits:maximumFractionDigits,style:style}=options;const isCurrency=isCurrencyStyle(style);let currencyFractions;return isCurrency&&(currencyFractions=function(code){let minimumFractionDigits=2,maximumFractionDigits=2;const fractions=((cldr.supplemental.currencyData||{}).fractions||{})[code];return fractions&&fractions._digits&&(maximumFractionDigits=minimumFractionDigits=parseInt(fractions._digits,10)),{minimumFractionDigits:minimumFractionDigits,maximumFractionDigits:maximumFractionDigits}}(options.currency)),void 0===minimumFractionDigits&&(minimumFractionDigits=isCurrency?currencyFractions.minimumFractionDigits:0),void 0===maximumFractionDigits&&(maximumFractionDigits="percent"===style?Math.max(minimumFractionDigits,0):isCurrency?Math.max(minimumFractionDigits,currencyFractions.maximumFractionDigits):Math.max(minimumFractionDigits,3)),{minimumFractionDigits:minimumFractionDigits,maximumFractionDigits:maximumFractionDigits}}(options);value=round_round(value,maximumFractionDigits);const negative=value<0,negativeZero=isNegativeZero(number),parts=value.split(".");let integer=parts[0],fraction=pad_pad(parts[1]?parts[1].replace(trailingZeroRegex,""):"",minimumFractionDigits,!0);negative&&(integer=integer.substring(1)),options.minimumIntegerDigits&&(integer=pad_pad(integer,options.minimumIntegerDigits));let pattern,formattedValue=!1!==options.useGrouping?groupInteger(integer,0,integer.length,options,info):integer;if(fraction&&(formattedValue+=symbols.decimal+fraction),isCurrency&&"name"===options.currencyDisplay)pattern=function(info,value){const currencyInfo=info.numbers.currency;let pattern=1!==value?currencyInfo["unitPattern-count-other"]:currencyInfo["unitPattern-count-one"];return value<0&&(pattern=pattern.replace("n","-n")),pattern}(info,number);else{const patterns=options.patterns;pattern=negative||negativeZero?patterns[1]||"-"+patterns[0]:patterns[0]}return"n"!==pattern||negative?function(value,pattern,symbol){let result="";for(let idx=0,length=pattern.length;idx<length;idx++){let ch=pattern.charAt(idx);result+="n"===ch?value:"$"===ch||"%"===ch?symbol:ch}return result}(formattedValue,pattern,symbol):formattedValue}(number,Object.assign({},info.numbers[options.style||"decimal"],options),info):function(number,format,info){const formatOptions={negative:number<0,number:Math.abs(number),negativeZero:isNegativeZero(number),format:format};return function(formatOptions){let{number:number,format:format}=formatOptions;if(format=format.split(";"),(formatOptions.negative||formatOptions.negativeZero)&&format[1])format=format[1],formatOptions.hasNegativeFormat=!0;else if(0===number){const zeroFormat=format[2];format=zeroFormat||format[0],zeroFormat&&function(format){return-1===format.indexOf("#")&&-1===format.indexOf("0")}(zeroFormat)&&(formatOptions.constant=zeroFormat)}else format=format[0];formatOptions.format=format}(formatOptions),formatOptions.constant?formatOptions.constant:(setFormatLiterals(formatOptions),setStyleOptions(formatOptions,info),function(formatOptions){formatOptions.hasGroup=formatOptions.format.indexOf(",")>-1,formatOptions.hasGroup&&(formatOptions.format=formatOptions.format.replace(commaRegExp,""))}(formatOptions),function(formatOptions){let{number:number,format:format}=formatOptions,decimalIndex=format.indexOf(".");if(-1!==decimalIndex){const zeroIndex=format.lastIndexOf("0")-decimalIndex,sharpIndex=format.lastIndexOf("#")-decimalIndex,hasZero=zeroIndex>-1,hasSharp=sharpIndex>-1;let fraction=number.toString().split("e");fraction=fraction[1]?round_round(number,Math.abs(fraction[1])):fraction[0],fraction=fraction.split(".")[1]||"";let precision=fraction.length,trailingZeros=-1;hasZero||hasSharp?hasZero&&zeroIndex>sharpIndex?precision=zeroIndex:sharpIndex>zeroIndex&&(hasSharp&&precision>sharpIndex?precision=sharpIndex:hasZero&&precision<zeroIndex&&(precision=zeroIndex),trailingZeros=hasZero?zeroIndex:0):(formatOptions.format=format.substring(0,decimalIndex)+format.substring(decimalIndex+1),decimalIndex=-1,precision=0),precision>-1&&(number=round_round(number,precision),trailingZeros>-1&&(number=function(value,lastZero){let trimRegex;return trimRegex=0===lastZero?trailingZerosRegExp:new RegExp(`(\\.[0-9]{${lastZero}}[1-9]*)0+$`,"g"),value.replace(trimRegex,"$1").replace(trailingPointRegExp,"")}(number,trailingZeros)))}else number=round_round(number);formatOptions.negative&&-1*number>=0&&!formatOptions.negativeZero&&(formatOptions.negative=!1),formatOptions.number=number,formatOptions.decimalIndex=decimalIndex}(formatOptions),function(formatOptions){const format=formatOptions.format;let sharpIndex=format.indexOf("#"),zeroIndex=format.indexOf("0"),start=placeholderIndex(sharpIndex,zeroIndex,!0);sharpIndex=format.lastIndexOf("#"),zeroIndex=format.lastIndexOf("0");let end=placeholderIndex(sharpIndex,zeroIndex);start===format.length&&(end=start),formatOptions.start=start,formatOptions.end=end,formatOptions.lastZeroIndex=zeroIndex}(formatOptions),function(formatOptions,info){let number=formatOptions.number;return-1!==formatOptions.start&&(number=function(formatOptions,info){const{start:start,end:end,negative:negative,negativeZero:negativeZero,format:format,decimalIndex:decimalIndex,lastZeroIndex:lastZeroIndex,hasNegativeFormat:hasNegativeFormat,hasGroup:hasGroup}=formatOptions;let number=formatOptions.number;const value=number.toString().split("."),length=format.length,integer=value[0],fraction=value[1]||"",integerLength=integer.length;let replacement="";number=format.substring(0,start),!negative&&!negativeZero||hasNegativeFormat||(number+="-");for(let idx=start;idx<length;idx++){let ch=format.charAt(idx);if(-1===decimalIndex){if(end-idx<integerLength){number+=integer;break}}else if(-1!==lastZeroIndex&&lastZeroIndex<idx&&(replacement=""),decimalIndex-idx<=integerLength&&decimalIndex-idx>-1&&(number+=integer,idx=decimalIndex),decimalIndex===idx){number+=(fraction?info.numbers.symbols.decimal:"")+fraction,idx+=end-decimalIndex+1;continue}"0"===ch?(number+=ch,replacement=ch):"#"===ch&&(number+=replacement)}return hasGroup&&(number=groupInteger(number,start+(negative&&!hasNegativeFormat?1:0),Math.max(end,integerLength+start),info.numbers.decimal,info)),end>=start&&(number+=format.substring(end+1)),number}(formatOptions,info),number=function(number,style,symbol){let result=number;if("currency"===style||"percent"===style){result="";for(let idx=0,length=number.length;idx<length;idx++){let ch=number.charAt(idx);result+="$"===ch||"%"===ch?symbol:ch}}return result}(number,formatOptions.style,formatOptions.symbol),number=function(number,literals){let result=number;if(literals){const length=literals.length;for(let idx=0;idx<length;idx++)result=result.replace("__??__",literals[idx])}return result}(number,formatOptions.literals)),number}(formatOptions,info))}(number,format,info),result}function is_number_isNumber(value){return"number"==typeof value}const exponentRegExp=/[eE][\-+]?[0-9]+/,nonBreakingSpaceRegExp=/\u00A0/g;function cleanNegativePattern(number,patterns){if(patterns.length>1){const parts=(patterns[1]||"").replace("$","").split("n");if(number.indexOf(parts[0])>-1&&number.indexOf(parts[1])>-1)return number.replace(parts[0],"").replace(parts[1],"")}}function parse_number_parseNumber(value,locale="en",format={}){if(!value&&0!==value)return null;if(is_number_isNumber(value))return value;const info=info_localeInfo(locale),symbols=info.numbers.symbols;let isPercent,number=value.toString(),formatOptions=format||{};if(is_string_isString(format)&&(formatOptions={format:format},setFormatLiterals(formatOptions),number=function(number,formatOptions){const literals=formatOptions.literals;let result=number;if(literals)for(let idx=0;idx<literals.length;idx++)result=result.replace(literals[idx],"");return result}(number,formatOptions),setStyleOptions(formatOptions,info)),("percent"===formatOptions.style||number.indexOf(symbols.percentSign)>-1)&&(number=number.replace(symbols.percentSign,""),isPercent=!0),exponentRegExp.test(number))return number=parseFloat(number.replace(symbols.decimal,".")),isNaN(number)?null:number;const{negative:negativeCurrency,number:currencyNumber}=function(value,info,format){const options=format_options_formatOptions(format)||{};let negative,isCurrency=isCurrencyStyle(options.style),number=value;const currency=options.currency||localeCurrency(info,isCurrency);if(currency){const displays=function(locale,currency,throwIfNoValid=!0){const currencyInfo=getCurrencyInfo(locale,currency,throwIfNoValid);if(currencyInfo){if(!currencyInfo.displays){const displays=[currency];for(let field in currencyInfo)displays.push(currencyInfo[field]);displays.sort(lengthComparer),currencyInfo.displays=displays}return currencyInfo.displays}}(info,currency,isCurrency);if(displays)for(let idx=0;idx<displays.length;idx++){let display=displays[idx];if(number.includes(display)){number=number.replace(display,""),isCurrency=!0;break}}if(isCurrency){const cleanNumber=cleanNegativePattern(number,info.numbers.currency.patterns)||cleanNegativePattern(number,info.numbers.accounting.patterns);cleanNumber&&(negative=!0,number=cleanNumber)}}return{number:number,negative:negative}}(number,info,formatOptions);number=String(currencyNumber).trim();const negativeSignIndex=number.indexOf("-");if(negativeSignIndex>0)return null;let isNegative=negativeSignIndex>-1;return isNegative=void 0!==negativeCurrency?negativeCurrency:isNegative,number=number.replace("-","").replace(nonBreakingSpaceRegExp," ").split(symbols.group.replace(nonBreakingSpaceRegExp," ")).join("").replace(symbols.decimal,"."),number=parseFloat(number),isNaN(number)?number=null:isNegative&&(number*=-1),number&&isPercent&&(number/=100),number}const format_string_formatRegExp=/\{(\d+)}/g;function formatString(format){const values=arguments;return format.replace(format_string_formatRegExp,(match,index)=>values[parseInt(index,10)+1])}const LENGHT_DELTA=[2,1,5,3,4],PENALTIES={[(-2).toString()]:8,[(-1).toString()]:6,[2..toString()]:6,[1..toString()]:3},VALUE_FORMAT_LENGTH={numeric:1,"2-digit":2,short:3,long:4,narrow:5},TIME_SPECIFIERS_REGEX=/[hHmsSzZoOvVxX]/,DATE_OPTIONS_MAP=[{key:"era",specifier:"G"},{key:"year",specifier:"y"},{key:"month",specifier:"M"},{key:"day",specifier:"d"},{key:"weekday",specifier:"E"},{key:"hour",getSpecifier:function(options){return options.hour12?"h":"H"}},{key:"minute",specifier:"m"},{key:"second",specifier:"s"},{key:"timeZoneName",specifier:"z"}],STAND_ALONE_SPECIFIERS={e:"c",E:"c",M:"L",Q:"q"},specifiersRegex={},resolvedFormats={};function getSpecifierRegex(specifier){return specifiersRegex[specifier]||(specifiersRegex[specifier]=new RegExp(specifier+"+")),specifiersRegex[specifier]}function skeletonSpecifiers(skeleton){const result=[];let current=skeleton.charAt(0),specifier=current;for(let idx=1;idx<skeleton.length;idx++){let character=skeleton.charAt(idx);character===specifier?current+=character:(result.push(current),current=specifier=character)}return result.push(current),result}function findBestMatch(specifiers,availableFormats){const specifiersLength=specifiers.length;let bestMatches,result,maxScore=-Number.MAX_VALUE;for(let format in availableFormats){const matches=[];let currentFormat=format.replace("v","z"),score=0;for(let idx=0;idx<specifiersLength;idx++){const specifier=specifiers[idx];let match=(getSpecifierRegex(specifier[0]).exec(currentFormat)||[])[0];if(match){if(currentFormat=currentFormat.replace(match,""),match.length!==specifier.length){let delta=Math.max(Math.min(LENGHT_DELTA[match.length]-LENGHT_DELTA[specifier.length],2),-2);score-=PENALTIES[delta]}}else score-=120;if(matches.push(match),score<maxScore)break}currentFormat.length&&(score-=20*skeletonSpecifiers(currentFormat).length),score>maxScore&&(maxScore=score,bestMatches=matches,result=availableFormats[format])}result=result.replace("v","z");for(let idx=0;idx<specifiersLength;idx++){const bestMatch=bestMatches[idx];if(bestMatch&&bestMatch!==specifiers[idx]){const matchSpecifier=bestMatches[idx][0];result=result.replace(getSpecifierRegex(matchSpecifier),specifiers[idx]),STAND_ALONE_SPECIFIERS[matchSpecifier]&&(result=result.replace(getSpecifierRegex(STAND_ALONE_SPECIFIERS[matchSpecifier]),specifiers[idx]))}}return result}function datePattern(format,info){const calendar=info.calendar;let result;if(is_string_isString(format))result=calendar.patterns[format]?calendar.patterns[format]:format;else if(format){if(format.pattern)return format.pattern;let skeleton=format.skeleton;skeleton||(format.datetime?result=formatString(calendar.dateTimeFormats[format.datetime],calendar.timeFormats[format.datetime],calendar.dateFormats[format.datetime]):format.date?result=calendar.dateFormats[format.date]:format.time?result=calendar.timeFormats[format.time]:skeleton=function(options){let result=[];for(let idx=0;idx<DATE_OPTIONS_MAP.length;idx++){let option=DATE_OPTIONS_MAP[idx],value=options[option.key];if(value){let spcifier=option.specifier||option.getSpecifier(options);result.push(spcifier.repeat(VALUE_FORMAT_LENGTH[value]))}}return result.join("")}(format)),skeleton&&(result=function(skeleton,info){const availableFormats=info.calendar.dateTimeFormats.availableFormats;if(availableFormats[skeleton])return availableFormats[skeleton];if(resolvedFormats[info.name]&&resolvedFormats[info.name][skeleton])return resolvedFormats[info.name][skeleton];const timeStartIndex=skeleton.search(TIME_SPECIFIERS_REGEX);let result;if(timeStartIndex>0){const dateSkeleton=skeleton.substr(0,timeStartIndex),timeSkeleton=skeleton.substr(timeStartIndex);result=formatString(info.calendar.dateTimeFormats.short,availableFormats[timeSkeleton]||findBestMatch(skeletonSpecifiers(timeSkeleton),availableFormats),availableFormats[dateSkeleton]||findBestMatch(skeletonSpecifiers(dateSkeleton),availableFormats))}else result=findBestMatch(skeletonSpecifiers(skeleton),availableFormats);return function(skeleton,format,locale){resolvedFormats[locale]||(resolvedFormats[locale]={}),resolvedFormats[locale][skeleton]=format}(skeleton,result,info.name),result}(skeleton,info))}return result||(result=calendar.patterns.d),result}function dateNameType(formatLength){let nameType;return formatLength<=3?nameType="abbreviated":4===formatLength?nameType="wide":5===formatLength?nameType="narrow":6===formatLength&&(nameType="short"),nameType}function format_names_formatNames(locale,type,formatLength,standAlone,lower){return dateFormatNames(locale,{type:type,nameType:dateNameType(formatLength),standAlone:standAlone,lower:lower})}function is_date_isFunction(fun){return"function"==typeof fun}function is_date_isDate(value){return Boolean(value)&&is_date_isFunction(value.getTime)&&is_date_isFunction(value.getMonth)}const DATE_FIELD_MAP={G:"era",y:"year",q:"quarter",Q:"quarter",M:"month",L:"month",d:"day",E:"weekday",c:"weekday",e:"weekday",h:"hour",H:"hour",k:"hour",K:"hour",m:"minute",s:"second",a:"dayperiod",x:"zone",X:"zone",z:"zone",Z:"zone"},dateFormatRegExp=/d{1,2}|E{1,6}|e{1,6}|c{3,6}|c{1}|M{1,5}|L{1,5}|y{1,4}|H{1,2}|h{1,2}|k{1,2}|K{1,2}|m{1,2}|a{1,5}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|x{1,5}|X{1,5}|G{1,5}|q{1,5}|Q{1,5}|"[^"]*"|'[^']*'/g;function formatMonth(month,formatLength,info,standAlone){return formatLength<=2?pad_pad(month+1,formatLength):format_names_formatNames(info,"months",formatLength,standAlone)[month]}function formatQuarter(date,formatLength,info,standAlone){const quarter=Math.floor(date.getMonth()/3);return formatLength<3?quarter+1:format_names_formatNames(info,"quarters",formatLength,standAlone)[quarter]}function formatTimeZone(date,info,options){const{shortHours:shortHours,optionalMinutes:optionalMinutes,separator:separator,localizedName:localizedName,zZeroOffset:zZeroOffset}=options,offset=date.getTimezoneOffset()/60;if(0===offset&&zZeroOffset)return"Z";const sign=offset<=0?"+":"-",hoursMinutes=Math.abs(offset).toString().split("."),minutes=hoursMinutes[1]||0;let result=sign+(shortHours?hoursMinutes[0]:pad_pad(hoursMinutes[0],2));return!minutes&&optionalMinutes||(result+=(separator?":":"")+pad_pad(minutes,2)),localizedName&&(result=formatString(0===offset?info.calendar.gmtZeroFormat:info.calendar.gmtFormat,result)),result}function formatDayOfWeek(date,formatLength,info,standAlone){let result;return result=formatLength<3?function(day,formatLength,localeInfo){const firstDayIndex=first_day_firstDay(localeInfo);let dayIndex;return dayIndex=day<firstDayIndex?7-firstDayIndex+day:day-firstDayIndex,dayIndex+1}(date.getDay(),0,info):format_names_formatNames(info,"days",formatLength,standAlone)[date.getDay()],result}const format_date_formatters=function(){var formatters={d:function(date,formatLength){return pad_pad(date.getDate(),formatLength)},E:function(date,formatLength,info){return format_names_formatNames(info,"days",formatLength)[date.getDay()]},M:function(date,formatLength,info){return formatMonth(date.getMonth(),formatLength,info,!1)},L:function(date,formatLength,info){return formatMonth(date.getMonth(),formatLength,info,!0)},y:function(date,formatLength){let year=date.getFullYear();return 2===formatLength&&(year%=100),pad_pad(year,formatLength)},h:function(date,formatLength){return pad_pad(date.getHours()%12||12,formatLength)},H:function(date,formatLength){return pad_pad(date.getHours(),formatLength)},k:function(date,formatLength){return pad_pad(date.getHours()||24,formatLength)},K:function(date,formatLength){return pad_pad(date.getHours()%12,formatLength)},m:function(date,formatLength){return pad_pad(date.getMinutes(),formatLength)},s:function(date,formatLength){return pad_pad(date.getSeconds(),formatLength)},S:function(date,formatLength){let result;return result=0!==date.getMilliseconds()?String(date.getMilliseconds()/1e3).split(".")[1].substr(0,formatLength):pad_pad("",formatLength),result},a:function(date,formatLength,info){return format_names_formatNames(info,"dayPeriods",formatLength)[date.getHours()<12?"am":"pm"]},z:function(date,formatLength,info){return formatTimeZone(date,info,{shortHours:formatLength<4,optionalMinutes:formatLength<4,separator:!0,localizedName:!0})},Z:function(date,formatLength,info){return formatTimeZone(date,info,{separator:formatLength>3,localizedName:4===formatLength,zZeroOffset:5===formatLength})},x:function(date,formatLength,info){return formatTimeZone(date,info,{optionalMinutes:1===formatLength,separator:3===formatLength||5===formatLength})},X:function(date,formatLength,info){return formatTimeZone(date,info,{optionalMinutes:1===formatLength,separator:3===formatLength||5===formatLength,zZeroOffset:!0})},G:function(date,formatLength,info){let era=date.getFullYear()>=0?1:0;return format_names_formatNames(info,"eras",formatLength)[era]}};return formatters.e=formatDayOfWeek,formatters.c=function(date,formatLength,info){return formatDayOfWeek(date,formatLength,info,!0)},formatters.q=function(date,formatLength,info){return formatQuarter(date,formatLength,info,!0)},formatters.Q=formatQuarter,formatters}();function format_date_formatDate(date,format,locale="en"){if(!is_date_isDate(date))return null==date?"":date;const info=info_localeInfo(locale);return datePattern(format,info).replace(dateFormatRegExp,(function(match){let result,formatLength=match.length;return result=match.includes("'")||match.includes('"')?match.slice(1,formatLength-1):format_date_formatters[match[0]](date,formatLength,info),result}))}function convertTimeZone(date,fromOffset,toOffset){const fromLocalOffset=date.getTimezoneOffset(),offsetDate=new Date(date.getTime()+6e4*(fromOffset-toOffset)),toLocalOffset=offsetDate.getTimezoneOffset();return new Date(offsetDate.getTime()+6e4*(toLocalOffset-fromLocalOffset))}const timeZoneOffsetRegExp=/([+|\-]\d{1,2})(:?)(\d{2})?/,parse_date_dateRegExp=/^\/Date\((.*?)\)\/$/,offsetRegExp=/[+-]\d*/,numberRegExp={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},numberRegex=/\d+/,leadingSpacesRegex=/^ */,trailingSpacesRegex=/ *$/,standardDateFormats=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","E MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.SSSSSSSXXX","yyyy-MM-ddTHH:mm:ss.SSSXXX","yyyy-MM-ddTHH:mm:ss.SSXXX","yyyy-MM-ddTHH:mm:ssXXX","yyyy-MM-ddTHH:mm:ss.SSSSSSS","yyyy-MM-ddTHH:mm:ss.SSS","yyyy-MM-ddTHH:mmXXX","yyyy-MM-ddTHH:mmX","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"],FORMATS_SEQUENCE=["G","g","F","Y","y","M","m","D","d","y","T","t"];function parse_date_outOfRange(value,start,end){return!(value>=start&&value<=end)}function lookAhead(match,state){let{format:format,idx:idx}=state,i=0;for(;format[idx]===match;)i++,idx++;return i>0&&(idx-=1),state.idx=idx,i}function getNumber(size,state){let regex=size?numberRegExp[size]||new RegExp("^\\d{1,"+size+"}"):numberRegex,match=state.value.substr(state.valueIdx,size).match(regex);return match?(match=match[0],state.valueIdx+=match.length,parseInt(match,10)):null}function getIndexByName(names,state,lower){let name,nameLength,subValue,i=0,length=names.length,matchLength=0,matchIdx=0;for(;i<length;i++)name=names[i],nameLength=name.length,subValue=state.value.substr(state.valueIdx,nameLength),lower&&(subValue=subValue.toLowerCase()),subValue===name&&nameLength>matchLength&&(matchLength=nameLength,matchIdx=i);return matchLength?(state.valueIdx+=matchLength,matchIdx+1):null}function checkLiteral(state){let result=!1;return state.value.charAt(state.valueIdx)===state.format[state.idx]&&(state.valueIdx++,result=!0),result}function parseTimeZoneOffset(state,info,options){const{shortHours:shortHours,noSeparator:noSeparator,optionalMinutes:optionalMinutes,localizedName:localizedName,zLiteral:zLiteral}=options;if(state.UTC=!0,zLiteral&&"Z"===state.value.charAt(state.valueIdx))return state.valueIdx++,!1;if(localizedName&&!getIndexByName(function(calendar){const{gmtFormat:gmtFormat,gmtZeroFormat:gmtZeroFormat}=calendar;if(!gmtFormat)throw errors_errors.NoGMTInfo.error();return[gmtFormat.replace("{0}","").toLowerCase(),gmtZeroFormat.replace("{0}","").toLowerCase()]}(info.calendar),state,!0))return!0;const matches=timeZoneOffsetRegExp.exec(state.value.substr(state.valueIdx,6));if(!matches)return!localizedName;const hoursMatch=matches[1],minutesMatch=matches[3],hoursOffset=parseInt(hoursMatch,10),separator=matches[2];let minutesOffset=parseInt(minutesMatch,10);return!!(isNaN(hoursOffset)||!shortHours&&3!==hoursMatch.length||!optionalMinutes&&isNaN(minutesOffset)||noSeparator&&separator)||(isNaN(minutesOffset)&&(minutesOffset=null),!!(parse_date_outOfRange(hoursOffset,-12,13)||minutesOffset&&parse_date_outOfRange(minutesOffset,0,59))||(state.valueIdx+=matches[0].length,state.hoursOffset=hoursOffset,void(state.minutesOffset=minutesOffset)))}function parseMonth(ch,state,info){const count=lookAhead(ch,state),names=format_names_formatNames(info,"months",count,"L"===ch,!0),month=count<3?getNumber(2,state):getIndexByName(names,state,!0);if(null===month||parse_date_outOfRange(month,1,12))return!0;state.month=month-1}function parseDayOfWeek(ch,state,info){const count=lookAhead(ch,state),names=format_names_formatNames(info,"days",count,"c"===ch,!0);let dayOfWeek=count<3?getNumber(1,state):getIndexByName(names,state,!0);if(!dayOfWeek&&0!==dayOfWeek||parse_date_outOfRange(dayOfWeek,1,7))return!0}const parse_date_parsers=function(){return{d:function(state){lookAhead("d",state);const day=getNumber(2,state);if(null===day||parse_date_outOfRange(day,1,31))return!0;null===state.day&&(state.day=day)},E:function(state,info){if(null===getIndexByName(format_names_formatNames(info,"days",lookAhead("E",state),!1,!0),state,!0))return!0},M:function(state,info){return parseMonth("M",state,info)},L:function(state,info){return parseMonth("L",state,info)},y:function(state){const count=lookAhead("y",state);let year=getNumber(1===count?void 0:count,state);if(null===year)return!0;if(2===count){const currentYear=(new Date).getFullYear();year=currentYear-currentYear%100+year,year>2029&&(year-=100)}state.year=year},h:function(state){lookAhead("h",state);let hours=getNumber(2,state);if(12===hours&&(hours=0),null===hours||parse_date_outOfRange(hours,0,11))return!0;state.hours=hours},K:function(state){lookAhead("K",state);let hours=getNumber(2,state);if(null===hours||parse_date_outOfRange(hours,0,11))return!0;state.hours=hours},a:function(state,info){let periodFormats=format_names_formatNames(info,"dayPeriods",lookAhead("a",state),!1,!0);const pmHour=getIndexByName([periodFormats.pm],state,!0);if(!pmHour&&!getIndexByName([periodFormats.am],state,!0))return!0;state.pmHour=pmHour},H:function(state){lookAhead("H",state);const hours=getNumber(2,state);if(null===hours||parse_date_outOfRange(hours,0,23))return!0;state.hours=hours},k:function(state){lookAhead("k",state);let hours=getNumber(2,state);if(null===hours||parse_date_outOfRange(hours,1,24))return!0;state.hours=24===hours?0:hours},m:function(state){lookAhead("m",state);const minutes=getNumber(2,state);if(null===minutes||parse_date_outOfRange(minutes,0,59))return!0;state.minutes=minutes},s:function(state){lookAhead("s",state);const seconds=getNumber(2,state);if(null===seconds||parse_date_outOfRange(seconds,0,59))return!0;state.seconds=seconds},S:function(state){const count=lookAhead("S",state),match=state.value.substr(state.valueIdx,count);let milliseconds=null;if(isNaN(parseInt(match,10))||(milliseconds=parseFloat("0."+match,10),milliseconds=round_round(milliseconds,3),milliseconds*=1e3,state.valueIdx+=count),null===milliseconds||parse_date_outOfRange(milliseconds,0,999))return!0;state.milliseconds=milliseconds},z:function(state,info){const shortFormat=lookAhead("z",state)<4,invalid=parseTimeZoneOffset(state,info,{shortHours:shortFormat,optionalMinutes:shortFormat,localizedName:!0});if(invalid)return invalid},Z:function(state,info){const count=lookAhead("Z",state),invalid=parseTimeZoneOffset(state,info,{noSeparator:count<4,zLiteral:5===count,localizedName:4===count});if(invalid)return invalid},x:function(state,info){const count=lookAhead("x",state),invalid=parseTimeZoneOffset(state,info,{noSeparator:3!==count&&5!==count,optionalMinutes:1===count});if(invalid)return invalid},X:function(state,info){const count=lookAhead("X",state),invalid=parseTimeZoneOffset(state,info,{noSeparator:3!==count&&5!==count,optionalMinutes:1===count,zLiteral:!0});if(invalid)return invalid},G:function(state,info){const eras=format_names_formatNames(info,"eras",lookAhead("G",state),!1,!0);if(null===getIndexByName([eras[0],eras[1]],state,!0))return!0},e:function(state,info){return parseDayOfWeek("e",state,info)},c:function(state,info){return parseDayOfWeek("c",state,info)}}}();function addFormatSpaces(value,format){return`${leadingSpacesRegex.exec(format)[0]}${value}${trailingSpacesRegex.exec(format)[0]}`}function parseExact(value,format,info){let pattern=datePattern(format,info).split("");const state={format:pattern,idx:0,value:addFormatSpaces(value,format),valueIdx:0,year:null,month:null,day:null,hours:null,minutes:null,seconds:null,milliseconds:null},length=pattern.length;let literal=!1;for(;state.idx<length;state.idx++){let ch=pattern[state.idx];if(literal)"'"===ch&&(literal=!1),checkLiteral(state);else if(parse_date_parsers[ch]){if(parse_date_parsers[ch](state,info))return null}else if("'"===ch)literal=!0,checkLiteral(state);else if(!checkLiteral(state))return null}return state.valueIdx<value.length?null:function(state){let{year:year,month:month,day:day,hours:hours,minutes:minutes,seconds:seconds,milliseconds:milliseconds,pmHour:pmHour,UTC:UTC,hoursOffset:hoursOffset,minutesOffset:minutesOffset}=state;const hasTime=null!==hours||null!==minutes||seconds||null,date=new Date;let result;return null===year&&null===month&&null===day&&hasTime?(year=date.getFullYear(),month=date.getMonth(),day=date.getDate()):(null===year&&(year=date.getFullYear()),null===day&&(day=1)),pmHour&&hours<12&&(hours+=12),UTC?(hoursOffset&&(hours+=-hoursOffset),minutesOffset&&(minutes+=-minutesOffset*(hoursOffset<0?-1:1)),result=new Date(Date.UTC(year,month,day,hours,minutes,seconds,milliseconds))):(result=new Date(year,month,day,hours,minutes,seconds,milliseconds),function(date,hours){hours||23!==date.getHours()||date.setHours(date.getHours()+2)}(result,hours)),year<100&&result.setFullYear(year),result.getDate()!==day&&void 0===UTC?null:result}(state)||null}function parseDate(value,formats,locale="en"){if(!value)return null;if(is_date_isDate(value))return value;let parseValue=String(value).trim(),date=function(value){if(value&&0===value.indexOf("/D")){let date=parse_date_dateRegExp.exec(value);if(date){date=date[1];let tzoffset=offsetRegExp.exec(date.substring(1));return date=new Date(parseInt(date,10)),tzoffset&&(tzoffset=function(offset){const sign="-"===offset.substr(0,1)?-1:1;let result=offset.substring(1);return result=60*parseInt(result.substr(0,2),10)+parseInt(result.substring(2),10),sign*result}(tzoffset[0]),date=convertTimeZone(date,date.getTimezoneOffset(),0),date=convertTimeZone(date,0,-1*tzoffset)),date}}}(parseValue);if(date)return date;const info=info_localeInfo(locale);let parseFormats=formats||function(calendar){const formats=[],patterns=calendar.patterns,length=FORMATS_SEQUENCE.length;for(let idx=0;idx<length;idx++)formats.push(patterns[FORMATS_SEQUENCE[idx]]);return formats.concat(standardDateFormats)}(info.calendar);parseFormats=Array.isArray(parseFormats)?parseFormats:[parseFormats];const length=parseFormats.length;for(let idx=0;idx<length;idx++)if(date=parseExact(parseValue,parseFormats[idx],info),date)return date;return date}const NAME_TYPES={month:{type:"months",minLength:3,standAlone:"L"},quarter:{type:"quarters",minLength:3,standAlone:"q"},weekday:{type:"days",minLength:{E:0,c:3,e:3},standAlone:"c"},dayperiod:{type:"dayPeriods",minLength:0},era:{type:"eras",minLength:0}};function addLiteral(parts,value){const lastPart=parts[parts.length-1];lastPart&&"literal"===lastPart.type?lastPart.pattern+=value:parts.push({type:"literal",pattern:value})}function isHour12(pattern){return"h"===pattern||"K"===pattern}function splitDateFormat(format,locale="en"){const pattern=datePattern(format,info_localeInfo(locale)),parts=[];let lastIndex=dateFormatRegExp.lastIndex=0,match=dateFormatRegExp.exec(pattern);for(;match;){let value=match[0];if(lastIndex<match.index&&addLiteral(parts,pattern.substring(lastIndex,match.index)),value.startsWith('"')||value.startsWith("'"))addLiteral(parts,value);else{const specifier=value[0],type=DATE_FIELD_MAP[specifier],part={type:type,pattern:value};"hour"===type&&(part.hour12=isHour12(value));const names=NAME_TYPES[type];if(names){const minLength=is_number_isNumber(names.minLength)?names.minLength:names.minLength[specifier],patternLength=value.length;patternLength>=minLength&&(part.names={type:names.type,nameType:dateNameType(patternLength),standAlone:names.standAlone===specifier})}parts.push(part)}lastIndex=dateFormatRegExp.lastIndex,match=dateFormatRegExp.exec(pattern)}return lastIndex<pattern.length&&addLiteral(parts,pattern.substring(lastIndex)),parts}const format_formatRegExp=/\{(\d+)(:[^\}]+)?\}/g;function format_toString(value,format,locale){if(format){if(is_date_isDate(value))return format_date_formatDate(value,format,locale);if(is_number_isNumber(value))return format_number_formatNumber(value,format,locale)}return null!=value?value:""}function format_format(format,values,locale){return format.replace(format_formatRegExp,(function(match,index,placeholderFormat){return format_toString(values[parseInt(index,10)],placeholderFormat?placeholderFormat.substring(1):"",locale)}))}const DOCS_URL="http://www.telerik.com/kendo-angular-ui/components/internationalization/troubleshooting/",errorSolutions={NoCurrency:`Solution: ${DOCS_URL}#toc-no-currency`,NoCurrencyDisplay:`Solution: ${DOCS_URL}#toc-no-currency-display`,NoCurrencyRegion:`Solution: ${DOCS_URL}#toc-no-currency-region`,NoDateFieldNames:`Solution: ${DOCS_URL}#toc-no-date-filed-names`,NoFirstDay:`Solution: ${DOCS_URL}#toc-no-first-day`,NoGMTInfo:`Solution: ${DOCS_URL}#toc-no-gmt-info`,NoLocale:`Solution: ${DOCS_URL}#toc-no-locale`,NoValidCurrency:`Solution: ${DOCS_URL}#toc-no-valid-currency`,NoWeekData:`Solution: ${DOCS_URL}#toc-no-week-data`};function intlMethod(fn){return function(...values){try{return fn.apply(null,values)}catch(error){throw error.message=function(error){const message=error.message,errorSolution=errorSolutions[Object.keys(errorSolutions).filter(key=>0===message.indexOf(key))[0]];return errorSolution?`${message} ${errorSolution}`:message}(error),error}}}const dateFormatNames$1=intlMethod(dateFormatNames),dateFieldName$1=intlMethod(dateFieldName),firstDay$1=intlMethod(first_day_firstDay),format$1=intlMethod(format_format),formatDate$1=intlMethod(format_date_formatDate),formatNumber$1=intlMethod(format_number_formatNumber),numberSymbols$1=intlMethod(numberSymbols),parseDate$1=intlMethod(parseDate),parseNumber$1=intlMethod(parse_number_parseNumber),splitDateFormat$1=intlMethod(splitDateFormat),toString$1=intlMethod(format_toString),weekendRange$1=intlMethod(weekendRange),LOCALE_REGEX=/_/g;function cldrServiceFactory(localeId){return new fesm2015_CldrIntlService(localeId)}let fesm2015_IntlService=(()=>{class IntlService{constructor(){this.changes=new core_EventEmitter}notify(){this.changes.emit()}}return IntlService.fac=function(t){return new(t||IntlService)},IntlService.prov=defineInjectable({token:IntlService,factory:function(t){return t?new t:cldrServiceFactory(inject(LOCALE_ID$1))},providedIn:"root"}),IntlService.ngInjectableDef=defineInjectable({factory:function(){return cldrServiceFactory(inject(LOCALE_ID$1))},token:IntlService,providedIn:"root"}),IntlService})(),fesm2015_CldrIntlService=(()=>{class CldrIntlService extends fesm2015_IntlService{constructor(localeId){super(),this.localeId=localeId}get localeId(){return this.locale}set localeId(value){const locale=value.replace(LOCALE_REGEX,"-");locale!==this.locale&&(this.locale=locale,this.notify())}format(format$$1,...values){return format$1(format$$1,values,this.localeId)}toString(value,format$$1,localeId){return toString$1(value,format$$1,localeId||this.localeId)}formatDate(value,format$$1,localeId){return formatDate$1(value,format$$1,localeId||this.localeId)}parseDate(value,format$$1,localeId){return parseDate$1(value,format$$1,localeId||this.localeId)}parseNumber(value,format$$1,localeId){return parseNumber$1(value,localeId||this.localeId,format$$1)}formatNumber(value,format$$1,localeId){return formatNumber$1(value,format$$1,localeId||this.localeId)}dateFieldName(options,localeId){return dateFieldName$1(options,localeId||this.localeId)}dateFormatNames(options,localeId){return dateFormatNames$1(localeId||this.localeId,options)}splitDateFormat(format$$1,localeId){return splitDateFormat$1(format$$1,localeId||this.localeId)}numberSymbols(localeId){return numberSymbols$1(localeId||this.localeId)}firstDay(localeId){return firstDay$1(localeId||this.localeId)}weekendRange(localeId){return weekendRange$1(localeId||this.localeId)}}return CldrIntlService.fac=function(t){return new(t||CldrIntlService)(inject(LOCALE_ID$1))},CldrIntlService.prov=defineInjectable({token:CldrIntlService,factory:CldrIntlService.fac}),CldrIntlService})(),fesm2015_IntlModule=(()=>{class IntlModule{}return IntlModule.mod=defineNgModule({type:IntlModule}),IntlModule.inj=defineInjector({factory:function(t){return new(t||IntlModule)}}),IntlModule})();$localize`:kendo.slider.increment|The title of the **Increase** button of the Slider.0fa71630d40c425b9c366afd7f6c3cecc5bef59d8302125540024939132:increment`,$localize`:kendo.slider.decrement|The title of the **Decrease** button of the Slider.042c26f68d78afd6834ea46a5f7533850fe8c800652458644240352212:decrement`,$localize`:kendo.slider.dragHandle|The title of the drag handle of the Slider.481eb98e9cd8ef8e8b22051796441901e883763d9117416417579607469:Drag`,$localize`:kendo.switch.on|The **On** label of the Switch.155f0a38198ffbf0429c5dbf9765e74f246a8617818154782831456441:ON`,$localize`:kendo.switch.off|The **Off** label of the Switch.79df1a6d2b35c32b2948e3cee56dd3ffe28127bc759820891948194060:OFF`;const fesm2015_c23=["numericInput"],fesm2015_c24=["numericWrap"],fesm2015_c29=["increment",$localize`:kendo.numerictextbox.increment|The title for the **Increment** button in the NumericTextBox0fc68540ffa04fdc246cf6cf8a1fed085f8b19a54467784268438010275:Increase value`,"decrement",$localize`:kendo.numerictextbox.decrement|The title for the **Decrement** button in the NumericTextBoxdf4751834075bf970c77d0da2c960b4e19a6b0dd3960022057994897997:Decrease value`],_c30=function(a0,a1){return{mouseup:a0,mouseleave:a1}},_c31=function(a0){return{mousedown:a0}};function NumericTextBoxComponent_span_6_Template(rf,ctx){if(1&rf&&(elementStart(0,"span",6),elementStart(1,"span",7),element(2,"span",8),elementEnd(),elementStart(3,"span",9),element(4,"span",10),elementEnd(),elementEnd()),2&rf){const ctx_r2=nextContext();property("kendoEventsOutsideAngular",pureFunction2(11,_c30,ctx_r2.releaseArrow,ctx_r2.releaseArrow)),advance(1),classProp("k-state-active",ctx_r2.arrowDirection===ctx_r2.ArrowDirection.Up),property("kendoEventsOutsideAngular",pureFunction1(14,_c31,ctx_r2.increasePress))("title",ctx_r2.incrementTitle),attribute("aria-label",ctx_r2.incrementTitle),advance(2),classProp("k-state-active",ctx_r2.arrowDirection===ctx_r2.ArrowDirection.Down),property("kendoEventsOutsideAngular",pureFunction1(16,_c31,ctx_r2.decreasePress))("title",ctx_r2.decrementTitle),attribute("aria-label",ctx_r2.decrementTitle)}}const _c32=function(a0,a1){return{mousewheel:a0,DOMMouseScroll:a1}},_c33=function(a0,a1,a2,a3,a4,a5,a6){return{mousedown:a0,dragenter:a1,keydown:a2,input:a3,focus:a4,blur:a5,paste:a6}},limitPrecision=precision=>Math.min(precision,20),fractionLength=value=>(String(value).split(".")[1]||"").length,toFixedPrecision=(value,precision)=>{const maxPrecision=limitPrecision(precision);return parseFloat(value.toFixed(maxPrecision))};function invokeElementMethod(element,name,...args){if(element&&element.nativeElement)return element.nativeElement[name].apply(element.nativeElement,args)}let fesm2015_TextBoxDirective=(()=>{class TextBoxDirective{constructor(renderer,inputElement,ngZone){this.renderer=renderer,this.inputElement=inputElement,this.ngZone=ngZone,this.hostClass=!0,this.onFocus=new core_EventEmitter,this.onBlur=new core_EventEmitter,this.onValueChange=new core_EventEmitter,this.autoFillStart=new core_EventEmitter,this.autoFillEnd=new core_EventEmitter,this.listeners=[]}set value(text){this.inputElement&&(this.inputElement.nativeElement.value=null==text?"":text,this.onValueChange.emit())}get value(){return this.inputElement.nativeElement.value}get id(){return this.inputElement.nativeElement.id}set id(id){this.renderer.setAttribute(this.inputElement.nativeElement,"id",id)}ngAfterViewInit(){const input=this.inputElement.nativeElement;this.listeners=[this.renderer.listen(input,"focus",()=>this.onFocus.emit()),this.renderer.listen(input,"blur",()=>this.onBlur.emit())],this.ngZone.runOutsideAngular(()=>{this.renderer.listen(input,"animationstart",e=>{"autoFillStart"===e.animationName?this.autoFillStart.emit():"autoFillEnd"===e.animationName&&this.autoFillEnd.emit()})})}ngOnDestroy(){this.listeners.forEach(listener=>listener())}}return TextBoxDirective.fac=function(t){return new(t||TextBoxDirective)(directiveInject(Renderer2),directiveInject(ElementRef),directiveInject(NgZone))},TextBoxDirective.dir=defineDirective({type:TextBoxDirective,selectors:[["input","kendoTextBox",""]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-textbox",ctx.hostClass)},inputs:{value:"value"},features:[ProvidersFeature([{provide:KendoInput,useExisting:forwardRef(()=>TextBoxDirective)}])]}),TextBoxDirective})();const EXPONENT_REGEX=/[eE][\-+]?([0-9]+)/,decimalPart=value=>value>=0?Math.floor(value):Math.ceil(value),fesm2015_noop=_=>{},fesm2015_isNumber=value=>!isNaN(value)&&null!==value;function fesm2015_pad(value,digits){const count=digits-String(value).length;let result=value;if(count>0){const padString=new Array(count+1).join("0");result=parseFloat(value+padString)}return result}var ArrowDirection=function(ArrowDirection){return ArrowDirection[ArrowDirection.Down=-1]="Down",ArrowDirection[ArrowDirection.None=0]="None",ArrowDirection[ArrowDirection.Up=1]="Up",ArrowDirection}({});const PARSABLE_OPTIONS=["min","max","step","decimals"],PARSABLE_DEFAULTS={decimals:null,max:null,min:null,step:1};let fesm2015_NumericTextBoxComponent=(()=>{class NumericTextBoxComponent{constructor(intl,renderer,localizationService,injector,ngZone,changeDetector,hostElement){this.intl=intl,this.renderer=renderer,this.localizationService=localizationService,this.injector=injector,this.ngZone=ngZone,this.changeDetector=changeDetector,this.hostElement=hostElement,this.focusableId="k-"+guid(),this.disabled=!1,this.readonly=!1,this.title="",this.autoCorrect=!1,this.decimals=null,this.step=1,this.spinners=!0,this.rangeValidation=!0,this.tabindex=0,this.selectOnFocus=!0,this.value=null,this.valueChange=new core_EventEmitter,this.onFocus=new core_EventEmitter,this.onBlur=new core_EventEmitter,this.ArrowDirection=ArrowDirection,this.arrowDirection=ArrowDirection.None,this.inputValue="",this.minValidateFn=fesm2015_noop,this.maxValidateFn=fesm2015_noop,this._format="n2",this.isPasted=!1,this.mouseDown=!1,this.ngChange=fesm2015_noop,this.ngTouched=fesm2015_noop,this.ngValidatorChange=fesm2015_noop,this.increasePress=e=>{this.arrowPress(ArrowDirection.Up,e)},this.decreasePress=e=>{this.arrowPress(ArrowDirection.Down,e)},this.releaseArrow=()=>{clearTimeout(this.spinTimeout),this.arrowDirection!==ArrowDirection.None&&(this.arrowDirection=ArrowDirection.None,this.changeDetector.detectChanges())},this.handlePaste=()=>{this.isPasted=!0},this.handleInput=()=>{const input=this.numericInput.nativeElement;let{selectionStart:selectionStart,selectionEnd:selectionEnd,value:inputValue}=input;if(this.pressedKey===Keys.NumpadDecimal&&(inputValue=this.replaceNumpadDotValue()),this.isPasted&&(inputValue=this.formatInputValue(this.intl.parseNumber(inputValue))),!this.isValid(inputValue))return input.value=this.inputValue,void this.setSelection(selectionStart-1,selectionEnd-1);const parsedValue=this.intl.parseNumber(inputValue);let value=this.restrictDecimals(parsedValue);if(this.autoCorrect){const limited=this.limitInputValue(value);value=limited.value,selectionStart=limited.selectionStart,selectionEnd=limited.selectionEnd}parsedValue!==value||this.hasTrailingZeros(inputValue)||!this.focused?(this.setInputValue(value),this.setSelection(selectionStart,selectionEnd)):this.inputValue=inputValue,this.isPasted&&(input.value=this.inputValue),this.updateValue(value),this.previousSelection=null,this.isPasted=!1},this.handleDragEnter=()=>{this.focused||this.isDisabled||this.setInputValue(this.value,!0)},this.handleMouseDown=()=>{this.mouseDown=!0},this.handleFocus=()=>{if(!this.focused&&(this.focused=!0,!this.isDisabled)){const shouldSelectAll=this.selectOnFocus||!this.mouseDown;this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{shouldSelectAll?this.selectAll():this.selectCaret()},0)})}this.mouseDown=!1,hasObservers(this.onFocus)&&this.ngZone.run(()=>{this.onFocus.emit()})},this.handleBlur=()=>{var ngControl;this.changeDetector.markForCheck(),this.focused=!1,this.inputValue!==this.elementValue&&this.handleInput(),this.setInputValue(),(hasObservers(this.onBlur)||(ngControl=this.control)&&(!ngControl.touched||ngControl.control&&"blur"===ngControl.control.updateOn))&&this.ngZone.run(()=>{this.ngTouched(),this.onBlur.emit()})},this.handleKeyDown=e=>{if(this.isDisabled)return;let step;e.keyCode===Keys.ArrowDown?step=-1:e.keyCode===Keys.ArrowUp&&(step=1),step&&this.step&&(e.preventDefault(),this.addStep(step));const input=this.numericInput.nativeElement;this.previousSelection={end:input.selectionEnd,start:input.selectionStart},this.pressedKey=e.keyCode},this.handleWheel=e=>{if(this.focused&&!this.isDisabled){e.preventDefault();const delta=(e=>{let delta=0;return e.wheelDelta?(delta=e.wheelDelta/120,delta=delta>0?Math.ceil(delta):Math.floor(delta)):e.detail&&(delta=Math.round(-e.detail/3)),delta})(e);this.addStep(delta)}},this.direction=localizationService.rtl?"rtl":"ltr"}get format(){const format=this._format;return null!=format?format:"n2"}set format(value){this._format=value}set tabIndex(tabIndex){this.tabindex=tabIndex}get tabIndex(){return this.tabindex}get widgetClasses(){return!0}ngOnInit(){this.subscriptions=this.localizationService.changes.subscribe(({rtl:rtl})=>{this.direction=rtl?"rtl":"ltr"}),this.subscriptions.add(this.intl.changes.subscribe(this.intlChange.bind(this))),this.hostElement&&this.renderer.removeAttribute(this.hostElement.nativeElement,"tabindex"),this.control=this.injector.get(NgControl,null)}ngOnChanges(changes){var maxValue,minValue;anyChanged(PARSABLE_OPTIONS,changes,!1)&&this.parseOptions(PARSABLE_OPTIONS.filter(option=>changes[option])),this.verifySettings(),anyChanged(["min","max","rangeValidation"],changes,!1)&&(this.minValidateFn=this.rangeValidation?(minValue=this.min,c=>null!==c.value&&c.value<minValue?{minError:{minValue:minValue,value:c.value}}:null):fesm2015_noop,this.maxValidateFn=this.rangeValidation?(maxValue=this.max,c=>null!==c.value&&c.value>maxValue?{maxError:{maxValue:maxValue,value:c.value}}:null):fesm2015_noop,this.ngValidatorChange()),anyChanged(["autoCorrect","decimals","min"],changes)&&delete this.numericRegex,anyChanged(["value","format"],changes,!1)&&(this.verifyValue(this.value),this.value=this.restrictModelValue(this.value),this.focused&&this.intl.parseNumber(this.elementValue)===this.value||this.setInputValue())}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe(),clearTimeout(this.spinTimeout)}validate(control){return this.minValidateFn(control)||this.maxValidateFn(control)}registerOnValidatorChange(fn){this.ngValidatorChange=fn}writeValue(value){this.verifyValue(value);let restrictedValue=this.restrictModelValue(value);this.value=restrictedValue,this.setInputValue()}registerOnChange(fn){this.ngChange=fn}registerOnTouched(fn){this.ngTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled}focus(){invokeElementMethod(this.numericInput,"focus")}blur(){invokeElementMethod(this.numericInput,"blur")}notifyValueChange(){this.setInputValue()}get incrementTitle(){return this.localizationService.get("increment")}get decrementTitle(){return this.localizationService.get("decrement")}get decimalSeparator(){return this.intl.numberSymbols().decimal}get elementValue(){return this.numericInput.nativeElement.value}set elementValue(value){this.renderer.setProperty(this.numericInput.nativeElement,"value",value)}get focused(){return this.isFocused}get hasDecimals(){return null!==this.decimals&&this.decimals>=0}set focused(value){if(this.isFocused!==value&&this.numericWrap){const wrap=this.numericWrap.nativeElement,input=this.numericInput.nativeElement;value?(this.renderer.addClass(wrap,"k-state-focused"),this.isDisabled||this.renderer.removeClass(input,"k-formatted-value")):(this.renderer.removeClass(wrap,"k-state-focused"),this.renderer.addClass(input,"k-formatted-value")),this.isFocused=value}}get isDisabled(){return this.disabled||this.readonly}arrowPress(direction,e){e.preventDefault(),this.isDisabled||(support_mobileOS||(this.focused=!0,this.focus()),this.arrowDirection!==direction&&(this.arrowDirection=direction,this.changeDetector.detectChanges()),this.step?this.spin(direction,500):this.setInputValue())}updateValue(value){var value1,value2;(value1=this.value)===(value2=value)||null===value1&&void 0===value2||void 0===value1&&null===value2||this.ngZone.run(()=>{this.value=value,this.ngChange(value),this.valueChange.emit(value),this.changeDetector.markForCheck()})}replaceNumpadDotValue(){let value=this.inputValue||"";if(this.previousSelection){const input=this.numericInput.nativeElement,{selectionStart:selectionStart,selectionEnd:selectionEnd}=input,{start:start,end:end}=this.previousSelection;input.value=value=value.substring(0,start)+this.decimalSeparator+value.substring(end),this.setSelection(selectionStart,selectionEnd)}return value}isValid(value){return this.numericRegex||(this.numericRegex=(options=>{const{autoCorrect:autoCorrect,decimals:decimals,min:min}=options;let numberPattern,separator=options.separator;return"."===separator&&(separator="\\"+separator),numberPattern=0===decimals?"\\d*":`(?:(?:\\d+(${separator}\\d*)?)|(?:${separator}\\d*))?`,new RegExp(`^${autoCorrect&&null!==min&&min>=0?"":"-?"}${numberPattern}$`)})({autoCorrect:this.autoCorrect,decimals:this.decimals,min:this.min,separator:this.decimalSeparator})),this.numericRegex.test(value)}spin(step,timeout){clearTimeout(this.spinTimeout),this.spinTimeout=window.setTimeout(()=>{this.spin(step,50)},timeout),this.addStep(step)}addStep(step){let value=((value1,value2)=>{const maxPrecision=((value1,value2)=>Math.max(fractionLength(value1),fractionLength(value2)))(value1,value2);return toFixedPrecision(value1+value2,maxPrecision)})(this.value||0,this.step*step);value=this.limitValue(value),value=this.restrictDecimals(value),this.setInputValue(value),this.updateValue(value)}setSelection(start,end){this.focused&&invokeElementMethod(this.numericInput,"setSelectionRange",start,end)}limitValue(value){let result=value;return this.isInRange(value)||(fesm2015_isNumber(this.max)&&value>this.max&&(result=this.max),fesm2015_isNumber(this.min)&&value<this.min&&(result=this.min)),result}limitInputValue(value){let{selectionStart:selectionStart,selectionEnd:selectionEnd,value:enteredValue}=this.numericInput.nativeElement,limitedValue=value,selectToEnd=!1;if(!this.isInRange(value)){const lengthChange=enteredValue.length-String(this.inputValue).length,{min:min,max:max}=this,hasMax=fesm2015_isNumber(max),hasMin=fesm2015_isNumber(min);let padLimit,replaceNext,correctedValue=value;if(0===selectionStart&&this.inputValue.substr(1)===enteredValue)return{selectionEnd:selectionEnd,selectionStart:selectionStart,value:null};if(hasMax&&value>max?value>0?replaceNext=!0:padLimit=max:hasMin&&value<min&&(value>0?padLimit=min:replaceNext=!0),padLimit){const paddedValue=this.tryPadValue(value,padLimit);paddedValue&&decimalPart(value)!==decimalPart(padLimit)&&(correctedValue=paddedValue,selectToEnd=!0)}else replaceNext&&this.inputValue&&selectionStart!==enteredValue.length&&(correctedValue=parseFloat(enteredValue.substr(0,selectionStart)+enteredValue.substr(selectionStart+lengthChange)));limitedValue=this.limitValue(correctedValue),selectToEnd=(selectToEnd||limitedValue!==correctedValue)&&this.previousSelection&&this.previousSelection.end-this.previousSelection.start+lengthChange>0}return{selectionEnd:selectToEnd?String(limitedValue).length:selectionEnd,selectionStart:selectionStart,value:limitedValue}}tryPadValue(value,limit){const limitLength=String(Math.floor(limit)).length,zeroPadded=fesm2015_pad(value,limitLength),zeroPaddedNext=fesm2015_pad(value,limitLength+1);let result;return this.isInRange(zeroPadded)?result=zeroPadded:this.isInRange(zeroPaddedNext)&&(result=zeroPaddedNext),result}isInRange(value){return!fesm2015_isNumber(value)||(!fesm2015_isNumber(this.min)||this.min<=value)&&(!fesm2015_isNumber(this.max)||value<=this.max)}restrictModelValue(value){let result=this.restrictDecimals(value,!0);return this.autoCorrect&&this.limitValue(result)!==result&&(result=null),result}restrictDecimals(value,round){let result=value;if(value&&this.hasDecimals){const decimals=this.decimals,stringValue=String(value);if(round||EXPONENT_REGEX.test(stringValue))result=toFixedPrecision(value,decimals);else{const parts=stringValue.split(".");let fraction=parts[1];fraction&&fraction.length>decimals&&(fraction=fraction.substr(0,decimals),result=parseFloat(`${parts[0]}.${fraction}`))}}return result}formatInputValue(value){let stringValue=String(value);const exponentMatch=EXPONENT_REGEX.exec(stringValue);return exponentMatch&&(stringValue=value.toFixed(limitPrecision(parseInt(exponentMatch[1],10)))),stringValue.replace(".",this.decimalSeparator)}formatValue(value,focused){let formattedValue;return formattedValue=null!==value&&(value=>void 0!==value)(value)&&""!==value?focused&&!this.readonly?this.formatInputValue(value):this.intl.formatNumber(value,this.format):"",formattedValue}setInputValue(value=this.value,focused=this.focused){const formattedValue=this.formatValue(value,focused);this.elementValue=formattedValue,this.inputValue=formattedValue}verifySettings(){if(isDevMode()&&null!==this.min&&null!==this.max&&this.min>this.max)throw new Error("The max value should be bigger than the min. See http://www.telerik.com/kendo-angular-ui/components/inputs/api/NumericTextBoxComponent/#toc-min and http://www.telerik.com/kendo-angular-ui/components/inputs/api/NumericTextBoxComponent/#toc-max.")}verifyValue(value){if(isDevMode()&&value&&"number"!=typeof value)throw new Error(`The NumericTextBox component requires value of type Number and ${JSON.stringify(value)} was set.`)}parseOptions(options){for(let idx=0;idx<options.length;idx++){const name=options[idx],value=this[name];if("string"==typeof value){const parsed=parseFloat(value),valid=!isNaN(parsed);if(isDevMode()&&!valid&&""!==value)throw new Error(`The NumericTextBox component requires value of type Number or a String representing a number for the ${name} property and ${JSON.stringify(value)} was set.`);this[name]=valid?parsed:PARSABLE_DEFAULTS[name]}}}intlChange(){delete this.numericRegex,!this.numericInput||this.focused&&this.isValid(this.elementValue)||this.setInputValue()}hasTrailingZeros(inputValue){if(this.hasDecimals&&this.focused){const fraction=inputValue.split(this.decimalSeparator)[1];return fraction&&fraction.length>this.decimals&&fraction.lastIndexOf("0")===fraction.length-1}}selectAll(){this.setInputValue(),this.setSelection(0,this.inputValue.length)}selectCaret(){const formattedValue=this.elementValue,partialValue=formattedValue.substring(0,this.numericInput.nativeElement.selectionStart);if(this.setInputValue(),partialValue.length){const significantCharsInFormattedValue=((formattedString,separator)=>{const significantCharacters=this.decimalSeparator+"0123456789-";return formattedString.split("").reduce((acc,curr)=>significantCharacters.includes(curr)?++acc:acc,0)})(partialValue),adjustedSignificantChars=this.adjustSignificantChars(formattedValue,significantCharsInFormattedValue);this.setSelection(adjustedSignificantChars,adjustedSignificantChars)}else this.setSelection(0,0)}numberOfLeadingZeroes(formattedValue){const separatorIndex=formattedValue.indexOf(this.decimalSeparator),matchedLeadingZeroes=formattedValue.match(/^[^1-9]*?(0+)/);if(matchedLeadingZeroes){const lengthOfLeadingZeroesMatch=matchedLeadingZeroes[1].length;return matchedLeadingZeroes[0].length===separatorIndex?lengthOfLeadingZeroesMatch-1:lengthOfLeadingZeroesMatch}return 0}adjustSignificantChars(formattedValue,significantChars){const leadingZeroes=this.numberOfLeadingZeroes(formattedValue);return leadingZeroes>0?Math.max(0,significantChars-leadingZeroes):significantChars}}return NumericTextBoxComponent.fac=function(t){return new(t||NumericTextBoxComponent)(directiveInject(fesm2015_IntlService),directiveInject(Renderer2),directiveInject(fesm2015_LocalizationService),directiveInject(Injector),directiveInject(NgZone),directiveInject(ChangeDetectorRef),directiveInject(ElementRef))},NumericTextBoxComponent.cmp=defineComponent({type:NumericTextBoxComponent,selectors:[["kendo-numerictextbox"]],viewQuery:function(rf,ctx){var _t;1&rf&&(staticViewQuery(fesm2015_c23,!0),viewQuery(fesm2015_c24,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.numericInput=_t.first),queryRefresh(_t=loadQuery())&&(ctx.numericWrap=_t.first))},hostVars:5,hostBindings:function(rf,ctx){2&rf&&(attribute("dir",ctx.direction),classProp("k-widget",ctx.widgetClasses)("k-numerictextbox",ctx.widgetClasses))},inputs:{focusableId:"focusableId",disabled:"disabled",readonly:"readonly",title:"title",autoCorrect:"autoCorrect",decimals:"decimals",step:"step",spinners:"spinners",rangeValidation:"rangeValidation",tabindex:"tabindex",selectOnFocus:"selectOnFocus",value:"value",format:"format",tabIndex:"tabIndex",max:"max",min:"min",placeholder:"placeholder"},outputs:{valueChange:"valueChange",onFocus:"focus",onBlur:"blur"},exportAs:["kendoNumericTextBox"],features:[ProvidersFeature([fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.numerictextbox"},{provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>NumericTextBoxComponent),multi:!0},{provide:NG_VALIDATORS,useExisting:forwardRef(()=>NumericTextBoxComponent),multi:!0},{provide:KendoInput,useExisting:forwardRef(()=>NumericTextBoxComponent)}]),NgOnChangesFeature],decls:7,vars:25,consts:[["kendoNumericTextBoxLocalizedMessages","",6,"increment","decrement"],[1,"k-numeric-wrap",3,"kendoEventsOutsideAngular"],["numericWrap",""],["role","spinbutton","autocomplete","off","autocorrect","off",1,"k-input","k-formatted-value",3,"id","tabindex","disabled","readonly","kendoEventsOutsideAngular"],["numericInput",""],["class","k-select",3,"kendoEventsOutsideAngular",4,"ngIf"],[1,"k-select",3,"kendoEventsOutsideAngular"],[1,"k-link","k-link-increase",3,"kendoEventsOutsideAngular","title"],[1,"k-icon","k-i-arrow-n"],[1,"k-link","k-link-decrease",3,"kendoEventsOutsideAngular","title"],[1,"k-icon","k-i-arrow-s"]],template:function(rf,ctx){1&rf&&(elementContainerStart(0,0),i18nAttributes(1,fesm2015_c29),elementContainerEnd(),elementStart(2,"span",1,2),element(4,"input",3,4),template(6,NumericTextBoxComponent_span_6_Template,5,18,"span",5),elementEnd()),2&rf&&(advance(2),classProp("k-state-disabled",ctx.disabled),property("kendoEventsOutsideAngular",pureFunction2(14,_c32,ctx.handleWheel,ctx.handleWheel)),advance(2),property("id",ctx.focusableId)("tabindex",ctx.tabIndex)("disabled",ctx.disabled)("readonly",ctx.readonly)("kendoEventsOutsideAngular",pureFunction7(17,_c33,ctx.handleMouseDown,ctx.handleDragEnter,ctx.handleKeyDown,ctx.handleInput,ctx.handleFocus,ctx.handleBlur,ctx.handlePaste)),attribute("aria-valuemin",ctx.min)("aria-valuemax",ctx.max)("aria-valuenow",ctx.value)("title",ctx.title)("placeholder",ctx.placeholder),advance(2),property("ngIf",ctx.spinners))},directives:function(){return[fesm2015_LocalizedNumericTextBoxMessagesDirective,fesm2015_EventsOutsideAngularDirective,common_NgIf]},encapsulation:2}),NumericTextBoxComponent})(),fesm2015_NumericTextBoxMessages=(()=>{class NumericTextBoxMessages extends fesm2015_ComponentMessages{}return NumericTextBoxMessages.fac=function(t){return NumericTextBoxMessages_BaseFactory(t||NumericTextBoxMessages)},NumericTextBoxMessages.dir=defineDirective({type:NumericTextBoxMessages,inputs:{decrement:"decrement",increment:"increment"},features:[InheritDefinitionFeature]}),NumericTextBoxMessages})();const NumericTextBoxMessages_BaseFactory=getInheritedFactory(fesm2015_NumericTextBoxMessages);let fesm2015_SliderModule=(()=>{class SliderModule{}return SliderModule.mod=defineNgModule({type:SliderModule}),SliderModule.inj=defineInjector({factory:function(t){return new(t||SliderModule)},imports:[[common_CommonModule,fesm2015_DraggableModule,fesm2015_EventsModule,fesm2015_ResizeSensorModule]]}),SliderModule})(),fesm2015_SwitchModule=(()=>{class SwitchModule{}return SwitchModule.mod=defineNgModule({type:SwitchModule}),SwitchModule.inj=defineInjector({factory:function(t){return new(t||SwitchModule)},imports:[[common_CommonModule,fesm2015_EventsModule,fesm2015_ResizeSensorModule]]}),SwitchModule})(),fesm2015_LocalizedNumericTextBoxMessagesDirective=(()=>{class LocalizedNumericTextBoxMessagesDirective extends fesm2015_NumericTextBoxMessages{constructor(service){super(),this.service=service}}return LocalizedNumericTextBoxMessagesDirective.fac=function(t){return new(t||LocalizedNumericTextBoxMessagesDirective)(directiveInject(fesm2015_LocalizationService))},LocalizedNumericTextBoxMessagesDirective.dir=defineDirective({type:LocalizedNumericTextBoxMessagesDirective,selectors:[["","kendoNumericTextBoxLocalizedMessages",""]],features:[ProvidersFeature([{provide:fesm2015_NumericTextBoxMessages,useExisting:forwardRef(()=>LocalizedNumericTextBoxMessagesDirective)}]),InheritDefinitionFeature]}),LocalizedNumericTextBoxMessagesDirective})(),fesm2015_NumericTextBoxModule=(()=>{class NumericTextBoxModule{}return NumericTextBoxModule.mod=defineNgModule({type:NumericTextBoxModule}),NumericTextBoxModule.inj=defineInjector({factory:function(t){return new(t||NumericTextBoxModule)},imports:[[common_CommonModule,fesm2015_EventsModule]]}),NumericTextBoxModule})(),fesm2015_MaskedTextBoxModule=(()=>{class MaskedTextBoxModule{}return MaskedTextBoxModule.mod=defineNgModule({type:MaskedTextBoxModule}),MaskedTextBoxModule.inj=defineInjector({factory:function(t){return new(t||MaskedTextBoxModule)},imports:[[common_CommonModule,fesm2015_EventsModule]]}),MaskedTextBoxModule})(),fesm2015_TextBoxModule=(()=>{class TextBoxModule{}return TextBoxModule.mod=defineNgModule({type:TextBoxModule}),TextBoxModule.inj=defineInjector({factory:function(t){return new(t||TextBoxModule)},imports:[[common_CommonModule]]}),TextBoxModule})(),fesm2015_ColorPickerModule=(()=>{class ColorPickerModule{}return ColorPickerModule.mod=defineNgModule({type:ColorPickerModule}),ColorPickerModule.inj=defineInjector({factory:function(t){return new(t||ColorPickerModule)},imports:[[fesm2015_SliderModule,fesm2015_NumericTextBoxModule,common_CommonModule,fesm2015_PopupModule,fesm2015_DraggableModule]]}),ColorPickerModule})(),fesm2015_CheckBoxDirective=(()=>{class CheckBoxDirective{constructor(){this.kendoClass=!0}}return CheckBoxDirective.fac=function(t){return new(t||CheckBoxDirective)},CheckBoxDirective.dir=defineDirective({type:CheckBoxDirective,selectors:[["input","kendoCheckBox",""]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-checkbox",ctx.kendoClass)}}),CheckBoxDirective})(),fesm2015_CheckBoxModule=(()=>{class CheckBoxModule{}return CheckBoxModule.mod=defineNgModule({type:CheckBoxModule}),CheckBoxModule.inj=defineInjector({factory:function(t){return new(t||CheckBoxModule)},imports:[[common_CommonModule]]}),CheckBoxModule})(),fesm2015_RadioButtonModule=(()=>{class RadioButtonModule{}return RadioButtonModule.mod=defineNgModule({type:RadioButtonModule}),RadioButtonModule.inj=defineInjector({factory:function(t){return new(t||RadioButtonModule)},imports:[[common_CommonModule]]}),RadioButtonModule})(),fesm2015_FormFieldModule=(()=>{class FormFieldModule{}return FormFieldModule.mod=defineNgModule({type:FormFieldModule}),FormFieldModule.inj=defineInjector({factory:function(t){return new(t||FormFieldModule)},imports:[[common_CommonModule]]}),FormFieldModule})(),fesm2015_InputsModule=(()=>{class InputsModule{}return InputsModule.mod=defineNgModule({type:InputsModule}),InputsModule.inj=defineInjector({factory:function(t){return new(t||InputsModule)},imports:[[common_CommonModule],fesm2015_TextBoxModule,fesm2015_SliderModule,fesm2015_SwitchModule,fesm2015_NumericTextBoxModule,fesm2015_MaskedTextBoxModule,fesm2015_ColorPickerModule,fesm2015_CheckBoxModule,fesm2015_RadioButtonModule,fesm2015_FormFieldModule]}),InputsModule})();const cloneDate=date=>date?new Date(date.getTime()):null,adjust_dst_adjustDST=(date,hour)=>{const newDate=cloneDate(date);return 0===hour&&23===newDate.getHours()&&newDate.setHours(newDate.getHours()+2),newDate},addDays=(date,offset)=>{const newDate=cloneDate(date);return newDate.setDate(newDate.getDate()+offset),adjust_dst_adjustDST(newDate,date.getHours())},create_date_createDate=(year,month,day,hours=0,minutes=0,seconds=0,milliseconds=0)=>{const date=new Date(year,month,day,hours,minutes,seconds,milliseconds);return year>-1&&year<100&&date.setFullYear(date.getFullYear()-1900),adjust_dst_adjustDST(date,hours)},getDate=date=>create_date_createDate(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0),isEqual=(candidate,expected)=>!candidate&&!expected||candidate&&expected&&candidate.getTime()===expected.getTime(),lastDayOfMonth=date=>{const newDate=create_date_createDate(date.getFullYear(),date.getMonth()+1,1,date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());return addDays(newDate,-1)},addMonths=(date,offset)=>{const newDate=cloneDate(date),expectedMonth=(12+(newDate.getMonth()+offset)%12)%12;return newDate.setMonth(newDate.getMonth()+offset),((date,expectedMonth)=>date.getMonth()!==expectedMonth?lastDayOfMonth(addMonths(date,-1)):date)(adjust_dst_adjustDST(newDate,date.getHours()),expectedMonth)},setYear=(value,year)=>{const month=value.getMonth(),candidate=create_date_createDate(year,month,value.getDate(),value.getHours(),value.getMinutes(),value.getSeconds(),value.getMilliseconds());return candidate.getMonth()===month?candidate:lastDayOfMonth(addMonths(candidate,-1))},addYears=(value,offset)=>adjust_dst_adjustDST(setYear(value,value.getFullYear()+offset),value.getHours()),addDecades=(value,offset)=>addYears(value,10*offset),addCenturies=(value,offset)=>addYears(value,100*offset),normalizeYear=(value,year)=>setYear(value,year(value.getFullYear())),firstDecadeOfCentury=value=>normalizeYear(value,y=>y-y%100),lastDecadeOfCentury=value=>normalizeYear(value,y=>y-y%100+90),firstYearOfDecade=value=>normalizeYear(value,y=>y-y%10),durationInCenturies=(start,end)=>(firstDecadeOfCentury(end).getFullYear()-firstDecadeOfCentury(start).getFullYear())/100,lastYearOfDecade=value=>normalizeYear(value,y=>y-y%10+9),durationInDecades=(start,end)=>(firstYearOfDecade(end).getFullYear()-firstYearOfDecade(start).getFullYear())/10,addWeeks=(date,offset)=>addDays(date,7*offset),firstDayOfMonth=date=>create_date_createDate(date.getFullYear(),date.getMonth(),1,date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());var Direction=function(Direction){return Direction[Direction.Forward=1]="Forward",Direction[Direction.Backward=-1]="Backward",Direction}({});const day_of_week_dayOfWeek=(date,weekDay,direction=Direction.Forward)=>{const newDate=cloneDate(date),newDay=(weekDay-newDate.getDay()+7*direction)%7;return newDate.setDate(newDate.getDate()+newDay),adjust_dst_adjustDST(newDate,date.getHours())},durationInMonths=(start,end)=>12*(end.getFullYear()-start.getFullYear())+(end.getMonth()-start.getMonth()),setMonth=(value,month)=>{const day=value.getDate(),candidate=create_date_createDate(value.getFullYear(),month,day,value.getHours(),value.getMinutes(),value.getSeconds(),value.getMilliseconds());return candidate.getDate()===day?candidate:lastDayOfMonth(addMonths(candidate,-1))},firstMonthOfYear=value=>setMonth(value,0),lastMonthOfYear=value=>setMonth(value,11),durationInYears=(start,end)=>end.getFullYear()-start.getFullYear();var Day=function(Day){return Day[Day.Sunday=0]="Sunday",Day[Day.Monday=1]="Monday",Day[Day.Tuesday=2]="Tuesday",Day[Day.Wednesday=3]="Wednesday",Day[Day.Thursday=4]="Thursday",Day[Day.Friday=5]="Friday",Day[Day.Saturday=6]="Saturday",Day}({});const calcWeekInYear=(date,weekStartDay)=>{const firstWeekInYear=create_date_createDate(date.getFullYear(),0,1,-6),diffInMS=((date,weekStartDay)=>weekStartDay!==Day.Monday?addDays(((date,weekDay)=>day_of_week_dayOfWeek(date,weekDay,Direction.Backward))(date,weekStartDay),4):addDays(date,4-(date.getDay()||7)))(date,weekStartDay).getTime()-firstWeekInYear.getTime(),days=Math.floor(diffInMS/864e5);return 1+Math.floor(days/7)},weekInYear=(date,weekStartDay=Day.Monday)=>{const prevWeekDate=addDays(date,-7),nextWeekDate=addDays(date,7),weekNumber=calcWeekInYear(date,weekStartDay);return 0===weekNumber?calcWeekInYear(prevWeekDate,weekStartDay)+1:53===weekNumber&&calcWeekInYear(nextWeekDate,weekStartDay)>1?1:weekNumber};class QueueAction_QueueAction extends AsyncAction_AsyncAction{constructor(scheduler,work){super(scheduler,work),this.scheduler=scheduler,this.work=work}schedule(state,delay=0){return delay>0?super.schedule(state,delay):(this.delay=delay,this.state=state,this.scheduler.flush(this),this)}execute(state,delay){return delay>0||this.closed?super.execute(state,delay):this._execute(state,delay)}requestAsyncId(scheduler,id,delay=0){return null!==delay&&delay>0||null===delay&&this.delay>0?super.requestAsyncId(scheduler,id,delay):scheduler.flush(this)}}class QueueScheduler_QueueScheduler extends AsyncScheduler_AsyncScheduler{}const queue=new QueueScheduler_QueueScheduler(QueueAction_QueueAction);class observeOn_ObserveOnSubscriber extends Subscriber_Subscriber{constructor(destination,scheduler,delay=0){super(destination),this.scheduler=scheduler,this.delay=delay}static dispatch(arg){const{notification:notification,destination:destination}=arg;notification.observe(destination),this.unsubscribe()}scheduleMessage(notification){this.destination.add(this.scheduler.schedule(observeOn_ObserveOnSubscriber.dispatch,this.delay,new ObserveOnMessage(notification,this.destination)))}_next(value){this.scheduleMessage(Notification_Notification.createNext(value))}_error(err){this.scheduleMessage(Notification_Notification.createError(err)),this.unsubscribe()}_complete(){this.scheduleMessage(Notification_Notification.createComplete()),this.unsubscribe()}}class ObserveOnMessage{constructor(notification,destination){this.notification=notification,this.destination=destination}}class ReplaySubject_ReplaySubject extends Subject_Subject{constructor(bufferSize=Number.POSITIVE_INFINITY,windowTime=Number.POSITIVE_INFINITY,scheduler){super(),this.scheduler=scheduler,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=bufferSize<1?1:bufferSize,this._windowTime=windowTime<1?1:windowTime,windowTime===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(value){const _events=this._events;_events.push(value),_events.length>this._bufferSize&&_events.shift(),super.next(value)}nextTimeWindow(value){this._events.push(new ReplayEvent(this._getNow(),value)),this._trimBufferThenGetEvents(),super.next(value)}_subscribe(subscriber){const _infiniteTimeWindow=this._infiniteTimeWindow,_events=_infiniteTimeWindow?this._events:this._trimBufferThenGetEvents(),scheduler=this.scheduler,len=_events.length;let subscription;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?subscription=Subscription_Subscription.EMPTY:(this.observers.push(subscriber),subscription=new SubjectSubscription_SubjectSubscription(this,subscriber)),scheduler&&subscriber.add(subscriber=new observeOn_ObserveOnSubscriber(subscriber,scheduler)),_infiniteTimeWindow)for(let i=0;i<len&&!subscriber.closed;i++)subscriber.next(_events[i]);else for(let i=0;i<len&&!subscriber.closed;i++)subscriber.next(_events[i].value);return this.hasError?subscriber.error(this.thrownError):this.isStopped&&subscriber.complete(),subscription}_getNow(){return(this.scheduler||queue).now()}_trimBufferThenGetEvents(){const now=this._getNow(),_bufferSize=this._bufferSize,_windowTime=this._windowTime,_events=this._events,eventsCount=_events.length;let spliceCount=0;for(;spliceCount<eventsCount&&!(now-_events[spliceCount].time<_windowTime);)spliceCount++;return eventsCount>_bufferSize&&(spliceCount=Math.max(spliceCount,eventsCount-_bufferSize)),spliceCount>0&&_events.splice(0,spliceCount),_events}}class ReplayEvent{constructor(time,value){this.time=time,this.value=value}}class AnimationFrameAction_AnimationFrameAction extends AsyncAction_AsyncAction{constructor(scheduler,work){super(scheduler,work),this.scheduler=scheduler,this.work=work}requestAsyncId(scheduler,id,delay=0){return null!==delay&&delay>0?super.requestAsyncId(scheduler,id,delay):(scheduler.actions.push(this),scheduler.scheduled||(scheduler.scheduled=requestAnimationFrame(()=>scheduler.flush(null))))}recycleAsyncId(scheduler,id,delay=0){if(null!==delay&&delay>0||null===delay&&this.delay>0)return super.recycleAsyncId(scheduler,id,delay);0===scheduler.actions.length&&(cancelAnimationFrame(id),scheduler.scheduled=void 0)}}class AnimationFrameScheduler_AnimationFrameScheduler extends AsyncScheduler_AsyncScheduler{flush(action){this.active=!0,this.scheduled=void 0;const{actions:actions}=this;let error,index=-1,count=actions.length;action=action||actions.shift();do{if(error=action.execute(action.state,action.delay))break}while(++index<count&&(action=actions.shift()));if(this.active=!1,error){for(;++index<count&&(action=actions.shift());)action.unsubscribe();throw error}}}const animationFrame_animationFrame=new AnimationFrameScheduler_AnimationFrameScheduler(AnimationFrameAction_AnimationFrameAction);class TakeWhileOperator{constructor(predicate,inclusive){this.predicate=predicate,this.inclusive=inclusive}call(subscriber,source){return source.subscribe(new takeWhile_TakeWhileSubscriber(subscriber,this.predicate,this.inclusive))}}class takeWhile_TakeWhileSubscriber extends Subscriber_Subscriber{constructor(destination,predicate,inclusive){super(destination),this.predicate=predicate,this.inclusive=inclusive,this.index=0}_next(value){const destination=this.destination;let result;try{result=this.predicate(value,this.index++)}catch(err){return void destination.error(err)}this.nextOrComplete(value,result)}nextOrComplete(value,predicateResult){const destination=this.destination;Boolean(predicateResult)?destination.next(value):(this.inclusive&&destination.next(value),destination.complete())}}const kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c0=["*"],kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c1=["list"];function NavigationComponent_li_4_ng_template_2_Template(rf,ctx){if(1&rf&&text(0),2&rf){const date_r2=nextContext().$implicit;textInterpolate(nextContext().service.navigationTitle(date_r2))}}function NavigationComponent_li_4_ng_template_3_Template(rf,ctx){}const kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c2=function(a0,a1,a2){return{$implicit:a0,activeView:a1,date:a2}};function NavigationComponent_li_4_Template(rf,ctx){if(1&rf&&(elementStart(0,"li"),elementStart(1,"span"),template(2,NavigationComponent_li_4_ng_template_2_Template,1,1,"ng-template",5),template(3,NavigationComponent_li_4_ng_template_3_Template,0,0,"ng-template",6),elementEnd(),elementEnd()),2&rf){const date_r2=ctx.$implicit,index_r3=ctx.index,ctx_r1=nextContext();attribute("data-date-index",index_r3),advance(1),classProp("k-calendar-navigation-marker",ctx_r1.service.isRangeStart(date_r2)),advance(1),property("ngIf",!ctx_r1.templateRef),advance(1),property("ngIf",ctx_r1.templateRef)("ngTemplateOutlet",ctx_r1.templateRef)("ngTemplateOutletContext",pureFunction3(7,kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c2,ctx_r1.service.navigationTitle(date_r2),ctx_r1.activeViewValue,date_r2))}}const kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c3=function(a0){return{click:a0}};function ViewListComponent_table_1_th_3_Template(rf,ctx){if(1&rf&&(elementStart(0,"th"),text(1),elementEnd()),2&rf){const name_r5=ctx.$implicit;styleProp("width",nextContext(2).colWidth,"%"),advance(1),textInterpolate(name_r5)}}function ViewListComponent_table_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"table",6),elementStart(1,"thead"),elementStart(2,"tr"),template(3,ViewListComponent_table_1_th_3_Template,2,3,"th",7),elementEnd(),elementEnd(),elementEnd()),2&rf){const ctx_r0=nextContext();advance(3),property("ngForOf",ctx_r0.weekNames)}}function ViewListComponent_col_6_Template(rf,ctx){1&rf&&element(0,"col")}function ViewListComponent_tbody_7_Template(rf,ctx){if(1&rf){const _r9=getCurrentView();elementStart(0,"tbody",8),listener("change",(function($event){return restoreView(_r9),nextContext().handleDateChange($event)})),elementEnd()}if(2&rf){const date_r7=ctx.$implicit,ctx_r3=nextContext();property("activeView",ctx_r3.activeView)("isActive",ctx_r3.isActive)("min",ctx_r3.min)("max",ctx_r3.max)("cellUID",ctx_r3.cellUID)("focusedDate",ctx_r3.focusedDate)("selectedDate",ctx_r3.value)("weekNumber",ctx_r3.weekNumber)("templateRef",ctx_r3.cellTemplateRef)("weekNumberTemplateRef",ctx_r3.weekNumberTemplateRef)("viewDate",date_r7)}}const kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c6=["today",$localize`:kendo.calendar.today|The label for the today button in the calendar header2df64767cd895a8fabe3e18b94b5b6b6f9e2e3f0826701167553276328:TODAY`];function CalendarComponent_kendo_calendar_navigation_2_Template(rf,ctx){if(1&rf){const _r2=getCurrentView();elementStart(0,"kendo-calendar-navigation",3),listener("valueChange",(function($event){return restoreView(_r2),nextContext().handleNavigation($event)}))("pageChange",(function(){return restoreView(_r2),nextContext().onPageChange()})),elementEnd()}if(2&rf){const ctx_r0=nextContext();property("activeView",ctx_r0.activeViewEnum)("focusedDate",ctx_r0.focusedDate)("min",ctx_r0.min)("max",ctx_r0.max)("templateRef",null==ctx_r0.navigationItemTemplate?null:ctx_r0.navigationItemTemplate.templateRef)}}const _ivy_ngcc_dist_fesm2015_c7=["dateInput"],_ivy_ngcc_dist_fesm2015_c8=["wrap"],dist_fesm2015_c13=["increment",$localize`:kendo.dateinput.increment|The label for the **Increment** button in the DateInputa55944f9de69e7cc86b91200fe96f980a947d704589112377451589685:Increase value`,"decrement",$localize`:kendo.dateinput.decrement|The label for the **Decrement** button in the DateInput0eded761107e6dad120997006a7f915bade9b15c6980524091606682769:Decrease value`];function DateInputComponent_span_6_Template(rf,ctx){if(1&rf){const _r4=getCurrentView();elementStart(0,"span",6),listener("mousedown",(function($event){return restoreView(_r4),$event.preventDefault()})),elementStart(1,"span",7),listener("mousedown",(function(){restoreView(_r4);const ctx_r5=nextContext();return ctx_r5.arrowDirection=ctx_r5.arrow.Up}))("mouseleave",(function(){restoreView(_r4);const ctx_r6=nextContext();return ctx_r6.arrowDirection=ctx_r6.arrow.None}))("click",(function(){return restoreView(_r4),nextContext().handleButtonClick(1)})),element(2,"span",8),elementEnd(),elementStart(3,"span",9),listener("click",(function(){return restoreView(_r4),nextContext().handleButtonClick(-1)}))("mousedown",(function(){restoreView(_r4);const ctx_r9=nextContext();return ctx_r9.arrowDirection=ctx_r9.arrow.Down}))("mouseleave",(function(){restoreView(_r4);const ctx_r10=nextContext();return ctx_r10.arrowDirection=ctx_r10.arrow.None})),element(4,"span",10),elementEnd(),elementEnd()}if(2&rf){const ctx_r2=nextContext();advance(1),classProp("k-state-active",ctx_r2.arrowDirection===ctx_r2.arrow.Up),property("title",ctx_r2.localization.get("increment")),attribute("aria-label",ctx_r2.localization.get("increment")),advance(2),classProp("k-state-active",ctx_r2.arrowDirection===ctx_r2.arrow.Down),property("title",ctx_r2.localization.get("decrement")),attribute("aria-label",ctx_r2.localization.get("decrement"))}}const dist_fesm2015_c14=function(a0,a1,a2,a3,a4,a5,a6){return{click:a0,focus:a1,mousedown:a2,touchstart:a3,dragstart:a4,drop:a5,blur:a6}},dist_fesm2015_c15=["container"],dist_fesm2015_c16=["popupTemplate"],dist_fesm2015_c17=["wrapper"],dist_fesm2015_c22=["today",$localize`:kendo.datepicker.today|The label for the today button in the calendar header91a84f2d4871dbe7e90d84865d4a4d83c8ae041e1910980355989755624:TODAY`,"toggle",$localize`:kendo.datepicker.toggle|The label for the toggle button in the datepicker componentf6c28c2d80dbe993c4b33f4dc4010364f41cc2ae4817467473728423164:Toggle calendar`];function DatePickerComponent_ng_template_10_ng_template_3_Template(rf,ctx){}const dist_fesm2015_c23=function(a0){return{keydown:a0}};function DatePickerComponent_ng_template_10_Template(rf,ctx){if(1&rf){const _r8=getCurrentView();elementStart(0,"kendo-calendar",9,10),listener("valueChange",(function($event){restoreView(_r8);const ctx_r7=nextContext();return ctx_r7.handleChange(ctx_r7.mergeTime($event))})),element(2,"kendo-calendar-messages",11),elementEnd(),template(3,DatePickerComponent_ng_template_10_ng_template_3_Template,0,0,"ng-template")}if(2&rf){const ctx_r4=nextContext();property("min",ctx_r4.min)("max",ctx_r4.max)("navigation",ctx_r4.navigation)("activeView",ctx_r4.activeView)("bottomView",ctx_r4.bottomView)("topView",ctx_r4.topView)("weekNumber",ctx_r4.weekNumber)("cellTemplate",ctx_r4.cellTemplate)("monthCellTemplate",ctx_r4.monthCellTemplate)("yearCellTemplate",ctx_r4.yearCellTemplate)("decadeCellTemplate",ctx_r4.decadeCellTemplate)("centuryCellTemplate",ctx_r4.centuryCellTemplate)("weekNumberTemplate",ctx_r4.weekNumberTemplate)("headerTitleTemplate",ctx_r4.headerTitleTemplate)("navigationItemTemplate",ctx_r4.navigationItemTemplate)("focusedDate",ctx_r4.focusedDate)("value",ctx_r4.value)("kendoEventsOutsideAngular",pureFunction1(21,dist_fesm2015_c23,ctx_r4.handleKeydown))("scope",ctx_r4)("disabledDates",ctx_r4.disabledDates),advance(2),property("today",ctx_r4.localization.get("today"))}}const dist_fesm2015_c24=function(a0,a1){return{click:a0,mousedown:a1}};function HeaderComponent_ng_template_1_Template(rf,ctx){1&rf&&text(0),2&rf&&textInterpolate(nextContext().title)}function HeaderComponent_ng_template_2_Template(rf,ctx){}$localize`:kendo.timepicker.accept|The Accept button text in the timepicker component4c3bf42192220c7611c09ece1c5de14855139dd07519663530416240229:Set`,$localize`:kendo.timepicker.acceptLabel|The label for the Accept button in the timepicker component93c2a9c3aa49f56e452c0aecbaabe3bb33fa42224355879331538595758:Set time`,$localize`:kendo.timepicker.cancel|The Cancel button text in the timepicker component132eefca16bd41d489b4647724b91e93793603aa1086687567255473060:Cancel`,$localize`:kendo.timepicker.cancelLabel|The label for the Cancel button in the timepicker component2cf6f4ca4470810944b4016c9b6f87943d3390ab83621966901491941:Cancel changes`,$localize`:kendo.timepicker.now|The Now button text in the timepicker componentbbc99bb74ae75a503bd813aad0c7253d3553e9235912507758515138116:Now`,$localize`:kendo.timepicker.nowLabel|The label for the Now button in the timepicker componentdf1a696f318275aa934e27850920889d494c2740371982627910576599:Select now`,$localize`:kendo.timepicker.toggle|The label for the toggle button in the timepicker componentf2c196786ed2d3ecb2369750c36aac9a4053fb306938407659294495526:Toggle time list`,$localize`:kendo.datetimepicker.dateTab|The Date tab text in the datetimepicker popup header5bb17f81ae8dbc109499ce3792afffa6b7cef8553360129034450596425:Date`,$localize`:kendo.datetimepicker.dateTabLabel|The label for the Date tab in the datetimepicker popup header2a400c9e364a4c6d83ac39b5513c962805db54b21810540079817643910:Date tab`,$localize`:kendo.datetimepicker.timeTab|The Time tab text in the datetimepicker popup headere9b2b760a6916040e7520a9a2926d65de175944d3807284594201983607:Time`,$localize`:kendo.datetimepicker.timeTabLabel|The label for the Time tab in the datetimepicker popup header13bf7e3a1036140119732c6d5952f7a20c22999e2577682127494513393:Time tab`,$localize`:kendo.datetimepicker.toggle|The label for the toggle button in the datetimepicker component60296a83f0d3e3d07aaba87c4f8e91b0aca3c22a3159207801887264026:Toggle popup`,$localize`:kendo.datetimepicker.accept|The Accept button text in the datetimepicker component4359b59db7ded88e106ada877e744c71b188f8f93915774704336012538:Set`,$localize`:kendo.datetimepicker.acceptLabel|The label for the Accept button in the datetimepicker componentcbea4571cca81ad9767a6b29f0287d1f3f6372dc4770689705864890748:Set`,$localize`:kendo.datetimepicker.cancel|The Cancel button text in the datetimepicker component17ab795d6f7527dd962a309759ca58cb4edd7e525100781969600382158:Cancel`,$localize`:kendo.datetimepicker.cancelLabel|The label for the Cancel button in the datetimepicker componentba26795ab9f4c21d66b17549ba854a96fcdac1f93535986227615756275:Cancel`,$localize`:kendo.datetimepicker.now|The Now button text in the timepicker component7172e7e9a1741f6b63439ec89e498c995cb23b0d5497093725885127701:NOW`,$localize`:kendo.datetimepicker.nowLabel|The label for the Now button in the timepicker component52d90641b26b1ce4c011cadf0437ce36c1dac1d55046379108717037514:Select now`,$localize`:kendo.datetimepicker.today|The label for the today button in the calendar header7ee30b9ae5918cc544fbd87a4135694397aeefaf7904626229769721311:TODAY`,$localize`:kendo.multiviewcalendar.today|The label for the today button in the calendar header063d99483243b27bc8282abfb5f2c76877e1112e3892034896682737327:TODAY`,$localize`:kendo.multiviewcalendar.prevButtonTitle|The label for the previous button in the Multiview calendare783e2af4828224b846fa92148ea1cc52b21bb139101635325676663492:Navigate to previous view`,$localize`:kendo.multiviewcalendar.nextButtonTitle|The label for the next button in the Multiview calendar3e3a529a242f39d22f841c3bd8045ec75b696b7a3994336778698343633:Navigate to next view`;const _c80=["kendoCalendarView",""];function ViewComponent_ng_template_0_Template(rf,ctx){1&rf&&(elementStart(0,"td",3),text(1,""),elementEnd())}function ViewComponent_tr_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"tr",4),elementStart(1,"th",5),text(2),elementEnd(),elementEnd()),2&rf){const ctx_r2=nextContext();advance(1),property("colSpan",ctx_r2.colSpan),advance(1),textInterpolate(ctx_r2.title)}}function ViewComponent_tr_3_th_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"th"),text(1),elementEnd()),2&rf){const name_r6=ctx.$implicit;advance(1),textInterpolate(name_r6)}}function ViewComponent_tr_3_Template(rf,ctx){if(1&rf&&(elementStart(0,"tr",4),template(1,ViewComponent_tr_3_th_1_Template,2,1,"th",6),elementEnd()),2&rf){const ctx_r3=nextContext();advance(1),property("ngForOf",ctx_r3.weekNames)}}function ViewComponent_tr_4_ng_template_1_td_0_ng_template_1_Template(rf,ctx){if(1&rf&&text(0),2&rf){const row_r7=nextContext(3).$implicit,ctx_r12=nextContext();textInterpolate1(" ",ctx_r12.getWeekNumber(ctx_r12.firstDate(row_r7))," ")}}function ViewComponent_tr_4_ng_template_1_td_0_ng_template_2_Template(rf,ctx){}const _c81=function(a0,a1){return{$implicit:a0,cellContext:a1}};function ViewComponent_tr_4_ng_template_1_td_0_Template(rf,ctx){if(1&rf&&(elementStart(0,"td",10),template(1,ViewComponent_tr_4_ng_template_1_td_0_ng_template_1_Template,1,1,"ng-template",7),template(2,ViewComponent_tr_4_ng_template_1_td_0_ng_template_2_Template,0,0,"ng-template",11),elementEnd()),2&rf){const row_r7=nextContext(2).$implicit,ctx_r11=nextContext();advance(1),property("ngIf",!ctx_r11.weekNumberTemplateRef),advance(1),property("ngIf",ctx_r11.weekNumberTemplateRef)("ngTemplateOutlet",ctx_r11.weekNumberTemplateRef)("ngTemplateOutletContext",pureFunction2(4,_c81,ctx_r11.firstDate(row_r7),ctx_r11.getWeekNumberContext(row_r7)))}}function ViewComponent_tr_4_ng_template_1_Template(rf,ctx){if(1&rf&&template(0,ViewComponent_tr_4_ng_template_1_td_0_Template,3,7,"td",9),2&rf){const row_r7=nextContext().$implicit,ctx_r9=nextContext(),_r0=reference(1);property("ngIf",ctx_r9.firstDate(row_r7))("ngIfElse",_r0)}}function ViewComponent_tr_4_ng_container_2_td_1_ng_template_2_Template(rf,ctx){1&rf&&text(0),2&rf&&textInterpolate(nextContext(2).$implicit.formattedValue)}function ViewComponent_tr_4_ng_container_2_td_1_3_ng_template_0_Template(rf,ctx){}function ViewComponent_tr_4_ng_container_2_td_1_3_Template(rf,ctx){if(1&rf&&template(0,ViewComponent_tr_4_ng_container_2_td_1_3_ng_template_0_Template,0,0,"ng-template",16),2&rf){const cell_r17=nextContext(2).$implicit;property("ngTemplateOutlet",nextContext(2).templateRef)("ngTemplateOutletContext",pureFunction2(2,_c81,cell_r17.value,cell_r17))}}function ViewComponent_tr_4_ng_container_2_td_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"td",13),elementStart(1,"span",14),template(2,ViewComponent_tr_4_ng_container_2_td_1_ng_template_2_Template,1,1,"ng-template",7),template(3,ViewComponent_tr_4_ng_container_2_td_1_3_Template,1,5,void 0,15),elementEnd(),elementEnd()),2&rf){const ctx_r25=nextContext(),cell_r17=ctx_r25.$implicit,cellIndex_r18=ctx_r25.index,rowIndex_r8=nextContext().index,ctx_r19=nextContext();property("ngClass",ctx_r19.getStyles(cell_r17))("title",cell_r17.title),attribute("id",cell_r17.id)("data-cell-index",ctx_r19.tableCellIndex(rowIndex_r8,cellIndex_r18))("aria-selected",cell_r17.isSelected||cell_r17.isRangeStart||cell_r17.isRangeMid||cell_r17.isRangeEnd)("aria-disabled",cell_r17.isDisabled),advance(2),property("ngIf",!ctx_r19.templateRef),advance(1),property("ngIf",ctx_r19.templateRef)}}function ViewComponent_tr_4_ng_container_2_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),template(1,ViewComponent_tr_4_ng_container_2_td_1_Template,4,8,"td",12),elementContainerEnd()),2&rf){const cell_r17=ctx.$implicit;nextContext(2);const _r0=reference(1);advance(1),property("ngIf",cell_r17)("ngIfElse",_r0)}}function ViewComponent_tr_4_Template(rf,ctx){if(1&rf&&(elementStart(0,"tr",4),template(1,ViewComponent_tr_4_ng_template_1_Template,1,2,"ng-template",7),template(2,ViewComponent_tr_4_ng_container_2_Template,2,2,"ng-container",8),elementEnd()),2&rf){const row_r7=ctx.$implicit,ctx_r4=nextContext();advance(1),property("ngIf",ctx_r4.weekNumber),advance(1),property("kForOf",row_r7)}}$localize`:kendo.timeselector.accept|The Accept button text in the timeselector component801811aa1609e3f173c86baa82cee037f75a215f5362895271044573681:Set`,$localize`:kendo.timeselector.acceptLabel|The label for the Accept button in the timeselector componentb4b1e5ac55f0330f6c4e32b866ae4339ad9699783417396278000787211:Set time`,$localize`:kendo.timeselector.cancel|The Cancel button text in the timeselector component3004d7704ffa6202a3b3925fcea490e486203a3e1890188482755567622:Cancel`,$localize`:kendo.timeselector.cancelLabel|The label for the Cancel button in the timeselector component08dfbdfffd662371a6ff4c0b6ed82b9faa48143b5738120209397145846:Cancel changes`,$localize`:kendo.timeselector.now|The Now button text in the timeselector component98cba1ae36a7bbe15e1bac1837e07922ec109e7d1926162752852226109:Now`,$localize`:kendo.timeselector.nowLabel|The label for the Now button in the timeselector component08e6a8a51d970609e138950fdd89c5cf201869f37789175884909488647:Select now`;var fesm2015_Action=function(Action){return Action[Action.Left=0]="Left",Action[Action.Right=1]="Right",Action[Action.Up=2]="Up",Action[Action.Down=3]="Down",Action[Action.PrevView=4]="PrevView",Action[Action.NextView=5]="NextView",Action[Action.FirstInView=6]="FirstInView",Action[Action.LastInView=7]="LastInView",Action[Action.LowerView=8]="LowerView",Action[Action.UpperView=9]="UpperView",Action}({});const EMPTY_SELECTIONRANGE={start:null,end:null},MIN_DATE=new Date(1900,0,1),MAX_DATE=new Date(2099,11,31),isSet=value=>null!=value,setTime=(origin,candidate)=>{const date=cloneDate(origin);return date.setHours(candidate.getHours(),candidate.getMinutes(),candidate.getSeconds(),candidate.getMilliseconds()),date},fesm2015_range=(start,end,step=1)=>{const result=[];for(let i=start;i<end;i+=step)result.push(i);return result},isInRange=(candidate,min,max)=>!candidate||!(min&&min>candidate||max&&max<candidate),isValidRange=(min,max)=>!isSet(min)||!isSet(max)||min<=max,dateInRange=(candidate,min,max)=>candidate?min&&candidate<min?cloneDate(min):max&&candidate>max?cloneDate(max):candidate:candidate,getToday=()=>getDate(new Date),dist_fesm2015_noop=_=>{},shiftWeekNames=(names,offset)=>names.slice(offset).concat(names.slice(0,offset)),domContainerFactory=type=>(children,classes="",styles={})=>{const container=document.createElement(type);return container.className=classes,Object.keys(styles).map(key=>container.style[key]=styles[key]),"string"==typeof children?container.innerHTML=children||"":(children||[]).forEach(child=>child&&container.appendChild(child)),container},hasChange=(changes,field)=>void 0!==changes[field],hasExistingValue=(changes,field)=>changes[field]&&null!=changes[field].currentValue,isInSelectionRange=(value,selectionRange)=>{const{start:start,end:end}=selectionRange||EMPTY_SELECTIONRANGE;return!(!start||!end)&&start<value&&value<end},EMPTY_DATA=[[]],ACTIONS={[fesm2015_Action.Left]:date=>addDecades(date,-1),[fesm2015_Action.Up]:date=>addDecades(date,-5),[fesm2015_Action.Right]:date=>addDecades(date,1),[fesm2015_Action.Down]:date=>addDecades(date,5),[fesm2015_Action.PrevView]:date=>addCenturies(date,-1),[fesm2015_Action.NextView]:date=>addCenturies(date,1),[fesm2015_Action.FirstInView]:date=>firstDecadeOfCentury(date),[fesm2015_Action.LastInView]:date=>lastDecadeOfCentury(date)};let fesm2015_CenturyViewService=(()=>{class CenturyViewService{addToDate(min,skip){return addCenturies(min,skip)}datesList(start,count){return fesm2015_range(0,count).map(i=>addCenturies(start,i))}data(options){const{cellUID:cellUID,focusedDate:focusedDate,isActiveView:isActiveView,max:max,min:min,selectedDate:selectedDate,selectionRange:selectionRange=EMPTY_SELECTIONRANGE,viewDate:viewDate}=options;if(!viewDate)return EMPTY_DATA;const cells=fesm2015_range(0,5),firstDate=firstDecadeOfCentury(viewDate),lastDate=lastDecadeOfCentury(viewDate),isSelectedDateInRange=isInRange(selectedDate,min,max),today=getToday();return fesm2015_range(0,2).map(rowOffset=>{const baseDate=addDecades(firstDate,5*rowOffset);return cells.map(cellOffset=>{const cellDate=this.normalize(addDecades(baseDate,cellOffset),min,max);if(!this.isInRange(cellDate,min,max))return null;const isRangeStart=this.isEqual(cellDate,selectionRange.start),isRangeEnd=this.isEqual(cellDate,selectionRange.end),isRangeMid=!isRangeStart&&!isRangeEnd&&isInSelectionRange(cellDate,selectionRange);return{formattedValue:this.value(cellDate),id:`${cellUID}${cellDate.getTime()}`,isFocused:this.isEqual(cellDate,focusedDate),isSelected:isActiveView&&isSelectedDateInRange&&this.isEqual(cellDate,selectedDate),isWeekend:!1,isRangeStart:isRangeStart,isRangeMid:isRangeMid,isRangeEnd:isRangeEnd,isRangeSplitEnd:isRangeMid&&this.isEqual(cellDate,lastDate),isRangeSplitStart:isRangeMid&&this.isEqual(cellDate,firstDate),isToday:this.isEqual(cellDate,today),title:this.cellTitle(cellDate),value:cellDate}})})}isEqual(candidate,expected){return!(!candidate||!expected)&&firstYearOfDecade(candidate).getFullYear()===firstYearOfDecade(expected).getFullYear()}isInArray(date,dates){if(!dates.length)return!1;const year=date.getFullYear();return dates[0].getFullYear()<=year&&year<=dates[dates.length-1].getFullYear()+99}isInRange(candidate,min,max){const year=firstYearOfDecade(candidate).getFullYear(),aboveMin=!min||firstYearOfDecade(min).getFullYear()<=year,belowMax=!max||year<=firstYearOfDecade(max).getFullYear();return aboveMin&&belowMax}beginningOfPeriod(date){if(!date)return date;const firstYear=firstYearOfDecade(firstDecadeOfCentury(date));return create_date_createDate(firstYear.getFullYear(),0,1)}isRangeStart(value){return value.getFullYear()%1e3==0}move(value,action){const modifier=ACTIONS[action];return modifier?modifier(value):value}cellTitle(value){return firstYearOfDecade(value).getFullYear().toString()}navigationTitle(value){return value?firstDecadeOfCentury(value).getFullYear().toString():""}title(value){return value?`${firstDecadeOfCentury(value).getFullYear()} - ${lastDecadeOfCentury(value).getFullYear()}`:""}rowLength(_){return 5}skip(value,min){return durationInCenturies(min,value)}total(min,max){return durationInCenturies(min,max)+1}value(current){return current?firstYearOfDecade(current).getFullYear().toString():""}viewDate(date,max,viewsCount=1){const viewsInRange=this.total(date,max);return viewsInRange<viewsCount?addCenturies(date,-1*(viewsCount-viewsInRange)):date}normalize(cellDate,min,max){return cellDate<min&&this.isEqual(cellDate,min)?cloneDate(min):cellDate>max&&this.isEqual(cellDate,max)?cloneDate(max):cellDate}}return CenturyViewService.fac=function(t){return new(t||CenturyViewService)},CenturyViewService.prov=defineInjectable({token:CenturyViewService,factory:CenturyViewService.fac}),CenturyViewService})();const EMPTY_DATA$1=[[]],ACTIONS$1={[fesm2015_Action.Left]:date=>addYears(date,-1),[fesm2015_Action.Up]:date=>addYears(date,-5),[fesm2015_Action.Right]:date=>addYears(date,1),[fesm2015_Action.Down]:date=>addYears(date,5),[fesm2015_Action.PrevView]:date=>addDecades(date,-1),[fesm2015_Action.NextView]:date=>addDecades(date,1),[fesm2015_Action.FirstInView]:date=>firstYearOfDecade(date),[fesm2015_Action.LastInView]:date=>lastYearOfDecade(date)};let fesm2015_DecadeViewService=(()=>{class DecadeViewService{addToDate(min,skip){return addDecades(min,skip)}datesList(start,count){return fesm2015_range(0,count).map(i=>addDecades(start,i))}data(options){const{cellUID:cellUID,focusedDate:focusedDate,isActiveView:isActiveView,max:max,min:min,selectedDate:selectedDate,selectionRange:selectionRange=EMPTY_SELECTIONRANGE,viewDate:viewDate}=options;if(!viewDate)return EMPTY_DATA$1;const cells=fesm2015_range(0,5),firstDate=firstYearOfDecade(viewDate),lastDate=lastYearOfDecade(viewDate),isSelectedDateInRange=isInRange(selectedDate,min,max),today=getToday();return fesm2015_range(0,2).map(rowOffset=>{const baseDate=addYears(firstDate,5*rowOffset);return cells.map(cellOffset=>{const cellDate=this.normalize(addYears(baseDate,cellOffset),min,max);if(!this.isInRange(cellDate,min,max))return null;const isRangeStart=this.isEqual(cellDate,selectionRange.start),isRangeEnd=this.isEqual(cellDate,selectionRange.end),isRangeMid=!isRangeStart&&!isRangeEnd&&isInSelectionRange(cellDate,selectionRange);return{formattedValue:this.value(cellDate),id:`${cellUID}${cellDate.getTime()}`,isFocused:this.isEqual(cellDate,focusedDate),isSelected:isActiveView&&isSelectedDateInRange&&this.isEqual(cellDate,selectedDate),isWeekend:!1,isRangeStart:isRangeStart,isRangeMid:isRangeMid,isRangeEnd:isRangeEnd,isRangeSplitEnd:isRangeMid&&this.isEqual(cellDate,lastDate),isRangeSplitStart:isRangeMid&&this.isEqual(cellDate,firstDate),isToday:this.isEqual(cellDate,today),title:this.cellTitle(cellDate),value:cellDate}})})}isEqual(candidate,expected){return!(!candidate||!expected)&&candidate.getFullYear()===expected.getFullYear()}isInArray(date,dates){if(!dates.length)return!1;const year=date.getFullYear();return dates[0].getFullYear()<=year&&year<=dates[dates.length-1].getFullYear()+9}isInRange(candidate,min,max){const year=candidate.getFullYear(),aboveMin=!min||min.getFullYear()<=year,belowMax=!max||year<=max.getFullYear();return aboveMin&&belowMax}beginningOfPeriod(date){if(!date)return date;const firstYear=firstYearOfDecade(date);return create_date_createDate(firstYear.getFullYear(),0,1)}isRangeStart(value){return value.getFullYear()%100==0}move(value,action){const modifier=ACTIONS$1[action];return modifier?modifier(value):value}cellTitle(value){return value.getFullYear().toString()}navigationTitle(value){return value?firstYearOfDecade(value).getFullYear().toString():""}title(value){return value?`${firstYearOfDecade(value).getFullYear()} - ${lastYearOfDecade(value).getFullYear()}`:""}rowLength(_){return 5}skip(value,min){return durationInDecades(min,value)}total(min,max){return durationInDecades(min,max)+1}value(current){return current?current.getFullYear().toString():""}viewDate(date,max,viewsCount=1){const viewsInRange=this.total(date,max);return viewsInRange<viewsCount?addDecades(date,-1*(viewsCount-viewsInRange)):date}normalize(cellDate,min,max){return cellDate<min&&this.isEqual(cellDate,min)?cloneDate(min):cellDate>max&&this.isEqual(cellDate,max)?cloneDate(max):cellDate}}return DecadeViewService.fac=function(t){return new(t||DecadeViewService)},DecadeViewService.prov=defineInjectable({token:DecadeViewService,factory:DecadeViewService.fac}),DecadeViewService})();const EMPTY_DATA$2=[[]],ACTIONS$2={[fesm2015_Action.Left]:date=>addDays(date,-1),[fesm2015_Action.Up]:date=>addWeeks(date,-1),[fesm2015_Action.Right]:date=>addDays(date,1),[fesm2015_Action.Down]:date=>addWeeks(date,1),[fesm2015_Action.PrevView]:date=>addMonths(date,-1),[fesm2015_Action.NextView]:date=>addMonths(date,1),[fesm2015_Action.FirstInView]:date=>firstDayOfMonth(date),[fesm2015_Action.LastInView]:date=>lastDayOfMonth(date)};let fesm2015_MonthViewService=(()=>{class MonthViewService{constructor(_intlService){this._intlService=_intlService}addToDate(min,skip){return addMonths(min,skip)}datesList(start,count){return fesm2015_range(0,count).map(i=>addMonths(start,i))}data(options){const{cellUID:cellUID,focusedDate:focusedDate,isActiveView:isActiveView,max:max,min:min,selectedDate:selectedDate,selectionRange:selectionRange=EMPTY_SELECTIONRANGE,viewDate:viewDate,isDateDisabled:isDateDisabled=(()=>!1)}=options;if(!viewDate)return EMPTY_DATA$2;const firstMonthDate=firstDayOfMonth(viewDate),firstMonthDay=getDate(firstMonthDate),lastMonthDate=lastDayOfMonth(viewDate),lastMonthDay=getDate(lastMonthDate),isSelectedDateInRange=isInRange(selectedDate,min,max),date=day_of_week_dayOfWeek(firstMonthDate,this._intlService.firstDay(),-1),cells=fesm2015_range(0,7),today=getToday();return fesm2015_range(0,6).map(rowOffset=>{const baseDate=addDays(date,7*rowOffset);return cells.map(cellOffset=>{const cellDate=this.normalize(addDays(baseDate,cellOffset),min,max),cellDay=getDate(cellDate);if(cellDay<firstMonthDay||cellDay>lastMonthDay||cellDate<min||cellDate>max)return null;const isRangeStart=this.isEqual(cellDate,selectionRange.start),isRangeEnd=this.isEqual(cellDate,selectionRange.end),isRangeMid=!isRangeStart&&!isRangeEnd&&isInSelectionRange(cellDate,selectionRange);return{formattedValue:this.value(cellDate),id:`${cellUID}${cellDate.getTime()}`,isFocused:this.isEqual(cellDate,focusedDate),isSelected:isActiveView&&isSelectedDateInRange&&this.isEqual(cellDate,selectedDate),isWeekend:this.isWeekend(cellDate),isRangeStart:isRangeStart,isRangeMid:isRangeMid,isRangeEnd:isRangeEnd,isRangeSplitStart:isRangeMid&&this.isEqual(cellDate,firstMonthDate),isRangeSplitEnd:isRangeMid&&this.isEqual(cellDate,lastMonthDate),isToday:this.isEqual(cellDate,today),title:this.cellTitle(cellDate),value:cellDate,isDisabled:isDateDisabled(cellDate)}})})}isEqual(candidate,expected){return!(!candidate||!expected)&&getDate(candidate).getTime()===getDate(expected).getTime()}isInArray(date,dates){if(0===dates.length)return!1;const lowerBound=this.beginningOfPeriod(dates[0]),upperBound=this.beginningOfPeriod(addMonths(dates[dates.length-1],1));return lowerBound<=date&&date<upperBound}isInRange(candidate,min,max){const value=getDate(candidate),aboveMin=!min||getDate(min)<=value,belowMax=!max||value<=getDate(max);return aboveMin&&belowMax}beginningOfPeriod(date){return date?create_date_createDate(date.getFullYear(),date.getMonth(),1):date}isRangeStart(value){return!value.getMonth()}move(value,action){const modifier=ACTIONS$2[action];return modifier?modifier(value):value}cellTitle(value){return this._intlService.formatDate(value,"D")}navigationTitle(value){return value?this.isRangeStart(value)?value.getFullYear().toString():this.abbrMonthNames()[value.getMonth()]:""}title(current){return`${this.wideMonthNames()[current.getMonth()]} ${current.getFullYear()}`}rowLength(prependCell){return 7+(prependCell?1:0)}skip(value,min){return durationInMonths(min,value)}total(min,max){return durationInMonths(min,max)+1}value(current){return current?current.getDate().toString():""}viewDate(date,max,viewsCount=1){const viewsInRange=this.total(date,max);return viewsInRange<viewsCount?addMonths(date,-1*(viewsCount-viewsInRange)):date}isWeekend(date){const{start:start,end:end}=this._intlService.weekendRange(),day=date.getDay();return end<start?day<=end||start<=day:start<=day&&day<=end}abbrMonthNames(){return this._intlService.dateFormatNames({nameType:"abbreviated",type:"months"})}normalize(cellDate,min,max){return cellDate<min&&this.isEqual(cellDate,min)?cloneDate(min):cellDate>max&&this.isEqual(cellDate,max)?cloneDate(max):cellDate}wideMonthNames(){return this._intlService.dateFormatNames({nameType:"wide",type:"months"})}}return MonthViewService.fac=function(t){return new(t||MonthViewService)(inject(fesm2015_IntlService))},MonthViewService.prov=defineInjectable({token:MonthViewService,factory:MonthViewService.fac}),MonthViewService})();const EMPTY_DATA$3=[[]],ACTIONS$3={[fesm2015_Action.Left]:date=>addMonths(date,-1),[fesm2015_Action.Up]:date=>{return addMonths(date,(month=date.getMonth())>4?-5:month<2?-2:-7);var month},[fesm2015_Action.Right]:date=>addMonths(date,1),[fesm2015_Action.Down]:date=>{return addMonths(date,(month=date.getMonth())<7?5:month<10?7:2);var month},[fesm2015_Action.PrevView]:date=>addYears(date,-1),[fesm2015_Action.NextView]:date=>addYears(date,1),[fesm2015_Action.FirstInView]:date=>firstMonthOfYear(date),[fesm2015_Action.LastInView]:date=>lastMonthOfYear(date)};let fesm2015_YearViewService=(()=>{class YearViewService{constructor(_intlService){this._intlService=_intlService}addToDate(min,skip){return addYears(min,skip)}datesList(start,count){return fesm2015_range(0,count).map(i=>addYears(start,i))}data(options){const{cellUID:cellUID,focusedDate:focusedDate,isActiveView:isActiveView,max:max,min:min,selectedDate:selectedDate,selectionRange:selectionRange=EMPTY_SELECTIONRANGE,viewDate:viewDate}=options;if(!viewDate)return EMPTY_DATA$3;const months=this.abbrMonthNames(),isSelectedDateInRange=isInRange(selectedDate,min,max),firstDate=firstMonthOfYear(viewDate),lastDate=lastMonthOfYear(viewDate),currentYear=firstDate.getFullYear(),cells=fesm2015_range(0,5),today=getToday();return fesm2015_range(0,3).map(rowOffset=>{const baseDate=addMonths(firstDate,5*rowOffset);return cells.map(cellOffset=>{const cellDate=this.normalize(addMonths(baseDate,cellOffset),min,max),changedYear=currentYear<cellDate.getFullYear();if(!this.isInRange(cellDate,min,max)||changedYear)return null;const isRangeStart=this.isEqual(cellDate,selectionRange.start),isRangeEnd=this.isEqual(cellDate,selectionRange.end),isRangeMid=!isRangeStart&&!isRangeEnd&&isInSelectionRange(cellDate,selectionRange);return{formattedValue:months[cellDate.getMonth()],id:`${cellUID}${cellDate.getTime()}`,isFocused:this.isEqual(cellDate,focusedDate),isSelected:isActiveView&&isSelectedDateInRange&&this.isEqual(cellDate,selectedDate),isWeekend:!1,isRangeStart:isRangeStart,isRangeMid:isRangeMid,isRangeEnd:isRangeEnd,isRangeSplitEnd:isRangeMid&&this.isEqual(cellDate,lastDate),isRangeSplitStart:isRangeMid&&this.isEqual(cellDate,firstDate),isToday:this.isEqual(cellDate,today),title:this.cellTitle(cellDate),value:cellDate}})})}isEqual(candidate,expected){return!(!candidate||!expected)&&candidate.getFullYear()===expected.getFullYear()&&candidate.getMonth()===expected.getMonth()}isInArray(date,dates){if(!dates.length)return!1;const year=date.getFullYear();return dates[0].getFullYear()<=year&&year<=dates[dates.length-1].getFullYear()}isInRange(candidate,min,max){const candidateValue=create_date_createDate(candidate.getFullYear(),candidate.getMonth(),1),aboveMin=!min||create_date_createDate(min.getFullYear(),min.getMonth(),1)<=candidateValue,belowMax=!max||candidateValue<=create_date_createDate(max.getFullYear(),max.getMonth(),1);return aboveMin&&belowMax}beginningOfPeriod(date){return date?create_date_createDate(date.getFullYear(),0,1):date}isRangeStart(value){return value.getFullYear()%10==0}move(value,action){const modifier=ACTIONS$3[action];return modifier?modifier(value):value}cellTitle(value){return`${value.getFullYear()} ${this.value(value)}`}navigationTitle(value){return this.title(value)}title(current){return current?current.getFullYear().toString():""}rowLength(_){return 5}skip(value,min){return durationInYears(min,value)}total(min,max){return durationInYears(min,max)+1}value(current){return current?this.abbrMonthNames()[current.getMonth()]:""}viewDate(date,max,viewsCount=1){const viewsInRange=this.total(date,max);return viewsInRange<viewsCount?addYears(date,-1*(viewsCount-viewsInRange)):date}abbrMonthNames(){return this._intlService.dateFormatNames({nameType:"abbreviated",type:"months"})}normalize(cellDate,min,max){return cellDate<min&&this.isEqual(cellDate,min)?cloneDate(min):cellDate>max&&this.isEqual(cellDate,max)?cloneDate(max):cellDate}}return YearViewService.fac=function(t){return new(t||YearViewService)(inject(fesm2015_IntlService))},YearViewService.prov=defineInjectable({token:YearViewService,factory:YearViewService.fac}),YearViewService})();var CalendarViewEnum=function(CalendarViewEnum){return CalendarViewEnum[CalendarViewEnum.month=0]="month",CalendarViewEnum[CalendarViewEnum.year=1]="year",CalendarViewEnum[CalendarViewEnum.decade=2]="decade",CalendarViewEnum[CalendarViewEnum.century=3]="century",CalendarViewEnum}({});const services={[CalendarViewEnum.month]:fesm2015_MonthViewService,[CalendarViewEnum.year]:fesm2015_YearViewService,[CalendarViewEnum.decade]:fesm2015_DecadeViewService,[CalendarViewEnum.century]:fesm2015_CenturyViewService};let fesm2015_BusViewService=(()=>{class BusViewService{constructor(injector){this.injector=injector,this.viewChanged=new core_EventEmitter,this.bottom=CalendarViewEnum.month,this.top=CalendarViewEnum.century}configure(bottom,top){this.bottom=bottom,this.top=top}service(view){const serviceType=services[view];return serviceType?this.injector.get(serviceType):null}moveDown(view){this.move(view,-1)}moveUp(view){this.move(view,1)}moveToBottom(activeView){activeView!==this.bottom&&this.viewChanged.emit({view:this.bottom})}canMoveDown(view){return this.bottom<view}canMoveUp(view){return view<this.top}clamp(view){return view<this.bottom?this.bottom:view>this.top?this.top:view}move(view,offset){const candidate=this.clamp(((view,offset)=>{const candidate=CalendarViewEnum[CalendarViewEnum[view+offset]];return void 0!==candidate?candidate:view})(view,offset));candidate!==view&&this.viewChanged.emit({view:candidate})}}return BusViewService.fac=function(t){return new(t||BusViewService)(inject(Injector))},BusViewService.prov=defineInjectable({token:BusViewService,factory:BusViewService.fac}),BusViewService})();const fesm2015_div=domContainerFactory("div"),ul=domContainerFactory("ul"),li=domContainerFactory("li"),td=domContainerFactory("td"),th=domContainerFactory("th"),fesm2015_tr=domContainerFactory("tr"),tbody=domContainerFactory("tbody"),thead=domContainerFactory("thead"),fesm2015_table=domContainerFactory("table"),repeat=(count,mapper)=>new Array(count).fill("1").map(mapper),scrollable=children=>fesm2015_div(children,"k-content k-scrollable"),navigationList=(()=>{let navElement;return()=>isDocumentAvailable?(navElement||(navElement=fesm2015_div([scrollable([ul([li("<span>FEB</span>")])])],"k-calendar-navigation",{left:"0px",position:"absolute"})),navElement):null})(),viewFactory=({cells:cells,rows:rows},className,renderWeekHeader)=>{let viewElement;return()=>isDocumentAvailable?(viewElement||(viewElement=((contentElement,className,renderWeekHeader)=>fesm2015_div([fesm2015_div('\n            <span class="k-calendar-title">March 2017</span>\n            <span class="k-calendar-today">TODAY</span>\n        ',"k-calendar-header"),renderWeekHeader?fesm2015_table([thead([fesm2015_tr([th("MO")])])],"k-calendar-weekdays"):null,scrollable([contentElement,contentElement])],className,{left:"-10000px",position:"absolute"}))(((rows,cells=1)=>fesm2015_table([tbody([fesm2015_tr([th("1")])].concat(repeat(rows,()=>fesm2015_tr(repeat(cells,c=>td(`<span class="k-link">${c}</span>`))))))]))(rows,cells),className,renderWeekHeader)),viewElement):null},getScrollable=element=>element.querySelector(".k-scrollable"),horizontal=element=>(getScrollable(element).classList.add("k-scrollable-horizontal"),element),monthView=viewFactory({cells:7,rows:6},"k-calendar-view k-calendar-monthview",!0),yearView=viewFactory({cells:5,rows:3},"k-calendar-view k-calendar-yearview",!1),decadeView=viewFactory({cells:5,rows:2},"k-calendar-view k-calendar-decadeview",!1),fesm2015_height=element=>parseFloat(window.getComputedStyle(element).height)||element.offsetHeight,fesm2015_width=element=>{const styles=window.getComputedStyle(element);return parseFloat(styles.width)+parseFloat(styles.paddingLeft)+parseFloat(styles.paddingRight)||element.offsetWidth},getBody=element=>element.querySelector("tbody");let fesm2015_CalendarDOMService=(()=>{class CalendarDOMService{ensureHeights(){void 0===this.calendarHeight&&this.calculateHeights()}calculateHeights(container){isDocumentAvailable()&&(this.hostContainer=container,this.batch(monthView(),contentElement=>{const viewElement=getBody(contentElement);this.calendarHeight=fesm2015_height(contentElement),this.monthViewHeight=fesm2015_height(viewElement),this.headerHeight=fesm2015_height(viewElement.children[0]),this.scrollableContentHeight=fesm2015_height(getScrollable(contentElement))}),this.batch(horizontal(monthView()),contentElement=>{const viewElement=getBody(contentElement);this.calendarWidth=fesm2015_width(contentElement),this.monthViewWidth=fesm2015_width(viewElement),this.scrollableContentWidth=fesm2015_width(getScrollable(contentElement))}),this.batch(yearView(),contentElement=>{this.yearViewHeight=fesm2015_height(getBody(contentElement)),this.scrollableYearContentHeight=fesm2015_height(getScrollable(contentElement))}),this.batch(horizontal(yearView()),contentElement=>{this.yearViewWidth=fesm2015_width(getBody(contentElement))}),this.batch(decadeView(),contentElement=>{this.decadeViewHeight=fesm2015_height(getBody(contentElement)),this.centuryViewHeight=this.decadeViewHeight}),this.batch(horizontal(decadeView()),contentElement=>{this.decadeViewWidth=fesm2015_width(getBody(contentElement)),this.centuryViewWidth=this.decadeViewWidth}),this.batch(navigationList(),contentElement=>{this.navigationItemHeight=fesm2015_height(contentElement.querySelector("li"))}))}viewHeight(viewType){return this.viewDimension(viewType,"height")}viewWidth(viewType){return this.viewDimension(viewType,"width")}viewDimension(viewType,dimension){const viewProp="height"===dimension?"ViewHeight":"ViewWidth";switch(viewType){case CalendarViewEnum.month:return this["month"+viewProp];case CalendarViewEnum.year:return this["year"+viewProp];case CalendarViewEnum.decade:return this["decade"+viewProp];case CalendarViewEnum.century:return this["century"+viewProp];default:return 1}}batch(contentElement,action){const hostContainer=this.hostContainer||document.body,appendedContent=hostContainer.appendChild(contentElement);action(appendedContent),hostContainer.removeChild(appendedContent)}}return CalendarDOMService.fac=function(t){return new(t||CalendarDOMService)},CalendarDOMService.prov=defineInjectable({token:CalendarDOMService,factory:CalendarDOMService.fac}),CalendarDOMService})();class RowHeightService{constructor(total=0,rowHeight,detailRowHeight){this.total=total,this.rowHeight=rowHeight,this.detailRowHeight=detailRowHeight,this.offsets=[],this.heights=[];let agg=0;for(let idx=0;idx<total;idx++)this.offsets.push(agg),agg+=rowHeight,this.heights.push(rowHeight)}height(rowIndex){return this.heights[rowIndex]}expandDetail(rowIndex){this.height(rowIndex)===this.rowHeight&&this.updateRowHeight(rowIndex,this.detailRowHeight)}collapseDetail(rowIndex){this.height(rowIndex)>this.rowHeight&&this.updateRowHeight(rowIndex,-1*this.detailRowHeight)}index(position){if(position<0)return;const result=this.offsets.reduce((prev,current,idx)=>void 0!==prev?prev:current===position?idx:current>position?idx-1:void 0,void 0);return void 0===result?this.total-1:result}offset(rowIndex){return this.offsets[rowIndex]}totalHeight(){return this.heights.reduce((prev,curr)=>prev+curr,0)}updateRowHeight(rowIndex,value){this.heights[rowIndex]+=value,this.offsets=((arr,idx,value)=>[...arr.slice(0,idx+1),...arr.slice(idx+1).map(x=>x+value)])(this.offsets,rowIndex,value)}}const fesm2015_normalize=x=>Math.max(x,0);class ScrollAction{constructor(offset){this.offset=offset}}class PageAction{constructor(skip){this.skip=skip}}class fesm2015_ScrollerService{constructor(scrollObservable){this.scrollObservable=scrollObservable,this.firstLoaded=0,this.bottomOffset=0,this.topOffset=0}create(rowHeightService,skip,take,total,topOffset=0,bottomOffset=0,direction="vertical"){this.rowHeightService=rowHeightService,this.firstLoaded=skip,this.lastLoaded=skip+take,this.take=take,this.total=total,this.lastScroll=0,this.topOffset=topOffset,this.bottomOffset=bottomOffset,this.direction=direction;const subject=new ReplaySubject_ReplaySubject(2),offsetBufferRows=this.rowsForHeight(topOffset),skipWithOffset=fesm2015_normalize(skip-offsetBufferRows);return subject.next(new ScrollAction(this.rowOffset(skipWithOffset))),offsetBufferRows&&subject.next(new PageAction(skipWithOffset)),this.subscription=Observable_Observable.create(observer=>{this.unsubscribe(),this.scrollSubscription=this.scrollObservable.subscribe(x=>this.onScroll(x,observer))}).subscribe(x=>subject.next(x)),subject}destroy(){this.unsubscribe(),this.subscription&&this.subscription.unsubscribe()}onScroll({scrollLeft:scrollLeft,scrollTop:scrollTop,offsetHeight:offsetHeight,offsetWidth:offsetWidth},observer){const scrollPosition="vertical"===this.direction?scrollTop:scrollLeft,offsetSize="vertical"===this.direction?offsetHeight:offsetWidth;if(this.lastScroll===scrollPosition)return;const up=this.lastScroll>=scrollPosition;this.lastScroll=scrollPosition;const firstItemIndex=this.rowHeightService.index(fesm2015_normalize(scrollPosition-this.topOffset)),lastItemIndex=this.rowHeightService.index(fesm2015_normalize(scrollPosition+offsetSize-this.bottomOffset));if(!up&&lastItemIndex>=this.lastLoaded&&this.lastLoaded<this.total&&(this.firstLoaded=firstItemIndex,observer.next(new ScrollAction(this.rowOffset(firstItemIndex))),this.lastLoaded=Math.min(this.firstLoaded+this.take,this.total),observer.next(new PageAction(this.firstLoaded))),up&&firstItemIndex<=this.firstLoaded){const nonVisibleBuffer=Math.floor(.3*this.take);this.firstLoaded=fesm2015_normalize(firstItemIndex-nonVisibleBuffer),observer.next(new ScrollAction(this.rowOffset(this.firstLoaded))),this.lastLoaded=Math.min(this.firstLoaded+this.take,this.total),observer.next(new PageAction(this.firstLoaded))}}rowOffset(index){return this.rowHeightService.offset(index)+this.topOffset}rowsForHeight(height){return Math.ceil(height/this.rowHeightService.height(0))}unsubscribe(){this.scrollSubscription&&(this.scrollSubscription.unsubscribe(),this.scrollSubscription=null)}}const SCROLLER_FACTORY_TOKEN=new InjectionToken("dateinputs-scroll-service-factory");function DEFAULT_SCROLLER_FACTORY(observable){return new fesm2015_ScrollerService(observable)}var ScrollDirection=function(ScrollDirection){return ScrollDirection[ScrollDirection.Backward=0]="Backward",ScrollDirection[ScrollDirection.Forward=1]="Forward",ScrollDirection}({});const scrollModifiers={[ScrollDirection.Forward]:step=>value=>value+step,[ScrollDirection.Backward]:step=>value=>value-step},scrollNormalizers={[ScrollDirection.Forward]:end=>value=>Math.min(value,end),[ScrollDirection.Backward]:end=>value=>Math.max(value,end)},scrollValidators={[ScrollDirection.Forward]:end=>start=>start<end,[ScrollDirection.Backward]:end=>start=>start>end};let fesm2015_VirtualizationComponent=(()=>{class VirtualizationComponent{constructor(scrollerFactory,container,renderer,zone){this.container=container,this.renderer=renderer,this.zone=zone,this.direction="vertical",this.itemHeight=1,this.itemWidth=1,this.topOffset=0,this.bottomOffset=0,this.maxScrollDifference=100,this.scrollOffsetSize=0,this.scrollDuration=150,this.activeIndexChange=new core_EventEmitter,this.pageChange=new core_EventEmitter,this.scrollChange=new core_EventEmitter,this.resolvedPromise=Promise.resolve(null),this.dispatcher=new Subject_Subject,this.scroller=scrollerFactory(this.dispatcher)}get totalVertexLength(){const value=this.totalSize+"px";return"vertical"===this.direction?{height:value}:{width:value}}get containerOffsetSize(){return this.getContainerProperty("vertical"===this.direction?"offsetHeight":"offsetWidth")}get containerScrollSize(){return this.getContainerProperty("vertical"===this.direction?"scrollHeight":"scrollWidth")}get containerScrollPosition(){return this.getContainerProperty("vertical"===this.direction?"scrollTop":"scrollLeft")}get wrapperClasses(){return!0}get horizontalClass(){return"horizontal"===this.direction}ngOnChanges(changes){(changes.direction||changes.take||changes.total)&&(this.initServices(),this.totalSize=this.rowHeightService.totalHeight()+this.bottomOffset)}ngOnInit(){this.rowHeightService||(this.rowHeightService=this.createRowHeightService())}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{this.containerScrollSubscription=this.scroll$().pipe(map_map(event=>event.target)).subscribe(t=>{this.dispatcher.next(t),this.emitActiveIndex()})})}ngOnDestroy(){this.containerScrollSubscription&&this.containerScrollSubscription.unsubscribe(),this.scrollSubscription&&this.scrollSubscription.unsubscribe(),this.animationSubscription&&this.animationSubscription.unsubscribe()}getContainerProperty(propertyName){return this.container.nativeElement[propertyName]}activeIndex(){return this.itemIndex(Math.ceil(this.containerScrollPosition))}itemIndex(offset){return this.rowHeightService.index(offset)}itemOffset(index){return this.rowHeightService.offset(index)}isIndexVisible(index){if(!this.rowHeightService)return!1;const containerTop=this.containerScrollPosition,containerBottom=containerTop+this.containerOffsetSize,top=this.rowHeightService.offset(index),bottom=top+this.rowHeightService.height(index);return top>=containerTop&&bottom<=containerBottom}isListScrolled(index){return this.containerScrollPosition!==this.rowHeightService.offset(index)}scrollTo(value){this.renderer.setProperty(this.container.nativeElement,"vertical"===this.direction?"scrollTop":"scrollLeft",value)}scrollToIndex(index){this.zone.runOutsideAngular(()=>{this.resolvedPromise.then(()=>{this.scrollTo(this.rowHeightService.offset(index))})})}scrollToBottom(){this.scrollTo(this.totalSize)}animateToIndex(index){this.animationSubscription&&this.animationSubscription.unsubscribe();const indexOffset=this.rowHeightService.offset(index),direction=this.getContainerScrollDirection(indexOffset),{start:start,end:end}=this.scrollRange(indexOffset,direction);if(start===end)return;const step=this.scrollStep(start,end),modifyScroll=scrollModifiers[direction](step),normalizeScroll=scrollNormalizers[direction](end),isScrollValid=scrollValidators[direction](modifyScroll(end));this.zone.runOutsideAngular(()=>{this.animationSubscription=combineLatest(of(start),interval_interval(0,animationFrame_animationFrame)).pipe(map_map(stream=>stream[0]),scan(modifyScroll),function(predicate,inclusive=!1){return source=>source.lift(new TakeWhileOperator(predicate,inclusive))}(isScrollValid),map_map(normalizeScroll)).subscribe(x=>this.scrollTo(x))})}scrollRange(indexOffset,direction){const containerScroll=this.containerScrollPosition;if(parseInt(indexOffset,10)===parseInt(containerScroll,10))return{start:indexOffset,end:indexOffset};const maxScroll=this.containerMaxScroll(),sign=direction===ScrollDirection.Backward?1:-1,difference=(maxScrollDifference=this.maxScrollDifference,Math.min(Math.abs(indexOffset-containerScroll),maxScrollDifference));var maxScrollDifference;const end=Math.min(indexOffset,maxScroll);return{start:Math.min(Math.max(end+sign*difference,0),maxScroll),end:end}}scrollStep(start,end){return Math.abs(end-start)/(this.scrollDuration/17)}scroll$(){return isDocumentAvailable()?fromEvent(this.container.nativeElement,"scroll"):empty_EMPTY}initServices(){this.rowHeightService=this.createRowHeightService(),this.scrollSubscription&&this.scrollSubscription.unsubscribe(),this.scrollSubscription=this.scroller.create(this.rowHeightService,this.skip,this.take,this.total,this.topOffset,this.scrollOffsetSize,this.direction).subscribe(x=>{x instanceof PageAction?this.pageChange.emit(x):this.scrollChange.emit(x)})}createRowHeightService(){return new RowHeightService(this.total,"vertical"===this.direction?this.itemHeight:this.itemWidth,0)}emitActiveIndex(){const index=this.rowHeightService.index(this.containerScrollPosition-this.topOffset);this.lastActiveIndex!==index&&(this.lastActiveIndex=index,this.activeIndexChange.emit(index))}containerMaxScroll(){return this.containerScrollSize-this.containerOffsetSize}getContainerScrollDirection(indexOffset){return indexOffset<this.containerScrollPosition?ScrollDirection.Backward:ScrollDirection.Forward}}return VirtualizationComponent.fac=function(t){return new(t||VirtualizationComponent)(directiveInject(SCROLLER_FACTORY_TOKEN),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(NgZone))},VirtualizationComponent.cmp=defineComponent({type:VirtualizationComponent,selectors:[["kendo-virtualization"]],hostVars:6,hostBindings:function(rf,ctx){2&rf&&classProp("k-content",ctx.wrapperClasses)("k-scrollable",ctx.wrapperClasses)("k-scrollable-horizontal",ctx.horizontalClass)},inputs:{direction:"direction",itemHeight:"itemHeight",itemWidth:"itemWidth",topOffset:"topOffset",bottomOffset:"bottomOffset",maxScrollDifference:"maxScrollDifference",scrollOffsetSize:"scrollOffsetSize",scrollDuration:"scrollDuration",skip:"skip",take:"take",total:"total"},outputs:{activeIndexChange:"activeIndexChange",pageChange:"pageChange",scrollChange:"scrollChange"},features:[ProvidersFeature([{provide:SCROLLER_FACTORY_TOKEN,useValue:DEFAULT_SCROLLER_FACTORY}]),NgOnChangesFeature],ngContentSelectors:kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c0,decls:2,vars:3,consts:[[1,"k-scrollable-placeholder",3,"ngStyle"]],template:function(rf,ctx){1&rf&&(projectionDef(),projection(0),element(1,"div",0)),2&rf&&(advance(1),classProp("k-scrollable-horizontal-placeholder","horizontal"===ctx.direction),property("ngStyle",ctx.totalVertexLength))},directives:[common_NgStyle],encapsulation:2}),VirtualizationComponent})();const closestInScope=(node,predicate,scope)=>{for(;node&&node!==scope&&!predicate(node);)node=node.parentNode;if(node!==scope)return node},fesm2015_closest=(node,predicate)=>{for(;node&&!predicate(node);)node=node.parentNode;return node};let fesm2015_NavigationComponent=(()=>{class NavigationComponent{constructor(bus,dom,intl,cdr,renderer){this.bus=bus,this.dom=dom,this.intl=intl,this.cdr=cdr,this.renderer=renderer,this.min=new Date(MIN_DATE),this.max=new Date(MAX_DATE),this.focusedDate=new Date,this.valueChange=new core_EventEmitter,this.pageChange=new core_EventEmitter,this.dates=[],this.take=30,this.indexToScroll=-1}get getComponentClass(){return!0}ngOnInit(){this.dom.ensureHeights();const calendarHeight=this.dom.calendarHeight;this.itemHeight=this.dom.navigationItemHeight,this.maxViewHeight=this.dom.monthViewHeight,this.topOffset=(calendarHeight-this.itemHeight)/2,this.bottomOffset=calendarHeight-this.itemHeight,this.intlSubscription=this.intl.changes.subscribe(this.intlChange.bind(this))}ngOnChanges(changes){if(this.service=this.bus.service(this.activeView),!this.service)return;this.activeViewValue=CalendarViewEnum[this.activeView];const viewDate=dateInRange(this.focusedDate,this.min,this.max),total=this.service.total(this.min,this.max),totalChanged=this.total&&this.total!==total;this.skip=this.service.skip(viewDate,this.min),this.total=total,!totalChanged&&this.service.isInArray(viewDate,this.dates)||(this.dates=this.service.datesList(viewDate,this.getTake(this.skip))),(changes.focusedDate||totalChanged)&&(this.indexToScroll=this.service.skip(this.focusedDate,this.min))}ngOnDestroy(){this.intlSubscription&&this.intlSubscription.unsubscribe()}ngAfterViewInit(){-1!==this.indexToScroll&&(this.virtualization.scrollToIndex(this.indexToScroll),this.indexToScroll=-1)}ngAfterViewChecked(){-1!==this.indexToScroll&&(this.virtualization.scrollToIndex(this.indexToScroll),this.indexToScroll=-1)}onPageChange({skip:skip}){this.dates=this.service.datesList(this.service.addToDate(this.min,skip),this.getTake(skip)),this.pageChange.emit()}scrollChange({offset:offset}){const el=this.list.nativeElement,translate=`translateY(${offset}px)`;this.renderer.setStyle(el,"transform",translate),this.renderer.setStyle(el,"-ms-transform",translate)}handleDateChange(args){const item=closestInScope(args.target,node=>node.hasAttribute("data-date-index"),this.list.nativeElement);if(item){const index=parseInt(item.getAttribute("data-date-index"),10);this.valueChange.emit(cloneDate(this.dates[index]))}}getTake(skip){return Math.min(this.total-skip,this.take)}intlChange(){this.activeView===CalendarViewEnum.month&&this.cdr.markForCheck()}}return NavigationComponent.fac=function(t){return new(t||NavigationComponent)(directiveInject(fesm2015_BusViewService),directiveInject(fesm2015_CalendarDOMService),directiveInject(fesm2015_IntlService),directiveInject(ChangeDetectorRef),directiveInject(Renderer2))},NavigationComponent.cmp=defineComponent({type:NavigationComponent,selectors:[["kendo-calendar-navigation"]],viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(fesm2015_VirtualizationComponent,!0),staticViewQuery(kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c1,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.virtualization=_t.first),queryRefresh(_t=loadQuery())&&(ctx.list=_t.first))},hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-calendar-navigation",ctx.getComponentClass)},inputs:{min:"min",max:"max",focusedDate:"focusedDate",activeView:"activeView",templateRef:"templateRef"},outputs:{valueChange:"valueChange",pageChange:"pageChange"},features:[NgOnChangesFeature],decls:5,vars:12,consts:[[1,"k-calendar-navigation-highlight"],[3,"skip","take","total","itemHeight","topOffset","bottomOffset","maxScrollDifference","pageChange","scrollChange"],[1,"k-reset",3,"kendoEventsOutsideAngular","scope"],["list",""],[4,"kFor","kForOf"],[3,"ngIf"],[3,"ngIf","ngTemplateOutlet","ngTemplateOutletContext"]],template:function(rf,ctx){1&rf&&(element(0,"span",0),elementStart(1,"kendo-virtualization",1),listener("pageChange",(function($event){return ctx.onPageChange($event)}))("scrollChange",(function($event){return ctx.scrollChange($event)})),elementStart(2,"ul",2,3),template(4,NavigationComponent_li_4_Template,4,11,"li",4),elementEnd(),elementEnd()),2&rf&&(advance(1),property("skip",ctx.skip)("take",ctx.take)("total",ctx.total)("itemHeight",ctx.itemHeight)("topOffset",ctx.topOffset)("bottomOffset",ctx.bottomOffset)("maxScrollDifference",ctx.maxViewHeight),advance(1),property("kendoEventsOutsideAngular",pureFunction1(10,kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c3,ctx.handleDateChange))("scope",ctx),advance(2),property("kForOf",ctx.dates))},directives:function(){return[fesm2015_VirtualizationComponent,fesm2015_EventsOutsideAngularDirective,fesm2015_KForOf,common_NgIf,common_NgTemplateOutlet]},encapsulation:2,changeDetection:0}),NavigationComponent})(),fesm2015_ViewListComponent=(()=>{class ViewListComponent{constructor(bus,cdr,intl,dom,renderer){this.bus=bus,this.cdr=cdr,this.intl=intl,this.dom=dom,this.renderer=renderer,this.isActive=!0,this.min=new Date(MIN_DATE),this.max=new Date(MAX_DATE),this.activeDateChange=new core_EventEmitter,this.valueChange=new core_EventEmitter,this.pageChange=new core_EventEmitter,this.dates=[],this.cols=[],this.weekNames=[],this.take=5,this.animateToIndex=!0,this.indexToScroll=-1,this.minViewsToRender=1}get weekNumber(){return this.showWeekNumbers&&this.isMonthView()}set weekNumber(showWeekNumbers){this.showWeekNumbers=showWeekNumbers}get getComponentClass(){return!0}get getComponentMonthClass(){return this.activeView===CalendarViewEnum.month}get getComponentYearClass(){return this.activeView===CalendarViewEnum.year}get getComponentDecadeClass(){return this.activeView===CalendarViewEnum.decade}get getComponentCenturyClass(){return this.activeView===CalendarViewEnum.century}ngOnInit(){this.weekNames=this.getWeekNames(),this.bottomOffset=this.getBottomOffset(),this.viewOffset=-1*this.dom.headerHeight,this.viewHeight=this.dom.viewHeight(this.activeView),this.intlSubscription=this.intl.changes.subscribe(this.intlChange.bind(this))}ngOnChanges(changes){if(this.service=this.bus.service(this.activeView),!this.service)return;this.cols=new Array(this.service.rowLength(this.weekNumber)).fill(""),this.colWidth=Math.round(100/this.cols.length),this.weekNames=hasChange(changes,"weekNumber")&&this.weekNumber?this.getWeekNames():this.weekNames;const activeViewChanged=hasChange(changes,"activeView"),focusedDate=this.focusedDate,viewDate=dateInRange(this.service.viewDate(focusedDate,this.max,this.minViewsToRender),this.min,this.max),total=this.service.total(this.min,this.max),generateDates=this.total&&this.total!==total||!this.service.isInArray(focusedDate,this.dates);var date1,date2;this.skip=this.service.skip(viewDate,this.min),this.total=total,this.animateToIndex=!activeViewChanged,this.bottomOffset=this.getBottomOffset(),this.viewHeight=this.dom.viewHeight(this.activeView),generateDates&&(this.dates=this.service.datesList(viewDate,this.getTake(this.skip))),date2=focusedDate,(date1=this.activeDate)&&date2&&date1.getFullYear()===date2.getFullYear()&&date1.getMonth()===date2.getMonth()||(this.activeDate=cloneDate(focusedDate));const updateIndex=hasChange(changes,"focusedDate")||activeViewChanged;(generateDates||updateIndex||this.virtualization.isIndexVisible(this.skip))&&(this.indexToScroll=this.service.skip(focusedDate,this.min))}ngOnDestroy(){this.intlSubscription&&this.intlSubscription.unsubscribe()}ngAfterViewInit(){-1!==this.indexToScroll&&(this.virtualization.scrollToIndex(this.indexToScroll),this.indexToScroll=-1)}ngAfterViewChecked(){-1!==this.indexToScroll&&(this.virtualization[this.animateToIndex?"animateToIndex":"scrollToIndex"](this.indexToScroll),this.animateToIndex=!0,this.indexToScroll=-1)}onPageChange({skip:skip}){this.dates=this.service.datesList(this.service.addToDate(this.min,skip),this.getTake(skip)),this.pageChange.emit()}scrollChange({offset:offset}){const el=this.list.nativeElement,translate=`translateY(${offset}px)`;this.renderer.setStyle(el,"transform",translate),this.renderer.setStyle(el,"-ms-transform",translate)}setActiveDate(index){const candidate=this.service.addToDate(this.min,index);isEqual(this.activeDate,candidate)||(this.activeDate=candidate,this.activeDateChange.emit(candidate),this.cdr.detectChanges())}handleDateChange(candidate){this.valueChange.emit(candidate)}isMonthView(){return this.activeView===CalendarViewEnum.month}isScrolled(){return this.virtualization.isListScrolled(this.service.skip(this.focusedDate,this.min))}getBottomOffset(){return this.getScrollableHeight()-this.dom.viewHeight(this.activeView)}getScrollableHeight(){return this.activeView===CalendarViewEnum.month?this.dom.scrollableContentHeight:this.dom.scrollableYearContentHeight}getTake(skip){return Math.min(this.total-skip,this.take)}getWeekNames(){const weekNames=shiftWeekNames(this.intl.dateFormatNames({nameType:"short",type:"days"}),this.intl.firstDay());return this.weekNumber?[""].concat(weekNames):weekNames}intlChange(){this.weekNames=this.getWeekNames(),this.isMonthView()&&this.cdr.markForCheck()}}return ViewListComponent.fac=function(t){return new(t||ViewListComponent)(directiveInject(fesm2015_BusViewService),directiveInject(ChangeDetectorRef),directiveInject(fesm2015_IntlService),directiveInject(fesm2015_CalendarDOMService),directiveInject(Renderer2))},ViewListComponent.cmp=defineComponent({type:ViewListComponent,selectors:[["kendo-calendar-viewlist"]],viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(fesm2015_VirtualizationComponent,!0),staticViewQuery(kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c1,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.virtualization=_t.first),queryRefresh(_t=loadQuery())&&(ctx.list=_t.first))},hostVars:10,hostBindings:function(rf,ctx){2&rf&&classProp("k-calendar-view",ctx.getComponentClass)("k-calendar-monthview",ctx.getComponentMonthClass)("k-calendar-yearview",ctx.getComponentYearClass)("k-calendar-decadeview",ctx.getComponentDecadeClass)("k-calendar-centuryview",ctx.getComponentCenturyClass)},inputs:{isActive:"isActive",min:"min",max:"max",weekNumber:"weekNumber",cellTemplateRef:"cellTemplateRef",weekNumberTemplateRef:"weekNumberTemplateRef",headerTitleTemplateRef:"headerTitleTemplateRef",activeView:"activeView",cellUID:"cellUID",focusedDate:"focusedDate",value:"value"},outputs:{activeDateChange:"activeDateChange",valueChange:"valueChange",pageChange:"pageChange"},features:[NgOnChangesFeature],decls:8,vars:17,consts:[[3,"currentDate","min","max","activeView","templateRef","today"],["class","k-calendar-weekdays","style","table-layout: auto;",4,"ngIf"],[3,"tabindex","skip","take","total","itemHeight","topOffset","bottomOffset","scrollOffsetSize","maxScrollDifference","pageChange","scrollChange","activeIndexChange"],["list",""],[4,"ngFor","ngForOf"],["kendoCalendarView","","role","rowgroup",3,"activeView","isActive","min","max","cellUID","focusedDate","selectedDate","weekNumber","templateRef","weekNumberTemplateRef","viewDate","change",4,"kFor","kForOf"],[1,"k-calendar-weekdays",2,"table-layout","auto"],[3,"width",4,"ngFor","ngForOf"],["kendoCalendarView","","role","rowgroup",3,"activeView","isActive","min","max","cellUID","focusedDate","selectedDate","weekNumber","templateRef","weekNumberTemplateRef","viewDate","change"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-calendar-header",0),listener("today",(function($event){return ctx.handleDateChange($event)})),elementEnd(),template(1,ViewListComponent_table_1_Template,4,1,"table",1),elementStart(2,"kendo-virtualization",2),listener("pageChange",(function($event){return ctx.onPageChange($event)}))("scrollChange",(function($event){return ctx.scrollChange($event)}))("activeIndexChange",(function($event){return ctx.setActiveDate($event)})),elementStart(3,"table",null,3),elementStart(5,"colgroup"),template(6,ViewListComponent_col_6_Template,1,0,"col",4),elementEnd(),template(7,ViewListComponent_tbody_7_Template,1,11,"tbody",5),elementEnd(),elementEnd()),2&rf&&(property("currentDate",ctx.activeDate)("min",ctx.min)("max",ctx.max)("activeView",ctx.activeView)("templateRef",ctx.headerTitleTemplateRef),advance(1),property("ngIf",ctx.isMonthView()),advance(1),property("tabindex",-1)("skip",ctx.skip)("take",ctx.take)("total",ctx.total)("itemHeight",ctx.viewHeight)("topOffset",ctx.viewOffset)("bottomOffset",ctx.bottomOffset)("scrollOffsetSize",ctx.viewOffset)("maxScrollDifference",ctx.viewHeight),advance(4),property("ngForOf",ctx.cols),advance(1),property("kForOf",ctx.dates))},directives:function(){return[fesm2015_HeaderComponent,common_NgIf,fesm2015_VirtualizationComponent,common_NgForOf,fesm2015_KForOf,fesm2015_ViewComponent]},encapsulation:2,changeDetection:0}),ViewListComponent})();const KEY_TO_ACTION={33:fesm2015_Action.PrevView,34:fesm2015_Action.NextView,35:fesm2015_Action.LastInView,36:fesm2015_Action.FirstInView,37:fesm2015_Action.Left,38:fesm2015_Action.Up,39:fesm2015_Action.Right,40:fesm2015_Action.Down,"meta+38":fesm2015_Action.UpperView,"meta+40":fesm2015_Action.LowerView};let kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_NavigationService=(()=>{class NavigationService{constructor(bus){this.bus=bus}action(event){return KEY_TO_ACTION[`${event.ctrlKey||event.metaKey?"meta+":""}${event.keyCode}`]}move(value,action,activeView){const service=this.bus.service(activeView);return service?action===fesm2015_Action.UpperView&&this.bus.canMoveUp(activeView)?(this.bus.moveUp(activeView),value):action===fesm2015_Action.LowerView&&this.bus.canMoveDown(activeView)?(this.bus.moveDown(activeView),value):service.move(value,action):value}}return NavigationService.fac=function(t){return new(t||NavigationService)(inject(fesm2015_BusViewService))},NavigationService.prov=defineInjectable({token:NavigationService,factory:NavigationService.fac}),NavigationService})(),fesm2015_ScrollSyncService=(()=>{class ScrollSyncService{constructor(dom,zone){this.dom=dom,this.zone=zone}configure(activeView){const magnitude=Math.max(this.dom.viewHeight(activeView)/this.dom.navigationItemHeight,1);this.divideByMagnitude=(magnitude=>x=>Math.floor(x/magnitude))(magnitude),this.powerByMagnitude=(magnitude=>x=>x*magnitude)(magnitude)}sync(navigator,view){this.unsubscribe(),navigator&&view&&(this.navigator=navigator,this.view=view,this.zone.runOutsideAngular(()=>{let navScrolled,monthScrolled;this.navSubscription=navigator.scroll$().subscribe(e=>{monthScrolled?monthScrolled=!1:(navScrolled=!0,this.scrollSiblingOf(e.target))}),this.viewSubscription=view.scroll$().subscribe(e=>{navScrolled?navScrolled=!1:(monthScrolled=!0,this.scrollSiblingOf(e.target))})}))}scrollSiblingOf(scrolledElement){const component=this.siblingComponent(scrolledElement),scrollTop=this.calculateScroll(component,scrolledElement.scrollTop);component.scrollTo(scrollTop)}siblingComponent(scrollableElement){return this.navigator.container.nativeElement===scrollableElement?this.view:this.navigator}calculateScroll(component,scrollTop){return(component===this.navigator?this.divideByMagnitude:this.powerByMagnitude)(scrollTop)}destroy(){this.unsubscribe()}unsubscribe(){this.navSubscription&&this.navSubscription.unsubscribe(),this.viewSubscription&&this.viewSubscription.unsubscribe()}}return ScrollSyncService.fac=function(t){return new(t||ScrollSyncService)(inject(fesm2015_CalendarDOMService),inject(NgZone))},ScrollSyncService.prov=defineInjectable({token:ScrollSyncService,factory:ScrollSyncService.fac}),ScrollSyncService})(),fesm2015_CellTemplateDirective=(()=>{class CellTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return CellTemplateDirective.fac=function(t){return new(t||CellTemplateDirective)(directiveInject(TemplateRef))},CellTemplateDirective.dir=defineDirective({type:CellTemplateDirective,selectors:[["","kendoCalendarCellTemplate",""]]}),CellTemplateDirective})(),fesm2015_MonthCellTemplateDirective=(()=>{class MonthCellTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return MonthCellTemplateDirective.fac=function(t){return new(t||MonthCellTemplateDirective)(directiveInject(TemplateRef))},MonthCellTemplateDirective.dir=defineDirective({type:MonthCellTemplateDirective,selectors:[["","kendoCalendarMonthCellTemplate",""]]}),MonthCellTemplateDirective})(),fesm2015_YearCellTemplateDirective=(()=>{class YearCellTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return YearCellTemplateDirective.fac=function(t){return new(t||YearCellTemplateDirective)(directiveInject(TemplateRef))},YearCellTemplateDirective.dir=defineDirective({type:YearCellTemplateDirective,selectors:[["","kendoCalendarYearCellTemplate",""]]}),YearCellTemplateDirective})(),fesm2015_DecadeCellTemplateDirective=(()=>{class DecadeCellTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return DecadeCellTemplateDirective.fac=function(t){return new(t||DecadeCellTemplateDirective)(directiveInject(TemplateRef))},DecadeCellTemplateDirective.dir=defineDirective({type:DecadeCellTemplateDirective,selectors:[["","kendoCalendarDecadeCellTemplate",""]]}),DecadeCellTemplateDirective})(),fesm2015_CenturyCellTemplateDirective=(()=>{class CenturyCellTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return CenturyCellTemplateDirective.fac=function(t){return new(t||CenturyCellTemplateDirective)(directiveInject(TemplateRef))},CenturyCellTemplateDirective.dir=defineDirective({type:CenturyCellTemplateDirective,selectors:[["","kendoCalendarCenturyCellTemplate",""]]}),CenturyCellTemplateDirective})(),fesm2015_WeekNumberCellTemplateDirective=(()=>{class WeekNumberCellTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return WeekNumberCellTemplateDirective.fac=function(t){return new(t||WeekNumberCellTemplateDirective)(directiveInject(TemplateRef))},WeekNumberCellTemplateDirective.dir=defineDirective({type:WeekNumberCellTemplateDirective,selectors:[["","kendoCalendarWeekNumberCellTemplate",""]]}),WeekNumberCellTemplateDirective})(),fesm2015_HeaderTitleTemplateDirective=(()=>{class HeaderTitleTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return HeaderTitleTemplateDirective.fac=function(t){return new(t||HeaderTitleTemplateDirective)(directiveInject(TemplateRef))},HeaderTitleTemplateDirective.dir=defineDirective({type:HeaderTitleTemplateDirective,selectors:[["","kendoCalendarHeaderTitleTemplate",""]]}),HeaderTitleTemplateDirective})(),fesm2015_NavigationItemTemplateDirective=(()=>{class NavigationItemTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return NavigationItemTemplateDirective.fac=function(t){return new(t||NavigationItemTemplateDirective)(directiveInject(TemplateRef))},NavigationItemTemplateDirective.dir=defineDirective({type:NavigationItemTemplateDirective,selectors:[["","kendoCalendarNavigationItemTemplate",""]]}),NavigationItemTemplateDirective})(),fesm2015_PickerService=(()=>{class PickerService{constructor(){this.onFocus=new core_EventEmitter,this.onBlur=new core_EventEmitter,this.sameDateSelected=new core_EventEmitter}}return PickerService.fac=function(t){return new(t||PickerService)},PickerService.prov=defineInjectable({token:PickerService,factory:PickerService.fac}),PickerService})();const minValidator=minValue=>control=>minValue&&control.value&&control.value<minValue?{minError:{minValue:minValue,value:control.value}}:null,maxValidator=maxValue=>control=>maxValue&&control.value&&control.value>maxValue?{maxError:{maxValue:maxValue,value:control.value}}:null,fesm2015_requiresZoneOnBlur=ngControl=>ngControl&&(!ngControl.touched||ngControl.control&&"blur"===ngControl.control.updateOn),fesm2015_preventDefault=args=>args.preventDefault(),kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_isPresent=value=>null!=value,fesm2015_noop$1=()=>!1;let fesm2015_DisabledDatesService=(()=>{class DisabledDatesService{constructor(){this.changes=new Subject_Subject,this.isDateDisabled=fesm2015_noop$1}initialize(disabledDates){if("function"==typeof disabledDates)this.isDateDisabled=date=>disabledDates(getDate(date));else if(value=disabledDates,Array.isArray(value)&&value.length>0&&value.every(item=>"number"==typeof item)){const disabledWeekDays=new Set(disabledDates);this.isDateDisabled=date=>disabledWeekDays.has(date.getDay())}else if((value=>Array.isArray(value)&&value.length>0&&value.every(item=>item instanceof Date))(disabledDates)){const normalizedDisabledDates=new Set(disabledDates.map(date=>getDate(date).getTime()));this.isDateDisabled=date=>normalizedDisabledDates.has(getDate(date).getTime())}else this.isDateDisabled=fesm2015_noop$1,this.notifyInvalidInput(disabledDates);var value;this.notifyServiceChange()}notifyInvalidInput(disabledDates){if(kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_isPresent(disabledDates)&&isDevMode())throw new Error("The 'disabledDates' value should be a function, a Day array or a Date array. Check https://www.telerik.com/kendo-angular-ui/components/dateinputs/calendar/disabled-dates/ for more information.")}notifyServiceChange(){this.changes.next()}}return DisabledDatesService.fac=function(t){return new(t||DisabledDatesService)},DisabledDatesService.prov=defineInjectable({token:DisabledDatesService,factory:DisabledDatesService.fac}),DisabledDatesService})();const virtualizationProp=x=>x?x.virtualization:null,CALENDAR_VALUE_ACCESSOR={multi:!0,provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>fesm2015_CalendarComponent)},CALENDAR_RANGE_VALIDATORS={multi:!0,provide:NG_VALIDATORS,useExisting:forwardRef(()=>fesm2015_CalendarComponent)},KENDO_INPUT_PROVIDER={provide:KendoInput,useExisting:forwardRef(()=>fesm2015_CalendarComponent)};let fesm2015_CalendarComponent=(()=>{class CalendarComponent{constructor(bus,dom,element,navigator,renderer,cdr,ngZone,injector,scrollSyncService,disabledDatesService,pickerService){this.bus=bus,this.dom=dom,this.element=element,this.navigator=navigator,this.renderer=renderer,this.cdr=cdr,this.ngZone=ngZone,this.injector=injector,this.scrollSyncService=scrollSyncService,this.disabledDatesService=disabledDatesService,this.pickerService=pickerService,this.id=guid(),this.rangeValidation=!1,this.disabled=!1,this.tabindex=0,this.navigation=!0,this.activeView=CalendarViewEnum[CalendarViewEnum.month],this.bottomView=CalendarViewEnum[CalendarViewEnum.month],this.topView=CalendarViewEnum[CalendarViewEnum.century],this.weekNumber=!1,this.activeViewChange=new core_EventEmitter,this.activeViewDateChange=new core_EventEmitter,this.valueChange=new core_EventEmitter,this.isActive=!1,this.cellUID=guid(),this._min=new Date(MIN_DATE),this._max=new Date(MAX_DATE),this._focusedDate=getToday(),this.onControlChange=dist_fesm2015_noop,this.onControlTouched=dist_fesm2015_noop,this.onValidatorChange=dist_fesm2015_noop,this.minValidateFn=dist_fesm2015_noop,this.maxValidateFn=dist_fesm2015_noop,this.syncNavigation=!0,this.domEvents=[],this.resolvedPromise=Promise.resolve(null),this.destroyed=!1,this.setClasses(element.nativeElement),this.pickerService&&(this.pickerService.calendar=this)}set focusedDate(focusedDate){this._focusedDate=focusedDate||getToday(),this.setAriaActivedescendant()}get focusedDate(){return this._focusedDate}set min(min){this._min=min||new Date(MIN_DATE)}get min(){return this._min}set max(max){this._max=max||new Date(MAX_DATE)}get max(){return this._max}get value(){return this._value}set value(candidate){this.verifyValue(candidate),this._value=cloneDate(candidate)}set tabIndex(tabIndex){this.tabindex=tabIndex}get tabIndex(){return this.tabindex}set disabledDates(value){this.disabledDatesService.initialize(value)}set cellTemplateRef(template){this.cellTemplate=template}set monthCellTemplateRef(template){this.monthCellTemplate=template}set yearCellTemplateRef(template){this.yearCellTemplate=template}set decadeCellTemplateRef(template){this.decadeCellTemplate=template}set centuryCellTemplateRef(template){this.centuryCellTemplate=template}set weekNumberTemplateRef(template){this.weekNumberTemplate=template}set headerTitleTemplateRef(template){this.headerTitleTemplate=template}set navigationItemTemplateRef(template){this.navigationItemTemplate=template}get activeViewEnum(){const activeView=CalendarViewEnum[this.activeView];return activeView<this.bottomViewEnum?this.bottomViewEnum:activeView}get bottomViewEnum(){return CalendarViewEnum[this.bottomView]}get topViewEnum(){return CalendarViewEnum[this.topView]}get widgetId(){return this.id}get widgetRole(){return"grid"}get calendarTabIndex(){return this.disabled?void 0:this.tabIndex}get ariaDisabled(){return this.disabled}ngOnInit(){this.dom.calculateHeights(this.element.nativeElement),this.scrollSyncService.configure(this.activeViewEnum),this.viewChangeSubscription=this.bus.viewChanged.subscribe(({view:view})=>{this.activeView=CalendarViewEnum[view],this.emitEvent(this.activeViewChange,this.activeView),this.scrollSyncService.configure(view),this.detectChanges()}),this.control=this.injector.get(NgControl,null),this.element&&this.ngZone.runOutsideAngular(()=>{this.bindEvents()})}ngOnChanges(changes){this.verifyChanges(),this.bus.configure(this.bottomViewEnum,this.topViewEnum),this.scrollSyncService.configure(this.activeViewEnum);const useValue=hasExistingValue(changes,"value")&&!hasExistingValue(changes,"focusedDate"),focusedDate=dateInRange(cloneDate(useValue?this.value:this.focusedDate),this.min,this.max);this.focusedDate=isEqual(this.focusedDate,focusedDate)?this.focusedDate:focusedDate,changes.navigation&&(this.syncNavigation=!0),(changes.min||changes.max||changes.rangeValidation)&&(this.minValidateFn=this.rangeValidation?minValidator(this.min):dist_fesm2015_noop,this.maxValidateFn=this.rangeValidation?maxValidator(this.max):dist_fesm2015_noop,this.onValidatorChange())}ngAfterViewInit(){this.setAriaActivedescendant()}ngAfterViewChecked(){this.syncNavigation&&(this.syncNavigation=!1,this.scrollSyncService.sync(virtualizationProp(this.navigationView),virtualizationProp(this.monthView)))}ngOnDestroy(){this.scrollSyncService.destroy(),this.viewChangeSubscription.unsubscribe(),this.domEvents.forEach(unbindCallback=>unbindCallback()),this.pickerService&&(this.pickerService.calendar=null),this.pageChangeSubscription&&this.pageChangeSubscription.unsubscribe(),this.destroyed=!0}focus(){this.element&&this.element.nativeElement.focus()}blur(){this.element&&this.element.nativeElement.blur()}containsElement(element){return Boolean(fesm2015_closest(element,node=>node===this.element.nativeElement))}handleNavigation(candidate){this.disabled||(this.focusedDate=dateInRange(cloneDate(candidate)||this.focusedDate,this.min,this.max),this.detectChanges())}onPageChange(){NgZone.isInAngularZone()||(this.pageChangeSubscription&&this.pageChangeSubscription.unsubscribe(),this.pageChangeSubscription=from_from(this.resolvedPromise).subscribe(()=>{this.detectChanges()}))}handleDateChange(candidate){const canNavigateDown=this.bus.canMoveDown(this.activeViewEnum),isSameDate=!canNavigateDown&&isEqual(candidate,this.value);this.focusedDate=cloneDate(candidate)||this.focusedDate,this.disabled||(isSameDate?this.emitSameDate():canNavigateDown?this.bus.moveDown(this.activeViewEnum):this.disabledDatesService.isDateDisabled(candidate)||this.ngZone.run(()=>{this.value=cloneDate(candidate),this.onControlChange(cloneDate(candidate)),this.valueChange.emit(cloneDate(candidate)),this.cdr.markForCheck()}))}writeValue(candidate){this.verifyValue(candidate),this.focusedDate=dateInRange(cloneDate(candidate)||this.focusedDate,this.min,this.max),this.value=cloneDate(candidate),this.cdr.markForCheck()}registerOnChange(fn){this.onControlChange=fn}registerOnTouched(fn){this.onControlTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled,this.cdr.markForCheck()}validate(control){return this.minValidateFn(control)||this.maxValidateFn(control)}registerOnValidatorChange(fn){this.onValidatorChange=fn}activeCellTemplate(){switch(this.activeViewEnum){case CalendarViewEnum.month:return this.monthCellTemplate||this.cellTemplate;case CalendarViewEnum.year:return this.yearCellTemplate;case CalendarViewEnum.decade:return this.decadeCellTemplate;case CalendarViewEnum.century:return this.centuryCellTemplate;default:return null}}emitEvent(emitter,args){hasObservers(emitter)&&this.ngZone.run(()=>{emitter.emit(args)})}setClasses(element){this.renderer.addClass(element,"k-widget"),this.renderer.addClass(element,"k-calendar"),this.renderer.addClass(element,"k-calendar-infinite")}verifyChanges(){if(isDevMode()){if(this.min>this.max)throw new Error("The max value should be bigger than the min. See http://www.telerik.com/kendo-angular-ui/components/dateinputs/api/CalendarComponent/#toc-min and http://www.telerik.com/kendo-angular-ui/components/dateinputs/api/CalendarComponent/#toc-max.");if(this.bottomViewEnum>this.topViewEnum)throw new Error("The topView should be greater than bottomView. See http://www.telerik.com/kendo-angular-ui/components/dateinputs/api/CalendarComponent/#toc-bottomview and http://www.telerik.com/kendo-angular-ui/components/dateinputs/api/CalendarComponent/#toc-topview.")}}verifyValue(candidate){if(isDevMode()&&candidate&&!(candidate instanceof Date))throw new Error("The 'value' should be a valid JavaScript Date instance. Check http://www.telerik.com/kendo-angular-ui/components/dateinputs/calendar/#toc-using-with-json for possible resolution.")}bindEvents(){const element=this.element.nativeElement;this.domEvents.push(this.renderer.listen(element,"blur",this.handleBlur.bind(this)),this.renderer.listen(element,"focus",this.handleFocus.bind(this)),this.renderer.listen(element,"mousedown",fesm2015_preventDefault),this.renderer.listen(element,"click",this.handleClick.bind(this)),this.renderer.listen(element,"keydown",this.handleKeydown.bind(this)))}emitBlur(args){this.pickerService&&this.pickerService.onBlur.emit(args)}emitFocus(){this.pickerService&&this.pickerService.onFocus.emit()}handleBlur(args){this.isActive=!1,!this.pickerService&&fesm2015_requiresZoneOnBlur(this.control)?this.ngZone.run(()=>{this.onControlTouched(),this.emitBlur(args),this.cdr.markForCheck()}):(this.emitBlur(args),this.detectChanges())}handleFocus(){this.isActive=!0,NgZone.isInAngularZone()||this.detectChanges(),this.emitFocus()}handleClick(){this.isActive||(this.monthView.isScrolled()&&(this.focusedDate=cloneDate(this.focusedDate),this.detectChanges()),this.focus())}handleKeydown(args){const arrowKeyPressed=-1!==[Keys.ArrowUp,Keys.ArrowRight,Keys.ArrowDown,Keys.ArrowLeft].indexOf(args.keyCode);if(kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_isPresent(this.pickerService)&&arrowKeyPressed&&args.altKey)return;const candidate=dateInRange(this.navigator.move(this.focusedDate,this.navigator.action(args),this.activeViewEnum),this.min,this.max);isEqual(this.focusedDate,candidate)||(this.focusedDate=candidate,this.detectChanges(),args.preventDefault()),args.keyCode===Keys.Enter&&this.handleDateChange(this.focusedDate)}detectChanges(){this.destroyed||this.cdr.detectChanges()}emitSameDate(){this.pickerService&&this.pickerService.sameDateSelected.emit()}setAriaActivedescendant(){if(!kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_isPresent(this.element))return;const focusedCellId=this.cellUID+this.focusedDate.getTime();this.renderer.setAttribute(this.element.nativeElement,"aria-activedescendant",focusedCellId)}}return CalendarComponent.fac=function(t){return new(t||CalendarComponent)(directiveInject(fesm2015_BusViewService),directiveInject(fesm2015_CalendarDOMService),directiveInject(ElementRef),directiveInject(kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_NavigationService),directiveInject(Renderer2),directiveInject(ChangeDetectorRef),directiveInject(NgZone),directiveInject(Injector),directiveInject(fesm2015_ScrollSyncService),directiveInject(fesm2015_DisabledDatesService),directiveInject(fesm2015_PickerService,8))},CalendarComponent.cmp=defineComponent({type:CalendarComponent,selectors:[["kendo-calendar"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&(staticContentQuery(dirIndex,fesm2015_CellTemplateDirective,!0),staticContentQuery(dirIndex,fesm2015_MonthCellTemplateDirective,!0),staticContentQuery(dirIndex,fesm2015_YearCellTemplateDirective,!0),staticContentQuery(dirIndex,fesm2015_DecadeCellTemplateDirective,!0),staticContentQuery(dirIndex,fesm2015_CenturyCellTemplateDirective,!0),staticContentQuery(dirIndex,fesm2015_WeekNumberCellTemplateDirective,!0),staticContentQuery(dirIndex,fesm2015_HeaderTitleTemplateDirective,!0),staticContentQuery(dirIndex,fesm2015_NavigationItemTemplateDirective,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.cellTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.monthCellTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.yearCellTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.decadeCellTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.centuryCellTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.weekNumberTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.headerTitleTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.navigationItemTemplate=_t.first))},viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(fesm2015_NavigationComponent,!0),viewQuery(fesm2015_ViewListComponent,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.navigationView=_t.first),queryRefresh(_t=loadQuery())&&(ctx.monthView=_t.first))},hostVars:8,hostBindings:function(rf,ctx){2&rf&&(attribute("id",ctx.widgetId)("role",ctx.widgetRole)("tabindex",ctx.calendarTabIndex)("aria-disabled",ctx.ariaDisabled),classProp("k-week-number",ctx.weekNumber)("k-state-disabled",ctx.ariaDisabled))},inputs:{id:"id",rangeValidation:"rangeValidation",disabled:"disabled",tabindex:"tabindex",navigation:"navigation",activeView:"activeView",bottomView:"bottomView",topView:"topView",weekNumber:"weekNumber",focusedDate:"focusedDate",min:"min",max:"max",value:"value",tabIndex:"tabIndex",disabledDates:"disabledDates",cellTemplateRef:["cellTemplate","cellTemplateRef"],monthCellTemplateRef:["monthCellTemplate","monthCellTemplateRef"],yearCellTemplateRef:["yearCellTemplate","yearCellTemplateRef"],decadeCellTemplateRef:["decadeCellTemplate","decadeCellTemplateRef"],centuryCellTemplateRef:["centuryCellTemplate","centuryCellTemplateRef"],weekNumberTemplateRef:["weekNumberTemplate","weekNumberTemplateRef"],headerTitleTemplateRef:["headerTitleTemplate","headerTitleTemplateRef"],navigationItemTemplateRef:["navigationItemTemplate","navigationItemTemplateRef"]},outputs:{activeViewChange:"activeViewChange",activeViewDateChange:"activeViewDateChange",valueChange:"valueChange"},exportAs:["kendo-calendar"],features:[ProvidersFeature([fesm2015_BusViewService,CALENDAR_VALUE_ACCESSOR,CALENDAR_RANGE_VALIDATORS,KENDO_INPUT_PROVIDER,fesm2015_LocalizationService,fesm2015_DisabledDatesService,{provide:L10N_PREFIX,useValue:"kendo.calendar"},kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_NavigationService,fesm2015_ScrollSyncService]),NgOnChangesFeature],decls:4,vars:12,consts:[["kendoCalendarLocalizedMessages","",6,"today"],[3,"activeView","focusedDate","min","max","templateRef","valueChange","pageChange",4,"ngIf"],[3,"activeView","isActive","cellTemplateRef","headerTitleTemplateRef","weekNumberTemplateRef","cellUID","min","max","focusedDate","weekNumber","value","valueChange","activeDateChange","pageChange"],[3,"activeView","focusedDate","min","max","templateRef","valueChange","pageChange"]],template:function(rf,ctx){if(1&rf&&(elementContainerStart(0,0),i18nAttributes(1,kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c6),elementContainerEnd(),template(2,CalendarComponent_kendo_calendar_navigation_2_Template,1,5,"kendo-calendar-navigation",1),elementStart(3,"kendo-calendar-viewlist",2),listener("valueChange",(function($event){return ctx.handleDateChange($event)}))("activeDateChange",(function($event){return ctx.emitEvent(ctx.activeViewDateChange,$event)}))("pageChange",(function(){return ctx.onPageChange()})),elementEnd()),2&rf){var tmp_3_0;const currVal_3=null==(tmp_3_0=ctx.activeCellTemplate())?null:tmp_3_0.templateRef;advance(2),property("ngIf",ctx.navigation),advance(1),property("activeView",ctx.activeViewEnum)("isActive",ctx.isActive)("cellTemplateRef",currVal_3)("headerTitleTemplateRef",null==ctx.headerTitleTemplate?null:ctx.headerTitleTemplate.templateRef)("weekNumberTemplateRef",null==ctx.weekNumberTemplate?null:ctx.weekNumberTemplate.templateRef)("cellUID",ctx.cellUID)("min",ctx.min)("max",ctx.max)("focusedDate",ctx.focusedDate)("weekNumber",ctx.weekNumber)("value",ctx.value)}},directives:function(){return[fesm2015_CalendarLocalizedMessagesDirective,common_NgIf,fesm2015_ViewListComponent,fesm2015_NavigationComponent]},encapsulation:2,changeDetection:0}),CalendarComponent})();var Arrow=function(Arrow){return Arrow[Arrow.Up=0]="Up",Arrow[Arrow.Down=1]="Down",Arrow[Arrow.None=2]="None",Arrow}({});const DATE_PART_REGEXP=/year|month|<day>/,TIME_PART_REGEXP=/hour|minute|second|millisecond/,SHORT_PATTERN_LENGTH_REGEXP=/d|M|H|h|m|s/,unpadZero=value=>value.replace(/^0*/,"");class Mask{constructor(){this.symbols=""}}class fesm2015_KendoDate{constructor(intl,formatPlaceholder,format,value){if(this.intl=intl,this.formatPlaceholder=formatPlaceholder,this.format=format,this.year=!0,this.month=!0,this.date=!0,this.hours=!0,this.minutes=!0,this.seconds=!0,this.milliseconds=!0,this.leadingZero=null,this.monthNames=null,this.typedMonthPart="",this.value=getDate(new Date),this.knownParts="adHhmMsEy",this.symbols={E:"E",H:"H",M:"M",a:"a",d:"d",h:"h",m:"m",s:"s",y:"y"},this.monthNames=this.allFormatedMonths(),this.dayPeriods=this.allDayPeriods(),value)this.value=cloneDate(value);else{this.value=getDate(new Date);const sampleFormat=this.dateFormatString(this.value,this.format).symbols;for(let i=0;i<sampleFormat.length;i++)this.setExisting(sampleFormat[i],!1)}}hasValue(){return this.intl.splitDateFormat(this.format).reduce((a,p)=>a||"literal"!==p.type&&"dayperiod"!==p.type&&this.getExisting(p.pattern[0]),!1)}getDateObject(){for(let i=0;i<this.knownParts.length;i++)if(!this.getExisting(this.knownParts[i]))return null;return cloneDate(this.value)}getTextAndFormat(){return this.merge(this.intl.formatDate(this.value,this.format),this.dateFormatString(this.value,this.format))}getExisting(symbol){switch(symbol){case"y":return this.year;case"M":case"L":return this.month;case"d":return this.date;case"E":return this.date&&this.month&&this.year;case"h":case"H":return this.hours;case"m":return this.minutes;case"s":return this.seconds;default:return!0}}setExisting(symbol,value){switch(symbol){case"y":this.year=value,!1===value&&this.value.setFullYear(2e3);break;case"M":this.month=value,!1===value&&this.value.setMonth(0);break;case"d":this.date=value;break;case"h":case"H":this.hours=value;break;case"m":this.minutes=value;break;case"s":this.seconds=value;break;default:return}}modifyPart(symbol,offset){let newValue=cloneDate(this.value);switch(symbol){case"y":newValue.setFullYear(newValue.getFullYear()+offset);break;case"M":newValue=addMonths(this.value,offset);break;case"d":case"E":newValue.setDate(newValue.getDate()+offset);break;case"h":case"H":newValue.setHours(newValue.getHours()+offset);break;case"m":newValue.setMinutes(newValue.getMinutes()+offset);break;case"s":newValue.setSeconds(newValue.getSeconds()+offset);break;case"a":newValue.setHours(newValue.getHours()+12*offset)}newValue.getFullYear()>0&&(this.setExisting(symbol,!0),this.value=newValue)}parsePart(symbol,currentChar,resetSegmentValue){if(!currentChar)return this.resetLeadingZero(),this.setExisting(symbol,!1),{value:null,switchToNext:!1};let baseDate=this.intl.formatDate(this.value,this.format),dateParts=this.dateFormatString(this.value,this.format),baseFormat=dateParts.symbols,replaced=!1,prefix="",current="",suffix="";for(let i=0;i<baseDate.length;i++)baseFormat[i]===symbol?(current+=this.getExisting(symbol)?baseDate[i]:"0",replaced=!0):replaced?suffix+=baseDate[i]:prefix+=baseDate[i];let currentMaxLength=current.length-3,parsedDate=null;const month=this.matchMonth(currentChar),dayPeriod=this.matchDayPeriod(currentChar,symbol),isZeroCurrentChar="0"===currentChar,leadingZero=(this.leadingZero||{})[symbol]||0;isZeroCurrentChar?0!==parseInt(resetSegmentValue?currentChar:current+currentChar,10)||this.isAbbrMonth(dateParts.partMap,symbol)||this.incrementLeadingZero(symbol):this.resetLeadingZero();for(let i=Math.max(0,currentMaxLength);i<=current.length;i++){let middle=resetSegmentValue?currentChar:current.substring(i)+currentChar,middleNumber=parseInt(middle,10);if(parsedDate=this.intl.parseDate(prefix+middle+suffix,this.format),!parsedDate&&!isNaN(middleNumber)&&!isNaN(parseInt(currentChar,10))){if("M"===symbol&&!month){const monthNumber=middleNumber-1;monthNumber>-1&&monthNumber<12&&(parsedDate=cloneDate(this.value),parsedDate.setMonth(monthNumber),parsedDate.getMonth()!==monthNumber&&(parsedDate=lastDayOfMonth(addMonths(parsedDate,-1))))}"y"===symbol&&(parsedDate=create_date_createDate(parseInt(middle,10),this.month?this.value.getMonth():0,this.date?this.value.getDate():1,this.hours?this.value.getHours():0,this.minutes?this.value.getMinutes():0,this.seconds?this.value.getSeconds():0,this.milliseconds?this.value.getMilliseconds():0),this.date&&parsedDate.getDate()!==this.value.getDate()&&(parsedDate=lastDayOfMonth(addMonths(parsedDate,-1))))}if(parsedDate){const patternValue=this.partPattern(dateParts.partMap,symbol).pattern,peekDate=this.intl.parseDate(`${prefix}${this.peek(middle,patternValue)}${suffix}`,this.format),patternLength=this.patternLength(patternValue)||patternValue.length,patternSatisfied=leadingZero+(unpadZero(middle)||currentChar).length>=patternLength,switchToNext=null===peekDate||patternSatisfied;return this.value=parsedDate,this.setExisting(symbol,!0),{value:this.value,switchToNext:switchToNext}}}return month&&(parsedDate=this.intl.parseDate(prefix+month+suffix,this.format),parsedDate)?(this.value=parsedDate,this.setExisting(symbol,!0),{value:this.value,switchToNext:!1}):dayPeriod&&(parsedDate=this.intl.parseDate(prefix+dayPeriod+suffix,this.format),parsedDate)?(this.value=parsedDate,{value:this.value,switchToNext:!0}):(isZeroCurrentChar&&this.setExisting(symbol,!1),{value:null,switchToNext:!1})}resetLeadingZero(){const hasLeadingZero=null!==this.leadingZero;return this.setLeadingZero(null),hasLeadingZero}setLeadingZero(leadingZero){this.leadingZero=leadingZero}incrementLeadingZero(symbol){const leadingZero=this.leadingZero||{};leadingZero[symbol]=(leadingZero[symbol]||0)+1,this.leadingZero=leadingZero}isAbbrMonth(parts,symbol){const pattern=this.partPattern(parts,symbol);return"month"===pattern.type&&pattern.names}partPattern(parts,symbol){return parts.filter(part=>-1!==part.pattern.indexOf(symbol))[0]}peek(value,pattern){const peekValue=unpadZero(value)+"0";return(length=>new Array(Math.max(length,0)).fill("0").join(""))(pattern.length-peekValue.length)+peekValue}matchMonth(typedChar){if(this.typedMonthPart+=typedChar.toLowerCase(),!this.monthNames)return"";for(;this.typedMonthPart.length>0;){for(let i=0;i<this.monthNames.length;i++)if(0===this.monthNames[i].toLowerCase().indexOf(this.typedMonthPart))return this.monthNames[i];const monthAsNum=parseInt(this.typedMonthPart,10);if(monthAsNum>=1&&monthAsNum<=12&&monthAsNum.toString()===this.typedMonthPart)return this.monthNames[monthAsNum-1];this.typedMonthPart=this.typedMonthPart.substring(1,this.typedMonthPart.length)}return""}matchDayPeriod(typedChar,symbol){const lowerChart=String(typedChar).toLowerCase();if("a"===symbol&&this.dayPeriods){if(this.dayPeriods.am.toLowerCase().startsWith(lowerChart))return this.dayPeriods.am;if(this.dayPeriods.pm.toLowerCase().startsWith(lowerChart))return this.dayPeriods.pm}return""}allFormatedMonths(){const dateFormatParts=this.intl.splitDateFormat(this.format);for(let i=0;i<dateFormatParts.length;i++)if("month"===dateFormatParts[i].type&&dateFormatParts[i].names)return this.intl.dateFormatNames(dateFormatParts[i].names);return null}allDayPeriods(){const dateFormatParts=this.intl.splitDateFormat(this.format);for(let i=0;i<dateFormatParts.length;i++)if("dayperiod"===dateFormatParts[i].type&&dateFormatParts[i].names)return this.intl.dateFormatNames(dateFormatParts[i].names);return null}patternLength(pattern){return"y"===pattern[0]?4:SHORT_PATTERN_LENGTH_REGEXP.test(pattern)?2:0}dateFormatString(date,format){const dateFormatParts=this.intl.splitDateFormat(format),parts=[],partMap=[];for(let i=0;i<dateFormatParts.length;i++){let partLength=this.intl.formatDate(date,{pattern:dateFormatParts[i].pattern}).length;for(;partLength>0;)parts.push(this.symbols[dateFormatParts[i].pattern[0]]||"_"),partMap.push(dateFormatParts[i]),partLength--}const returnValue=new Mask;return returnValue.symbols=parts.join(""),returnValue.partMap=partMap,returnValue}merge(text,mask){let resultText="",resultFormat="",format=mask.symbols;for(let r=format.length-1;r>=0;r--)if(-1===this.knownParts.indexOf(format[r])||this.getExisting(format[r]))resultText=text[r]+resultText,resultFormat=format[r]+resultFormat;else{const currentSymbol=format[r];for(;r>=0&&currentSymbol===format[r];)r--;for(r++,resultText=this.leadingZero&&this.leadingZero[currentSymbol]?"0"+resultText:this.dateFieldName(mask.partMap[r])+resultText;resultFormat.length<resultText.length;)resultFormat=format[r]+resultFormat}return[resultText,resultFormat]}dateFieldName(part){const formatPlaceholder=this.formatPlaceholder||"wide";return formatPlaceholder[part.type]?formatPlaceholder[part.type]:"formatPattern"===formatPlaceholder?part.pattern:this.intl.dateFieldName(Object.assign(part,{nameType:formatPlaceholder}))}}let fesm2015_DateInputComponent=(()=>{class DateInputComponent{constructor(cdr,intl,renderer,element,ngZone,injector,localization,pickerService){this.cdr=cdr,this.intl=intl,this.renderer=renderer,this.element=element,this.ngZone=ngZone,this.injector=injector,this.localization=localization,this.pickerService=pickerService,this.focusableId="k-"+guid(),this.disabled=!1,this.readonly=!1,this.title="",this.tabindex=0,this.role="spinbutton",this.ariaReadOnly=!1,this.format="d",this.placeholder=null,this.rangeValidation=!0,this.autoCorrect=!1,this.spinners=!1,this.isPopupOpen=!1,this.hasPopup=!1,this.valueChange=new core_EventEmitter,this.valueUpdate=new core_EventEmitter,this.onFocus=new core_EventEmitter,this.onBlur=new core_EventEmitter,this.arrow=Arrow,this.arrowDirection=Arrow.None,this.formatSections={date:!1,time:!1},this.hasMousedown=!1,this.focusedPriorToMousedown=!1,this.currentValue="",this.currentFormat="",this.backspace=!1,this.resetSegmentValue=!0,this.minValidateFn=dist_fesm2015_noop,this.maxValidateFn=dist_fesm2015_noop,this._value=null,this._active=!1,this.kendoDate=null,this.paste=!1,this.domEvents=[],this.onControlChange=dist_fesm2015_noop,this.onControlTouched=dist_fesm2015_noop,this.onValidatorChange=dist_fesm2015_noop,this.symbolsMap=this.dateSymbolMap(),this.updateFormatSections(),this.pickerService&&(this.pickerService.input=this)}set tabIndex(tabIndex){this.tabindex=tabIndex}get tabIndex(){return this.tabindex}set value(value){this.verifyValue(value),this.autoCorrect&&!isInRange(value,this.min,this.max)||(this._value=cloneDate(value),this.valueUpdate.emit(cloneDate(value)))}get value(){return this._value}get wrapperClass(){return!0}get disabledClass(){return this.disabled}get inputElement(){return this.dateInput?this.dateInput.nativeElement:null}get inputValue(){return(this.inputElement||{}).value||""}get isActive(){return this._active}set isActive(value){if(this._active=value,this.wrap&&!kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_isPresent(this.pickerService)){const element=this.wrap.nativeElement;value?this.renderer.addClass(element,"k-state-focused"):this.renderer.removeClass(element,"k-state-focused")}}isEmpty(){return!this.currentValue||!String(this.currentValue).trim()}containsElement(element){return Boolean(fesm2015_closest(element,node=>node===this.element.nativeElement))}ngOnChanges(changes){this.verifyRange(),(changes.min||changes.max||changes.rangeValidation)&&(this.minValidateFn=this.rangeValidation?minValidator(this.min):dist_fesm2015_noop,this.maxValidateFn=this.rangeValidation?maxValidator(this.max):dist_fesm2015_noop,this.onValidatorChange()),changes.format&&(this.symbolsMap=this.dateSymbolMap(),this.updateFormatSections());const isEqualToKendoDate=this.kendoDate&&isEqual(this.value,this.kendoDate.getDateObject());(changes.format||!isEqualToKendoDate||changes.placeholder)&&(this.kendoDate=this.getKendoDate(this.value),this.updateElementValue(this.isActive))}ngOnDestroy(){this.intlSubscription&&this.intlSubscription.unsubscribe(),this.pickerService&&(this.pickerService.input=null),this.domEvents.forEach(unbindCallback=>unbindCallback())}validate(control){return this.minValidateFn(control)||this.maxValidateFn(control)}registerOnValidatorChange(fn){this.onValidatorChange=fn}ngOnInit(){this.kendoDate=this.getKendoDate(this.value),this.updateElementValue(),this.intlSubscription=this.intl.changes.subscribe(this.intlChange.bind(this)),this.control=this.injector.get(NgControl,null),this.element&&(this.renderer.removeAttribute(this.element.nativeElement,"tabindex"),this.ngZone.runOutsideAngular(()=>{this.bindEvents()}))}setDisabledState(isDisabled){this.disabled=isDisabled,this.cdr.markForCheck()}writeValue(value){this.verifyValue(value),this.kendoDate=this.getKendoDate(value),this.value=cloneDate(value),this.updateElementValue(this.isActive)}triggerChange(){const value=this.kendoDate.getDateObject();+value!=+this.value&&(this.value=cloneDate(value),this.notify())}notify(){this.ngZone.run(()=>{this.onControlChange(cloneDate(this.value)),this.valueChange.emit(cloneDate(this.value))})}registerOnChange(fn){this.onControlChange=fn}registerOnTouched(fn){this.onControlTouched=fn}focus(){const input=this.inputElement;input&&(input.focus(),this.selectDateSegment(this.currentFormat[0]))}blur(){const input=this.inputElement;input&&input.blur()}handleButtonClick(offset){this.arrowDirection=Arrow.None,this.modifyDateSegmentValue(offset)}modifyDateSegmentValue(offset){const caret=this.caret(),symbol=this.currentFormat[caret[0]];this.kendoDate.modifyPart(symbol,offset*((this.steps||{})[this.symbolsMap[symbol]]||1)),this.putDateInRange(),this.updateElementValue(this.isActive),this.triggerChange(),this.selectDateSegment(symbol)}switchDateSegment(offset){const caret=this.caret();if(this.kendoDate.resetLeadingZero()&&this.updateElementValue(this.isActive),caret[0]<caret[1]&&this.currentFormat[caret[0]]!==this.currentFormat[caret[1]-1])return this.selectNearestSegment(offset>0?caret[0]:caret[1]-1),this.resetSegmentValue=!0,!0;const previousFormatSymbol=this.currentFormat[caret[0]];let a=caret[0]+offset;for(;a>0&&a<this.currentFormat.length&&(this.currentFormat[a]===previousFormatSymbol||"_"===this.currentFormat[a]);)a+=offset;if("_"===this.currentFormat[a])return!1;let b=a;for(;b>=0&&b<this.currentFormat.length&&this.currentFormat[b]===this.currentFormat[a];)b+=offset;return a>b&&(b+1!==caret[0]||a+1!==caret[1])?(this.caret(b+1,a+1),this.resetSegmentValue=!0,!0):a<b&&(a!==caret[0]||b!==caret[1])&&(this.caret(a,b),this.resetSegmentValue=!0,!0)}selectDateSegment(symbol){let begin=-1,end=0;for(let i=0;i<this.currentFormat.length;i++)this.currentFormat[i]===symbol&&(end=i+1,-1===begin&&(begin=i));begin<0&&(begin=0),this.caret(0,0),this.caret(begin,end)}handleClick(){if(this.hasMousedown=!1,this.isActive){const selectionPresent=this.inputElement.selectionStart!==this.inputElement.selectionEnd,placeholderToggled=kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_isPresent(this.placeholder)&&!this.kendoDate.hasValue()&&!this.focusedPriorToMousedown,index=!selectionPresent&&placeholderToggled?0:this.caret()[0];this.selectNearestSegment(index)}}handleDragAndDrop(args){args.preventDefault()}handleMousedown(){this.hasMousedown=!0,this.focusedPriorToMousedown=this.isActive}handleFocus(args){this.isActive=!0,this.updateElementValue(),this.hasMousedown||this.caret(0,this.inputValue.length),this.hasMousedown=!1,hasObservers(this.onFocus)?this.ngZone.run(()=>{this.emitFocus(args)}):this.emitFocus(args)}handleBlur(args){this.isActive=!1,this.resetSegmentValue=!0,this.kendoDate.resetLeadingZero(),this.updateElementValue(),hasObservers(this.onBlur)||fesm2015_requiresZoneOnBlur(this.control)?this.ngZone.run(()=>{this.onControlTouched(),this.emitBlur(args),this.cdr.markForCheck()}):this.emitBlur(args)}getKendoDate(value){const{leadingZero:leadingZero}=this.kendoDate||{}||null,kendoDate=new fesm2015_KendoDate(this.intl,this.formatPlaceholder,this.format,value);return kendoDate.setLeadingZero(this.isActive?leadingZero:null),kendoDate}dateSymbolMap(){return this.intl.splitDateFormat(this.format).reduce((map$$1,part)=>(map$$1[part.pattern[0]]=part.type,map$$1),{})}updateElementValue(isActive){const start=this.caret()[0],texts=this.kendoDate.getTextAndFormat(),showPlaceholder=!this.isActive&&kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_isPresent(this.placeholder)&&!this.kendoDate.hasValue(),input=this.inputElement;this.currentFormat=texts[1],this.currentValue=showPlaceholder?"":texts[0],this.renderer.setProperty(input,"value",this.currentValue),input.placeholder!==this.placeholder&&this.renderer.setProperty(input,"placeholder",this.placeholder),isActive&&this.selectNearestSegment(start)}caret(start,end=start){const isPosition=void 0!==start;let returnValue=[start,start];const element=this.inputElement;if(!isPosition||!this.disabled&&!this.readonly){try{void 0!==element.selectionStart&&(isPosition&&(isDocumentAvailable()&&document.activeElement!==element&&element.focus(),element.setSelectionRange(start,end)),returnValue=[element.selectionStart,element.selectionEnd])}catch(e){returnValue=[]}return returnValue}}selectNearestSegment(index){for(let i=index,j=index-1;i<this.currentFormat.length||j>=0;i++,j--){if(i<this.currentFormat.length&&"_"!==this.currentFormat[i])return void this.selectDateSegment(this.currentFormat[i]);if(j>=0&&"_"!==this.currentFormat[j])return void this.selectDateSegment(this.currentFormat[j])}}verifyRange(){if(isDevMode()&&!isValidRange(this.min,this.max))throw new Error("The max value should be bigger than the min. See http://www.telerik.com/kendo-angular-ui/components/dateinputs/api/DateInputComponent/#toc-min and http://www.telerik.com/kendo-angular-ui/components/dateinputs/api/DateInputComponent/#toc-max.")}verifyValue(value){if(isDevMode()&&value&&!(value instanceof Date))throw new Error("The 'value' should be a valid JavaScript Date instance. Check http://www.telerik.com/kendo-angular-ui/components/dateinputs/dateinput/#toc-using-with-json for possible resolution.")}putDateInRange(){const currentDate=this.kendoDate.getDateObject(),candidate=dateInRange(currentDate,this.min,this.max);this.autoCorrect&&!isEqual(currentDate,candidate)&&(this.kendoDate=this.getKendoDate(candidate))}updateFormatSections(){this.formatSections=this.intl.splitDateFormat(this.format).reduce(({date:date,time:time},p)=>({date:date||DATE_PART_REGEXP.test(p.type),time:time||TIME_PART_REGEXP.test(p.type)}),{date:!1,time:!1})}intlChange(){this.updateFormatSections(),this.kendoDate=this.getKendoDate(this.value),this.updateElementValue(this.isActive)}updateOnPaste(){const value=this.intl.parseDate(this.inputValue,this.format)||this.value,notify=+value!=+this.value;this.writeValue(value),notify&&this.notify()}bindEvents(){const element=this.element.nativeElement,mousewheelHandler=this.handleMouseWheel.bind(this);this.domEvents.push(this.renderer.listen(element,"DOMMouseScroll",mousewheelHandler),this.renderer.listen(element,"mousewheel",mousewheelHandler),this.renderer.listen(element,"keydown",this.handleKeydown.bind(this)),this.renderer.listen(element,"paste",this.handlePaste.bind(this)),this.renderer.listen(element,"input",this.handleInput.bind(this)))}handleMouseWheel(event){this.disabled||this.readonly||!this.isActive||((event=window.event||event).shiftKey?this.switchDateSegment((event.wheelDelta||-event.detail)>0?-1:1):this.modifyDateSegmentValue((event.wheelDelta||-event.detail)>0?1:-1),event.returnValue=!1,event.preventDefault&&event.preventDefault(),event.stopPropagation&&event.stopPropagation())}handlePaste(){this.paste=!0}handleKeydown(event){if(!(this.disabled||this.readonly||event.altKey||event.ctrlKey||event.metaKey))if(event.keyCode!==Keys.Tab)if(event.keyCode!==Keys.Backspace){switch(event.keyCode){case Keys.ArrowDown:this.modifyDateSegmentValue(-1);break;case Keys.ArrowUp:this.modifyDateSegmentValue(1);break;case Keys.ArrowRight:this.switchDateSegment(1);break;case Keys.ArrowLeft:this.switchDateSegment(-1);break;case Keys.Home:this.selectNearestSegment(0);break;case Keys.End:this.selectNearestSegment(this.inputValue.length);break;default:return}event.preventDefault()}else this.backspace=!0;else this.switchDateSegment(event.shiftKey?-1:1)&&event.preventDefault()}handleInput(){if(this.disabled||this.readonly)return;if(this.paste)return this.updateOnPaste(),void(this.paste=!1);const diff=((oldTextOrigin,oldFormat,newTextOrigin,caret)=>{const oldIndex=caret+oldTextOrigin.length-newTextOrigin.length,oldTextSeparator=oldTextOrigin[oldIndex],oldText=oldTextOrigin.substring(0,caret+oldTextOrigin.length-newTextOrigin.length),newText=newTextOrigin.substring(0,caret),diff=[];if(oldText===newText&&caret>0)return diff.push([oldFormat[caret-1],newText[caret-1]]),diff;if(0===oldText.indexOf(newText)&&(0===newText.length||oldFormat[newText.length-1]!==oldFormat[newText.length])){let deletedSymbol="";1===newText.length&&diff.push([oldFormat[0],newText[0]]);for(let i=newText.length;i<oldText.length;i++)oldFormat[i]!==deletedSymbol&&"_"!==oldFormat[i]&&(deletedSymbol=oldFormat[i],diff.push([deletedSymbol,""]));return diff}if(0===newText.indexOf(oldText)||"_"===oldFormat[caret-1]){let symbol=oldFormat[0];for(let i=Math.max(0,oldText.length-1);i<oldFormat.length;i++)if("_"!==oldFormat[i]){symbol=oldFormat[i];break}return[[symbol,newText[caret-1]]]}return" "===newText[newText.length-1]||newText[newText.length-1]===oldTextSeparator&&"_"===oldFormat[oldIndex]?[[oldFormat[caret-1],"_"]]:[[oldFormat[caret-1],newText[caret-1]]]})(this.currentValue,this.currentFormat,this.inputValue,this.caret()[0]),navigationOnly=1===diff.length&&"_"===diff[0][1];let switchPart=!1;if(!navigationOnly){let parsedPart;for(let i=0;i<diff.length;i++)parsedPart=this.kendoDate.parsePart(diff[i][0],diff[i][1],this.resetSegmentValue),switchPart=parsedPart.switchToNext;const candidate=this.kendoDate.getDateObject();this.value&&candidate&&!this.formatSections.date&&(this.kendoDate=this.getKendoDate(setTime(this.value,candidate)))}this.resetSegmentValue=!1,this.putDateInRange(),this.updateElementValue(this.isActive),this.triggerChange(),diff.length&&"_"!==diff[0][0]&&this.selectDateSegment(diff[0][0]),(switchPart||navigationOnly)&&this.switchDateSegment(1),this.backspace&&this.switchDateSegment(-1),this.backspace=!1}emitFocus(args){this.onFocus.emit(),this.pickerService&&this.pickerService.onFocus.emit(args)}emitBlur(args){this.onBlur.emit(),this.pickerService&&this.pickerService.onBlur.emit(args)}}return DateInputComponent.fac=function(t){return new(t||DateInputComponent)(directiveInject(ChangeDetectorRef),directiveInject(fesm2015_IntlService),directiveInject(Renderer2),directiveInject(ElementRef),directiveInject(NgZone),directiveInject(Injector),directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_PickerService,8))},DateInputComponent.cmp=defineComponent({type:DateInputComponent,selectors:[["kendo-dateinput"]],viewQuery:function(rf,ctx){var _t;1&rf&&(staticViewQuery(_ivy_ngcc_dist_fesm2015_c7,!0),viewQuery(_ivy_ngcc_dist_fesm2015_c8,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.dateInput=_t.first),queryRefresh(_t=loadQuery())&&(ctx.wrap=_t.first))},hostVars:6,hostBindings:function(rf,ctx){2&rf&&classProp("k-widget",ctx.wrapperClass)("k-dateinput",ctx.wrapperClass)("k-state-disabled",ctx.disabledClass)},inputs:{focusableId:"focusableId",disabled:"disabled",readonly:"readonly",title:"title",tabindex:"tabindex",role:"role",ariaReadOnly:"ariaReadOnly",format:"format",placeholder:"placeholder",rangeValidation:"rangeValidation",autoCorrect:"autoCorrect",spinners:"spinners",isPopupOpen:"isPopupOpen",hasPopup:"hasPopup",tabIndex:"tabIndex",value:"value",formatPlaceholder:"formatPlaceholder",steps:"steps",max:"max",min:"min"},outputs:{valueChange:"valueChange",valueUpdate:"valueUpdate",onFocus:"focus",onBlur:"blur"},exportAs:["kendo-dateinput"],features:[ProvidersFeature([{provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>DateInputComponent),multi:!0},{provide:NG_VALIDATORS,useExisting:forwardRef(()=>DateInputComponent),multi:!0},{provide:L10N_PREFIX,useValue:"kendo.dateinput"},{provide:KendoInput,useExisting:forwardRef(()=>DateInputComponent)},fesm2015_LocalizationService]),NgOnChangesFeature],decls:7,vars:21,consts:[["kendoDateInputLocalizedMessages","",6,"increment","decrement"],[1,"k-dateinput-wrap"],["wrap",""],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"k-input",3,"id","title","tabindex","disabled","readonly","placeholder","kendoEventsOutsideAngular","scope"],["dateInput",""],["class","k-select",3,"mousedown",4,"ngIf"],[1,"k-select",3,"mousedown"],[1,"k-link","k-link-increase",3,"title","mousedown","mouseleave","click"],[1,"k-icon","k-i-arrow-n"],[1,"k-link","k-link-decrease",3,"title","click","mousedown","mouseleave"],[1,"k-icon","k-i-arrow-s"]],template:function(rf,ctx){1&rf&&(elementContainerStart(0,0),i18nAttributes(1,dist_fesm2015_c13),elementContainerEnd(),elementStart(2,"span",1,2),element(4,"input",3,4),template(6,DateInputComponent_span_6_Template,5,8,"span",5),elementEnd()),2&rf&&(advance(4),property("id",ctx.focusableId)("title",ctx.title)("tabindex",ctx.tabindex)("disabled",ctx.disabled)("readonly",ctx.readonly)("placeholder",ctx.placeholder)("kendoEventsOutsideAngular",pureFunction7(13,dist_fesm2015_c14,ctx.handleClick,ctx.handleFocus,ctx.handleMousedown,ctx.handleMousedown,ctx.handleDragAndDrop,ctx.handleDragAndDrop,ctx.handleBlur))("scope",ctx),attribute("role",ctx.role)("aria-readonly",ctx.ariaReadOnly)("aria-expanded",ctx.isPopupOpen)("aria-haspopup",ctx.hasPopup),advance(2),property("ngIf",ctx.spinners))},directives:function(){return[fesm2015_DateInputLocalizedMessagesDirective,fesm2015_EventsOutsideAngularDirective,common_NgIf]},encapsulation:2,changeDetection:0}),DateInputComponent})();class kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_PreventableEvent{constructor(){this.prevented=!1}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}const fesm2015_TOUCH_ENABLED=new InjectionToken("dateinputs-touch-enabled");let fesm2015_DatePickerComponent=(()=>{class DatePickerComponent{constructor(zone,localization,cdr,popupService,element,renderer,injector,pickerService,disabledDatesService,touchEnabled$$1){this.zone=zone,this.localization=localization,this.cdr=cdr,this.popupService=popupService,this.element=element,this.renderer=renderer,this.injector=injector,this.pickerService=pickerService,this.disabledDatesService=disabledDatesService,this.touchEnabled=touchEnabled$$1,this.focusableId="k-"+guid(),this.activeView=CalendarViewEnum[CalendarViewEnum.month],this.bottomView=CalendarViewEnum[CalendarViewEnum.month],this.topView=CalendarViewEnum[CalendarViewEnum.century],this.disabled=!1,this.readonly=!1,this.readOnlyInput=!1,this.navigation=!0,this.min=cloneDate(MIN_DATE),this.max=cloneDate(MAX_DATE),this.focusedDate=null,this.format="d",this.placeholder=null,this.tabindex=0,this.title="",this.rangeValidation=!0,this.disabledDatesValidation=!0,this.weekNumber=!1,this.valueChange=new core_EventEmitter,this.onFocus=new core_EventEmitter,this.onBlur=new core_EventEmitter,this.open=new core_EventEmitter,this.close=new core_EventEmitter,this.wrapperClasses=!0,this.popupUID=guid(),this._popupSettings={animate:!0},this._show=!1,this._value=null,this._active=!1,this.onControlChange=dist_fesm2015_noop,this.onControlTouched=dist_fesm2015_noop,this.onValidatorChange=dist_fesm2015_noop,this.minValidateFn=dist_fesm2015_noop,this.maxValidateFn=dist_fesm2015_noop,this.disabledDatesValidateFn=dist_fesm2015_noop,this.resolvedPromise=Promise.resolve(null),this.domEvents=[],this.pickerSubscriptions=this.pickerService.onFocus.subscribe(this.handleFocus.bind(this)),this.pickerSubscriptions.add(this.pickerService.onBlur.subscribe(this.handleBlur.bind(this))),this.pickerSubscriptions.add(this.pickerService.sameDateSelected.subscribe(this.handleSameSelection.bind(this)))}set cellTemplateRef(template){this.cellTemplate=template}set monthCellTemplateRef(template){this.monthCellTemplate=template}set yearCellTemplateRef(template){this.yearCellTemplate=template}set decadeCellTemplateRef(template){this.decadeCellTemplate=template}set centuryCellTemplateRef(template){this.centuryCellTemplate=template}set weekNumberTemplateRef(template){this.weekNumberTemplate=template}set headerTitleTemplateRef(template){this.headerTitleTemplate=template}set navigationItemTemplateRef(template){this.navigationItemTemplate=template}set popupSettings(settings){this._popupSettings=Object.assign({},{animate:!0},settings)}get popupSettings(){return this._popupSettings}set value(value){this.verifyValue(value),this._value=cloneDate(value)}get value(){return this._value}set tabIndex(tabIndex){this.tabindex=tabIndex}get tabIndex(){return this.tabindex}set disabledDates(value){this._disabledDates=value,this.disabledDatesService.initialize(value)}get disabledDates(){return this._disabledDates}get disabledClass(){return this.disabled}get inputRole(){return this.readOnlyInput?"listbox":"spinbutton"}get isActive(){return this._active}set isActive(value){if(this._active=value,!this.wrapper)return;const element=this.wrapper.nativeElement;value?this.renderer.addClass(element,"k-state-focused"):this.renderer.removeClass(element,"k-state-focused")}get show(){return this._show}set show(show){show&&(this.disabled||this.readonly)||(show||this._show&&hasObservers(this.close)?this.zone.run(()=>{this.togglePopup(show)}):this.togglePopup(show))}isEmpty(){return!this.value&&this.input.isEmpty()}ngOnInit(){this.localizationChangeSubscription=this.localization.changes.subscribe(()=>this.cdr.markForCheck()),this.control=this.injector.get(NgControl,null),this.element&&(this.renderer.removeAttribute(this.element.nativeElement,"tabindex"),this.zone.runOutsideAngular(()=>{this.bindEvents()}))}ngOnChanges(changes){var isDateDisabled;this.verifySettings(),(changes.min||changes.max||changes.rangeValidation||changes.disabledDatesValidation||changes.disabledDates)&&(this.minValidateFn=this.rangeValidation?minValidator(this.min):dist_fesm2015_noop,this.maxValidateFn=this.rangeValidation?maxValidator(this.max):dist_fesm2015_noop,this.disabledDatesValidateFn=this.disabledDatesValidation?(isDateDisabled=this.disabledDatesService.isDateDisabled,control=>isDateDisabled&&control.value&&isDateDisabled(control.value)?{disabledDate:!0}:null):dist_fesm2015_noop,this.onValidatorChange())}ngOnDestroy(){this.isActive=!1,this.show=!1,this.localizationChangeSubscription&&this.localizationChangeSubscription.unsubscribe(),this.windowBlurSubscription&&this.windowBlurSubscription.unsubscribe(),this.domEvents.forEach(unbindCallback=>unbindCallback()),this.pickerSubscriptions.unsubscribe()}get isOpen(){return this.show}writeValue(value){this.verifyValue(value),this.value=cloneDate(value),this.cdr.markForCheck(),!value&&this.input&&(this.input.placeholder=this.placeholder,this.input.writeValue(value))}registerOnChange(fn){this.onControlChange=fn}registerOnTouched(fn){this.onControlTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled,this.cdr.markForCheck()}validate(control){return this.minValidateFn(control)||this.maxValidateFn(control)||this.disabledDatesValidateFn(control)}registerOnValidatorChange(fn){this.onValidatorChange=fn}focus(){this.input.focus()}blur(){(this.calendar||this.input).blur()}toggle(show){this.disabled||this.readonly||this.resolvedPromise.then(()=>{this._toggle(void 0===show?!this.show:show)})}handleIconClick(event){this.disabled||this.readonly||(event.preventDefault(),this.focusInput(),this.handleFocus(),this.show=!this.show,this.cdr.markForCheck())}handleMousedown(args){args.preventDefault()}handleChange(value){this.cdr.markForCheck(),this.focusInput(),this.value=value,this.show=!1,this.onControlChange(cloneDate(value)),this.valueChange.emit(cloneDate(value))}handleInputChange(value){this.handleChange(this.input.formatSections.time?value:this.mergeTime(value))}get popupClasses(){return["k-calendar-container","k-group","k-reset"].concat(this.popupSettings.popupClass||[])}get appendTo(){const{appendTo:appendTo}=this.popupSettings;if(appendTo&&"root"!==appendTo)return"component"===appendTo?this.container:appendTo}get input(){return this.pickerService.input}get calendar(){return this.pickerService.calendar}mergeTime(value){return this.value&&value?setTime(value,this.value):value}handleKeydown(e){const{altKey:altKey,keyCode:keyCode}=e;keyCode===Keys.Escape&&(this.show=!1),altKey&&(keyCode!==Keys.ArrowDown||this.show||(this.show=!0),keyCode===Keys.ArrowUp&&(this.show=!1)),keyCode===Keys.Tab&&this.show&&this.calendar.isActive&&(this.input.focus(),this.show=!1)}togglePopup(show){const event=new kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_PreventableEvent;!this._show&&show?this.open.emit(event):this._show&&!show&&this.close.emit(event),event.isDefaultPrevented()||(this._toggle(show),this.toggleFocus())}_toggle(show){if(this._show=show,this.popupRef&&(this.popupRef.close(),this.popupRef=null,this.subscription.unsubscribe()),this._show){const direction=this.localization.rtl?"right":"left";this.popupRef=this.popupService.open({anchor:this.wrapper,anchorAlign:{vertical:"bottom",horizontal:direction},animate:this.popupSettings.animate,appendTo:this.appendTo,content:this.popupTemplate,popupAlign:{vertical:"top",horizontal:direction},popupClass:this.popupClasses,positionMode:"absolute"}),this.popupRef.popupElement.setAttribute("id",this.popupUID),this.subscription=this.popupRef.popupAnchorViewportLeave.subscribe(()=>this.show=!1)}}focusInput(){this.touchEnabled||this.input.focus()}toggleFocus(){this.isActive&&(this.show?(this.calendar||this.cdr.detectChanges(),this.calendar&&this.calendar.focus()):this.touchEnabled?this.input.isActive||this.handleBlur():this.input.focus())}verifySettings(){if(isDevMode()&&!isValidRange(this.min,this.max))throw new Error("The max value should be bigger than the min. See http://www.telerik.com/kendo-angular-ui/components/dateinputs/api/DatePickerComponent/#toc-min and http://www.telerik.com/kendo-angular-ui/components/dateinputs/api/DatePickerComponent/#toc-max.")}verifyValue(value){if(isDevMode()&&value&&!(value instanceof Date))throw new Error("The 'value' should be a valid JavaScript Date instance. Check http://www.telerik.com/kendo-angular-ui/components/dateinputs/datepicker/#toc-using-with-json for possible resolution.")}bindEvents(){this.domEvents.push(this.renderer.listen(this.element.nativeElement,"keydown",this.handleKeydown.bind(this))),"undefined"!=typeof window&&(this.windowBlurSubscription=fromEvent(window,"blur").subscribe(this.handleWindowBlur.bind(this)))}handleFocus(){this.isActive||(this.isActive=!0,hasObservers(this.onFocus)&&this.zone.run(()=>{this.onFocus.emit()}))}handleWindowBlur(){this.isOpen&&(this.show=!1)}handleBlur(args){const currentTarget=args&&(args.relatedTarget||document.activeElement);currentTarget&&(this.input.containsElement(currentTarget)||this.calendar&&this.calendar.containsElement(currentTarget))||(hasObservers(this.onBlur)||this.show&&hasObservers(this.close)||fesm2015_requiresZoneOnBlur(this.control)?this.zone.run(()=>{this.blurComponent(),this.cdr.markForCheck()}):this.blurComponent())}blurComponent(){this.isActive=!1,this.show=!1,this.cdr.detectChanges(),this.onControlTouched(),this.onBlur.emit()}handleSameSelection(){this.show&&(this.focusInput(),this.show=!1)}}return DatePickerComponent.fac=function(t){return new(t||DatePickerComponent)(directiveInject(NgZone),directiveInject(fesm2015_LocalizationService),directiveInject(ChangeDetectorRef),directiveInject(fesm2015_PopupService),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(Injector),directiveInject(fesm2015_PickerService),directiveInject(fesm2015_DisabledDatesService),directiveInject(fesm2015_TOUCH_ENABLED,8))},DatePickerComponent.cmp=defineComponent({type:DatePickerComponent,selectors:[["kendo-datepicker"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&(contentQuery(dirIndex,fesm2015_CellTemplateDirective,!0),contentQuery(dirIndex,fesm2015_MonthCellTemplateDirective,!0),contentQuery(dirIndex,fesm2015_YearCellTemplateDirective,!0),contentQuery(dirIndex,fesm2015_DecadeCellTemplateDirective,!0),contentQuery(dirIndex,fesm2015_CenturyCellTemplateDirective,!0),contentQuery(dirIndex,fesm2015_WeekNumberCellTemplateDirective,!0),contentQuery(dirIndex,fesm2015_HeaderTitleTemplateDirective,!0),contentQuery(dirIndex,fesm2015_NavigationItemTemplateDirective,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.cellTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.monthCellTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.yearCellTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.decadeCellTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.centuryCellTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.weekNumberTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.headerTitleTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.navigationItemTemplate=_t.first))},viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(dist_fesm2015_c15,!0,ViewContainerRef),viewQuery(dist_fesm2015_c16,!0),viewQuery(dist_fesm2015_c17,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.container=_t.first),queryRefresh(_t=loadQuery())&&(ctx.popupTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.wrapper=_t.first))},hostVars:6,hostBindings:function(rf,ctx){2&rf&&classProp("k-widget",ctx.wrapperClasses)("k-datepicker",ctx.wrapperClasses)("k-state-disabled",ctx.disabledClass)},inputs:{focusableId:"focusableId",activeView:"activeView",bottomView:"bottomView",topView:"topView",disabled:"disabled",readonly:"readonly",readOnlyInput:"readOnlyInput",navigation:"navigation",min:"min",max:"max",focusedDate:"focusedDate",format:"format",placeholder:"placeholder",tabindex:"tabindex",title:"title",rangeValidation:"rangeValidation",disabledDatesValidation:"disabledDatesValidation",weekNumber:"weekNumber",cellTemplateRef:["cellTemplate","cellTemplateRef"],monthCellTemplateRef:["monthCellTemplate","monthCellTemplateRef"],yearCellTemplateRef:["yearCellTemplate","yearCellTemplateRef"],decadeCellTemplateRef:["decadeCellTemplate","decadeCellTemplateRef"],centuryCellTemplateRef:["centuryCellTemplate","centuryCellTemplateRef"],weekNumberTemplateRef:["weekNumberTemplate","weekNumberTemplateRef"],headerTitleTemplateRef:["headerTitleTemplate","headerTitleTemplateRef"],navigationItemTemplateRef:["navigationItemTemplate","navigationItemTemplateRef"],popupSettings:"popupSettings",value:"value",tabIndex:"tabIndex",disabledDates:"disabledDates",formatPlaceholder:"formatPlaceholder"},outputs:{valueChange:"valueChange",onFocus:"focus",onBlur:"blur",open:"open",close:"close"},exportAs:["kendo-datepicker"],features:[ProvidersFeature([{provide:NG_VALUE_ACCESSOR,useExisting:forwardRef(()=>DatePickerComponent),multi:!0},{provide:NG_VALIDATORS,useExisting:forwardRef(()=>DatePickerComponent),multi:!0},{provide:KendoInput,useExisting:forwardRef(()=>DatePickerComponent)},fesm2015_LocalizationService,fesm2015_PickerService,fesm2015_DisabledDatesService,{provide:L10N_PREFIX,useValue:"kendo.datepicker"}]),NgOnChangesFeature],decls:12,vars:24,consts:[["kendoDatePickerLocalizedMessages","",6,"today","toggle"],[1,"k-picker-wrap"],["wrapper",""],[3,"role","focusableId","hasPopup","isPopupOpen","disabled","readonly","ariaReadOnly","tabindex","title","format","formatPlaceholder","placeholder","min","max","value","valueChange"],["input",""],["role","button",1,"k-select",3,"kendoEventsOutsideAngular","scope"],[1,"k-icon","k-i-calendar"],["container",""],["popupTemplate",""],[3,"min","max","navigation","activeView","bottomView","topView","weekNumber","cellTemplate","monthCellTemplate","yearCellTemplate","decadeCellTemplate","centuryCellTemplate","weekNumberTemplate","headerTitleTemplate","navigationItemTemplate","focusedDate","value","kendoEventsOutsideAngular","scope","disabledDates","valueChange"],["calendar",""],[3,"today"]],template:function(rf,ctx){1&rf&&(elementContainerStart(0,0),i18nAttributes(1,dist_fesm2015_c22),elementContainerEnd(),elementStart(2,"span",1,2),elementStart(4,"kendo-dateinput",3,4),listener("valueChange",(function($event){return ctx.handleInputChange($event)})),elementEnd(),elementStart(6,"span",5),element(7,"span",6),elementEnd(),elementEnd(),elementContainer(8,null,7),template(10,DatePickerComponent_ng_template_10_Template,4,23,"ng-template",null,8,templateRefExtractor)),2&rf&&(advance(2),classProp("k-state-disabled",ctx.disabled),advance(2),property("role",ctx.inputRole)("focusableId",ctx.focusableId)("hasPopup",!0)("isPopupOpen",ctx.show)("disabled",ctx.disabled)("readonly",ctx.readonly||ctx.readOnlyInput)("ariaReadOnly",ctx.readonly)("tabindex",ctx.tabindex)("title",ctx.title)("format",ctx.format)("formatPlaceholder",ctx.formatPlaceholder)("placeholder",ctx.placeholder)("min",ctx.min)("max",ctx.max)("value",ctx.value),advance(2),property("kendoEventsOutsideAngular",pureFunction2(21,dist_fesm2015_c24,ctx.handleIconClick,ctx.handleMousedown))("scope",ctx),attribute("title",ctx.localization.get("toggle"))("aria-label",ctx.localization.get("toggle")))},directives:function(){return[fesm2015_DatePickerLocalizedMessagesDirective,fesm2015_DateInputComponent,fesm2015_EventsOutsideAngularDirective,fesm2015_CalendarComponent,fesm2015_CalendarCustomMessagesComponent]},encapsulation:2,changeDetection:0}),DatePickerComponent})();class KForOfContext{constructor($implicit,kForOf,index,count){this.$implicit=$implicit,this.kForOf=kForOf,this.index=index,this.count=count}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fesm2015_KForOf=(()=>{class KForOf{constructor(_viewContainer,_template,_differs){this._viewContainer=_viewContainer,this._template=_template,this._differs=_differs,this._differ=null}set kForTemplate(value){value&&(this._template=value)}ngOnChanges(changes){if("kForOf"in changes){const value=changes.kForOf.currentValue;if(this._differ||!value)return;try{this._differ=this._differs.find(value).create(this.kForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${value}' of type '${type=value,type.name||typeof type}'.`)}}var type}ngDoCheck(){if(this._differ){const changes=this._differ.diff(this.kForOf);changes&&this._applyChanges(changes)}}_applyChanges(changes){if(!isDocumentAvailable())return;const viewContainerLength=this._viewContainer.length,dataLength=this.kForOf.length,tuples={};changes.forEachOperation((record,_,currentIndex)=>{null!==currentIndex&&(tuples[currentIndex]=record.item)});for(let i=viewContainerLength;i<dataLength;i++)this._viewContainer.createEmbeddedView(this._template,new KForOfContext(null,this.kForOf,-1,-1),i);for(let i=this._viewContainer.length;i>dataLength;i--)this._viewContainer.remove(i-1);for(let i=0;i<this._viewContainer.length;i++){const view=this._viewContainer.get(i);view.context.index=i,view.context.count=length,view.context.$implicit=tuples[i]||null}}}return KForOf.fac=function(t){return new(t||KForOf)(directiveInject(ViewContainerRef),directiveInject(TemplateRef),directiveInject(IterableDiffers))},KForOf.dir=defineDirective({type:KForOf,selectors:[["","kFor","","kForOf",""]],inputs:{kForTemplate:"kForTemplate",kForOf:"kForOf",kForTrackBy:"kForTrackBy"},features:[NgOnChangesFeature]}),KForOf})(),fesm2015_HeaderComponent=(()=>{class HeaderComponent{constructor(bus,cdr,localization,intl,disabledDatesService){this.bus=bus,this.cdr=cdr,this.localization=localization,this.intl=intl,this.disabledDatesService=disabledDatesService,this.navigate=!0,this.todayAvailable=!0,this.min=new Date(MIN_DATE),this.max=new Date(MAX_DATE),this.rangeLength=1,this.today=new core_EventEmitter,this.subscriptions=new Subscription_Subscription}get getComponentClass(){return!0}ngOnInit(){this.subscriptions.add(this.intl.changes.subscribe(this.intlChange.bind(this))).add(this.localization.changes.subscribe(this.l10nChange.bind(this))).add(this.disabledDatesService.changes.subscribe(this.setTodayAvailability.bind(this)))}ngOnChanges(_){this.bus.service(this.activeView)&&(this.activeViewValue=CalendarViewEnum[this.activeView],this.todayMessage=this.localization.get("today"),this.setTodayAvailability(),this.navigate=this.bus.canMoveUp(this.activeView),this.title=this.getTitle())}ngOnDestroy(){this.subscriptions.unsubscribe()}handleTodayClick(){this.todayAvailable&&(this.bus.moveToBottom(this.activeView),this.today.emit(dateInRange(getToday(),this.min,this.max)))}handleNavigation(){this.navigate&&this.bus.moveUp(this.activeView)}intlChange(){this.currentDate&&this.bus.service(this.activeView)&&(this.title=this.getTitle(),this.cdr.markForCheck())}l10nChange(){this.todayMessage=this.localization.get("today"),this.cdr.markForCheck()}getTitle(){if(!this.currentDate)return"";const service=this.bus.service(this.activeView),take=this.rangeLength-1,title=service.title(this.currentDate),nextDate=service.addToDate(this.currentDate,take);return take<1||!service.isInRange(nextDate,this.min,this.max)?title:`${title} - ${service.title(nextDate)}`}setTodayAvailability(){const today=getToday(),isTodayInRange=isInRange(today,getDate(this.min),getDate(this.max)),isDisabled=this.disabledDatesService.isDateDisabled(today);this.todayAvailable=isTodayInRange&&!isDisabled,this.cdr.markForCheck()}}return HeaderComponent.fac=function(t){return new(t||HeaderComponent)(directiveInject(fesm2015_BusViewService),directiveInject(ChangeDetectorRef),directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_IntlService),directiveInject(fesm2015_DisabledDatesService))},HeaderComponent.cmp=defineComponent({type:HeaderComponent,selectors:[["kendo-calendar-header"]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-calendar-header",ctx.getComponentClass)},inputs:{min:"min",max:"max",rangeLength:"rangeLength",activeView:"activeView",currentDate:"currentDate",templateRef:"templateRef"},outputs:{today:"today"},features:[NgOnChangesFeature],decls:5,vars:21,consts:[[1,"k-button","k-bare","k-title",3,"kendoEventsOutsideAngular","scope"],[3,"ngIf"],[3,"ngIf","ngTemplateOutlet","ngTemplateOutletContext"],[1,"k-today",3,"kendoEventsOutsideAngular","scope"]],template:function(rf,ctx){1&rf&&(elementStart(0,"span",0),template(1,HeaderComponent_ng_template_1_Template,1,1,"ng-template",1),template(2,HeaderComponent_ng_template_2_Template,0,0,"ng-template",2),elementEnd(),elementStart(3,"span",3),text(4),elementEnd()),2&rf&&(classProp("k-state-disabled",!ctx.navigate),property("kendoEventsOutsideAngular",pureFunction1(13,kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c3,ctx.handleNavigation))("scope",ctx),advance(1),property("ngIf",!ctx.templateRef),advance(1),property("ngIf",ctx.templateRef)("ngTemplateOutlet",ctx.templateRef)("ngTemplateOutletContext",pureFunction3(15,kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c2,ctx.title,ctx.activeViewValue,ctx.currentDate)),advance(1),classProp("k-state-disabled",!ctx.todayAvailable),property("kendoEventsOutsideAngular",pureFunction1(19,kendo_angular_dateinputs_ivy_ngcc_dist_fesm2015_c3,ctx.handleTodayClick))("scope",ctx),advance(1),textInterpolate1(" ",ctx.todayMessage," "))},directives:[fesm2015_EventsOutsideAngularDirective,common_NgIf,common_NgTemplateOutlet],encapsulation:2}),HeaderComponent})(),fesm2015_WeekNamesService=(()=>{class WeekNamesService{constructor(intl){this.intl=intl}getWeekNames(includeWeekNumber=!1){const weekNames=shiftWeekNames(this.intl.dateFormatNames({nameType:"short",type:"days"}),this.intl.firstDay());return includeWeekNumber?[""].concat(weekNames):weekNames}}return WeekNamesService.fac=function(t){return new(t||WeekNamesService)(inject(fesm2015_IntlService))},WeekNamesService.prov=defineInjectable({token:WeekNamesService,factory:WeekNamesService.fac}),WeekNamesService})(),fesm2015_ViewComponent=(()=>{class ViewComponent{constructor(bus,intl,cdr,weekService,element,zone,renderer,disabledDatesService){this.bus=bus,this.intl=intl,this.cdr=cdr,this.weekService=weekService,this.element=element,this.zone=zone,this.renderer=renderer,this.disabledDatesService=disabledDatesService,this.direction="vertical",this.isActive=!0,this.change=new core_EventEmitter,this.cellEnter=new core_EventEmitter,this.cellLeave=new core_EventEmitter,this.weekNames=[],this.colSpan=0,this.subscriptions=new Subscription_Subscription,this.domEvents=[],this.subscriptions.add(this.intl.changes.subscribe(this.intlChange.bind(this))).add(this.disabledDatesService.changes.subscribe(this.disabledDatesChange.bind(this)))}get weekNumber(){return this.showWeekNumbers&&this.activeView===CalendarViewEnum.month}set weekNumber(showWeekNumbers){this.showWeekNumbers=showWeekNumbers}ngOnInit(){this.element&&this.zone.runOutsideAngular(()=>{this.bindEvents()})}ngOnChanges(changes){this.service=this.bus.service(this.activeView),this.service&&(this.isHorizontal()&&0===this.weekNames.length&&(changes.weekNumber||changes.direction)&&(this.weekNames=this.weekService.getWeekNames(this.weekNumber)),this.colSpan=this.service.rowLength(this.weekNumber),this.title=this.service.title(this.viewDate),this.updateData(),changes.activeView&&(this.currentCellIndex=null))}ngOnDestroy(){this.subscriptions.unsubscribe(),this.domEvents.forEach(unsubscribeCallback=>unsubscribeCallback())}isHorizontal(){return"horizontal"===this.direction}isMonthView(){return this.activeView===CalendarViewEnum.month}firstDate(rowCtx){const ctx=this.firstWeekDateContext(rowCtx);return ctx?ctx.value:null}getWeekNumber(date){return this.weekNumber?weekInYear(date,this.intl.firstDay()):null}getWeekNumberContext(rowCtx){const ctx=this.firstWeekDateContext(rowCtx);if(!this.weekNumber||!ctx)return null;const weekNumber=weekInYear(ctx.value,this.intl.firstDay()).toString();return{formattedValue:weekNumber,id:null,isFocused:!1,isSelected:!1,isWeekend:!1,title:weekNumber,value:cloneDate(ctx.value)}}getStyles(context){const{isRangeEnd:isRangeEnd,isRangeStart:isRangeStart}=context;return classes={"k-range-end":isRangeEnd,"k-range-mid":context.isRangeMid,"k-range-split-end":context.isRangeSplitEnd,"k-range-split-start":context.isRangeSplitStart,"k-range-start":isRangeStart,"k-state-active":"start"===this.activeRangeEnd&&isRangeStart||"end"===this.activeRangeEnd&&isRangeEnd,"k-state-focused":this.isActive&&context.isFocused,"k-state-selected":context.isSelected||isRangeStart||isRangeEnd,"k-today":context.isToday,"k-weekend":context.isWeekend,"k-state-disabled":context.isDisabled},Object.keys(classes).reduce((acc,cls)=>classes[cls]?acc.concat(cls):acc,[]).join(" ");var classes}tableCellIndex(rowIndex,cellIndex){return`${rowIndex}:${cellIndex}`}firstWeekDateContext(rowCtx){if(!this.weekNumber)return null;let idx=0,ctx=rowCtx[idx];for(;!ctx&&idx<rowCtx.length;)ctx=rowCtx[++idx];return ctx}updateData(){const time=this.selectedDate||getToday(),viewDate=setTime(this.viewDate,time);this.data=this.service.data({cellUID:this.cellUID,focusedDate:this.focusedDate,isActiveView:!this.bus.canMoveDown(this.activeView),max:this.max,min:this.min,selectedDate:this.selectedDate,selectionRange:this.selectionRange,viewDate:viewDate,isDateDisabled:this.disabledDatesService.isDateDisabled})}intlChange(){this.updateData(),this.isHorizontal()&&(this.weekNames=this.weekService.getWeekNames(this.weekNumber)),this.cdr.markForCheck()}disabledDatesChange(){this.updateData(),this.cdr.markForCheck()}bindEvents(){const element=this.element.nativeElement;this.domEvents.push(this.renderer.listen(element,"mouseover",this.cellMouseoverHandler.bind(this)),this.renderer.listen(element,"mouseleave",this.mouseLeaveHandler.bind(this)),this.renderer.listen(element,"click",this.clickHandler.bind(this)))}clickHandler(args){const cell=this.closestCell(args);if(cell){const index=cell.getAttribute("data-cell-index"),cellContext=this.cellByIndex(index);cellContext.isDisabled||this.change.emit(cellContext.value)}}mouseLeaveHandler(){this.currentCellIndex&&this.emitCellLeave()}cellMouseoverHandler(args){const cell=this.closestCell(args);if(cell){const index=cell.getAttribute("data-cell-index");this.currentCellIndex&&this.currentCellIndex!==index&&this.emitCellLeave();const value=this.cellByIndex(index).value;this.cellEnter.emit(value),this.currentCellIndex=index}else this.currentCellIndex&&this.emitCellLeave()}closestCell(eventArgs){return closestInScope(eventArgs.target,node=>node.hasAttribute("data-cell-index"),this.element.nativeElement)}emitCellLeave(){const item=this.cellByIndex(this.currentCellIndex);item&&this.cellLeave.emit(item.value),this.currentCellIndex=null}cellByIndex(index){const[rowIndex,cellIndex]=index.split(":");return this.data[rowIndex][cellIndex]}}return ViewComponent.fac=function(t){return new(t||ViewComponent)(directiveInject(fesm2015_BusViewService),directiveInject(fesm2015_IntlService),directiveInject(ChangeDetectorRef),directiveInject(fesm2015_WeekNamesService),directiveInject(ElementRef),directiveInject(NgZone),directiveInject(Renderer2),directiveInject(fesm2015_DisabledDatesService))},ViewComponent.cmp=defineComponent({type:ViewComponent,selectors:[["","kendoCalendarView",""]],inputs:{direction:"direction",isActive:"isActive",weekNumber:"weekNumber",activeView:"activeView",cellUID:"cellUID",focusedDate:"focusedDate",selectedDate:"selectedDate",viewDate:"viewDate",activeRangeEnd:"activeRangeEnd",selectionRange:"selectionRange",min:"min",max:"max",viewIndex:"viewIndex",templateRef:"templateRef",weekNumberTemplateRef:"weekNumberTemplateRef"},outputs:{change:"change",cellEnter:"cellEnter",cellLeave:"cellLeave"},features:[NgOnChangesFeature],attrs:_c80,decls:5,vars:3,consts:[["emptyCell",""],["role","row",4,"ngIf"],["role","row",4,"kFor","kForOf"],[1,"k-empty"],["role","row"],["scope","col",3,"colSpan"],[4,"ngFor","ngForOf"],[3,"ngIf"],[4,"kFor","kForOf"],["class","k-alt",4,"ngIf","ngIfElse"],[1,"k-alt"],[3,"ngIf","ngTemplateOutlet","ngTemplateOutletContext"],["role","gridcell",3,"ngClass","title",4,"ngIf","ngIfElse"],["role","gridcell",3,"ngClass","title"],[1,"k-link"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(rf,ctx){1&rf&&(template(0,ViewComponent_ng_template_0_Template,2,0,"ng-template",null,0,templateRefExtractor),template(2,ViewComponent_tr_2_Template,3,2,"tr",1),template(3,ViewComponent_tr_3_Template,2,1,"tr",1),template(4,ViewComponent_tr_4_Template,3,2,"tr",2)),2&rf&&(advance(2),property("ngIf",!ctx.isHorizontal()),advance(1),property("ngIf",ctx.isMonthView()&&ctx.isHorizontal()),advance(1),property("kForOf",ctx.data))},directives:[common_NgIf,fesm2015_KForOf,common_NgForOf,common_NgTemplateOutlet,common_NgClass],encapsulation:2}),ViewComponent})(),fesm2015_CalendarCommonModule=(()=>{class CalendarCommonModule{}return CalendarCommonModule.mod=defineNgModule({type:CalendarCommonModule}),CalendarCommonModule.inj=defineInjector({factory:function(t){return new(t||CalendarCommonModule)},imports:[[common_CommonModule,fesm2015_EventsModule]]}),CalendarCommonModule})(),fesm2015_TemplatesModule=(()=>{class TemplatesModule{}return TemplatesModule.mod=defineNgModule({type:TemplatesModule}),TemplatesModule.inj=defineInjector({factory:function(t){return new(t||TemplatesModule)}}),TemplatesModule})(),fesm2015_CalendarMessages=(()=>{class CalendarMessages extends fesm2015_ComponentMessages{}return CalendarMessages.fac=function(t){return CalendarMessages_BaseFactory(t||CalendarMessages)},CalendarMessages.dir=defineDirective({type:CalendarMessages,inputs:{today:"today"},features:[InheritDefinitionFeature]}),CalendarMessages})();const CalendarMessages_BaseFactory=getInheritedFactory(fesm2015_CalendarMessages);let fesm2015_CalendarLocalizedMessagesDirective=(()=>{class CalendarLocalizedMessagesDirective extends fesm2015_CalendarMessages{constructor(service){super(),this.service=service}}return CalendarLocalizedMessagesDirective.fac=function(t){return new(t||CalendarLocalizedMessagesDirective)(directiveInject(fesm2015_LocalizationService))},CalendarLocalizedMessagesDirective.dir=defineDirective({type:CalendarLocalizedMessagesDirective,selectors:[["","kendoCalendarLocalizedMessages",""]],features:[ProvidersFeature([{provide:fesm2015_CalendarMessages,useExisting:forwardRef(()=>CalendarLocalizedMessagesDirective)}]),InheritDefinitionFeature]}),CalendarLocalizedMessagesDirective})(),fesm2015_CalendarCustomMessagesComponent=(()=>{class CalendarCustomMessagesComponent extends fesm2015_CalendarMessages{constructor(service){super(),this.service=service}get override(){return!0}}return CalendarCustomMessagesComponent.fac=function(t){return new(t||CalendarCustomMessagesComponent)(directiveInject(fesm2015_LocalizationService))},CalendarCustomMessagesComponent.cmp=defineComponent({type:CalendarCustomMessagesComponent,selectors:[["kendo-calendar-messages"]],features:[ProvidersFeature([{provide:fesm2015_CalendarMessages,useExisting:forwardRef(()=>CalendarCustomMessagesComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),CalendarCustomMessagesComponent})(),fesm2015_VirtualizationModule=(()=>{class VirtualizationModule{}return VirtualizationModule.mod=defineNgModule({type:VirtualizationModule}),VirtualizationModule.inj=defineInjector({factory:function(t){return new(t||VirtualizationModule)},imports:[[common_CommonModule]]}),VirtualizationModule})(),fesm2015_CalendarModule=(()=>{class CalendarModule{}return CalendarModule.mod=defineNgModule({type:CalendarModule}),CalendarModule.inj=defineInjector({factory:function(t){return new(t||CalendarModule)},providers:[fesm2015_CalendarDOMService,fesm2015_CenturyViewService,fesm2015_DecadeViewService,fesm2015_MonthViewService,fesm2015_YearViewService,fesm2015_WeekNamesService],imports:[[common_CommonModule,fesm2015_CalendarCommonModule,fesm2015_IntlModule,fesm2015_TemplatesModule,fesm2015_VirtualizationModule,fesm2015_EventsModule],fesm2015_CalendarCommonModule,fesm2015_TemplatesModule]}),CalendarModule})(),fesm2015_DateInputMessages=(()=>{class DateInputMessages extends fesm2015_ComponentMessages{}return DateInputMessages.fac=function(t){return DateInputMessages_BaseFactory(t||DateInputMessages)},DateInputMessages.dir=defineDirective({type:DateInputMessages,inputs:{decrement:"decrement",increment:"increment"},features:[InheritDefinitionFeature]}),DateInputMessages})();const DateInputMessages_BaseFactory=getInheritedFactory(fesm2015_DateInputMessages);let fesm2015_DateInputLocalizedMessagesDirective=(()=>{class DateInputLocalizedMessagesDirective extends fesm2015_DateInputMessages{constructor(service){super(),this.service=service}}return DateInputLocalizedMessagesDirective.fac=function(t){return new(t||DateInputLocalizedMessagesDirective)(directiveInject(fesm2015_LocalizationService))},DateInputLocalizedMessagesDirective.dir=defineDirective({type:DateInputLocalizedMessagesDirective,selectors:[["","kendoDateInputLocalizedMessages",""]],features:[ProvidersFeature([{provide:fesm2015_DateInputMessages,useExisting:forwardRef(()=>DateInputLocalizedMessagesDirective)}]),InheritDefinitionFeature]}),DateInputLocalizedMessagesDirective})(),fesm2015_DateInputModule=(()=>{class DateInputModule{}return DateInputModule.mod=defineNgModule({type:DateInputModule}),DateInputModule.inj=defineInjector({factory:function(t){return new(t||DateInputModule)},imports:[[common_CommonModule,fesm2015_IntlModule,fesm2015_EventsModule]]}),DateInputModule})(),fesm2015_DatePickerMessages=(()=>{class DatePickerMessages extends fesm2015_ComponentMessages{}return DatePickerMessages.fac=function(t){return DatePickerMessages_BaseFactory(t||DatePickerMessages)},DatePickerMessages.dir=defineDirective({type:DatePickerMessages,inputs:{today:"today",toggle:"toggle"},features:[InheritDefinitionFeature]}),DatePickerMessages})();const DatePickerMessages_BaseFactory=getInheritedFactory(fesm2015_DatePickerMessages);let fesm2015_DatePickerLocalizedMessagesDirective=(()=>{class DatePickerLocalizedMessagesDirective extends fesm2015_DatePickerMessages{constructor(service){super(),this.service=service}}return DatePickerLocalizedMessagesDirective.fac=function(t){return new(t||DatePickerLocalizedMessagesDirective)(directiveInject(fesm2015_LocalizationService))},DatePickerLocalizedMessagesDirective.dir=defineDirective({type:DatePickerLocalizedMessagesDirective,selectors:[["","kendoDatePickerLocalizedMessages",""]],features:[ProvidersFeature([{provide:fesm2015_DatePickerMessages,useExisting:forwardRef(()=>DatePickerLocalizedMessagesDirective)}]),InheritDefinitionFeature]}),DatePickerLocalizedMessagesDirective})();const fesm2015_0$e=support_touchEnabled;let fesm2015_DatePickerModule=(()=>{class DatePickerModule{}return DatePickerModule.mod=defineNgModule({type:DatePickerModule}),DatePickerModule.inj=defineInjector({factory:function(t){return new(t||DatePickerModule)},providers:[{provide:fesm2015_TOUCH_ENABLED,useValue:fesm2015_0$e}],imports:[[common_CommonModule,fesm2015_DateInputModule,fesm2015_CalendarModule,fesm2015_IntlModule,fesm2015_PopupModule,fesm2015_TemplatesModule,fesm2015_EventsModule],fesm2015_TemplatesModule]}),DatePickerModule})(),intl_service_current={toString:value=>value};function foreach(arr,func){let str="";if(null!=arr)if(Array.isArray(arr))for(let i=0;i<arr.length;++i)str+=func(arr[i],i);else"object"==typeof arr&&Object.keys(arr).forEach((key,i)=>{str+=func(arr[key],key,i)});return str}__webpack_require__("g1Xn"),JSON.parse.bind(JSON);const SPREADSHEET_CUSTOM_FILTER=({logic:logic,criteria:criteria})=>`\n<customFilters ${"and"===logic?'and="1"':""}>\n${foreach(criteria,f=>{let op=spreadsheetFilters.customOperator(f);return`<customFilter ${op?`operator="${op}"`:""} val="${spreadsheetFilters.customValue(f)}"/>`})}\n</customFilters>`,SPREADSHEET_DYNAMIC_FILTER=({type:type})=>`<dynamicFilter type="${spreadsheetFilters.dynamicFilterType(type)}" />`,SPREADSHEET_TOP_FILTER=({type:type,value:value})=>`<top10 percent="${/percent$/i.test(type)?1:0}"\n       top="${/^top/i.test(type)?1:0}"\n       val="${value}" />`,SPREADSHEET_VALUE_FILTER=({blanks:blanks,values:values})=>`<filters ${blanks?'blank="1"':""}>\n    ${foreach(values,value=>`\n      <filter val="${value}" />`)}\n  </filters>`;function spreadsheetFilters(filter){return(({ref:ref,columns:columns,generators:generators})=>`\n<autoFilter ref="${ref}">\n  ${foreach(columns,col=>`\n    <filterColumn colId="${col.index}">\n      ${generators[col.filter](col)}\n    </filterColumn>\n  `)}\n</autoFilter>`)({ref:filter.ref,columns:filter.columns,generators:{custom:SPREADSHEET_CUSTOM_FILTER,dynamic:SPREADSHEET_DYNAMIC_FILTER,top:SPREADSHEET_TOP_FILTER,value:SPREADSHEET_VALUE_FILTER}})}spreadsheetFilters.customOperator=function(f){return{eq:"equal",gt:"greaterThan",gte:"greaterThanOrEqual",lt:"lessThan",lte:"lessThanOrEqual",ne:"notEqual",doesnotstartwith:"notEqual",doesnotendwith:"notEqual",doesnotcontain:"notEqual",doesnotmatch:"notEqual"}[f.operator.toLowerCase()]},spreadsheetFilters.customValue=function(f){function esc(str){return str.replace(/([*?])/g,"~$1")}switch(f.operator.toLowerCase()){case"startswith":case"doesnotstartwith":return esc(f.value)+"*";case"endswith":case"doesnotendwith":return"*"+esc(f.value);case"contains":case"doesnotcontain":return"*"+esc(f.value)+"*";default:return f.value}},spreadsheetFilters.dynamicFilterType=function(type){return{quarter1:"Q1",quarter2:"Q2",quarter3:"Q3",quarter4:"Q4",january:"M1",february:"M2",march:"M3",april:"M4",may:"M5",june:"M6",july:"M7",august:"M8",september:"M9",october:"M10",november:"M11",december:"M12"}[type.toLowerCase()]||type},class{static register(userImplementation){intl_service_current=userImplementation}static toString(value,format){return intl_service_current.toString(value,format)}}.register({toString:format_toString});const kendo_angular_grid_ivy_ngcc_dist_fesm2015_c0=["lockedHeader"],kendo_angular_grid_ivy_ngcc_dist_fesm2015_c1=["header"],kendo_angular_grid_ivy_ngcc_dist_fesm2015_c2=["ariaRoot"],kendo_angular_grid_ivy_ngcc_dist_fesm2015_c3=["footer"],_c106=["groupPanelEmpty",$localize`:kendo.grid.groupPanelEmpty|The label visible in the Grid group panel when it is empty30bcb3a2fbc22fcab6ca805e74b90adb8ba1ae961430663748859427158:Drag a column header and drop it here to group by that column`,"noRecords",$localize`:kendo.grid.noRecords|The label visible in the Grid when there are no recordsff9cfd4bf3e40305db251f2b6961796c0550b4b01243399825085142134:No records available.`,"pagerFirstPage",$localize`:kendo.grid.pagerFirstPage|The label for the first page button in Grid pagerb405dfc5ee42415daa08d54847d3010de18211115647145449685906398:Go to the first page`,"pagerPreviousPage",$localize`:kendo.grid.pagerPreviousPage|The label for the previous page button in Grid pager47aa4fe05f5a2577d3336971d7c44ce48802b8606745088753482690847:Go to the previous page`,"pagerNextPage",$localize`:kendo.grid.pagerNextPage|The label for the next page button in Grid pager90031133fca899b4e491d9fc51128c1a184afb305510985262435270859:Go to the next page`,"pagerLastPage",$localize`:kendo.grid.pagerLastPage|The label for the last page button in Grid pagerfe84f2ea868286ce03e50b6e55558c16d675c7534539768510520419313:Go to the last page`,"pagerPage",$localize`:kendo.grid.pagerPage|The label before the current page number in the Grid pager89c1f616c25bb610824cd8a26473a03921df48bd5228228287003939680:Page`,"pagerOf",$localize`:kendo.grid.pagerOf|The label before the total pages number in the Grid pager0c9abe48f5d4bd2cb51846712e41864fc64aad6a7004642096327889102:of`,"pagerItems",$localize`:kendo.grid.pagerItems|The label after the total pages number in the Grid pager7c1704d11bfb77340485acd891439c2b6c6616ca700193548223931835:items`,"pagerItemsPerPage",$localize`:kendo.grid.pagerItemsPerPage|The label for the page size chooser in the Grid pager3331fe7ec45f299afaa4c1e08ea25c493eda91448838594644885628398:items per page`,"filter",$localize`:kendo.grid.filter|The label of the filter cell or icon21a04b7b090dac60e0449cb6e435b7e879173c757977992299945497789:Filter`,"filterEqOperator",$localize`:kendo.grid.filterEqOperator|The text of the equal filter operator8b31e1604d10a2f8709dcb1ed5c237e33cffc1354328959145426393682:Is equal to`,"filterNotEqOperator",$localize`:kendo.grid.filterNotEqOperator|The text of the not equal filter operatord46e14d35d89d2fadf5c852abf5557643510a0138497658332767349737:Is not equal to`,"filterIsNullOperator",$localize`:kendo.grid.filterIsNullOperator|The text of the is null filter operator078c50eb1fe8b2b43fcc40c5e7f4493152310c2f1298299704757177797:Is null`,"filterIsNotNullOperator",$localize`:kendo.grid.filterIsNotNullOperator|The text of the is not null filter operator70b39eeaf2674907b2e59b414baf17e032b464dc8362279767336741540:Is not null`,"filterIsEmptyOperator",$localize`:kendo.grid.filterIsEmptyOperator|The text of the is empty filter operatora4e77e444b4e9b63851ac818e20136212b06c7504762263229995523226:Is empty`,"filterIsNotEmptyOperator",$localize`:kendo.grid.filterIsNotEmptyOperator|The text of the is not empty filter operatordee7553c341248e90aef4a8e7438c52e667e68be8245213618709258015:Is not empty`,"filterStartsWithOperator",$localize`:kendo.grid.filterStartsWithOperator|The text of the starts with filter operatorda43b363b636156e3ccdbb64a0788bdeab51e9926087783423599420507:Starts with`,"filterContainsOperator",$localize`:kendo.grid.filterContainsOperator|The text of the contains filter operator5b568a46d2e34ebde7dd53a7e599cbbb7dc6bae13831180413287131758:Contains`,"filterNotContainsOperator",$localize`:kendo.grid.filterNotContainsOperator|The text of the does not contain filter operatorbe06aa4fde7fa722c9de5a45f241ff595071d7187331253838216904826:Does not contain`,"filterEndsWithOperator",$localize`:kendo.grid.filterEndsWithOperator|The text of the ends with filter operatora54b2ecffb41f0603ceedc7ea5a40b7d130e2fa13662435311670509156:Ends with`,"filterGteOperator",$localize`:kendo.grid.filterGteOperator|The text of the greater than or equal filter operator68471603db771d0304d02fe086da9701c16911c34542824413455511831:Is greater than or equal to`,"filterGtOperator",$localize`:kendo.grid.filterGtOperator|The text of the greater than filter operatorae68acc0e18252a348bdfb32112996d81e5305de1527483349261806183:Is greater than`,"filterLteOperator",$localize`:kendo.grid.filterLteOperator|The text of the less than or equal filter operatore48d50a6422c616a00b95025adc5283aff4fa8cb4840714404733417604:Is less than or equal to`,"filterLtOperator",$localize`:kendo.grid.filterLtOperator|The text of the less than filter operatorc4d58f0e509cb7e37014715dd91546a724210d70498627126459578706:Is less than`,"filterIsTrue",$localize`:kendo.grid.filterIsTrue|The text of the IsTrue boolean filter optiond5f1e9028bc60c30e8f8e0f9cfeb872512446cea2361673238316312251:Is True`,"filterIsFalse",$localize`:kendo.grid.filterIsFalse|The text of the IsFalse boolean filter option6d34731320e2536fd78f4a9e08f0b8dcd01edf3d7759366406135608407:Is False`,"filterBooleanAll",$localize`:kendo.grid.filterBooleanAll|The text of the (All) boolean filter option4da1456a62bafe2614ed2bc05a2c790a64a4dd0b9215343856736761875:(All)`,"filterAfterOrEqualOperator",$localize`:kendo.grid.filterAfterOrEqualOperator|The text of the after or equal date filter operatord7dac1bbc2372d578a9d2bca099de766043aed7e1964413288176201979:Is after or equal to`,"filterAfterOperator",$localize`:kendo.grid.filterAfterOperator|The text of the after date filter operatorbff777df0d0831cc02679227422fab4ef2763fa93078502182807244703:Is after`,"filterBeforeOperator",$localize`:kendo.grid.filterBeforeOperator|The text of the before date filter operator35ef5cf367670f15432c9f8761bc85fbdb2b18303348865631071358219:Is before`,"filterBeforeOrEqualOperator",$localize`:kendo.grid.filterBeforeOrEqualOperator|The text of the before or equal date filter operator27a6b29ffbc1eb498de8d7af20051461a2e842ec6582064037090631388:Is before or equal to`,"filterFilterButton",$localize`:kendo.grid.filterFilterButton|The text of the filter button4f1c08d0b056646cdb668da669e2e15825adfe4d5185263258022896121:Filter`,"filterClearButton",$localize`:kendo.grid.filterClearButton|The text of the clear filter button06e4e4dadede6f91f261cdbb7fb174246a1352383031209415830321799:Clear`,"filterAndLogic",$localize`:kendo.grid.filterAndLogic|The text of the And filter logicf73fbcc2f813d469e4a34491950ca01ea1ac8f60512662285155477884:And`,"filterOrLogic",$localize`:kendo.grid.filterOrLogic|The text of the Or filter logic04e64780de0fc1c3a9986997e0808ec53a5f2a631964926727342405367:Or`,"loading",$localize`:kendo.grid.loading|The loading text781c049cc69efc30bc8053af9ace3cb4b04bd4385425510787229531767:Loading`,"columnMenu",$localize`:kendo.grid.columnMenu|The title of the column menu icon3596c6b21d39223adc5c352daec9938474a8cc0d2820335494528144626:Column Menu`,"columns",$localize`:kendo.grid.columns|The text shown in the column menu for the columns item9b841399fbb3d81f2401f98b4f4763834b72a1e55332162737795508854:Columns`,"lock",$localize`:kendo.grid.lock|The text shown in the column menu for the lock itemf356cae509dec3dc1b7156326b9a0328a79c62a85849203148124173556:Lock`,"unlock",$localize`:kendo.grid.unlock|The text shown in the column menu for the unlock itemf33355540003068372e39ba7f3def794869ea9f86968586378603932789:Unlock`,"sortable",$localize`:kendo.grid.sortable|The label of the sort icona692ba271be066ce379f942ff67094e1ea989f4c3824304972336788145:Sortable`,"sortAscending",$localize`:kendo.grid.sortAscending|The text shown in the column menu for the sort ascending item96beffd8446c5455f3bbdc313c946db32df7dcc26297762560864270240:Sort Ascending`,"sortDescending",$localize`:kendo.grid.sortDescending|The text shown in the column menu for the sort descending item208d0538d4c2537a1cbf456941e34a2884053d525605073536641230977:Sort Descending`,"sortedAscending",$localize`:kendo.grid.sortedAscending|The status announcement when a column is sorted ascending947c64329461efd9f8a9aa2c51acbbd099170aa56275944032047713540:Sorted Ascending`,"sortedDescending",$localize`:kendo.grid.sortedDescending|The status announcement when a column is sorted descending092a688d1b2b6d873bdc29beaaf43c3f453365818155280769473236383:Sorted Descending`,"sortedDefault",$localize`:kendo.grid.sortedDefault|The status announcement when a column is no longer sorted66e99ea340974022c07c52a6f668f5573e7edab05229177293891232538:Not Sorted`,"columnsApply",$localize`:kendo.grid.columnsApply|The text shown in the column menu or column chooser for the columns apply button04600bd6e362cf9da9f7f9c4666eab2c88eb6a9034213208292862969:Apply`,"columnsReset",$localize`:kendo.grid.columnsReset|The text shown in the column menu or column chooser for the columns reset button94d3b472d99994a5cca9930afd4cf0ac2774c3824465838259914958827:Reset`,"detailExpand",$localize`:kendo.grid.detailExpand|The title of the expand icon of detail rows.ad6629bb6e79235623cfce486ef48087dbe96fb56952757249912226136:Expand Details`,"detailCollapse",$localize`:kendo.grid.detailCollapse|The title of the collapse icon of detail rows.ace0c0a58fbb211e8678efb3bd6ac9bb587144c36065477639036399169:Collapse Details`];function GridComponent_kendo_grid_toolbar_2_Template(rf,ctx){1&rf&&element(0,"kendo-grid-toolbar",8)}function GridComponent_kendo_grid_group_panel_3_Template(rf,ctx){if(1&rf){const _r8=getCurrentView();elementStart(0,"kendo-grid-group-panel",9),listener("change",(function($event){return restoreView(_r8),nextContext().groupChange.emit($event)})),elementEnd()}if(2&rf){const ctx_r1=nextContext();property("text",ctx_r1.groupableEmptyText)("groups",ctx_r1.group)}}function GridComponent_ng_template_6_div_0_div_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",21,22),elementStart(2,"table",23),element(3,"colgroup",18),element(4,"thead",24),elementEnd(),elementEnd()),2&rf){const ctx_r11=nextContext(3);styleProp("width",ctx_r11.lockedWidth,"px"),advance(2),styleProp("width",ctx_r11.lockedWidth,"px"),property("locked",!0),advance(1),property("columns",ctx_r11.lockedLeafColumns)("groups",ctx_r11.group)("detailTemplate",ctx_r11.detailTemplate),advance(1),property("resizable",ctx_r11.resizable)("scrollable",!0)("columns",ctx_r11.lockedColumns)("totalColumnLevels",ctx_r11.totalColumnLevels)("sort",ctx_r11.sort)("groups",ctx_r11.group)("filter",ctx_r11.filter)("filterable",ctx_r11.filterable)("groupable",ctx_r11.showGroupPanel)("reorderable",ctx_r11.reorderable)("sortable",ctx_r11.sortable)("columnMenu",ctx_r11.columnMenuOptions)("columnMenuTemplate",ctx_r11.columnMenuTemplate)("totalColumnsCount",ctx_r11.leafColumns.length)("detailTemplate",ctx_r11.detailTemplate)}}function GridComponent_ng_template_6_div_0_div_7_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",25),element(1,"div"),elementEnd()),2&rf){const ctx_r13=nextContext(3);advance(1),styleProp("width",ctx_r13.columnsContainer.unlockedWidth,"px")}}const _c107=function(){return[]};function GridComponent_ng_template_6_div_0_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",13),template(1,GridComponent_ng_template_6_div_0_div_1_Template,5,23,"div",14),elementStart(2,"div",15,16),elementStart(4,"table",17),element(5,"colgroup",18),element(6,"thead",19),elementEnd(),template(7,GridComponent_ng_template_6_div_0_div_7_Template,2,2,"div",20),elementEnd(),elementEnd()),2&rf){const ctx_r9=nextContext(2);styleProp("padding",ctx_r9.headerPadding),advance(1),property("ngIf",ctx_r9.isLocked),advance(1),property("kendoGridResizableContainer",ctx_r9.lockedLeafColumns.length)("lockedWidth",ctx_r9.lockedWidth+ctx_r9.scrollbarWidth+2),advance(2),styleProp("width",ctx_r9.nonLockedWidth,"px"),property("virtualColumns",ctx_r9.virtualColumns),advance(1),property("columns",ctx_r9.headerLeafColumns)("groups",ctx_r9.isLocked?pureFunction0(28,_c107):ctx_r9.group)("detailTemplate",ctx_r9.detailTemplate),advance(1),property("resizable",ctx_r9.resizable)("scrollable",!0)("columns",ctx_r9.headerColumns)("totalColumnLevels",ctx_r9.totalColumnLevels)("sort",ctx_r9.sort)("filter",ctx_r9.filter)("filterable",ctx_r9.filterable)("groupable",ctx_r9.showGroupPanel)("reorderable",ctx_r9.reorderable)("groups",ctx_r9.isLocked?pureFunction0(29,_c107):ctx_r9.group)("sortable",ctx_r9.sortable)("columnMenu",ctx_r9.columnMenuOptions)("columnMenuTemplate",ctx_r9.columnMenuTemplate)("lockedColumnsCount",ctx_r9.lockedLeafColumns.length)("totalColumnsCount",ctx_r9.leafColumns.length)("detailTemplate",ctx_r9.detailTemplate),advance(1),property("ngIf",ctx_r9.virtualColumns)}}function GridComponent_ng_template_6_div_2_div_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",32),elementStart(1,"table",33),element(2,"colgroup",30),element(3,"tfoot",34),elementEnd(),elementEnd()),2&rf){const ctx_r15=nextContext(3);styleProp("width",ctx_r15.lockedWidth,"px"),advance(1),styleProp("width",ctx_r15.lockedWidth,"px"),property("locked",!0),advance(1),property("columns",ctx_r15.lockedLeafColumns)("groups",ctx_r15.group)("detailTemplate",ctx_r15.detailTemplate),advance(1),property("scrollable",!0)("groups",ctx_r15.group)("columns",ctx_r15.lockedLeafColumns)("detailTemplate",ctx_r15.detailTemplate)}}function GridComponent_ng_template_6_div_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",26),template(1,GridComponent_ng_template_6_div_2_div_1_Template,4,12,"div",27),elementStart(2,"div",28,29),elementStart(4,"table"),element(5,"colgroup",30),element(6,"tfoot",31),elementEnd(),elementEnd(),elementEnd()),2&rf){const ctx_r10=nextContext(2);styleProp("padding",ctx_r10.headerPadding),advance(1),property("ngIf",ctx_r10.lockedLeafColumns.length),advance(1),property("kendoGridResizableContainer",ctx_r10.lockedLeafColumns.length)("lockedWidth",ctx_r10.lockedWidth+ctx_r10.scrollbarWidth+3),advance(2),styleProp("width",ctx_r10.nonLockedWidth,"px"),advance(1),property("columns",ctx_r10.nonLockedLeafColumns)("groups",ctx_r10.isLocked?pureFunction0(15,_c107):ctx_r10.group)("detailTemplate",ctx_r10.detailTemplate),advance(1),property("scrollable",!0)("groups",ctx_r10.isLocked?pureFunction0(16,_c107):ctx_r10.group)("columns",ctx_r10.nonLockedLeafColumns)("lockedColumnsCount",ctx_r10.lockedLeafColumns.length)("detailTemplate",ctx_r10.detailTemplate)}}function GridComponent_ng_template_6_Template(rf,ctx){if(1&rf){const _r18=getCurrentView();template(0,GridComponent_ng_template_6_div_0_Template,8,30,"div",10),elementStart(1,"kendo-grid-list",11),listener("pageChange",(function($event){return restoreView(_r18),nextContext().notifyPageChange("list",$event)}))("scrollBottom",(function(){return restoreView(_r18),nextContext().notifyScrollBottom()}))("contentScroll",(function($event){return restoreView(_r18),nextContext().contentScroll.emit($event)})),elementEnd(),template(2,GridComponent_ng_template_6_div_2_Template,7,17,"div",12)}if(2&rf){const ctx_r3=nextContext();property("ngIf",!ctx_r3.hideHeader),advance(1),property("data",ctx_r3.view)("rowHeight",ctx_r3.rowHeight)("detailRowHeight",ctx_r3.detailRowHeight)("total",ctx_r3.totalCount)("take",ctx_r3.pageSize)("groups",ctx_r3.group)("groupable",ctx_r3.groupable)("skip",ctx_r3.skip)("trackBy",ctx_r3.trackBy)("columns",ctx_r3.columnsContainer)("selectable",ctx_r3.selectable)("filterable",ctx_r3.filterable)("detailTemplate",ctx_r3.detailTemplate)("noRecordsTemplate",ctx_r3.noRecordsTemplate)("rowClass",ctx_r3.rowClass)("loading",ctx_r3.loading)("isVirtual",ctx_r3.isVirtual)("virtualColumns",ctx_r3.virtualColumns),advance(1),property("ngIf",ctx_r3.showFooter)}}function GridComponent_ng_template_7_thead_2_Template(rf,ctx){if(1&rf&&element(0,"thead",39),2&rf){const ctx_r21=nextContext(2);property("resizable",ctx_r21.resizable)("scrollable",!1)("columns",ctx_r21.visibleColumns)("totalColumnLevels",ctx_r21.totalColumnLevels)("groups",ctx_r21.group)("groupable",ctx_r21.showGroupPanel)("reorderable",ctx_r21.reorderable)("sort",ctx_r21.sort)("sortable",ctx_r21.sortable)("filter",ctx_r21.filter)("filterable",ctx_r21.filterable)("columnMenu",ctx_r21.columnMenuOptions)("columnMenuTemplate",ctx_r21.columnMenuTemplate)("detailTemplate",ctx_r21.detailTemplate)}}function GridComponent_ng_template_7_tfoot_4_Template(rf,ctx){if(1&rf&&element(0,"tfoot",34),2&rf){const ctx_r22=nextContext(2);property("scrollable",!1)("groups",ctx_r22.group)("columns",ctx_r22.leafColumns)("detailTemplate",ctx_r22.detailTemplate)}}function GridComponent_ng_template_7_div_5_Template(rf,ctx){1&rf&&element(0,"div",40)}function GridComponent_ng_template_7_Template(rf,ctx){if(1&rf&&(elementStart(0,"table"),element(1,"colgroup",30),template(2,GridComponent_ng_template_7_thead_2_Template,1,14,"thead",35),element(3,"tbody",36),template(4,GridComponent_ng_template_7_tfoot_4_Template,1,4,"tfoot",37),elementEnd(),template(5,GridComponent_ng_template_7_div_5_Template,1,0,"div",38)),2&rf){const ctx_r4=nextContext();styleProp("table-layout",ctx_r4.resizable?"fixed":null),advance(1),property("columns",ctx_r4.leafColumns)("groups",ctx_r4.group)("detailTemplate",ctx_r4.detailTemplate),advance(1),property("ngIf",!ctx_r4.hideHeader),advance(1),property("groups",ctx_r4.group)("data",ctx_r4.view)("skip",ctx_r4.skip)("columns",ctx_r4.leafColumns)("selectable",ctx_r4.selectable)("filterable",ctx_r4.filterable)("noRecordsTemplate",ctx_r4.noRecordsTemplate)("detailTemplate",ctx_r4.detailTemplate)("showGroupFooters",ctx_r4.showGroupFooters)("trackBy",ctx_r4.trackBy)("rowClass",ctx_r4.rowClass),advance(1),property("ngIf",ctx_r4.showFooter),advance(1),property("ngIf",ctx_r4.loading)}}function GridComponent_kendo_pager_8_Template(rf,ctx){if(1&rf){const _r25=getCurrentView();elementStart(0,"kendo-pager",41),listener("pageChange",(function($event){return restoreView(_r25),nextContext().notifyPageChange("pager",$event)})),elementEnd()}if(2&rf){const ctx_r5=nextContext();property("template",ctx_r5.pagerTemplate)("pageSize",ctx_r5.pageSize)("total",ctx_r5.view.total)("skip",ctx_r5.skip)("options",ctx_r5.pageable)}}function GridComponent_kendo_grid_toolbar_9_Template(rf,ctx){1&rf&&element(0,"kendo-grid-toolbar",42)}const _c108=["container"],_c109=["lockedContainer"],_c110=["lockedTable"],_c111=["table"],_c112=function(a0,a1,a2,a3){return{keydown:a0,scroll:a1,mousewheel:a2,DOMMouseScroll:a3}};function fesm2015_ListComponent_div_0_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",12,13),elementStart(2,"div",3),elementStart(3,"table",14,15),element(5,"colgroup",6),element(6,"tbody",16),elementEnd(),element(7,"kendo-resize-sensor"),elementEnd(),elementStart(8,"div",9),element(9,"div"),elementEnd(),elementEnd()),2&rf){const ctx_r0=nextContext();styleProp("width",ctx_r0.lockedWidth,"px"),property("kendoEventsOutsideAngular",pureFunction4(25,_c112,ctx_r0.lockedKeydown,ctx_r0.lockedScroll,ctx_r0.lockedMousewheel,ctx_r0.lockedMousewheel))("scope",ctx_r0),advance(3),styleProp("width",ctx_r0.lockedWidth,"px"),property("locked",!0),advance(2),property("groups",ctx_r0.groups)("columns",ctx_r0.lockedLeafColumns)("detailTemplate",ctx_r0.detailTemplate),advance(1),property("groups",ctx_r0.groups)("isLocked",!0)("data",ctx_r0.data)("noRecordsText","")("columns",ctx_r0.lockedLeafColumns)("totalColumnsCount",ctx_r0.leafColumns.length)("detailTemplate",ctx_r0.detailTemplate)("showGroupFooters",ctx_r0.showFooter)("skip",ctx_r0.skip)("selectable",ctx_r0.selectable)("trackBy",ctx_r0.trackBy)("filterable",ctx_r0.filterable)("rowClass",ctx_r0.rowClass),advance(3),styleProp("height",ctx_r0.totalHeight,"px")}}function ListComponent_kendo_resize_sensor_8_Template(rf,ctx){1&rf&&element(0,"kendo-resize-sensor")}function ListComponent_kendo_resize_sensor_9_Template(rf,ctx){1&rf&&element(0,"kendo-resize-sensor")}function ListComponent_div_12_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",17),element(1,"div"),elementEnd()),2&rf){const ctx_r5=nextContext();advance(1),styleProp("width",ctx_r5.totalWidth,"px")}}function ListComponent_div_13_Template(rf,ctx){1&rf&&element(0,"div",18)}const _c113=["kendoGridFilterRow",""];function FilterRowComponent_td_0_Template(rf,ctx){1&rf&&element(0,"td",3),2&rf&&classProp("k-group-cell",!0)}function FilterRowComponent_td_1_Template(rf,ctx){1&rf&&element(0,"td",3),2&rf&&classProp("k-hierarchy-cell",!0)}function FilterRowComponent_td_2_Template(rf,ctx){if(1&rf&&element(0,"td",4),2&rf){const column_r4=ctx.$implicit,columnIndex_r5=ctx.index,ctx_r2=nextContext();property("column",column_r4)("filter",ctx_r2.filter)("logicalRowIndex",ctx_r2.logicalRowIndex)("logicalColIndex",ctx_r2.lockedColumnsCount+columnIndex_r5),attribute("aria-label",ctx_r2.filterLabel)}}const _c114=["kendoGridFilterCell",""];function FilterCellComponent_ng_template_0_ng_container_1_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),elementContainer(1,3),elementContainerEnd()),2&rf){const ctx_r1=nextContext(2);advance(1),property("column",ctx_r1.column)("filter",ctx_r1.filter)}}function FilterCellComponent_ng_template_0_ng_container_2_1_ng_template_0_Template(rf,ctx){}function FilterCellComponent_ng_template_0_ng_container_2_1_Template(rf,ctx){if(1&rf&&template(0,FilterCellComponent_ng_template_0_ng_container_2_1_ng_template_0_Template,0,0,"ng-template",5),2&rf){const ctx_r3=nextContext(3);property("ngTemplateOutlet",ctx_r3.column.filterCellTemplateRef)("ngTemplateOutletContext",ctx_r3.templateContext)}}function FilterCellComponent_ng_template_0_ng_container_2_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),template(1,FilterCellComponent_ng_template_0_ng_container_2_1_Template,1,2,void 0,4),elementContainerEnd()),2&rf){const ctx_r2=nextContext(2);advance(1),property("ngIf",ctx_r2.column.filterCellTemplateRef)}}function FilterCellComponent_ng_template_0_Template(rf,ctx){1&rf&&(elementContainerStart(0,1),template(1,FilterCellComponent_ng_template_0_ng_container_1_Template,2,2,"ng-container",2),template(2,FilterCellComponent_ng_template_0_ng_container_2_Template,2,1,"ng-container",2),elementContainerEnd()),2&rf&&(property("ngSwitch",nextContext().hasTemplate),advance(1),property("ngSwitchCase",!1),advance(1),property("ngSwitchCase",!0))}const _c115=["*"],_c116=["dropdown"],_c117=function(){return{width:"auto"}};function FilterCellOperatorsComponent_kendo_dropdownlist_0_Template(rf,ctx){if(1&rf){const _r3=getCurrentView();elementStart(0,"kendo-dropdownlist",3,4),listener("valueChange",(function($event){return restoreView(_r3),nextContext().onChange($event)}))("keydown",(function($event){return restoreView(_r3),nextContext().dropdownKeydown($event)})),elementEnd()}if(2&rf){const ctx_r0=nextContext();property("data",ctx_r0.operators)("value",ctx_r0.value)("valuePrimitive",!0)("popupSettings",pureFunction0(4,_c117))}}const _c118=function(a0){return{"k-clear-button-visible":a0}},_c119=["kendoGridColGroup",""];function ColGroupComponent_ng_template_0_col_0_Template(rf,ctx){1&rf&&element(0,"col"),2&rf&&classProp("k-group-col",!0)}function ColGroupComponent_ng_template_0_col_1_Template(rf,ctx){1&rf&&element(0,"col"),2&rf&&classProp("k-hierarchy-col",!0)}function ColGroupComponent_ng_template_0_col_2_Template(rf,ctx){1&rf&&element(0,"col"),2&rf&&styleProp("width",ctx.$implicit.width,"px")}function ColGroupComponent_ng_template_0_Template(rf,ctx){if(1&rf&&(template(0,ColGroupComponent_ng_template_0_col_0_Template,1,2,"col",1),template(1,ColGroupComponent_ng_template_0_col_1_Template,1,2,"col",2),template(2,ColGroupComponent_ng_template_0_col_2_Template,1,2,"col",3)),2&rf){const ctx_r0=nextContext();property("ngForOf",ctx_r0.groups),advance(1),property("ngIf",null==ctx_r0.detailTemplate?null:ctx_r0.detailTemplate.templateRef),advance(1),property("ngForOf",ctx_r0.columnsToRender)("ngForTrackBy",ctx_r0.trackBy)}}const _c120=["kendoGridLoading",""];function PagerComponent_ng_container_0_Template(rf,ctx){if(1&rf&&elementContainer(0,2),2&rf){const ctx_r0=nextContext();property("ngTemplateOutlet",ctx_r0.template.templateRef)("ngTemplateOutletContext",ctx_r0.templateContext)}}function PagerComponent_ng_container_1_kendo_pager_prev_buttons_1_Template(rf,ctx){1&rf&&element(0,"kendo-pager-prev-buttons")}function PagerComponent_ng_container_1_kendo_pager_numeric_buttons_2_Template(rf,ctx){1&rf&&element(0,"kendo-pager-numeric-buttons",5),2&rf&&property("buttonCount",nextContext(2).settings.buttonCount)}function PagerComponent_ng_container_1_kendo_pager_input_3_Template(rf,ctx){1&rf&&element(0,"kendo-pager-input")}function PagerComponent_ng_container_1_kendo_pager_next_buttons_4_Template(rf,ctx){1&rf&&element(0,"kendo-pager-next-buttons")}function PagerComponent_ng_container_1_kendo_pager_info_5_Template(rf,ctx){1&rf&&element(0,"kendo-pager-info")}function PagerComponent_ng_container_1_kendo_pager_page_sizes_6_Template(rf,ctx){1&rf&&element(0,"kendo-pager-page-sizes",6),2&rf&&property("pageSizes",nextContext(2).settings.pageSizes)}function PagerComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),template(1,PagerComponent_ng_container_1_kendo_pager_prev_buttons_1_Template,1,0,"kendo-pager-prev-buttons",1),template(2,PagerComponent_ng_container_1_kendo_pager_numeric_buttons_2_Template,1,1,"kendo-pager-numeric-buttons",3),template(3,PagerComponent_ng_container_1_kendo_pager_input_3_Template,1,0,"kendo-pager-input",1),template(4,PagerComponent_ng_container_1_kendo_pager_next_buttons_4_Template,1,0,"kendo-pager-next-buttons",1),template(5,PagerComponent_ng_container_1_kendo_pager_info_5_Template,1,0,"kendo-pager-info",1),template(6,PagerComponent_ng_container_1_kendo_pager_page_sizes_6_Template,1,1,"kendo-pager-page-sizes",4),elementContainerEnd()),2&rf){const ctx_r1=nextContext();advance(1),property("ngIf",ctx_r1.settings.previousNext),advance(1),property("ngIf","numeric"===ctx_r1.settings.type),advance(1),property("ngIf","input"===ctx_r1.settings.type),advance(1),property("ngIf",ctx_r1.settings.previousNext),advance(1),property("ngIf",ctx_r1.settings.info),advance(1),property("ngIf",ctx_r1.settings.pageSizes)}}const _c121=function(a2){return{"k-link":!0,"k-pager-nav":!0,"k-state-disabled":a2,"k-pager-first":!0}},_c122=function(){return{"k-icon":!0,"k-i-seek-w":!0}},_c123=function(a2){return{"k-link":!0,"k-pager-nav":!0,"k-state-disabled":a2,"":!0}},_c124=function(){return{"k-icon":!0,"k-i-arrow-w":!0}},_c125=function(){return{"k-icon":!0,"k-i-arrow-e":!0}},_c126=function(a2){return{"k-link":!0,"k-pager-nav":!0,"k-state-disabled":a2,"k-pager-last":!0}},_c127=function(){return{"k-icon":!0,"k-i-seek-e":!0}};function PagerNumericButtonsComponent_li_1_Template(rf,ctx){if(1&rf){const _r4=getCurrentView();elementStart(0,"li"),elementStart(1,"a",3),listener("click",(function(){restoreView(_r4);const ctx_r3=nextContext();return ctx_r3.changePage(ctx_r3.start-2)})),text(2,"..."),elementEnd(),elementEnd()}if(2&rf){const ctx_r0=nextContext();advance(1),attribute("aria-label",ctx_r0.pageLabel(ctx_r0.start-1))}}const _c128=function(a1){return{"k-link":!0,"k-state-selected":a1}};function PagerNumericButtonsComponent_li_2_Template(rf,ctx){if(1&rf){const _r7=getCurrentView();elementStart(0,"li"),elementStart(1,"a",4),listener("click",(function(){restoreView(_r7);const num_r5=ctx.$implicit;return nextContext().changePage(num_r5-1)})),text(2),elementEnd(),elementEnd()}if(2&rf){const num_r5=ctx.$implicit,ctx_r1=nextContext();advance(1),property("ngClass",pureFunction1(3,_c128,ctx_r1.currentPage==num_r5)),attribute("aria-label",ctx_r1.pageLabel(num_r5)),advance(1),textInterpolate1(" ",num_r5," ")}}function PagerNumericButtonsComponent_li_3_Template(rf,ctx){if(1&rf){const _r9=getCurrentView();elementStart(0,"li"),elementStart(1,"a",3),listener("click",(function(){restoreView(_r9);const ctx_r8=nextContext();return ctx_r8.changePage(ctx_r8.end)})),text(2,"..."),elementEnd(),elementEnd()}if(2&rf){const ctx_r2=nextContext();advance(1),attribute("aria-label",ctx_r2.pageLabel(ctx_r2.end+1))}}const _c129=function(){return{"k-pager-numbers":!0,"k-reset":!0}},_c130=function(){return{"k-pager-input":!0,"k-label":!0}},_c131=function(a0,a1){return{keydown:a0,focusout:a1}};function PagerPageSizesComponent_option_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"option",4),text(1),elementEnd()),2&rf){const ctx_r1=nextContext();property("value",ctx_r1.pageSize),advance(1),textInterpolate(ctx_r1.pageSize)}}function PagerPageSizesComponent_option_3_Template(rf,ctx){if(1&rf&&(elementStart(0,"option",5),text(1),elementEnd()),2&rf){const page_r3=ctx.$implicit,ctx_r2=nextContext();property("value",ctx_r2.getValue(page_r3))("selected",ctx_r2.getSelectedState(page_r3)),advance(1),textInterpolate1(" ",page_r3.text," ")}}const _c132=["kendoGridGroupHeader",""];function GroupHeaderComponent_ng_template_0_td_0_Template(rf,ctx){1&rf&&element(0,"td",4)}function GroupHeaderComponent_ng_template_0_Template(rf,ctx){if(1&rf&&template(0,GroupHeaderComponent_ng_template_0_td_0_Template,1,0,"td",3),2&rf){const ctx_r0=nextContext();property("ngForOf",ctx_r0.prefixGroupCell(ctx_r0.item))}}function GroupHeaderComponent_td_1_ng_template_2_ng_template_1_Template(rf,ctx){if(1&rf&&(text(0),pipe(1,"valueOf")),2&rf){const ctx_r6=nextContext(3);textInterpolate2(" ",ctx_r6.groupTitle(ctx_r6.item),": ",pipeBind3(1,2,ctx_r6.item.data,"value",ctx_r6.formatForGroup(ctx_r6.item))," ")}}function GroupHeaderComponent_td_1_ng_template_2_ng_template_2_Template(rf,ctx){}const _c133=function(a0,a1){return{"k-i-collapse":a0,"k-i-expand":a1}},_c134=function(a0,a1,a2,a3,a4,a5,a6,a7){return{templateRef:a0,group:a1,aggregates:a2,value:a3,field:a4,index:a5,expanded:a6,$implicit:a7}};function GroupHeaderComponent_td_1_ng_template_2_Template(rf,ctx){if(1&rf){const _r9=getCurrentView();elementStart(0,"a",7),listener("click",(function(){restoreView(_r9);const ctx_r8=nextContext(2);return ctx_r8.toggleGroup(ctx_r8.item)})),elementEnd(),template(1,GroupHeaderComponent_td_1_ng_template_2_ng_template_1_Template,2,6,"ng-template",0),template(2,GroupHeaderComponent_td_1_ng_template_2_ng_template_2_Template,0,0,"ng-template",8)}if(2&rf){const ctx_r5=nextContext(2);property("ngClass",pureFunction2(3,_c133,ctx_r5.isExpanded,!ctx_r5.isExpanded)),advance(1),property("ngIf",!ctx_r5.groupHeaderTemplate(ctx_r5.item)),advance(1),property("templateContext",function(slotOffset,pureFn,exp1,exp2,exp3,exp4,exp5,exp6,exp7,exp8,thisArg){const bindingIndex=getBindingRoot()+6,lView=getLView(),different=bindingUpdated4(lView,bindingIndex,exp1,exp2,exp3,exp4);return bindingUpdated4(lView,bindingIndex+4,exp5,exp6,exp7,exp8)||different?updateBinding(lView,bindingIndex+8,pureFn(exp1,exp2,exp3,exp4,exp5,exp6,exp7,exp8)):getBinding(lView,bindingIndex+8)}(0,_c134,ctx_r5.groupHeaderTemplate(ctx_r5.item),ctx_r5.item.data,null==ctx_r5.item.data?null:ctx_r5.item.data.aggregates,null==ctx_r5.item.data?null:ctx_r5.item.data.value,null==ctx_r5.item.data?null:ctx_r5.item.data.field,ctx_r5.item.index,ctx_r5.isExpanded,ctx_r5.item.data))}}function GroupHeaderComponent_td_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"td",5),elementStart(1,"p",6),template(2,GroupHeaderComponent_td_1_ng_template_2_Template,3,15,"ng-template",0),elementEnd(),elementEnd()),2&rf){const ctx_r1=nextContext();property("logicalRowIndex",ctx_r1.logicalRowIndex)("logicalColIndex",0)("logicalSlaveCell",ctx_r1.skipGroupDecoration)("groupItem",ctx_r1.item)("colSpan",ctx_r1.logicalColSpan()),attribute("colspan",ctx_r1.groupSpan(ctx_r1.item))("role",ctx_r1.ariaRole())("aria-expanded",ctx_r1.isExpanded),advance(2),property("ngIf",!ctx_r1.skipGroupDecoration)}}const _c135=function(a0,a1,a2,a3,a4,a5){return{group:a0,aggregates:a1,value:a2,field:a3,index:a4,$implicit:a5}};function GroupHeaderComponent_ng_container_2_td_1_ng_container_1_Template(rf,ctx){if(1&rf&&elementContainer(0,12),2&rf){const column_r11=nextContext().$implicit,ctx_r13=nextContext(2);property("ngTemplateOutlet",column_r11.groupHeaderColumnTemplateRef)("ngTemplateOutletContext",pureFunction6(2,_c135,ctx_r13.item.data,null==ctx_r13.item.data?null:ctx_r13.item.data.aggregates,null==ctx_r13.item.data?null:ctx_r13.item.data.value,null==ctx_r13.item.data?null:ctx_r13.item.data.field,ctx_r13.item.index,ctx_r13.item.data))}}function GroupHeaderComponent_ng_container_2_td_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"td",10),template(1,GroupHeaderComponent_ng_container_2_td_1_ng_container_1_Template,1,9,"ng-container",11),elementEnd()),2&rf){const column_r11=ctx.$implicit,index_r12=ctx.index,ctx_r10=nextContext(2);property("logicalRowIndex",ctx_r10.logicalRowIndex)("logicalColIndex",index_r12+1)("logicalSlaveCell",!1)("groupItem",ctx_r10.item)("colSpan",1),advance(1),property("ngIf",column_r11.groupHeaderColumnTemplateRef)}}function GroupHeaderComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),template(1,GroupHeaderComponent_ng_container_2_td_1_Template,2,6,"td",9),elementContainerEnd()),2&rf){const ctx_r2=nextContext();advance(1),property("ngForOf",ctx_r2.groupHeaderColumns)}}const _c136=function(){return{lastTarget:!0}};function GroupPanelComponent_ng_template_0_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",3),text(1),elementEnd()),2&rf){const ctx_r0=nextContext();property("context",pureFunction0(2,_c136)),advance(1),textInterpolate1(" ",ctx_r0.text," ")}}const _c137=function(a0){return{field:a0}},_c138=function(a0,a2){return{field:a0,type:"groupIndicator",hint:a2}};function GroupPanelComponent_div_1_Template(rf,ctx){if(1&rf){const _r6=getCurrentView();elementStart(0,"div",3),elementStart(1,"div",4),listener("directionChange",(function($event){return restoreView(_r6),nextContext().directionChange($event)}))("remove",(function($event){return restoreView(_r6),nextContext().remove($event)})),elementEnd(),elementEnd()}if(2&rf){const group_r3=ctx.$implicit,index_r4=ctx.index,ctx_r1=nextContext();property("context",pureFunction1(5,_c137,group_r3.field)),advance(1),property("enableDrag",!0)("context",pureFunction2(7,_c138,group_r3.field,ctx_r1.groupTitles[index_r4]))("group",group_r3)("groupTitle",ctx_r1.groupTitles[index_r4])}}function GroupPanelComponent_div_2_Template(rf,ctx){1&rf&&(elementStart(0,"div",3),text(1,""),elementEnd()),2&rf&&property("context",pureFunction0(1,_c136))}const _c139=["kendoGroupIndicator",""],_c140=["kendoGridHeader",""];function HeaderComponent_ng_template_0_tr_0_th_1_Template(rf,ctx){1&rf&&element(0,"th",7)}function HeaderComponent_ng_template_0_tr_0_th_2_Template(rf,ctx){1&rf&&element(0,"th",8),2&rf&&property("logicalRowIndex",nextContext().index)("logicalColIndex",0)}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_kendo_grid_filter_menu_1_Template(rf,ctx){if(1&rf&&element(0,"kendo-grid-filter-menu",15),2&rf){const column_r10=nextContext(2).$implicit,ctx_r15=nextContext(3);property("column",column_r10)("filter",ctx_r15.filter)}}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_kendo_grid_column_menu_2_Template(rf,ctx){if(1&rf&&element(0,"kendo-grid-column-menu",16),2&rf){const column_r10=nextContext(2).$implicit,ctx_r16=nextContext(3);property("standalone",!1)("settings",ctx_r16.columnMenu)("column",column_r10)("columnMenuTemplate",ctx_r16.columnMenuTemplate)("sort",ctx_r16.sort)("filter",ctx_r16.filter)("sortable",ctx_r16.sortable)}}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_3_ng_template_0_Template(rf,ctx){}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_3_ng_template_1_Template(rf,ctx){1&rf&&text(0),2&rf&&textInterpolate(nextContext(3).$implicit.displayTitle)}const _c141=function(a0,a1,a2,a3){return{templateRef:a0,columnIndex:a1,column:a2,$implicit:a3}};function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_3_Template(rf,ctx){if(1&rf&&(template(0,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_3_ng_template_0_Template,0,0,"ng-template",17),template(1,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_3_ng_template_1_Template,1,1,"ng-template",0)),2&rf){const column_r10=nextContext(2).$implicit;property("templateContext",pureFunction4(2,_c141,column_r10.headerTemplateRef,column_r10.leafIndex,column_r10,column_r10)),advance(1),property("ngIf",!column_r10.headerTemplateRef)}}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_4_ng_template_2_Template(rf,ctx){}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_4_ng_template_3_Template(rf,ctx){1&rf&&text(0),2&rf&&textInterpolate(nextContext(3).$implicit.displayTitle)}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_4_span_5_Template(rf,ctx){if(1&rf&&(elementStart(0,"span",23),text(1),elementEnd()),2&rf){const column_r10=nextContext(3).$implicit,ctx_r30=nextContext(3);advance(1),textInterpolate(ctx_r30.sortOrder(column_r10.field))}}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_4_Template(rf,ctx){if(1&rf){const _r35=getCurrentView();elementStart(0,"span",18,19),listener("click",(function($event){restoreView(_r35);const _r27=reference(1),column_r10=nextContext(2).$implicit;return nextContext(3).onSortClick(column_r10,$event,_r27)})),template(2,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_4_ng_template_2_Template,0,0,"ng-template",17),template(3,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_4_ng_template_3_Template,1,1,"ng-template",0),element(4,"span",20),template(5,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_4_span_5_Template,2,1,"span",21),elementEnd(),element(6,"span",22)}if(2&rf){const column_r10=nextContext(2).$implicit,ctx_r18=nextContext(3);advance(2),property("templateContext",pureFunction4(6,_c141,column_r10.headerTemplateRef,column_r10.leafIndex,column_r10,column_r10)),advance(1),property("ngIf",!column_r10.headerTemplateRef),advance(1),property("ngClass",ctx_r18.sortIcon(column_r10.field)),attribute("aria-label",ctx_r18.sortableLabel),advance(1),property("ngIf",ctx_r18.showSortNumbering(column_r10)),advance(1),property("innerHtml",ctx_r18.sortStatus(column_r10),sanitizeHtml)}}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_5_Template(rf,ctx){if(1&rf&&(element(0,"input",24),element(1,"label",25)),2&rf){const ctx_r19=nextContext(5);attribute("id",ctx_r19.selectAllCheckboxId()),advance(1),attribute("for",ctx_r19.selectAllCheckboxId())}}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_span_6_Template(rf,ctx){if(1&rf&&element(0,"span",26),2&rf){const column_r10=nextContext(2).$implicit,ctx_r20=nextContext(3);property("column",column_r10)("columns",ctx_r20.columns)}}const _c142=function(a0,a2,a3,a4){return{field:a0,type:"column",column:a2,hint:a3,lastColumn:a4}};function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_Template(rf,ctx){if(1&rf){const _r40=getCurrentView();elementStart(0,"th",11),listener("keydown",(function($event){restoreView(_r40);const column_r10=nextContext().$implicit;return nextContext(3).onHeaderKeydown(column_r10,$event)})),template(1,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_kendo_grid_filter_menu_1_Template,1,2,"kendo-grid-filter-menu",12),template(2,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_kendo_grid_column_menu_2_Template,1,7,"kendo-grid-column-menu",13),template(3,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_3_Template,2,7,"ng-template",0),template(4,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_4_Template,7,11,"ng-template",0),template(5,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_ng_template_5_Template,2,2,"ng-template",0),template(6,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_span_6_Template,1,2,"span",14),elementEnd()}if(2&rf){const ctx_r41=nextContext(),column_r10=ctx_r41.$implicit,columnIndex_r11=ctx_r41.index,last_r12=ctx_r41.last,levelIndex_r4=nextContext().index,ctx_r13=nextContext(2);classProp("k-filterable",ctx_r13.showFilterMenu&&ctx_r13.isFilterable(column_r10)||ctx_r13.showColumnMenu(column_r10))("k-first",ctx_r13.isFirstOnRow(column_r10,columnIndex_r11)),property("logicalRowIndex",levelIndex_r4)("logicalColIndex",ctx_r13.logicalColumnIndex(column_r10))("colSpan",column_r10.colspan)("rowSpan",column_r10.rowspan(ctx_r13.totalColumnLevels))("enableDrag",ctx_r13.shouldActivate(column_r10))("context",pureFunction4(21,_c142,column_r10.field,column_r10,column_r10.title||column_r10.field,last_r12&&0===columnIndex_r11))("ngClass",column_r10.headerClass)("ngStyle",column_r10.headerStyle),attribute("aria-sort",ctx_r13.sortState(column_r10))("rowspan",column_r10.rowspan(ctx_r13.totalColumnLevels))("colspan",column_r10.colspan),advance(1),property("ngIf",ctx_r13.showFilterMenu&&ctx_r13.isFilterable(column_r10)),advance(1),property("ngIf",ctx_r13.showColumnMenu(column_r10)),advance(1),property("ngIf",!ctx_r13.isSortable(column_r10)),advance(1),property("ngIf",ctx_r13.isSortable(column_r10)),advance(1),property("ngIf",ctx_r13.isCheckboxColumn(column_r10)&&!column_r10.headerTemplateRef&&column_r10.showSelectAll),advance(1),property("ngIf",ctx_r13.resizable)}}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_1_kendo_grid_column_menu_1_Template(rf,ctx){if(1&rf&&element(0,"kendo-grid-column-menu",29),2&rf){const column_r10=nextContext(2).$implicit,ctx_r43=nextContext(3);property("standalone",!1)("settings",ctx_r43.columnMenu)("column",column_r10)("columnMenuTemplate",ctx_r43.columnMenuTemplate)}}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_1_ng_template_2_Template(rf,ctx){}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_1_ng_template_3_Template(rf,ctx){1&rf&&text(0),2&rf&&textInterpolate(nextContext(2).$implicit.displayTitle)}function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_1_span_4_Template(rf,ctx){if(1&rf&&element(0,"span",26),2&rf){const column_r10=nextContext(2).$implicit,ctx_r46=nextContext(3);property("column",column_r10)("columns",ctx_r46.columns)}}const _c143=function(a1,a2,a3){return{type:"columnGroup",column:a1,hint:a2,lastColumn:a3}};function HeaderComponent_ng_template_0_tr_0_ng_template_3_th_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"th",27),template(1,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_1_kendo_grid_column_menu_1_Template,1,4,"kendo-grid-column-menu",28),template(2,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_1_ng_template_2_Template,0,0,"ng-template",17),template(3,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_1_ng_template_3_Template,1,1,"ng-template",0),template(4,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_1_span_4_Template,1,2,"span",14),elementEnd()),2&rf){const ctx_r50=nextContext(),column_r10=ctx_r50.$implicit,columnIndex_r11=ctx_r50.index,last_r12=ctx_r50.last,levelIndex_r4=nextContext().index,ctx_r14=nextContext(2);classProp("k-first",ctx_r14.isFirstOnRow(column_r10,columnIndex_r11))("k-filterable",ctx_r14.showColumnMenu(column_r10)),property("logicalRowIndex",levelIndex_r4)("logicalColIndex",ctx_r14.logicalColumnIndex(column_r10))("rowSpan",column_r10.rowspan(ctx_r14.totalColumnLevels))("colSpan",column_r10.colspan)("enableDrag",ctx_r14.shouldActivate(column_r10))("context",pureFunction3(18,_c143,column_r10,column_r10.title,last_r12&&0===columnIndex_r11))("ngClass",column_r10.headerClass)("ngStyle",column_r10.headerStyle),attribute("rowspan",column_r10.rowspan(ctx_r14.totalColumnLevels))("colspan",column_r10.colspan),advance(1),property("ngIf",ctx_r14.showColumnMenu(column_r10)),advance(1),property("templateContext",pureFunction4(22,_c141,column_r10.headerTemplateRef,ctx_r14.lockedColumnsCount+columnIndex_r11,column_r10,column_r10)),advance(1),property("ngIf",!column_r10.headerTemplateRef),advance(1),property("ngIf",ctx_r14.resizable)}}function HeaderComponent_ng_template_0_tr_0_ng_template_3_Template(rf,ctx){if(1&rf&&(template(0,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_0_Template,7,26,"th",9),template(1,HeaderComponent_ng_template_0_tr_0_ng_template_3_th_1_Template,5,27,"th",10)),2&rf){const column_r10=ctx.$implicit,ctx_r7=nextContext(3);property("ngIf",!ctx_r7.isColumnGroupComponent(column_r10)),advance(1),property("ngIf",ctx_r7.isColumnGroupComponent(column_r10))}}function HeaderComponent_ng_template_0_tr_0_Template(rf,ctx){if(1&rf&&(elementStart(0,"tr",3),template(1,HeaderComponent_ng_template_0_tr_0_th_1_Template,1,0,"th",4),template(2,HeaderComponent_ng_template_0_tr_0_th_2_Template,1,2,"th",5),template(3,HeaderComponent_ng_template_0_tr_0_ng_template_3_Template,2,2,"ng-template",6),elementEnd()),2&rf){const levelIndex_r4=ctx.index,ctx_r1=nextContext(2);property("logicalRowIndex",levelIndex_r4)("logicalSlaveRow",ctx_r1.lockedColumnsCount>0)("logicalCellsCount",ctx_r1.columns.length)("logicalSlaveCellsCount",ctx_r1.unlockedColumnsCount),advance(1),property("ngForOf",ctx_r1.groups),advance(1),property("ngIf",null==ctx_r1.detailTemplate?null:ctx_r1.detailTemplate.templateRef),advance(1),property("ngForOf",ctx_r1.columnsForLevel(levelIndex_r4))("ngForTrackBy",ctx_r1.trackByIndex)}}function HeaderComponent_ng_template_0_tr_1_Template(rf,ctx){if(1&rf&&element(0,"tr",30),2&rf){const ctx_r2=nextContext(2);property("columns",ctx_r2.leafColumns)("filter",ctx_r2.filter)("groups",ctx_r2.groups)("detailTemplate",ctx_r2.detailTemplate)("lockedColumnsCount",ctx_r2.lockedColumnsCount)("logicalRowIndex",ctx_r2.totalColumnLevels+1)("logicalSlaveRow",ctx_r2.lockedColumnsCount>0)("logicalCellsCount",ctx_r2.columns.length)("logicalSlaveCellsCount",ctx_r2.unlockedColumnsCount)}}function HeaderComponent_ng_template_0_Template(rf,ctx){if(1&rf&&(template(0,HeaderComponent_ng_template_0_tr_0_Template,4,8,"tr",1),template(1,HeaderComponent_ng_template_0_tr_1_Template,1,9,"tr",2)),2&rf){const ctx_r0=nextContext();property("ngForOf",ctx_r0.columnLevels),advance(1),property("ngIf",ctx_r0.showFilterRow)}}function FilterMenuComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r4=getCurrentView();elementStart(0,"kendo-grid-filter-menu-container",4),listener("close",(function(){return restoreView(_r4),nextContext().close()})),elementEnd()}if(2&rf){const ctx_r2=nextContext();property("column",ctx_r2.column)("filter",ctx_r2.filter)}}const _c144=function(a1){return{"k-grid-filter":!0,"k-state-active":a1}};function FilterMenuContainerComponent_ng_container_3_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),elementContainer(1,7),elementContainerEnd()),2&rf){const ctx_r0=nextContext();advance(1),property("filterService",ctx_r0.childService)("column",ctx_r0.column)("filter",ctx_r0.childFilter)}}function FilterMenuContainerComponent_ng_container_4_1_ng_template_0_Template(rf,ctx){}function FilterMenuContainerComponent_ng_container_4_1_Template(rf,ctx){if(1&rf&&template(0,FilterMenuContainerComponent_ng_container_4_1_ng_template_0_Template,0,0,"ng-template",9),2&rf){const ctx_r2=nextContext(2);property("ngTemplateOutlet",ctx_r2.column.filterMenuTemplateRef)("ngTemplateOutletContext",ctx_r2.templateContext)}}function FilterMenuContainerComponent_ng_container_4_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),template(1,FilterMenuContainerComponent_ng_container_4_1_Template,1,2,void 0,8),elementContainerEnd()),2&rf){const ctx_r1=nextContext();advance(1),property("ngIf",ctx_r1.column.filterMenuTemplateRef)}}function StringFilterMenuComponent_kendo_dropdownlist_1_Template(rf,ctx){if(1&rf){const _r3=getCurrentView();elementStart(0,"kendo-dropdownlist",3),listener("valueChange",(function($event){return restoreView(_r3),nextContext().logicChange($event)})),elementEnd()}if(2&rf){const ctx_r0=nextContext();property("data",ctx_r0.logicOperators)("valuePrimitive",!0)("value",null==ctx_r0.filter?null:ctx_r0.filter.logic)}}function StringFilterMenuComponent_kendo_grid_string_filter_menu_input_2_Template(rf,ctx){if(1&rf&&element(0,"kendo-grid-string-filter-menu-input",4),2&rf){const ctx_r1=nextContext();property("operators",ctx_r1.operators)("currentFilter",ctx_r1.secondFilter)("filterService",ctx_r1.filterService)("column",ctx_r1.column)("filter",ctx_r1.filter)}}function NumericFilterMenuComponent_kendo_dropdownlist_1_Template(rf,ctx){if(1&rf){const _r3=getCurrentView();elementStart(0,"kendo-dropdownlist",3),listener("valueChange",(function($event){return restoreView(_r3),nextContext().logicChange($event)})),elementEnd()}if(2&rf){const ctx_r0=nextContext();property("data",ctx_r0.logicOperators)("valuePrimitive",!0)("value",null==ctx_r0.filter?null:ctx_r0.filter.logic)}}function NumericFilterMenuComponent_kendo_grid_numeric_filter_menu_input_2_Template(rf,ctx){if(1&rf&&element(0,"kendo-grid-numeric-filter-menu-input",4),2&rf){const ctx_r1=nextContext();property("operators",ctx_r1.operators)("currentFilter",ctx_r1.secondFilter)("filterService",ctx_r1.filterService)("column",ctx_r1.column)("filter",ctx_r1.filter)("format",ctx_r1.format)("decimals",ctx_r1.decimals)("spinners",ctx_r1.spinners)("min",ctx_r1.min)("max",ctx_r1.max)("step",ctx_r1.step)}}function DateFilterMenuComponent_kendo_dropdownlist_1_Template(rf,ctx){if(1&rf){const _r3=getCurrentView();elementStart(0,"kendo-dropdownlist",3),listener("valueChange",(function($event){return restoreView(_r3),nextContext().logicChange($event)})),elementEnd()}if(2&rf){const ctx_r0=nextContext();property("data",ctx_r0.logicOperators)("valuePrimitive",!0)("value",null==ctx_r0.filter?null:ctx_r0.filter.logic)}}function DateFilterMenuComponent_kendo_grid_date_filter_menu_input_2_Template(rf,ctx){if(1&rf&&element(0,"kendo-grid-date-filter-menu-input",4),2&rf){const ctx_r1=nextContext();property("operators",ctx_r1.operators)("currentFilter",ctx_r1.secondFilter)("filterService",ctx_r1.filterService)("column",ctx_r1.column)("filter",ctx_r1.filter)("activeView",ctx_r1.activeView)("bottomView",ctx_r1.bottomView)("topView",ctx_r1.topView)("format",ctx_r1.format)("formatPlaceholder",ctx_r1.formatPlaceholder)("placeholder",ctx_r1.placeholder)("min",ctx_r1.min)("max",ctx_r1.max)("weekNumber",ctx_r1.weekNumber)}}function BooleanFilterMenuComponent_li_1_Template(rf,ctx){if(1&rf){const _r3=getCurrentView();elementStart(0,"li"),elementStart(1,"input",2),listener("change",(function(){restoreView(_r3);const item_r1=ctx.$implicit;return nextContext().onChange(item_r1.value)})),elementEnd(),elementStart(2,"label",3),text(3),elementEnd(),elementEnd()}if(2&rf){const item_r1=ctx.$implicit,ctx_r0=nextContext();advance(1),property("name",ctx_r0.idPrefix)("checked",ctx_r0.isSelected(item_r1.value)),attribute("id",ctx_r0.radioId(item_r1.value)),advance(1),attribute("for",ctx_r0.radioId(item_r1.value)),advance(1),textInterpolate(item_r1.text)}}function ColumnListComponent_label_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"label",3),element(1,"input",4),elementStart(2,"span",5),text(3),elementEnd(),elementEnd()),2&rf){const column_r2=ctx.$implicit,index_r3=ctx.index,ctx_r0=nextContext();advance(1),property("checked",!column_r2.hidden)("disabled",ctx_r0.isDisabled(column_r2)),attribute("data-index",index_r3),advance(2),textInterpolate(column_r2.displayTitle)}}function ColumnListComponent_div_2_Template(rf,ctx){if(1&rf){const _r5=getCurrentView();elementStart(0,"div",6),elementStart(1,"button",7),listener("click",(function(){return restoreView(_r5),nextContext().cancelChanges()})),text(2),elementEnd(),elementStart(3,"button",8),listener("click",(function(){return restoreView(_r5),nextContext().applyChanges()})),text(4),elementEnd(),elementEnd()}if(2&rf){const ctx_r1=nextContext();property("ngClass",ctx_r1.actionsClass),advance(2),textInterpolate(ctx_r1.resetText),advance(2),textInterpolate(ctx_r1.applyText)}}function ColumnChooserComponent_ng_template_3_Template(rf,ctx){if(1&rf){const _r4=getCurrentView();elementStart(0,"span",4),text(1),elementEnd(),elementStart(2,"kendo-grid-columnlist",5),listener("apply",(function($event){return restoreView(_r4),nextContext().onApply($event)}))("columnChange",(function($event){return restoreView(_r4),nextContext().onChange($event)})),elementEnd()}if(2&rf){const ctx_r2=nextContext();advance(1),textInterpolate(ctx_r2.localization.get("columns")),advance(1),property("columns",ctx_r2.columns)("applyText",ctx_r2.localization.get("columnsApply"))("resetText",ctx_r2.localization.get("columnsReset"))("autoSync",ctx_r2.autoSync)("allowHideAll",ctx_r2.allowHideAll)}}function ColumnMenuChooserComponent_ng_template_1_Template(rf,ctx){if(1&rf){const _r2=getCurrentView();elementStart(0,"kendo-grid-columnlist",2),listener("apply",(function($event){return restoreView(_r2),nextContext().onApply($event)})),elementEnd()}if(2&rf){const ctx_r0=nextContext();property("applyText",ctx_r0.localization.get("columnsApply"))("resetText",ctx_r0.localization.get("columnsReset"))("columns",ctx_r0.columns)("autoSync",!1)("allowHideAll",!1)("actionsClass",ctx_r0.actionsClass)}}function ColumnMenuFilterComponent_ng_template_1_Template(rf,ctx){if(1&rf){const _r2=getCurrentView();elementStart(0,"kendo-grid-filter-menu-container",2),listener("close",(function(){return restoreView(_r2),nextContext().close()})),elementEnd()}if(2&rf){const ctx_r0=nextContext();property("column",ctx_r0.service.column)("filter",ctx_r0.service.filter)("actionsClass",ctx_r0.actionsClass)}}function ColumnMenuItemComponent_span_1_Template(rf,ctx){1&rf&&element(0,"span",3),2&rf&&property("ngClass",nextContext().iconClass)}function ColumnMenuItemComponent_div_3_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",4),elementContainer(1,5),element(2,"div"),elementEnd()),2&rf){const ctx_r1=nextContext();property("@state",ctx_r1.contentState),advance(1),property("ngTemplateOutlet",ctx_r1.contentTemplate.templateRef)}}const _c145=function(a0,a1){return{service:a0,column:a1}};function ColumnMenuComponent_ng_template_3_Template(rf,ctx){if(1&rf&&elementContainer(0,5),2&rf){const ctx_r2=nextContext(),_r3=reference(6);property("ngTemplateOutlet",ctx_r2.column.columnMenuTemplateRef||ctx_r2.columnMenuTemplate||_r3)("ngTemplateOutletContext",pureFunction2(2,_c145,ctx_r2.service,ctx_r2.column))}}function ColumnMenuComponent_ng_template_5_kendo_grid_columnmenu_sort_0_Template(rf,ctx){1&rf&&element(0,"kendo-grid-columnmenu-sort",8),2&rf&&property("service",nextContext(2).service)}function ColumnMenuComponent_ng_template_5_kendo_grid_columnmenu_lock_1_Template(rf,ctx){1&rf&&element(0,"kendo-grid-columnmenu-lock",8),2&rf&&property("service",nextContext(2).service)}function ColumnMenuComponent_ng_template_5_kendo_grid_columnmenu_chooser_2_Template(rf,ctx){if(1&rf){const _r10=getCurrentView();elementStart(0,"kendo-grid-columnmenu-chooser",9),listener("expand",(function(){return restoreView(_r10),nextContext(2).onColumnsExpand()})),elementEnd()}if(2&rf){const ctx_r7=nextContext(2);property("service",ctx_r7.service)("expanded",ctx_r7.expandedColumns)}}function ColumnMenuComponent_ng_template_5_kendo_grid_columnmenu_filter_3_Template(rf,ctx){if(1&rf){const _r12=getCurrentView();elementStart(0,"kendo-grid-columnmenu-filter",9),listener("expand",(function(){return restoreView(_r12),nextContext(2).onFilterExpand()})),elementEnd()}if(2&rf){const ctx_r8=nextContext(2);property("service",ctx_r8.service)("expanded",ctx_r8.expandedFilter)}}function ColumnMenuComponent_ng_template_5_Template(rf,ctx){if(1&rf&&(template(0,ColumnMenuComponent_ng_template_5_kendo_grid_columnmenu_sort_0_Template,1,1,"kendo-grid-columnmenu-sort",6),template(1,ColumnMenuComponent_ng_template_5_kendo_grid_columnmenu_lock_1_Template,1,1,"kendo-grid-columnmenu-lock",6),template(2,ColumnMenuComponent_ng_template_5_kendo_grid_columnmenu_chooser_2_Template,1,2,"kendo-grid-columnmenu-chooser",7),template(3,ColumnMenuComponent_ng_template_5_kendo_grid_columnmenu_filter_3_Template,1,2,"kendo-grid-columnmenu-filter",7)),2&rf){const ctx_r4=nextContext();property("ngIf",ctx_r4.hasSort),advance(1),property("ngIf",ctx_r4.hasLock),advance(1),property("ngIf",ctx_r4.hasColumnChooser),advance(1),property("ngIf",ctx_r4.hasFilter)}}const _c146=function(a0){return{"k-state-active":a0}},_c147=["kendoGridTableBody",""];function TableBodyComponent_ng_template_0_ng_template_1_td_0_Template(rf,ctx){1&rf&&element(0,"td",7)}function TableBodyComponent_ng_template_0_ng_template_1_Template(rf,ctx){1&rf&&template(0,TableBodyComponent_ng_template_0_ng_template_1_td_0_Template,1,0,"td",6),2&rf&&property("ngForOf",nextContext(2).groups)}function TableBodyComponent_ng_template_0_td_2_Template(rf,ctx){1&rf&&element(0,"td",8),2&rf&&property("logicalRowIndex",nextContext(2).addRowLogicalIndex())("logicalColIndex",0)}function TableBodyComponent_ng_template_0_td_3_Template(rf,ctx){if(1&rf&&element(0,"td",9),2&rf){const column_r8=ctx.$implicit,columnIndex_r9=ctx.index,ctx_r5=nextContext(2);property("rowIndex",-1)("columnIndex",ctx_r5.lockedColumnsCount+columnIndex_r9)("isNew",!0)("column",column_r8)("dataItem",ctx_r5.newDataItem)("ngClass",column_r8.cssClass)("ngStyle",column_r8.style)("logicalRowIndex",ctx_r5.addRowLogicalIndex())("logicalColIndex",ctx_r5.logicalColIndex(column_r8))("colSpan",column_r8.colspan),attribute("colspan",column_r8.colspan)}}function TableBodyComponent_ng_template_0_Template(rf,ctx){if(1&rf&&(elementStart(0,"tr",3),template(1,TableBodyComponent_ng_template_0_ng_template_1_Template,1,1,"ng-template",0),template(2,TableBodyComponent_ng_template_0_td_2_Template,1,2,"td",4),template(3,TableBodyComponent_ng_template_0_td_3_Template,1,11,"td",5),elementEnd()),2&rf){const ctx_r0=nextContext();property("logicalRowIndex",ctx_r0.addRowLogicalIndex())("logicalSlaveRow",ctx_r0.lockedColumnsCount>0)("logicalCellsCount",ctx_r0.columns.length)("logicalSlaveCellsCount",ctx_r0.unlockedColumnsCount),advance(1),property("ngIf",!ctx_r0.skipGroupDecoration),advance(1),property("ngIf",null==ctx_r0.detailTemplate?null:ctx_r0.detailTemplate.templateRef),advance(1),property("ngForOf",ctx_r0.columns)("ngForTrackBy",ctx_r0.trackByColumns)}}function TableBodyComponent_tr_1_ng_template_2_Template(rf,ctx){}function TableBodyComponent_tr_1_ng_container_3_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),text(1),elementContainerEnd()),2&rf){const ctx_r11=nextContext(2);advance(1),textInterpolate1(" ",ctx_r11.noRecordsText," ")}}const _c148=function(a0){return{templateRef:a0}};function TableBodyComponent_tr_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"tr",10),elementStart(1,"td"),template(2,TableBodyComponent_tr_1_ng_template_2_Template,0,0,"ng-template",11),template(3,TableBodyComponent_tr_1_ng_container_3_Template,2,1,"ng-container",12),elementEnd(),elementEnd()),2&rf){const ctx_r1=nextContext();advance(1),attribute("colspan",ctx_r1.colSpan),advance(1),property("ngIf",null==ctx_r1.noRecordsTemplate?null:ctx_r1.noRecordsTemplate.templateRef)("templateContext",pureFunction1(4,_c148,null==ctx_r1.noRecordsTemplate?null:ctx_r1.noRecordsTemplate.templateRef)),advance(1),property("ngIf",!(null!=ctx_r1.noRecordsTemplate&&ctx_r1.noRecordsTemplate.templateRef))}}function TableBodyComponent_ng_template_2_tr_0_Template(rf,ctx){if(1&rf&&element(0,"tr",17),2&rf){const ctx_r18=nextContext(),item_r12=ctx_r18.$implicit,rowIndex_r13=ctx_r18.index,ctx_r14=nextContext();property("columns",ctx_r14.columns)("groups",ctx_r14.groups)("item",item_r12)("hasDetails",null==ctx_r14.detailTemplate?null:ctx_r14.detailTemplate.templateRef)("skipGroupDecoration",ctx_r14.skipGroupDecoration)("hasGroupHeaderColumn",ctx_r14.hasGroupHeaderColumn)("groupHeaderColumns",ctx_r14.groupHeaderColumns)("rowIndex",rowIndex_r13+1)("totalColumnsCount",ctx_r14.totalColumnsCount)("logicalRowIndex",ctx_r14.logicalRowIndex(rowIndex_r13))("logicalSlaveRow",ctx_r14.lockedColumnsCount>0)("logicalCellsCount",ctx_r14.columns.length)("logicalSlaveCellsCount",ctx_r14.groupHeaderSlaveCellsCount)}}function TableBodyComponent_ng_template_2_tr_1_ng_template_1_td_0_Template(rf,ctx){1&rf&&element(0,"td",7)}function TableBodyComponent_ng_template_2_tr_1_ng_template_1_Template(rf,ctx){1&rf&&template(0,TableBodyComponent_ng_template_2_tr_1_ng_template_1_td_0_Template,1,0,"td",6),2&rf&&property("ngForOf",nextContext(3).groups)}function TableBodyComponent_ng_template_2_tr_1_td_2_a_1_Template(rf,ctx){if(1&rf){const _r27=getCurrentView();elementStart(0,"a",23),listener("click",(function(){restoreView(_r27);const item_r12=nextContext(3).$implicit;return nextContext().toggleRow(item_r12.index,item_r12.data)})),elementEnd()}if(2&rf){const item_r12=nextContext(3).$implicit,ctx_r24=nextContext();property("ngClass",ctx_r24.detailButtonStyles(item_r12)),attribute("title",ctx_r24.detailButtonTitle(item_r12))}}function TableBodyComponent_ng_template_2_tr_1_td_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"td",21),template(1,TableBodyComponent_ng_template_2_tr_1_td_2_a_1_Template,1,2,"a",22),elementEnd()),2&rf){const ctx_r29=nextContext(2),rowIndex_r13=ctx_r29.index,item_r12=ctx_r29.$implicit,ctx_r20=nextContext();property("logicalRowIndex",ctx_r20.logicalRowIndex(rowIndex_r13))("logicalColIndex",0)("dataRowIndex",item_r12.index)("dataItem",item_r12.data)("detailExpandCell",!0),advance(1),property("ngIf",ctx_r20.detailTemplate.showIf(item_r12.data,item_r12.index))}}function TableBodyComponent_ng_template_2_tr_1_td_3_Template(rf,ctx){if(1&rf&&element(0,"td",24),2&rf){const column_r30=ctx.$implicit,columnIndex_r31=ctx.index,ctx_r32=nextContext(2),item_r12=ctx_r32.$implicit,rowIndex_r13=ctx_r32.index,ctx_r21=nextContext();classProp("k-grid-edit-cell",ctx_r21.isEditingCell(item_r12.index,column_r30)),property("rowIndex",item_r12.index)("columnIndex",ctx_r21.lockedColumnsCount+columnIndex_r31)("column",column_r30)("dataItem",item_r12.data)("logicalRowIndex",ctx_r21.logicalRowIndex(rowIndex_r13))("logicalColIndex",ctx_r21.logicalColIndex(column_r30))("dataRowIndex",item_r12.index)("dataItem",item_r12.data)("colIndex",columnIndex_r31)("colSpan",column_r30.colspan)("ngClass",column_r30.cssClass)("ngStyle",column_r30.style),attribute("data-kendo-grid-column-index",ctx_r21.lockedColumnsCount+columnIndex_r31)("colspan",column_r30.colspan)}}const _c149=function(a0,a1){return{dataItem:a0,index:a1}};function TableBodyComponent_ng_template_2_tr_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"tr",18),template(1,TableBodyComponent_ng_template_2_tr_1_ng_template_1_Template,1,1,"ng-template",0),template(2,TableBodyComponent_ng_template_2_tr_1_td_2_Template,2,6,"td",19),template(3,TableBodyComponent_ng_template_2_tr_1_td_3_Template,1,16,"td",20),elementEnd()),2&rf){const ctx_r33=nextContext(),item_r12=ctx_r33.$implicit,rowIndex_r13=ctx_r33.index,ctx_r15=nextContext();classProp("k-alt",ctx_r15.isOdd(item_r12))("k-master-row",null==ctx_r15.detailTemplate?null:ctx_r15.detailTemplate.templateRef)("k-grid-edit-row",ctx_r15.isEditingRow(item_r12.index))("k-state-selected",ctx_r15.isSelectable()&&ctx_r15.isRowSelected(item_r12)),property("dataRowIndex",item_r12.index)("dataItem",item_r12.data)("logicalRowIndex",ctx_r15.logicalRowIndex(rowIndex_r13))("logicalSlaveRow",ctx_r15.lockedColumnsCount>0)("logicalCellsCount",ctx_r15.columns.length)("logicalSlaveCellsCount",ctx_r15.unlockedColumnsCount)("ngClass",ctx_r15.rowClass(pureFunction2(20,_c149,item_r12.data,item_r12.index))),attribute("data-kendo-grid-item-index",item_r12.index),advance(1),property("ngIf",!ctx_r15.skipGroupDecoration),advance(1),property("ngIf",null==ctx_r15.detailTemplate?null:ctx_r15.detailTemplate.templateRef),advance(1),property("ngForOf",ctx_r15.columns)("ngForTrackBy",ctx_r15.trackByColumns)}}function TableBodyComponent_ng_template_2_tr_2_td_1_Template(rf,ctx){1&rf&&element(0,"td",30)}function TableBodyComponent_ng_template_2_tr_2_ng_template_4_Template(rf,ctx){}const _c150=function(a0,a1,a2){return{dataItem:a0,rowIndex:a1,$implicit:a2}};function TableBodyComponent_ng_template_2_tr_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"tr",25),template(1,TableBodyComponent_ng_template_2_tr_2_td_1_Template,1,0,"td",26),element(2,"td",27),elementStart(3,"td",28),template(4,TableBodyComponent_ng_template_2_tr_2_ng_template_4_Template,0,0,"ng-template",29),elementEnd(),elementEnd()),2&rf){const ctx_r37=nextContext(),item_r12=ctx_r37.$implicit,rowIndex_r13=ctx_r37.index,ctx_r16=nextContext();classProp("k-alt",ctx_r16.isOdd(item_r12)),property("dataRowIndex",item_r12.index)("dataItem",item_r12.data)("logicalRowIndex",ctx_r16.logicalRowIndex(rowIndex_r13)+1)("logicalSlaveRow",!1)("logicalCellsCount",1),advance(1),property("ngForOf",ctx_r16.groups),advance(2),property("logicalRowIndex",ctx_r16.logicalRowIndex(rowIndex_r13)+1)("logicalColIndex",0)("dataRowIndex",item_r12.index)("dataItem",item_r12.data)("colIndex",0)("colSpan",ctx_r16.allColumnsSpan+1),attribute("colspan",ctx_r16.columnsSpan),advance(1),property("ngTemplateOutlet",ctx_r16.detailTemplate.templateRef)("ngTemplateOutletContext",pureFunction3(17,_c150,item_r12.data,item_r12.index,item_r12.data))}}function TableBodyComponent_ng_template_2_tr_3_ng_template_1_td_0_Template(rf,ctx){1&rf&&element(0,"td",30)}function TableBodyComponent_ng_template_2_tr_3_ng_template_1_Template(rf,ctx){1&rf&&template(0,TableBodyComponent_ng_template_2_tr_3_ng_template_1_td_0_Template,1,0,"td",26),2&rf&&property("ngForOf",nextContext(3).groups)}function TableBodyComponent_ng_template_2_tr_3_td_2_Template(rf,ctx){if(1&rf&&element(0,"td",8),2&rf){const rowIndex_r13=nextContext(2).index;property("logicalRowIndex",nextContext().logicalRowIndex(rowIndex_r13))("logicalColIndex",0)}}function TableBodyComponent_ng_template_2_tr_3_td_3_ng_template_1_Template(rf,ctx){}const _c151=function(a0,a1,a2,a3,a4,a5){return{templateRef:a0,group:a1,field:a2,column:a3,aggregates:a4,$implicit:a5}};function TableBodyComponent_ng_template_2_tr_3_td_3_Template(rf,ctx){if(1&rf&&(elementStart(0,"td",33),template(1,TableBodyComponent_ng_template_2_tr_3_td_3_ng_template_1_Template,0,0,"ng-template",34),elementEnd()),2&rf){const column_r44=ctx.$implicit,ctx_r47=nextContext(2),rowIndex_r13=ctx_r47.index,item_r12=ctx_r47.$implicit,ctx_r40=nextContext();property("logicalRowIndex",ctx_r40.logicalRowIndex(rowIndex_r13))("logicalColIndex",ctx_r40.logicalColIndex(column_r44)),attribute("data-skip",ctx_r40.skipGroupDecoration),advance(1),property("templateContext",pureFunction6(4,_c151,column_r44.groupFooterTemplateRef,item_r12.data,column_r44.field,column_r44,null==item_r12.data?null:item_r12.data.aggregates,null==item_r12.data?null:item_r12.data.aggregates))}}function TableBodyComponent_ng_template_2_tr_3_Template(rf,ctx){if(1&rf&&(elementStart(0,"tr",31),template(1,TableBodyComponent_ng_template_2_tr_3_ng_template_1_Template,1,1,"ng-template",0),template(2,TableBodyComponent_ng_template_2_tr_3_td_2_Template,1,2,"td",4),template(3,TableBodyComponent_ng_template_2_tr_3_td_3_Template,2,11,"td",32),elementEnd()),2&rf){const rowIndex_r13=nextContext().index,ctx_r17=nextContext();property("logicalRowIndex",ctx_r17.logicalRowIndex(rowIndex_r13))("logicalSlaveRow",ctx_r17.lockedColumnsCount>0)("logicalCellsCount",ctx_r17.columns.length)("logicalSlaveCellsCount",ctx_r17.unlockedColumnsCount),advance(1),property("ngIf",!ctx_r17.skipGroupDecoration),advance(1),property("ngIf",null==ctx_r17.detailTemplate?null:ctx_r17.detailTemplate.templateRef),advance(1),property("ngForOf",ctx_r17.footerColumns)("ngForTrackBy",ctx_r17.trackByColumns)}}function TableBodyComponent_ng_template_2_Template(rf,ctx){if(1&rf&&(template(0,TableBodyComponent_ng_template_2_tr_0_Template,1,13,"tr",13),template(1,TableBodyComponent_ng_template_2_tr_1_Template,4,23,"tr",14),template(2,TableBodyComponent_ng_template_2_tr_2_Template,5,21,"tr",15),template(3,TableBodyComponent_ng_template_2_tr_3_Template,4,8,"tr",16)),2&rf){const item_r12=ctx.$implicit,ctx_r2=nextContext();property("ngIf",ctx_r2.isGroup(item_r12)&&ctx_r2.isParentGroupExpanded(item_r12)&&ctx_r2.showGroupHeader(item_r12)),advance(1),property("ngIf",ctx_r2.isDataItem(item_r12)&&ctx_r2.isInExpandedGroup(item_r12)),advance(1),property("ngIf",ctx_r2.isDataItem(item_r12)&&ctx_r2.isInExpandedGroup(item_r12)&&(null==ctx_r2.detailTemplate?null:ctx_r2.detailTemplate.templateRef)&&ctx_r2.detailTemplate.showIf(item_r12.data,item_r12.index)&&ctx_r2.isExpanded(item_r12)),advance(1),property("ngIf",ctx_r2.isFooter(item_r12)&&(ctx_r2.isInExpandedGroup(item_r12)||ctx_r2.showGroupFooters&&ctx_r2.isParentGroupExpanded(item_r12))&&!item_r12.data.hideFooter)}}const _c152=["kendoGridCell",""];function CellComponent_ng_container_1_ng_template_1_Template(rf,ctx){}function CellComponent_ng_container_1_ng_template_2_ng_template_0_Template(rf,ctx){if(1&rf&&(text(0),pipe(1,"valueOf")),2&rf){const childColumn_r7=ctx.$implicit;textInterpolate1(" ",pipeBind3(1,1,nextContext(3).dataItem,childColumn_r7.field,childColumn_r7.format)," ")}}function CellComponent_ng_container_1_ng_template_2_Template(rf,ctx){1&rf&&template(0,CellComponent_ng_container_1_ng_template_2_ng_template_0_Template,2,5,"ng-template",4),2&rf&&property("ngForOf",nextContext(2).childColumns)}function CellComponent_ng_container_1_ng_template_3_Template(rf,ctx){if(1&rf&&(text(0),pipe(1,"valueOf")),2&rf){const ctx_r4=nextContext(2);textInterpolate(pipeBind3(1,1,ctx_r4.dataItem,ctx_r4.column.field,ctx_r4.column.format))}}function CellComponent_ng_container_1_ng_template_4_Template(rf,ctx){if(1&rf&&(element(0,"input",5),element(1,"label",6)),2&rf){const ctx_r5=nextContext(2);property("kendoGridSelectionCheckbox",ctx_r5.rowIndex),attribute("id",ctx_r5.selectionCheckboxId),advance(1),attribute("for",ctx_r5.selectionCheckboxId)}}function CellComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),template(1,CellComponent_ng_container_1_ng_template_1_Template,0,0,"ng-template",2),template(2,CellComponent_ng_container_1_ng_template_2_Template,1,1,"ng-template",3),template(3,CellComponent_ng_container_1_ng_template_3_Template,2,5,"ng-template",3),template(4,CellComponent_ng_container_1_ng_template_4_Template,2,3,"ng-template",3),elementContainerEnd()),2&rf){const ctx_r0=nextContext();advance(1),property("ngIf",ctx_r0.column.templateRef)("ngTemplateOutlet",ctx_r0.column.templateRef)("ngTemplateOutletContext",ctx_r0.templateContext),advance(1),property("ngIf",ctx_r0.isSpanColumn),advance(1),property("ngIf",ctx_r0.isBoundColumn),advance(1),property("ngIf",ctx_r0.isCheckboxColumn&&!ctx_r0.isNew)}}function CellComponent_ng_container_2_1_ng_template_0_Template(rf,ctx){}function CellComponent_ng_container_2_1_Template(rf,ctx){if(1&rf&&template(0,CellComponent_ng_container_2_1_ng_template_0_Template,0,0,"ng-template",9),2&rf){const ctx_r8=nextContext(2);property("ngTemplateOutlet",ctx_r8.column.editTemplateRef)("ngTemplateOutletContext",ctx_r8.editTemplateContext)}}function CellComponent_ng_container_2_ng_container_2_kendo_numerictextbox_1_Template(rf,ctx){if(1&rf&&element(0,"kendo-numerictextbox",13),2&rf){const ctx_r11=nextContext(3);property("format",ctx_r11.format)("formControl",ctx_r11.formGroup.get(ctx_r11.column.field))}}function CellComponent_ng_container_2_ng_container_2_kendo_datepicker_2_Template(rf,ctx){if(1&rf&&element(0,"kendo-datepicker",13),2&rf){const ctx_r12=nextContext(3);property("format",ctx_r12.format)("formControl",ctx_r12.formGroup.get(ctx_r12.column.field))}}function CellComponent_ng_container_2_ng_container_2_input_3_Template(rf,ctx){if(1&rf&&element(0,"input",14),2&rf){const ctx_r13=nextContext(3);property("formControl",ctx_r13.formGroup.get(ctx_r13.column.field))}}function CellComponent_ng_container_2_ng_container_2_input_4_Template(rf,ctx){if(1&rf&&element(0,"input",15),2&rf){const ctx_r14=nextContext(3);property("formControl",ctx_r14.formGroup.get(ctx_r14.column.field))}}function CellComponent_ng_container_2_ng_container_2_Template(rf,ctx){1&rf&&(elementContainerStart(0,0),template(1,CellComponent_ng_container_2_ng_container_2_kendo_numerictextbox_1_Template,1,2,"kendo-numerictextbox",10),template(2,CellComponent_ng_container_2_ng_container_2_kendo_datepicker_2_Template,1,2,"kendo-datepicker",10),template(3,CellComponent_ng_container_2_ng_container_2_input_3_Template,1,1,"input",11),template(4,CellComponent_ng_container_2_ng_container_2_input_4_Template,1,1,"input",12),elementContainerEnd()),2&rf&&(property("ngSwitch",nextContext(2).column.editor),advance(1),property("ngSwitchCase","numeric"),advance(1),property("ngSwitchCase","date"),advance(1),property("ngSwitchCase","boolean"))}function CellComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),template(1,CellComponent_ng_container_2_1_Template,1,2,void 0,7),template(2,CellComponent_ng_container_2_ng_container_2_Template,5,4,"ng-container",8),elementContainerEnd()),2&rf){const ctx_r1=nextContext();advance(1),property("ngIf",ctx_r1.column.editTemplateRef),advance(1),property("ngIf",!ctx_r1.column.editTemplateRef)}}const _c153=["kendoGridFooter",""];function FooterComponent_ng_template_0_td_1_Template(rf,ctx){1&rf&&element(0,"td"),2&rf&&classProp("k-group-cell",!0)}function FooterComponent_ng_template_0_td_2_Template(rf,ctx){1&rf&&element(0,"td"),2&rf&&classProp("k-hierarchy-cell",!0)}function FooterComponent_ng_template_0_td_3_ng_template_1_Template(rf,ctx){}function FooterComponent_ng_template_0_td_3_Template(rf,ctx){if(1&rf&&(elementStart(0,"td",4),template(1,FooterComponent_ng_template_0_td_3_ng_template_1_Template,0,0,"ng-template",5),elementEnd()),2&rf){const column_r5=ctx.$implicit,columnIndex_r6=ctx.index,ctx_r3=nextContext(2);property("ngClass",column_r5.footerClass)("ngStyle",column_r5.footerStyle),advance(1),property("templateContext",pureFunction4(3,_c141,column_r5.footerTemplateRef,ctx_r3.lockedColumnsCount+columnIndex_r6,column_r5,column_r5))}}function FooterComponent_ng_template_0_Template(rf,ctx){if(1&rf&&(elementStart(0,"tr"),template(1,FooterComponent_ng_template_0_td_1_Template,1,2,"td",1),template(2,FooterComponent_ng_template_0_td_2_Template,1,2,"td",2),template(3,FooterComponent_ng_template_0_td_3_Template,2,8,"td",3),elementEnd()),2&rf){const ctx_r0=nextContext();classProp("k-footer-template",!0),advance(1),property("ngForOf",ctx_r0.groups),advance(1),property("ngIf",null==ctx_r0.detailTemplate?null:ctx_r0.detailTemplate.templateRef),advance(1),property("ngForOf",ctx_r0.columnsToRender)}}function ToolbarComponent_0_ng_template_0_Template(rf,ctx){}function ToolbarComponent_0_Template(rf,ctx){if(1&rf&&template(0,ToolbarComponent_0_ng_template_0_Template,0,0,"ng-template",1),2&rf){const ctx_r0=nextContext();property("ngTemplateOutlet",ctx_r0.toolbarTemplateRef)("ngTemplateOutletContext",ctx_r0.context)}}class fesm2015_ZoneAwareEventEmitter extends core_EventEmitter{constructor(ngZone,isAsync=!1){super(isAsync),this.ngZone=ngZone}subscribe(generatorOrNext,error,complete){let schedulerFn,errorFn=_=>null,completeFn=()=>null;return generatorOrNext&&"object"==typeof generatorOrNext?(schedulerFn=value=>{this.ngZone.run(()=>generatorOrNext.next(value))},generatorOrNext.error&&(errorFn=err=>{this.ngZone.run(()=>generatorOrNext.error(err))}),generatorOrNext.complete&&(completeFn=()=>{this.ngZone.run(()=>generatorOrNext.complete())})):(schedulerFn=value=>{this.ngZone.run(()=>generatorOrNext(value))},error&&(errorFn=err=>{this.ngZone.run(()=>error(err))}),complete&&(completeFn=()=>{this.ngZone.run(()=>complete())})),super.subscribe(schedulerFn,errorFn,completeFn)}}let dist_fesm2015_CellTemplateDirective=(()=>{class CellTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return CellTemplateDirective.fac=function(t){return new(t||CellTemplateDirective)(directiveInject(TemplateRef,8))},CellTemplateDirective.dir=defineDirective({type:CellTemplateDirective,selectors:[["","kendoGridCellTemplate",""]]}),CellTemplateDirective})(),dist_fesm2015_GroupHeaderTemplateDirective=(()=>{class GroupHeaderTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return GroupHeaderTemplateDirective.fac=function(t){return new(t||GroupHeaderTemplateDirective)(directiveInject(TemplateRef,8))},GroupHeaderTemplateDirective.dir=defineDirective({type:GroupHeaderTemplateDirective,selectors:[["","kendoGridGroupHeaderTemplate",""]]}),GroupHeaderTemplateDirective})(),dist_fesm2015_GroupHeaderColumnTemplateDirective=(()=>{class GroupHeaderColumnTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return GroupHeaderColumnTemplateDirective.fac=function(t){return new(t||GroupHeaderColumnTemplateDirective)(directiveInject(TemplateRef,8))},GroupHeaderColumnTemplateDirective.dir=defineDirective({type:GroupHeaderColumnTemplateDirective,selectors:[["","kendoGridGroupHeaderColumnTemplate",""]]}),GroupHeaderColumnTemplateDirective})(),fesm2015_EditTemplateDirective=(()=>{class EditTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return EditTemplateDirective.fac=function(t){return new(t||EditTemplateDirective)(directiveInject(TemplateRef,8))},EditTemplateDirective.dir=defineDirective({type:EditTemplateDirective,selectors:[["","kendoGridEditTemplate",""]]}),EditTemplateDirective})(),dist_fesm2015_GroupFooterTemplateDirective=(()=>{class GroupFooterTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return GroupFooterTemplateDirective.fac=function(t){return new(t||GroupFooterTemplateDirective)(directiveInject(TemplateRef,8))},GroupFooterTemplateDirective.dir=defineDirective({type:GroupFooterTemplateDirective,selectors:[["","kendoGridGroupFooterTemplate",""]]}),GroupFooterTemplateDirective})(),dist_fesm2015_HeaderTemplateDirective=(()=>{class HeaderTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return HeaderTemplateDirective.fac=function(t){return new(t||HeaderTemplateDirective)(directiveInject(TemplateRef,8))},HeaderTemplateDirective.dir=defineDirective({type:HeaderTemplateDirective,selectors:[["","kendoGridHeaderTemplate",""]]}),HeaderTemplateDirective})(),_ivy_ngcc_dist_fesm2015_FooterTemplateDirective=(()=>{class FooterTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return FooterTemplateDirective.fac=function(t){return new(t||FooterTemplateDirective)(directiveInject(TemplateRef,8))},FooterTemplateDirective.dir=defineDirective({type:FooterTemplateDirective,selectors:[["","kendoGridFooterTemplate",""]]}),FooterTemplateDirective})(),fesm2015_ColumnMenuTemplateDirective=(()=>{class ColumnMenuTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return ColumnMenuTemplateDirective.fac=function(t){return new(t||ColumnMenuTemplateDirective)(directiveInject(TemplateRef,8))},ColumnMenuTemplateDirective.dir=defineDirective({type:ColumnMenuTemplateDirective,selectors:[["","kendoGridColumnMenuTemplate",""]]}),ColumnMenuTemplateDirective})();const isSpanColumn=column=>column.isSpanColumn,isCheckboxColumn=column=>column.isCheckboxColumn;let fesm2015_ColumnBase$1=(()=>{class ColumnBase$1{constructor(parent){if(this.parent=parent,this.matchesMedia=!0,this.orderIndex=0,this.isColumnGroup=!1,this.isSpanColumn=!1,this.resizable=!0,this.reorderable=!0,this.minResizableWidth=10,this.locked=!1,this.lockable=!0,this.columnMenu=!0,this.includeInChooser=!0,this.headerTemplates=new QueryList,this.columnMenuTemplates=new QueryList,parent&&!(column=parent).isColumnGroup&&!isSpanColumn(column))throw new Error("Columns can be nested only inside ColumnGroupComponent");var column}set width(value){this._width=parseInt(value,10)}get width(){return this._width}get level(){return this.parent&&isSpanColumn(this.parent)?this.parent.level:this.parent?this.parent.level+1:0}get isLocked(){return this.parent?this.parent.isLocked:this.locked}get colspan(){return 1}rowspan(totalColumnLevels){return this.level<totalColumnLevels?totalColumnLevels-this.level+1:1}get headerTemplateRef(){const template=this.headerTemplates.first;return template?template.templateRef:void 0}get footerTemplateRef(){return this.footerTemplate?this.footerTemplate.templateRef:void 0}get columnMenuTemplateRef(){const template=this.columnMenuTemplates.first;return template?template.templateRef:null}get displayTitle(){return this.title}get isVisible(){return!this.hidden&&this.matchesMedia}}return ColumnBase$1.fac=function(t){invalidFactory()},ColumnBase$1.dir=defineDirective({type:ColumnBase$1,contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&(contentQuery(dirIndex,_ivy_ngcc_dist_fesm2015_FooterTemplateDirective,!0),contentQuery(dirIndex,dist_fesm2015_HeaderTemplateDirective,!1),contentQuery(dirIndex,fesm2015_ColumnMenuTemplateDirective,!1)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.footerTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.headerTemplates=_t),queryRefresh(_t=loadQuery())&&(ctx.columnMenuTemplates=_t))},inputs:{resizable:"resizable",reorderable:"reorderable",minResizableWidth:"minResizableWidth",locked:"locked",lockable:"lockable",columnMenu:"columnMenu",includeInChooser:"includeInChooser",width:"width",title:"title",autoSize:"autoSize",hidden:"hidden",media:"media",style:"style",headerStyle:"headerStyle",footerStyle:"footerStyle",cssClass:["class","cssClass"],headerClass:"headerClass",footerClass:"footerClass"}}),ColumnBase$1})();const EMPTY_REGEX=/^\s*$/,kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent=value=>null!=value,fesm2015_isBlank=value=>null==value,dist_fesm2015_isArray=value=>Array.isArray(value),fesm2015_isTruthy=value=>!!value,fesm2015_isNullOrEmptyString=value=>fesm2015_isBlank(value)||EMPTY_REGEX.test(value),observe=list=>merge(of(list),list.changes),isUniversal=()=>"undefined"==typeof document,fesm2015_isString=value=>"string"==typeof value,dist_fesm2015_isNumber=value=>"number"==typeof value&&!isNaN(value),extractFormat=format=>fesm2015_isString(format)&&!fesm2015_isNullOrEmptyString(format)&&format.startsWith("{0:")?format.slice(3,format.length-1):format,fesm2015_not=fn=>(...args)=>!fn.apply(null,args),or=(...conditions)=>value=>conditions.reduce((acc,x)=>acc||x(value),!1),fesm2015_and=(...conditions)=>value=>conditions.reduce((acc,x)=>acc&&x(value),!0),Skip=new InjectionToken("Skip"),fesm2015_iterator=getIterator();function getIterator(){if("function"==typeof Symbol&&Symbol.iterator)return Symbol.iterator;const keys=Object.getOwnPropertyNames(Map.prototype),proto=Map.prototype;for(let i=0;i<keys.length;++i){const key=keys[i];if("entries"!==key&&"size"!==key&&proto[key]===proto.entries)return key}}const fesm2015_wnd="undefined"!=typeof window?window:{},fesm2015_requestAnimationFrame=fesm2015_wnd.requestAnimationFrame||fesm2015_wnd.msRequestAnimationFrame||(callback=>setTimeout(callback,1e3/60)),fesm2015_cancelAnimationFrame=fesm2015_wnd.cancelAnimationFrame||fesm2015_wnd.msCancelRequestAnimationFrame||clearTimeout;let fesm2015_FilterCellTemplateDirective=(()=>{class FilterCellTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return FilterCellTemplateDirective.fac=function(t){return new(t||FilterCellTemplateDirective)(directiveInject(TemplateRef,8))},FilterCellTemplateDirective.dir=defineDirective({type:FilterCellTemplateDirective,selectors:[["","kendoGridFilterCellTemplate",""]]}),FilterCellTemplateDirective})(),fesm2015_FilterMenuTemplateDirective=(()=>{class FilterMenuTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return FilterMenuTemplateDirective.fac=function(t){return new(t||FilterMenuTemplateDirective)(directiveInject(TemplateRef,8))},FilterMenuTemplateDirective.dir=defineDirective({type:FilterMenuTemplateDirective,selectors:[["","kendoGridFilterMenuTemplate",""]]}),FilterMenuTemplateDirective})();function isColumnComponent(column){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(column.field)}let dist_fesm2015_ColumnComponent=(()=>{class ColumnComponent extends fesm2015_ColumnBase$1{constructor(parent){super(parent),this.sortable=!0,this.groupable=!0,this.editor="text",this.filter="text",this.filterable=!0,this.editable=!0}get templateRef(){return this.template?this.template.templateRef:void 0}get groupHeaderTemplateRef(){return this.groupHeaderTemplate?this.groupHeaderTemplate.templateRef:void 0}get groupHeaderColumnTemplateRef(){return this.groupHeaderColumnTemplate?this.groupHeaderColumnTemplate.templateRef:void 0}get groupFooterTemplateRef(){return this.groupFooterTemplate?this.groupFooterTemplate.templateRef:void 0}get editTemplateRef(){return this.editTemplate?this.editTemplate.templateRef:void 0}get filterCellTemplateRef(){return this.filterCellTemplate?this.filterCellTemplate.templateRef:void 0}get filterMenuTemplateRef(){return this.filterMenuTemplate?this.filterMenuTemplate.templateRef:void 0}get displayTitle(){return void 0===this.title?this.field:this.title}}return ColumnComponent.fac=function(t){return new(t||ColumnComponent)(directiveInject(fesm2015_ColumnBase$1,13))},ColumnComponent.cmp=defineComponent({type:ColumnComponent,selectors:[["kendo-grid-column"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&(contentQuery(dirIndex,dist_fesm2015_CellTemplateDirective,!0),contentQuery(dirIndex,dist_fesm2015_GroupHeaderTemplateDirective,!0),contentQuery(dirIndex,dist_fesm2015_GroupHeaderColumnTemplateDirective,!0),contentQuery(dirIndex,dist_fesm2015_GroupFooterTemplateDirective,!0),contentQuery(dirIndex,fesm2015_EditTemplateDirective,!0),contentQuery(dirIndex,fesm2015_FilterCellTemplateDirective,!0),contentQuery(dirIndex,fesm2015_FilterMenuTemplateDirective,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.template=_t.first),queryRefresh(_t=loadQuery())&&(ctx.groupHeaderTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.groupHeaderColumnTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.groupFooterTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.editTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.filterCellTemplate=_t.first),queryRefresh(_t=loadQuery())&&(ctx.filterMenuTemplate=_t.first))},inputs:{sortable:"sortable",groupable:"groupable",editor:"editor",filter:"filter",filterable:"filterable",editable:"editable",field:"field",format:"format"},features:[ProvidersFeature([{provide:fesm2015_ColumnBase$1,useExisting:forwardRef(()=>ColumnComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),ColumnComponent})();function isSpanColumnComponent(column){return column.isSpanColumn}let fesm2015_SpanColumnComponent=(()=>{class SpanColumnComponent extends fesm2015_ColumnBase$1{constructor(parent){if(super(parent),this.isSpanColumn=!0,this.template=new QueryList,this.editTemplate=new QueryList,this.childColumns=new QueryList,this.includeInChooser=!1,this._editable=!0,this._locked=!1,parent&&parent.isSpanColumn)throw new Error("SpanColumn cannot be nested inside another SpanColumn")}set editable(value){this._editable=value}get editable(){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.editTemplateRef)&&this._editable}set width(_value){}get width(){return this.childColumns.reduce((total,column)=>total+column.width,0)}get leafIndex(){return this.childColumns.first.leafIndex}get templateRef(){const template=this.template.first;return template?template.templateRef:void 0}get editTemplateRef(){const editTemplate=this.editTemplate.first;return editTemplate?editTemplate.templateRef:void 0}get colspan(){return this.childColumns.filter(c=>c.isVisible).length}set locked(value){this._locked=value}get locked(){return this._locked||this.childColumns.some(c=>c.locked)}get childrenArray(){return this.childColumns.toArray()}get hasChildren(){return this.childColumns.length>0}}return SpanColumnComponent.fac=function(t){return new(t||SpanColumnComponent)(directiveInject(fesm2015_ColumnBase$1,13))},SpanColumnComponent.cmp=defineComponent({type:SpanColumnComponent,selectors:[["kendo-grid-span-column"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&(contentQuery(dirIndex,dist_fesm2015_CellTemplateDirective,!1),contentQuery(dirIndex,fesm2015_EditTemplateDirective,!1),contentQuery(dirIndex,dist_fesm2015_ColumnComponent,!1)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.template=_t),queryRefresh(_t=loadQuery())&&(ctx.editTemplate=_t),queryRefresh(_t=loadQuery())&&(ctx.childColumns=_t))},inputs:{editable:"editable",locked:"locked"},features:[ProvidersFeature([{provide:fesm2015_ColumnBase$1,useExisting:forwardRef(()=>SpanColumnComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),SpanColumnComponent})();const expandColumns=columns=>columns.reduce((acc,column)=>acc.concat(isSpanColumnComponent(column)?column.childrenArray:[column]),[]),expandColumnsWithSpan=columns=>columns.reduce((acc,column)=>acc.concat(isSpanColumnComponent(column)?[column].concat(column.childrenArray):[column]),[]),columnsToRender=columns=>expandColumns(columns).filter(x=>x.isVisible),sumProp=prop=>array=>(array||[]).reduce((prev,curr)=>prev+(curr[prop]||0),0),sumColumnWidths=sumProp("width"),columnsSpan=sumProp("colspan"),validField=new RegExp("^[$A-Z_a-z][$A-Z_a-z0-9\\.]*$"),leafColumns=columns=>columns.reduce((acc,column)=>(column.isColumnGroup?acc=acc.concat(leafColumns((column=>column.children.filter(child=>child!==column))(column))):column.isSpanColumn?acc=acc.concat(column.childrenArray):acc.push(column),acc),[]).filter(x=>x.isVisible),someLeafColumn=(callback,...columns)=>leafColumns(columns).some(callback),sortColumns=columns=>array_operators_orderBy(columns,[{field:"orderIndex",dir:"asc"}]),isInSpanColumn=column=>fesm2015_isTruthy(column.parent)&&isSpanColumnComponent(column.parent);function isColumnGroupComponent(column){return column.isColumnGroup}let dist_fesm2015_ColumnGroupComponent=(()=>{class ColumnGroupComponent extends fesm2015_ColumnBase$1{constructor(parent){if(super(parent),this.parent=parent,this.includeInChooser=!1,this.isColumnGroup=!0,this.minResizableWidth=10,parent&&parent.isSpanColumn)throw new Error("ColumnGroupComponent cannot be nested inside SpanColumnComponent")}rowspan(){return 1}get colspan(){return this.children&&1!==this.children.length?columnsSpan(this.children.filter(child=>child!==this&&child.isVisible)):1}get leafIndex(){return this.children?(this.firstChild||{}).leafIndex:-1}get childrenArray(){return this.children.filter(c=>c!==this)}get hasChildren(){return Boolean(this.firstChild)}get firstChild(){return this.children.find(column=>column!==this)}}return ColumnGroupComponent.fac=function(t){return new(t||ColumnGroupComponent)(directiveInject(fesm2015_ColumnBase$1,13))},ColumnGroupComponent.cmp=defineComponent({type:ColumnGroupComponent,selectors:[["kendo-grid-column-group"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,fesm2015_ColumnBase$1,!1),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.children=_t)},features:[ProvidersFeature([{provide:fesm2015_ColumnBase$1,useExisting:forwardRef(()=>ColumnGroupComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),ColumnGroupComponent})(),fesm2015_DetailTemplateDirective=(()=>{class DetailTemplateDirective{constructor(templateRef){this.templateRef=templateRef,this._condition=()=>!0}set showIf(fn){if("function"!=typeof fn)throw new Error(`showIf must be a function, but received ${JSON.stringify(fn)}.`);this._condition=fn}get showIf(){return this._condition}}return DetailTemplateDirective.fac=function(t){return new(t||DetailTemplateDirective)(directiveInject(TemplateRef,8))},DetailTemplateDirective.dir=defineDirective({type:DetailTemplateDirective,selectors:[["","kendoGridDetailTemplate",""]],inputs:{showIf:["kendoGridDetailTemplateShowIf","showIf"]}}),DetailTemplateDirective})();const canCreateElement=()=>isDocumentAvailable()&&document.createElement;let cachedPixelRatio,cachedScrollbarWidth=null,cachedRtlScrollLeft=null,fesm2015_BrowserSupportService=(()=>{class BrowserSupportService{constructor(zone,changeDetector){this.zone=zone,this.changeDetector=changeDetector,this.changes=new core_EventEmitter,"undefined"!=typeof window&&this.zone.runOutsideAngular(()=>{this.subscriptions=fromEvent(window,"resize").pipe(auditTime(100)).subscribe(()=>{cachedPixelRatio!==window.devicePixelRatio&&zone.run(()=>{cachedScrollbarWidth=null,this.changes.emit(),this.changeDetector.markForCheck()})})})}ngOnDestroy(){this.subscriptions&&(this.subscriptions.unsubscribe(),this.subscriptions=null)}get scrollbarWidth(){return function(){if(null===cachedScrollbarWidth&&canCreateElement()){cachedPixelRatio=window.devicePixelRatio||1;const div=document.createElement("div");div.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",div.innerHTML="&nbsp;",document.body.appendChild(div),cachedScrollbarWidth=div.offsetWidth-div.scrollWidth,document.body.removeChild(div)}return cachedScrollbarWidth}()}get rtlScrollLeft(){return function(){if(null===cachedRtlScrollLeft&&canCreateElement()){const div=document.createElement("div");div.style.cssText="overflow:scroll;zoom:1;clear:both;display:block;width:100px;visibility:hidden;position:absolute;left:-10000px;direction:rtl;",div.innerHTML="<div style='width:200px;height:1px;'</div>",document.body.appendChild(div);const initial=div.scrollLeft;div.scrollLeft=-1,cachedRtlScrollLeft=div.scrollLeft<0?div.scrollLeft:initial,document.body.removeChild(div)}return cachedRtlScrollLeft}()}}return BrowserSupportService.fac=function(t){return new(t||BrowserSupportService)(inject(NgZone),inject(ChangeDetectorRef))},BrowserSupportService.prov=defineInjectable({token:BrowserSupportService,factory:BrowserSupportService.fac}),BrowserSupportService})();const isGroupItem=source=>void 0!==source.items&&void 0!==source.field,flattenGroups=groups=>groups.reduce((acc,curr)=>isGroupItem(curr)?acc.concat(flattenGroups(curr.items)):acc.concat([curr]),[]),getIterator$1=(data,{footers:footers,level:level,dataIndex:dataIndex,parentGroupIndex:parentGroupIndex,groupIndex:groupIndex})=>{const first=data[0];return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(first)&&isGroupItem(first)?(void 0!==(source=first).offset&&void 0!==source.skipHeader&&(groupIndex=kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(first.offset)?first.offset:groupIndex),new GroupIterator(data,footers,level,dataIndex,parentGroupIndex,groupIndex)):new ItemIterator(data,dataIndex,parentGroupIndex);var source};class ArrayIterator{constructor(arr,idx=0){this.arr=arr,this.idx=idx,this.arr=arr||[]}[fesm2015_iterator](){return this}next(){return this.idx<this.arr.length?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}}}class Iterator{constructor(arr,dataIndex=0,resultMap=(x=>x)){this.dataIndex=dataIndex,this.resultMap=resultMap,this._innerIterator=arr[fesm2015_iterator]?arr[fesm2015_iterator]():new ArrayIterator(arr)}[fesm2015_iterator](){return this}next(){return this.resultMap(this._innerIterator.next(),this.dataIndex++)}}class ItemIterator extends Iterator{constructor(arr,dataIndex,groupIndex){super(arr,dataIndex,(x,idx)=>({done:x.done,value:{data:x.value,groupIndex:groupIndex,index:idx,type:"data"}}))}get index(){return this.dataIndex}}class GroupIterator{constructor(arr,outputFooters=!1,level=0,dataIndex=0,parentIndex="",groupIndex=0){this.arr=arr,this.outputFooters=outputFooters,this.level=level,this.dataIndex=dataIndex,this.parentIndex=parentIndex,this.groupIndex=groupIndex,this.currentGroupIndex="",this.arr=arr||[],this._iterator=new Iterator(this.arr,this.dataIndex)}[fesm2015_iterator](){return this}nextGroupItem(){return this.current=this._iterator.next().value,this._innerIterator=null,this.current?(this.currentGroupIndex=`${(s=this.parentIndex)?s+"_":s}${this.groupIndex++}`,{done:!1,value:{data:this.current,index:this.currentGroupIndex,level:this.level,type:"group"}}):(this.current=null,{done:!0,value:void 0});var s}footerItem(){if(this.current){const group=this.current;return this.current=null,{done:!1,value:{data:group,groupIndex:this.currentGroupIndex,level:this.level,type:"footer"}}}return this.current=null,{done:!0,value:void 0}}innerIterator(group){return this._innerIterator||(this._innerIterator=getIterator$1(group.items,{dataIndex:this.dataIndex,footers:this.outputFooters,level:this.level+1,parentGroupIndex:this.currentGroupIndex})),this._innerIterator}nextDataItem(group){const result=this.innerIterator(group).next();return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(result.value)&&!result.done&&"data"===result.value.type&&(this.dataIndex=result.value.index+1),result.done?void 0:result}next(){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.current)?this.nextDataItem(this.current)||(this.outputFooters?this.footerItem():this.nextGroupItem()):this.nextGroupItem()}get index(){return this.dataIndex+1}}class DataResultIterator{constructor(source,skip=0,groupFooters=!1){this.source=source,this.skip=skip,this.groupFooters=groupFooters,this.source=this.source?this.source:[],this.isObject=this.isGridDataResult(this.source)}isGridDataResult(source){return void 0!==source.total&&void 0!==source.data}get total(){return this.isObject?this.source.total:this.source.length}get data(){return this.isObject?this.source.data:this.source}map(fn){return this.data.map(fn)}filter(fn){return this.data.filter(fn)}reduce(fn,init){return this.data.reduce(fn,init)}forEach(fn){this.data.forEach(fn)}some(fn){return this.data.some(fn)}[fesm2015_iterator](){return getIterator$1(this.data,{dataIndex:this.skip,footers:this.groupFooters,groupIndex:this.skip})}toString(){return this.data.toString()}}class DataCollection{constructor(accessor){this.accessor=accessor}get total(){return this.accessor().total}get length(){return this.accessor().data.length}get first(){return this.accessor().data[0]}get last(){return this.accessor().data[this.length-1]}at(index){return((data,index)=>{const first=data[0];return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(first)&&isGroupItem(first)?flattenGroups(data)[index]:data[index]})(this.accessor().data,index)}map(fn){return this.accessor().map(fn)}filter(fn){return this.accessor().filter(fn)}reduce(fn,init){return this.accessor().reduce(fn,init)}forEach(fn){this.accessor().forEach(fn)}some(fn){return this.accessor().some(fn)}[fesm2015_iterator](){return this.accessor()[fesm2015_iterator]()}toString(){return this.accessor().toString()}}let fesm2015_DomEventsService=(()=>{class DomEventsService{constructor(){this.cellClick=new core_EventEmitter,this.cellMousedown=new core_EventEmitter,this.click=new core_EventEmitter,this.keydown=new core_EventEmitter,this.focus=new core_EventEmitter,this.focusIn=new core_EventEmitter,this.focusOut=new core_EventEmitter,this.windowBlur=new core_EventEmitter}}return DomEventsService.fac=function(t){return new(t||DomEventsService)},DomEventsService.prov=defineInjectable({token:DomEventsService,factory:DomEventsService.fac}),DomEventsService})(),fesm2015_LocalDataChangesService=(()=>{class LocalDataChangesService{constructor(){this.changes=new core_EventEmitter}}return LocalDataChangesService.fac=function(t){return new(t||LocalDataChangesService)},LocalDataChangesService.prov=defineInjectable({token:LocalDataChangesService,factory:LocalDataChangesService.fac}),LocalDataChangesService})(),dist_fesm2015_SelectionService=(()=>{class SelectionService{constructor(domEvents,localDataChangesService){this.changes=new core_EventEmitter,this.lastSelectionStartIndex=0,this.currentSelection=[],this.selectAllChecked=!1,this.cellClickSubscription=domEvents.cellClick.subscribe(args=>{this.options.enabled&&!this.options.checkboxOnly&&"contextmenu"!==args.type&&this.handleClick({index:args.rowIndex,data:args.dataItem},args.originalEvent)}),this.mousedownSubscription=domEvents.cellMousedown.subscribe(args=>{!this.options.enabled||this.options.mode&&"multiple"!==this.options.mode||this.options.checkboxOnly||!args.originalEvent.shiftKey||args.originalEvent.preventDefault()}),localDataChangesService&&(this.dataChangedSubscription=localDataChangesService.changes.subscribe(args=>{kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(args.action)&&"remove"===args.action&&this.deselect(args.item)}))}init(settings){if(this.settings=settings,this.currentSelection=[],settings.selectable&&!1!==settings.selectable.enabled){const iterator$$1=this.getIterator();for(this._selectAllState=!0;;){const item=iterator$$1.next();if(item.done)break;if(item.value&&"data"===item.value.type){const rowArgs={dataItem:item.value.data,index:item.value.index};settings.rowSelected(rowArgs)?this.currentSelection[item.value.index]=rowArgs:this._selectAllState=void 0}}0===this.currentSelection.length&&(this._selectAllState=!1)}}isSelected(index){return this.options.enabled&&kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.currentSelection[index])}handleClick(item,event){let ev;const ctrlKey=event.ctrlKey||event.metaKey;"single"===this.options.mode&&ctrlKey&&this.isSelected(item.index)?ev=this.toggle(item):"multiple"===this.options.mode&&(ctrlKey&&!event.shiftKey?ev=this.toggle(item):event.shiftKey&&(ev=this.addAllTo(item,ctrlKey))),kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(ev)||(ev=this.select(item),this.currentSelection[item.index]={dataItem:item.data,index:item.index}),(ev.selectedRows.length||ev.deselectedRows.length)&&(ev.ctrlKey=event.ctrlKey||event.metaKey,ev.shiftKey=event.shiftKey,this.changes.emit(ev))}toggle(item){let selectedRows=[],deselectedRows=[];return this.lastSelectionStartIndex=item.index,this.isSelected(item.index)?deselectedRows.push({dataItem:item.data,index:item.index}):selectedRows.push({dataItem:item.data,index:item.index}),{deselectedRows:deselectedRows,selectedRows:selectedRows}}toggleByIndex(index){const iterator$$1=this.getIterator();for(this.selectAllChecked&&this.isSelected(index)&&(this.selectAllChecked=!1);;){const item=iterator$$1.next();if(item.done)break;if(item.value&&"data"===item.value.type&&item.value.index===index){const itemToToggle={data:item.value.data,index:item.value.index};return this.isSelected(index)||"multiple"===this.options.mode?this.toggle(itemToToggle):this.select(itemToToggle)}}}select(item){let deselectedRows=[],selectedRows=[];return this.lastSelectionStartIndex=item.index,this.isSelected(item.index)||selectedRows.push({dataItem:item.data,index:item.index}),this.currentSelection.forEach(row=>{row.index!==item.index&&deselectedRows.push(row)}),{deselectedRows:deselectedRows,selectedRows:selectedRows}}deselect(removedItem){const iterator$$1=this.getIterator();for(;;){const item=iterator$$1.next();if(item.done)break;if(item.value&&"data"===item.value.type&&item.value.data===removedItem){const rowArgs={dataItem:item.value.data,index:item.value.index};this.isSelected(rowArgs.index)&&this.changes.emit({ctrlKey:!1,deselectedRows:[rowArgs],selectedRows:[]})}}}addAllTo(item,ctrlKey){let selectedRows=[],deselectedRows=[];const start=Math.min(this.lastSelectionStartIndex,item.index),end=Math.max(this.lastSelectionStartIndex,item.index),iterator$$1=this.getIterator();for(;;){const next=iterator$$1.next();if(next.done)break;if(next.value&&"data"===next.value.type){const idx=next.value.index;(idx<start||idx>end)&&this.isSelected(idx)&&!ctrlKey&&deselectedRows.push({dataItem:next.value.data,index:idx}),idx>=start&&idx<=end&&!this.isSelected(idx)&&selectedRows.push({dataItem:next.value.data,index:idx})}}return{deselectedRows:deselectedRows,selectedRows:selectedRows}}updateAll(selectAllChecked){this.selectAllChecked=selectAllChecked;let selectedRows=[],deselectedRows=[];const iterator$$1=this.getIterator();for(;;){const next=iterator$$1.next();if(next.done)break;if(next.value&&"data"===next.value.type){const idx=next.value.index;this.isSelected(idx)&&!selectAllChecked&&deselectedRows.push({dataItem:next.value.data,index:idx}),!this.isSelected(idx)&&selectAllChecked&&selectedRows.push({dataItem:next.value.data,index:idx})}}(selectedRows.length||deselectedRows.length)&&this.changes.emit({ctrlKey:!0,deselectedRows:deselectedRows,selectedRows:selectedRows,shiftKey:!0})}get selectAllState(){return this._selectAllState}get selected(){return this.currentSelection.map(item=>item.index).filter(n=>"number"==typeof n)}get options(){const defaultOptions={checkboxOnly:!1,enabled:!0,mode:"multiple"};return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.settings)?"boolean"==typeof this.settings.selectable?{checkboxOnly:!1,enabled:this.settings.selectable,mode:"multiple"}:Object.assign(defaultOptions,this.settings.selectable):defaultOptions}ngOnDestroy(){this.cellClickSubscription&&(this.cellClickSubscription.unsubscribe(),this.cellClickSubscription=null),this.mousedownSubscription&&(this.mousedownSubscription.unsubscribe(),this.mousedownSubscription=null),this.dataChangedSubscription&&(this.dataChangedSubscription.unsubscribe(),this.dataChangedSubscription=null)}getIterator(){const accessor=this.settings.view.accessor();if(accessor)return accessor[fesm2015_iterator]()}}return SelectionService.fac=function(t){return new(t||SelectionService)(inject(fesm2015_DomEventsService),inject(fesm2015_LocalDataChangesService))},SelectionService.prov=defineInjectable({token:SelectionService,factory:SelectionService.fac}),SelectionService})(),fesm2015_Selection=(()=>{class Selection{constructor(grid,cd){this.grid=grid,this.cd=cd,this.selectedKeys=[],this.selectedKeysChange=new core_EventEmitter,this.init()}init(){kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.grid.rowSelected)||(this.grid.rowSelected=row=>this.selectedKeys.indexOf(this.getItemKey(row))>=0),this.selectionChangeSubscription=this.grid.selectionChange.subscribe(this.onSelectionChange.bind(this))}destroy(){this.selectionChangeSubscription.unsubscribe()}reset(){this.selectedKeys.splice(0,this.selectedKeys.length)}getItemKey(row){if(this.selectionKey){if("string"==typeof this.selectionKey)return row.dataItem[this.selectionKey];if("function"==typeof this.selectionKey)return this.selectionKey(row)}return row.index}onSelectionChange(selection){selection.deselectedRows.forEach(item=>{const itemKey=this.getItemKey(item),itemIndex=this.selectedKeys.indexOf(itemKey);itemIndex>=0&&this.selectedKeys.splice(itemIndex,1)}),"single"===this.grid.selectableSettings.mode&&this.selectedKeys.length>0&&this.reset(),selection.selectedRows.forEach(item=>{const itemKey=this.getItemKey(item);this.selectedKeys.indexOf(itemKey)<0&&this.selectedKeys.push(itemKey)}),this.cd.markForCheck(),this.selectedKeysChange.emit(this.selectedKeys)}}return Selection.fac=function(t){invalidFactory()},Selection.dir=defineDirective({type:Selection,inputs:{selectedKeys:"selectedKeys",selectionKey:["kendoGridSelectBy","selectionKey"]},outputs:{selectedKeysChange:"selectedKeysChange"}}),Selection})();class kendo_angular_grid_ivy_ngcc_dist_fesm2015_PreventableEvent{constructor(){this.prevented=!1}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}class CellCloseEvent extends kendo_angular_grid_ivy_ngcc_dist_fesm2015_PreventableEvent{constructor(options){super(),this.action="cellClose",Object.assign(this,options)}}const isNewRow=index=>-1===index||void 0===index;let fesm2015_EditService=(()=>{class EditService{constructor(ngZone){this.ngZone=ngZone,this.changes=new core_EventEmitter,this.editedIndices=[],this.keepEditCell=!1,this.closingCell=!1,this.changedSource=new Subject_Subject,this.changed=this.changedSource.asObservable().pipe(switchMap(()=>this.ngZone.onStable.asObservable().pipe(take_take(1))))}editRow(index,group){this.editedIndices.push({index:index,group:group}),this.onChanged()}addRow(group){this.newItemGroup={group:group},this.onChanged()}editCell(rowIndex,column,group){isNewRow(rowIndex)||!1===column.editable||!column.editTemplate&&!column.field||(this.preventCellClose(),this.closeCell()||(this.editRow(rowIndex,group),this.column=column,this.onChanged()))}isEditing(){return this.editedIndices.length>0}isEditingCell(){return this.isEditing()&&void 0!==this.column}get hasNewItem(){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.newItemGroup)}get newDataItem(){return this.hasNewItem?this.newItemGroup.group.value:{}}close(index){isNewRow(index)?this.newItemGroup=void 0:(this.editedIndices=this.editedIndices.filter((index=>item=>item.index!==index)(index)),delete this.column,this.onChanged())}closeCell(originalEvent){if(this.column&&!this.closingCell)return this.ngZone.run(()=>{const{index:index,group:group}=this.editedIndices[0],args=new CellCloseEvent({column:this.column,formGroup:group,originalEvent:originalEvent,rowIndex:index});return this.closingCell=!0,this.changes.emit(args),this.closingCell=!1,args.isDefaultPrevented()||this.cancelCell(),args.isDefaultPrevented()})}cancelCell(){this.column&&(this.editedIndices=[],delete this.column,this.onChanged())}shouldCloseCell(){return this.column&&!this.keepEditCell}preventCellClose(){this.ngZone.runOutsideAngular(()=>{window.clearTimeout(this.keepCellTimeout),this.keepEditCell=!0,this.keepCellTimeout=window.setTimeout(()=>{this.keepEditCell=!1},0)})}context(index){return isNewRow(index)?this.newItemGroup:this.findByIndex(index)}columnContext(index,column){return isNewRow(index)?this.newItemGroup:this.column&&column!==this.column?void 0:this.findByIndex(index)}isEdited(index){return!(!isNewRow(index)||!kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.newItemGroup))||!this.column&&kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.findByIndex(index))}hasEdited(index){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.context(index))}isEditedColumn(index,column){return!(!this.column||this.column!==column)&&kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.findByIndex(index))}beginEdit(rowIndex){this.changes.emit({action:"edit",rowIndex:rowIndex})}beginAdd(){this.changes.emit({action:"add"})}endEdit(rowIndex){const{group:formGroup}=this.context(rowIndex);this.changes.emit({action:"cancel",rowIndex:rowIndex,formGroup:formGroup,isNew:isNewRow(rowIndex)})}save(rowIndex){const{group:formGroup}=this.context(rowIndex);this.changes.emit({action:"save",rowIndex:rowIndex,formGroup:formGroup,isNew:isNewRow(rowIndex)})}remove(rowIndex){this.changes.emit({action:"remove",rowIndex:rowIndex})}findByIndex(index){return this.editedIndices.find((index=>item=>item.index===index)(index))}onChanged(){this.ngZone.runOutsideAngular(()=>{this.changedSource.next()})}}return EditService.fac=function(t){return new(t||EditService)(inject(NgZone))},EditService.prov=defineInjectable({token:EditService,factory:EditService.fac}),EditService})();class DetailCollapseEvent extends kendo_angular_grid_ivy_ngcc_dist_fesm2015_PreventableEvent{constructor(args){super(),Object.assign(this,args)}}class DetailExpandEvent extends kendo_angular_grid_ivy_ngcc_dist_fesm2015_PreventableEvent{constructor(args){super(),Object.assign(this,args)}}let fesm2015_DetailsService=(()=>{class DetailsService{constructor(){this.changes=new Subject_Subject,this.rowState=new Set}ngOnDestroy(){this.rowState.clear()}isExpanded(index,dataItem){return this.userCallback?this.userCallback({index:index,dataItem:dataItem}):this.rowState.has(index)}toggleRow(index,dataItem){this.isExpanded(index,dataItem)?this.collapseRow(index,dataItem):this.expandRow(index,dataItem)}expandRow(index,dataItem){this.emitEvent({dataItem:dataItem,index:index,expand:!0})||this.userCallback||this.rowState.add(index)}collapseRow(index,dataItem){this.emitEvent({dataItem:dataItem,index:index,expand:!1})||this.userCallback||this.rowState.delete(index)}emitEvent(args){const eventArg=new(args.expand?DetailExpandEvent:DetailCollapseEvent)(args);return this.changes.next(eventArg),eventArg.isDefaultPrevented()}}return DetailsService.fac=function(t){return new(t||DetailsService)},DetailsService.prov=defineInjectable({token:DetailsService,factory:DetailsService.fac}),DetailsService})();const removeLast=groupIndex=>groupIndex.lastIndexOf("_")>-1?groupIndex.slice(0,groupIndex.lastIndexOf("_")):"";let fesm2015_GroupsService=(()=>{class GroupsService extends class{constructor(isInitiallyCollapsed){this.isInitiallyCollapsed=isInitiallyCollapsed,this.changes=new Subject_Subject,this.rowState=new Set}toggleRow(index,dataItem){const found=this.rowState.has(index);this.emitEvent({dataItem:dataItem,expand:this.isInitiallyCollapsed?!found:found,index:index})||(found?this.rowState.delete(index):this.rowState.add(index))}isExpanded(index){const found=this.rowState.has(index);return this.isInitiallyCollapsed?found:!found}reset(){this.rowState.clear()}emitEvent(args){return this.changes.next(args),!1}}{constructor(isCollapsed=!1){super(isCollapsed)}isInExpandedGroup(groupIndex,skipSelf=!0){skipSelf&&(groupIndex=removeLast(groupIndex));let expanded=!0;for(;groupIndex&&expanded;)expanded=this.isExpanded(groupIndex),groupIndex=removeLast(groupIndex);return expanded}expandChildren(parentIndex){this.rowState.forEach(index=>((targetIndex,parentIndex)=>parentIndex!==targetIndex&&targetIndex.startsWith(parentIndex))(index,parentIndex)&&this.rowState.delete(index))}}return GroupsService.fac=function(t){return new(t||GroupsService)(inject(Skip,8))},GroupsService.prov=defineInjectable({token:GroupsService,factory:GroupsService.fac}),GroupsService})();class fesm2015_ColumnsContainer{constructor(columns){this.columns=columns,this.allColumns=new QueryList,this.leafColumns=new QueryList,this.lockedColumns=new QueryList,this.nonLockedColumns=new QueryList,this.lockedLeafColumns=new QueryList,this.nonLockedLeafColumns=new QueryList,this.totalLevels=0,this.changes=new core_EventEmitter,this.leafColumnsToRender=[],this.lockedColumnsToRender=[],this.nonLockedColumnsToRender=[],this.hasGroupHeaderColumn=!1,this.hasGroupFooter=!1,this.hasFooter=!1,this.unlockedWidth=0}refresh(){const currentLevels=this.totalLevels,leafColumns$$1=new Array,lockedLeafColumns=new Array,nonLockedLeafColumns=new Array,lockedColumns=new Array,nonLockedColumns=new Array,allColumns=new Array,leafColumnsToRender=new Array,lockedColumnsToRender=new Array,nonLockedColumnsToRender=new Array;let hasGroupHeaderColumn=!1,hasGroupFooter=!1,hasFooter=!1,unlockedWidth=0,leafIndex=0;this.totalLevels=0,this.columns().forEach(column=>{const containerLeafColumns=!0===column.isLocked?lockedLeafColumns:nonLockedLeafColumns,containerColumns=!0===column.isLocked?lockedColumns:nonLockedColumns,toRenderContainer=!0===column.isLocked?lockedColumnsToRender:nonLockedColumnsToRender;isColumnGroupComponent(column)||(containerLeafColumns.push(column),leafColumns$$1.push(column),leafColumnsToRender.push.apply(leafColumnsToRender,columnsToRender([column])),toRenderContainer.push.apply(toRenderContainer,columnsToRender([column])),hasGroupHeaderColumn=hasGroupHeaderColumn||someLeafColumn(leaf=>Boolean(leaf.groupHeaderColumnTemplateRef),column),hasGroupFooter=hasGroupFooter||someLeafColumn(leaf=>Boolean(leaf.groupFooterTemplateRef),column),hasFooter=hasFooter||someLeafColumn(leaf=>Boolean(leaf.footerTemplateRef),column),column.isLocked||(unlockedWidth+=column.width||0),column.isSpanColumn?column.childColumns.forEach(c=>{c.leafIndex=leafIndex++}):column.leafIndex=leafIndex++),containerColumns.push(column),allColumns.push(column),this.totalLevels=column.level>this.totalLevels?column.level:this.totalLevels}),this.hasGroupHeaderColumn=hasGroupHeaderColumn,this.hasGroupFooter=hasGroupFooter,this.hasFooter=hasFooter,this.leafColumnsToRender=leafColumnsToRender,this.lockedColumnsToRender=lockedColumnsToRender,this.nonLockedColumnsToRender=nonLockedColumnsToRender,this.unlockedWidth=unlockedWidth;const changes=((...lists)=>{let diff=!1;for(let idx=0;idx<lists.length;idx++){const[list,columns]=lists[idx];diff=diff||list.length!==columns.length,list.reset(columns)}return diff})([this.leafColumns,leafColumns$$1],[this.lockedLeafColumns,lockedLeafColumns],[this.nonLockedLeafColumns,nonLockedLeafColumns],[this.lockedColumns,lockedColumns],[this.allColumns,allColumns],[this.nonLockedColumns,nonLockedColumns])||currentLevels!==this.totalLevels;return changes&&this.changes.emit(),changes}}const forEachColumn=(list,callback)=>{list.forEach(column=>{callback(column),column.isColumnGroup&&column.hasChildren&&forEachColumn(column.childrenArray,callback)})},forEachLevel=(list,callback)=>{sortColumns(list).forEach(column=>{callback(column),column.isColumnGroup&&column.hasChildren&&forEachLevel(column.childrenArray,callback)})},filterHierarchy=(list,predicate)=>{const result=[];return sortColumns(list).forEach(column=>{if(predicate(column))if(column.isColumnGroup){const children$$1=filterHierarchy(column.childrenArray,predicate);children$$1.length&&result.push(column,...children$$1)}else column.isSpanColumn&&!filterHierarchy(column.childrenArray,predicate).length||result.push(column)}),result};class fesm2015_ColumnList{constructor(columns){this.columns=columns}static empty(){return new fesm2015_ColumnList(new QueryList)}forEach(callback){forEachColumn(this.columns,callback)}filter(callback){const result=[];return forEachColumn(this.columns,column=>{callback(column)&&result.push(column)}),result}filterHierarchy(predicate){return filterHierarchy(this.columns.toArray(),predicate)}filterSort(callback){const result=[];return forEachLevel(this.columns.toArray(),column=>{callback(column)&&result.push(column)}),result}toArray(){const result=[];return forEachColumn(this.columns,column=>{result.push(column)}),result}rootColumns(){return this.columns.toArray()}}let fesm2015_GroupInfoService=(()=>{class GroupInfoService{constructor(){this._columnList=fesm2015_ColumnList.empty}get columns(){return expandColumns(this._columnList().toArray()).filter(isColumnComponent)}registerColumnsContainer(columns){this._columnList=columns}formatForGroup(item){const column=this.columnForGroup(item);return column?column.format:""}isGroupable(groupField){const[column]=this.columns.filter(x=>x.field===groupField);return!column||column.groupable}groupTitle(item){const column=this.columnForGroup(item);return column?column.title||column.field:this.groupField(item)}groupHeaderTemplate(item){const column=this.columnForGroup(item);return column?column.groupHeaderTemplateRef||column.groupHeaderColumnTemplateRef:void 0}groupField(group){return group.data?group.data.field:group.field}columnForGroup(group){const field=this.groupField(group),[column]=this.columns.filter(x=>x.field===field);return column}}return GroupInfoService.fac=function(t){return new(t||GroupInfoService)},GroupInfoService.prov=defineInjectable({token:GroupInfoService,factory:GroupInfoService.fac}),GroupInfoService})(),fesm2015_ChangeNotificationService=(()=>{class ChangeNotificationService{constructor(ngZone){this.ngZone=ngZone,this.changes=new core_EventEmitter}notify(){this.subscription&&!this.subscription.closed||(this.subscription=this.ngZone.onStable.asObservable().pipe(take_take(1)).subscribe(()=>this.changes.emit()))}}return ChangeNotificationService.fac=function(t){return new(t||ChangeNotificationService)(inject(NgZone))},ChangeNotificationService.prov=defineInjectable({token:ChangeNotificationService,factory:ChangeNotificationService.fac}),ChangeNotificationService})(),fesm2015_NoRecordsTemplateDirective=(()=>{class NoRecordsTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return NoRecordsTemplateDirective.fac=function(t){return new(t||NoRecordsTemplateDirective)(directiveInject(TemplateRef,8))},NoRecordsTemplateDirective.dir=defineDirective({type:NoRecordsTemplateDirective,selectors:[["","kendoGridNoRecordsTemplate",""]]}),NoRecordsTemplateDirective})();const fesm2015_set=value=>pair=>pair.forEach(x=>x.style.height=value),syncRowsHeight=(table1,table2)=>{const activeElement=document.activeElement,rows=((arr1,arr2)=>{const result=[];for(let idx=0,len=arr1.length;idx<len&&arr2[idx];idx++)result.push([arr1[idx],arr2[idx]]);return result})(table1.rows,table2.rows);rows.filter(([left,right])=>left.style.height||right.style.height).forEach(fesm2015_set(""));const heights=(rows=>rows.map(([left,right])=>{const height=left.offsetHeight,offsetHeight2=right.offsetHeight;return height<offsetHeight2?offsetHeight2:height}))(rows);[table1,table2].forEach(x=>x.style.display="none"),rows.forEach((heights=>(row,idx)=>fesm2015_set(heights[idx]+1+"px")(row))(heights)),[table1,table2].forEach(x=>x.style.display=""),document.activeElement!==activeElement&&(table1.contains(activeElement)||table2.contains(activeElement))&&activeElement.focus()},CELL_CONTEXT=new InjectionToken("grid-cell-context");let fesm2015_FilterService=(()=>{class FilterService{constructor(){this.changes=new Subject_Subject}filter(value){this.changes.next(value)}}return FilterService.fac=function(t){return new(t||FilterService)},FilterService.prov=defineInjectable({token:FilterService,factory:FilterService.fac}),FilterService})(),fesm2015_PagerTemplateDirective=(()=>{class PagerTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return PagerTemplateDirective.fac=function(t){return new(t||PagerTemplateDirective)(directiveInject(TemplateRef,8))},PagerTemplateDirective.dir=defineDirective({type:PagerTemplateDirective,selectors:[["","kendoPagerTemplate",""]]}),PagerTemplateDirective})(),fesm2015_PagerContextService=(()=>{class PagerContextService{constructor(){this.changes=new Subject_Subject,this.pageChange=new Subject_Subject}get currentPage(){return this.skip/this.pageSize}notifyChanges(changes){this.total=changes.total,this.pageSize=changes.pageSize,this.skip=changes.skip,this.changes.next(changes)}changePage(page){this.pageChange.next({skip:page*this.pageSize,take:this.pageSize})}changePageSize(value){this.pageChange.next({skip:0,take:value})}nextPage(){const nextPage=this.currentPage+1;nextPage*this.pageSize<=this.total&&this.changePage(nextPage)}prevPage(){const prevPage=this.currentPage-1;prevPage*this.pageSize>=0&&this.changePage(prevPage)}}return PagerContextService.fac=function(t){return new(t||PagerContextService)},PagerContextService.prov=defineInjectable({token:PagerContextService,factory:PagerContextService.fac}),PagerContextService})(),fesm2015_PDFService=(()=>{class PDFService{constructor(){this.savePDF=new core_EventEmitter,this.drawPDF=new core_EventEmitter,this.exportClick=new core_EventEmitter,this.dataChanged=new core_EventEmitter}save(component){this.emitEvent(this.savePDF,component)}draw(component,promise){this.emitEvent(this.drawPDF,{component:component,promise:promise})}emitEvent(emitter,args){if(0===emitter.observers.length){if(isDevMode())throw new Error("Creating PDF requires including the PDFModule and adding the <kendo-grid-pdf> component.")}else emitter.emit(args)}}return PDFService.fac=function(t){return new(t||PDFService)},PDFService.prov=defineInjectable({token:PDFService,factory:PDFService.fac}),PDFService})();class PDFExportEvent extends kendo_angular_grid_ivy_ngcc_dist_fesm2015_PreventableEvent{}let fesm2015_SuspendService=(()=>{class SuspendService{constructor(){this.scroll=!1}}return SuspendService.fac=function(t){return new(t||SuspendService)},SuspendService.prov=defineInjectable({token:SuspendService,factory:SuspendService.fac}),SuspendService})();const browserMatchMedia=media=>window.matchMedia(media).matches;let fesm2015_ResponsiveService=(()=>{class ResponsiveService{constructor(){this.matchMedia=browserMatchMedia}matchesMedia(media){return!media||this.matchMedia((media=>({xs:"(max-width: 576px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"}[media]||media))(media))}}return ResponsiveService.fac=function(t){return new(t||ResponsiveService)},ResponsiveService.prov=defineInjectable({token:ResponsiveService,factory:ResponsiveService.fac}),ResponsiveService})(),fesm2015_ExcelService=(()=>{class ExcelService{constructor(){this.saveToExcel=new core_EventEmitter,this.exportClick=new core_EventEmitter}save(component){if(0===this.saveToExcel.observers.length){if(isDevMode())throw new Error("Saving excel requires including the ExcelModule and adding the <kendo-grid-excel> component.")}else this.saveToExcel.emit(component)}}return ExcelService.fac=function(t){return new(t||ExcelService)},ExcelService.prov=defineInjectable({token:ExcelService,factory:ExcelService.fac}),ExcelService})(),fesm2015_ToolbarTemplateDirective=(()=>{class ToolbarTemplateDirective{constructor(templateRef){this.templateRef=templateRef,this._position="top"}set position(position){this._position=position}get position(){return this._position}}return ToolbarTemplateDirective.fac=function(t){return new(t||ToolbarTemplateDirective)(directiveInject(TemplateRef,8))},ToolbarTemplateDirective.dir=defineDirective({type:ToolbarTemplateDirective,selectors:[["","kendoGridToolbarTemplate",""]],inputs:{position:"position"}}),ToolbarTemplateDirective})(),dist_fesm2015_ScrollSyncService=(()=>{class ScrollSyncService{constructor(ngZone){this.ngZone=ngZone,this.changes=new Subject_Subject,this.elements=[],this.subscriptions=new Subscription_Subscription,this.headerSubscription=new Subscription_Subscription,this.bodySubscription=new Subscription_Subscription,this.subscriptions.add(this.changes.subscribe(args=>this.scrollLeft(args)))}registerEmitter(el,sourceType){this.unregister(sourceType),this.elements.push({element:el,sourceType:sourceType}),"body"!==sourceType&&"header"!==sourceType||this.ngZone.runOutsideAngular(()=>{const obs=fromEvent(el,"scroll").pipe(map_map(({target:{scrollLeft:scrollLeft}})=>({scrollLeft:scrollLeft,sourceType:sourceType}))),subscription=obs.pipe(function(compare,keySelector){return source=>source.lift(new DistinctUntilChangedOperator(compare,void 0))}((x,y)=>x.scrollLeft===y.scrollLeft),filter_filter(x=>!this.source||this.source===x.sourceType),tap(x=>this.source=x.sourceType)).subscribe(x=>this.changes.next(x));subscription.add(obs.pipe(filter_filter(x=>this.source&&this.source!==x.sourceType)).subscribe(()=>this.source=void 0)),"body"===sourceType?this.bodySubscription.add(subscription):this.headerSubscription.add(subscription)})}destroy(){this.subscriptions.unsubscribe(),this.headerSubscription.unsubscribe(),this.bodySubscription.unsubscribe()}scrollLeft({scrollLeft:scrollLeft,sourceType:sourceType}){this.ngZone.runOutsideAngular(()=>{this.elements.filter(x=>sourceType!==x.sourceType).forEach(({element:element})=>element.scrollLeft=scrollLeft)})}unregister(sourceType){const index=this.elements.findIndex(x=>x.sourceType===sourceType);index>-1&&("header"===sourceType?(this.headerSubscription.unsubscribe(),this.headerSubscription=new Subscription_Subscription):"body"===sourceType&&(this.bodySubscription.unsubscribe(),this.bodySubscription=new Subscription_Subscription),this.elements.splice(index,1))}}return ScrollSyncService.fac=function(t){return new(t||ScrollSyncService)(inject(NgZone))},ScrollSyncService.prov=defineInjectable({token:ScrollSyncService,factory:ScrollSyncService.fac}),ScrollSyncService})(),_ivy_ngcc_dist_fesm2015_ResizeService=(()=>{class ResizeService{constructor(){this.resizeSubscription=new Subscription_Subscription(()=>{}),this.dispatcher=new Subject_Subject,this.changes=this.dispatcher.asObservable().pipe(function(duration,scheduler=async_async,config=defaultThrottleConfig){return source=>source.lift(new ThrottleTimeOperator(duration,scheduler,config.leading,config.trailing))}(100))}connect(resizes){this.resizeSubscription.add(resizes.subscribe(this.dispatcher))}destroy(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}}return ResizeService.fac=function(t){return new(t||ResizeService)},ResizeService.prov=defineInjectable({token:ResizeService,factory:ResizeService.fac}),ResizeService})();const fesm2015_focusableRegex=/^(?:a|input|select|option|textarea|button|object)$/i,NODE_NAME_PREDICATES={},fesm2015_toClassList=classNames=>String(classNames).trim().split(" "),hasClasses=(element,classNames)=>{const namesList=fesm2015_toClassList(classNames);return Boolean(fesm2015_toClassList(element.className).find(className=>namesList.indexOf(className)>=0))},matchesClasses=classNames=>element=>hasClasses(element,classNames),matchesNodeName=nodeName=>(NODE_NAME_PREDICATES[nodeName]||(NODE_NAME_PREDICATES[nodeName]=element=>String(element.nodeName).toLowerCase()===nodeName.toLowerCase()),NODE_NAME_PREDICATES[nodeName]),dist_fesm2015_closest=(node,predicate)=>{for(;node&&!predicate(node);)node=node.parentNode;return node},fesm2015_closestInScope=(node,predicate,scope)=>{for(;node&&node!==scope&&!predicate(node);)node=node.parentNode;if(node!==scope)return node},fesm2015_isVisible=element=>{const rect=element.getBoundingClientRect();return(rect.width>0&&rect.height>0||0!==rect.x&&0!==rect.y)&&"hidden"!==window.getComputedStyle(element).visibility},fesm2015_isFocusable=element=>{if(!element.tagName)return!1;const tagName=element.tagName.toLowerCase(),hasTabIndex=Boolean(element.getAttribute("tabIndex"));return!element.disabled&&fesm2015_focusableRegex.test(tagName)||hasTabIndex},isFocusableWithTabKey=(element,checkVisibility=!0)=>{if(!fesm2015_isFocusable(element))return!1;const tabIndex=element.getAttribute("tabIndex");return(!checkVisibility||fesm2015_isVisible(element))&&"-1"!==tabIndex},fesm2015_findElement=(node,predicate,matchSelf=!0)=>{if(node){if(matchSelf&&predicate(node))return node;for(node=node.firstChild;node;){if(1===node.nodeType){const element=fesm2015_findElement(node,predicate);if(element)return element}node=node.nextSibling}}},fesm2015_isLocked=column=>column.parent?fesm2015_isLocked(column.parent):!!column.locked,resizeArgs=(column,extra)=>Object.assign({columns:leafColumns([column]),locked:fesm2015_isLocked(column)},extra);let fesm2015_ColumnResizingService=(()=>{class ColumnResizingService{constructor(){this.changes=new core_EventEmitter,this.tables=[],this.batch=null}start(column){this.trackColumns(column);const columns=(this.column.isColumnGroup?[column]:[]).concat(leafColumns([column]));this.changes.emit({columns:columns,locked:fesm2015_isLocked(this.column),type:"start"})}resizeColumns(deltaPercent){const action=resizeArgs(this.column,{deltaPercent:deltaPercent,type:"resizeColumn"});this.changes.emit(action)}resizeTable(column,delta){const action=resizeArgs(column,{delta:delta,type:"resizeTable"});this.changes.emit(action)}resizedColumn(state$$1){this.resizedColumns.push(state$$1)}end(){this.changes.emit({columns:[],resizedColumns:this.resizedColumns,type:"end"})}registerTable(tableMetadata){return this.tables.push(tableMetadata),()=>{this.tables.splice(this.tables.indexOf(tableMetadata),1)}}measureColumns(info){null!==this.batch?this.batch.push(...info):this.autoFitBatch(info,()=>this.end())}autoFit(...columns){const nonLockedColumns=columns.filter(column=>!column.isLocked);this.autoFitStart(nonLockedColumns),this.autoFitBatch(this.batch,()=>{if(nonLockedColumns.length<columns.length){const lockedColumns=columns.filter(column=>column.isLocked);this.autoFitStart(lockedColumns),this.autoFitBatch(this.batch,()=>this.end())}else this.end()})}trackColumns(column){this.resizedColumns=[],this.column=column}autoFitStart(columns){if(this.batch=[],this.resizedColumns=[],0===columns.length)return;const locked=columns[0].isLocked;this.changes.emit({type:"start",columns:columns,locked:locked}),this.changes.emit({type:"triggerAutoFit",columns:columns,locked:locked})}autoFitBatch(info,onComplete){const locked=info.length>0&&info[0].column.isLocked;(function(...observables){const resultSelector=observables[observables.length-1];return"function"==typeof resultSelector&&observables.pop(),fromArray(observables,void 0).lift(new ZipOperator(resultSelector))})(...this.tables.filter(table=>table.locked===locked).map(table=>table.autoFit(info))).pipe(take_take(1)).subscribe(widths=>{this.changes.emit({columns:info.map(i=>i.column),type:"autoFitComplete",widths:widths,locked:locked}),onComplete&&onComplete()}),this.batch=null}}return ColumnResizingService.fac=function(t){return new(t||ColumnResizingService)},ColumnResizingService.prov=defineInjectable({token:ColumnResizingService,factory:ColumnResizingService.fac}),ColumnResizingService})();const hasFilterRow=settings=>!0===settings||"string"==typeof settings&&settings.indexOf("row")>-1;class PopupCloseEvent extends kendo_angular_grid_ivy_ngcc_dist_fesm2015_PreventableEvent{constructor(e){super(),this.originalEvent=e}}let fesm2015_SinglePopupService=(()=>{class SinglePopupService{constructor(popupService,renderer,ngZone,scrollSyncService,localization){this.popupService=popupService,this.renderer=renderer,this.ngZone=ngZone,this.localization=localization,this.onClose=new Subject_Subject,this.scrollSubscription=scrollSyncService.changes.subscribe(()=>this.destroy())}open(anchor,template,popupRef,popupClass="k-grid-filter-popup"){const toggle=kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(popupRef)&&this.popupRef===popupRef;if(this.destroy(),!toggle){const direction=this.localization.rtl?"right":"left";this.popupRef=this.popupService.open({anchorAlign:{vertical:"bottom",horizontal:direction},popupAlign:{vertical:"top",horizontal:direction},anchor:anchor,popupClass:popupClass,content:template,positionMode:"absolute"}),this.renderer.setAttribute(this.popupRef.popupElement,"dir",this.localization.rtl?"rtl":"ltr"),this.attachClose(anchor)}return this.popupRef}destroy(){this.popupRef&&(this.detachClose(),this.popupRef.close(),this.popupRef=null)}ngOnDestroy(){this.destroy(),this.scrollSubscription.unsubscribe()}detachClose(){this.removeClick&&this.removeClick()}attachClose(skipElement){this.detachClose(),this.ngZone.runOutsideAngular(()=>this.removeClick=this.renderer.listen("document","click",e=>{if(!((node,predicate)=>{for(;node;){if(predicate(node))return!0;node=node.parentNode}return!1})(e.target,x=>this.popupRef.popupElement===x||x===skipElement)){const args=new PopupCloseEvent(e);this.onClose.next(args),args.isDefaultPrevented()||this.destroy()}}))}}return SinglePopupService.fac=function(t){return new(t||SinglePopupService)(inject(fesm2015_PopupService),inject(Renderer2),inject(NgZone),inject(dist_fesm2015_ScrollSyncService),inject(fesm2015_LocalizationService))},SinglePopupService.prov=defineInjectable({token:SinglePopupService,factory:SinglePopupService.fac}),SinglePopupService})();const dist_fesm2015_append=element=>{let appended=!1;return()=>(appended||(document.body.appendChild(element),appended=!0),element)},fesm2015_offset=element=>{const{clientTop:clientTop,clientLeft:clientLeft}=(element=>element.ownerDocument.documentElement)(element),{pageYOffset:pageYOffset,pageXOffset:pageXOffset}=(element=>element.ownerDocument.defaultView)(element),{top:top,left:left}=element.getBoundingClientRect();return{top:top+pageYOffset-clientTop,left:left+pageXOffset-clientLeft}},isTargetBefore=(draggable,target)=>0!=(4&target.compareDocumentPosition(draggable)),contains$2=(element,container)=>element===container||0!=(16&container.compareDocumentPosition(element)),fesm2015_position=(target,before)=>{const targetRect=fesm2015_offset(target),{offsetWidth:offsetWidth,offsetHeight:offsetHeight}=target;return{left:targetRect.left+(before?0:offsetWidth),top:targetRect.top,height:offsetHeight}};let fesm2015_DragAndDropService=(()=>{class DragAndDropService{constructor(){this.changes=new core_EventEmitter,this.register=[],this.lastTarget=null}add(target){this.register.push(target)}remove(target){this.register=this.register.filter(current=>current!==target)}notifyDrag(draggable,element,mouseEvent){const target=this.targetFor(element);this.lastTarget!==target&&(this.changes.next({draggable:draggable,mouseEvent:mouseEvent,target:this.lastTarget,type:"leave"}),target&&this.changes.next({draggable:draggable,mouseEvent:mouseEvent,target:target,type:"enter"}),this.lastTarget=target)}notifyDrop(draggable,mouseEvent){this.changes.next({draggable:draggable,mouseEvent:mouseEvent,target:this.lastTarget,type:"drop"}),this.lastTarget=null}targetFor(element){const comparer=contains$2.bind(null,element);return this.register.find(({element:{nativeElement:nativeElement}})=>comparer(nativeElement))}}return DragAndDropService.fac=function(t){return new(t||DragAndDropService)},DragAndDropService.prov=defineInjectable({token:DragAndDropService,factory:DragAndDropService.fac}),DragAndDropService})();const updateClass=(element,valid)=>{const icon=element.querySelector(".k-icon");icon.className=icon.className.replace(/(plus|cancel)/,valid?"plus":"cancel")},updateLock=(element,locked=null)=>{const icon=element.querySelectorAll(".k-icon")[1],value=null==locked?"":locked?"k-i-lock":"k-i-unlock";icon.className=icon.className.replace(/(k-i-unlock|k-i-lock)/,"")+" "+value};let fesm2015_DragHintService=(()=>{class DragHintService{constructor(santizer){this.santizer=santizer}create(down,target,title){this.initCoords(down),this.dom=document.createElement("div"),((element,target)=>{const targetStyles=getComputedStyle(target);element.className="k-header k-drag-clue",element.style.position="absolute",element.style.zIndex="20000",element.style.paddingLeft=targetStyles.paddingLeft,element.style.paddingTop=targetStyles.paddingTop,element.style.paddingBottom=targetStyles.paddingBottom,element.style.paddingRight=targetStyles.paddingRight,element.style.width=targetStyles.width,element.style.height=targetStyles.height})(this.dom,target);const safeTitle=this.santizer.sanitize(SecurityContext.HTML,title);this.dom.innerHTML=`\n            <span class="k-icon k-drag-status k-i-cancel k-icon-with-modifier">\n                <span class="k-icon k-icon-modifier"></span>\n            </span>\n            ${safeTitle}\n        `}attach(){return dist_fesm2015_append(this.dom)}remove(){var el;this.dom&&this.dom.parentNode&&(el=this.dom,setTimeout(()=>document.body.removeChild(el)),this.dom=null)}show(){this.dom.style.display=""}hide(){this.dom.style.display="none"}enable(){updateClass(this.dom,!0)}disable(){updateClass(this.dom,!1)}removeLock(){updateLock(this.dom)}toggleLock(locked){updateLock(this.dom,locked)}move(move){this.dom.style.top=this.initialTop+move.pageY+"px",this.dom.style.left=this.initialLeft+move.pageX+"px"}initCoords(down){const{top:top,left:left}=fesm2015_offset(down.originalEvent.target);this.initialTop=top-down.pageY,this.initialLeft=left-down.pageX}}return DragHintService.fac=function(t){return new(t||DragHintService)(inject(platform_browser_DomSanitizer))},DragHintService.prov=defineInjectable({token:DragHintService,factory:DragHintService.fac}),DragHintService})(),fesm2015_DropCueService=(()=>{class DropCueService{create(){this.dom=document.createElement("div"),this.dom.className="k-grouping-dropclue",this.hide()}attach(){return dist_fesm2015_append(this.dom)}remove(){this.dom&&this.dom.parentElement&&(document.body.removeChild(this.dom),this.dom=null)}hide(){this.dom.style.display="none"}position({left:left,top:top,height:height}){this.dom.style.display="block",this.dom.style.height=height+"px",this.dom.style.top=top+"px",this.dom.style.left=left-this.dom.offsetWidth/2+"px"}}return DropCueService.fac=function(t){return new(t||DropCueService)},DropCueService.prov=defineInjectable({token:DropCueService,factory:DropCueService.fac}),DropCueService})(),fesm2015_ColumnReorderService=(()=>{class ColumnReorderService{constructor(){this.changes=new core_EventEmitter}reorder(e){this.changes.emit(e)}}return ColumnReorderService.fac=function(t){return new(t||ColumnReorderService)},ColumnReorderService.prov=defineInjectable({token:ColumnReorderService,factory:ColumnReorderService.fac}),ColumnReorderService})();class ColumnReorderEvent extends kendo_angular_grid_ivy_ngcc_dist_fesm2015_PreventableEvent{constructor({column:column,newIndex:newIndex,oldIndex:oldIndex}){super(),this.column=column,this.newIndex=newIndex,this.oldIndex=oldIndex}}let fesm2015_FocusRoot=(()=>{class FocusRoot{constructor(){this.groups=new Set}registerGroup(group){this.alive&&this.groups.add(group)}unregisterGroup(group){this.alive&&this.groups.delete(group)}activate(){this.alive&&this.groups.forEach(f=>f.activate())}deactivate(){this.alive&&this.groups.forEach(f=>f.deactivate())}}return FocusRoot.fac=function(t){return new(t||FocusRoot)},FocusRoot.prov=defineInjectable({token:FocusRoot,factory:FocusRoot.fac}),FocusRoot})();const fesm2015_isButton=matchesNodeName("button"),isInputTag=matchesNodeName("input"),navigableRegex=/(button|checkbox|color|file|radio|reset|submit)/i;class DefaultFocusableElement{constructor(host,renderer){this.renderer=renderer,this.element=host.nativeElement,this.focusable=((element,checkVisibility=!0)=>fesm2015_findElement(this.element,node=>isFocusableWithTabKey(node,checkVisibility)))(0,!1)||this.element}get enabled(){return this.focusable&&!this.focusable.disabled}get visible(){return this.focusable&&fesm2015_isVisible(this.focusable)}isNavigable(){return this.canFocus()&&!(element=this.element).disabled&&(fesm2015_isButton(element)||(element=>isInputTag(element)&&navigableRegex.test(element.type))(element));var element}toggle(active){this.renderer.setAttribute(this.focusable,"tabIndex",active?"0":"-1")}focus(){this.focusable&&this.focusable.focus()}canFocus(){return this.visible&&this.enabled}hasFocus(){return document.activeElement!==this.element&&dist_fesm2015_closest(document.activeElement,e=>e===this.element)}}let dist_fesm2015_FocusableDirective=(()=>{class FocusableDirective{constructor(cellContext,hostElement,renderer){this.cellContext=cellContext,this.hostElement=hostElement,this.renderer=renderer,this.active=!0,this.cellContext&&(this.group=this.cellContext.focusGroup),this.group&&this.group.registerElement(this)}ngAfterViewInit(){this.element||(this.element=new DefaultFocusableElement(this.hostElement,this.renderer)),this.group&&this.toggle(this.group.isActive)}ngOnDestroy(){this.group&&this.group.unregisterElement(this)}toggle(active){this.element&&active!==this.active&&(this.active=active,this.element.toggle(active))}canFocus(){return this.element&&this.element.canFocus()}isNavigable(){return this.element&&this.element.isNavigable()}focus(){this.element&&this.element.focus()}hasFocus(){return this.element&&this.element.hasFocus()}registerElement(element){this.element=element}}return FocusableDirective.fac=function(t){return new(t||FocusableDirective)(directiveInject(CELL_CONTEXT,12),directiveInject(ElementRef),directiveInject(Renderer2))},FocusableDirective.dir=defineDirective({type:FocusableDirective,selectors:[["","kendoGridFocusable",""],["","kendoGridEditCommand",""],["","kendoGridRemoveCommand",""],["","kendoGridSaveCommand",""],["","kendoGridCancelCommand",""],["","kendoGridSelectionCheckbox",""]]}),FocusableDirective})();class GridFocusableElement{constructor(navigationService){this.navigationService=navigationService}focus(){this.navigationService.focusCell()}toggle(active){this.navigationService.toggle(active)}canFocus(){return!0}hasFocus(){return this.navigationService.hasFocus()}isNavigable(){return!1}}class fesm2015_NavigationCursor{constructor(model){this.model=model,this.changes=new Subject_Subject,this.activeRow=0,this.activeCol=0,this.virtualCol=0,this.virtualRow=0}get row(){return this.model.findRow(this.activeRow)}get cell(){const row=this.row;if(row)return this.model.findCell(this.activeCol,row)}get dataRowIndex(){const row=this.row;return row?row.dataRowIndex:-1}reset(rowIndex=this.activeRow,colIndex=this.activeCol,force=!0){this.activate(rowIndex,colIndex,force)&&(this.virtualRow=rowIndex,this.virtualCol=colIndex)}activate(rowIndex,colIndex,force){if(!force&&this.isActiveRange(rowIndex,colIndex))return!1;const prevColIndex=this.activeCol,prevRowIndex=this.activeRow;return this.activeCol=colIndex,this.activeRow=rowIndex,this.changes.next({colIndex:colIndex,prevColIndex:prevColIndex,prevRowIndex:prevRowIndex,rowIndex:rowIndex}),!0}isActiveRange(rowIndex,colIndex){if(this.activeRow!==rowIndex)return!1;const cell=this.cell,{start:start,end:end}=this.model.cellRange(cell);return!Boolean(cell)||start<=colIndex&&colIndex<=end}assume(rowIndex=this.activeRow,colIndex=this.activeCol){this.virtualRow=rowIndex,this.virtualCol=colIndex,this.activeCol=colIndex,this.activeRow=rowIndex}announce(){this.changes.next({colIndex:this.activeCol,prevColIndex:this.activeCol,prevRowIndex:this.activeRow,rowIndex:this.activeRow})}activateVirtualCell(cell){const rowRange=this.model.rowRange(cell),cellRange=this.model.cellRange(cell),activeCol=this.activeCol,activeRow=this.activeRow;if(rowRange.start<=activeRow&&activeRow<=rowRange.end&&cellRange.start<=activeCol&&activeCol<=cellRange.end)return this.activeRow=cell.rowIndex,this.activeCol=cell.colIndex,!0}isActive(rowIndex,colIndex){return this.activeCol===colIndex&&this.activeRow===rowIndex}moveUp(offset=1){return this.offsetRow(-offset)}moveDown(offset=1){return this.offsetRow(offset)}moveLeft(offset=1){return this.offsetCol(-offset)}moveRight(offset=1){return this.offsetCol(offset)}lastCellIndex(row){return this.metadata.columns.leafColumnsToRender.length-1+(!this.metadata.hasDetailTemplate||row&&row.groupItem?0:1)}offsetCol(offset){const prevRow=this.model.findRow(this.virtualRow),lastIndex=this.lastCellIndex(prevRow),virtualCol=this.virtualCol;this.virtualCol=Math.max(0,Math.min(virtualCol+offset,lastIndex));let nextColIndex=this.virtualCol,nextRowIndex=this.virtualRow,cell=this.model.findCell(this.virtualCol,prevRow);if(!cell&&this.metadata.virtualColumns)return this.activate(nextRowIndex,nextColIndex);if(cell.colSpan>1&&cell.colIndex<=virtualCol&&virtualCol<cell.colIndex+cell.colSpan){nextColIndex=offset>0?Math.min(cell.colIndex+cell.colSpan,lastIndex):Math.max(0,cell.colIndex+offset);const nextCell=this.model.findCell(nextColIndex,prevRow);cell!==nextCell?(cell=nextCell,this.virtualCol=cell.colIndex):this.virtualCol=virtualCol}return this.activate(cell.rowIndex,cell.colIndex)}offsetRow(offset){let nextColIndex=this.virtualCol;if(this.metadata&&this.metadata.isVirtual){const maxIndex=this.metadata.maxLogicalRowIndex;let nextIndex=Math.max(0,Math.min(this.activeRow+offset,maxIndex));this.metadata.hasDetailTemplate&&!this.model.findRow(nextIndex)&&(nextIndex=offset>0?nextIndex+1:nextIndex-1,nextIndex=Math.max(0,Math.min(nextIndex,maxIndex))),this.metadata.hasDetailTemplate&&nextIndex===maxIndex&&this.model.lastRow.index!==maxIndex&&nextIndex--;const nextRow=this.model.findRow(nextIndex);if(nextRow){let cell=this.model.findCell(this.virtualCol,nextRow);cell.rowIndex<=this.virtualRow&&offset>0&&cell.rowSpan>1&&(cell=this.model.findCell(this.virtualCol,this.model.findRow(cell.rowIndex+cell.rowSpan-1+offset))),nextIndex=cell.rowIndex,nextColIndex=cell.colIndex}return this.virtualRow=nextIndex,this.activate(nextIndex,nextColIndex)}const nextRow=this.model.findRow(this.virtualRow+offset)||this.model.nextRow(this.virtualRow,offset);if(!nextRow)return!1;let cell=this.model.findCell(this.virtualCol,nextRow);return cell&&cell.rowIndex<=this.virtualRow&&offset>0&&cell.rowSpan>1&&(cell=this.model.findCell(this.virtualCol,this.model.findRow(cell.rowIndex+cell.rowSpan-1+offset))),!cell&&this.metadata.virtualColumns?this.activate(this.virtualRow+offset,this.virtualCol):(this.virtualRow=cell.rowIndex,this.activate(this.virtualRow,cell.colIndex))}}class ItemMap{constructor(){this.count=0,this.items={}}get first(){if(this.count>0){let result;return this.forEach(item=>(result=item,!0)),result}}get last(){if(this.count>0){const keys=Object.keys(this.items);return this.items[keys[keys.length-1]]}}removeItem(key){this.items[key]&&(delete this.items[key],this.count--)}setItem(key,item){this.items[key]||this.count++,this.items[key]=item}getItem(key){return this.items[key]}toArray(){const result=[];return this.forEach(item=>{result.push(item)}),result}forEach(callback){for(let key in this.items)if(this.items.hasOwnProperty(key)&&callback(this.items[key]))return this.items[key]}find(callback){return this.forEach(callback)}}class NavigationModel{constructor(){this.rows=new ItemMap}get firstRow(){return this.rows.first}get lastRow(){return this.rows.last}registerCell(cell){const row=this.rows.getItem(cell.logicalRowIndex);if(!row)return;const colIndex=cell.logicalColIndex,modelCell={uid:cell.uid,colIndex:colIndex,rowIndex:row.index,colSpan:cell.colSpan,rowSpan:cell.rowSpan,detailExpandCell:cell.detailExpandCell,dataItem:row.dataItem,dataRowIndex:row.dataRowIndex,focusGroup:cell.focusGroup};return row.cells.setItem(colIndex,modelCell),cell.groupItem&&(row.groupItem=cell.groupItem),modelCell}unregisterCell(index,rowIndex,cell){const row=this.rows.getItem(rowIndex);if(row){const match=row.cells.getItem(index);match&&match.uid===cell.uid&&row.cells.removeItem(index)}}registerRow(row){const modelRow={uid:row.uid,index:row.logicalRowIndex,dataItem:row.dataItem,dataRowIndex:row.dataRowIndex,cells:new ItemMap};this.rows.setItem(row.logicalRowIndex,modelRow)}updateRow(row){const current=this.rows.getItem(row.logicalRowIndex);current&&Object.assign(current,{dataItem:row.dataItem,dataRowIndex:row.dataRowIndex})}unregisterRow(index,row){const match=this.rows.getItem(index);match&&match.uid===row.uid&&this.rows.removeItem(index)}cellRange(cell){return cell?{start:cell.colIndex,end:cell.colIndex+(cell.colSpan||1)-1}:{}}rowRange(cell){return cell?{start:cell.rowIndex,end:cell.rowIndex+(cell.rowSpan||1)-1}:{}}nextRow(rowIndex,offset){const rows=this.rows.toArray(),row=this.rows.getItem(rowIndex),position=rows.indexOf(row);return rows[position+offset]}findRow(index){return this.rows.getItem(index)}findCell(index,row){if(!row)return;const rowIndex=row.index;let cell=row.cells.getItem(index),currentIndex=rowIndex;for(;!cell&&row;)row=this.rows.getItem(currentIndex),cell=this.rowCell(index,row),currentIndex--;return cell&&rowIndex<=row.index+(cell.rowSpan||1)-1?cell:void 0}rowCell(index,row){if(!row||!row.cells.count)return;const firstCell=row.cells.first;let cell,currentIndex=index;for(;!cell&&currentIndex>=firstCell.colIndex;)cell=row.cells.getItem(currentIndex),currentIndex--;return cell&&index<=cell.colIndex+(cell.colSpan||1)-1?cell:void 0}}let fesm2015_ScrollRequestService=(()=>{class ScrollRequestService{constructor(){this.requests=new Subject_Subject}scrollTo(request){this.requests.next(request)}}return ScrollRequestService.fac=function(t){return new(t||ScrollRequestService)},ScrollRequestService.prov=defineInjectable({token:ScrollRequestService,factory:ScrollRequestService.fac}),ScrollRequestService})();const isInSameGrid=(element,gridElement)=>dist_fesm2015_closest(element,matchesNodeName("kendo-grid"))===gridElement,matchHeaderCell=matchesNodeName("th"),matchDataCell=matchesNodeName("td"),matchCell=element=>matchDataCell(element)||matchHeaderCell(element),targetCell=(target,gridElement)=>{const cell=((element,gridElement)=>{let target=dist_fesm2015_closest(element,matchCell);for(;target&&!isInSameGrid(target,gridElement);)target=dist_fesm2015_closest(target.parentElement,matchCell);return target})(target,gridElement),row=dist_fesm2015_closest(cell,matchesNodeName("tr"));if(cell&&row){let rowIndex=row.getAttribute("aria-rowindex");rowIndex=rowIndex?parseInt(rowIndex,10)-1:null;let colIndex=cell.getAttribute("aria-colindex");if(colIndex=colIndex?parseInt(colIndex,10)-1:null,null!==rowIndex&&null!==colIndex)return{colIndex:colIndex,rowIndex:rowIndex,element:cell}}},isNavigationKey=keyCode=>(keyCode=>keyCode===Keys.ArrowLeft||keyCode===Keys.ArrowRight||keyCode===Keys.ArrowUp||keyCode===Keys.ArrowDown)(keyCode)||keyCode===Keys.PageUp||keyCode===Keys.PageDown||keyCode===Keys.Home||keyCode===Keys.End,isInput=matchesNodeName("input");class NavigationViewport{constructor(firstItemIndex,lastItemIndex){this.firstItemIndex=firstItemIndex,this.lastItemIndex=lastItemIndex}containsRow(dataRowIndex){return dataRowIndex<0||dataRowIndex>=this.firstItemIndex&&dataRowIndex<=this.lastItemIndex}intersects(start,end){return start<=this.firstItemIndex&&this.lastItemIndex<=end||this.firstItemIndex<=start&&start<=this.lastItemIndex||this.firstItemIndex<=end&&end<=this.lastItemIndex}}let kendo_angular_grid_ivy_ngcc_dist_fesm2015_NavigationService=(()=>{class NavigationService{constructor(zone,domEvents,pagerContextService,scrollRequestService,groupsService,detailsService,focusRoot,editService,cd,localization,focusableParent){this.zone=zone,this.domEvents=domEvents,this.pagerContextService=pagerContextService,this.scrollRequestService=scrollRequestService,this.groupsService=groupsService,this.detailsService=detailsService,this.focusRoot=focusRoot,this.editService=editService,this.cd=cd,this.localization=localization,this.focusableParent=focusableParent,this.cellKeydown=new core_EventEmitter,this.activeRowIndex=0,this.alive=!1,this.active=!0,this.mode=0,this.model=new NavigationModel,this.cursor=new fesm2015_NavigationCursor(this.model),this.changes=this.cursor.changes}set metadata(value){this.meta=value,this.cursor.metadata=value}get metadata(){return this.meta}get enabled(){return this.alive}get activeCell(){if(0!==this.mode)return this.cursor.cell}get activeRow(){if(0!==this.mode)return Object.assign({},this.cursor.row,{cells:this.cursor.row.cells.toArray()})}get activeDataRow(){return Math.max(0,this.activeRowIndex-this.meta.headerRows)}init(meta){this.alive=!0,this.focusRoot.alive=!0,this.metadata=meta;const onStableSubscriber=(...operators)=>args=>this.zone.isStable?from_from([!0]).pipe(map_map(()=>args)):this.zone.onStable.pipe(take_take(1),map_map(()=>args),...operators),onStable=onStableSubscriber();if(this.subs=new Subscription_Subscription,this.subs.add(this.cursor.changes.subscribe(args=>this.onCursorChanges(args))),this.subs.add(this.domEvents.focus.pipe(switchMap(onStable)).subscribe(args=>this.navigateTo(args.target))),this.subs.add(this.domEvents.focusOut.pipe(filter_filter(()=>0!==this.mode),switchMap(onStableSubscriber(takeUntil(this.domEvents.focus)))).subscribe(args=>this.onFocusOut(args))),this.subs.add(this.domEvents.windowBlur.pipe(filter_filter(()=>0!==this.mode)).subscribe(()=>this.onWindowBlur())),this.subs.add(this.editService.changes.pipe(filter_filter(e=>"edit"!==e.action&&2===this.mode),filter_filter(e=>"cellClose"===e.action&&!e.prevented),switchMap(onStable)).subscribe(()=>this.leaveCell())),this.subs.add(this.pagerContextService.pageChange.subscribe(()=>this.cursor.reset(0,0))),this.subs.add(this.domEvents.keydown.subscribe(args=>this.onKeydown(args))),this.subs.add(this.domEvents.keydown.pipe(filter_filter(args=>args.keyCode===Keys.Tab&&2===this.mode),switchMapTo(this.domEvents.focusOut.pipe(takeUntil(interval_interval(0).pipe(take_take(1)))))).subscribe(()=>this.onTabout())),this.focusableParent){const element=new GridFocusableElement(this);this.focusableParent.registerElement(element)}this.deactivateElements()}ngOnDestroy(){this.subs&&this.subs.unsubscribe(),this.alive=!1}registerCell(cell){if(cell.logicalRowIndex!==this.pendingRowIndex){const modelCell=this.model.registerCell(cell);this.virtualCell&&this.cursor.activateVirtualCell(modelCell)&&(this.virtualCell=!1)}}registerCellOnCurrentRow(cell){cell.logicalRowIndex===this.pendingRowIndex&&this.model.registerCell(cell)}unregisterCell(index,rowIndex,cell){this.model.unregisterCell(index,rowIndex,cell)}registerRow(row){this.model.registerRow(row),this.pendingRowIndex=row.logicalRowIndex}updateRow(row){this.model.updateRow(row)}unregisterRow(index,row){this.model.unregisterRow(index,row)}isCellFocusable(cell){return this.alive&&this.active&&2!==this.mode&&this.cursor.isActive(cell.logicalRowIndex,cell.logicalColIndex)}isCellFocused(cell){return 1===this.mode&&this.isCellFocusable(cell)}navigateTo(el){if(!this.alive)return;const cell=targetCell(el,this.meta.gridElement.nativeElement);if(!cell)return;const oldMode=this.mode,focusInCell=((parent,node,matchSelf=!1)=>{if(!dist_fesm2015_closest(node,child=>child===parent))return!1;const el=dist_fesm2015_closest(node,child=>child===node);return el&&(matchSelf||el!==parent)})(cell.element,document.activeElement),focusInActiveRowContent=2===this.mode&&this.activeRowIndex===cell.rowIndex&&el!==cell.element;if(focusInCell)this.mode=2,this.cursor.reset(cell.rowIndex,cell.colIndex),this.activateRow();else if(!focusInActiveRowContent){this.mode=1,this.deactivateElements();const alreadyActive=this.cursor.isActive(cell.rowIndex,cell.colIndex);1===oldMode&&alreadyActive||this.cursor.reset(cell.rowIndex,cell.colIndex)}}tryFocus(el){this.activateElements();const focusable=((element,checkVisibility=!0)=>fesm2015_findElement(element,node=>isFocusableWithTabKey(node,checkVisibility),!1))(el);if(focusable){const cell=targetCell(focusable,this.meta.gridElement.nativeElement);cell&&(this.cursor.reset(cell.rowIndex,cell.colIndex),this.deactivateElements(),this.enterCell()),focusable.focus()}else this.deactivateElements();return!!focusable}needsViewport(){return this.meta&&this.meta.isVirtual}setViewport(firstItemIndex,lastItemIndex){if(this.viewport=new NavigationViewport(firstItemIndex,lastItemIndex),this.meta&&this.meta.isVirtual&&this.activeDataRow>-1){const dataRowIndex=this.activeDataRow,behind=dataRowIndex-lastItemIndex;firstItemIndex-dataRowIndex>0?this.cursor.reset(firstItemIndex+this.meta.headerRows):behind>0&&this.cursor.reset(lastItemIndex-this.meta.headerRows)}}setColumnViewport(firstItemIndex,lastItemIndex){this.columnViewport=new NavigationViewport(firstItemIndex,lastItemIndex)}focusCell(rowIndex,colIndex){return this.mode=1,this.cursor.reset(rowIndex,colIndex),this.activeCell}focusNextCell(wrap=!0){return this.focusAdjacentCell(!0,wrap)}focusPrevCell(wrap=!0){return this.focusAdjacentCell(!1,wrap)}toggle(active){this.active=active,this.cursor.announce()}hasFocus(){return 1===this.mode||2===this.mode}autoFocusCell(start,end){return!this.meta.virtualColumns||end<this.meta.columns.lockedLeafColumns.length||this.columnViewport.intersects(start,end)}focusAdjacentCell(fwd,wrap){this.focusCell();let success=fwd?this.moveCursorFwd():this.moveCursorBwd();if(wrap&&!success&&(success=fwd?this.cursor.moveDown(1):this.cursor.moveUp(1),success)){const row=this.cursor.row,colIdx=fwd?0:this.cursor.lastCellIndex(row);this.cursor.reset(row.index,colIdx)}return success?this.activeCell:(this.mode=0,this.cursor.announce(),null)}enterCell(){const cell=this.cursor.cell;if(!cell)return;const group=cell.focusGroup,focusable=group&&group.canFocus();this.mode=focusable?2:1,this.cursor.announce(),focusable&&(this.activateRow(),group.focus())}leaveCell(){const cell=this.cursor.cell;if(!cell)return;const group=cell.focusGroup;group&&group.canFocus()||this.deactivateElements(),this.mode=1,this.cursor.announce()}activateElements(){this.focusRoot.activate()}deactivateElements(){this.focusRoot.deactivate()}activateRow(){this.cursor.row.cells.forEach(cell=>cell.focusGroup&&cell.focusGroup.activate())}moveCursorFwd(){return this.localization.rtl?this.cursor.moveLeft():this.cursor.moveRight()}moveCursorBwd(){return this.localization.rtl?this.cursor.moveRight():this.cursor.moveLeft()}onCursorKeydown(args){let preventDefault=!1;const modifier=args.ctrlKey||args.metaKey,step=modifier?5:1;if(!this.onCellKeydown(args))return;const row=this.cursor.row;switch(args.keyCode){case Keys.ArrowDown:preventDefault=this.cursor.moveDown(step);break;case Keys.ArrowUp:preventDefault=this.cursor.moveUp(step);break;case Keys.ArrowRight:preventDefault=this.moveCursorFwd();break;case Keys.ArrowLeft:preventDefault=this.moveCursorBwd();break;case Keys.PageDown:if(this.metadata.isVirtual&&this.viewport){let nextItemIndex=this.meta.headerRows+this.viewport.lastItemIndex+1;this.metadata.hasDetailTemplate&&nextItemIndex++,nextItemIndex=Math.min(this.meta.maxLogicalRowIndex,nextItemIndex),this.cursor.reset(nextItemIndex),preventDefault=!0}else this.metadata.hasPager&&(this.zone.run(()=>this.pagerContextService.nextPage()),preventDefault=!0);break;case Keys.PageUp:if(this.metadata.isVirtual&&this.viewport){let nextItemIndex=Math.max(this.meta.headerRows,this.viewport.firstItemIndex-(this.viewport.lastItemIndex-this.viewport.firstItemIndex)-1);this.cursor.reset(nextItemIndex),preventDefault=!0}else this.metadata.hasPager&&(this.zone.run(()=>this.pagerContextService.prevPage()),preventDefault=!0);break;case Keys.Home:this.cursor.reset(modifier?this.meta.isVirtual?this.meta.headerRows:this.model.firstRow.index:row.index,0,!1),preventDefault=!0;break;case Keys.End:if(modifier)if(this.meta.isVirtual){let lastRowIndex=this.meta.maxLogicalRowIndex;this.meta.hasDetailTemplate&&lastRowIndex--,this.cursor.reset(lastRowIndex,this.cursor.lastCellIndex(),!1)}else this.cursor.reset(this.model.lastRow.index,this.cursor.lastCellIndex(this.model.lastRow),!1);else{const lastIndex=this.cursor.lastCellIndex(row),cell=this.model.findCell(lastIndex,row);cell?this.cursor.reset(cell.rowIndex,cell.colIndex):this.cursor.reset(row.index,lastIndex)}preventDefault=!0;break;case Keys.Enter:case Keys.F2:const groupItem=row.groupItem;groupItem?this.zone.run(()=>this.groupsService.toggleRow(groupItem.index,groupItem.data)):this.cursor.cell.detailExpandCell?this.zone.run(()=>this.detailsService.toggleRow(row.dataRowIndex,row.dataItem)):(this.enterCell(),this.cursor.cell.focusGroup.isNavigable()||(preventDefault=!0));break;default:args.ctrlKey||args.altKey||1!==(str=args.key).length||!str.match(/\S/)||this.enterCell()}var str;preventDefault&&args.preventDefault()}onContentKeydown(args){if(!this.onCellKeydown(args))return;const confirm=!args.defaultPrevented&&args.keyCode===Keys.Enter&&(element=args.srcElement)&&isInput(element)&&"text"===element.type.toLowerCase();var element;args.keyCode===Keys.Escape||args.keyCode===Keys.F2||confirm?(this.leaveCell(),this.cursor.reset(),args.stopPropagation()):isNavigationKey(args.keyCode)&&this.cursor.cell.focusGroup.isNavigable()&&(this.onCursorKeydown(args),args.defaultPrevented&&this.leaveCell())}onCellKeydown(args){if(this.editService.isEditingCell()){const confirm=args.keyCode===Keys.Enter,cancel=args.keyCode===Keys.Escape,navigate=isNavigationKey(args.keyCode);if(confirm)this.editService.closeCell(args);else if(cancel)this.editService.cancelCell(),this.cd.detectChanges();else if(navigate)return!1}return this.cellKeydown.emit(args),!0}onCursorChanges(args){this.activeRowIndex=args.rowIndex;const dataRowIndex=this.activeDataRow;if(this.meta&&this.meta.isVirtual&&this.viewport&&!this.viewport.containsRow(dataRowIndex)&&dataRowIndex>-1&&this.scrollRequestService.scrollTo({row:dataRowIndex}),this.meta.virtualColumns&&args.colIndex>=this.meta.columns.lockedLeafColumns.length){const cell=this.activeCell,{start:start,end:end}=this.model.cellRange(cell);cell||(this.virtualCell=!0),(!cell&&0!==this.mode||cell&&!this.columnViewport.intersects(start,end))&&this.scrollRequestService.scrollTo({column:args.colIndex-(this.metadata.hasDetailTemplate?1:0)})}}onFocusOut(args){this.mode=fesm2015_isVisible(args.target)?0:1,this.deactivateElements(),this.cursor.announce()}onWindowBlur(){this.mode=0,this.deactivateElements(),this.cursor.announce()}onKeydown(args){1===this.mode?this.onCursorKeydown(args):2===this.mode&&this.onContentKeydown(args)}onTabout(){this.cursor.cell.focusGroup.isNavigable()||(this.leaveCell(),this.cursor.reset())}}return NavigationService.fac=function(t){return new(t||NavigationService)(inject(NgZone),inject(fesm2015_DomEventsService),inject(fesm2015_PagerContextService),inject(fesm2015_ScrollRequestService),inject(fesm2015_GroupsService),inject(fesm2015_DetailsService),inject(fesm2015_FocusRoot),inject(fesm2015_EditService),inject(ChangeDetectorRef),inject(fesm2015_LocalizationService),inject(dist_fesm2015_FocusableDirective,8))},NavigationService.prov=defineInjectable({token:NavigationService,factory:NavigationService.fac}),NavigationService})();class NavigationMetadata{constructor(dataRows,headerRows,isVirtual,hasPager,hasDetailTemplate,gridElement,virtualColumns,columns){this.dataRows=dataRows,this.headerRows=headerRows,this.isVirtual=isVirtual,this.hasPager=hasPager,this.hasDetailTemplate=hasDetailTemplate,this.gridElement=gridElement,this.virtualColumns=virtualColumns,this.columns=columns}get maxLogicalRowIndex(){return this.headerRows+(this.hasDetailTemplate?2*this.dataRows:this.dataRows)-1}}let dist_fesm2015_sequence=0,fesm2015_IdService=(()=>{class IdService{constructor(){this.prefix="k-grid"+dist_fesm2015_sequence++}cellId(rowIndex,colIndex){return`${this.prefix}-r${rowIndex}c${colIndex}`}selectionCheckboxId(itemIndex){return`${this.prefix}-checkbox${itemIndex}`}selectAllCheckboxId(){return this.prefix+"-select-all"}}return IdService.fac=function(t){return new(t||IdService)},IdService.prov=defineInjectable({token:IdService,factory:IdService.fac}),IdService})(),fesm2015_ColumnInfoService=(()=>{class ColumnInfoService{constructor(){this.visibilityChange=new core_EventEmitter,this.lockedChange=new core_EventEmitter,this.columnRangeChange=new core_EventEmitter,this.columnsContainer=new fesm2015_ColumnsContainer(()=>[])}get lockedLeafColumns(){return this.columnsContainer.lockedLeafColumns}get nonLockedLeafColumns(){return this.columnsContainer.nonLockedLeafColumns}get isLocked(){return this.lockedLeafColumns.length>0}get totalLevels(){return this.columnsContainer.totalLevels}get leafNamedColumns(){const columns=expandColumns(this.list().filterSort(column=>!column.isColumnGroup)).filter(column=>column.matchesMedia&&column.displayTitle);return array_operators_orderBy(columns,[{field:"locked",dir:"desc"}])}get unlockedRootCount(){return this.list().rootColumns().filter(column=>!column.locked&&column.isVisible).length}init(columns,list){this.columnsContainer=columns,this.list=list}changeVisibility(columns){this.visibilityChange.emit(columns)}changeLocked(columns){this.lockedChange.emit(columns)}}return ColumnInfoService.fac=function(t){return new(t||ColumnInfoService)},ColumnInfoService.prov=defineInjectable({token:ColumnInfoService,factory:ColumnInfoService.fac}),ColumnInfoService})(),fesm2015_SortService=(()=>{class SortService{constructor(){this.changes=new Subject_Subject}sort(value){this.changes.next(value)}}return SortService.fac=function(t){return new(t||SortService)},SortService.prov=defineInjectable({token:SortService,factory:SortService.fac}),SortService})();class ColumnVisibilityChangeEvent{constructor(columns){this.columns=columns}}class ColumnLockedChangeEvent{constructor(columns){this.columns=columns}}function defaultTrackBy(index,item){return"data"===item.type&&item.isEditing?item.data:index}const handleExpandCollapseService=(service,expandEmitter,collapseEmitter,map$$1)=>service.changes.pipe(filter_filter(({dataItem:dataItem})=>kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(dataItem))).subscribe(x=>x.expand?expandEmitter.emit(map$$1(x)):collapseEmitter.emit(map$$1(x))),isInEditedCell=(element,gridElement)=>dist_fesm2015_closest(element,matchesClasses("k-grid-edit-cell"))&&dist_fesm2015_closest(element,matchesNodeName("kendo-grid"))===gridElement,fesm2015_4$2={};let fesm2015_GridComponent=(()=>{class GridComponent{constructor(supportService,selectionService,wrapper,groupInfoService,groupsService,changeNotification,detailsService,editService,filterService,pdfService,responsiveService,renderer,excelService,ngZone,scrollSyncService,domEvents,columnResizingService,changeDetectorRef,columnReorderService,columnInfoService,navigationService,sortService,scrollRequestService,localization){this.supportService=supportService,this.selectionService=selectionService,this.wrapper=wrapper,this.groupInfoService=groupInfoService,this.groupsService=groupsService,this.changeNotification=changeNotification,this.detailsService=detailsService,this.editService=editService,this.filterService=filterService,this.pdfService=pdfService,this.responsiveService=responsiveService,this.renderer=renderer,this.excelService=excelService,this.ngZone=ngZone,this.scrollSyncService=scrollSyncService,this.domEvents=domEvents,this.columnResizingService=columnResizingService,this.changeDetectorRef=changeDetectorRef,this.columnReorderService=columnReorderService,this.columnInfoService=columnInfoService,this.navigationService=navigationService,this.sortService=sortService,this.scrollRequestService=scrollRequestService,this.data=[],this.scrollable="scrollable",this.selectable=!1,this.trackBy=defaultTrackBy,this.virtualColumns=!1,this.filterable=!1,this.sortable=!1,this.pageable=!1,this.groupable=!1,this.navigable=!1,this.autoSize=!1,this.resizable=!1,this.reorderable=!1,this.loading=!1,this.columnMenu=!1,this.hideHeader=!1,this.filterChange=new core_EventEmitter,this.pageChange=new core_EventEmitter,this.groupChange=new fesm2015_ZoneAwareEventEmitter(this.ngZone),this.sortChange=new core_EventEmitter,this.selectionChange=new core_EventEmitter,this.dataStateChange=new core_EventEmitter,this.groupExpand=new core_EventEmitter,this.groupCollapse=new core_EventEmitter,this.detailExpand=new core_EventEmitter,this.detailCollapse=new core_EventEmitter,this.edit=new core_EventEmitter,this.cancel=new core_EventEmitter,this.save=new core_EventEmitter,this.remove=new core_EventEmitter,this.add=new core_EventEmitter,this.cellClose=new core_EventEmitter,this.cellClick=new fesm2015_ZoneAwareEventEmitter(this.ngZone),this.pdfExport=new core_EventEmitter,this.excelExport=new core_EventEmitter,this.columnResize=new fesm2015_ZoneAwareEventEmitter(this.ngZone),this.columnReorder=new core_EventEmitter,this.columnVisibilityChange=new core_EventEmitter,this.columnLockedChange=new core_EventEmitter,this.scrollBottom=new core_EventEmitter,this.contentScroll=new core_EventEmitter,this.columns=new QueryList,this.footer=new QueryList,this.selectionDirective=!1,this.columnsContainer=new fesm2015_ColumnsContainer(()=>this.columnList.filterHierarchy(column=>(column.matchesMedia=this.matchesMedia(column),column.isVisible))),this.view=new DataCollection(()=>new DataResultIterator(this.data,this.skip,this.hasGroupFooters)),this.shouldGenerateColumns=!0,this._sort=new Array,this._group=new Array,this._skip=0,this.cachedWindowWidth=0,this._rowSelected=null,this.rtl=!1,this._rowClass=()=>null,this.localizationSubscription=localization.changes.subscribe(({rtl:rtl})=>{this.rtl=rtl,this.direction=this.rtl?"rtl":"ltr"}),this.groupInfoService.registerColumnsContainer(()=>this.columnList),this.columnInfoService.init(this.columnsContainer,()=>this.columnList),this.columnVisibilityChangeSubscription=this.columnInfoService.visibilityChange.subscribe(changed=>{this.columnVisibilityChange.emit(new ColumnVisibilityChangeEvent(changed))}),this.columnLockedChangeSubscription=this.columnInfoService.lockedChange.subscribe(changed=>{this.columnLockedChange.emit(new ColumnLockedChangeEvent(changed))}),selectionService&&(this.selectionSubscription=selectionService.changes.subscribe(event=>{this.ngZone.run(()=>this.selectionChange.emit(event))})),this.groupExpandCollapseSubscription=handleExpandCollapseService(groupsService,this.groupExpand,this.groupCollapse,({dataItem:group,index:index})=>({group:group,groupIndex:index})),this.detailsServiceSubscription=handleExpandCollapseService(detailsService,this.detailExpand,this.detailCollapse,args=>args),this.filterSubscription=this.filterService.changes.subscribe(x=>{this.filterChange.emit(x)}),this.sortSubscription=this.sortService.changes.subscribe(x=>{this.sortChange.emit(x)}),this.attachStateChangesEmitter(),this.attachEditHandlers(),this.attachDomEventHandlers(),this.pdfSubscription=this.pdfService.exportClick.subscribe(this.emitPDFExportEvent.bind(this)),this.excelSubscription=this.excelService.exportClick.subscribe(this.saveAsExcel.bind(this)),this.columnsContainerChange(),this.handleColumnResize(),this.columnList=new fesm2015_ColumnList(this.columns),this.columnReorderSubscription=this.columnReorderService.changes.subscribe(this.reorder.bind(this)),this.columnRangeChangeSubscription=this.columnInfoService.columnRangeChange.subscribe(this.onColumnRangeChange.bind(this))}get skip(){return this._skip}set skip(value){value>=0&&(this._skip=value)}set sort(value){dist_fesm2015_isArray(value)&&(this._sort=value)}get sort(){return this._sort}set group(value){dist_fesm2015_isArray(value)&&(this._group=value)}get group(){return this._group}get showTopToolbar(){return this.toolbarTemplate&&["top","both"].indexOf(this.toolbarTemplate.position)>-1}get showBottomToolbar(){return this.toolbarTemplate&&["bottom","both"].indexOf(this.toolbarTemplate.position)>-1}get isLocked(){return this.lockedLeafColumns.length>0}get showPager(){return!this.isVirtual&&!1!==this.pageable}get showGroupPanel(){return this.groupable&&!1!==this.groupable.enabled}get groupableEmptyText(){return this.groupable.emptyText}set navigatable(value){this.navigable=value}get navigatable(){return this.navigable}set rowClass(fn){if("function"!=typeof fn)throw new Error(`rowClass must be a function, but received ${JSON.stringify(fn)}.`);this._rowClass=fn}get rowClass(){return this._rowClass}set rowSelected(fn){if("function"!=typeof fn)throw new Error(`rowSelected must be a function, but received ${JSON.stringify(fn)}.`);this._rowSelected=fn}get rowSelected(){return this._rowSelected}get activeCell(){return this.navigationService.activeCell}get activeRow(){return this.navigationService.activeRow}get dir(){return this.direction}get hostClasses(){return!0}get lockedClasses(){return this.lockedLeafColumns.length>0}get virtualClasses(){return this.isVirtual}get noScrollbarClass(){return 0===this.scrollbarWidth}get detailTemplate(){return this._customDetailTemplate?this._customDetailTemplate:this.detailTemplateChildren?this.detailTemplateChildren.first:void 0}set detailTemplate(detailTemplate){this._customDetailTemplate=detailTemplate}get noRecordsTemplate(){return this._customNoRecordsTemplate?this._customNoRecordsTemplate:this.noRecordsTemplateChildren?this.noRecordsTemplateChildren.first:void 0}set noRecordsTemplate(customNoRecordsTemplate){this._customNoRecordsTemplate=customNoRecordsTemplate}get pagerTemplate(){return this._customPagerTemplate?this._customPagerTemplate:this.pagerTemplateChildren?this.pagerTemplateChildren.first:void 0}set pagerTemplate(customPagerTemplate){this._customPagerTemplate=customPagerTemplate}get toolbarTemplate(){return this._customToolbarTemplate?this._customToolbarTemplate:this.toolbarTemplateChildren?this.toolbarTemplateChildren.first:void 0}set toolbarTemplate(customToolbarTemplate){this._customToolbarTemplate=customToolbarTemplate}get scrollbarWidth(){return this.supportService.scrollbarWidth}get headerPadding(){if(isUniversal())return"";const padding=Math.max(0,this.scrollbarWidth-1)+"px";return`0 ${this.rtl?0:padding} 0 ${this.rtl?padding:0}`}get hasGroupFooters(){return this.columnsContainer.hasGroupFooter}get showFooter(){return this.columnsContainer.hasFooter}get showGroupFooters(){return this.groupable&&this.groupable.showFooter}get ariaRowCount(){return this.totalColumnLevels+1+this.view.total}get ariaColCount(){return this.columnsContainer.leafColumnsToRender.length}get isVirtual(){return"virtual"===this.scrollable}get isScrollable(){return"none"!==this.scrollable}get visibleColumns(){return this.columnsContainer.allColumns}get lockedColumns(){return this.columnsContainer.lockedColumns}get nonLockedColumns(){return this.columnsContainer.nonLockedColumns}get lockedLeafColumns(){return this.columnsContainer.lockedLeafColumns}get nonLockedLeafColumns(){return this.columnsContainer.nonLockedLeafColumns}get leafColumns(){return this.columnsContainer.leafColumns}get totalColumnLevels(){return this.columnsContainer.totalLevels}get headerColumns(){return this.virtualColumns&&!this.pdfService.exporting?this.viewportColumns:this.nonLockedColumns}get headerLeafColumns(){return this.virtualColumns&&!this.pdfService.exporting?this.leafViewportColumns:this.nonLockedLeafColumns}get lockedWidth(){const groupCellsWidth=32*this.group.length;return expandColumns(this.lockedLeafColumns.toArray()).reduce((prev,curr)=>prev+(curr.width||0),groupCellsWidth)}get nonLockedWidth(){if(!this.rtl&&this.lockedLeafColumns.length||this.virtualColumns)return this.virtualColumns?this.leafViewportColumns.reduce((acc,column)=>acc+(column.width||0),0):this.columnsContainer.unlockedWidth}get selectableSettings(){if(this.selectionService)return this.selectionService.options}get columnMenuTemplate(){const template=this.columnMenuTemplates.first;return template?template.templateRef:null}get totalCount(){return this.isVirtual||!kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.pageSize)?this.view.total:this.pageSize}expandRow(index){this.toggleDetailRowLegacy(index,!0)}collapseRow(index){this.toggleDetailRowLegacy(index,!1)}expandGroup(index){this.groupsService.isExpanded(index)||this.groupsService.toggleRow(index,null)}collapseGroup(index){this.groupsService.isExpanded(index)&&this.groupsService.toggleRow(index,null)}resetGroupsState(){this.groupsService.reset()}expandGroupChildren(groupIndex){this.groupsService.expandChildren(groupIndex)}onDataChange(){this.autoGenerateColumns(),this.changeNotification.notify(),this.pdfService.dataChanged.emit(),kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.defaultSelection)&&this.defaultSelection.reset(),this.initSelectionService(),this.updateNavigationMetadata()}ngOnChanges(changes){isChanged("data",changes)&&this.onDataChange(),this.lockedLeafColumns.length&&anyChanged(["pageSize","skip","sort","group"],changes)&&this.changeNotification.notify(),anyChanged(["pageSize","scrollable","virtualColumns"],changes)&&this.updateNavigationMetadata(),isChanged("virtualColumns",changes)&&(this.viewportColumns=this.leafViewportColumns=null),isChanged("height",changes,!1)&&this.renderer.setStyle(this.wrapper.nativeElement,"height",this.height+"px"),isChanged("filterable",changes)&&this.lockedColumns.length&&this.syncHeaderHeight(this.ngZone.onStable.asObservable().pipe(take_take(1))),anyChanged(["columnMenu","sortable","filterable"],changes,!1)&&(this.columnMenuOptions=this.columnMenu&&Object.assign({filter:Boolean(this.filterable),sort:Boolean(this.sortable)},this.columnMenu)),isChanged("scrollable",changes)&&this.isScrollable&&this.ngZone.onStable.pipe(take_take(1)).subscribe(()=>this.attachScrollSync())}ngAfterViewInit(){this.attachScrollSync(),this.attachElementEventHandlers(),this.updateNavigationMetadata(),this.applyAutoSize()}ngAfterContentChecked(){this.columnsContainer.refresh(),this.verifySettings(),this.initSelectionService()}ngAfterContentInit(){this.shouldGenerateColumns=!this.columns.length,this.autoGenerateColumns(),this.columnList=new fesm2015_ColumnList(this.columns),this.columnsChangeSubscription=this.columns.changes.subscribe(()=>this.verifySettings())}ngOnInit(){this.navigable&&this.navigationService.init(this.navigationMetadata())}ngOnDestroy(){this.selectionSubscription&&this.selectionSubscription.unsubscribe(),this.stateChangeSubscription&&this.stateChangeSubscription.unsubscribe(),this.groupExpandCollapseSubscription&&this.groupExpandCollapseSubscription.unsubscribe(),this.detailsServiceSubscription&&this.detailsServiceSubscription.unsubscribe(),this.editServiceSubscription&&this.editServiceSubscription.unsubscribe(),this.pdfSubscription&&this.pdfSubscription.unsubscribe(),this.filterSubscription&&this.filterSubscription.unsubscribe(),this.sortSubscription&&this.sortSubscription.unsubscribe(),this.columnsChangeSubscription&&this.columnsChangeSubscription.unsubscribe(),this.excelSubscription&&this.excelSubscription.unsubscribe(),this.columnsContainerChangeSubscription&&this.columnsContainerChangeSubscription.unsubscribe(),this.scrollSyncService&&this.scrollSyncService.destroy(),this.detachElementEventHandlers&&this.detachElementEventHandlers(),this.defaultSelection&&this.defaultSelection.destroy(),this.cellClickSubscription&&this.cellClickSubscription.unsubscribe(),this.footerChangeSubscription&&this.footerChangeSubscription.unsubscribe(),this.ngZone=null,this.columnResizingSubscription&&this.columnResizingSubscription.unsubscribe(),this.columnReorderSubscription&&this.columnReorderSubscription.unsubscribe(),this.localizationSubscription&&this.localizationSubscription.unsubscribe(),this.columnVisibilityChangeSubscription&&this.columnVisibilityChangeSubscription.unsubscribe(),this.columnLockedChangeSubscription&&this.columnLockedChangeSubscription.unsubscribe(),this.focusElementSubscription&&this.focusElementSubscription.unsubscribe(),this.columnRangeChangeSubscription.unsubscribe()}attachScrollSync(){isUniversal()||(this.header&&this.scrollSyncService.registerEmitter(this.header.nativeElement,"header"),this.footer&&(this.footerChangeSubscription=observe(this.footer).subscribe(footers=>footers.map(footer=>footer.nativeElement).filter(kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent).forEach(element=>this.scrollSyncService.registerEmitter(element,"footer")))))}editRow(rowIndex,group,options){if(this.editService.editRow(rowIndex,group),kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(options)&&options.skipFocus)return;const row=`tr[data-kendo-grid-item-index="${rowIndex}"]`,columnIndex=options&&options.columnIndex,target=isNaN(columnIndex)?row:`${row} td[data-kendo-grid-column-index="${columnIndex}"]`;this.focusEditElement(target)}closeRow(index){this.editService.close(index)}addRow(group){if(!(group instanceof FormGroup)){const fields=Object.keys(group).reduce((source=group,(acc,key)=>(acc[key]=new FormControl(source[key]),acc)),{});group=new FormGroup(fields)}var source;this.editService.addRow(group),this.focusEditElement(".k-grid-add-row")}editCell(rowIndex,column,group){const instance=this.columnInstance(column);this.editService.editCell(rowIndex,instance,group),this.focusEditElement(".k-grid-edit-cell")}closeCell(){return!this.editService.closeCell()}cancelCell(){this.editService.cancelCell()}isEditing(){return this.editService.isEditing()}isEditingCell(){return this.editService.isEditingCell()}saveAsPDF(){this.pdfService.save(this)}drawPDF(){const promise=(()=>{let resolveFn,rejectFn;const promise=new Promise((resolve,reject)=>{resolveFn=data=>(resolve(data),promise),rejectFn=data=>(reject(data),promise)});return promise.resolve=resolveFn,promise.reject=rejectFn,promise})();return this.pdfService.draw(this,promise),promise}saveAsExcel(){this.excelService.save(this)}autoFitColumn(column){this.columnResizingService.autoFit(column)}autoFitColumns(columns=this.columns){let cols;cols=columns instanceof QueryList?columns.toArray():columns,this.columnResizingService.autoFit(...cols)}notifyPageChange(source,event){("list"!==source||this.isVirtual)&&this.pageChange.emit(event)}notifyScrollBottom(){"none"!==this.scrollable&&hasObservers(this.scrollBottom)&&this.ngZone.run(()=>this.scrollBottom.emit({sender:this}))}focusEditElement(containerSelector){this.focusElementSubscription&&this.focusElementSubscription.unsubscribe(),this.ngZone.runOutsideAngular(()=>{this.focusElementSubscription=this.ngZone.onStable.asObservable().pipe(take_take(1)).subscribe(()=>{const wrapper=this.wrapper.nativeElement;!this.setEditFocus(wrapper.querySelector(containerSelector))&&this.isLocked&&this.setEditFocus(wrapper.querySelector(".k-grid-content "+containerSelector)),this.focusElementSubscription=null})})}focus(){return this.assertNavigable(),this.navigationService.focusCell()}focusCell(rowIndex,colIndex){return this.assertNavigable(),this.navigationService.focusCell(rowIndex,colIndex)}focusNextCell(wrap=!0){return this.assertNavigable(),this.navigationService.focusNextCell(wrap)}focusPrevCell(wrap=!0){return this.assertNavigable(),this.navigationService.focusPrevCell(wrap)}scrollTo(request){this.scrollRequestService.scrollTo(request)}reorderColumn(source,destIndex,options={before:!1}){let target=this.columnsForLevel(source.level)[destIndex];target&&(target.isLocked&&!source.isLocked&&1===this.columnsContainer.nonLockedColumns.length||(isSpanColumnComponent(target)&&!options.before&&(target=target.childColumns.last),this.reorder({before:options.before,source:source,target:target})))}set isDetailExpanded(callback){this.detailsService.userCallback=callback}get isDetailExpanded(){return this.detailsService.userCallback}reorder({target:target,source:source,before:before,changeContainer:changeContainer}){this.ngZone.run(()=>{const columnsForLevel=this.columnsForLevel(source.level);let newIndex=columnsForLevel.indexOf(target);target.parent&&target.parent.isSpanColumn&&(newIndex=columnsForLevel.indexOf(target.parent),before&&(target=target.parent));let oldIndex=columnsForLevel.indexOf(source);changeContainer&&(before&&0<newIndex&&oldIndex<newIndex?newIndex--:!before&&oldIndex>newIndex&&newIndex++);const args=new ColumnReorderEvent({column:source,oldIndex:oldIndex,newIndex:newIndex});this.columnReorder.emit(args),args.isDefaultPrevented()||(changeContainer&&this.columnLockedChange.emit(new ColumnLockedChangeEvent([source])),this.updateColumnIndices({source:source,target:target,before:before}),source.locked!==target.locked&&(source.locked=target.locked),this.columnsContainer.refresh(),this.changeDetectorRef.markForCheck())})}updateColumnIndices({source:source,target:target,before:before}){const expandedColumns=expandColumnsWithSpan(this.columnsForLevel(source.level)),sourceColumnIndex=expandedColumns.indexOf(source);let nextSourceIndex=0,nextIndex=0,toSkip=1;source.isSpanColumn&&(toSkip+=source.childColumns.length);let i=0;for(;i<expandedColumns.length;){let column=expandedColumns[i];if(column===target)nextSourceIndex=before?nextIndex:nextIndex+1,nextIndex=before?nextIndex+toSkip:nextIndex,column.orderIndex=nextIndex,nextSourceIndex===nextIndex+1&&(nextIndex+=toSkip);else{if(column===source){i+=toSkip;continue}column.orderIndex=nextIndex}nextIndex++,i++}for(i=sourceColumnIndex;i<sourceColumnIndex+toSkip;i++)expandedColumns[i].orderIndex=nextSourceIndex++;this.updateIndicesForLevel(source.level+1)}updateIndicesForLevel(level){const colsForParentLevel=this.columnsForLevel(level-1),colsForLevel=[];sortColumns(colsForParentLevel).forEach(c=>{c.isColumnGroup&&colsForLevel.push(...c.childrenArray.sort((a,b)=>a.orderIndex-b.orderIndex))}),expandColumnsWithSpan(colsForLevel).map((c,i)=>c.orderIndex=i),level<this.columnsContainer.totalLevels&&this.updateIndicesForLevel(level+1)}columnsForLevel(level){return this.columnsContainer.allColumns.filter(column=>column.level===level)}initSelectionService(){this.selectionDirective||kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.defaultSelection)||(this.defaultSelection=new fesm2015_Selection(this,this.changeDetectorRef)),this.selectionService.init({rowSelected:this.rowSelected,selectable:this.selectable,view:this.view}),this.selectionDirective||this.selectableSettings.enabled||this.defaultSelection.reset()}setEditFocus(element){if(element)return this.navigationService.tryFocus(element)}columnInstance(column){let instance;if(instance="number"==typeof column?this.columnsContainer.lockedLeafColumns.toArray().concat(this.columnsContainer.nonLockedLeafColumns.toArray())[column]:"string"==typeof column?this.columnList.filter(item=>item.field===column)[0]:column,!instance&&isDevMode())throw new Error("Invalid column "+column);return instance}verifySettings(){if(isDevMode()){const locked=this.lockedLeafColumns.length||this.columnMenu&&this.columnMenu.lock;if(locked&&this.detailTemplate)throw new Error("Having both detail template and locked columns is not supported.");if(this.lockedLeafColumns.length&&!this.nonLockedLeafColumns.length)throw new Error("There should be at least one non-locked column");if((locked||this.virtualColumns)&&expandColumns(this.columnList.toArray()).filter(column=>!column.width&&!isColumnGroupComponent(column)).length)throw new Error((locked?"Locked":"Virtual")+" columns feature requires all columns to have set width.");if(locked&&!this.isScrollable)throw new Error("Locked columns are only supported when scrolling is enabled.");if(this.columnList.filter(isColumnGroupComponent).filter(x=>!x.hasChildren).length)throw new Error("ColumnGroupComponent should contain ColumnComponent or CommandColumnComponent.");if(this.columnList.filter(x=>x.locked&&x.parent&&!x.parent.isLocked).length)throw new Error("Locked child columns require their parent columns to be locked.");if((this.rowHeight||this.detailRowHeight)&&!this.isVirtual)throw new Error("Row height and detail row height settings require virtual scrolling mode to be enabled.");expandColumns(this.columnList.toArray()).filter(isColumnComponent).filter(({field:field})=>{return!(!fesm2015_isNullOrEmptyString(fieldName=field)&&validField.test(fieldName)&&"."!==fieldName[0]&&"."!==fieldName[fieldName.length-1]);var fieldName}).forEach(({field:field})=>console.warn(`\n                Grid column field name '${field}' does not look like a valid JavaScript identifier.\n                Identifiers can contain only alphanumeric characters (including "$" or "_"), and may not start with a digit.\n                Please use only valid identifier names to ensure error-free operation.\n            `))}}autoGenerateColumns(){this.shouldGenerateColumns&&!this.columns.length&&this.view.length&&this.columns.reset(Object.keys(this.view.at(0)).map(field=>{let column=new dist_fesm2015_ColumnComponent;return column.field=field,column}))}attachStateChangesEmitter(){this.stateChangeSubscription=merge(this.pageChange.pipe(map_map(x=>({filter:this.filter,group:this.group,skip:x.skip,sort:this.sort,take:x.take}))),this.sortChange.pipe(map_map(sort=>({filter:this.filter,group:this.group,skip:this.skip,sort:sort,take:this.pageSize}))),this.groupChange.pipe(map_map(group=>({filter:this.filter,group:group,skip:this.skip,sort:this.sort,take:this.pageSize}))),this.filterChange.pipe(map_map(filter$$1=>({filter:filter$$1,group:this.group,skip:0,sort:this.sort,take:this.pageSize})))).subscribe(x=>{this.closeCell(),this.cancelCell(),this.dataStateChange.emit(x)})}attachEditHandlers(){this.editService&&(this.editServiceSubscription=this.editService.changes.subscribe(this.emitCRUDEvent.bind(this)))}emitCRUDEvent(args){const{action:action,rowIndex:rowIndex,formGroup:formGroup}=args;let dataItem=this.view.at(rowIndex-this.skip);switch("add"===action||dataItem||(dataItem=formGroup.value),this.closeCell(),Object.assign(args,{dataItem:dataItem,sender:this}),action){case"add":this.add.emit(args);break;case"cancel":this.cancel.emit(args);break;case"edit":this.edit.emit(args);break;case"remove":this.remove.emit(args);break;case"save":this.save.emit(args);break;case"cellClose":this.cellClose.emit(args)}}attachDomEventHandlers(){this.cellClickSubscription=this.domEvents.cellClick.subscribe(args=>{this.cellClick.emit(Object.assign({sender:this},args))})}attachElementEventHandlers(){if(isUniversal())return;const wrapper=this.wrapper.nativeElement,ariaRoot=this.ariaRoot.nativeElement;this.ngZone.runOutsideAngular(()=>{const resizeCheck=this.resizeCheck.bind(this),resizeSubscription=this.renderer.listen("window","resize",resizeCheck),orientationSubscription=this.renderer.listen("window","orientationchange",resizeCheck),documentClickSubscription=this.renderer.listen("document","click",args=>{const activeElement=document.activeElement;!this.editService.shouldCloseCell()||dist_fesm2015_closest(args.target,matchesClasses("k-animation-container k-grid-ignore-click"))||activeElement&&(dist_fesm2015_closest(activeElement,matchesClasses("k-animation-container"))||isInEditedCell(activeElement,this.wrapper.nativeElement))||this.editService.closeCell(args)}),windowBlurSubscription=this.renderer.listen("window","blur",args=>{const activeElement=document.activeElement;!activeElement||matchesNodeName("input")(activeElement)&&"file"===activeElement.type&&isInEditedCell(activeElement,this.wrapper.nativeElement)||this.editService.closeCell(args),this.domEvents.windowBlur.emit(args)}),clickSubscription=this.renderer.listen(wrapper,"click",args=>{this.domEvents.click.emit(args)}),keydownSubscription=this.renderer.listen(wrapper,"keydown",args=>{this.domEvents.keydown.emit(args)});let focused=!1;const focusInSubscription=this.renderer.listen(ariaRoot,"focusin",args=>{this.domEvents.focus.emit(args),focused||(this.domEvents.focusIn.emit(args),focused=!0)}),focusOutSubscription=this.renderer.listen(ariaRoot,"focusout",args=>{const next=args.relatedTarget||document.activeElement;!dist_fesm2015_closest(next,node=>node===ariaRoot)&&(this.domEvents.focusOut.emit(args),focused=!1)});this.detachElementEventHandlers=()=>{resizeSubscription(),orientationSubscription(),documentClickSubscription(),windowBlurSubscription(),clickSubscription(),keydownSubscription(),focusInSubscription(),focusOutSubscription()}})}matchesMedia(c){return this.responsiveService.matchesMedia(c.media)}resizeCheck(){if(window.innerWidth!==this.cachedWindowWidth){this.cachedWindowWidth=window.innerWidth;let hasChanges=!1;this.columnList.filterHierarchy(column=>{const matchesMedia=this.matchesMedia(column);return column.matchesMedia!==matchesMedia&&(hasChanges=!0,column.matchesMedia=matchesMedia),column.isVisible}),hasChanges&&this.ngZone.run(()=>{this.changeDetectorRef.markForCheck()})}}emitPDFExportEvent(){const args=new PDFExportEvent;this.pdfExport.emit(args),args.isDefaultPrevented()||this.saveAsPDF()}syncHeaderHeight(observable){return observable.pipe(filter_filter(()=>kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.lockedHeader))).subscribe(()=>syncRowsHeight(this.lockedHeader.nativeElement.children[0],this.header.nativeElement.children[0]))}columnsContainerChange(){this.columnsContainerChangeSubscription=this.syncHeaderHeight(this.columnsContainer.changes.pipe(filter_filter(()=>this.lockedColumns.length>0),switchMap(()=>this.ngZone.onStable.asObservable().pipe(take_take(1)))))}handleColumnResize(){const resizes=this.columnResizingService.changes;this.columnResizingSubscription=resizes.pipe(tap(e=>{"start"===e.type?this.renderer.addClass(this.wrapper.nativeElement,"k-grid-column-resizing"):"end"===e.type&&this.renderer.removeClass(this.wrapper.nativeElement,"k-grid-column-resizing")}),filter_filter(e=>"start"===e.type),switchMap(()=>resizes.pipe(takeUntil(resizes.pipe(filter_filter(e=>"triggerAutoFit"===e.type))),filter_filter(e=>"end"===e.type)))).subscribe(this.notifyResize.bind(this))}notifyResize(e){const args=e.resizedColumns.filter(item=>fesm2015_isTruthy(item.column.resizable)&&!item.column.isColumnGroup).map(item=>({column:item.column,newWidth:item.column.width,oldWidth:item.oldWidth}));this.columnResize.emit(args)}assertNavigable(){if(isDevMode()&&!this.navigable)throw new Error('The Grid should be configured as [navigable]="true" to control focus')}navigationMetadata(){const isVirtual=this.isVirtual,dataRows=isVirtual?this.view.total:this.pageSize,addRowOffset=this.editService.hasNewItem?1:0,filterRowOffset=hasFilterRow(this.filterable)?1:0;return new NavigationMetadata(dataRows,this.totalColumnLevels+1+filterRowOffset+addRowOffset,isVirtual,this.showPager,kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.detailTemplate),this.wrapper,this.virtualColumns,this.columnsContainer)}updateNavigationMetadata(){this.navigationService.metadata=this.navigationMetadata()}applyAutoSize(){const cols=this.columns.filter(c=>this.autoSize?!1!==c.autoSize:c.autoSize);cols.length>0&&this.ngZone.onStable.pipe(take_take(1)).subscribe(_=>this.autoFitColumns(cols))}onColumnRangeChange(range){const viewportColumns=this.viewportColumns=[],leafViewportColumns=this.columnsContainer.nonLockedLeafColumns.toArray().slice(range.start,range.end+1);for(let idx=0;idx<leafViewportColumns.length;idx++){let column=leafViewportColumns[idx];for(;column.parent;)column=column.parent;const toAdd=[column];for(;toAdd.length;)column=toAdd.shift(),viewportColumns.push(column),column.isColumnGroup&&toAdd.unshift.apply(toAdd,column.childrenArray);const lastFromGroup=viewportColumns[viewportColumns.length-1];for(column=leafViewportColumns[idx];column!==lastFromGroup&&idx<leafViewportColumns.length;)idx++,column=leafViewportColumns[idx]}if(range.start>0){const first=leafViewportColumns[0];let offset=range.offset,current=viewportColumns[0],index=0;for(;current!==first;)offset-=current.isColumnGroup?0:current.width,index++,current=viewportColumns[index];if(offset>0){const totalLevels=this.columnsContainer.totalLevels;let previous;for(let idx=0;idx<=totalLevels;idx++){const offsetColumn=idx<totalLevels?new dist_fesm2015_ColumnGroupComponent(previous):new fesm2015_ColumnBase$1(previous);previous=offsetColumn,offsetColumn.title="",offsetColumn.width=offset,viewportColumns.unshift(offsetColumn)}}}this.leafViewportColumns=viewportColumns.filter(c=>!c.isColumnGroup)}toggleDetailRowLegacy(index,expand){const hasCallback="function"==typeof this.isDetailExpanded;if(isDevMode()&&hasCallback)throw new Error("The expandRow and collapseRow methods should not be called when using the kendoGridDetailsExpandBy directive or the isDetailExpanded callback. These methods are provided only for backwards compatibility with legacy versions.");!isDevMode()&&hasCallback||this.detailsService.isExpanded(index,null)!==expand&&this.detailsService.toggleRow(index,null)}}return GridComponent.fac=function(t){return new(t||GridComponent)(directiveInject(fesm2015_BrowserSupportService),directiveInject(dist_fesm2015_SelectionService),directiveInject(ElementRef),directiveInject(fesm2015_GroupInfoService),directiveInject(fesm2015_GroupsService),directiveInject(fesm2015_ChangeNotificationService),directiveInject(fesm2015_DetailsService),directiveInject(fesm2015_EditService),directiveInject(fesm2015_FilterService),directiveInject(fesm2015_PDFService),directiveInject(fesm2015_ResponsiveService),directiveInject(Renderer2),directiveInject(fesm2015_ExcelService),directiveInject(NgZone),directiveInject(dist_fesm2015_ScrollSyncService),directiveInject(fesm2015_DomEventsService),directiveInject(fesm2015_ColumnResizingService),directiveInject(ChangeDetectorRef),directiveInject(fesm2015_ColumnReorderService),directiveInject(fesm2015_ColumnInfoService),directiveInject(kendo_angular_grid_ivy_ngcc_dist_fesm2015_NavigationService),directiveInject(fesm2015_SortService),directiveInject(fesm2015_ScrollRequestService),directiveInject(fesm2015_LocalizationService))},GridComponent.cmp=defineComponent({type:GridComponent,selectors:[["kendo-grid"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&(contentQuery(dirIndex,fesm2015_ColumnBase$1,!1),contentQuery(dirIndex,fesm2015_DetailTemplateDirective,!1),contentQuery(dirIndex,fesm2015_NoRecordsTemplateDirective,!1),contentQuery(dirIndex,fesm2015_PagerTemplateDirective,!1),contentQuery(dirIndex,fesm2015_ToolbarTemplateDirective,!1),contentQuery(dirIndex,fesm2015_ColumnMenuTemplateDirective,!1)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.columns=_t),queryRefresh(_t=loadQuery())&&(ctx.detailTemplateChildren=_t),queryRefresh(_t=loadQuery())&&(ctx.noRecordsTemplateChildren=_t),queryRefresh(_t=loadQuery())&&(ctx.pagerTemplateChildren=_t),queryRefresh(_t=loadQuery())&&(ctx.toolbarTemplateChildren=_t),queryRefresh(_t=loadQuery())&&(ctx.columnMenuTemplates=_t))},viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(kendo_angular_grid_ivy_ngcc_dist_fesm2015_c0,!0),viewQuery(kendo_angular_grid_ivy_ngcc_dist_fesm2015_c1,!0),viewQuery(kendo_angular_grid_ivy_ngcc_dist_fesm2015_c2,!0),viewQuery(kendo_angular_grid_ivy_ngcc_dist_fesm2015_c3,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.lockedHeader=_t.first),queryRefresh(_t=loadQuery())&&(ctx.header=_t.first),queryRefresh(_t=loadQuery())&&(ctx.ariaRoot=_t.first),queryRefresh(_t=loadQuery())&&(ctx.footer=_t))},hostVars:11,hostBindings:function(rf,ctx){2&rf&&(attribute("dir",ctx.dir),classProp("k-widget",ctx.hostClasses)("k-grid",ctx.hostClasses)("k-grid-lockedcolumns",ctx.lockedClasses)("k-grid-virtual",ctx.virtualClasses)("k-grid-no-scrollbar",ctx.noScrollbarClass))},inputs:{data:"data",scrollable:"scrollable",selectable:"selectable",trackBy:"trackBy",virtualColumns:"virtualColumns",filterable:"filterable",sortable:"sortable",pageable:"pageable",groupable:"groupable",navigable:"navigable",autoSize:"autoSize",resizable:"resizable",reorderable:"reorderable",loading:"loading",columnMenu:"columnMenu",hideHeader:"hideHeader",skip:"skip",sort:"sort",group:"group",navigatable:"navigatable",rowClass:"rowClass",rowSelected:"rowSelected",isDetailExpanded:"isDetailExpanded",pageSize:"pageSize",height:"height",rowHeight:"rowHeight",detailRowHeight:"detailRowHeight",filter:"filter"},outputs:{filterChange:"filterChange",pageChange:"pageChange",groupChange:"groupChange",sortChange:"sortChange",selectionChange:"selectionChange",dataStateChange:"dataStateChange",groupExpand:"groupExpand",groupCollapse:"groupCollapse",detailExpand:"detailExpand",detailCollapse:"detailCollapse",edit:"edit",cancel:"cancel",save:"save",remove:"remove",add:"add",cellClose:"cellClose",cellClick:"cellClick",pdfExport:"pdfExport",excelExport:"excelExport",columnResize:"columnResize",columnReorder:"columnReorder",columnVisibilityChange:"columnVisibilityChange",columnLockedChange:"columnLockedChange",scrollBottom:"scrollBottom",contentScroll:"contentScroll"},exportAs:["kendoGrid"],features:[ProvidersFeature([fesm2015_BrowserSupportService,fesm2015_LocalizationService,fesm2015_ColumnInfoService,dist_fesm2015_SelectionService,fesm2015_DetailsService,fesm2015_GroupsService,fesm2015_GroupInfoService,fesm2015_ChangeNotificationService,fesm2015_EditService,fesm2015_PDFService,fesm2015_SuspendService,{provide:CELL_CONTEXT,useValue:fesm2015_4$2},{provide:L10N_PREFIX,useValue:"kendo.grid"},fesm2015_FilterService,fesm2015_ResponsiveService,fesm2015_PagerContextService,fesm2015_ExcelService,dist_fesm2015_ScrollSyncService,_ivy_ngcc_dist_fesm2015_ResizeService,fesm2015_LocalDataChangesService,fesm2015_DomEventsService,fesm2015_ColumnResizingService,fesm2015_SinglePopupService,fesm2015_DragAndDropService,fesm2015_DragHintService,fesm2015_DropCueService,fesm2015_ColumnReorderService,kendo_angular_grid_ivy_ngcc_dist_fesm2015_NavigationService,fesm2015_FocusRoot,fesm2015_IdService,fesm2015_ScrollRequestService,fesm2015_SortService]),NgOnChangesFeature],decls:10,vars:8,consts:[["kendoGridLocalizedMessages","",6,"groupPanelEmpty","noRecords","pagerFirstPage","pagerPreviousPage","pagerNextPage","pagerLastPage","pagerPage","pagerOf","pagerItems","pagerItemsPerPage","filter","filterEqOperator","filterNotEqOperator","filterIsNullOperator","filterIsNotNullOperator","filterIsEmptyOperator","filterIsNotEmptyOperator","filterStartsWithOperator","filterContainsOperator","filterNotContainsOperator","filterEndsWithOperator","filterGteOperator","filterGtOperator","filterLteOperator","filterLtOperator","filterIsTrue","filterIsFalse","filterBooleanAll","filterAfterOrEqualOperator","filterAfterOperator","filterBeforeOperator","filterBeforeOrEqualOperator","filterFilterButton","filterClearButton","filterAndLogic","filterOrLogic","loading","columnMenu","columns","lock","unlock","sortable","sortAscending","sortDescending","sortedAscending","sortedDescending","sortedDefault","columnsApply","columnsReset","detailExpand","detailCollapse"],["position","top",4,"ngIf"],[3,"text","groups","change",4,"ngIf"],["role","grid",1,"k-grid-aria-root"],["ariaRoot",""],[3,"ngIf"],[3,"template","pageSize","total","skip","options","pageChange",4,"ngIf"],["position","bottom",4,"ngIf"],["position","top"],[3,"text","groups","change"],["class","k-grid-header","role","presentation",3,"padding",4,"ngIf"],[3,"data","rowHeight","detailRowHeight","total","take","groups","groupable","skip","trackBy","columns","selectable","filterable","detailTemplate","noRecordsTemplate","rowClass","loading","isVirtual","virtualColumns","pageChange","scrollBottom","contentScroll"],["class","k-grid-footer",3,"padding",4,"ngIf"],["role","presentation",1,"k-grid-header"],["role","presentation","class","k-grid-header-locked",3,"width",4,"ngIf"],["role","presentation","data-scrollable","",1,"k-grid-header-wrap",3,"kendoGridResizableContainer","lockedWidth"],["header",""],["role","presentation",3,"virtualColumns"],["kendoGridColGroup","","role","presentation",3,"columns","groups","detailTemplate"],["kendoGridHeader","","role","presentation",3,"resizable","scrollable","columns","totalColumnLevels","sort","filter","filterable","groupable","reorderable","groups","sortable","columnMenu","columnMenuTemplate","lockedColumnsCount","totalColumnsCount","detailTemplate"],["class","k-width-container","role","presentation",4,"ngIf"],["role","presentation",1,"k-grid-header-locked"],["lockedHeader",""],["role","presentation",3,"locked"],["kendoGridHeader","",3,"resizable","scrollable","columns","totalColumnLevels","sort","groups","filter","filterable","groupable","reorderable","sortable","columnMenu","columnMenuTemplate","totalColumnsCount","detailTemplate"],["role","presentation",1,"k-width-container"],[1,"k-grid-footer"],["class","k-grid-footer-locked",3,"width",4,"ngIf"],["data-scrollable","",1,"k-grid-footer-wrap",3,"kendoGridResizableContainer","lockedWidth"],["footer",""],["kendoGridColGroup","",3,"columns","groups","detailTemplate"],["kendoGridFooter","",3,"scrollable","groups","columns","lockedColumnsCount","detailTemplate"],[1,"k-grid-footer-locked"],[3,"locked"],["kendoGridFooter","",3,"scrollable","groups","columns","detailTemplate"],["kendoGridHeader","",3,"resizable","scrollable","columns","totalColumnLevels","groups","groupable","reorderable","sort","sortable","filter","filterable","columnMenu","columnMenuTemplate","detailTemplate",4,"ngIf"],["kendoGridTableBody","",3,"groups","data","skip","columns","selectable","filterable","noRecordsTemplate","detailTemplate","showGroupFooters","trackBy","rowClass"],["kendoGridFooter","",3,"scrollable","groups","columns","detailTemplate",4,"ngIf"],["kendoGridLoading","",4,"ngIf"],["kendoGridHeader","",3,"resizable","scrollable","columns","totalColumnLevels","groups","groupable","reorderable","sort","sortable","filter","filterable","columnMenu","columnMenuTemplate","detailTemplate"],["kendoGridLoading",""],[3,"template","pageSize","total","skip","options","pageChange"],["position","bottom"]],template:function(rf,ctx){1&rf&&(elementContainerStart(0,0),i18nAttributes(1,_c106),elementContainerEnd(),template(2,GridComponent_kendo_grid_toolbar_2_Template,1,0,"kendo-grid-toolbar",1),template(3,GridComponent_kendo_grid_group_panel_3_Template,1,2,"kendo-grid-group-panel",2),elementStart(4,"div",3,4),template(6,GridComponent_ng_template_6_Template,3,20,"ng-template",5),template(7,GridComponent_ng_template_7_Template,6,19,"ng-template",5),elementEnd(),template(8,GridComponent_kendo_pager_8_Template,1,5,"kendo-pager",6),template(9,GridComponent_kendo_grid_toolbar_9_Template,1,0,"kendo-grid-toolbar",7)),2&rf&&(advance(2),property("ngIf",ctx.showTopToolbar),advance(1),property("ngIf",ctx.showGroupPanel),advance(1),attribute("aria-rowcount",ctx.ariaRowCount)("aria-colcount",ctx.ariaColCount),advance(2),property("ngIf",ctx.isScrollable),advance(1),property("ngIf",!ctx.isScrollable),advance(1),property("ngIf",ctx.showPager),advance(1),property("ngIf",ctx.showBottomToolbar))},directives:function(){return[kendo_angular_grid_ivy_ngcc_dist_fesm2015_LocalizedMessagesDirective,common_NgIf,fesm2015_ToolbarComponent,fesm2015_GroupPanelComponent,_ivy_ngcc_dist_fesm2015_ListComponent,fesm2015_ResizableContainerDirective,fesm2015_TableDirective,fesm2015_ColGroupComponent,dist_fesm2015_HeaderComponent,fesm2015_FooterComponent,fesm2015_TableBodyComponent,fesm2015_LoadingComponent,fesm2015_PagerComponent]},styles:["   .k-grid .k-grid-aria-root {\n            display: flex;\n            flex-direction: column;\n            flex: 1 1 auto;\n            overflow: hidden;\n        }\n\n        .k-grid .k-filter-row td {\n            white-space: nowrap;\n        }"],encapsulation:2}),GridComponent})();class fesm2015_RowHeightService{constructor(total=0,rowHeight,detailRowHeight){this.total=total,this.rowHeight=rowHeight,this.detailRowHeight=detailRowHeight,this.offsets=[],this.heights=[];let agg=0;for(let idx=0;idx<total;idx++)this.offsets.push(agg),agg+=rowHeight,this.heights.push(rowHeight)}height(rowIndex){return this.heights[rowIndex]}expandDetail(rowIndex){this.height(rowIndex)===this.rowHeight&&this.updateRowHeight(rowIndex,this.detailRowHeight)}collapseDetail(rowIndex){this.height(rowIndex)>this.rowHeight&&this.updateRowHeight(rowIndex,-1*this.detailRowHeight)}isExpanded(rowIndex){return this.height(rowIndex)>this.rowHeight}index(position){if(position<0)return;const result=this.offsets.reduce((prev,current,idx)=>void 0!==prev?prev:current===position?idx:current>position?idx-1:void 0,void 0);return void 0===result?this.total-1:result}offset(rowIndex){return this.offsets[rowIndex]}totalHeight(){return this.heights.reduce((prev,curr)=>prev+curr,0)}updateRowHeight(rowIndex,value){this.total>0&&(this.heights[rowIndex]+=value,this.offsets=((arr,idx,value)=>[...arr.slice(0,idx+1),...arr.slice(idx+1).map(x=>x+value)])(this.offsets,rowIndex,value))}}class fesm2015_ScrollAction{constructor(offset){this.offset=offset}}class fesm2015_PageAction{constructor(skip,take$$1){this.skip=skip,this.take=take$$1}}class ScrollBottomAction{}class dist_fesm2015_ScrollerService{constructor(scrollObservable){this.scrollObservable=scrollObservable,this.firstLoaded=0}create(rowHeightService,skip,take$$1,total){this.rowHeightService=rowHeightService,this.firstLoaded=skip,this.lastLoaded=skip+take$$1,this.take=take$$1,this.total=total,this.lastScrollTop=0;const subject=new BehaviorSubject_BehaviorSubject(new fesm2015_ScrollAction(this.rowHeightService.offset(skip)));return this.subscription=Observable_Observable.create(observer=>{this.unsubscribe(),this.scrollSubscription=this.scrollObservable.subscribe(x=>this.onScroll(x,observer))}).subscribe(x=>subject.next(x)),subject}destroy(){this.unsubscribe(),this.subscription&&this.subscription.unsubscribe()}onScroll({scrollTop:scrollTop,offsetHeight:offsetHeight,scrollHeight:scrollHeight,clientHeight:clientHeight},observer){if(this.lastScrollTop===scrollTop)return;const up=this.lastScrollTop>=scrollTop;this.lastScrollTop=scrollTop;let firstItemIndex=this.rowHeightService.index(scrollTop),firstItemOffset=this.rowHeightService.offset(firstItemIndex);const lastItemIndex=this.rowHeightService.index(scrollTop+offsetHeight);if(!up)if(lastItemIndex>=this.lastLoaded&&this.lastLoaded<this.total){const overflow=firstItemIndex+this.take-this.total;overflow>0&&(firstItemIndex-=overflow,firstItemOffset=this.rowHeightService.offset(firstItemIndex)),this.firstLoaded=firstItemIndex,observer.next(new fesm2015_ScrollAction(firstItemOffset));let nextTake=this.firstLoaded+this.take;this.lastLoaded=Math.min(nextTake,this.total),nextTake=nextTake>this.total?this.total-this.firstLoaded:this.take,observer.next(new fesm2015_PageAction(this.firstLoaded,this.take))}else scrollHeight-clientHeight-scrollTop<1&&observer.next(new ScrollBottomAction);if(up&&firstItemIndex<this.firstLoaded){const nonVisibleBuffer=Math.floor(.3*this.take);this.firstLoaded=Math.max(firstItemIndex-nonVisibleBuffer,0),observer.next(new fesm2015_ScrollAction(this.rowHeightService.offset(this.firstLoaded))),this.lastLoaded=Math.min(this.firstLoaded+this.take,this.total),observer.next(new fesm2015_PageAction(this.firstLoaded,this.take))}}unsubscribe(){this.scrollSubscription&&(this.scrollSubscription.unsubscribe(),this.scrollSubscription=void 0)}}const elementAt=(index,elements,elementOffset)=>{for(let idx=0,elementIdx=0;idx<elements.length;idx++){const offset=elementOffset(elements[idx]);if(elementIdx<=index&&index<=elementIdx+offset-1)return elements[idx];elementIdx+=offset}},rowAt=(index,rows)=>elementAt(index,rows,row=>row.hasAttribute("data-kendo-grid-item-index")?1:0),EMPTY_OBJECT={},fesm2015_SCROLLER_FACTORY_TOKEN=new InjectionToken("grid-scroll-service-factory");function fesm2015_DEFAULT_SCROLLER_FACTORY(observable){return new dist_fesm2015_ScrollerService(observable)}const wheelDeltaY=e=>{const deltaY=e.wheelDeltaY;return e.wheelDelta&&(void 0===deltaY||deltaY)?e.wheelDelta:e.detail&&e.axis===e.VERTICAL_AXIS?10*-e.detail:0},maybeNativeElement=el=>el?el.nativeElement:null;let _ivy_ngcc_dist_fesm2015_ListComponent=(()=>{class ListComponent{constructor(scrollerFactory,detailsService,changeNotification,suspendService,groupsService,ngZone,renderer,scrollSyncService,resizeService,editService,supportService,navigationService,scrollRequestService,localization,columnResizingService,changeDetector,pdfService,columnInfo){this.changeNotification=changeNotification,this.suspendService=suspendService,this.groupsService=groupsService,this.ngZone=ngZone,this.renderer=renderer,this.scrollSyncService=scrollSyncService,this.resizeService=resizeService,this.editService=editService,this.supportService=supportService,this.navigationService=navigationService,this.localization=localization,this.columnResizingService=columnResizingService,this.changeDetector=changeDetector,this.pdfService=pdfService,this.columnInfo=columnInfo,this.groups=[],this.skip=0,this.columns=new fesm2015_ColumnsContainer(()=>[]),this.selectable=!1,this.groupable=!1,this.trackBy=defaultTrackBy,this.contentScroll=new core_EventEmitter,this.pageChange=new core_EventEmitter,this.scrollBottom=new core_EventEmitter,this.columnsStartIdx=0,this.resizeSensors=new QueryList,this.dispatcher=new Subject_Subject,this.containerScrollTop=0,this.scrollLeft=0,this.rtl=!1,this.scroller=scrollerFactory(this.dispatcher),this.subscriptions=detailsService.changes.subscribe(x=>this.detailExpand(x)).add(scrollRequestService.requests.subscribe(x=>this.scrollTo(x)))}get hostClass(){return!0}get hostRole(){return"presentation"}get showFooter(){return this.groupable&&this.groupable.showFooter}get totalWidth(){if(this.virtualColumns&&this.columns.unlockedWidth)return this.columns.unlockedWidth}get lockedLeafColumns(){return this.columns.lockedLeafColumns}get nonLockedLeafColumns(){return this.columns.nonLockedLeafColumns}get nonLockedColumnsToRender(){return this.virtualColumns&&!this.pdfService.exporting?this.viewportColumns:this.nonLockedLeafColumns}get leafColumns(){return this.columns.leafColumnsToRender}get lockedWidth(){const groupCellsWidth=32*this.groups.length;return expandColumns(this.lockedLeafColumns.toArray()).reduce((prev,curr)=>prev+(curr.width||0),groupCellsWidth)}get nonLockedWidth(){if(!this.rtl&&this.lockedLeafColumns.length||this.virtualColumns)return sumColumnWidths(expandColumns(this.nonLockedColumnsToRender.toArray()))}get isLocked(){return this.lockedLeafColumns.length>0}ngOnInit(){this.init(),this.subscriptions.add(this.ngZone.runOutsideAngular(this.handleRowSync.bind(this))),this.subscriptions.add(this.ngZone.runOutsideAngular(this.handleRowNavigationLocked.bind(this))),this.subscriptions.add(merge(this.columns.changes,this.resizeService.changes).subscribe(()=>{this.virtualColumns&&this.ngZone.run(()=>{this.updateViewportColumns(),this.changeDetector.markForCheck()})})),this.subscriptions.add(this.localization.changes.subscribe(({rtl:rtl})=>this.rtl=rtl))}ngOnChanges(changes){isChanged("skip",changes)&&!this.rebind&&(this.skipScroll=!0,this.container.nativeElement.scrollTop=this.rowHeightService.offset(this.skip)),anyChanged(["total","take"],changes)&&this.init(),this.rebind=!1}ngDoCheck(){!this.virtualColumns||this.viewportColumns&&!this.viewportWidthChange()||this.updateViewportColumns()}ngAfterViewInit(){this.skip&&this.isVirtual&&(this.container.nativeElement.scrollTop=this.rowHeightService.offset(this.skip)),this.resetNavigationViewport(),this.attachContainerScroll(),this.initResizeService()}ngAfterViewChecked(){const isLocked=this.isLocked;isLocked&&!this.hasLockedContainer&&this.syncRowsHeight(),this.hasLockedContainer=isLocked}syncRowsHeight(){this.lockedContainer&&syncRowsHeight(this.lockedTable.nativeElement,this.table.nativeElement)}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe(),this.resizeService&&this.resizeService.destroy(),this.cleanupScroller()}init(){this.suspendService.scroll||(this.rowHeightService=new fesm2015_RowHeightService(this.total,this.rowHeight,this.detailRowHeight),this.totalHeight=this.rowHeightService.totalHeight(),isUniversal()||this.ngZone.runOutsideAngular(this.createScroller.bind(this)))}lockedScroll(){if(!this.suspendService.scroll){const lockedScrollTop=this.lockedContainer.nativeElement.scrollTop;lockedScrollTop!==this.containerScrollTop&&(this.container.nativeElement.scrollTop=this.containerScrollTop=lockedScrollTop)}}lockedMousewheel(args){if(!args.ctrlKey){((args,element)=>{const delta=wheelDeltaY(args),scrollTop=element.scrollTop;0===scrollTop&&0<delta||element.scrollHeight<=element.offsetHeight+scrollTop&&delta<0||event.preventDefault()})(args,this.container.nativeElement);const scrollDelta=wheelDeltaY(args);this.container.nativeElement.scrollTop-=scrollDelta}}lockedKeydown(args){if(args.keyCode===Keys.PageDown||args.keyCode===Keys.PageUp){const element=this.container.nativeElement;element.scrollTop+=element.offsetHeight*(args.keyCode===Keys.PageDown?1:-1)*.8,args.preventDefault()}}detailExpand({index:index,expand:expand}){expand?this.rowHeightService.expandDetail(index):this.rowHeightService.collapseDetail(index),this.totalHeight=this.rowHeightService.totalHeight(),this.resetNavigationViewport()}attachContainerScroll(){isUniversal()||(this.ngZone.runOutsideAngular(()=>{this.subscriptions.add(fromEvent(this.container.nativeElement,"scroll").pipe(map_map(event=>event.target),filter_filter(()=>!this.suspendService.scroll),tap(target=>{this.onContainerScroll(target),this.resetNavigationViewport(),this.virtualColumns&&this.handleColumnScroll();const rowViewport=this.navigationService.viewport||EMPTY_OBJECT,columnViewport=this.navigationService.columnViewport||EMPTY_OBJECT;this.contentScroll.emit({scrollLeft:target.scrollLeft,scrollTop:target.scrollTop,startRow:rowViewport.firstItemIndex,endRow:rowViewport.lastItemIndex,startColumn:columnViewport.firstItemIndex,endColumn:columnViewport.lastItemIndex})})).subscribe(this.dispatcher))}),this.scrollSyncService.registerEmitter(this.container.nativeElement,"body"))}createScroller(){this.cleanupScroller();const observable=this.scroller.create(this.rowHeightService,this.skip,this.take,this.total);this.skipScroll=!1,this.scrollerSubscription=observable.pipe(filter_filter(x=>x instanceof fesm2015_PageAction),filter_filter(()=>{const temp=this.skipScroll;return this.skipScroll=!1,!temp}),tap(()=>this.rebind=!0)).subscribe(x=>this.ngZone.run(()=>this.pageChange.emit(x))),this.scrollerSubscription.add(observable.pipe(filter_filter(x=>x instanceof fesm2015_ScrollAction)).subscribe(this.scroll.bind(this))),this.scrollerSubscription.add(observable.pipe(filter_filter(x=>x instanceof ScrollBottomAction)).subscribe(()=>this.scrollBottom.emit()))}scroll({offset:offset=0}){var renderer,value;this.isVirtual&&[maybeNativeElement(this.table),maybeNativeElement(this.lockedTable)].filter(kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent).forEach((renderer=this.renderer,value=offset,el=>renderer.setStyle(el,"transform",`translateY(${value}px)`))),this.resetNavigationViewport()}onContainerScroll({scrollTop:scrollTop}){this.containerScrollTop=scrollTop,this.lockedContainer&&(this.lockedContainer.nativeElement.scrollTop=scrollTop)}handleRowSync(){const isLocked=()=>kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.lockedContainer);return merge(this.changeNotification.changes,this.groupsService.changes.pipe(filter_filter(isLocked),switchMapTo((()=>this.ngZone.onStable.asObservable().pipe(take_take(1)))())),this.editService.changed,this.resizeService.changes,this.columnResizingService.changes.pipe(filter_filter(change=>"end"===change.type)),this.supportService.changes).pipe(tap(()=>this.resetNavigationViewport()),filter_filter(isLocked)).subscribe(()=>{const scrollTop=this.container.nativeElement.scrollTop,scrollLeft=this.container.nativeElement.scrollLeft;this.syncRowsHeight(),this.syncContainerHeight(),this.lockedContainer.nativeElement.scrollTop=this.container.nativeElement.scrollTop=scrollTop,this.container.nativeElement.scrollLeft=scrollLeft,this.resizeSensors.forEach(sensor=>sensor.acceptSize())})}handleRowNavigationLocked(){return this.navigationService.changes.pipe(filter_filter(()=>kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.lockedContainer)),delay_delay(10)).subscribe(args=>{if(this.lockedLeafColumns.length<=args.prevColIndex&&args.colIndex<this.lockedLeafColumns.length){const cell=this.navigationService.activeCell;cell&&cell.colIndex+cell.colSpan<args.prevColIndex&&(this.container.nativeElement.scrollLeft=0)}})}scrollToVirtualRow(itemIndex){kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.detailTemplate)&&(itemIndex=Math.floor(itemIndex/2));const offset=this.rowHeightService.offset(itemIndex);this.container.nativeElement.scrollTop=offset,this.resetNavigationViewport()}scrollTo({row:row,column:column}){if(dist_fesm2015_isNumber(row))if(this.isVirtual)this.scrollToVirtualRow(row);else{const element=rowAt(row,this.table.nativeElement.rows);element&&(this.container.nativeElement.scrollTop=element.offsetTop)}if(dist_fesm2015_isNumber(column))if(column-=this.lockedLeafColumns.length,this.virtualColumns){const columns=this.columns.leafColumnsToRender;let offset=0;for(let idx=0;idx<column;idx++)offset+=columns[idx].width||0;this.container.nativeElement.scrollLeft=this.normalizeScrollLeft(offset+(this.lockedLeafColumns.length?0:32*this.groups.length+(this.detailTemplate&&column>0?32:0)))}else if(0===column&&this.detailTemplate)this.container.nativeElement.scrollLeft=this.normalizeScrollLeft(0);else{const firstRow=rowAt(0,this.table.nativeElement.rows);if(firstRow){const element=elementAt(column,firstRow.cells,cell=>hasClasses(cell,"k-hierarchy-cell k-detail-cell k-group-cell")?0:parseInt(cell.getAttribute("colSpan"),10)||1);element&&(this.container.nativeElement.scrollLeft=this.elementScrollLeft(element))}}}resetNavigationViewport(){if(!this.container||!this.navigationService.enabled||!this.navigationService.needsViewport()||0===this.data.length)return;const{scrollTop:scrollTop,offsetHeight:offsetHeight}=this.container.nativeElement,scrollBottom=scrollTop+offsetHeight,firstItemIndex=this.rowHeightService.index(scrollTop);let lastItemIndex=this.rowHeightService.index(scrollBottom);const lastItemOffset=this.rowHeightService.offset(lastItemIndex);lastItemIndex>0&&lastItemOffset+this.rowHeight>scrollBottom&&lastItemIndex--;let viewportStart=firstItemIndex,viewportEnd=lastItemIndex;if(kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.detailTemplate)){viewportStart*=2,viewportEnd*=2,this.rowHeightService.offset(firstItemIndex)+this.rowHeight<scrollTop&&viewportStart++;const lastItemDetailOverflows=lastItemOffset+this.rowHeightService.height(lastItemIndex)>scrollBottom;this.rowHeightService.isExpanded(lastItemIndex)&&!lastItemDetailOverflows&&viewportEnd++}this.navigationService.setViewport(viewportStart,viewportEnd)}cleanupScroller(){this.scrollerSubscription&&this.scrollerSubscription.unsubscribe(),this.scroller&&this.scroller.destroy()}initResizeService(){this.resizeService.connect(merge(...this.resizeSensors.map(sensor=>sensor.resize)))}syncContainerHeight(){var renderer;[maybeNativeElement(this.lockedContainer)].filter(kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent).map(el=>{el.style.height="";let height=this.container.nativeElement.offsetHeight;return((el,parent)=>this.table.nativeElement.offsetWidth>this.container.nativeElement.clientWidth)()&&(height-=this.supportService.scrollbarWidth),{el:el,height:height}}).forEach((renderer=this.renderer,({el:el,height:height})=>renderer.setStyle(el,"height",height+"px")))}updateViewportColumns(range){const columns=this.columns.nonLockedLeafColumns.toArray();let{startIdx:startIdx,endIdx:endIdx,offset:offset}=range||this.calculateViewportColumns();const start=Math.max(0,startIdx-1),end=Math.min(endIdx+1,columns.length-1);if(start<startIdx)for(let idx=startIdx-1;idx>=start;idx--)offset-=columns[idx].width;let currentColumns=columns.slice(start,end+1);if(this.viewportColumnsWidth=currentColumns.reduce((total,column)=>total+column.width,0),start>0){const offsetColumn=new fesm2015_ColumnBase$1;offsetColumn.width=offset,currentColumns.unshift(offsetColumn)}this.viewportColumns=new QueryList,this.viewportColumns.reset(currentColumns),this.columnsStartIdx=start,this.columnsEndIdx=end,this.columnInfo.columnRangeChange.emit({start:start,end:end,offset:offset}),range||this.updateColumnViewport(startIdx,endIdx)}handleColumnScroll(){const scrollLeft=this.container.nativeElement.scrollLeft;if(this.scrollLeft!==scrollLeft){this.scrollLeft=scrollLeft;const range=this.calculateViewportColumns();this.updateColumnViewport(range.startIdx,range.endIdx),(range.startIdx<this.columnsStartIdx||this.columnsEndIdx<range.endIdx)&&(fesm2015_cancelAnimationFrame(this.columnUpdateFrame),this.columnUpdateFrame=fesm2015_requestAnimationFrame(()=>{this.ngZone.run(()=>{this.updateViewportColumns(range),this.changeDetector.markForCheck()})}))}}updateColumnViewport(startIdx,endIdx){const lockedCount=this.lockedLeafColumns.length,leafColumns$$1=this.nonLockedLeafColumns.toArray(),viewportStart=lockedCount+startIdx+(this.detailTemplate&&startIdx>0?1:0);let viewportEnd=lockedCount+endIdx+(this.detailTemplate?1:0);for(let idx=0;idx<leafColumns$$1.length;idx++){const column=leafColumns$$1[idx];column.isSpanColumn&&(viewportEnd+=column.childColumns.length)}this.navigationService.setColumnViewport(viewportStart,viewportEnd)}calculateViewportColumns(){const{scrollLeft:scrollLeft,clientWidth:clientWidth}=this.container.nativeElement,columns=this.columns.nonLockedLeafColumns.toArray(),normalizedScrollLeft=this.normalizeScrollLeft(scrollLeft),viewportEnd=normalizedScrollLeft+clientWidth;let startIdx,idx,endIdx=0,current=0,offset=0;for(idx=0;idx<columns.length;idx++){const column=columns[idx];if(current+=column.width||0,void 0===startIdx&&current>normalizedScrollLeft&&(startIdx=idx,offset=current-(column.width||0)),current>=viewportEnd){endIdx=idx;break}}return!endIdx&&idx>0&&(endIdx=columns.length-1),{startIdx:startIdx,endIdx:endIdx,offset:offset}}viewportWidthChange(){return this.viewportColumns.toArray().reduce((total,column)=>total+column.width,0)!==this.viewportColumnsWidth}normalizeScrollLeft(position){return this.rtl?function(position,element,initial){let result=position;return initial<0?result=-position:initial>0&&(result=element.scrollWidth-element.offsetWidth-position),result}(position,this.container.nativeElement,this.supportService.rtlScrollLeft):position}elementScrollLeft(element){return this.rtl?this.normalizeScrollLeft(this.container.nativeElement.scrollWidth-element.offsetLeft-element.offsetWidth):element.offsetLeft}}return ListComponent.fac=function(t){return new(t||ListComponent)(directiveInject(fesm2015_SCROLLER_FACTORY_TOKEN),directiveInject(fesm2015_DetailsService),directiveInject(fesm2015_ChangeNotificationService),directiveInject(fesm2015_SuspendService),directiveInject(fesm2015_GroupsService),directiveInject(NgZone),directiveInject(Renderer2),directiveInject(dist_fesm2015_ScrollSyncService),directiveInject(_ivy_ngcc_dist_fesm2015_ResizeService),directiveInject(fesm2015_EditService),directiveInject(fesm2015_BrowserSupportService),directiveInject(kendo_angular_grid_ivy_ngcc_dist_fesm2015_NavigationService),directiveInject(fesm2015_ScrollRequestService),directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_ColumnResizingService),directiveInject(ChangeDetectorRef),directiveInject(fesm2015_PDFService),directiveInject(fesm2015_ColumnInfoService))},ListComponent.cmp=defineComponent({type:ListComponent,selectors:[["kendo-grid-list"]],viewQuery:function(rf,ctx){var _t;1&rf&&(staticViewQuery(_c108,!0),viewQuery(_c109,!0),viewQuery(_c110,!0),viewQuery(_c111,!0),viewQuery(fesm2015_ResizeSensorComponent,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.container=_t.first),queryRefresh(_t=loadQuery())&&(ctx.lockedContainer=_t.first),queryRefresh(_t=loadQuery())&&(ctx.lockedTable=_t.first),queryRefresh(_t=loadQuery())&&(ctx.table=_t.first),queryRefresh(_t=loadQuery())&&(ctx.resizeSensors=_t))},hostVars:3,hostBindings:function(rf,ctx){2&rf&&(attribute("role",ctx.hostRole),classProp("k-grid-container",ctx.hostClass))},inputs:{groups:"groups",skip:"skip",columns:"columns",selectable:"selectable",groupable:"groupable",trackBy:"trackBy",data:"data",total:"total",rowHeight:"rowHeight",detailRowHeight:"detailRowHeight",take:"take",detailTemplate:"detailTemplate",noRecordsTemplate:"noRecordsTemplate",filterable:"filterable",rowClass:"rowClass",loading:"loading",virtualColumns:"virtualColumns",isVirtual:"isVirtual"},outputs:{contentScroll:"contentScroll",pageChange:"pageChange",scrollBottom:"scrollBottom"},features:[ProvidersFeature([{provide:fesm2015_SCROLLER_FACTORY_TOKEN,useValue:fesm2015_DEFAULT_SCROLLER_FACTORY}]),NgOnChangesFeature],decls:14,vars:32,consts:[["class","k-grid-content-locked","role","presentation",3,"width","kendoEventsOutsideAngular","scope",4,"ngIf"],["role","presentation","tabindex","-1",1,"k-grid-content","k-virtual-content",3,"kendoGridResizableContainer","lockedWidth"],["container",""],["role","presentation",1,"k-grid-table-wrap"],["role","presentation",1,"k-grid-table",3,"virtualColumns"],["table",""],["kendoGridColGroup","","role","presentation",3,"groups","columns","detailTemplate"],["kendoGridTableBody","","role","presentation",3,"skipGroupDecoration","data","groups","showGroupFooters","columns","allColumns","detailTemplate","noRecordsTemplate","lockedColumnsCount","totalColumnsCount","skip","selectable","trackBy","filterable","rowClass","virtualColumns"],[4,"ngIf"],["role","presentation",1,"k-height-container"],["class","k-width-container","role","presentation",4,"ngIf"],["kendoGridLoading","",4,"ngIf"],["role","presentation",1,"k-grid-content-locked",3,"kendoEventsOutsideAngular","scope"],["lockedContainer",""],["role","presentation",1,"k-grid-table",3,"locked"],["lockedTable",""],["kendoGridTableBody","","role","presentation",3,"groups","isLocked","data","noRecordsText","columns","totalColumnsCount","detailTemplate","showGroupFooters","skip","selectable","trackBy","filterable","rowClass"],["role","presentation",1,"k-width-container"],["kendoGridLoading",""]],template:function(rf,ctx){1&rf&&(template(0,fesm2015_ListComponent_div_0_Template,10,30,"div",0),elementStart(1,"div",1,2),elementStart(3,"div",3),elementStart(4,"table",4,5),element(6,"colgroup",6),element(7,"tbody",7),elementEnd(),template(8,ListComponent_kendo_resize_sensor_8_Template,1,0,"kendo-resize-sensor",8),elementEnd(),template(9,ListComponent_kendo_resize_sensor_9_Template,1,0,"kendo-resize-sensor",8),elementStart(10,"div",9),element(11,"div"),elementEnd(),template(12,ListComponent_div_12_Template,2,2,"div",10),elementEnd(),template(13,ListComponent_div_13_Template,1,0,"div",11)),2&rf&&(property("ngIf",ctx.isLocked),advance(1),property("kendoGridResizableContainer",ctx.lockedLeafColumns.length)("lockedWidth",ctx.lockedWidth+1),advance(3),styleProp("width",ctx.nonLockedWidth,"px"),property("virtualColumns",ctx.virtualColumns),advance(2),property("groups",ctx.isLocked?pureFunction0(31,_c107):ctx.groups)("columns",ctx.nonLockedColumnsToRender)("detailTemplate",ctx.detailTemplate),advance(1),property("skipGroupDecoration",ctx.isLocked)("data",ctx.data)("groups",ctx.groups)("showGroupFooters",ctx.showFooter)("columns",ctx.nonLockedColumnsToRender)("allColumns",ctx.nonLockedLeafColumns)("detailTemplate",ctx.detailTemplate)("noRecordsTemplate",ctx.noRecordsTemplate)("lockedColumnsCount",ctx.lockedLeafColumns.length)("totalColumnsCount",ctx.leafColumns.length)("skip",ctx.skip)("selectable",ctx.selectable)("trackBy",ctx.trackBy)("filterable",ctx.filterable)("rowClass",ctx.rowClass)("virtualColumns",ctx.virtualColumns),advance(1),property("ngIf",ctx.isLocked),advance(1),property("ngIf",ctx.isLocked||ctx.virtualColumns),advance(2),styleProp("height",ctx.totalHeight,"px"),advance(1),property("ngIf",ctx.virtualColumns),advance(1),property("ngIf",ctx.loading))},directives:function(){return[common_NgIf,fesm2015_ResizableContainerDirective,fesm2015_TableDirective,fesm2015_ColGroupComponent,fesm2015_TableBodyComponent,fesm2015_EventsOutsideAngularDirective,fesm2015_ResizeSensorComponent,fesm2015_LoadingComponent]},encapsulation:2}),ListComponent})(),kendo_angular_grid_ivy_ngcc_dist_fesm2015_Messages=(()=>{class Messages extends fesm2015_ComponentMessages{}return Messages.fac=function(t){return _ivy_ngcc_dist_fesm2015_Messages_BaseFactory(t||Messages)},Messages.dir=defineDirective({type:Messages,inputs:{groupPanelEmpty:"groupPanelEmpty",noRecords:"noRecords",pagerFirstPage:"pagerFirstPage",pagerLastPage:"pagerLastPage",pagerPreviousPage:"pagerPreviousPage",pagerNextPage:"pagerNextPage",pagerPage:"pagerPage",pagerItemsPerPage:"pagerItemsPerPage",pagerOf:"pagerOf",pagerItems:"pagerItems",filter:"filter",filterEqOperator:"filterEqOperator",filterNotEqOperator:"filterNotEqOperator",filterIsNullOperator:"filterIsNullOperator",filterIsNotNullOperator:"filterIsNotNullOperator",filterIsEmptyOperator:"filterIsEmptyOperator",filterIsNotEmptyOperator:"filterIsNotEmptyOperator",filterStartsWithOperator:"filterStartsWithOperator",filterContainsOperator:"filterContainsOperator",filterNotContainsOperator:"filterNotContainsOperator",filterEndsWithOperator:"filterEndsWithOperator",filterGteOperator:"filterGteOperator",filterGtOperator:"filterGtOperator",filterLteOperator:"filterLteOperator",filterLtOperator:"filterLtOperator",filterIsTrue:"filterIsTrue",filterIsFalse:"filterIsFalse",filterBooleanAll:"filterBooleanAll",filterAfterOrEqualOperator:"filterAfterOrEqualOperator",filterAfterOperator:"filterAfterOperator",filterBeforeOperator:"filterBeforeOperator",filterBeforeOrEqualOperator:"filterBeforeOrEqualOperator",filterFilterButton:"filterFilterButton",filterClearButton:"filterClearButton",filterAndLogic:"filterAndLogic",filterOrLogic:"filterOrLogic",loading:"loading",columnMenu:"columnMenu",columns:"columns",lock:"lock",unlock:"unlock",sortable:"sortable",sortAscending:"sortAscending",sortDescending:"sortDescending",sortedAscending:"sortedAscending",sortedDescending:"sortedDescending",sortedDefault:"sortedDefault",columnsApply:"columnsApply",columnsReset:"columnsReset",detailExpand:"detailExpand",detailCollapse:"detailCollapse"},features:[InheritDefinitionFeature]}),Messages})();const _ivy_ngcc_dist_fesm2015_Messages_BaseFactory=getInheritedFactory(kendo_angular_grid_ivy_ngcc_dist_fesm2015_Messages);let kendo_angular_grid_ivy_ngcc_dist_fesm2015_LocalizedMessagesDirective=(()=>{class LocalizedMessagesDirective extends kendo_angular_grid_ivy_ngcc_dist_fesm2015_Messages{constructor(service){super(),this.service=service}}return LocalizedMessagesDirective.fac=function(t){return new(t||LocalizedMessagesDirective)(directiveInject(fesm2015_LocalizationService))},LocalizedMessagesDirective.dir=defineDirective({type:LocalizedMessagesDirective,selectors:[["","kendoGridLocalizedMessages",""]],features:[ProvidersFeature([{provide:kendo_angular_grid_ivy_ngcc_dist_fesm2015_Messages,useExisting:forwardRef(()=>LocalizedMessagesDirective)}]),InheritDefinitionFeature]}),LocalizedMessagesDirective})(),fesm2015_FilterRowComponent=(()=>{class FilterRowComponent{constructor(localization){this.localization=localization,this.columns=[],this.groups=[],this.filterRowClass=!0,this.filterLabel=this.localization.get("filter")}}return FilterRowComponent.fac=function(t){return new(t||FilterRowComponent)(directiveInject(fesm2015_LocalizationService))},FilterRowComponent.cmp=defineComponent({type:FilterRowComponent,selectors:[["","kendoGridFilterRow",""]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-filter-row",ctx.filterRowClass)},inputs:{columns:"columns",groups:"groups",filter:"filter",detailTemplate:"detailTemplate",logicalRowIndex:"logicalRowIndex",lockedColumnsCount:"lockedColumnsCount"},attrs:_c113,decls:3,vars:3,consts:[["role","presentation",3,"k-group-cell",4,"ngFor","ngForOf"],["role","presentation",3,"k-hierarchy-cell",4,"ngIf"],["kendoGridFilterCell","","kendoGridLogicalCell","",3,"column","filter","logicalRowIndex","logicalColIndex",4,"ngFor","ngForOf"],["role","presentation"],["kendoGridFilterCell","","kendoGridLogicalCell","",3,"column","filter","logicalRowIndex","logicalColIndex"]],template:function(rf,ctx){1&rf&&(template(0,FilterRowComponent_td_0_Template,1,2,"td",0),template(1,FilterRowComponent_td_1_Template,1,2,"td",1),template(2,FilterRowComponent_td_2_Template,1,5,"td",2)),2&rf&&(property("ngForOf",ctx.groups),advance(1),property("ngIf",null==ctx.detailTemplate?null:ctx.detailTemplate.templateRef),advance(1),property("ngForOf",ctx.columns))},directives:function(){return[common_NgForOf,common_NgIf,fesm2015_FilterCellComponent,fesm2015_LogicalCellDirective]},encapsulation:2}),FilterRowComponent})();const cloneFilters=filter$$1=>{if(filter$$1)return isCompositeFilterDescriptor(filter$$1)?{filters:cloneFilters(filter$$1.filters),logic:filter$$1.logic}:Array.isArray(filter$$1)?filter$$1.map(cloneFilters):(filter$$1=>(obj=>{const result={};if(Object.assign(result,obj),obj.constructor!==Object){const proto=obj.constructor.prototype;Object.getOwnPropertyNames(proto).forEach(property=>{"constructor"!==property&&proto.hasOwnProperty(property)&&(result[property]=obj[property])})}return result})(filter$$1))(filter$$1)};let fesm2015_FilterCellComponent=(()=>{class FilterCellComponent{constructor(){this._templateContext={}}get filter(){return this._filter}set filter(value){this._filter=cloneFilters(value)}get templateContext(){return this._templateContext.column=this.column,this._templateContext.filter=this.filter,this._templateContext.$implicit=this.filter,this._templateContext}get hasTemplate(){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.column.filterCellTemplateRef)}get isFilterable(){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.column)&&!fesm2015_isNullOrEmptyString(this.column.field)&&this.column.filterable}}return FilterCellComponent.fac=function(t){return new(t||FilterCellComponent)},FilterCellComponent.cmp=defineComponent({type:FilterCellComponent,selectors:[["","kendoGridFilterCell",""]],inputs:{filter:"filter",column:"column"},attrs:_c114,decls:1,vars:1,consts:[[3,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["kendoFilterCellHost","",3,"column","filter"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(rf,ctx){1&rf&&template(0,FilterCellComponent_ng_template_0_Template,3,3,"ng-template",0),2&rf&&property("ngIf",ctx.isFilterable)},directives:function(){return[common_NgIf,common_NgSwitch,common_NgSwitchCase,fesm2015_FilterCellHostDirective,common_NgTemplateOutlet]},encapsulation:2}),FilterCellComponent})();const operatorTexts=(operators=>localization=>Object.keys(operators).reduce((acc,key)=>(acc[operators[key]]=localization.get(key),acc),{}))({filterEqOperator:"eq",filterNotEqOperator:"neq",filterGteOperator:"gte",filterGtOperator:"gt",filterLteOperator:"lte",filterLtOperator:"lt",filterIsNullOperator:"isnull",filterIsNotNullOperator:"isnotnull",filterIsEmptyOperator:"isempty",filterIsNotEmptyOperator:"isnotempty",filterContainsOperator:"contains",filterNotContainsOperator:"doesnotcontain",filterStartsWithOperator:"startswith",filterEndsWithOperator:"endswith",filterAfterOrEqualOperator:"after-eq",filterAfterOperator:"after",filterBeforeOrEqualOperator:"before-eq",filterBeforeOperator:"before"}),toJSON=xs=>xs.map(x=>x.toJSON());let fesm2015_FilterOperatorBase=(()=>{class FilterOperatorBase{constructor(operator,localization){this.operator=operator,this.localization=localization,this.messages=operatorTexts(this.localization),this._text=this.messages[this.operator],this.localization.changes.subscribe(this.refreshText.bind(this))}get text(){return this._text}set text(value){this._text=fesm2015_isNullOrEmptyString(value)?this.messages[this.operator]:value}toJSON(){return{text:this.text,value:this.operator}}refreshText(){const update=this._text===this.messages[this.operator];this.messages=operatorTexts(this.localization),update&&(this._text=this.messages[this.operator])}}return FilterOperatorBase.fac=function(t){invalidFactory()},FilterOperatorBase.dir=defineDirective({type:FilterOperatorBase,inputs:{text:"text"}}),FilterOperatorBase})();const setFilter=(index,filter$$1,field,defaultOperator)=>kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(filter$$1)&&kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(filter$$1.filters)&&filter$$1.filters.length>index?filter$$1.filters[index]:((index,rootFilter,filter$$1)=>((rootFilter=rootFilter||{filters:[],logic:"and"}).filters[index]=filter$$1,filter$$1))(index,filter$$1,{field:field,operator:defaultOperator}),logicOperators=localization=>[{text:localization.get("filterAndLogic"),value:"and"},{text:localization.get("filterOrLogic"),value:"or"}],fesm2015_flatten=filter$$1=>kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(filter$$1.filters)?filter$$1.filters.reduce((acc,curr)=>acc.concat(isCompositeFilterDescriptor(curr)?fesm2015_flatten(curr):[curr]),[]):[],trimFilterByField=(filter$$1,field)=>{kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(filter$$1)&&kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(filter$$1.filters)&&(filter$$1.filters=filter$$1.filters.filter(x=>isCompositeFilterDescriptor(x)?(trimFilterByField(x,field),x.filters.length):x.field!==field))},filtersByField=(filter$$1,field)=>fesm2015_flatten(filter$$1||{}).filter(x=>x.field===field),removeFilter=(filter$$1,field)=>(trimFilterByField(filter$$1,field),filter$$1),localizeOperators$1=operators=>localization=>Object.keys(operators).map(key=>({text:localization.get(key),value:operators[key]}));let fesm2015_BaseFilterCellComponent=(()=>{class BaseFilterCellComponent{constructor(filterService){this.filterService=filterService,this.operatorList=new QueryList}get hostClasses(){return!0}get operators(){return this._operators.length?this._operators:this.defaultOperators}set operators(values){this._operators=values}ngAfterContentInit(){this.operationListSubscription=observe(this.operatorList).pipe(map_map(q=>q.toArray()),map_map(toJSON)).subscribe(x=>{this.operators=x})}ngOnDestroy(){this.operationListSubscription&&this.operationListSubscription.unsubscribe()}filterByField(field){return((filter$$1,field)=>{let[currentFilter]=filtersByField(filter$$1,field);return currentFilter})(this.filter,field)}filtersByField(field){return filtersByField(this.filter,field)}removeFilter(field){return removeFilter(this.filter,field)}updateFilter(filter$$1){const root=this.filter||{filters:[],logic:"and"};let[currentFilter]=fesm2015_flatten(root).filter(x=>x.field===filter$$1.field);return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(currentFilter)?Object.assign(currentFilter,filter$$1):root.filters.push(filter$$1),root}applyFilter(filter$$1){this.filterService.filter(filter$$1)}}return BaseFilterCellComponent.fac=function(t){invalidFactory()},BaseFilterCellComponent.dir=defineDirective({type:BaseFilterCellComponent,contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,fesm2015_FilterOperatorBase,!1),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.operatorList=_t)},hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-filtercell",ctx.hostClasses)}}),BaseFilterCellComponent})();const numericOperators=localizeOperators$1({filterEqOperator:"eq",filterNotEqOperator:"neq",filterGteOperator:"gte",filterGtOperator:"gt",filterLteOperator:"lte",filterLtOperator:"lt",filterIsNullOperator:"isnull",filterIsNotNullOperator:"isnotnull"});let fesm2015_NumericFilterComponent=(()=>{class NumericFilterComponent extends fesm2015_BaseFilterCellComponent{constructor(filterService,localization){super(filterService),this.localization=localization,this.operator="eq",this.step=1,this.spinners=!0,this.defaultOperators=numericOperators(this.localization)}set format(value){this._format=value}get format(){return fesm2015_isNullOrEmptyString(this._format)?this.columnFormat:this._format}get currentFilter(){return this.filterByField(this.column.field)}get currentOperator(){return this.currentFilter?this.currentFilter.operator:this.operator}get columnFormat(){return this.column&&!fesm2015_isNullOrEmptyString(this.column.format)?extractFormat(this.column.format):"n2"}ngOnInit(){this.subscription=this.localization.changes.subscribe(this.localizationChange.bind(this))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),super.ngOnDestroy()}localizationChange(){this.defaultOperators=numericOperators(this.localization),this.operatorList.length&&(this.operators=toJSON(this.operatorList.toArray()))}}return NumericFilterComponent.fac=function(t){invalidFactory()},NumericFilterComponent.dir=defineDirective({type:NumericFilterComponent,inputs:{operator:"operator",step:"step",spinners:"spinners",format:"format",column:"column",filter:"filter",min:"min",max:"max",decimals:"decimals"},features:[InheritDefinitionFeature]}),NumericFilterComponent})(),fesm2015_NumericFilterCellComponent=(()=>{class NumericFilterCellComponent extends fesm2015_NumericFilterComponent{constructor(filterService,localization){super(filterService,localization),this.localization=localization,this.filterDelay=500,this.showOperators=!0}}return NumericFilterCellComponent.fac=function(t){return new(t||NumericFilterCellComponent)(directiveInject(fesm2015_FilterService),directiveInject(fesm2015_LocalizationService))},NumericFilterCellComponent.cmp=defineComponent({type:NumericFilterCellComponent,selectors:[["kendo-grid-numeric-filter-cell"]],inputs:{filterDelay:"filterDelay",showOperators:"showOperators"},features:[InheritDefinitionFeature],decls:2,vars:14,consts:[[3,"column","filter","operators","defaultOperator","showOperators"],["kendoGridFocusable","","kendoFilterInput","",3,"filterDelay","autoCorrect","value","format","decimals","spinners","min","max","step"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-grid-filter-wrapper-cell",0),element(1,"kendo-numerictextbox",1),elementEnd()),2&rf&&(property("column",ctx.column)("filter",ctx.filter)("operators",ctx.operators)("defaultOperator",ctx.operator)("showOperators",ctx.showOperators),advance(1),property("filterDelay",ctx.filterDelay)("autoCorrect",!0)("value",null==ctx.currentFilter?null:ctx.currentFilter.value)("format",ctx.format)("decimals",ctx.decimals)("spinners",ctx.spinners)("min",ctx.min)("max",ctx.max)("step",ctx.step))},directives:function(){return[fesm2015_FilterCellWrapperComponent,fesm2015_NumericTextBoxComponent,dist_fesm2015_FocusableDirective,dist_fesm2015_FilterInputDirective]},encapsulation:2}),NumericFilterCellComponent})(),dist_fesm2015_FilterInputDirective=(()=>{class FilterInputDirective{constructor(valueAccessors,ngZone,element,renderer){this.change=new core_EventEmitter,this.composing=!1,this.filterDelay=500,this.changeRequests=new Subject_Subject,this.accessor=valueAccessors[0],ngZone.runOutsideAngular(()=>{const unsubscribeStart=renderer.listen(element.nativeElement,"compositionstart",()=>this.composing=!0),unsubscribeEnd=renderer.listen(element.nativeElement,"compositionend",()=>this.composing=!1);this.unsubscribeEvents=()=>{unsubscribeStart(),unsubscribeEnd()}})}set value(value){this.accessor.writeValue(value)}set disabled(value){this.accessor.setDisabledState(value)}ngAfterViewInit(){this.accessor.registerOnChange(x=>this.filterDelay>0?this.changeRequests.next(x):this.change.emit(x)),this.subscribeChanges()}ngOnChanges(changes){isChanged("filterDelay",changes)&&(this.unsubscribeChanges(),this.subscribeChanges())}ngOnDestroy(){this.unsubscribeChanges(),this.unsubscribeEvents()}subscribeChanges(){this.changeRequestsSubscription=this.changeRequests.pipe(function(dueTime,scheduler=async_async){return source=>source.lift(new DebounceTimeOperator(dueTime,scheduler))}(this.filterDelay),filter_filter(()=>!this.composing)).subscribe(x=>this.change.emit(x))}unsubscribeChanges(){this.changeRequestsSubscription&&this.changeRequestsSubscription.unsubscribe()}}return FilterInputDirective.fac=function(t){return new(t||FilterInputDirective)(directiveInject(NG_VALUE_ACCESSOR,2),directiveInject(NgZone),directiveInject(ElementRef),directiveInject(Renderer2))},FilterInputDirective.dir=defineDirective({type:FilterInputDirective,selectors:[["","kendoFilterInput",""]],inputs:{filterDelay:"filterDelay",value:"value"},features:[NgOnChangesFeature]}),FilterInputDirective})();const EMPTY_VALUE_OPERATORS=new Set(["isnull","isnotnull","isempty","isnotempty"]),isEmptyValueOperator=operator=>EMPTY_VALUE_OPERATORS.has(operator);let fesm2015_FilterInputWrapperComponent=(()=>{class FilterInputWrapperComponent extends fesm2015_BaseFilterCellComponent{constructor(filterService){super(filterService),this.operators=[]}get currentFilter(){return this.filterByField(this.column.field)}get currentOperator(){const filter$$1=this.currentFilter;return this._operator||(this._operator=filter$$1?filter$$1.operator:this.defaultOperator),this._operator}set currentOperator(value){this._operator=value;const emptyValueOperator=isEmptyValueOperator(value);this.filterInputDisabled=emptyValueOperator,emptyValueOperator?this.applyNoValueFilter(value):!fesm2015_isBlank(value)&&kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.currentFilter)&&this.onChange(this.currentFilter.value)}get defaultOperator(){return fesm2015_isNullOrEmptyString(this._defaultOperator)?this.operators&&this.operators.length?this.operators[0].value:"eq":this._defaultOperator}set defaultOperator(value){this._defaultOperator=value}set filterInputDisabled(disabled){this.input&&(this.input.disabled=disabled)}ngAfterContentInit(){kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.input)&&(this.changeSubscription=this.input.change.subscribe(this.onChange.bind(this)),this.filterInputDisabled=isEmptyValueOperator(this.currentOperator))}ngOnDestroy(){super.ngOnDestroy(),this.changeSubscription&&this.changeSubscription.unsubscribe()}onChange(value){fesm2015_isNullOrEmptyString(value)&&!this.filterByField(this.column.field)||this.filterChange(fesm2015_isNullOrEmptyString(value)?this.removeFilter(this.column.field):this.updateFilter({field:this.column.field,operator:this.currentOperator,value:value}))}onClear(){this.onChange(null),this.filterInputDisabled=isEmptyValueOperator(this.defaultOperator)}applyNoValueFilter(operator){this.filterChange(this.updateFilter({field:this.column.field,operator:operator,value:null}))}ngOnChanges(changes){isChanged("filter",changes,!1)&&(this._operator=null,this.filterInputDisabled=isEmptyValueOperator(this.currentOperator))}}return FilterInputWrapperComponent.fac=function(t){invalidFactory()},FilterInputWrapperComponent.dir=defineDirective({type:FilterInputWrapperComponent,contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,dist_fesm2015_FilterInputDirective,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.input=_t.first)},inputs:{operators:"operators",defaultOperator:"defaultOperator",column:"column",filter:"filter"},features:[InheritDefinitionFeature,NgOnChangesFeature]}),FilterInputWrapperComponent})();const EMPTY_FILTER_OPERATORS=["isnull","isnotnull","isempty","isnotempty"];let fesm2015_FilterCellWrapperComponent=(()=>{class FilterCellWrapperComponent extends fesm2015_FilterInputWrapperComponent{constructor(filterService){super(filterService),this.showOperators=!0}get hostClasses(){return!0}get overrideBaseClasses(){return!1}get showButton(){const filter$$1=this.currentFilter;return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(filter$$1)&&(!fesm2015_isNullOrEmptyString(filter$$1.value)||EMPTY_FILTER_OPERATORS.indexOf(String(filter$$1.operator))>=0)}filterChange(filter$$1){this.applyFilter(filter$$1)}}return FilterCellWrapperComponent.fac=function(t){return new(t||FilterCellWrapperComponent)(directiveInject(fesm2015_FilterService))},FilterCellWrapperComponent.cmp=defineComponent({type:FilterCellWrapperComponent,selectors:[["kendo-grid-filter-wrapper-cell"]],hostVars:4,hostBindings:function(rf,ctx){2&rf&&classProp("k-filtercell-wrapper",ctx.hostClasses)("k-filtercell",ctx.overrideBaseClasses)},inputs:{showOperators:"showOperators"},features:[InheritDefinitionFeature],ngContentSelectors:_c115,decls:2,vars:4,consts:[[3,"showOperators","operators","showButton","value","clear","valueChange"]],template:function(rf,ctx){1&rf&&(projectionDef(),projection(0),elementStart(1,"kendo-grid-filter-cell-operators",0),listener("clear",(function(){return ctx.onClear()}))("valueChange",(function($event){return ctx.currentOperator=$event})),elementEnd()),2&rf&&(advance(1),property("showOperators",ctx.showOperators)("operators",ctx.operators)("showButton",ctx.showButton)("value",ctx.currentOperator))},directives:function(){return[fesm2015_FilterCellOperatorsComponent]},encapsulation:2}),FilterCellWrapperComponent})();const stringOperators=localizeOperators$1({filterEqOperator:"eq",filterNotEqOperator:"neq",filterContainsOperator:"contains",filterNotContainsOperator:"doesnotcontain",filterStartsWithOperator:"startswith",filterEndsWithOperator:"endswith",filterIsNullOperator:"isnull",filterIsNotNullOperator:"isnotnull",filterIsEmptyOperator:"isempty",filterIsNotEmptyOperator:"isnotempty"});let fesm2015_StringFilterComponent=(()=>{class StringFilterComponent extends fesm2015_BaseFilterCellComponent{constructor(filterService,localization){super(filterService),this.localization=localization,this.operator="contains"}get currentFilter(){return this.filterByField((this.column||{}).field)}get currentOperator(){return this.currentFilter?this.currentFilter.operator:this.operator}ngOnInit(){this.subscription=this.localization.changes.subscribe(this.localizationChange.bind(this))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),super.ngOnDestroy()}localizationChange(){this.defaultOperators=stringOperators(this.localization),this.operatorList.length&&(this.operators=toJSON(this.operatorList.toArray()))}}return StringFilterComponent.fac=function(t){invalidFactory()},StringFilterComponent.dir=defineDirective({type:StringFilterComponent,inputs:{operator:"operator",column:"column",filter:"filter"},features:[InheritDefinitionFeature]}),StringFilterComponent})(),fesm2015_StringFilterCellComponent=(()=>{class StringFilterCellComponent extends fesm2015_StringFilterComponent{constructor(filterService,localization){super(filterService,localization),this.filterDelay=500,this.showOperators=!0}}return StringFilterCellComponent.fac=function(t){return new(t||StringFilterCellComponent)(directiveInject(fesm2015_FilterService),directiveInject(fesm2015_LocalizationService))},StringFilterCellComponent.cmp=defineComponent({type:StringFilterCellComponent,selectors:[["kendo-grid-string-filter-cell"]],inputs:{filterDelay:"filterDelay",showOperators:"showOperators"},features:[InheritDefinitionFeature],decls:2,vars:7,consts:[[3,"column","filter","operators","defaultOperator","showOperators"],["kendoGridFocusable","","kendoFilterInput","",1,"k-textbox",3,"filterDelay","ngModel"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-grid-filter-wrapper-cell",0),element(1,"input",1),elementEnd()),2&rf&&(property("column",ctx.column)("filter",ctx.filter)("operators",ctx.operators)("defaultOperator",ctx.operator)("showOperators",ctx.showOperators),advance(1),property("filterDelay",ctx.filterDelay)("ngModel",null==ctx.currentFilter?null:ctx.currentFilter.value))},directives:[fesm2015_FilterCellWrapperComponent,forms_DefaultValueAccessor,dist_fesm2015_FocusableDirective,dist_fesm2015_FilterInputDirective,forms_NgControlStatus,forms_NgModel],encapsulation:2}),StringFilterCellComponent})(),fesm2015_FilterCellOperatorsComponent=(()=>{class FilterCellOperatorsComponent{constructor(localization){this.localization=localization,this.clearText="Clear",this.operators=[],this.showOperators=!0,this.valueChange=new core_EventEmitter,this.clear=new core_EventEmitter}get hostClasses(){return!0}onChange(dataItem){this.valueChange.emit(dataItem)}clearClick(){return this.clear.emit(),!1}clearKeydown(args){args.keyCode!==Keys.Enter&&args.keyCode!==Keys.Space||this.clear.emit()}dropdownKeydown(args){args.defaultPrevented||args.keyCode!==Keys.Enter||this.dropdown.isOpen||(this.dropdown.toggle(!0),args.preventDefault())}ngOnInit(){this.localization.changes.subscribe(()=>this.clearText=this.localization.get("filterClearButton"))}}return FilterCellOperatorsComponent.fac=function(t){return new(t||FilterCellOperatorsComponent)(directiveInject(fesm2015_LocalizationService))},FilterCellOperatorsComponent.cmp=defineComponent({type:FilterCellOperatorsComponent,selectors:[["kendo-grid-filter-cell-operators"]],viewQuery:function(rf,ctx){var _t;1&rf&&viewQuery(_c116,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.dropdown=_t.first)},hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-filtercell-operator",ctx.hostClasses)},inputs:{operators:"operators",showOperators:"showOperators",showButton:"showButton",value:"value"},outputs:{valueChange:"valueChange",clear:"clear"},decls:3,vars:5,consts:[["kendoGridFocusable","","class","k-dropdown-operator","iconClass","k-i-filter","textField","text","valueField","value",3,"data","value","valuePrimitive","popupSettings","valueChange","keydown",4,"ngIf"],["type","button","kendoGridFocusable","",1,"k-button","k-button-icon",3,"ngClass","title","click","keydown"],[1,"k-icon","k-i-filter-clear"],["kendoGridFocusable","","iconClass","k-i-filter","textField","text","valueField","value",1,"k-dropdown-operator",3,"data","value","valuePrimitive","popupSettings","valueChange","keydown"],["dropdown",""]],template:function(rf,ctx){1&rf&&(template(0,FilterCellOperatorsComponent_kendo_dropdownlist_0_Template,2,5,"kendo-dropdownlist",0),elementStart(1,"button",1),listener("click",(function(){return ctx.clearClick()}))("keydown",(function($event){return ctx.clearKeydown($event)})),element(2,"span",2),elementEnd()),2&rf&&(property("ngIf",ctx.showOperators),advance(1),property("ngClass",pureFunction1(3,_c118,ctx.showButton))("title",ctx.clearText))},directives:[common_NgIf,dist_fesm2015_FocusableDirective,common_NgClass,fesm2015_DropDownListComponent],encapsulation:2}),FilterCellOperatorsComponent})();const stringOperators$1=localizeOperators$1({filterContainsOperator:"contains",filterNotContainsOperator:"doesnotcontain",filterEqOperator:"eq",filterNotEqOperator:"neq",filterStartsWithOperator:"startswith",filterEndsWithOperator:"endswith",filterIsNullOperator:"isnull",filterIsNotNullOperator:"isnotnull",filterIsEmptyOperator:"isempty",filterIsNotEmptyOperator:"isnotempty"});let fesm2015_AutoCompleteFilterCellComponent=(()=>{class AutoCompleteFilterCellComponent extends fesm2015_BaseFilterCellComponent{constructor(filterService,column,localization){super(filterService),this.localization=localization,this.showOperators=!0,this.defaultOperators=stringOperators$1(this.localization),this.column=column}set valueField(value){this._valueField=value}get valueField(){return this._valueField?this._valueField:this.column.field}get currentFilter(){return this.filterByField(this.column.field)}get currentOperator(){return this.currentFilter?this.currentFilter.operator:"contains"}}return AutoCompleteFilterCellComponent.fac=function(t){return new(t||AutoCompleteFilterCellComponent)(directiveInject(fesm2015_FilterService),directiveInject(dist_fesm2015_ColumnComponent),directiveInject(fesm2015_LocalizationService))},AutoCompleteFilterCellComponent.cmp=defineComponent({type:AutoCompleteFilterCellComponent,selectors:[["kendo-grid-autocomplete-filter-cell"]],inputs:{showOperators:"showOperators",column:"column",valueField:"valueField",filter:"filter",data:"data"},features:[InheritDefinitionFeature],decls:2,vars:7,consts:[[3,"column","filter","operators","showOperators"],["kendoFilterInput","",3,"data","valueField","value"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-grid-filter-wrapper-cell",0),element(1,"kendo-autocomplete",1),elementEnd()),2&rf&&(property("column",ctx.column)("filter",ctx.filter)("operators",ctx.operators)("showOperators",ctx.showOperators),advance(1),property("data",ctx.data)("valueField",ctx.valueField)("value",null==ctx.currentFilter?null:ctx.currentFilter.value))},directives:[fesm2015_FilterCellWrapperComponent,fesm2015_AutoCompleteComponent,dist_fesm2015_FilterInputDirective],encapsulation:2}),AutoCompleteFilterCellComponent})(),fesm2015_BooleanFilterComponent=(()=>{class BooleanFilterComponent extends fesm2015_BaseFilterCellComponent{constructor(filterService,localization){super(filterService),this.localization=localization,this.operator="eq",this.items=[{text:this.localization.get("filterIsTrue"),value:!0},{text:this.localization.get("filterIsFalse"),value:!1}],this.defaultItem={text:this.localization.get("filterBooleanAll"),value:null}}get hostClasses(){return!0}get currentFilter(){return this.filterByField(this.column.field)}get currentOperator(){return this.currentFilter?this.currentFilter.operator:this.operator}ngOnInit(){this.subscription=this.localization.changes.subscribe(this.localizationChange.bind(this))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),super.ngOnDestroy()}localizationChange(){this.items=[{text:this.localization.get("filterIsTrue"),value:!0},{text:this.localization.get("filterIsFalse"),value:!1}],this.defaultItem={text:this.localization.get("filterBooleanAll"),value:null}}}return BooleanFilterComponent.fac=function(t){invalidFactory()},BooleanFilterComponent.dir=defineDirective({type:BooleanFilterComponent,hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-filtercell-boolean",ctx.hostClasses)},inputs:{column:"column",filter:"filter"},features:[InheritDefinitionFeature]}),BooleanFilterComponent})(),fesm2015_BooleanFilterCellComponent=(()=>{class BooleanFilterCellComponent extends fesm2015_BooleanFilterComponent{constructor(filterService,localization,cd){super(filterService,localization),this.cd=cd}localizationChange(){super.localizationChange(),this.cd.markForCheck()}}return BooleanFilterCellComponent.fac=function(t){return new(t||BooleanFilterCellComponent)(directiveInject(fesm2015_FilterService),directiveInject(fesm2015_LocalizationService),directiveInject(ChangeDetectorRef))},BooleanFilterCellComponent.cmp=defineComponent({type:BooleanFilterCellComponent,selectors:[["kendo-grid-boolean-filter-cell"]],features:[InheritDefinitionFeature],decls:2,vars:10,consts:[[3,"column","filter","showOperators","defaultOperator"],["kendoFilterInput","","textField","text","valueField","value",3,"defaultItem","data","popupSettings","valuePrimitive","value"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-grid-filter-wrapper-cell",0),element(1,"kendo-dropdownlist",1),elementEnd()),2&rf&&(property("column",ctx.column)("filter",ctx.filter)("showOperators",!1)("defaultOperator",ctx.operator),advance(1),property("defaultItem",ctx.defaultItem)("data",ctx.items)("popupSettings",pureFunction0(9,_c117))("valuePrimitive",!0)("value",null==ctx.currentFilter?null:ctx.currentFilter.value))},directives:[fesm2015_FilterCellWrapperComponent,fesm2015_DropDownListComponent,dist_fesm2015_FilterInputDirective],encapsulation:2}),BooleanFilterCellComponent})();const dateOperators=localizeOperators$1({filterEqOperator:"eq",filterNotEqOperator:"neq",filterAfterOrEqualOperator:"gte",filterAfterOperator:"gt",filterBeforeOrEqualOperator:"lte",filterBeforeOperator:"lt",filterIsNullOperator:"isnull",filterIsNotNullOperator:"isnotnull"});let fesm2015_DateFilterComponent=(()=>{class DateFilterComponent extends fesm2015_BaseFilterCellComponent{constructor(filterService,localization){super(filterService),this.localization=localization,this.operator="gte",this.activeView="month",this.bottomView="month",this.topView="century",this.weekNumber=!1,this.defaultOperators=dateOperators(this.localization)}get currentFilter(){return this.filterByField(this.column.field)}set format(value){this._format=value}get format(){return fesm2015_isNullOrEmptyString(this._format)?this.columnFormat:this._format}get columnFormat(){return this.column&&!fesm2015_isNullOrEmptyString(this.column.format)?extractFormat(this.column.format):"d"}get currentOperator(){return this.currentFilter?this.currentFilter.operator:this.operator}ngOnInit(){this.subscription=this.localization.changes.subscribe(this.localizationChange.bind(this))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),super.ngOnDestroy()}localizationChange(){this.defaultOperators=dateOperators(this.localization),this.operatorList.length&&(this.operators=toJSON(this.operatorList.toArray()))}}return DateFilterComponent.fac=function(t){invalidFactory()},DateFilterComponent.dir=defineDirective({type:DateFilterComponent,inputs:{operator:"operator",activeView:"activeView",bottomView:"bottomView",topView:"topView",weekNumber:"weekNumber",format:"format",column:"column",filter:"filter",min:"min",max:"max",formatPlaceholder:"formatPlaceholder",placeholder:"placeholder"},features:[InheritDefinitionFeature]}),DateFilterComponent})(),fesm2015_DateFilterCellComponent=(()=>{class DateFilterCellComponent extends fesm2015_DateFilterComponent{constructor(filterService,localization){super(filterService,localization),this.localization=localization,this.showOperators=!0}}return DateFilterCellComponent.fac=function(t){return new(t||DateFilterCellComponent)(directiveInject(fesm2015_FilterService),directiveInject(fesm2015_LocalizationService))},DateFilterCellComponent.cmp=defineComponent({type:DateFilterCellComponent,selectors:[["kendo-grid-date-filter-cell"]],inputs:{showOperators:"showOperators"},features:[InheritDefinitionFeature],decls:2,vars:15,consts:[[3,"column","filter","operators","defaultOperator","showOperators"],["kendoFilterInput","",3,"value","format","formatPlaceholder","placeholder","activeView","bottomView","topView","min","max","weekNumber"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-grid-filter-wrapper-cell",0),element(1,"kendo-datepicker",1),elementEnd()),2&rf&&(property("column",ctx.column)("filter",ctx.filter)("operators",ctx.operators)("defaultOperator",ctx.operator)("showOperators",ctx.showOperators),advance(1),property("value",null==ctx.currentFilter?null:ctx.currentFilter.value)("format",ctx.format)("formatPlaceholder",ctx.formatPlaceholder)("placeholder",ctx.placeholder)("activeView",ctx.activeView)("bottomView",ctx.bottomView)("topView",ctx.topView)("min",ctx.min)("max",ctx.max)("weekNumber",ctx.weekNumber))},directives:[fesm2015_FilterCellWrapperComponent,fesm2015_DatePickerComponent,dist_fesm2015_FilterInputDirective],encapsulation:2}),DateFilterCellComponent})(),fesm2015_ColGroupComponent=(()=>{class ColGroupComponent{constructor(){this.columns=[],this.groups=[]}get columnsToRender(){return columnsToRender(this.columns)}trackBy(index,_item){return index}}return ColGroupComponent.fac=function(t){return new(t||ColGroupComponent)},ColGroupComponent.cmp=defineComponent({type:ColGroupComponent,selectors:[["","kendoGridColGroup",""]],inputs:{columns:"columns",groups:"groups",detailTemplate:"detailTemplate"},attrs:_c119,decls:1,vars:1,consts:[[3,"ngIf"],[3,"k-group-col",4,"ngFor","ngForOf"],[3,"k-hierarchy-col",4,"ngIf"],[3,"width",4,"ngFor","ngForOf","ngForTrackBy"]],template:function(rf,ctx){1&rf&&template(0,ColGroupComponent_ng_template_0_Template,3,4,"ng-template",0),2&rf&&property("ngIf",!0)},directives:[common_NgIf,common_NgForOf],encapsulation:2}),ColGroupComponent})(),fesm2015_LoadingComponent=(()=>{class LoadingComponent{constructor(localization){this.localization=localization,this.hostClass=!0}get loadingText(){return this.localization.get("loading")}}return LoadingComponent.fac=function(t){return new(t||LoadingComponent)(directiveInject(fesm2015_LocalizationService))},LoadingComponent.cmp=defineComponent({type:LoadingComponent,selectors:[["","kendoGridLoading",""]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-loading-mask",ctx.hostClass)},attrs:_c120,decls:4,vars:1,consts:[[1,"k-loading-text"],[1,"k-loading-image"],[1,"k-loading-color"]],template:function(rf,ctx){1&rf&&(elementStart(0,"span",0),text(1),elementEnd(),element(2,"div",1),element(3,"div",2)),2&rf&&(advance(1),textInterpolate(ctx.loadingText))},encapsulation:2}),LoadingComponent})(),fesm2015_ResizableContainerDirective=(()=>{class ResizableContainerDirective{constructor(el,renderer,resizeService,grid){this.el=el,this.renderer=renderer,this.resizeService=resizeService,this.grid=grid,this.enabled=!1}set lockedWidth(value){this._lockedWidth=value,this.enabled&&(this.attachResize(),this.resize())}set kendoGridResizableContainer(enabled){const refresh=enabled!==this.enabled;this.enabled=enabled,refresh&&(this.attachResize(),this.resize())}ngOnDestroy(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}attachResize(){this.resizeSubscription&&!this.enabled&&(this.resizeSubscription.unsubscribe(),this.resizeSubscription=null),!this.resizeSubscription&&this.enabled&&(this.resizeSubscription=this.resizeService.changes.subscribe(this.resize.bind(this)))}resize(){if(this.grid&&this.grid.wrapper){const width=Math.max(this.grid.wrapper.nativeElement.clientWidth-this._lockedWidth,0);this.renderer.setStyle(this.el.nativeElement,"width",this.enabled&&width>0?width+"px":"")}}}return ResizableContainerDirective.fac=function(t){return new(t||ResizableContainerDirective)(directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(_ivy_ngcc_dist_fesm2015_ResizeService),directiveInject(fesm2015_GridComponent,8))},ResizableContainerDirective.dir=defineDirective({type:ResizableContainerDirective,selectors:[["","kendoGridResizableContainer",""]],inputs:{lockedWidth:"lockedWidth",kendoGridResizableContainer:"kendoGridResizableContainer"}}),ResizableContainerDirective})(),_ivy_ngcc_dist_fesm2015_TemplateContextDirective=(()=>{class TemplateContextDirective{constructor(viewContainerRef){this.viewContainerRef=viewContainerRef}set templateContext(context){this.removeView(),context.templateRef&&(this.insertedViewRef=this.viewContainerRef.createEmbeddedView(context.templateRef,context))}ngOnDestroy(){this.removeView()}removeView(){this.insertedViewRef&&(this.viewContainerRef.remove(this.viewContainerRef.indexOf(this.insertedViewRef)),this.insertedViewRef=void 0)}}return TemplateContextDirective.fac=function(t){return new(t||TemplateContextDirective)(directiveInject(ViewContainerRef))},TemplateContextDirective.dir=defineDirective({type:TemplateContextDirective,selectors:[["","templateContext",""]],inputs:{templateContext:"templateContext"}}),TemplateContextDirective})(),fesm2015_FocusGroup=(()=>{class FocusGroup{constructor(root){this.root=root,this.active=!0,this.children=[],this.root.registerGroup(this)}get focusableChildren(){return this.children.filter(el=>el.canFocus())}get isActive(){return this.active}ngOnDestroy(){this.root.unregisterGroup(this)}registerElement(element){this.unregisterElement(element),this.children.push(element)}unregisterElement(element){this.children=this.children.filter(f=>f!==element)}isNavigable(){const focusable=this.focusableChildren;return 1===focusable.length&&focusable[0].isNavigable()}canFocus(){return this.focusableChildren.length>0}focus(){this.canFocus()&&!this.hasFocus()&&this.focusableChildren[0].focus()}activate(){this.toggleState(!0)}deactivate(){this.toggleState(!1)}hasFocus(){return this.children.reduce((focused,element)=>focused||element.hasFocus(),!1)}toggleState(active){this.active!==active&&(this.active=active,this.children.forEach(f=>f.toggle(active)))}}return FocusGroup.fac=function(t){return new(t||FocusGroup)(inject(fesm2015_FocusRoot))},FocusGroup.prov=defineInjectable({token:FocusGroup,factory:FocusGroup.fac}),FocusGroup})(),fesm2015_id=0,fesm2015_LogicalCellDirective=(()=>{class LogicalCellDirective{constructor(focusGroup,element,columnInfoService,idService,navigationService,renderer,zone,cellContext){this.focusGroup=focusGroup,this.element=element,this.columnInfoService=columnInfoService,this.idService=idService,this.navigationService=navigationService,this.renderer=renderer,this.zone=zone,this.cellContext=cellContext,this.logicalSlaveCell=!1,this.colSpan=1,this.rowSpan=1,this.dataRowIndex=-1,this.detailExpandCell=!1,this.uid=fesm2015_id++}get id(){if(!this.logicalSlaveCell&&this.columnInfoService.isLocked)return this.idService.cellId(this.logicalRowIndex,this.logicalColIndex)}get ariaColIndex(){if(!this.logicalSlaveCell&&-1!==this.logicalColIndex)return this.logicalColIndex+1}ngOnInit(){this.navigationService.enabled&&(this.navigationChange=this.navigationService.changes.subscribe(e=>this.onNavigationChange(e)))}ngDoCheck(){this.navigationService.enabled&&-1!==this.logicalColIndex&&(this.cellContext&&(this.cellContext.focusGroup=this.focusGroup),this.registerNoChanges())}ngOnChanges(changes){if(!this.navigationService.enabled)return;const keys=Object.keys(changes);if(1===keys.length&&"groupItem"===keys[0]||-1===this.logicalColIndex)return;const indexChange=changes.logicalColIndex,rowIndexChange=changes.logicalRowIndex,index=indexChange&&!indexChange.isFirstChange()?indexChange.previousValue:this.logicalColIndex,rowIndex=rowIndexChange&&!rowIndexChange.isFirstChange()?rowIndexChange.previousValue:this.logicalRowIndex;this.navigationService.unregisterCell(index,rowIndex,this),this.registerChanges(),this.updateElement()}ngOnDestroy(){this.navigationChange&&this.navigationChange.unsubscribe(),this.navigationService.unregisterCell(this.logicalColIndex,this.logicalRowIndex,this)}onNavigationChange(e){(this.logicalColIndex===e.colIndex&&this.logicalRowIndex===e.rowIndex||this.logicalColIndex===e.prevColIndex&&this.logicalRowIndex===e.prevRowIndex)&&this.updateElement()}updateElement(){const el=this.element.nativeElement;this.renderer.setAttribute(el,"tabIndex",this.isFocusable()&&!this.logicalSlaveCell?"0":"-1"),this.isFocused()?this.focusGroup.isNavigable()?this.focusGroup.focus():(!this.logicalSlaveCell&&this.navigationService.autoFocusCell(this.logicalColIndex,this.logicalColIndex+this.colSpan-1)&&this.microtask(()=>this.isFocused()&&el.focus()),this.renderer.addClass(el,"k-state-focused")):this.renderer.removeClass(el,"k-state-focused")}microtask(callback){this.zone.runOutsideAngular(()=>Promise.resolve(null).then(callback))}registerChanges(){this.logicalSlaveCell||this.navigationService.registerCell(this)}registerNoChanges(){this.logicalSlaveCell||this.navigationService.registerCellOnCurrentRow(this)}isFocusable(){return this.navigationService.isCellFocusable(this)}isFocused(){return this.navigationService.isCellFocused(this)}}return LogicalCellDirective.fac=function(t){return new(t||LogicalCellDirective)(directiveInject(fesm2015_FocusGroup),directiveInject(ElementRef),directiveInject(fesm2015_ColumnInfoService),directiveInject(fesm2015_IdService),directiveInject(kendo_angular_grid_ivy_ngcc_dist_fesm2015_NavigationService),directiveInject(Renderer2),directiveInject(NgZone),directiveInject(CELL_CONTEXT,8))},LogicalCellDirective.dir=defineDirective({type:LogicalCellDirective,selectors:[["","kendoGridLogicalCell",""]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&attribute("id",ctx.id)("aria-colindex",ctx.ariaColIndex)},inputs:{logicalSlaveCell:"logicalSlaveCell",colSpan:"colSpan",rowSpan:"rowSpan",dataRowIndex:"dataRowIndex",detailExpandCell:"detailExpandCell",logicalColIndex:"logicalColIndex",logicalRowIndex:"logicalRowIndex",colIndex:"colIndex",groupItem:"groupItem",dataItem:"dataItem"},features:[ProvidersFeature([{provide:fesm2015_FocusGroup,deps:[fesm2015_FocusRoot],useClass:fesm2015_FocusGroup}]),NgOnChangesFeature]}),LogicalCellDirective})(),id$1=0,fesm2015_LogicalRowDirective=(()=>{class LogicalRowDirective{constructor(idService,navigation){this.idService=idService,this.navigation=navigation,this.logicalSlaveRow=!1,this.logicalSlaveCellsCount=0,this.dataRowIndex=-1,this.uid=id$1++}get hostRole(){return this.logicalSlaveRow?"presentation":"row"}get ariaRowIndex(){if(this.navigation.enabled)return this.logicalRowIndex+1}get ariaOwns(){if(!this.navigation.enabled||this.logicalSlaveRow||0===this.logicalSlaveCellsCount)return;const ids=[],total=this.logicalCellsCount+this.logicalSlaveCellsCount;for(let cellIndex=this.logicalCellsCount;cellIndex<total;cellIndex++)ids.push(this.idService.cellId(this.logicalRowIndex,cellIndex));return ids.join(" ")}ngOnChanges(changes){if(!this.navigation.enabled||this.logicalSlaveRow)return;const indexChange=changes.logicalRowIndex;if(indexChange||changes.logicalSlaveRow){const index=indexChange&&!indexChange.isFirstChange()?indexChange.previousValue:this.logicalRowIndex;this.navigation.unregisterRow(index,this),this.navigation.registerRow(this)}else anyChanged(["dataRowIndex","dataItem"],changes)&&this.navigation.updateRow(this)}ngOnDestroy(){this.navigation.unregisterRow(this.logicalRowIndex,this)}}return LogicalRowDirective.fac=function(t){return new(t||LogicalRowDirective)(directiveInject(fesm2015_IdService),directiveInject(kendo_angular_grid_ivy_ngcc_dist_fesm2015_NavigationService))},LogicalRowDirective.dir=defineDirective({type:LogicalRowDirective,selectors:[["","kendoGridLogicalRow",""]],hostVars:3,hostBindings:function(rf,ctx){2&rf&&attribute("role",ctx.hostRole)("aria-rowindex",ctx.ariaRowIndex)("aria-owns",ctx.ariaOwns)},inputs:{logicalSlaveRow:"logicalSlaveRow",logicalSlaveCellsCount:"logicalSlaveCellsCount",dataRowIndex:"dataRowIndex",logicalRowIndex:"logicalRowIndex",logicalCellsCount:"logicalCellsCount",dataItem:"dataItem"},features:[NgOnChangesFeature]}),LogicalRowDirective})();const FORMAT_REGEX=/\{\d+:?/;let fesm2015_FieldAccessorPipe=(()=>{class FieldAccessorPipe{constructor(intlService){this.intlService=intlService}transform(dataItem,fieldName,format){if(!fesm2015_isNullOrEmptyString(fieldName)){const value=function(field){if(getter_getterCache[field])return getter_getterCache[field];const fields=function(field){const fields=[];return field.replace(field_list_FIELD_REGEX,(function(_match,index,indexAccessor,fieldName){fields.push(void 0!==index?index:indexAccessor||fieldName)})),fields}(field);return getter_getterCache[field]=function(obj){let result=obj;for(let idx=0;idx<fields.length&&result;idx++)result=result[fields[idx]];return result},getter_getterCache[field]}(fieldName)(dataItem);return fesm2015_isNullOrEmptyString(format)?value:this.formatValue(format,value)}return dataItem}formatValue(format,value){const intl=this.intlService;return fesm2015_isString(format)&&format.match(FORMAT_REGEX)?intl.format(format,value):intl.toString(value,format)}}return FieldAccessorPipe.fac=function(t){return new(t||FieldAccessorPipe)(directiveInject(fesm2015_IntlService))},FieldAccessorPipe.pipe=definePipe({name:"valueOf",type:FieldAccessorPipe,pure:!1}),FieldAccessorPipe})();const columnsToResize=({columns:columns})=>Math.max(1,(columns=>columns.filter(column=>fesm2015_isTruthy(column.resizable)&&column.isVisible))(columns).length),fesm2015_row=selector=>element=>element.querySelector(selector),cell=(index,selector="td")=>element=>element.querySelectorAll(selector+":not(.k-group-cell):not(.k-hierarchy-cell)")[index],offsetWidth=element=>element.offsetWidth,fesm2015_pipe=(...fns)=>data=>fns.reduce((state$$1,fn)=>state$$1?fn(state$$1):0,data);let fesm2015_TableDirective=(()=>{class TableDirective{constructor(element,renderer,service,zone,cdr){this.element=element,this.renderer=renderer,this.service=service,this.zone=zone,this.cdr=cdr,this.locked=!1,this.firstResize=!1}get minWidth(){return this.firstResize?0:null}ngOnInit(){const obs=this.service.changes.pipe(filter_filter(e=>this.locked===e.locked));this.subscription=obs.pipe(filter_filter(e=>"start"===e.type),tap(this.initState.bind(this)),map_map(columnsToResize),switchMap(take$$1=>obs.pipe(filter_filter(e=>"resizeTable"===e.type),map_map(e=>e.delta),function(bufferSize,startBufferEvery=null){return function(source){return source.lift(new BufferCountOperator(bufferSize,startBufferEvery))}}(take$$1)))).subscribe(this.resize.bind(this)),this.autoFitSubscription=this.service.registerTable({autoFit:this.autoFitObservable.bind(this),locked:this.locked})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.autoFitSubscription&&(this.autoFitSubscription(),this.autoFitSubscription=null)}initState(){this.firstResize=!0,this.virtualColumns&&!this.locked||(this.originalWidth=offsetWidth(this.element.nativeElement))}resize(deltas){if(!this.virtualColumns||this.locked){const delta=deltas.reduce((sum,item)=>sum+item,0);this.renderer.setStyle(this.element.nativeElement,"width",this.originalWidth+delta+"px")}this.cdr.detectChanges()}autoFitObservable(columnInfo){return Observable_Observable.create(observer=>{this.zone.runOutsideAngular(()=>{this.renderer.addClass(this.element.nativeElement,"k-autofitting"),this.cdr.detectChanges();const widths=columnInfo.map(this.measureColumn.bind(this));this.renderer.removeClass(this.element.nativeElement,"k-autofitting"),observer.next(widths)})})}measureColumn(info){const dom=this.element.nativeElement,header=fesm2015_pipe((index=info.level,element=>element.querySelectorAll("thead>tr")[index]),cell(info.headerIndex,"th"),offsetWidth)(dom);var index;let data=0;(!info.isParentSpan||info.isParentSpan&&info.isLastInSpan)&&(data=fesm2015_pipe(fesm2015_row("tbody>tr:not(.k-grouping-row):not(.k-grid-norecords)"),cell(info.index),offsetWidth)(dom));const footer=fesm2015_pipe(fesm2015_row("tfoot>tr"),cell(info.index),offsetWidth)(dom);return Math.max(header,data,footer)}}return TableDirective.fac=function(t){return new(t||TableDirective)(directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_ColumnResizingService),directiveInject(NgZone),directiveInject(ChangeDetectorRef))},TableDirective.dir=defineDirective({type:TableDirective,selectors:[["table"]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&styleProp("min-width",ctx.minWidth)},inputs:{locked:"locked",virtualColumns:"virtualColumns"}}),TableDirective})(),dist_fesm2015_SharedModule=(()=>{class SharedModule{static exports(){return[dist_fesm2015_ColumnComponent,fesm2015_SpanColumnComponent,dist_fesm2015_ColumnGroupComponent,_ivy_ngcc_dist_fesm2015_FooterTemplateDirective,fesm2015_DetailTemplateDirective,dist_fesm2015_FocusableDirective]}}return SharedModule.mod=defineNgModule({type:SharedModule}),SharedModule.inj=defineInjector({factory:function(t){return new(t||SharedModule)},imports:[[common_CommonModule],fesm2015_DraggableModule,fesm2015_EventsModule]}),SharedModule})();const FILTER_OPERATORS=[fesm2015_FilterCellOperatorsComponent,(()=>{class ContainsFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("contains",localization)}}return ContainsFilterOperatorComponent.fac=function(t){return new(t||ContainsFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},ContainsFilterOperatorComponent.cmp=defineComponent({type:ContainsFilterOperatorComponent,selectors:[["kendo-filter-contains-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>ContainsFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),ContainsFilterOperatorComponent})(),(()=>{class DoesNotContainFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("doesnotcontain",localization)}}return DoesNotContainFilterOperatorComponent.fac=function(t){return new(t||DoesNotContainFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},DoesNotContainFilterOperatorComponent.cmp=defineComponent({type:DoesNotContainFilterOperatorComponent,selectors:[["kendo-filter-not-contains-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>DoesNotContainFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),DoesNotContainFilterOperatorComponent})(),(()=>{class EndsWithFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("endswith",localization)}}return EndsWithFilterOperatorComponent.fac=function(t){return new(t||EndsWithFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},EndsWithFilterOperatorComponent.cmp=defineComponent({type:EndsWithFilterOperatorComponent,selectors:[["kendo-filter-endswith-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>EndsWithFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),EndsWithFilterOperatorComponent})(),(()=>{class EqualFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("eq",localization)}}return EqualFilterOperatorComponent.fac=function(t){return new(t||EqualFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},EqualFilterOperatorComponent.cmp=defineComponent({type:EqualFilterOperatorComponent,selectors:[["kendo-filter-eq-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>EqualFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),EqualFilterOperatorComponent})(),(()=>{class IsEmptyFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("isempty",localization)}}return IsEmptyFilterOperatorComponent.fac=function(t){return new(t||IsEmptyFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},IsEmptyFilterOperatorComponent.cmp=defineComponent({type:IsEmptyFilterOperatorComponent,selectors:[["kendo-filter-isempty-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>IsEmptyFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),IsEmptyFilterOperatorComponent})(),(()=>{class IsNotEmptyFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("isnotempty",localization)}}return IsNotEmptyFilterOperatorComponent.fac=function(t){return new(t||IsNotEmptyFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},IsNotEmptyFilterOperatorComponent.cmp=defineComponent({type:IsNotEmptyFilterOperatorComponent,selectors:[["kendo-filter-isnotempty-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>IsNotEmptyFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),IsNotEmptyFilterOperatorComponent})(),(()=>{class IsNotNullFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("isnotnull",localization)}}return IsNotNullFilterOperatorComponent.fac=function(t){return new(t||IsNotNullFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},IsNotNullFilterOperatorComponent.cmp=defineComponent({type:IsNotNullFilterOperatorComponent,selectors:[["kendo-filter-isnotnull-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>IsNotNullFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),IsNotNullFilterOperatorComponent})(),(()=>{class IsNullFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("isnull",localization)}}return IsNullFilterOperatorComponent.fac=function(t){return new(t||IsNullFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},IsNullFilterOperatorComponent.cmp=defineComponent({type:IsNullFilterOperatorComponent,selectors:[["kendo-filter-isnull-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>IsNullFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),IsNullFilterOperatorComponent})(),(()=>{class NotEqualFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("neq",localization)}}return NotEqualFilterOperatorComponent.fac=function(t){return new(t||NotEqualFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},NotEqualFilterOperatorComponent.cmp=defineComponent({type:NotEqualFilterOperatorComponent,selectors:[["kendo-filter-neq-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>NotEqualFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),NotEqualFilterOperatorComponent})(),(()=>{class StartsWithFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("startswith",localization)}}return StartsWithFilterOperatorComponent.fac=function(t){return new(t||StartsWithFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},StartsWithFilterOperatorComponent.cmp=defineComponent({type:StartsWithFilterOperatorComponent,selectors:[["kendo-filter-startswith-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>StartsWithFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),StartsWithFilterOperatorComponent})(),(()=>{class GreaterFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("gt",localization)}}return GreaterFilterOperatorComponent.fac=function(t){return new(t||GreaterFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},GreaterFilterOperatorComponent.cmp=defineComponent({type:GreaterFilterOperatorComponent,selectors:[["kendo-filter-gt-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>GreaterFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),GreaterFilterOperatorComponent})(),(()=>{class GreaterOrEqualToFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("gte",localization)}}return GreaterOrEqualToFilterOperatorComponent.fac=function(t){return new(t||GreaterOrEqualToFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},GreaterOrEqualToFilterOperatorComponent.cmp=defineComponent({type:GreaterOrEqualToFilterOperatorComponent,selectors:[["kendo-filter-gte-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>GreaterOrEqualToFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),GreaterOrEqualToFilterOperatorComponent})(),(()=>{class LessFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("lt",localization)}}return LessFilterOperatorComponent.fac=function(t){return new(t||LessFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},LessFilterOperatorComponent.cmp=defineComponent({type:LessFilterOperatorComponent,selectors:[["kendo-filter-lt-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>LessFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),LessFilterOperatorComponent})(),(()=>{class LessOrEqualToFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("lte",localization)}}return LessOrEqualToFilterOperatorComponent.fac=function(t){return new(t||LessOrEqualToFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},LessOrEqualToFilterOperatorComponent.cmp=defineComponent({type:LessOrEqualToFilterOperatorComponent,selectors:[["kendo-filter-lte-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>LessOrEqualToFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),LessOrEqualToFilterOperatorComponent})(),(()=>{class AfterFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("after",localization)}toJSON(){return{text:this.text,value:"gt"}}}return AfterFilterOperatorComponent.fac=function(t){return new(t||AfterFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},AfterFilterOperatorComponent.cmp=defineComponent({type:AfterFilterOperatorComponent,selectors:[["kendo-filter-after-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>AfterFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),AfterFilterOperatorComponent})(),(()=>{class AfterEqFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("after-eq",localization)}toJSON(){return{text:this.text,value:"gte"}}}return AfterEqFilterOperatorComponent.fac=function(t){return new(t||AfterEqFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},AfterEqFilterOperatorComponent.cmp=defineComponent({type:AfterEqFilterOperatorComponent,selectors:[["kendo-filter-after-eq-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>AfterEqFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),AfterEqFilterOperatorComponent})(),(()=>{class BeforeEqFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("before-eq",localization)}toJSON(){return{text:this.text,value:"lte"}}}return BeforeEqFilterOperatorComponent.fac=function(t){return new(t||BeforeEqFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},BeforeEqFilterOperatorComponent.cmp=defineComponent({type:BeforeEqFilterOperatorComponent,selectors:[["kendo-filter-before-eq-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>BeforeEqFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),BeforeEqFilterOperatorComponent})(),(()=>{class BeforeFilterOperatorComponent extends fesm2015_FilterOperatorBase{constructor(localization){super("before",localization)}toJSON(){return{text:this.text,value:"lt"}}}return BeforeFilterOperatorComponent.fac=function(t){return new(t||BeforeFilterOperatorComponent)(directiveInject(fesm2015_LocalizationService))},BeforeFilterOperatorComponent.cmp=defineComponent({type:BeforeFilterOperatorComponent,selectors:[["kendo-filter-before-operator"]],features:[ProvidersFeature([{provide:fesm2015_FilterOperatorBase,useExisting:forwardRef(()=>BeforeFilterOperatorComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),BeforeFilterOperatorComponent})()],importedModules=[common_CommonModule,forms_ReactiveFormsModule,forms_FormsModule,fesm2015_DropDownListModule,fesm2015_AutoCompleteModule,fesm2015_InputsModule,fesm2015_DatePickerModule,fesm2015_PopupModule,dist_fesm2015_SharedModule];let fesm2015_SharedFilterModule=(()=>{class SharedFilterModule{static exports(){return[...FILTER_OPERATORS]}}return SharedFilterModule.mod=defineNgModule({type:SharedFilterModule}),SharedFilterModule.inj=defineInjector({factory:function(t){return new(t||SharedFilterModule)},imports:[[...importedModules],common_CommonModule,forms_ReactiveFormsModule,forms_FormsModule,fesm2015_DropDownListModule,fesm2015_AutoCompleteModule,fesm2015_InputsModule,fesm2015_DatePickerModule,fesm2015_PopupModule,dist_fesm2015_SharedModule]}),SharedFilterModule})(),fesm2015_FilterHostDirective=(()=>{class FilterHostDirective{constructor(host,resolver){this.host=host,this.resolver=resolver}ngOnInit(){this.component=this.host.createComponent(this.resolver.resolveComponentFactory(this.componentType())),this.initComponent({column:this.column,filter:this.filter})}ngOnDestroy(){this.component&&(this.component.destroy(),this.component=null)}ngOnChanges(changes){anyChanged(["column","filter"],changes)&&this.initComponent({column:this.column,filter:this.filter})}initComponent({column:column,filter:filter$$1}){const instance=this.component.instance;instance.column=column,instance.filter=filter$$1}}return FilterHostDirective.fac=function(t){invalidFactory()},FilterHostDirective.dir=defineDirective({type:FilterHostDirective,inputs:{column:"column",filter:"filter"},features:[NgOnChangesFeature]}),FilterHostDirective})(),fesm2015_FilterCellHostDirective=(()=>{class FilterCellHostDirective extends fesm2015_FilterHostDirective{constructor(host,resolver){super(host,resolver)}componentType(){return fesm2015_isNullOrEmptyString(this.column.filter)?fesm2015_StringFilterCellComponent:{boolean:fesm2015_BooleanFilterCellComponent,date:fesm2015_DateFilterCellComponent,numeric:fesm2015_NumericFilterCellComponent,text:fesm2015_StringFilterCellComponent}[this.column.filter]}}return FilterCellHostDirective.fac=function(t){return new(t||FilterCellHostDirective)(directiveInject(ViewContainerRef),directiveInject(ComponentFactoryResolver))},FilterCellHostDirective.dir=defineDirective({type:FilterCellHostDirective,selectors:[["","kendoFilterCellHost",""]],features:[InheritDefinitionFeature]}),FilterCellHostDirective})(),fesm2015_RowFilterModule=(()=>{class RowFilterModule{static exports(){return[fesm2015_FilterRowComponent,fesm2015_FilterCellComponent,fesm2015_FilterCellTemplateDirective,fesm2015_FilterCellOperatorsComponent,fesm2015_StringFilterCellComponent,fesm2015_NumericFilterCellComponent,fesm2015_AutoCompleteFilterCellComponent,fesm2015_BooleanFilterCellComponent,fesm2015_DateFilterCellComponent,fesm2015_SharedFilterModule.exports()]}}return RowFilterModule.mod=defineNgModule({type:RowFilterModule}),RowFilterModule.inj=defineInjector({factory:function(t){return new(t||RowFilterModule)},imports:[[fesm2015_SharedFilterModule],fesm2015_SharedFilterModule]}),RowFilterModule})();const dist_fesm2015_normalize=settings=>(({buttonCount:buttonCount=10,info:info=!0,type:type="numeric",pageSizes:pageSizes=!1,previousNext:previousNext=!0})=>({buttonCount:buttonCount,info:info,pageSizes:!0===pageSizes?[5,10,20]:pageSizes,previousNext:previousNext,type:type}))(!0===settings?{}:settings);let fesm2015_PagerComponent=(()=>{class PagerComponent{constructor(pagerContext){this.pagerContext=pagerContext,this.total=0,this.skip=1,this.pageChange=new core_EventEmitter,this.settings=dist_fesm2015_normalize({}),this._templateContext={}}set options(value){this.settings=dist_fesm2015_normalize(value)}get pagerWrapClass(){return!0}get gridPagerClass(){return!0}get widgetClass(){return!0}get totalPages(){return Math.ceil((this.total||0)/this.pageSize)}get currentPage(){return Math.floor((this.skip||0)/this.pageSize)+1}get templateContext(){const context=this._templateContext;return context.totalPages=this.totalPages,context.total=this.total,context.skip=this.skip,context.pageSize=this.pageSize,context.currentPage=this.currentPage,context}ngOnInit(){this.pageChangeSubscription=this.pagerContext.pageChange.subscribe(this.changePage.bind(this))}ngOnChanges(changes){anyChanged(["pageSize","skip","total"],changes,!1)&&this.pagerContext.notifyChanges({pageSize:this.pageSize,skip:this.skip,total:this.total})}ngOnDestroy(){this.pageChangeSubscription&&this.pageChangeSubscription.unsubscribe()}changePage(event){this.pageChange.emit(event)}}return PagerComponent.fac=function(t){return new(t||PagerComponent)(directiveInject(fesm2015_PagerContextService))},PagerComponent.cmp=defineComponent({type:PagerComponent,selectors:[["kendo-pager"]],hostVars:6,hostBindings:function(rf,ctx){2&rf&&classProp("k-pager-wrap",ctx.pagerWrapClass)("k-grid-pager",ctx.gridPagerClass)("k-widget",ctx.widgetClass)},inputs:{total:"total",skip:"skip",options:"options",pageSize:"pageSize",template:"template"},outputs:{pageChange:"pageChange"},features:[NgOnChangesFeature],decls:2,vars:2,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"buttonCount",4,"ngIf"],[3,"pageSizes",4,"ngIf"],[3,"buttonCount"],[3,"pageSizes"]],template:function(rf,ctx){1&rf&&(template(0,PagerComponent_ng_container_0_Template,1,2,"ng-container",0),template(1,PagerComponent_ng_container_1_Template,7,6,"ng-container",1)),2&rf&&(property("ngIf",null==ctx.template?null:ctx.template.templateRef),advance(1),property("ngIf",!(null!=ctx.template&&ctx.template.templateRef)))},directives:function(){return[common_NgIf,common_NgTemplateOutlet,fesm2015_PagerPrevButtonsComponent,fesm2015_PagerNumericButtonsComponent,fesm2015_PagerInputComponent,fesm2015_PagerNextButtonsComponent,fesm2015_PagerInfoComponent,fesm2015_PagerPageSizesComponent]},encapsulation:2}),PagerComponent})(),fesm2015_PagerElementComponent=(()=>{class PagerElementComponent{constructor(localization,pagerContext,cd){this.localization=localization,this.pagerContext=pagerContext,this.cd=cd,this.total=this.pagerContext.total,this.skip=this.pagerContext.skip,this.pageSize=this.pagerContext.pageSize}get currentPage(){return Math.floor((this.skip||0)/this.pageSize)+1}get totalPages(){return Math.ceil((this.total||0)/this.pageSize)}textFor(key){return this.localization.get(key)}changePage(page){return this.pagerContext.changePage(page),!1}ngOnInit(){this.subscriptions=this.pagerContext.changes.subscribe(this.onChanges.bind(this)),this.subscriptions.add(this.localization.changes.subscribe(()=>this.cd.markForCheck()))}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}}return PagerElementComponent.fac=function(t){invalidFactory()},PagerElementComponent.dir=defineDirective({type:PagerElementComponent}),PagerElementComponent})(),fesm2015_PagerPrevButtonsComponent=(()=>{class PagerPrevButtonsComponent extends fesm2015_PagerElementComponent{constructor(localization,pagerContext,cd){super(localization,pagerContext,cd)}get disabled(){return 1===this.currentPage||!this.total}onChanges({total:total,skip:skip,pageSize:pageSize}){this.total=total,this.skip=skip,this.pageSize=pageSize,this.cd.markForCheck()}}return PagerPrevButtonsComponent.fac=function(t){return new(t||PagerPrevButtonsComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_PagerContextService),directiveInject(ChangeDetectorRef))},PagerPrevButtonsComponent.cmp=defineComponent({type:PagerPrevButtonsComponent,selectors:[["kendo-pager-prev-buttons"]],features:[InheritDefinitionFeature],decls:4,vars:14,consts:[["href","#","tabindex","-1",3,"title","ngClass","click"],[3,"ngClass"]],template:function(rf,ctx){1&rf&&(elementStart(0,"a",0),listener("click",(function(){return 1!==ctx.currentPage&&ctx.changePage(0)})),element(1,"span",1),elementEnd(),elementStart(2,"a",0),listener("click",(function(){return 1!==ctx.currentPage&&ctx.changePage(ctx.currentPage-2)})),element(3,"span",1),elementEnd()),2&rf&&(property("title",ctx.textFor("pagerFirstPage"))("ngClass",pureFunction1(8,_c121,ctx.disabled)),advance(1),property("ngClass",pureFunction0(10,_c122)),attribute("aria-label",ctx.textFor("pagerFirstPage")),advance(1),property("title",ctx.textFor("pagerPreviousPage"))("ngClass",pureFunction1(11,_c123,ctx.disabled)),advance(1),property("ngClass",pureFunction0(13,_c124)),attribute("aria-label",ctx.textFor("pagerPreviousPage")))},directives:[common_NgClass],encapsulation:2,changeDetection:0}),PagerPrevButtonsComponent})(),fesm2015_PagerNextButtonsComponent=(()=>{class PagerNextButtonsComponent extends fesm2015_PagerElementComponent{constructor(localization,pagerContext,cd){super(localization,pagerContext,cd)}get disabled(){return this.currentPage===this.totalPages||!this.total}onChanges({total:total,skip:skip,pageSize:pageSize}){this.total=total,this.skip=skip,this.pageSize=pageSize,this.cd.markForCheck()}}return PagerNextButtonsComponent.fac=function(t){return new(t||PagerNextButtonsComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_PagerContextService),directiveInject(ChangeDetectorRef))},PagerNextButtonsComponent.cmp=defineComponent({type:PagerNextButtonsComponent,selectors:[["kendo-pager-next-buttons"]],features:[InheritDefinitionFeature],decls:4,vars:14,consts:[["href","#","tabindex","-1",3,"title","ngClass","click"],[3,"ngClass"]],template:function(rf,ctx){1&rf&&(elementStart(0,"a",0),listener("click",(function(){return ctx.currentPage!==ctx.totalPages&&ctx.changePage(ctx.currentPage)})),element(1,"span",1),elementEnd(),elementStart(2,"a",0),listener("click",(function(){return ctx.currentPage!==ctx.totalPages&&ctx.changePage(ctx.totalPages-1)})),element(3,"span",1),elementEnd()),2&rf&&(property("title",ctx.textFor("pagerNextPage"))("ngClass",pureFunction1(8,_c123,ctx.disabled)),advance(1),property("ngClass",pureFunction0(10,_c125)),attribute("aria-label",ctx.textFor("pagerNextPage")),advance(1),property("title",ctx.textFor("pagerLastPage"))("ngClass",pureFunction1(11,_c126,ctx.disabled)),advance(1),property("ngClass",pureFunction0(13,_c127)),attribute("aria-label",ctx.textFor("pagerLastPage")))},directives:[common_NgClass],encapsulation:2,changeDetection:0}),PagerNextButtonsComponent})(),fesm2015_PagerNumericButtonsComponent=(()=>{class PagerNumericButtonsComponent extends fesm2015_PagerElementComponent{constructor(localization,cd,pagerContext){super(localization,pagerContext,cd),this.pagerContext=pagerContext}get buttons(){let result=[];for(let idx=this.start;idx<=this.end;idx++)result.push(idx);return result}get end(){return Math.min(this.start+this.buttonCount-1,this.totalPages)}get start(){const page=this.currentPage,buttonCount=this.buttonCount;if(page>buttonCount){const reminder=page%buttonCount;return 0===reminder?page-buttonCount+1:page-reminder+1}return 1}pageLabel(num){const pageText=this.textFor("pagerPage");return pageText?pageText+" "+num:num.toString()}onChanges({total:total,skip:skip,pageSize:pageSize}){this.total=total,this.skip=skip,this.pageSize=pageSize,this.cd.markForCheck()}}return PagerNumericButtonsComponent.fac=function(t){return new(t||PagerNumericButtonsComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(ChangeDetectorRef),directiveInject(fesm2015_PagerContextService))},PagerNumericButtonsComponent.cmp=defineComponent({type:PagerNumericButtonsComponent,selectors:[["kendo-pager-numeric-buttons"]],inputs:{buttonCount:"buttonCount"},features:[InheritDefinitionFeature],decls:4,vars:5,consts:[[3,"ngClass"],[4,"ngIf"],[4,"ngFor","ngForOf"],["href","#","tabindex","-1",1,"k-link",3,"click"],["href","#","tabindex","-1",3,"ngClass","click"]],template:function(rf,ctx){1&rf&&(elementStart(0,"ul",0),template(1,PagerNumericButtonsComponent_li_1_Template,3,1,"li",1),template(2,PagerNumericButtonsComponent_li_2_Template,3,5,"li",2),template(3,PagerNumericButtonsComponent_li_3_Template,3,1,"li",1),elementEnd()),2&rf&&(property("ngClass",pureFunction0(4,_c129)),advance(1),property("ngIf",ctx.start>1),advance(1),property("ngForOf",ctx.buttons),advance(1),property("ngIf",ctx.end<ctx.totalPages))},directives:[common_NgClass,common_NgIf,common_NgForOf],encapsulation:2,changeDetection:0}),PagerNumericButtonsComponent})(),fesm2015_PagerInputComponent=(()=>{class PagerInputComponent extends fesm2015_PagerElementComponent{constructor(localization,pagerContext,zone,cd){super(localization,pagerContext,cd),this.pagerContext=pagerContext,this.zone=zone,this.handleKeyDown=event=>{let incomingValue=this.numericInput.value||this.current;event.keyCode===Keys.Enter&&(event.preventDefault(),incomingValue!==this.current&&this.zone.run(()=>{this.changePage(incomingValue-1)}))},this.handleBlur=()=>{const inputValue=this.numericInput.value;inputValue?inputValue!==this.current&&this.zone.run(()=>{this.changePage(inputValue-1)}):this.numericInput.writeValue(this.current)}}get current(){return this.hasPages?this.currentPage:0}get hasPages(){return 0!==this.totalPages}onChanges({total:total,skip:skip,pageSize:pageSize}){this.total=total,this.skip=skip,this.pageSize=pageSize,this.cd.markForCheck()}}return PagerInputComponent.fac=function(t){return new(t||PagerInputComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_PagerContextService),directiveInject(NgZone),directiveInject(ChangeDetectorRef))},PagerInputComponent.cmp=defineComponent({type:PagerInputComponent,selectors:[["kendo-pager-input"]],viewQuery:function(rf,ctx){var _t;1&rf&&viewQuery(fesm2015_NumericTextBoxComponent,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.numericInput=_t.first)},features:[InheritDefinitionFeature],decls:4,vars:16,consts:[[3,"ngClass"],["format","n0",3,"spinners","decimals","disabled","value","min","max","autoCorrect","kendoEventsOutsideAngular"]],template:function(rf,ctx){1&rf&&(elementStart(0,"span",0),text(1),element(2,"kendo-numerictextbox",1),text(3),elementEnd()),2&rf&&(property("ngClass",pureFunction0(12,_c130)),advance(1),textInterpolate1(" ",ctx.textFor("pagerPage")," "),advance(1),property("spinners",!1)("decimals",0)("disabled",!ctx.hasPages)("value",ctx.current)("min",ctx.hasPages?1:0)("max",ctx.totalPages)("autoCorrect",!0)("kendoEventsOutsideAngular",pureFunction2(13,_c131,ctx.handleKeyDown,ctx.handleBlur)),advance(1),textInterpolate2(" ",ctx.textFor("pagerOf")," ",ctx.totalPages," "))},directives:[common_NgClass,fesm2015_NumericTextBoxComponent,fesm2015_EventsOutsideAngularDirective],encapsulation:2}),PagerInputComponent})(),fesm2015_PagerInfoComponent=(()=>{class PagerInfoComponent extends fesm2015_PagerElementComponent{constructor(localization,cd,pagerContext){super(localization,pagerContext,cd),this.pagerContext=pagerContext}get maxItems(){return Math.min(this.currentPage*this.pageSize,this.total)}get currentPageText(){return this.total?(this.currentPage-1)*this.pageSize+1:0}get classes(){return!0}onChanges({total:total,skip:skip,pageSize:pageSize}){this.total=total,this.skip=skip,this.pageSize=pageSize,this.cd.markForCheck()}}return PagerInfoComponent.fac=function(t){return new(t||PagerInfoComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(ChangeDetectorRef),directiveInject(fesm2015_PagerContextService))},PagerInfoComponent.cmp=defineComponent({type:PagerInfoComponent,selectors:[["kendo-pager-info"]],hostVars:4,hostBindings:function(rf,ctx){2&rf&&classProp("k-pager-info",ctx.classes)("k-label",ctx.classes)},features:[InheritDefinitionFeature],decls:1,vars:5,template:function(rf,ctx){1&rf&&text(0),2&rf&&textInterpolate5("",ctx.currentPageText," - ",ctx.maxItems," ",ctx.textFor("pagerOf")," ",ctx.total," ",ctx.textFor("pagerItems"),"")},encapsulation:2,changeDetection:0}),PagerInfoComponent})(),fesm2015_PagerPageSizesComponent=(()=>{class PagerPageSizesComponent extends fesm2015_PagerElementComponent{constructor(localization,cd,pagerContext){super(localization,pagerContext,cd),this.pagerContext=pagerContext,this._pageSizes=[]}get pageSizes(){return this._pageSizes}set pageSizes(pageSizes){const normalizedItems=[];pageSizes.forEach(item=>{normalizedItems.push("number"==typeof item?{text:item.toString(),value:item}:item)}),this._pageSizes=normalizedItems}get classes(){return!0}get showInitialPageSize(){return 0===this.pageSizes.filter(item=>"number"==typeof item.value?item.value===Number(this.pageSize):this.total===Number(this.pageSize)).length}pageSizeChange(value){this.pageSize=parseInt(value,10),this.pagerContext.changePageSize(this.pageSize)}getValue(page){return"number"==typeof page.value?page.value:this.total}getSelectedState(page){return"number"==typeof page.value?page.value===this.pageSize||void 0:this.pageSize===this.total}onChanges({total:total,skip:skip,pageSize:pageSize}){this.total=total,this.skip=skip,this.pageSize="number"==typeof pageSize?pageSize:this.total,this.cd.markForCheck()}}return PagerPageSizesComponent.fac=function(t){return new(t||PagerPageSizesComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(ChangeDetectorRef),directiveInject(fesm2015_PagerContextService))},PagerPageSizesComponent.cmp=defineComponent({type:PagerPageSizesComponent,selectors:[["kendo-pager-page-sizes"]],hostVars:4,hostBindings:function(rf,ctx){2&rf&&classProp("k-pager-sizes",ctx.classes)("k-label",ctx.classes)},inputs:{pageSizes:"pageSizes"},features:[InheritDefinitionFeature],decls:5,vars:4,consts:[[3,"change"],["select",""],[3,"value",4,"ngIf"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value"],[3,"value","selected"]],template:function(rf,ctx){if(1&rf){const _r4=getCurrentView();elementStart(0,"select",0,1),listener("change",(function(){restoreView(_r4);const _r0=reference(1);return ctx.pageSizeChange(_r0.value)})),template(2,PagerPageSizesComponent_option_2_Template,2,2,"option",2),template(3,PagerPageSizesComponent_option_3_Template,2,3,"option",3),elementEnd(),text(4)}2&rf&&(attribute("aria-label",ctx.textFor("pagerItemsPerPage")),advance(2),property("ngIf",ctx.showInitialPageSize),advance(1),property("ngForOf",ctx.pageSizes),advance(1),textInterpolate1(" ",ctx.textFor("pagerItemsPerPage")," "))},directives:[common_NgIf,common_NgForOf],encapsulation:2,changeDetection:0}),PagerPageSizesComponent})();const importedModules$1=[common_CommonModule,fesm2015_InputsModule,dist_fesm2015_SharedModule];let fesm2015_PagerModule=(()=>{class PagerModule{static exports(){return[fesm2015_PagerComponent,fesm2015_PagerPrevButtonsComponent,fesm2015_PagerNextButtonsComponent,fesm2015_PagerNumericButtonsComponent,fesm2015_PagerInputComponent,fesm2015_PagerInfoComponent,fesm2015_PagerPageSizesComponent,fesm2015_PagerTemplateDirective]}}return PagerModule.mod=defineNgModule({type:PagerModule}),PagerModule.inj=defineInjector({factory:function(t){return new(t||PagerModule)},imports:[[...importedModules$1]]}),PagerModule})(),fesm2015_GroupHeaderComponent=(()=>{class GroupHeaderComponent{constructor(groupsService,groupInfoService){this.groupsService=groupsService,this.groupInfoService=groupInfoService,this.skipGroupDecoration=!1,this.hasDetails=!1,this.totalColumnsCount=0,this.groups=[],this.isExpanded=!1}get groupItemClass(){return!0}ngDoCheck(){this.isExpanded=this.groupsService.isExpanded(this.item.index)}prefixGroupCell(item){return new Array(item.level)}toggleGroup(item){return this.groupsService.toggleRow(item.index,item.data),!1}groupSpan(item){const groupCount=(this.groups||[]).length,detailOffset=this.hasDetails?1:0;if(this.hasGroupHeaderColumn)return groupCount+1+detailOffset-item.level;let columnCount=columnsSpan(this.columns);return this.skipGroupDecoration?columnCount:groupCount+columnCount+detailOffset-item.level}logicalColSpan(){return this.skipGroupDecoration?1:this.totalColumnsCount}ariaRole(){return this.skipGroupDecoration?"presentation":"gridcell"}formatForGroup(item){return this.groupInfoService.formatForGroup(item)}groupTitle(item){return this.groupInfoService.groupTitle(item)}groupHeaderTemplate(item){return this.groupInfoService.groupHeaderTemplate(item)}}return GroupHeaderComponent.fac=function(t){return new(t||GroupHeaderComponent)(directiveInject(fesm2015_GroupsService),directiveInject(fesm2015_GroupInfoService))},GroupHeaderComponent.cmp=defineComponent({type:GroupHeaderComponent,selectors:[["","kendoGridGroupHeader",""]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-grouping-row",ctx.groupItemClass)},inputs:{skipGroupDecoration:"skipGroupDecoration",hasDetails:"hasDetails",totalColumnsCount:"totalColumnsCount",groups:"groups",rowIndex:"rowIndex",logicalRowIndex:"logicalRowIndex",item:"item",hasGroupHeaderColumn:"hasGroupHeaderColumn",groupHeaderColumns:"groupHeaderColumns",columns:"columns"},attrs:_c132,decls:3,vars:3,consts:[[3,"ngIf"],["aria-selected","false","kendoGridLogicalCell","",3,"logicalRowIndex","logicalColIndex","logicalSlaveCell","groupItem","colSpan",4,"ngIf"],[4,"ngIf"],["class","k-group-cell","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"k-group-cell"],["aria-selected","false","kendoGridLogicalCell","",3,"logicalRowIndex","logicalColIndex","logicalSlaveCell","groupItem","colSpan"],[1,"k-reset"],["href","#","tabindex","-1","role","presentation",1,"k-icon",3,"ngClass","click"],[3,"templateContext"],["role","gridcell","aria-selected","false","kendoGridLogicalCell","",3,"logicalRowIndex","logicalColIndex","logicalSlaveCell","groupItem","colSpan",4,"ngFor","ngForOf"],["role","gridcell","aria-selected","false","kendoGridLogicalCell","",3,"logicalRowIndex","logicalColIndex","logicalSlaveCell","groupItem","colSpan"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(rf,ctx){1&rf&&(template(0,GroupHeaderComponent_ng_template_0_Template,1,1,"ng-template",0),template(1,GroupHeaderComponent_td_1_Template,3,9,"td",1),template(2,GroupHeaderComponent_ng_container_2_Template,2,1,"ng-container",2)),2&rf&&(property("ngIf",!ctx.skipGroupDecoration),advance(1),property("ngIf",!(ctx.skipGroupDecoration&&ctx.hasGroupHeaderColumn)),advance(1),property("ngIf",ctx.hasGroupHeaderColumn))},directives:[common_NgIf,common_NgForOf,fesm2015_LogicalCellDirective,common_NgClass,_ivy_ngcc_dist_fesm2015_TemplateContextDirective,common_NgTemplateOutlet],pipes:[fesm2015_FieldAccessorPipe],encapsulation:2}),GroupHeaderComponent})(),fesm2015_DropTargetDirective=(()=>{class DropTargetDirective{constructor(element,service){this.element=element,this.service=service,this.context={},this.enter=new core_EventEmitter,this.leave=new core_EventEmitter,this.drop=new core_EventEmitter,this.subscriptions=new Subscription_Subscription}ngOnInit(){this.service.add(this);const changes=this.service.changes.pipe(filter_filter(({target:target})=>target===this));this.subscriptions.add(changes.pipe(filter_filter(({type:type})=>"leave"===type)).subscribe(e=>{this.leave.next(this.eventArgs(e))})),this.subscriptions.add(changes.pipe(filter_filter(({type:type})=>"enter"===type)).subscribe(e=>{this.enter.next(this.eventArgs(e))})),this.subscriptions.add(changes.pipe(filter_filter(({type:type})=>"drop"===type)).subscribe(e=>{this.drop.next(this.eventArgs(e))}))}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}eventArgs(e){return{target:this,mouseEvent:e.mouseEvent,draggable:e.draggable}}}return DropTargetDirective.fac=function(t){return new(t||DropTargetDirective)(directiveInject(ElementRef),directiveInject(fesm2015_DragAndDropService))},DropTargetDirective.dir=defineDirective({type:DropTargetDirective,selectors:[["","kendoDropTarget",""]],inputs:{context:"context"},outputs:{enter:"enter",leave:"leave",drop:"drop"}}),DropTargetDirective})();const withoutField=({field:field})=>fesm2015_isNullOrEmptyString(field),alreadyGrouped=({groups:groups,field:field})=>groups.some(group=>group.field===field),indicatorRules=or(({target:target,field:field})=>target.field===field,fesm2015_and(({target:target})=>target.lastTarget,({groups:groups,field:field})=>groups.map(group=>group.field).indexOf(field)===groups.length-1));let fesm2015_GroupPanelComponent=(()=>{class GroupPanelComponent{constructor(hint,cue,groupInfoService,localization,cd){this.hint=hint,this.cue=cue,this.groupInfoService=groupInfoService,this.localization=localization,this.cd=cd,this.change=new core_EventEmitter,this.groups=[],this.dropTargets=new QueryList,this.groupTitles=[],this.subscription=new Subscription_Subscription}get groupHeaderClass(){return!0}set text(value){this.emptyText=value}get text(){return this.emptyText?this.emptyText:this.localization.get("groupPanelEmpty")}ngAfterViewInit(){this.subscription.add(observe(this.dropTargets).subscribe(this.attachTargets.bind(this)))}ngOnInit(){this.subscription.add(this.localization.changes.subscribe(()=>this.cd.markForCheck()))}ngDoCheck(){const currentTitles=this.groups.map(group=>this.groupInfoService.groupTitle(group));(currentTitles.length!==this.groupTitles.length||currentTitles.some((current,idx)=>current!==this.groupTitles[idx]))&&(this.groupTitles=currentTitles,this.cd.markForCheck())}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.targetSubscription&&this.targetSubscription.unsubscribe()}directionChange(group){const index=this.groups.findIndex(x=>x.field===group.field),groups=[...this.groups.slice(0,index),group,...this.groups.slice(index+1)];this.change.emit(groups)}insert(field,index){const groups=this.groups.filter(x=>x.field!==field);(groups.length||0===this.groups.length)&&this.change.emit([...groups.slice(0,index),{field:field},...groups.slice(index)])}remove(group){this.change.emit(this.groups.filter(x=>x.field!==group.field))}canDrop(draggable,target){var groupsService;return!("groupIndicator"===draggable.type?indicatorRules:or(withoutField,alreadyGrouped,(groupsService=this.groupInfoService,({field:field})=>!groupsService.isGroupable(field))))({field:draggable.field,groups:this.groups,target:target})}attachTargets(){this.targetSubscription&&this.targetSubscription.unsubscribe(),this.targetSubscription=new Subscription_Subscription;const enterStream=this.dropTargets.reduce((acc,target)=>merge(acc,target.enter),from_from([])),leaveStream=this.dropTargets.reduce((acc,target)=>merge(acc,target.leave),from_from([])),dropStream=this.dropTargets.reduce((acc,target)=>merge(acc,target.drop),from_from([]));this.targetSubscription.add(enterStream.pipe(tap(_=>this.hint.removeLock()),filter_filter(({draggable:draggable,target:target})=>this.canDrop(draggable.context,target.context)),tap(this.enter.bind(this)),switchMapTo(dropStream.pipe(takeUntil(leaveStream.pipe(tap(this.leave.bind(this))))))).subscribe(this.drop.bind(this)))}enter({draggable:draggable,target:target}){this.hint.enable();let before=target.context.lastTarget||isTargetBefore(draggable.element.nativeElement,target.element.nativeElement);this.localization.rtl&&(before=!before),this.cue.position(fesm2015_position(target.element.nativeElement,before))}leave(){this.hint.disable(),this.cue.hide()}drop({target:target,draggable:draggable}){const field=draggable.context.field,index=this.dropTargets.toArray().indexOf(target);this.insert(field,index)}}return GroupPanelComponent.fac=function(t){return new(t||GroupPanelComponent)(directiveInject(fesm2015_DragHintService),directiveInject(fesm2015_DropCueService),directiveInject(fesm2015_GroupInfoService),directiveInject(fesm2015_LocalizationService),directiveInject(ChangeDetectorRef))},GroupPanelComponent.cmp=defineComponent({type:GroupPanelComponent,selectors:[["kendo-grid-group-panel"]],viewQuery:function(rf,ctx){var _t;1&rf&&viewQuery(fesm2015_DropTargetDirective,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.dropTargets=_t)},hostVars:4,hostBindings:function(rf,ctx){2&rf&&classProp("k-grouping-header",ctx.groupHeaderClass)("k-grouping-header-flex",ctx.groupHeaderClass)},inputs:{groups:"groups",text:"text"},outputs:{change:"change"},decls:3,vars:3,consts:[[3,"ngIf"],["class","k-indicator-container","kendoDropTarget","",3,"context",4,"ngFor","ngForOf"],["class","k-indicator-container","kendoDropTarget","",3,"context",4,"ngIf"],["kendoDropTarget","",1,"k-indicator-container",3,"context"],["kendoDraggableColumn","","kendoGroupIndicator","","kendoDraggable","",3,"enableDrag","context","group","groupTitle","directionChange","remove"]],template:function(rf,ctx){1&rf&&(template(0,GroupPanelComponent_ng_template_0_Template,2,3,"ng-template",0),template(1,GroupPanelComponent_div_1_Template,2,10,"div",1),template(2,GroupPanelComponent_div_2_Template,2,2,"div",2)),2&rf&&(property("ngIf",0===ctx.groups.length),advance(1),property("ngForOf",ctx.groups),advance(1),property("ngIf",0!==ctx.groups.length))},directives:function(){return[common_NgIf,common_NgForOf,fesm2015_DropTargetDirective,fesm2015_DraggableColumnDirective,fesm2015_GroupIndicatorComponent,fesm2015_DraggableDirective]},encapsulation:2,changeDetection:0}),GroupPanelComponent})(),fesm2015_GroupIndicatorComponent=(()=>{class GroupIndicatorComponent{constructor(){this.directionChange=new core_EventEmitter,this.remove=new core_EventEmitter}get groupIndicatorClass(){return!0}get dir(){return this.group.dir?this.group.dir:"asc"}toggleDirection(){return this.directionChange.emit({dir:"asc"===this.dir?"desc":"asc",field:this.group.field}),!1}removeDescriptor(){return this.remove.emit({dir:this.group.dir,field:this.group.field}),!1}}return GroupIndicatorComponent.fac=function(t){return new(t||GroupIndicatorComponent)},GroupIndicatorComponent.cmp=defineComponent({type:GroupIndicatorComponent,selectors:[["","kendoGroupIndicator",""]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-group-indicator",ctx.groupIndicatorClass)},inputs:{group:"group",groupTitle:"groupTitle"},outputs:{directionChange:"directionChange",remove:"remove"},attrs:_c139,decls:5,vars:5,consts:[["href","#","tabindex","-1",1,"k-link",3,"click"],[1,"k-icon"],["tabindex","-1",1,"k-button","k-button-icon","k-bare",3,"click"],[1,"k-icon","k-i-group-delete"]],template:function(rf,ctx){1&rf&&(elementStart(0,"a",0),listener("click",(function(){return ctx.toggleDirection()})),element(1,"span",1),text(2),elementEnd(),elementStart(3,"a",2),listener("click",(function(){return ctx.removeDescriptor()})),element(4,"span",3),elementEnd()),2&rf&&(advance(1),classProp("k-i-sort-asc-sm","asc"===ctx.dir)("k-i-sort-desc-sm","desc"===ctx.dir),advance(1),textInterpolate1(" ",ctx.groupTitle,""))},encapsulation:2,changeDetection:0}),GroupIndicatorComponent})();const fesm2015_hasClass=className=>el=>new RegExp(`(^| )${className}( |$)`).test(el.className),isDeleteButton=or(fesm2015_hasClass("k-i-group-delete"),fesm2015_hasClass("k-button-icon")),isSortIcon=or(fesm2015_hasClass("k-i-sort-asc-sm"),fesm2015_hasClass("k-i-sort-desc-sm")),skipButtons=fesm2015_and(fesm2015_not(isDeleteButton),fesm2015_not(isSortIcon),fesm2015_not(isFocusableWithTabKey),fesm2015_not(matchesNodeName("label"))),elementUnderCursor=({clientX:clientX,clientY:clientY})=>document.elementFromPoint(clientX,clientY);let fesm2015_DraggableColumnDirective=(()=>{class DraggableColumnDirective{constructor(draggable,element,zone,service,hint,cue,nav,renderer){this.draggable=draggable,this.element=element,this.zone=zone,this.service=service,this.hint=hint,this.cue=cue,this.nav=nav,this.renderer=renderer,this.context={},this.drag=new core_EventEmitter,this.subscriptions=new Subscription_Subscription}set enableDrag(enabled){this.enabled=enabled,this.updateTouchAction()}get hostClass(){return this.enabled}ngOnInit(){this.subscriptions.add(this.zone.runOutsideAngular(()=>{return this.draggable.kendoPress.pipe(filter_filter(_=>this.enabled),filter_filter(({originalEvent:{target:target}})=>target===this.element.nativeElement||skipButtons(target)),tap(e=>{const originalEvent=e.originalEvent;e.isTouch||originalEvent.preventDefault(),this.nav.navigateTo(originalEvent.target)}),switchMap((release=this.draggable.kendoRelease,mouseDown=>of(mouseDown).pipe(delay_delay(150),takeUntil(release)))),tap(down=>{this.hint.create(down,this.element.nativeElement,this.context.hint),this.cue.create()}),switchMap(down=>this.draggable.kendoDrag.pipe(tap(e=>{e.isTouch&&e.originalEvent.preventDefault()}),tap(this.hint.attach()),tap(this.cue.attach()),takeUntil(this.draggable.kendoRelease),map_map(move=>({move:move,down:down})))),tap(this.performDrag.bind(this)),switchMapTo(this.draggable.kendoRelease)).subscribe(this.drop.bind(this));var release}))}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}drop(upEvent){this.hint.remove(),this.cue.remove(),this.service.notifyDrop(this,upEvent)}performDrag({move:move}){this.hint.move(move);const cursorElement=this.elementUnderCursor(move);cursorElement&&this.service.notifyDrag(this,cursorElement,move),this.drag.emit({draggable:this,mouseEvent:move})}elementUnderCursor(mouseEvent){this.hint.hide();let target=elementUnderCursor(mouseEvent);return target&&/k-grouping-dropclue/.test(target.className)&&(target=((element,cont)=>{element.style.display="none";const result=cont();return element.style.display="block",result})(target,elementUnderCursor.bind(this,mouseEvent))),this.hint.show(),target}updateTouchAction(){this.element&&this.renderer.setStyle(this.element.nativeElement,"touch-action",this.enabled?"none":"")}}return DraggableColumnDirective.fac=function(t){return new(t||DraggableColumnDirective)(directiveInject(fesm2015_DraggableDirective,1),directiveInject(ElementRef),directiveInject(NgZone),directiveInject(fesm2015_DragAndDropService),directiveInject(fesm2015_DragHintService),directiveInject(fesm2015_DropCueService),directiveInject(kendo_angular_grid_ivy_ngcc_dist_fesm2015_NavigationService),directiveInject(Renderer2))},DraggableColumnDirective.dir=defineDirective({type:DraggableColumnDirective,selectors:[["","kendoDraggableColumn",""]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-grid-draggable-header",ctx.hostClass)},inputs:{context:"context",enableDrag:"enableDrag"},outputs:{drag:"drag"}}),DraggableColumnDirective})(),fesm2015_DragAndDropModule=(()=>{class DragAndDropModule{}return DragAndDropModule.mod=defineNgModule({type:DragAndDropModule}),DragAndDropModule.inj=defineInjector({factory:function(t){return new(t||DragAndDropModule)}}),DragAndDropModule})(),fesm2015_GroupModule=(()=>{class GroupModule{static exports(){return[dist_fesm2015_GroupHeaderTemplateDirective,dist_fesm2015_GroupHeaderColumnTemplateDirective,dist_fesm2015_GroupFooterTemplateDirective]}}return GroupModule.mod=defineNgModule({type:GroupModule}),GroupModule.inj=defineInjector({factory:function(t){return new(t||GroupModule)},imports:[[common_CommonModule,dist_fesm2015_SharedModule,fesm2015_DragAndDropModule]]}),GroupModule})();const fesm2015_DEFAULTS={allowUnsort:!0,mode:"single",showIndexes:!0,initialDirection:"asc"},normalize$1=(...settings)=>Object.assign({},fesm2015_DEFAULTS,...settings),hasFilter=(settings,column)=>!1!==settings.filter&&column.field&&column.filterable,hasSort=(settings,column)=>!1!==settings.sort&&column.field&&column.sortable,hasLock=(settings,column)=>settings.lock&&column.lockable&&!(column.parent&&!column.parent.isSpanColumn),hasColumnChooser=settings=>!1!==settings.columnChooser,mergeObjects=(...args)=>Object.assign.apply(null,[{}].concat(args)),inSameParent=(x,y)=>x.parent===y.parent||isInSpanColumn(y)&&inSameParent(x,y.parent),lockable=({draggable:draggable,target:target})=>!1!==draggable.context.column.lockable||draggable.context.column.isLocked===target.context.column.isLocked,fesm2015_rules=fesm2015_and(({draggable:draggable})=>["column","columnGroup"].indexOf(draggable.context.type)>=0,({draggable:draggable})=>draggable.context.column.reorderable,({draggable:draggable})=>!isInSpanColumn(draggable.context.column),({draggable:draggable,target:target})=>draggable.element.nativeElement!==target.element.nativeElement,({draggable:draggable,target:target})=>inSameParent(draggable.context.column,target.context.column),fesm2015_not(({draggable:draggable})=>!fesm2015_isTruthy(draggable.context.column.locked)&&(({parent:parent})=>!fesm2015_isTruthy(parent))(draggable.context.column)&&draggable.context.lastColumn),lockable);let dist_fesm2015_HeaderComponent=(()=>{class HeaderComponent{constructor(popupService,hint,cue,reorderService,idService,sortService,localization,cd){this.popupService=popupService,this.hint=hint,this.cue=cue,this.reorderService=reorderService,this.idService=idService,this.sortService=sortService,this.localization=localization,this.cd=cd,this.columns=[],this.groups=[],this.sort=new Array,this.sortable=!1,this.groupable=!1,this.lockedColumnsCount=0,this.resizable=!1,this.reorderable=!1,this.columnMenu=!1,this.totalColumnsCount=0,this.sortedFields={},this.dropTargets=new QueryList,this.subscription=new Subscription_Subscription}get headerClass(){return!this.scrollable}get sortableLabel(){return this.localization.get("sortable")}get unlockedColumnsCount(){return this.totalColumnsCount-this.lockedColumnsCount-this.columns.length}sortColumn(column){this.sortService.sort(this.toggleSort(column))}onSortClick(column,event,link){const target=event.target;column.headerTemplateRef&&target!==link&&Boolean(fesm2015_closestInScope(target,fesm2015_isFocusable,link))||this.sortColumn(column)}onHeaderKeydown(column,args){this.sortable&&!args.defaultPrevented&&!1!==column.sortable&&args.keyCode===Keys.Enter&&this.sortService.sort(this.toggleSort(column))}showSortNumbering(column){const{showIndexes:showIndexes}=normalize$1(this.sortable);return showIndexes&&this.sort&&this.sort.filter(({dir:dir})=>kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(dir)).length>1&&this.sortOrder(column.field)>0}sortOrder(field){return this.sort.filter(({dir:dir})=>kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(dir)).findIndex(x=>x.field===field)+1}sortIcon(field){const state$$1=this.sortDescriptor(field);return{"k-icon":kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(state$$1.dir),"k-i-sort-desc-sm":"desc"===state$$1.dir,"k-i-sort-asc-sm":"asc"===state$$1.dir}}sortState(column){if(!this.isSortable(column))return;const state$$1=this.sortDescriptor(column.field);return"asc"===state$$1.dir?"ascending":"desc"===state$$1.dir?"descending":void 0}sortStatus(column){if(!this.sortedFields[column.field]||!this.isSortable(column))return;let msg="sortedDefault";const state$$1=this.sortDescriptor(column.field);return"asc"===state$$1.dir?msg="sortedAscending":"desc"===state$$1.dir&&(msg="sortedDescending"),this.localization.get(msg)}toggleSort(column){const{allowUnsort:allowUnsort,mode:mode,initialDirection:initialDirection}=normalize$1(this.sortable,column.sortable),descriptor=this.toggleDirection(column.field,allowUnsort,initialDirection);return"single"===mode?[descriptor]:[...this.sort.filter(desc=>desc.field!==column.field),descriptor]}ngAfterViewInit(){this.subscription.add(observe(this.dropTargets).subscribe(this.attachTargets.bind(this)))}ngDoCheck(){this._leafColumns=columnsToRender(this.columns||[]).filter(x=>!isColumnGroupComponent(x))}ngOnChanges(changes){const sortChange=changes.sort;sortChange&&!sortChange.isFirstChange()&&sortChange.currentValue.forEach(change=>{this.sortedFields[change.field]=!0})}ngOnInit(){this.subscription.add(this.localization.changes.subscribe(()=>this.cd.markForCheck()))}ngOnDestroy(){this.targetSubscription&&this.targetSubscription.unsubscribe(),this.popupService&&this.popupService.destroy(),this.subscription.unsubscribe()}selectAllCheckboxId(){return this.idService.selectAllCheckboxId()}isFirstOnRow(column,index){const isTailing=c=>c&&(this.columnsForLevel(c.level).indexOf(c)>0||isTailing(c.parent));return 0===index&&!this.groups.length&&!this.detailTemplate&&isTailing(column.parent)}logicalColumnIndex(column){const index=column.leafIndex;return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(index)?index+(kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.detailTemplate)?1:0):-1}get showFilterMenu(){return!this.columnMenu&&"string"==typeof(settings=this.filterable)&&settings.indexOf("menu")>-1;var settings}get showFilterRow(){return hasFilterRow(this.filterable)}showColumnMenu(column){return this.columnMenu&&column.columnMenu&&(this.columnMenuTemplate||column.columnMenuTemplates.length||((settings,column)=>hasColumnChooser(settings)||hasLock(settings,column)||hasSort(settings,column)||hasFilter(settings,column))(this.columnMenu,column))}isFilterable(column){return!fesm2015_isNullOrEmptyString(column.field)&&!0===column.filterable}canDrop(draggable,target){return this.reorderable&&fesm2015_rules({draggable:draggable,target:target})}shouldActivate(column){const canReorder=this.reorderable&&column.reorderable;return!(!canReorder&&!isColumnComponent(column))&&(this.groupable&&isColumnComponent(column)&&!1!==column.groupable||canReorder)}isSortable(column){return!fesm2015_isNullOrEmptyString(column.field)&&fesm2015_isTruthy(this.sortable)&&fesm2015_isTruthy(column.sortable)}isCheckboxColumn(column){return isCheckboxColumn(column)&&!column.templateRef}trackByIndex(index,_item){return index}toggleDirection(field,allowUnsort,initialDirection){const descriptor=this.sortDescriptor(field),[first,second]=(initialDirection=>"asc"===initialDirection?["asc","desc"]:["desc","asc"])(initialDirection);let dir=first;return descriptor.dir===first?dir=second:descriptor.dir===second&&allowUnsort&&(dir=void 0),{dir:dir,field:field}}columnsForLevel(level){const columns=this.columns?this.columns.filter(column=>column.level===level):[];return sortColumns(columnsToRender(columns))}isColumnGroupComponent(column){return isColumnGroupComponent(column)}get columnLevels(){return new Array((this.totalColumnLevels||0)+1)}sortDescriptor(field){return this.sort.find(item=>item.field===field)||{field:field}}get leafColumns(){return this._leafColumns}attachTargets(){this.targetSubscription&&this.targetSubscription.unsubscribe(),this.targetSubscription=new Subscription_Subscription;const enterStream=merge(...this.dropTargets.map(target=>target.enter)),leaveStream=merge(...this.dropTargets.map(target=>target.leave)),dropStream=merge(...this.dropTargets.map(target=>target.drop));this.targetSubscription.add(enterStream.pipe(tap(({target:target,draggable:draggable})=>{if("groupIndicator"===draggable.context.type)return;const targetLocked=fesm2015_isTruthy(target.context.column.isLocked),draggableLocked=fesm2015_isTruthy(draggable.context.column.isLocked);(this.lockedColumnsCount>0||targetLocked||draggableLocked)&&this.hint.toggleLock(targetLocked)}),filter_filter(({draggable:draggable,target:target})=>this.canDrop(draggable,target)),switchMap(this.trackMove.bind(this,leaveStream,dropStream)),map_map(e=>mergeObjects(e,{before:this.calculateBefore(e),changeContainer:e.changeContainer})),map_map(this.normalizeTarget.bind(this)),tap(this.enter.bind(this)),switchMap(args=>dropStream.pipe(map_map(()=>args),takeUntil(leaveStream.pipe(tap(this.leave.bind(this))))))).subscribe(this.drop.bind(this)))}normalizeTarget(e){let target=e.target;const parent=target.context.column.parent;if(parent&&parent.isSpanColumn){const arr=this.dropTargets.toArray(),firstSpan=arr.find(t=>t.context.column.parent===parent),index=arr.indexOf(firstSpan);target=arr[index+(e.before?0:parent.childColumns.length-1)]}return mergeObjects(e,{target:target})}trackMove(leaveStream,dropStream,e){const column=e.target.context.column,levelColumns=this.columnsForLevel(column.level),index=levelColumns.indexOf(column),changed=e.draggable.context.column.isLocked!==column.isLocked;return changed&&(column.locked?index===levelColumns.length-1:0===index)?e.draggable.drag.pipe(takeUntil(leaveStream),takeUntil(dropStream),map_map(({mouseEvent:mouseEvent})=>mergeObjects({changeContainer:!0},e,{mouseEvent:mouseEvent}))):of(mergeObjects({changeContainer:changed},e))}calculateBefore({draggable:draggable,target:target,mouseEvent:mouseEvent,changeContainer:changeContainer=!1}){const targetElement=target.element.nativeElement;let before=!1;if(changeContainer){const{left:left}=fesm2015_offset(targetElement);before=left+targetElement.offsetWidth/2>mouseEvent.pageX,this.localization.rtl&&(before=!before)}else before=isTargetBefore(draggable.element.nativeElement,targetElement);return before}enter({target:target,before:before}){this.hint.enable(),this.localization.rtl&&(before=!before),this.cue.position(fesm2015_position(target.element.nativeElement,before))}leave(){this.hint.disable(),this.cue.hide()}drop({draggable:draggable,target:target,before:before,changeContainer:changeContainer}){this.reorderService.reorder({before:before,changeContainer:changeContainer,source:draggable.context.column,target:target.context.column})}}return HeaderComponent.fac=function(t){return new(t||HeaderComponent)(directiveInject(fesm2015_SinglePopupService),directiveInject(fesm2015_DragHintService),directiveInject(fesm2015_DropCueService),directiveInject(fesm2015_ColumnReorderService),directiveInject(fesm2015_IdService),directiveInject(fesm2015_SortService),directiveInject(fesm2015_LocalizationService),directiveInject(ChangeDetectorRef))},HeaderComponent.cmp=defineComponent({type:HeaderComponent,selectors:[["","kendoGridHeader",""]],viewQuery:function(rf,ctx){var _t;1&rf&&viewQuery(fesm2015_DropTargetDirective,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.dropTargets=_t)},hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-grid-header",ctx.headerClass)},inputs:{columns:"columns",groups:"groups",sort:"sort",sortable:"sortable",groupable:"groupable",lockedColumnsCount:"lockedColumnsCount",resizable:"resizable",reorderable:"reorderable",columnMenu:"columnMenu",totalColumnsCount:"totalColumnsCount",totalColumnLevels:"totalColumnLevels",detailTemplate:"detailTemplate",scrollable:"scrollable",filterable:"filterable",filter:"filter",columnMenuTemplate:"columnMenuTemplate"},features:[NgOnChangesFeature],attrs:_c140,decls:1,vars:1,consts:[[3,"ngIf"],["kendoGridLogicalRow","",3,"logicalRowIndex","logicalSlaveRow","logicalCellsCount","logicalSlaveCellsCount",4,"ngFor","ngForOf"],["kendoGridFilterRow","","kendoGridLogicalRow","",3,"columns","filter","groups","detailTemplate","lockedColumnsCount","logicalRowIndex","logicalSlaveRow","logicalCellsCount","logicalSlaveCellsCount",4,"ngIf"],["kendoGridLogicalRow","",3,"logicalRowIndex","logicalSlaveRow","logicalCellsCount","logicalSlaveCellsCount"],["class","k-group-cell k-header","role","presentation",4,"ngFor","ngForOf"],["class","k-hierarchy-cell k-header","role","presentation","kendoGridLogicalCell","","aria-selected","false",3,"logicalRowIndex","logicalColIndex",4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","presentation",1,"k-group-cell","k-header"],["role","presentation","kendoGridLogicalCell","","aria-selected","false",1,"k-hierarchy-cell","k-header",3,"logicalRowIndex","logicalColIndex"],["kendoGridLogicalCell","","role","columnheader","aria-selected","false","kendoDropTarget","","kendoDraggable","","kendoDraggableColumn","","class","k-header",3,"logicalRowIndex","logicalColIndex","colSpan","rowSpan","enableDrag","context","k-filterable","k-first","ngClass","ngStyle","keydown",4,"ngIf"],["kendoGridLogicalCell","","kendoDropTarget","","kendoDraggable","","kendoDraggableColumn","","class","k-header",3,"logicalRowIndex","logicalColIndex","rowSpan","colSpan","enableDrag","context","k-first","k-filterable","ngClass","ngStyle",4,"ngIf"],["kendoGridLogicalCell","","role","columnheader","aria-selected","false","kendoDropTarget","","kendoDraggable","","kendoDraggableColumn","",1,"k-header",3,"logicalRowIndex","logicalColIndex","colSpan","rowSpan","enableDrag","context","ngClass","ngStyle","keydown"],[3,"column","filter",4,"ngIf"],[3,"standalone","settings","column","columnMenuTemplate","sort","filter","sortable",4,"ngIf"],["kendoGridColumnHandle","","kendoDraggable","","class","k-column-resizer",3,"column","columns",4,"ngIf"],[3,"column","filter"],[3,"standalone","settings","column","columnMenuTemplate","sort","filter","sortable"],[3,"templateContext"],["aria-hidden","true",1,"k-link",3,"click"],["link",""],[3,"ngClass"],["class","k-sort-order",4,"ngIf"],["role","status",1,"k-sort-status",2,"position","absolute","left","-10000px",3,"innerHtml"],[1,"k-sort-order"],["kendoGridSelectAllCheckbox","","kendoGridFocusable","",1,"k-checkbox"],[1,"k-checkbox-label"],["kendoGridColumnHandle","","kendoDraggable","",1,"k-column-resizer",3,"column","columns"],["kendoGridLogicalCell","","kendoDropTarget","","kendoDraggable","","kendoDraggableColumn","",1,"k-header",3,"logicalRowIndex","logicalColIndex","rowSpan","colSpan","enableDrag","context","ngClass","ngStyle"],[3,"standalone","settings","column","columnMenuTemplate",4,"ngIf"],[3,"standalone","settings","column","columnMenuTemplate"],["kendoGridFilterRow","","kendoGridLogicalRow","",3,"columns","filter","groups","detailTemplate","lockedColumnsCount","logicalRowIndex","logicalSlaveRow","logicalCellsCount","logicalSlaveCellsCount"]],template:function(rf,ctx){1&rf&&template(0,HeaderComponent_ng_template_0_Template,2,2,"ng-template",0),2&rf&&property("ngIf",!0)},directives:function(){return[common_NgIf,common_NgForOf,fesm2015_LogicalRowDirective,fesm2015_LogicalCellDirective,fesm2015_DropTargetDirective,fesm2015_DraggableDirective,fesm2015_DraggableColumnDirective,common_NgClass,common_NgStyle,fesm2015_FilterMenuComponent,fesm2015_ColumnMenuComponent,_ivy_ngcc_dist_fesm2015_TemplateContextDirective,fesm2015_SelectAllCheckboxDirective,dist_fesm2015_FocusableDirective,fesm2015_ColumnHandleDirective,fesm2015_FilterRowComponent]},styles:[".k-column-resizer[_ngcontent-%COMP%] {\n            cursor: col-resize;\n            display: block;\n            height: 1000%;\n            position: absolute;\n            top: 0;\n            width: .5em;\n        }"]}),HeaderComponent})();const headerWidth=handle=>handle.nativeElement.parentElement.offsetWidth,allLeafColumns=columns=>expandColumns(columns).filter(c=>!c.isColumnGroup),stopPropagation=({originalEvent:event})=>{event.stopPropagation(),event.preventDefault()},isInSpanColumn$1=column=>!(!column.parent||!column.parent.isSpanColumn);let fesm2015_ColumnHandleDirective=(()=>{class ColumnHandleDirective{constructor(draggable,element,service,zone,cdr,localization){this.draggable=draggable,this.element=element,this.service=service,this.zone=zone,this.cdr=cdr,this.localization=localization,this.columns=[],this.subscriptions=new Subscription_Subscription,this.rtl=!1}get visible(){return this.column.resizable?"block":"none"}get leftStyle(){return fesm2015_isTruthy(this.rtl)?0:null}get rightStyle(){return fesm2015_isTruthy(this.rtl)?null:0}autoFit(){const allLeafs=allLeafColumns(this.columns),currentLeafs=leafColumns([this.column]).filter(column=>fesm2015_isTruthy(column.resizable)),columnInfo=currentLeafs.map(column=>{const isParentSpan=isInSpanColumn$1(column),isLastInSpan=!!isParentSpan&&column.parent.childColumns.last===column,index=((target,list)=>{let index=0,ignore=0,skip=0;for(;index<list.length;){const current=list[index],isParentSpanColumn=isInSpanColumn$1(current);if(current===target)break;ignore--<=0&&isParentSpanColumn&&(ignore=current.parent.childColumns.length-1,skip+=ignore),index++}return index-skip})(column,allLeafs);return{column:column,headerIndex:this.columnsForLevel(column.level).indexOf(column),index:index,isLastInSpan:isLastInSpan,isParentSpan:isParentSpan,level:column.level}});currentLeafs.forEach(column=>column.width=0),this.service.measureColumns(columnInfo)}ngOnInit(){const service=this.service.changes.pipe(filter_filter(()=>this.column.resizable),filter_filter(e=>kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(e.columns.find(column=>column===this.column))));this.subscriptions.add(service.pipe(filter_filter(e=>"start"===e.type)).subscribe(this.initState.bind(this))),this.subscriptions.add(service.pipe(filter_filter(e=>"resizeColumn"===e.type)).subscribe(this.resize.bind(this))),this.subscriptions.add(this.service.changes.pipe(filter_filter(e=>"start"===e.type),filter_filter(this.shouldUpdate.bind(this)),take_take(1)).subscribe(this.initColumnWidth.bind(this))),this.subscriptions.add(this.zone.runOutsideAngular(()=>{return this.draggable.kendoPress.pipe(tap(stopPropagation),tap(()=>this.service.start(this.column)),switchMap((release=this.draggable.kendoRelease,mouseDown=>of(mouseDown).pipe(delay_delay(150),takeUntil(release)))),switchMap(((service,draggable)=>mouseDown=>draggable.kendoDrag.pipe(takeUntil(draggable.kendoRelease.pipe(tap(()=>service.end()))),map_map(({pageX:pageX})=>({originalX:mouseDown.pageX,pageX:pageX}))))(this.service,this.draggable))).subscribe(({pageX:pageX,originalX:originalX})=>{this.service.resizeColumns((pageX-originalX)/(this.column.resizeStartWidth||this.column.width)*100)});var release})),this.subscriptions.add(service.pipe(filter_filter(e=>"autoFitComplete"===e.type)).subscribe(this.sizeToFit.bind(this))),this.subscriptions.add(service.pipe(filter_filter(e=>"triggerAutoFit"===e.type)).subscribe(this.autoFit.bind(this))),this.subscriptions.add(this.localization.changes.subscribe(({rtl:rtl})=>this.rtl=rtl))}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}shouldUpdate(){return!allLeafColumns(this.columns).map(column=>column.width).some(fesm2015_isBlank)}initColumnWidth(){this.column.width=headerWidth(this.element)}initState(){this.column.resizeStartWidth=headerWidth(this.element),this.service.resizedColumn({column:this.column,oldWidth:this.column.resizeStartWidth})}resize({deltaPercent:deltaPercent}){let delta=((value,percent)=>{const sign=percent<0?-1:1;return Math.ceil(Math.abs(percent)/100*value)*sign})(this.column.resizeStartWidth,deltaPercent);fesm2015_isTruthy(this.rtl)&&(delta*=-1);const newWidth=Math.max(this.column.resizeStartWidth+delta,this.column.minResizableWidth),tableDelta=newWidth>this.column.minResizableWidth?delta:this.column.minResizableWidth-this.column.resizeStartWidth;this.updateWidth(this.column,newWidth),this.service.resizeTable(this.column,tableDelta)}sizeToFit({columns:columns,widths:widths}){const index=columns.indexOf(this.column),width=Math.max(...widths.map(w=>w[index]))+1,tableDelta=width-this.column.resizeStartWidth;this.updateWidth(this.column,width),this.service.resizeTable(this.column,tableDelta)}updateWidth(column,width){column.width=width,this.cdr.markForCheck()}columnsForLevel(level){return columnsToRender(this.columns?this.columns.filter(column=>column.level===level):[])}}return ColumnHandleDirective.fac=function(t){return new(t||ColumnHandleDirective)(directiveInject(fesm2015_DraggableDirective,1),directiveInject(ElementRef),directiveInject(fesm2015_ColumnResizingService),directiveInject(NgZone),directiveInject(ChangeDetectorRef),directiveInject(fesm2015_LocalizationService))},ColumnHandleDirective.dir=defineDirective({type:ColumnHandleDirective,selectors:[["","kendoGridColumnHandle",""]],hostVars:6,hostBindings:function(rf,ctx){1&rf&&listener("dblclick",(function(){return ctx.autoFit()})),2&rf&&styleProp("display",ctx.visible)("left",ctx.leftStyle)("right",ctx.rightStyle)},inputs:{columns:"columns",column:"column"}}),ColumnHandleDirective})(),fesm2015_SelectAllCheckboxDirective=(()=>{class SelectAllCheckboxDirective{constructor(selectionService,el,renderer,ngZone){this.selectionService=selectionService,this.el=el,this.renderer=renderer,this.ngZone=ngZone,this.selectAllChange=new core_EventEmitter,this.type="checkbox",this.stateSet=!1,this.ngZone.runOutsideAngular(()=>{this.destroyClick=this.renderer.listen(this.el.nativeElement,"click",this.onClick.bind(this))})}ngAfterContentChecked(){this.setState()}ngOnChanges(){this.stateSet=!0}ngOnDestroy(){this.destroyClick&&this.destroyClick()}onClick(){const isChecked=this.el.nativeElement.checked,options=this.selectionService.options;this.selectAllChange.emit(isChecked?"checked":"unchecked"),options.enabled&&"multiple"===options.mode&&this.ngZone.run(()=>{this.selectionService.updateAll(isChecked)})}setState(){const state$$1=this.stateSet?this.stateToBool():this.selectionService.selectAllState,elem=this.el.nativeElement;this.renderer.setProperty(elem,"indeterminate",!kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(state$$1)),this.renderer.setProperty(elem,"checked",!!kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(state$$1)&&state$$1)}stateToBool(){switch(this.state){case"checked":return!0;case"unchecked":return!1;default:return}}}return SelectAllCheckboxDirective.fac=function(t){return new(t||SelectAllCheckboxDirective)(directiveInject(dist_fesm2015_SelectionService),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(NgZone))},SelectAllCheckboxDirective.dir=defineDirective({type:SelectAllCheckboxDirective,selectors:[["","kendoGridSelectAllCheckbox",""]],hostVars:1,hostBindings:function(rf,ctx){2&rf&&attribute("type",ctx.type)},inputs:{state:"state"},outputs:{selectAllChange:"selectAllChange"},features:[NgOnChangesFeature]}),SelectAllCheckboxDirective})(),fesm2015_FilterMenuComponent=(()=>{class FilterMenuComponent{constructor(filterService,popupService,localization){this.filterService=filterService,this.popupService=popupService,this.localization=localization,this.filterLabel=this.localization.get("filter")}get hasFilters(){return filtersByField(this.filter,(this.column||{}).field).length>0}toggle(anchor,template){return this.popupRef=this.popupService.open(anchor,template,this.popupRef),!1}close(){this.popupService.destroy()}}return FilterMenuComponent.fac=function(t){return new(t||FilterMenuComponent)(directiveInject(fesm2015_FilterService),directiveInject(fesm2015_SinglePopupService),directiveInject(fesm2015_LocalizationService))},FilterMenuComponent.cmp=defineComponent({type:FilterMenuComponent,selectors:[["kendo-grid-filter-menu"]],inputs:{column:"column",filter:"filter"},decls:5,vars:4,consts:[["href","#",3,"ngClass","click"],["anchor",""],[1,"k-icon","k-i-filter"],["template",""],[3,"column","filter","close"]],template:function(rf,ctx){if(1&rf){const _r5=getCurrentView();elementStart(0,"a",0,1),listener("click",(function(){restoreView(_r5);const _r0=reference(1),_r1=reference(4);return ctx.toggle(_r0,_r1)})),element(2,"span",2),elementEnd(),template(3,FilterMenuComponent_ng_template_3_Template,1,2,"ng-template",null,3,templateRefExtractor)}2&rf&&(property("ngClass",pureFunction1(2,_c144,ctx.hasFilters)),attribute("title",ctx.filterLabel))},directives:function(){return[common_NgClass,fesm2015_FilterMenuContainerComponent]},encapsulation:2}),FilterMenuComponent})();const validFilters=({value:value,operator:operator})=>!fesm2015_isNullOrEmptyString(value)||(operator=>"isnull"===operator||"isnotnull"===operator||"isempty"===operator||"isnotempty"===operator)(operator),findParent=(filters,field,parent)=>filters.reduce((acc,filter$$1)=>acc||(filter$$1.filters?findParent(filter$$1.filters,field,filter$$1):filter$$1.field===field?parent:acc),void 0),parentLogicOfDefault=(filter$$1,field,def="and")=>{const parent=findParent((filter$$1||{}).filters||[],field);return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(parent)?parent.logic:def};let fesm2015_FilterMenuContainerComponent=(()=>{class FilterMenuContainerComponent{constructor(parentService,childService,localization,cd){this.parentService=parentService,this.childService=childService,this.localization=localization,this.cd=cd,this.close=new core_EventEmitter,this.actionsClass="k-action-buttons k-button-group",this._templateContext={}}get filter(){return this._filter}set filter(value){this._filter=cloneFilters(value)}get childFilter(){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this._childFilter)||(this._childFilter={filters:filtersByField(this.filter,(this.column||{}).field),logic:parentLogicOfDefault(this.filter,(this.column||{}).field)}),this._childFilter}ngOnInit(){this.subscription=this.childService.changes.subscribe(filter$$1=>this._childFilter=filter$$1),this.subscription.add(this.localization.changes.subscribe(()=>this.cd.markForCheck()))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}get disabled(){return!this.childFilter.filters.some(validFilters)}get templateContext(){return this._templateContext.column=this.column,this._templateContext.filter=this.childFilter,this._templateContext.filterService=this.childService,this._templateContext.$implicit=this.childFilter,this._templateContext}get hasTemplate(){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.column)&&kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.column.filterMenuTemplateRef)}submit(){const filter$$1=(filter$$1=>(filter$$1.filters=filter$$1.filters.filter(validFilters),filter$$1))(this.childFilter);if(filter$$1.filters.length){const root=this.filter||{filters:[],logic:"and"};removeFilter(root,this.column.field),root.filters.push(filter$$1),this.parentService.filter(root)}return this.close.emit(),!1}reset(){const root=this.filter||{filters:[],logic:"and"};removeFilter(root,this.column.field),this.parentService.filter(root),this.close.emit()}get clearText(){return this.localization.get("filterClearButton")}get filterText(){return this.localization.get("filterFilterButton")}}return FilterMenuContainerComponent.fac=function(t){return new(t||FilterMenuContainerComponent)(directiveInject(fesm2015_FilterService,4),directiveInject(fesm2015_FilterService),directiveInject(fesm2015_LocalizationService),directiveInject(ChangeDetectorRef))},FilterMenuContainerComponent.cmp=defineComponent({type:FilterMenuContainerComponent,selectors:[["kendo-grid-filter-menu-container"]],inputs:{actionsClass:"actionsClass",filter:"filter",column:"column"},outputs:{close:"close"},features:[ProvidersFeature([fesm2015_FilterService])],decls:10,vars:7,consts:[[1,"k-filter-menu","k-group","k-reset","k-state-border-up",3,"submit","reset"],[1,"k-filter-menu-container"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngClass"],["type","reset",1,"k-button"],["type","submit",1,"k-button","k-primary",3,"disabled"],["kendoFilterMenuHost","",3,"filterService","column","filter"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(rf,ctx){1&rf&&(elementStart(0,"form",0),listener("submit",(function(){return ctx.submit()}))("reset",(function(){return ctx.reset()})),elementStart(1,"div",1),elementContainerStart(2,2),template(3,FilterMenuContainerComponent_ng_container_3_Template,2,3,"ng-container",3),template(4,FilterMenuContainerComponent_ng_container_4_Template,2,1,"ng-container",3),elementContainerEnd(),elementStart(5,"div",4),elementStart(6,"button",5),text(7),elementEnd(),elementStart(8,"button",6),text(9),elementEnd(),elementEnd(),elementEnd(),elementEnd()),2&rf&&(advance(2),property("ngSwitch",ctx.hasTemplate),advance(1),property("ngSwitchCase",!1),advance(1),property("ngSwitchCase",!0),advance(1),property("ngClass",ctx.actionsClass),advance(2),textInterpolate(ctx.clearText),advance(1),property("disabled",ctx.disabled),advance(1),textInterpolate(ctx.filterText))},directives:function(){return[forms_NgNoValidate,forms_NgControlStatusGroup,forms_NgForm,common_NgSwitch,common_NgSwitchCase,common_NgClass,fesm2015_FilterMenuHostDirective,common_NgIf,common_NgTemplateOutlet]},encapsulation:2}),FilterMenuContainerComponent})(),fesm2015_FilterMenuInputWrapperComponent=(()=>{class FilterMenuInputWrapperComponent extends fesm2015_FilterInputWrapperComponent{constructor(){super(null)}get hostClasses(){return!1}operatorChange(dataItem){this.currentOperator=dataItem}filterChange(filter$$1){this.applyFilter(filter$$1)}get currentFilter(){return this._currentFilter}set currentFilter(value){this._currentFilter=value}updateFilter(filter$$1){return Object.assign(this.currentFilter,filter$$1),this.filter}onChange(value){this.filterChange(this.updateFilter({field:this.column.field,operator:this.currentOperator,value:value}))}}return FilterMenuInputWrapperComponent.fac=function(t){return new(t||FilterMenuInputWrapperComponent)},FilterMenuInputWrapperComponent.cmp=defineComponent({type:FilterMenuInputWrapperComponent,selectors:[["kendo-grid-filter-menu-input-wrapper"]],inputs:{currentFilter:"currentFilter",filterService:"filterService"},features:[InheritDefinitionFeature],ngContentSelectors:_c115,decls:2,vars:3,consts:[["textField","text","valueField","value",3,"data","value","valuePrimitive","valueChange"]],template:function(rf,ctx){1&rf&&(projectionDef(),elementStart(0,"kendo-dropdownlist",0),listener("valueChange",(function($event){return ctx.operatorChange($event)})),elementEnd(),projection(1)),2&rf&&property("data",ctx.operators)("value",ctx.currentOperator)("valuePrimitive",!0)},directives:[fesm2015_DropDownListComponent],encapsulation:2}),FilterMenuInputWrapperComponent})(),fesm2015_StringFilterMenuInputComponent=(()=>{class StringFilterMenuInputComponent{constructor(){this.operators=[]}}return StringFilterMenuInputComponent.fac=function(t){return new(t||StringFilterMenuInputComponent)},StringFilterMenuInputComponent.cmp=defineComponent({type:StringFilterMenuInputComponent,selectors:[["kendo-grid-string-filter-menu-input"]],inputs:{operators:"operators",column:"column",filter:"filter",operator:"operator",currentFilter:"currentFilter",filterService:"filterService"},decls:2,vars:8,consts:[[3,"column","filter","operators","defaultOperator","currentFilter","filterService"],["kendoFilterInput","",1,"k-textbox",3,"filterDelay","ngModel"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-grid-filter-menu-input-wrapper",0),element(1,"input",1),elementEnd()),2&rf&&(property("column",ctx.column)("filter",ctx.filter)("operators",ctx.operators)("defaultOperator",ctx.operator)("currentFilter",ctx.currentFilter)("filterService",ctx.filterService),advance(1),property("filterDelay",0)("ngModel",null==ctx.currentFilter?null:ctx.currentFilter.value))},directives:[fesm2015_FilterMenuInputWrapperComponent,forms_DefaultValueAccessor,dist_fesm2015_FilterInputDirective,forms_NgControlStatus,forms_NgModel],encapsulation:2}),StringFilterMenuInputComponent})(),fesm2015_StringFilterMenuComponent=(()=>{class StringFilterMenuComponent extends fesm2015_StringFilterComponent{constructor(localization){super(null,localization),this.logicOperators=logicOperators(this.localization),this.filter={filters:[],logic:"and"},this.extra=!0}get hostClasses(){return!1}get firstFilter(){return setFilter(0,this.filter,(this.column||{}).field,this.operator)}get secondFilter(){return setFilter(1,this.filter,(this.column||{}).field,this.operator)}logicChange(value){this.filter.logic=value}localizationChange(){this.logicOperators=logicOperators(this.localization),super.localizationChange()}}return StringFilterMenuComponent.fac=function(t){return new(t||StringFilterMenuComponent)(directiveInject(fesm2015_LocalizationService))},StringFilterMenuComponent.cmp=defineComponent({type:StringFilterMenuComponent,selectors:[["kendo-grid-string-filter-menu"]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-filtercell",ctx.hostClasses)},inputs:{filter:"filter",extra:"extra",column:"column",filterService:"filterService"},features:[InheritDefinitionFeature],decls:3,vars:7,consts:[[3,"currentFilter","operators","filterService","column","filter"],["class","k-filter-and","textField","text","valueField","value",3,"data","valuePrimitive","value","valueChange",4,"ngIf"],[3,"operators","currentFilter","filterService","column","filter",4,"ngIf"],["textField","text","valueField","value",1,"k-filter-and",3,"data","valuePrimitive","value","valueChange"],[3,"operators","currentFilter","filterService","column","filter"]],template:function(rf,ctx){1&rf&&(element(0,"kendo-grid-string-filter-menu-input",0),template(1,StringFilterMenuComponent_kendo_dropdownlist_1_Template,1,3,"kendo-dropdownlist",1),template(2,StringFilterMenuComponent_kendo_grid_string_filter_menu_input_2_Template,1,5,"kendo-grid-string-filter-menu-input",2)),2&rf&&(property("currentFilter",ctx.firstFilter)("operators",ctx.operators)("filterService",ctx.filterService)("column",ctx.column)("filter",ctx.filter),advance(1),property("ngIf",ctx.extra),advance(1),property("ngIf",ctx.extra))},directives:[fesm2015_StringFilterMenuInputComponent,common_NgIf,fesm2015_DropDownListComponent],encapsulation:2}),StringFilterMenuComponent})(),fesm2015_NumericFilterMenuComponent=(()=>{class NumericFilterMenuComponent extends fesm2015_NumericFilterComponent{constructor(localization){super(null,localization),this.logicOperators=logicOperators(this.localization),this.filter={filters:[],logic:"and"},this.extra=!0}get hostClasses(){return!1}get firstFilter(){return setFilter(0,this.filter,(this.column||{}).field,this.operator)}get secondFilter(){return setFilter(1,this.filter,(this.column||{}).field,this.operator)}logicChange(value){this.filter.logic=value}localizationChange(){this.logicOperators=logicOperators(this.localization),super.localizationChange()}}return NumericFilterMenuComponent.fac=function(t){return new(t||NumericFilterMenuComponent)(directiveInject(fesm2015_LocalizationService))},NumericFilterMenuComponent.cmp=defineComponent({type:NumericFilterMenuComponent,selectors:[["kendo-grid-numeric-filter-menu"]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-filtercell",ctx.hostClasses)},inputs:{filter:"filter",extra:"extra",column:"column",filterService:"filterService"},features:[InheritDefinitionFeature],decls:3,vars:13,consts:[[3,"currentFilter","operators","filterService","column","filter","format","decimals","spinners","min","max","step"],["class","k-filter-and","textField","text","valueField","value",3,"data","valuePrimitive","value","valueChange",4,"ngIf"],[3,"operators","currentFilter","filterService","column","filter","format","decimals","spinners","min","max","step",4,"ngIf"],["textField","text","valueField","value",1,"k-filter-and",3,"data","valuePrimitive","value","valueChange"],[3,"operators","currentFilter","filterService","column","filter","format","decimals","spinners","min","max","step"]],template:function(rf,ctx){1&rf&&(element(0,"kendo-grid-numeric-filter-menu-input",0),template(1,NumericFilterMenuComponent_kendo_dropdownlist_1_Template,1,3,"kendo-dropdownlist",1),template(2,NumericFilterMenuComponent_kendo_grid_numeric_filter_menu_input_2_Template,1,11,"kendo-grid-numeric-filter-menu-input",2)),2&rf&&(property("currentFilter",ctx.firstFilter)("operators",ctx.operators)("filterService",ctx.filterService)("column",ctx.column)("filter",ctx.filter)("format",ctx.format)("decimals",ctx.decimals)("spinners",ctx.spinners)("min",ctx.min)("max",ctx.max)("step",ctx.step),advance(1),property("ngIf",ctx.extra),advance(1),property("ngIf",ctx.extra))},directives:function(){return[fesm2015_NumericFilterMenuInputComponent,common_NgIf,fesm2015_DropDownListComponent]},encapsulation:2}),NumericFilterMenuComponent})(),fesm2015_NumericFilterMenuInputComponent=(()=>{class NumericFilterMenuInputComponent{constructor(){this.operators=[],this.step=1,this.spinners=!0}}return NumericFilterMenuInputComponent.fac=function(t){return new(t||NumericFilterMenuInputComponent)},NumericFilterMenuInputComponent.cmp=defineComponent({type:NumericFilterMenuInputComponent,selectors:[["kendo-grid-numeric-filter-menu-input"]],inputs:{operators:"operators",step:"step",spinners:"spinners",column:"column",filter:"filter",operator:"operator",currentFilter:"currentFilter",filterService:"filterService",min:"min",max:"max",decimals:"decimals",format:"format"},decls:2,vars:15,consts:[[3,"column","filter","operators","defaultOperator","currentFilter","filterService"],["kendoFilterInput","",3,"filterDelay","autoCorrect","value","format","decimals","spinners","min","max","step"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-grid-filter-menu-input-wrapper",0),element(1,"kendo-numerictextbox",1),elementEnd()),2&rf&&(property("column",ctx.column)("filter",ctx.filter)("operators",ctx.operators)("defaultOperator",ctx.operator)("currentFilter",ctx.currentFilter)("filterService",ctx.filterService),advance(1),property("filterDelay",0)("autoCorrect",!0)("value",null==ctx.currentFilter?null:ctx.currentFilter.value)("format",ctx.format)("decimals",ctx.decimals)("spinners",ctx.spinners)("min",ctx.min)("max",ctx.max)("step",ctx.step))},directives:[fesm2015_FilterMenuInputWrapperComponent,fesm2015_NumericTextBoxComponent,dist_fesm2015_FilterInputDirective],encapsulation:2}),NumericFilterMenuInputComponent})(),fesm2015_DateFilterMenuComponent=(()=>{class DateFilterMenuComponent extends fesm2015_DateFilterComponent{constructor(localization){super(null,localization),this.logicOperators=logicOperators(this.localization),this.filter={filters:[],logic:"and"},this.extra=!0}get hostClasses(){return!1}get firstFilter(){return setFilter(0,this.filter,(this.column||{}).field,this.operator)}get secondFilter(){return setFilter(1,this.filter,(this.column||{}).field,this.operator)}logicChange(value){this.filter.logic=value}localizationChange(){this.logicOperators=logicOperators(this.localization),super.localizationChange()}}return DateFilterMenuComponent.fac=function(t){return new(t||DateFilterMenuComponent)(directiveInject(fesm2015_LocalizationService))},DateFilterMenuComponent.cmp=defineComponent({type:DateFilterMenuComponent,selectors:[["kendo-grid-date-filter-menu"]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-filtercell",ctx.hostClasses)},inputs:{filter:"filter",extra:"extra",column:"column",filterService:"filterService"},features:[InheritDefinitionFeature],decls:3,vars:16,consts:[[3,"currentFilter","operators","filterService","column","filter","activeView","bottomView","topView","format","formatPlaceholder","placeholder","min","max","weekNumber"],["class","k-filter-and","textField","text","valueField","value",3,"data","valuePrimitive","value","valueChange",4,"ngIf"],[3,"operators","currentFilter","filterService","column","filter","activeView","bottomView","topView","format","formatPlaceholder","placeholder","min","max","weekNumber",4,"ngIf"],["textField","text","valueField","value",1,"k-filter-and",3,"data","valuePrimitive","value","valueChange"],[3,"operators","currentFilter","filterService","column","filter","activeView","bottomView","topView","format","formatPlaceholder","placeholder","min","max","weekNumber"]],template:function(rf,ctx){1&rf&&(element(0,"kendo-grid-date-filter-menu-input",0),template(1,DateFilterMenuComponent_kendo_dropdownlist_1_Template,1,3,"kendo-dropdownlist",1),template(2,DateFilterMenuComponent_kendo_grid_date_filter_menu_input_2_Template,1,14,"kendo-grid-date-filter-menu-input",2)),2&rf&&(property("currentFilter",ctx.firstFilter)("operators",ctx.operators)("filterService",ctx.filterService)("column",ctx.column)("filter",ctx.filter)("activeView",ctx.activeView)("bottomView",ctx.bottomView)("topView",ctx.topView)("format",ctx.format)("formatPlaceholder",ctx.formatPlaceholder)("placeholder",ctx.placeholder)("min",ctx.min)("max",ctx.max)("weekNumber",ctx.weekNumber),advance(1),property("ngIf",ctx.extra),advance(1),property("ngIf",ctx.extra))},directives:function(){return[fesm2015_DateFilterMenuInputComponent,common_NgIf,fesm2015_DropDownListComponent]},encapsulation:2}),DateFilterMenuComponent})(),fesm2015_BooleanFilterMenuComponent=(()=>{class BooleanFilterMenuComponent extends fesm2015_BooleanFilterComponent{constructor(localization){super(null,localization),this.filter={filters:[],logic:"and"},this.idPrefix=guid()}get hostClasses(){return!1}radioId(value){return`${this.idPrefix}_${value}`}onChange(value){this.applyFilter(this.updateFilter({field:this.column.field,operator:"eq",value:value}))}isSelected(radioValue){return this.filtersByField(this.column.field).some(({value:value})=>value===radioValue)}}return BooleanFilterMenuComponent.fac=function(t){return new(t||BooleanFilterMenuComponent)(directiveInject(fesm2015_LocalizationService))},BooleanFilterMenuComponent.cmp=defineComponent({type:BooleanFilterMenuComponent,selectors:[["kendo-grid-boolean-filter-menu"]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-filtercell",ctx.hostClasses)},inputs:{filter:"filter",filterService:"filterService"},features:[InheritDefinitionFeature],decls:2,vars:1,consts:[[1,"k-radio-list","k-reset"],[4,"ngFor","ngForOf"],["type","radio",1,"k-radio",3,"name","checked","change"],[1,"k-radio-label"]],template:function(rf,ctx){1&rf&&(elementStart(0,"ul",0),template(1,BooleanFilterMenuComponent_li_1_Template,4,5,"li",1),elementEnd()),2&rf&&(advance(1),property("ngForOf",ctx.items))},directives:[common_NgForOf],encapsulation:2}),BooleanFilterMenuComponent})(),fesm2015_FilterMenuHostDirective=(()=>{class FilterMenuHostDirective extends fesm2015_FilterHostDirective{constructor(host,resolver){super(host,resolver)}componentType(){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.column)&&!fesm2015_isNullOrEmptyString(this.column.filter)?{boolean:fesm2015_BooleanFilterMenuComponent,date:fesm2015_DateFilterMenuComponent,numeric:fesm2015_NumericFilterMenuComponent,text:fesm2015_StringFilterMenuComponent}[this.column.filter]:fesm2015_StringFilterMenuComponent}initComponent(ctx){super.initComponent(ctx),this.component.instance.filterService=this.filterService}}return FilterMenuHostDirective.fac=function(t){return new(t||FilterMenuHostDirective)(directiveInject(ViewContainerRef),directiveInject(ComponentFactoryResolver))},FilterMenuHostDirective.dir=defineDirective({type:FilterMenuHostDirective,selectors:[["","kendoFilterMenuHost",""]],inputs:{filterService:"filterService"},features:[InheritDefinitionFeature]}),FilterMenuHostDirective})(),fesm2015_DateFilterMenuInputComponent=(()=>{class DateFilterMenuInputComponent{constructor(popupService){this.popupService=popupService,this.operators=[]}open(picker){this.subscription=this.popupService.onClose.pipe(filter_filter(()=>picker.isActive)).subscribe(e=>e.preventDefault())}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return DateFilterMenuInputComponent.fac=function(t){return new(t||DateFilterMenuInputComponent)(directiveInject(fesm2015_SinglePopupService))},DateFilterMenuInputComponent.cmp=defineComponent({type:DateFilterMenuInputComponent,selectors:[["kendo-grid-date-filter-menu-input"]],inputs:{operators:"operators",column:"column",filter:"filter",operator:"operator",currentFilter:"currentFilter",filterService:"filterService",format:"format",formatPlaceholder:"formatPlaceholder",placeholder:"placeholder",min:"min",max:"max",activeView:"activeView",bottomView:"bottomView",topView:"topView",weekNumber:"weekNumber"},decls:3,vars:17,consts:[[3,"column","filter","operators","defaultOperator","currentFilter","filterService"],["kendoFilterInput","",3,"filterDelay","value","placeholder","formatPlaceholder","format","min","max","activeView","bottomView","topView","weekNumber","open"],["picker",""]],template:function(rf,ctx){if(1&rf){const _r1=getCurrentView();elementStart(0,"kendo-grid-filter-menu-input-wrapper",0),elementStart(1,"kendo-datepicker",1,2),listener("open",(function(){restoreView(_r1);const _r0=reference(2);return ctx.open(_r0)})),elementEnd(),elementEnd()}2&rf&&(property("column",ctx.column)("filter",ctx.filter)("operators",ctx.operators)("defaultOperator",ctx.operator)("currentFilter",ctx.currentFilter)("filterService",ctx.filterService),advance(1),property("filterDelay",0)("value",null==ctx.currentFilter?null:ctx.currentFilter.value)("placeholder",ctx.placeholder)("formatPlaceholder",ctx.formatPlaceholder)("format",ctx.format)("min",ctx.min)("max",ctx.max)("activeView",ctx.activeView)("bottomView",ctx.bottomView)("topView",ctx.topView)("weekNumber",ctx.weekNumber))},directives:[fesm2015_FilterMenuInputWrapperComponent,fesm2015_DatePickerComponent,dist_fesm2015_FilterInputDirective],encapsulation:2}),DateFilterMenuInputComponent})(),fesm2015_FilterMenuModule=(()=>{class FilterMenuModule{static exports(){return[fesm2015_StringFilterMenuComponent,fesm2015_FilterMenuTemplateDirective,fesm2015_NumericFilterMenuComponent,fesm2015_DateFilterMenuComponent,fesm2015_BooleanFilterMenuComponent,fesm2015_SharedFilterModule.exports()]}}return FilterMenuModule.mod=defineNgModule({type:FilterMenuModule}),FilterMenuModule.inj=defineInjector({factory:function(t){return new(t||FilterMenuModule)},imports:[[fesm2015_SharedFilterModule],fesm2015_SharedFilterModule]}),FilterMenuModule})(),fesm2015_ColumnListComponent=(()=>{class ColumnListComponent{constructor(element,ngZone,renderer){this.element=element,this.ngZone=ngZone,this.renderer=renderer,this.reset=new core_EventEmitter,this.apply=new core_EventEmitter,this.columnChange=new core_EventEmitter,this.autoSync=!0,this.allowHideAll=!1,this.actionsClass="k-action-buttons",this.unlockedCount=0}get className(){return!0}set columns(value){this._columns=value.filter(column=>!1!==column.includeInChooser),this.allColumns=value,this.updateColumnState()}get columns(){return this._columns}isDisabled(column){return!(this.allowHideAll||this.hasFiltered||column.hidden||this.columns.find(current=>current!==column&&!current.hidden))||this.hasVisibleLocked&&!this.hasUnlockedFiltered&&1===this.unlockedCount&&!column.locked&&!column.hidden}ngOnInit(){this.element&&this.ngZone.runOutsideAngular(()=>{this.domSubscriptions=this.renderer.listen(this.element.nativeElement,"click",e=>{if(hasClasses(e.target,"k-checkbox"))if(this.autoSync){const index=parseInt(e.target.getAttribute("data-index"),10),column=this.columns[index],hidden=!e.target.checked;Boolean(column.hidden)!==hidden&&this.ngZone.run(()=>{column.hidden=hidden,this.columnChange.emit([column])})}else this.updateDisabled()})})}ngOnDestroy(){this.domSubscriptions&&this.domSubscriptions()}cancelChanges(){this.forEachCheckBox((element,index)=>{element.checked=!this.columns[index].hidden}),this.updateDisabled(),this.reset.emit()}applyChanges(){const changed=[];this.forEachCheckBox((element,index)=>{const column=this.columns[index],hidden=!element.checked;Boolean(column.hidden)!==hidden&&(column.hidden=hidden,changed.push(column))}),this.updateDisabled(),this.apply.emit(changed)}forEachCheckBox(callback){const checkboxes=this.element.nativeElement.getElementsByClassName("k-checkbox"),length=checkboxes.length;for(let idx=0;idx<length;idx++)callback(checkboxes[idx],idx)}updateDisabled(){if(this.allowHideAll&&!this.hasLocked)return;const checkedItems=[];if(this.forEachCheckBox((checkbox,index)=>{checkbox.checked&&checkedItems.push({checkbox:checkbox,index:index}),checkbox.disabled=!1}),this.allowHideAll||1!==checkedItems.length||this.hasFiltered){if(this.hasLocked&&!this.hasUnlockedFiltered){const columns=this.columns,checkedUnlocked=checkedItems.filter(item=>!columns[item.index].locked);1===checkedUnlocked.length&&(checkedUnlocked[0].checkbox.disabled=!0)}}else checkedItems[0].checkbox.disabled=!0}updateColumnState(){this.hasLocked=this.allColumns.filter(column=>column.locked&&(!column.hidden||!1!==column.includeInChooser)).length>0,this.hasVisibleLocked=this.allColumns.filter(column=>column.locked&&!column.hidden).length>0,this.unlockedCount=this.columns.filter(column=>!column.locked&&!column.hidden).length;const filteredColumns=this.allColumns.filter(column=>!1===column.includeInChooser&&!column.hidden);filteredColumns.length?(this.hasFiltered=filteredColumns.length>0,this.hasUnlockedFiltered=filteredColumns.filter(column=>!column.locked).length>0):(this.hasFiltered=!1,this.hasUnlockedFiltered=!1)}}return ColumnListComponent.fac=function(t){return new(t||ColumnListComponent)(directiveInject(ElementRef),directiveInject(NgZone),directiveInject(Renderer2))},ColumnListComponent.cmp=defineComponent({type:ColumnListComponent,selectors:[["kendo-grid-columnlist"]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-column-list-wrapper",ctx.className)},inputs:{autoSync:"autoSync",allowHideAll:"allowHideAll",actionsClass:"actionsClass",columns:"columns",applyText:"applyText",resetText:"resetText"},outputs:{reset:"reset",apply:"apply",columnChange:"columnChange"},decls:3,vars:2,consts:[[1,"k-column-list"],["class","k-column-list-item",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngIf"],[1,"k-column-list-item"],["type","checkbox",1,"k-checkbox",3,"checked","disabled"],[1,"k-checkbox-label"],[3,"ngClass"],["type","button",1,"k-button",3,"click"],["type","button",1,"k-button","k-primary",3,"click"]],template:function(rf,ctx){1&rf&&(elementStart(0,"div",0),template(1,ColumnListComponent_label_1_Template,4,4,"label",1),elementEnd(),template(2,ColumnListComponent_div_2_Template,5,3,"div",2)),2&rf&&(advance(1),property("ngForOf",ctx.columns),advance(1),property("ngIf",!ctx.autoSync))},directives:[common_NgForOf,common_NgIf,common_NgClass],encapsulation:2}),ColumnListComponent})(),fesm2015_ColumnChooserComponent=(()=>{class ColumnChooserComponent{constructor(localization,columnInfoService,popupService,ngZone,renderer,changeDetector){this.localization=localization,this.columnInfoService=columnInfoService,this.popupService=popupService,this.ngZone=ngZone,this.renderer=renderer,this.changeDetector=changeDetector,this.autoSync=!1,this.allowHideAll=!0}get columns(){return this.columnInfoService.leafNamedColumns}ngOnDestroy(){this.close()}toggle(anchor,template){if(this.popupRef)this.close();else{const direction=this.localization.rtl?"right":"left";this.popupRef=this.popupService.open({anchor:anchor,content:template,positionMode:"absolute",anchorAlign:{vertical:"bottom",horizontal:direction},popupAlign:{vertical:"top",horizontal:direction}}),this.renderer.setAttribute(this.popupRef.popupElement,"dir",this.localization.rtl?"rtl":"ltr"),this.ngZone.runOutsideAngular(()=>this.closeClick=this.renderer.listen("document","click",({target:target})=>{dist_fesm2015_closest(target,node=>node===this.popupRef.popupElement||node===anchor)||this.close()}))}}onApply(changed){this.close(),changed.length&&(this.changeDetector.markForCheck(),this.columnInfoService.changeVisibility(changed))}onChange(changed){this.changeDetector.markForCheck(),this.columnInfoService.changeVisibility(changed)}close(){this.popupRef&&(this.popupRef.close(),this.popupRef=null),this.detachClose()}detachClose(){this.closeClick&&(this.closeClick(),this.closeClick=null)}}return ColumnChooserComponent.fac=function(t){return new(t||ColumnChooserComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_ColumnInfoService),directiveInject(fesm2015_PopupService),directiveInject(NgZone),directiveInject(Renderer2),directiveInject(ChangeDetectorRef))},ColumnChooserComponent.cmp=defineComponent({type:ColumnChooserComponent,selectors:[["kendo-grid-column-chooser"]],inputs:{autoSync:"autoSync",allowHideAll:"allowHideAll"},decls:5,vars:1,consts:[["type","button",1,"k-button","k-bare","k-button-icon",3,"click"],["anchor",""],[1,"k-icon","k-i-columns"],["template",""],[1,"k-column-chooser-title"],[3,"columns","applyText","resetText","autoSync","allowHideAll","apply","columnChange"]],template:function(rf,ctx){if(1&rf){const _r6=getCurrentView();elementStart(0,"button",0,1),listener("click",(function(){restoreView(_r6);const _r0=reference(1),_r1=reference(4);return ctx.toggle(_r0,_r1)})),element(2,"span",2),elementEnd(),template(3,ColumnChooserComponent_ng_template_3_Template,3,6,"ng-template",null,3,templateRefExtractor)}2&rf&&attribute("title",ctx.localization.get("columns"))},directives:[fesm2015_ColumnListComponent],encapsulation:2}),ColumnChooserComponent})(),fesm2015_ColumnMenuService=(()=>{class ColumnMenuService{constructor(){this.closeMenu=new core_EventEmitter}close(){this.closeMenu.emit()}}return ColumnMenuService.fac=function(t){return new(t||ColumnMenuService)},ColumnMenuService.prov=defineInjectable({token:ColumnMenuService,factory:ColumnMenuService.fac}),ColumnMenuService})(),fesm2015_ColumnMenuItemBase=(()=>{class ColumnMenuItemBase{constructor(){this.hostClass=!0}ngOnInit(){if(isDevMode()&&!this.service)throw new Error("The service input of the predefined column menu components is mandatory.")}close(){this.service.close()}}return ColumnMenuItemBase.fac=function(t){return new(t||ColumnMenuItemBase)},ColumnMenuItemBase.dir=defineDirective({type:ColumnMenuItemBase,hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-columnmenu-item-wrapper",ctx.hostClass)},inputs:{service:"service"}}),ColumnMenuItemBase})(),fesm2015_ColumnMenuChooserComponent=(()=>{class ColumnMenuChooserComponent extends fesm2015_ColumnMenuItemBase{constructor(localization,columnInfoService,changeDetector){super(),this.localization=localization,this.columnInfoService=columnInfoService,this.changeDetector=changeDetector,this.expand=new core_EventEmitter,this.collapse=new core_EventEmitter,this.expanded=!1,this.actionsClass="k-columnmenu-actions"}get columns(){return this.columnInfoService.leafNamedColumns}onApply(changed){this.close(),changed.length&&(this.changeDetector.markForCheck(),this.columnInfoService.changeVisibility(changed))}}return ColumnMenuChooserComponent.fac=function(t){return new(t||ColumnMenuChooserComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_ColumnInfoService),directiveInject(ChangeDetectorRef))},ColumnMenuChooserComponent.cmp=defineComponent({type:ColumnMenuChooserComponent,selectors:[["kendo-grid-columnmenu-chooser"]],inputs:{expanded:"expanded"},outputs:{expand:"expand",collapse:"collapse"},features:[InheritDefinitionFeature],decls:2,vars:2,consts:[["icon","columns",3,"text","expanded","collapse","expand"],["kendoGridColumnMenuItemContentTemplate",""],[3,"applyText","resetText","columns","autoSync","allowHideAll","actionsClass","apply"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-grid-columnmenu-item",0),listener("collapse",(function(){return ctx.collapse.emit()}))("expand",(function(){return ctx.expand.emit()})),template(1,ColumnMenuChooserComponent_ng_template_1_Template,1,6,"ng-template",1),elementEnd()),2&rf&&property("text",ctx.localization.get("columns"))("expanded",ctx.expanded)},directives:function(){return[fesm2015_ColumnMenuItemComponent,fesm2015_ColumnMenuItemContentTemplateDirective,fesm2015_ColumnListComponent]},encapsulation:2}),ColumnMenuChooserComponent})(),fesm2015_ColumnMenuFilterComponent=(()=>{class ColumnMenuFilterComponent extends fesm2015_ColumnMenuItemBase{constructor(localization){super(),this.localization=localization,this.expand=new core_EventEmitter,this.collapse=new core_EventEmitter,this.expanded=!1,this.actionsClass="k-columnmenu-actions"}}return ColumnMenuFilterComponent.fac=function(t){return new(t||ColumnMenuFilterComponent)(directiveInject(fesm2015_LocalizationService))},ColumnMenuFilterComponent.cmp=defineComponent({type:ColumnMenuFilterComponent,selectors:[["kendo-grid-columnmenu-filter"]],inputs:{expanded:"expanded"},outputs:{expand:"expand",collapse:"collapse"},features:[InheritDefinitionFeature],decls:2,vars:2,consts:[["icon","filter",3,"text","expanded","collapse","expand"],["kendoGridColumnMenuItemContentTemplate",""],[3,"column","filter","actionsClass","close"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-grid-columnmenu-item",0),listener("collapse",(function(){return ctx.collapse.emit()}))("expand",(function(){return ctx.expand.emit()})),template(1,ColumnMenuFilterComponent_ng_template_1_Template,1,3,"ng-template",1),elementEnd()),2&rf&&property("text",ctx.localization.get("filter"))("expanded",ctx.expanded)},directives:function(){return[fesm2015_ColumnMenuItemComponent,fesm2015_ColumnMenuItemContentTemplateDirective,fesm2015_FilterMenuContainerComponent]},encapsulation:2}),ColumnMenuFilterComponent})(),fesm2015_ColumnMenuItemContentTemplateDirective=(()=>{class ColumnMenuItemContentTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return ColumnMenuItemContentTemplateDirective.fac=function(t){return new(t||ColumnMenuItemContentTemplateDirective)(directiveInject(TemplateRef,8))},ColumnMenuItemContentTemplateDirective.dir=defineDirective({type:ColumnMenuItemContentTemplateDirective,selectors:[["","kendoGridColumnMenuItemContentTemplate",""]]}),ColumnMenuItemContentTemplateDirective})(),fesm2015_ColumnMenuItemComponent=(()=>{class ColumnMenuItemComponent{constructor(){this.itemClick=new core_EventEmitter,this.expand=new core_EventEmitter,this.collapse=new core_EventEmitter,this.contentState="collapsed"}get iconClass(){return"k-i-"+this.icon}ngOnChanges(changes){changes.expanded&&this.updateContentState()}onClick(e){this.itemClick.emit(e),this.contentTemplate&&(this.expanded=!this.expanded,this.updateContentState(),this.expanded?this.expand.emit():this.collapse.emit())}updateContentState(){this.contentState=this.expanded?"expanded":"collapsed"}}return ColumnMenuItemComponent.fac=function(t){return new(t||ColumnMenuItemComponent)},ColumnMenuItemComponent.cmp=defineComponent({type:ColumnMenuItemComponent,selectors:[["kendo-grid-columnmenu-item"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,fesm2015_ColumnMenuItemContentTemplateDirective,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.contentTemplate=_t.first)},inputs:{expanded:"expanded",icon:"icon",text:"text",selected:"selected",disabled:"disabled"},outputs:{itemClick:"itemClick",expand:"expand",collapse:"collapse"},features:[NgOnChangesFeature],decls:4,vars:7,consts:[[1,"k-columnmenu-item",3,"click"],["class","k-icon",3,"ngClass",4,"ngIf"],["style","overflow:hidden;","class","k-columnmenu-item-content",4,"ngIf"],[1,"k-icon",3,"ngClass"],[1,"k-columnmenu-item-content",2,"overflow","hidden"],[3,"ngTemplateOutlet"]],template:function(rf,ctx){1&rf&&(elementStart(0,"div",0),listener("click",(function($event){return ctx.onClick($event)})),template(1,ColumnMenuItemComponent_span_1_Template,1,1,"span",1),text(2),elementEnd(),template(3,ColumnMenuItemComponent_div_3_Template,3,2,"div",2)),2&rf&&(classProp("k-state-selected",ctx.selected)("k-state-disabled",ctx.disabled),advance(1),property("ngIf",ctx.icon),advance(1),textInterpolate1(" ",ctx.text," "),advance(1),property("ngIf",ctx.contentTemplate))},directives:[common_NgIf,common_NgClass,common_NgTemplateOutlet],encapsulation:2,data:{animation:[trigger("state",[animations_state("collapsed",animations_style({display:"none"})),animations_state("expanded",animations_style({display:"block"})),animations_transition("collapsed => expanded",[animations_style({height:"0px",display:"block"}),animations_animate("100ms ease-in",animations_style({height:"*"}))]),animations_transition("expanded => collapsed",[animations_style({height:"*"}),animations_animate("100ms ease-in",animations_style({height:"0px"}))])])]}}),ColumnMenuItemComponent})(),fesm2015_ColumnMenuSortComponent=(()=>{class ColumnMenuSortComponent extends fesm2015_ColumnMenuItemBase{constructor(localization,sortService){super(),this.localization=localization,this.sortService=sortService}get sortedAsc(){const descriptor=this.descriptor;return descriptor&&(!descriptor.dir||"asc"===descriptor.dir)}get sortedDesc(){const descriptor=this.descriptor;return descriptor&&"desc"===descriptor.dir}toggleSort(dir){const field=this.service.column.field,{mode:mode,allowUnsort:allowUnsort}=normalize$1(this.service.sortable),descriptor=this.descriptor,sort="multiple"===mode?this.service.sort.filter(s=>s.field!==field):[];if(descriptor&&descriptor.dir===dir){if(!allowUnsort)return}else sort.push({field:field,dir:dir});this.sortService.sort(sort),this.close()}get descriptor(){return[].concat(this.service.sort||[]).find(s=>s.field===this.service.column.field)}}return ColumnMenuSortComponent.fac=function(t){return new(t||ColumnMenuSortComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_SortService))},ColumnMenuSortComponent.cmp=defineComponent({type:ColumnMenuSortComponent,selectors:[["kendo-grid-columnmenu-sort"]],features:[InheritDefinitionFeature],decls:2,vars:4,consts:[["icon","sort-asc-sm",3,"text","selected","itemClick"],["icon","sort-desc-sm",3,"text","selected","itemClick"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-grid-columnmenu-item",0),listener("itemClick",(function(){return ctx.toggleSort("asc")})),elementEnd(),elementStart(1,"kendo-grid-columnmenu-item",1),listener("itemClick",(function(){return ctx.toggleSort("desc")})),elementEnd()),2&rf&&(property("text",ctx.localization.get("sortAscending"))("selected",ctx.sortedAsc),advance(1),property("text",ctx.localization.get("sortDescending"))("selected",ctx.sortedDesc))},directives:[fesm2015_ColumnMenuItemComponent],encapsulation:2}),ColumnMenuSortComponent})(),fesm2015_ColumnMenuComponent=(()=>{class ColumnMenuComponent{constructor(popupService,localization,service){this.popupService=popupService,this.localization=localization,this.service=service,this.standalone=!0,this.settings={},this.sortable=!0,this.expandedFilter=!1,this.expandedColumns=!1,this.closeSubscription=service.closeMenu.subscribe(this.close.bind(this))}get isActive(){return this.hasFilter&&filtersByField(this.filter,this.column.field).length>0||!this.sortable&&this.hasSort&&this.sort.find(descriptor=>descriptor.field===this.column.field)}get hasFilter(){return hasFilter(this.settings,this.column)}get hasSort(){return hasSort(this.settings,this.column)}get hasColumnChooser(){return hasColumnChooser(this.settings)}get hasLock(){return hasLock(this.settings,this.column)}ngOnChanges(){this.service.column=this.column,this.service.sort=this.sort,this.service.filter=this.filter,this.service.sortable=this.sortable}ngOnDestroy(){this.close(),this.closeSubscription.unsubscribe()}toggle(e,anchor,template){e.preventDefault(),this.expandedFilter=!this.hasColumnChooser,this.expandedColumns=!this.hasFilter,this.popupRef=this.popupService.open(anchor,template,this.popupRef,"k-grid-columnmenu-popup")}close(){this.popupService.destroy(),this.popupRef=null}onColumnsExpand(){this.expandedColumns=!0,this.expandedFilter=!1}onFilterExpand(){this.expandedFilter=!0,this.expandedColumns=!1}}return ColumnMenuComponent.fac=function(t){return new(t||ColumnMenuComponent)(directiveInject(fesm2015_SinglePopupService),directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_ColumnMenuService))},ColumnMenuComponent.cmp=defineComponent({type:ColumnMenuComponent,selectors:[["kendo-grid-column-menu"]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-grid-column-menu-standalone",ctx.standalone)},inputs:{standalone:"standalone",settings:"settings",sortable:"sortable",column:"column",sort:"sort",filter:"filter",columnMenuTemplate:"columnMenuTemplate"},features:[ProvidersFeature([fesm2015_ColumnMenuService]),NgOnChangesFeature],decls:7,vars:4,consts:[["href","#","tabindex","-1",1,"k-grid-column-menu","k-grid-filter",3,"ngClass","click"],["anchor",""],[1,"k-icon","k-i-more-vertical"],["template",""],["defaultTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"service",4,"ngIf"],[3,"service","expanded","expand",4,"ngIf"],[3,"service"],[3,"service","expanded","expand"]],template:function(rf,ctx){if(1&rf){const _r13=getCurrentView();elementStart(0,"a",0,1),listener("click",(function($event){restoreView(_r13);const _r0=reference(1),_r1=reference(4);return ctx.toggle($event,_r0,_r1)})),element(2,"span",2),elementEnd(),template(3,ColumnMenuComponent_ng_template_3_Template,1,5,"ng-template",null,3,templateRefExtractor),template(5,ColumnMenuComponent_ng_template_5_Template,4,4,"ng-template",null,4,templateRefExtractor)}2&rf&&(property("ngClass",pureFunction1(2,_c146,ctx.isActive)),attribute("title",ctx.localization.get("columnMenu")))},directives:function(){return[common_NgClass,common_NgTemplateOutlet,common_NgIf,fesm2015_ColumnMenuSortComponent,fesm2015_ColumnMenuLockComponent,fesm2015_ColumnMenuChooserComponent,fesm2015_ColumnMenuFilterComponent]},encapsulation:2}),ColumnMenuComponent})(),fesm2015_ColumnMenuLockComponent=(()=>{class ColumnMenuLockComponent extends fesm2015_ColumnMenuItemBase{constructor(localization,columnInfoService,changeDetector){super(),this.localization=localization,this.columnInfoService=columnInfoService,this.changeDetector=changeDetector}get text(){return this.localization.get(this.locked?"unlock":"lock")}get icon(){return this.locked?"unlock":"lock"}get disabled(){return!this.locked&&this.columnInfoService.unlockedRootCount<2}toggleColumn(){this.toggleHierarchy(!this.locked),this.close(),this.changeDetector.markForCheck()}toggleHierarchy(locked){let root=this.service.column;for(;root.parent;)root=root.parent;const columns=[root],allChanged=[];for(;columns.length;){const column=columns.shift();column.locked=locked,allChanged.push(column),column.hasChildren&&columns.push(...column.childrenArray)}this.columnInfoService.changeLocked(allChanged)}get locked(){return this.service.column.locked}}return ColumnMenuLockComponent.fac=function(t){return new(t||ColumnMenuLockComponent)(directiveInject(fesm2015_LocalizationService),directiveInject(fesm2015_ColumnInfoService),directiveInject(ChangeDetectorRef))},ColumnMenuLockComponent.cmp=defineComponent({type:ColumnMenuLockComponent,selectors:[["kendo-grid-columnmenu-lock"]],features:[InheritDefinitionFeature],decls:1,vars:3,consts:[[3,"text","icon","disabled","itemClick"]],template:function(rf,ctx){1&rf&&(elementStart(0,"kendo-grid-columnmenu-item",0),listener("itemClick",(function(){return ctx.toggleColumn()})),elementEnd()),2&rf&&property("text",ctx.text)("icon",ctx.icon)("disabled",ctx.disabled)},directives:[fesm2015_ColumnMenuItemComponent],encapsulation:2}),ColumnMenuLockComponent})(),fesm2015_ColumnMenuModule=(()=>{class ColumnMenuModule{static exports(){return[fesm2015_ColumnChooserComponent,fesm2015_ColumnMenuFilterComponent,fesm2015_ColumnMenuItemComponent,fesm2015_ColumnMenuItemContentTemplateDirective,fesm2015_ColumnMenuSortComponent,fesm2015_ColumnMenuLockComponent,fesm2015_ColumnMenuChooserComponent,fesm2015_ColumnMenuTemplateDirective,fesm2015_ColumnMenuComponent]}}return ColumnMenuModule.mod=defineNgModule({type:ColumnMenuModule}),ColumnMenuModule.inj=defineInjector({factory:function(t){return new(t||ColumnMenuModule)},imports:[[common_CommonModule,fesm2015_FilterMenuModule]]}),ColumnMenuModule})();const importedModules$2=[common_CommonModule,fesm2015_GroupModule,fesm2015_RowFilterModule,fesm2015_FilterMenuModule,dist_fesm2015_SharedModule,fesm2015_DragAndDropModule,fesm2015_ColumnMenuModule];let fesm2015_HeaderModule=(()=>{class HeaderModule{static exports(){return[dist_fesm2015_HeaderTemplateDirective,fesm2015_SelectAllCheckboxDirective]}}return HeaderModule.mod=defineNgModule({type:HeaderModule}),HeaderModule.inj=defineInjector({factory:function(t){return new(t||HeaderModule)},imports:[[...importedModules$2]]}),HeaderModule})(),fesm2015_CommandColumnComponent=(()=>{class CommandColumnComponent extends fesm2015_ColumnBase$1{constructor(parent){super(parent),this.parent=parent}get templateRef(){return this.template?this.template.templateRef:void 0}}return CommandColumnComponent.fac=function(t){return new(t||CommandColumnComponent)(directiveInject(fesm2015_ColumnBase$1,13))},CommandColumnComponent.cmp=defineComponent({type:CommandColumnComponent,selectors:[["kendo-grid-command-column"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,dist_fesm2015_CellTemplateDirective,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.template=_t.first)},features:[ProvidersFeature([{provide:fesm2015_ColumnBase$1,useExisting:forwardRef(()=>CommandColumnComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),CommandColumnComponent})(),fesm2015_CheckboxColumnComponent=(()=>{class CheckboxColumnComponent extends fesm2015_ColumnBase$1{constructor(parent){super(parent),this.parent=parent,this.isCheckboxColumn=!0}get templateRef(){return this.template?this.template.templateRef:void 0}}return CheckboxColumnComponent.fac=function(t){return new(t||CheckboxColumnComponent)(directiveInject(fesm2015_ColumnBase$1,13))},CheckboxColumnComponent.cmp=defineComponent({type:CheckboxColumnComponent,selectors:[["kendo-grid-checkbox-column"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,dist_fesm2015_CellTemplateDirective,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.template=_t.first)},inputs:{showSelectAll:"showSelectAll"},features:[ProvidersFeature([{provide:fesm2015_ColumnBase$1,useExisting:forwardRef(()=>CheckboxColumnComponent)}]),InheritDefinitionFeature],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),CheckboxColumnComponent})(),fesm2015_SelectionCheckboxDirective=(()=>{class SelectionCheckboxDirective{constructor(selectionService,el,renderer,ngZone){this.selectionService=selectionService,this.el=el,this.renderer=renderer,this.ngZone=ngZone,this.type="checkbox",this.ngZone.runOutsideAngular(()=>{this.destroyClick=this.renderer.listen(this.el.nativeElement,"click",this.onClick.bind(this)),this.destroyKeyDown=this.renderer.listen(this.el.nativeElement,"keydown",this.onKeyDown.bind(this))})}ngAfterContentChecked(){this.setCheckedState()}ngOnDestroy(){this.destroyClick&&this.destroyClick(),this.destroyKeyDown&&this.destroyKeyDown()}onClick(){this.selectionService.options.enabled&&this.ngZone.run(()=>{const ev=this.selectionService.toggleByIndex(this.itemIndex);ev.ctrlKey=!0,ev.shiftKey=!1,this.selectionService.changes.emit(ev)})}onKeyDown(e){e.keyCode===Keys.Enter&&this.onClick()}setCheckedState(){this.renderer.setProperty(this.el.nativeElement,"checked",this.selectionService.isSelected(this.itemIndex))}}return SelectionCheckboxDirective.fac=function(t){return new(t||SelectionCheckboxDirective)(directiveInject(dist_fesm2015_SelectionService),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(NgZone))},SelectionCheckboxDirective.dir=defineDirective({type:SelectionCheckboxDirective,selectors:[["","kendoGridSelectionCheckbox",""]],hostVars:1,hostBindings:function(rf,ctx){2&rf&&attribute("type",ctx.type)},inputs:{itemIndex:["kendoGridSelectionCheckbox","itemIndex"]}}),SelectionCheckboxDirective})(),fesm2015_TableBodyComponent=(()=>{class TableBodyComponent{constructor(detailsService,groupsService,changeNotification,editService,localization,ngZone,renderer,element,domEvents,selectionService,columnInfoService,navigationService){this.detailsService=detailsService,this.groupsService=groupsService,this.changeNotification=changeNotification,this.editService=editService,this.localization=localization,this.ngZone=ngZone,this.renderer=renderer,this.element=element,this.domEvents=domEvents,this.selectionService=selectionService,this.columnInfoService=columnInfoService,this.navigationService=navigationService,this.columns=[],this.groups=[],this.skip=0,this.noRecordsText=this.localization.get("noRecords"),this.isLocked=!1,this.skipGroupDecoration=!1,this.showGroupFooters=!1,this.lockedColumnsCount=0,this.totalColumnsCount=0,this.trackBy=defaultTrackBy,this.rowClass=()=>null,this.cellKeydownSubscription=this.navigationService.cellKeydown.subscribe(args=>this.cellKeydownHandler(args)),this.trackByWrapper=this.trackByWrapper.bind(this),this.trackByColumns=this.trackByColumns.bind(this)}get newDataItem(){return this.editService.newDataItem}get unlockedColumnsCount(){return this.totalColumnsCount-this.lockedColumnsCount-(this.allColumns||this.columns).length}toggleRow(index,dataItem){return this.detailsService.toggleRow(index,dataItem),!1}isExpanded(viewItem){return this.detailsService.isExpanded(viewItem.index,viewItem.data)}detailButtonStyles(viewItem){return this.isExpanded(viewItem)?"k-minus":"k-plus"}detailButtonTitle(viewItem){const messageKey=this.isExpanded(viewItem)?"detailCollapse":"detailExpand";return this.localization.get(messageKey)}isGroup(item){return"group"===item.type}isDataItem(item){return!this.isGroup(item)&&!this.isFooter(item)}isFooter(item){return"footer"===item.type}isInExpandedGroup(item){return this.groupsService.isInExpandedGroup(item.groupIndex,!1)}isParentGroupExpanded(item){return this.groupsService.isInExpandedGroup(item.index||item.groupIndex)}isOdd(item){return item.index%2!=0}isSelectable(){return this.selectable&&!1!==this.selectable.enabled}isRowSelected(item){return this.selectionService.isSelected(item.index)}trackByWrapper(index,item){return"data"===item.type&&(item.isEditing=this.editService.hasEdited(item.index)),this.trackBy(index,item)}trackByColumns(index,item){return this.virtualColumns?index:item}ngDoCheck(){this.groupHeaderColumns=this.hasGroupHeaderColumn?columnsToRender(this.skipGroupDecoration?this.columns:this.columns.toArray().slice(1)):[],this.groupHeaderSlaveCellsCount=this.isLocked?this.hasGroupHeaderColumn?this.columnsContainer.nonLockedColumnsToRender.length:1:0}ngOnChanges(changes){isChanged("columns",changes,!1)&&this.changeNotification.notify()}logicalRowIndex(rowIndex){let pos=this.skip+rowIndex;this.hasDetailTemplate&&(pos*=2);const absoluteRowIndex=1+pos,addRowOffset=this.editService.hasNewItem?1:0,filterRowOffset=hasFilterRow(this.filterable)?1:0;return absoluteRowIndex+(this.columnInfoService.totalLevels+filterRowOffset+addRowOffset)}addRowLogicalIndex(){return this.columnInfoService.totalLevels+1}logicalColIndex(column){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(column.leafIndex)?column.leafIndex+(this.hasDetailTemplate?1:0):-1}ngOnInit(){this.ngZone.runOutsideAngular(()=>{const clickHandler=this.clickHandler.bind(this),mousedownSubscription=this.renderer.listen(this.element.nativeElement,"mousedown",clickHandler),clickSubscription=this.renderer.listen(this.element.nativeElement,"click",clickHandler),contextmenuSubscription=this.renderer.listen(this.element.nativeElement,"contextmenu",clickHandler);this.clickSubscription=()=>{mousedownSubscription(),clickSubscription(),contextmenuSubscription()}});let originalNoRecordText=this.localization.get("noRecords");this.localization.changes.subscribe(()=>{this.noRecordsText===originalNoRecordText&&(this.noRecordsText=this.localization.get("noRecords"),originalNoRecordText=this.noRecordsText)})}ngOnDestroy(){this.clickSubscription&&this.clickSubscription(),this.cellKeydownSubscription.unsubscribe(),clearTimeout(this.clickTimeout)}isEditingCell(index,column){return this.editService.isEditing()&&this.editService.isEditedColumn(index,column)}isEditingRow(index){return this.editService.isEditing()&&this.editService.hasEdited(index)}get hasGroupHeaderColumn(){return this.columnsContainer.hasGroupHeaderColumn}get columnsContainer(){return this.columnInfoService.columnsContainer}get columnsSpan(){return columnsSpan(this.columns)}get allColumnsSpan(){return columnsSpan(this.allColumns||this.columns)}get colSpan(){return this.columnsSpan+this.groups.length+(this.hasDetailTemplate?1:0)}get footerColumns(){return this.isLocked?this.columnsContainer.lockedColumnsToRender:this.columnsContainer.nonLockedColumnsToRender}showGroupHeader(item){return!item.data.skipHeader}get hasDetailTemplate(){return kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(this.detailTemplate)}clickHandler(eventArg){const element=this.element.nativeElement,target=eventArg.target;let cell,row,body,gridElement,currentTarget=target;do{cell=dist_fesm2015_closest(currentTarget,matchesNodeName("td")),row=dist_fesm2015_closest(cell,matchesNodeName("tr")),body=dist_fesm2015_closest(row,matchesNodeName("tbody")),currentTarget=body,gridElement=fesm2015_closestInScope(currentTarget,matchesClasses("k-grid"),element)}while(body&&body!==element&&!gridElement);if(cell&&!hasClasses(cell,"k-hierarchy-cell k-detail-cell k-group-cell")&&!hasClasses(row,"k-grouping-row k-group-footer k-detail-row k-grid-norecords")&&body===element&&!gridElement&&(this.editService.preventCellClose(),!(target!==cell&&isFocusableWithTabKey(target,!1)||matchesNodeName("label")(target)||hasClasses(target,"k-icon")||fesm2015_closestInScope(target,matchesClasses("k-widget k-grid-ignore-click"),cell)))){const args=this.cellClickArgs(cell,row,eventArg);"mousedown"===eventArg.type?this.domEvents.cellMousedown.emit(args):!args.isEditedColumn&&this.editService.closeCell(eventArg)||("click"===eventArg.type?this.clickTimeout=setTimeout(()=>{this.emitCellClick(args)},0):this.emitCellClick(args))}}emitCellClick(args){this.domEvents.cellClick.emit(Object.assign(args,{isEdited:args.isEditedRow||args.isEditedColumn}))}cellKeydownHandler(args){args.keyCode===Keys.Enter&&this.clickHandler(args)}cellClickArgs(cell,row,eventArg){const index=((cell,cells)=>{let cellIndex=0;for(let idx=0;idx<cells.length;idx++){if(cells[idx]===cell)return cellIndex;hasClasses(cells[idx],"k-hierarchy-cell k-group-cell")||cellIndex++}})(cell,row.cells),column=this.columns.toArray()[index],columnIndex=this.lockedColumnsCount+index;let rowIndex=row.getAttribute("data-kendo-grid-item-index");return rowIndex=rowIndex?parseInt(rowIndex,10):-1,{column:column,columnIndex:columnIndex,dataItem:-1===rowIndex?this.editService.newDataItem:this.data.at(rowIndex-this.skip),isEditedColumn:this.editService.isEditedColumn(rowIndex,column),isEditedRow:this.editService.isEdited(rowIndex),originalEvent:eventArg,rowIndex:rowIndex,type:"keydown"===eventArg.type?"click":eventArg.type}}}return TableBodyComponent.fac=function(t){return new(t||TableBodyComponent)(directiveInject(fesm2015_DetailsService),directiveInject(fesm2015_GroupsService),directiveInject(fesm2015_ChangeNotificationService),directiveInject(fesm2015_EditService),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone),directiveInject(Renderer2),directiveInject(ElementRef),directiveInject(fesm2015_DomEventsService),directiveInject(dist_fesm2015_SelectionService),directiveInject(fesm2015_ColumnInfoService),directiveInject(kendo_angular_grid_ivy_ngcc_dist_fesm2015_NavigationService))},TableBodyComponent.cmp=defineComponent({type:TableBodyComponent,selectors:[["","kendoGridTableBody",""]],inputs:{columns:"columns",groups:"groups",skip:"skip",noRecordsText:"noRecordsText",isLocked:"isLocked",skipGroupDecoration:"skipGroupDecoration",showGroupFooters:"showGroupFooters",lockedColumnsCount:"lockedColumnsCount",totalColumnsCount:"totalColumnsCount",trackBy:"trackBy",rowClass:"rowClass",allColumns:"allColumns",detailTemplate:"detailTemplate",noRecordsTemplate:"noRecordsTemplate",data:"data",selectable:"selectable",filterable:"filterable",virtualColumns:"virtualColumns"},features:[NgOnChangesFeature],attrs:_c147,decls:3,vars:4,consts:[[3,"ngIf"],["class","k-grid-norecords",4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["kendoGridLogicalRow","",1,"k-grid-add-row","k-grid-edit-row",3,"logicalRowIndex","logicalSlaveRow","logicalCellsCount","logicalSlaveCellsCount"],["class","k-hierarchy-cell","kendoGridLogicalCell","","aria-selected","false",3,"logicalRowIndex","logicalColIndex",4,"ngIf"],["kendoGridCell","","kendoGridLogicalCell","","role","gridcell",3,"rowIndex","columnIndex","isNew","column","dataItem","ngClass","ngStyle","logicalRowIndex","logicalColIndex","colSpan",4,"ngFor","ngForOf","ngForTrackBy"],["class","k-group-cell","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"k-group-cell"],["kendoGridLogicalCell","","aria-selected","false",1,"k-hierarchy-cell",3,"logicalRowIndex","logicalColIndex"],["kendoGridCell","","kendoGridLogicalCell","","role","gridcell",3,"rowIndex","columnIndex","isNew","column","dataItem","ngClass","ngStyle","logicalRowIndex","logicalColIndex","colSpan"],[1,"k-grid-norecords"],[3,"ngIf","templateContext"],[4,"ngIf"],["kendoGridGroupHeader","","kendoGridLogicalRow","",3,"columns","groups","item","hasDetails","skipGroupDecoration","hasGroupHeaderColumn","groupHeaderColumns","rowIndex","totalColumnsCount","logicalRowIndex","logicalSlaveRow","logicalCellsCount","logicalSlaveCellsCount",4,"ngIf"],["kendoGridLogicalRow","",3,"dataRowIndex","dataItem","logicalRowIndex","logicalSlaveRow","logicalCellsCount","logicalSlaveCellsCount","ngClass","k-alt","k-master-row","k-grid-edit-row","k-state-selected",4,"ngIf"],["class","k-detail-row","kendoGridLogicalRow","",3,"k-alt","dataRowIndex","dataItem","logicalRowIndex","logicalSlaveRow","logicalCellsCount",4,"ngIf"],["class","k-group-footer","kendoGridLogicalRow","",3,"logicalRowIndex","logicalSlaveRow","logicalCellsCount","logicalSlaveCellsCount",4,"ngIf"],["kendoGridGroupHeader","","kendoGridLogicalRow","",3,"columns","groups","item","hasDetails","skipGroupDecoration","hasGroupHeaderColumn","groupHeaderColumns","rowIndex","totalColumnsCount","logicalRowIndex","logicalSlaveRow","logicalCellsCount","logicalSlaveCellsCount"],["kendoGridLogicalRow","",3,"dataRowIndex","dataItem","logicalRowIndex","logicalSlaveRow","logicalCellsCount","logicalSlaveCellsCount","ngClass"],["class","k-hierarchy-cell","kendoGridLogicalCell","","aria-selected","false",3,"logicalRowIndex","logicalColIndex","dataRowIndex","dataItem","detailExpandCell",4,"ngIf"],["kendoGridCell","","kendoGridLogicalCell","","role","gridcell","aria-selected","false",3,"rowIndex","columnIndex","column","dataItem","logicalRowIndex","logicalColIndex","dataRowIndex","colIndex","colSpan","ngClass","k-grid-edit-cell","ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["kendoGridLogicalCell","","aria-selected","false",1,"k-hierarchy-cell",3,"logicalRowIndex","logicalColIndex","dataRowIndex","dataItem","detailExpandCell"],["class","k-icon","href","#","tabindex","-1",3,"ngClass","click",4,"ngIf"],["href","#","tabindex","-1",1,"k-icon",3,"ngClass","click"],["kendoGridCell","","kendoGridLogicalCell","","role","gridcell","aria-selected","false",3,"rowIndex","columnIndex","column","dataItem","logicalRowIndex","logicalColIndex","dataRowIndex","colIndex","colSpan","ngClass","ngStyle"],["kendoGridLogicalRow","",1,"k-detail-row",3,"dataRowIndex","dataItem","logicalRowIndex","logicalSlaveRow","logicalCellsCount"],["class","k-group-cell",4,"ngFor","ngForOf"],[1,"k-hierarchy-cell"],["kendoGridLogicalCell","","role","gridcell","aria-selected","false",1,"k-detail-cell",3,"logicalRowIndex","logicalColIndex","dataRowIndex","dataItem","colIndex","colSpan"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"k-group-cell"],["kendoGridLogicalRow","",1,"k-group-footer",3,"logicalRowIndex","logicalSlaveRow","logicalCellsCount","logicalSlaveCellsCount"],["kendoGridLogicalCell","",3,"logicalRowIndex","logicalColIndex",4,"ngFor","ngForOf","ngForTrackBy"],["kendoGridLogicalCell","",3,"logicalRowIndex","logicalColIndex"],[3,"templateContext"]],template:function(rf,ctx){1&rf&&(template(0,TableBodyComponent_ng_template_0_Template,4,8,"ng-template",0),template(1,TableBodyComponent_tr_1_Template,4,6,"tr",1),template(2,TableBodyComponent_ng_template_2_Template,4,4,"ng-template",2)),2&rf&&(property("ngIf",ctx.editService.hasNewItem),advance(1),property("ngIf",0===(null==ctx.data?null:ctx.data.length)||null==ctx.data),advance(1),property("ngForOf",ctx.data)("ngForTrackBy",ctx.trackByWrapper))},directives:function(){return[common_NgIf,common_NgForOf,fesm2015_LogicalRowDirective,fesm2015_LogicalCellDirective,fesm2015_CellComponent,common_NgClass,common_NgStyle,_ivy_ngcc_dist_fesm2015_TemplateContextDirective,fesm2015_GroupHeaderComponent,common_NgTemplateOutlet]},encapsulation:2}),TableBodyComponent})(),fesm2015_CellComponent=(()=>{class CellComponent{constructor(editService,idService,cellContext){this.editService=editService,this.idService=idService,this.cellContext=cellContext,this.isNew=!1,this._templateContext={},this._editTemplateContext={}}get commandCellClass(){return this.isCommand(this.column)}set rowIndex(index){this._rowIndex=index,this.updateCellContext()}get rowIndex(){return this._rowIndex}get isEdited(){if(!this.editService.isEditing()&&!this.isNew||!this.isColumnEditable)return!1;const editContext=this.editService.columnContext(this.rowIndex,this.column);return this.isFieldEditable(editContext,this.column)}get formGroup(){return this.editService.context(this.rowIndex).group}get templateContext(){return this._templateContext}get editTemplateContext(){return this._editTemplateContext.$implicit=this.formGroup,this._editTemplateContext.isNew=this.isNew,this._editTemplateContext.column=this.column,this._editTemplateContext.dataItem=this.dataItem,this._editTemplateContext.formGroup=this.formGroup,this._editTemplateContext.rowIndex=this.rowIndex,this._editTemplateContext}get format(){if(isColumnComponent(this.column)&&!fesm2015_isNullOrEmptyString(this.column.format))return extractFormat(this.column.format)}get isBoundColumn(){return this.column.field&&!this.column.templateRef}get isCheckboxColumn(){return isCheckboxColumn(this.column)&&!this.column.templateRef}get selectionCheckboxId(){return this.idService.selectionCheckboxId(this.rowIndex)}get isSpanColumn(){return isSpanColumn(this.column)&&!this.column.templateRef}get childColumns(){return columnsToRender([this.column])}get isColumnEditable(){return!(!this.column||this.isCommand(this.column))&&!1!==this.column.editable}ngDoCheck(){this.updateCellContext()}ngOnChanges(_changes){this.updateTemplateContext()}isCommand(column){return column instanceof fesm2015_CommandColumnComponent}isFieldEditable(editContext,column){return!!kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(editContext)&&(!!kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(column.editTemplate)||kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(editContext.group)&&kendo_angular_grid_ivy_ngcc_dist_fesm2015_isPresent(editContext.group.get(column.field)))}updateCellContext(){this.cellContext&&(this.cellContext.rowIndex=this._rowIndex)}updateTemplateContext(){if(!this.column.templateRef)return;const context=this._templateContext;context.isNew=this.isNew,context.column=this.column,context.dataItem=this.dataItem,context.rowIndex=this.rowIndex,context.columnIndex=this.columnIndex,context.$implicit=this.dataItem}}return CellComponent.fac=function(t){return new(t||CellComponent)(directiveInject(fesm2015_EditService),directiveInject(fesm2015_IdService),directiveInject(CELL_CONTEXT,8))},CellComponent.cmp=defineComponent({type:CellComponent,selectors:[["","kendoGridCell",""]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-command-cell",ctx.commandCellClass)},inputs:{isNew:"isNew",rowIndex:"rowIndex",column:"column",columnIndex:"columnIndex",dataItem:"dataItem"},features:[NgOnChangesFeature],attrs:_c152,decls:3,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngIf","ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngIf"],["ngFor","",3,"ngForOf"],[1,"k-checkbox",3,"kendoGridSelectionCheckbox"],[1,"k-checkbox-label"],[4,"ngIf"],[3,"ngSwitch",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["kendoGridFocusable","",3,"format","formControl",4,"ngSwitchCase"],["type","checkbox","kendoGridFocusable","",3,"formControl",4,"ngSwitchCase"],["type","text","class","k-textbox","kendoGridFocusable","",3,"formControl",4,"ngSwitchDefault"],["kendoGridFocusable","",3,"format","formControl"],["type","checkbox","kendoGridFocusable","",3,"formControl"],["type","text","kendoGridFocusable","",1,"k-textbox",3,"formControl"]],template:function(rf,ctx){1&rf&&(elementContainerStart(0,0),template(1,CellComponent_ng_container_1_Template,5,6,"ng-container",1),template(2,CellComponent_ng_container_2_Template,3,2,"ng-container",1),elementContainerEnd()),2&rf&&(property("ngSwitch",ctx.isEdited),advance(1),property("ngSwitchCase",!1),advance(1),property("ngSwitchCase",!0))},directives:[common_NgSwitch,common_NgSwitchCase,common_NgIf,common_NgTemplateOutlet,common_NgForOf,dist_fesm2015_FocusableDirective,fesm2015_SelectionCheckboxDirective,common_NgSwitchDefault,fesm2015_NumericTextBoxComponent,forms_NgControlStatus,forms_FormControlDirective,fesm2015_DatePickerComponent,forms_CheckboxControlValueAccessor,forms_DefaultValueAccessor],pipes:[fesm2015_FieldAccessorPipe],encapsulation:2}),CellComponent})(),fesm2015_EditCommandDirective=(()=>{class EditCommandDirective extends fesm2015_ButtonDirective{constructor(editService,cellContext,element,renderer,localization,ngZone){super(element,renderer,null,localization,ngZone),this.editService=editService,this.cellContext=cellContext,this.commandClass=!0}get visible(){return this.isEdited?"none":""}onClick(e){e.preventDefault(),this.editService.beginEdit(this.rowIndex)}ngDoCheck(){this.cellContext&&(this.rowIndex=this.cellContext.rowIndex,this.isEdited=this.editService.isEdited(this.rowIndex))}}return EditCommandDirective.fac=function(t){return new(t||EditCommandDirective)(directiveInject(fesm2015_EditService),directiveInject(CELL_CONTEXT),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone))},EditCommandDirective.dir=defineDirective({type:EditCommandDirective,selectors:[["","kendoGridEditCommand",""]],hostVars:4,hostBindings:function(rf,ctx){1&rf&&listener("click",(function($event){return ctx.onClick($event)})),2&rf&&(styleProp("display",ctx.visible),classProp("k-grid-edit-command",ctx.commandClass))},features:[InheritDefinitionFeature]}),EditCommandDirective})(),fesm2015_CancelCommandDirective=(()=>{class CancelCommandDirective extends fesm2015_ButtonDirective{constructor(editService,cellContext,element,renderer,localization,ngZone){super(element,renderer,null,localization,ngZone),this.editService=editService,this.cellContext=cellContext,this.commandClass=!0}get visible(){return this.isEdited?"":"none"}onClick(e){e.preventDefault(),this.isEdited&&this.editService.endEdit(this.rowIndex)}ngDoCheck(){this.cellContext&&(this.rowIndex=this.cellContext.rowIndex,this.isEdited=this.editService.isEdited(this.rowIndex))}}return CancelCommandDirective.fac=function(t){return new(t||CancelCommandDirective)(directiveInject(fesm2015_EditService),directiveInject(CELL_CONTEXT),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone))},CancelCommandDirective.dir=defineDirective({type:CancelCommandDirective,selectors:[["","kendoGridCancelCommand",""]],hostVars:4,hostBindings:function(rf,ctx){1&rf&&listener("click",(function($event){return ctx.onClick($event)})),2&rf&&(styleProp("display",ctx.visible),classProp("k-grid-cancel-command",ctx.commandClass))},features:[InheritDefinitionFeature]}),CancelCommandDirective})(),fesm2015_SaveCommandDirective=(()=>{class SaveCommandDirective extends fesm2015_ButtonDirective{constructor(editService,cellContext,element,renderer,localization,ngZone){super(element,renderer,null,localization,ngZone),this.editService=editService,this.cellContext=cellContext,this.commandClass=!0}get visible(){return this.isEdited?"":"none"}onClick(e){e.preventDefault(),this.isEdited&&this.editService.save(this.rowIndex)}ngDoCheck(){this.cellContext&&(this.rowIndex=this.cellContext.rowIndex,this.isEdited=this.editService.isEdited(this.rowIndex))}}return SaveCommandDirective.fac=function(t){return new(t||SaveCommandDirective)(directiveInject(fesm2015_EditService),directiveInject(CELL_CONTEXT),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone))},SaveCommandDirective.dir=defineDirective({type:SaveCommandDirective,selectors:[["","kendoGridSaveCommand",""]],hostVars:4,hostBindings:function(rf,ctx){1&rf&&listener("click",(function($event){return ctx.onClick($event)})),2&rf&&(styleProp("display",ctx.visible),classProp("k-grid-save-command",ctx.commandClass))},features:[InheritDefinitionFeature]}),SaveCommandDirective})(),fesm2015_RemoveCommandDirective=(()=>{class RemoveCommandDirective extends fesm2015_ButtonDirective{constructor(editService,cellContext,element,renderer,localization,ngZone){super(element,renderer,null,localization,ngZone),this.editService=editService,this.cellContext=cellContext,this.commandClass=!0}get visible(){return this.isEdited?"none":""}onClick(e){e.preventDefault(),this.editService.remove(this.rowIndex)}ngDoCheck(){this.cellContext&&(this.rowIndex=this.cellContext.rowIndex,this.isEdited=this.editService.isEdited(this.rowIndex))}}return RemoveCommandDirective.fac=function(t){return new(t||RemoveCommandDirective)(directiveInject(fesm2015_EditService),directiveInject(CELL_CONTEXT),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone))},RemoveCommandDirective.dir=defineDirective({type:RemoveCommandDirective,selectors:[["","kendoGridRemoveCommand",""]],hostVars:4,hostBindings:function(rf,ctx){1&rf&&listener("click",(function($event){return ctx.onClick($event)})),2&rf&&(styleProp("display",ctx.visible),classProp("k-grid-remove-command",ctx.commandClass))},features:[InheritDefinitionFeature]}),RemoveCommandDirective})(),fesm2015_AddCommandDirective=(()=>{class AddCommandDirective extends fesm2015_ButtonDirective{constructor(editService,element,renderer,localization,ngZone){super(element,renderer,null,localization,ngZone),this.editService=editService}onClick(e){e.preventDefault(),this.editService.beginAdd()}get commandClass(){return!0}}return AddCommandDirective.fac=function(t){return new(t||AddCommandDirective)(directiveInject(fesm2015_EditService),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone))},AddCommandDirective.dir=defineDirective({type:AddCommandDirective,selectors:[["","kendoGridAddCommand",""]],hostVars:2,hostBindings:function(rf,ctx){1&rf&&listener("click",(function($event){return ctx.onClick($event)})),2&rf&&classProp("k-grid-add-command",ctx.commandClass)},features:[InheritDefinitionFeature]}),AddCommandDirective})();const importedModules$3=[common_CommonModule,forms_ReactiveFormsModule,forms_FormsModule,dist_fesm2015_SharedModule,fesm2015_GroupModule,fesm2015_NumericTextBoxModule,fesm2015_DatePickerModule];let fesm2015_BodyModule=(()=>{class BodyModule{static exports(){return[fesm2015_CommandColumnComponent,fesm2015_CheckboxColumnComponent,fesm2015_SelectionCheckboxDirective,dist_fesm2015_CellTemplateDirective,fesm2015_NoRecordsTemplateDirective,fesm2015_EditTemplateDirective,fesm2015_EditCommandDirective,fesm2015_CancelCommandDirective,fesm2015_SaveCommandDirective,fesm2015_RemoveCommandDirective,fesm2015_AddCommandDirective]}}return BodyModule.mod=defineNgModule({type:BodyModule}),BodyModule.inj=defineInjector({factory:function(t){return new(t||BodyModule)},imports:[[...importedModules$3]]}),BodyModule})(),fesm2015_FooterComponent=(()=>{class FooterComponent{constructor(){this.columns=[],this.groups=[],this.lockedColumnsCount=0}get footerClass(){return!this.scrollable}get columnsToRender(){return columnsToRender(this.columns||[])}}return FooterComponent.fac=function(t){return new(t||FooterComponent)},FooterComponent.cmp=defineComponent({type:FooterComponent,selectors:[["","kendoGridFooter",""]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-grid-footer",ctx.footerClass)},inputs:{columns:"columns",groups:"groups",lockedColumnsCount:"lockedColumnsCount",detailTemplate:"detailTemplate",scrollable:"scrollable"},attrs:_c153,decls:1,vars:1,consts:[[3,"ngIf"],[3,"k-group-cell",4,"ngFor","ngForOf"],[3,"k-hierarchy-cell",4,"ngIf"],[3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[3,"ngClass","ngStyle"],[3,"templateContext"]],template:function(rf,ctx){1&rf&&template(0,FooterComponent_ng_template_0_Template,4,5,"ng-template",0),2&rf&&property("ngIf",!0)},directives:[common_NgIf,common_NgForOf,common_NgClass,common_NgStyle,_ivy_ngcc_dist_fesm2015_TemplateContextDirective],encapsulation:2}),FooterComponent})();const importedModules$4=[common_CommonModule,dist_fesm2015_SharedModule];let fesm2015_FooterModule=(()=>{class FooterModule{static exports(){return[]}}return FooterModule.mod=defineNgModule({type:FooterModule}),FooterModule.inj=defineInjector({factory:function(t){return new(t||FooterModule)},imports:[[...importedModules$4]]}),FooterModule})(),fesm2015_ToolbarComponent=(()=>{class ToolbarComponent{constructor(grid){this.grid=grid,this.context={}}get classNames(){return"k-header k-grid-toolbar"}set position(value){this.context.position=value}get toolbarTemplateRef(){return this.grid.toolbarTemplate?this.grid.toolbarTemplate.templateRef:void 0}}return ToolbarComponent.fac=function(t){return new(t||ToolbarComponent)(directiveInject(fesm2015_GridComponent))},ToolbarComponent.cmp=defineComponent({type:ToolbarComponent,selectors:[["kendo-grid-toolbar"]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classMap(ctx.classNames)},inputs:{position:"position"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(rf,ctx){1&rf&&template(0,ToolbarComponent_0_Template,1,2,void 0,0),2&rf&&property("ngIf",ctx.toolbarTemplateRef)},directives:[common_NgIf,common_NgTemplateOutlet],encapsulation:2}),ToolbarComponent})(),fesm2015_GridModule=(()=>{class GridModule{}return GridModule.mod=defineNgModule({type:GridModule}),GridModule.inj=defineInjector({factory:function(t){return new(t||GridModule)},imports:[[common_CommonModule,fesm2015_GroupModule,dist_fesm2015_SharedModule,fesm2015_BodyModule,fesm2015_HeaderModule,fesm2015_FooterModule,fesm2015_PagerModule,fesm2015_RowFilterModule,fesm2015_FilterMenuModule,fesm2015_ResizeSensorModule,fesm2015_ColumnMenuModule]]}),GridModule})();const kendo_angular_menu_ivy_ngcc_dist_fesm2015_c0=["kendoMenuList",""];function ListComponent_ng_container_0_li_1_Template(rf,ctx){if(1&rf&&element(0,"li",3),2&rf){const ctx_r5=nextContext(),idx_r2=ctx_r5.index,item_r1=ctx_r5.$implicit,ctx_r3=nextContext();classProp("k-first",0===idx_r2)("k-last",idx_r2===ctx_r3.items.length-1)("k-state-disabled",item_r1.disabled),property("item",item_r1)("level",ctx_r3.level)("vertical",ctx_r3.vertical)("animate",ctx_r3.animate)("rtl",ctx_r3.rtl)("itemTemplate",ctx_r3.itemTemplate)("itemLinkTemplate",ctx_r3.itemLinkTemplate)("openOnClick",ctx_r3.openOnClick)("index",ctx_r3.hierarchyIndex(idx_r2))("siblingIndex",idx_r2)("ngClass",item_r1.cssClass)("ngStyle",item_r1.cssStyle),attribute("data-kendo-menu-index",ctx_r3.hierarchyIndex(idx_r2))}}function ListComponent_ng_container_0_li_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"li",4),text(1,"  "),elementEnd()),2&rf){const item_r1=nextContext().$implicit;property("ngClass",item_r1.cssClass)("ngStyle",item_r1.cssStyle)}}function ListComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),template(1,ListComponent_ng_container_0_li_1_Template,1,19,"li",1),template(2,ListComponent_ng_container_0_li_2_Template,2,2,"li",2),elementContainerEnd()),2&rf){const item_r1=ctx.$implicit;advance(1),property("ngIf",!item_r1.separator),advance(1),property("ngIf",item_r1.separator)}}const kendo_angular_menu_ivy_ngcc_dist_fesm2015_c1=["link"],kendo_angular_menu_ivy_ngcc_dist_fesm2015_c2=["popupTemplate"],kendo_angular_menu_ivy_ngcc_dist_fesm2015_c3=["kendoMenuItem",""];function ItemComponent_span_0_ng_template_2_Template(rf,ctx){}function ItemComponent_span_0_Template(rf,ctx){if(1&rf&&(elementStart(0,"span",6,7),template(2,ItemComponent_span_0_ng_template_2_Template,0,0,"ng-template",8),elementEnd()),2&rf){const ctx_r0=nextContext(),_r6=reference(7);classProp("k-state-active",ctx_r0.opened),advance(2),property("ngTemplateOutlet",_r6)}}function ItemComponent_a_1_ng_template_2_Template(rf,ctx){}function ItemComponent_a_1_Template(rf,ctx){if(1&rf&&(elementStart(0,"a",9,7),template(2,ItemComponent_a_1_ng_template_2_Template,0,0,"ng-template",8),elementEnd()),2&rf){const ctx_r1=nextContext(),_r6=reference(7);classProp("k-state-active",ctx_r1.opened),attribute("href",ctx_r1.item.url,sanitizeUrl),advance(2),property("ngTemplateOutlet",_r6)}}function ItemComponent_2_ng_template_0_Template(rf,ctx){}const kendo_angular_menu_ivy_ngcc_dist_fesm2015_c4=function(a0,a1){return{item:a0,index:a1}};function ItemComponent_2_Template(rf,ctx){if(1&rf&&template(0,ItemComponent_2_ng_template_0_Template,0,0,"ng-template",10),2&rf){const ctx_r2=nextContext();property("ngTemplateOutlet",ctx_r2.linkTemplate)("ngTemplateOutletContext",pureFunction2(2,kendo_angular_menu_ivy_ngcc_dist_fesm2015_c4,ctx_r2.item,ctx_r2.index))}}function ItemComponent_div_3_ng_template_1_Template(rf,ctx){}function ItemComponent_div_3_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",11),template(1,ItemComponent_div_3_ng_template_1_Template,0,0,"ng-template",10),elementEnd()),2&rf){const ctx_r3=nextContext();advance(1),property("ngTemplateOutlet",ctx_r3.item.content)("ngTemplateOutletContext",pureFunction2(2,kendo_angular_menu_ivy_ngcc_dist_fesm2015_c4,ctx_r3.item.owner,ctx_r3.item.ownerIndex))}}function ItemComponent_ng_template_4_Template(rf,ctx){if(1&rf&&element(0,"ul",12),2&rf){const ctx_r5=nextContext();property("animate",ctx_r5.animate)("rtl",ctx_r5.rtl)("vertical",ctx_r5.vertical)("openOnClick",ctx_r5.openOnClick)("items",ctx_r5.children)("level",ctx_r5.level+1)("index",ctx_r5.index)("itemTemplate",ctx_r5.itemTemplate)("itemLinkTemplate",ctx_r5.itemLinkTemplate),attribute("id",ctx_r5.childId)}}function ItemComponent_ng_template_6_span_0_Template(rf,ctx){1&rf&&element(0,"span",15),2&rf&&property("ngClass",nextContext(2).iconClass)}function ItemComponent_ng_template_6_ng_container_1_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),text(1),elementContainerEnd()),2&rf){const ctx_r15=nextContext(2);advance(1),textInterpolate1(" ",ctx_r15.item.text," ")}}function ItemComponent_ng_template_6_2_ng_template_0_Template(rf,ctx){}function ItemComponent_ng_template_6_2_Template(rf,ctx){if(1&rf&&template(0,ItemComponent_ng_template_6_2_ng_template_0_Template,0,0,"ng-template",10),2&rf){const ctx_r16=nextContext(2);property("ngTemplateOutlet",ctx_r16.template)("ngTemplateOutletContext",pureFunction2(2,kendo_angular_menu_ivy_ngcc_dist_fesm2015_c4,ctx_r16.item,ctx_r16.index))}}function ItemComponent_ng_template_6_span_3_Template(rf,ctx){if(1&rf&&element(0,"span",16),2&rf){const ctx_r17=nextContext(2);classProp("k-i-arrow-60-down",!ctx_r17.horizontal)("k-i-arrow-60-right",ctx_r17.horizontal&&!ctx_r17.rtl)("k-i-arrow-60-left",ctx_r17.horizontal&&ctx_r17.rtl)}}function ItemComponent_ng_template_6_Template(rf,ctx){if(1&rf&&(template(0,ItemComponent_ng_template_6_span_0_Template,1,1,"span",13),template(1,ItemComponent_ng_template_6_ng_container_1_Template,2,1,"ng-container",2),template(2,ItemComponent_ng_template_6_2_Template,1,5,void 0,2),template(3,ItemComponent_ng_template_6_span_3_Template,1,6,"span",14)),2&rf){const ctx_r7=nextContext();property("ngIf",ctx_r7.item.icon),advance(1),property("ngIf",!ctx_r7.template),advance(1),property("ngIf",ctx_r7.template),advance(1),property("ngIf",ctx_r7.hasContent)}}const kendo_angular_menu_ivy_ngcc_dist_fesm2015_c5=["default"];function ContextMenuComponent_ng_template_0_Template(rf,ctx){if(1&rf&&element(0,"kendo-menu",1),2&rf){const ctx_r1=nextContext();property("items",ctx_r1.rootItems)("vertical",ctx_r1.vertical)("openOnClick",ctx_r1.openOnClick)("hoverDelay",ctx_r1.hoverDelay)("animate",ctx_r1.animate)("menuItemTemplate",null==ctx_r1.itemTemplate.first?null:ctx_r1.itemTemplate.first.templateRef)("menuItemLinkTemplate",null==ctx_r1.itemLinkTemplate.first?null:ctx_r1.itemLinkTemplate.first.templateRef)}}const PARENT_REGEX=/_?\d+$/;let dist_fesm2015_id=0;const itemIndexComparer=(a,b)=>a.siblingIndex-b.siblingIndex,fesm2015_next=(idx,items,dir)=>{let current=items[idx+dir];for(;!current;)idx<0?idx=items.length-1:idx>=items.length?idx=0:idx+=dir,current=items[idx];return current};let fesm2015_ItemsService=(()=>{class ItemsService{constructor(){this.items={},this.lists=[],this.idPrefix="k-menu"+dist_fesm2015_id++}get hasItems(){return Object.keys(this.items).length>0}childId(index){return`${this.idPrefix}-child${index}`}itemIndex(parentIndex,index){return(parentIndex?parentIndex+"_":"")+index}get(index){return this.items[index]}add(item){this.items[item.index]=item}remove(item){delete this.items[item.index]}addList(list){this.lists.push(list)}removeList(list){const index=this.lists.indexOf(list);index>=0&&this.lists.splice(index,1)}containsList(element){return Boolean(this.lists.find(list=>list.element.nativeElement===element))}siblings(item){const parentIndex=this.parentIndex(item.index);return this.filter(index=>this.parentIndex(index)===parentIndex)}otherSiblings(item){const parentIndex=this.parentIndex(item.index);return this.filter(index=>this.parentIndex(index)===parentIndex&&index!==item.index)}children(item){return this.filter(index=>this.parentIndex(index)===item.index)}parent(item){return this.items[this.parentIndex(item.index)]}root(item){return this.items[this.indices(item.index)[0]]}indices(index){return index.split("_")}filter(predicate){const result=[],items=this.items;for(let index in items)predicate(index,items[index])&&result.push(items[index]);return result.sort(itemIndexComparer)}previous(item){const siblings=this.siblings(item),itemIndex=siblings.indexOf(item);return fesm2015_next(itemIndex,siblings,-1)}next(item){const siblings=this.siblings(item),itemIndex=siblings.indexOf(item);return fesm2015_next(itemIndex,siblings,1)}hasParent(item,parent){return item.index.startsWith(parent.index)}areSiblings(item1,item2){return item1!==item2&&this.parent(item1)===this.parent(item2)}forEach(callback){const items=this.items;for(let index in items)items.hasOwnProperty(index)&&callback(items[index])}parentIndex(index){return index.replace(PARENT_REGEX,"")}}return ItemsService.fac=function(t){return new(t||ItemsService)},ItemsService.prov=defineInjectable({token:ItemsService,factory:ItemsService.fac}),ItemsService})();class kendo_angular_menu_ivy_ngcc_dist_fesm2015_PreventableEvent{constructor(args){this.prevented=!1,Object.assign(this,args)}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}class MenuEvent extends kendo_angular_menu_ivy_ngcc_dist_fesm2015_PreventableEvent{}const canPerformAction=(item,action)=>!("open"===action&&item.opened||"close"===action&&!item.opened);let fesm2015_ActionsService=(()=>{class ActionsService{constructor(ngZone,items){this.ngZone=ngZone,this.items=items,this.actions=[]}open(item,finished){item.disabled||(item.hasContent&&!item.opened?this.actions.push({name:"open",requiresZone:item.hasContentTemplates(),item:item,finished:finished}):finished&&finished())}close(item){this.closeChildren(item),this.closeItem(item)}closeItem(item){item.opened&&this.actions.push({name:"close",item:item})}closeToRoot(item){this.closeChildren(item);let current=item;do{this.closeItem(current),current=this.items.parent(current)}while(current)}closeOthers(item){this.closeChildren(item);let current=item;for(;current;){const siblings=this.items.otherSiblings(current);this.closeItems(siblings),current=this.items.parent(current)}}closeAll(){this.items.forEach(item=>{item.opened&&0===item.level&&this.close(item)})}select(item,domEvent,prevented,finished){this.actions.push({name:"select",item:item,prevented:prevented,finished:finished,domEvent:domEvent})}emit(name,item,domEvent){const owner=this.owner,eventArgs=new MenuEvent({sender:owner,item:item.item,index:item.index,originalEvent:domEvent,hasContent:item.hasContent});return owner[name].emit(eventArgs),owner.contextService&&owner.contextService.emit(name,eventArgs),eventArgs.isDefaultPrevented()}get hasPending(){return this.actions.length>0}execute(toExecute){if(!this.hasPending&&!toExecute)return;const actions=toExecute||this.clear();!NgZone.isInAngularZone()&&this.requiresZone(actions)?this.ngZone.run(()=>{this.executeActions(actions)}):this.executeActions(actions)}clear(){const actions=this.actions;return this.actions=[],actions}executeActions(actions){for(let idx=0;idx<actions.length;idx++){const{item:item,name:name,prevented:prevented,finished:finished,domEvent:domEvent}=actions[idx];canPerformAction(item,name)&&(this.emit(name,item,domEvent)?prevented&&prevented():(item[name]&&item[name](),finished&&finished()))}}requiresZone(toExecute){const actions=toExecute||this.actions,owner=this.owner,contextService=owner.contextService;for(let idx=0;idx<actions.length;idx++){const action=actions[idx],name=action.name;if(action.requiresZone||name&&(hasObservers(owner[name])||contextService&&contextService.hasObservers(name)))return!0}return!1}closeChildren(item){if(!item.opened)return;const children=this.items.children(item);this.closeItems(children)}closeItems(items){for(let idx=0;idx<items.length;idx++)this.close(items[idx])}}return ActionsService.fac=function(t){return new(t||ActionsService)(inject(NgZone),inject(fesm2015_ItemsService))},ActionsService.prov=defineInjectable({token:ActionsService,factory:ActionsService.fac}),ActionsService})();const NO_SPACE_REGEX=/\S/,handlers=function(){return{37:"left",39:"right",38:"up",40:"down",36:"home",35:"end",32:"enter",13:"enter",27:"esc",9:"tab"}}(),handlersRTL=Object.assign({},handlers,{37:"right",39:"left"}),dist_fesm2015_resolvedPromise=Promise.resolve(null);let kendo_angular_menu_ivy_ngcc_dist_fesm2015_NavigationService=(()=>{class NavigationService{constructor(items,actions,localization,ngZone){this.items=items,this.actions=actions,this.localization=localization,this.ngZone=ngZone,this.vertical=!1,this.activeIndex="0"}get focusedItem(){return this.items.get(this.focusedIdx)}get activeItem(){return this.items.get(this.activeIndex)}get handlers(){return this.localization.rtl?handlersRTL:handlers}focus(item){item.index!==this.focusedIdx&&(this.activeItem&&this.items.hasParent(item,this.activeItem)||this.setActive(item),this.setFocus(item))}setFocus(item){this.focusedIdx=item.index,item.focus()}focusLeave(){const focused=this.focusedItem;focused&&(this.actions.closeToRoot(focused),this.actions.execute()),this.focusedIdx=null}updateActive(){!this.activeItem&&this.items.hasItems&&(this.items.get("0").toggleActive(!0),this.ngZone.runOutsideAngular(()=>{dist_fesm2015_resolvedPromise.then(()=>{this.activeIndex="0"})}))}keydown(e){const current=this.focusedItem||this.activeItem,handler=this.handlers[e.keyCode];var key;current&&(handler?("tab"!==handler&&e.preventDefault(),this[handler](current,e)):1===(key=e.key).length&&NO_SPACE_REGEX.test(key)&&this.search(current,e.key),this.actions.execute())}focusIndex(index){if(!index&&this.activeItem)this.setFocus(this.activeItem);else if("first"===index)this.focusFirst();else if("last"===index)this.focusLast();else{const item=this.items.get(index);item&&this.focus(item)}}focusFirst(){const items=this.items.siblings(this.items.get("0"));this.focus(items[0])}focusLast(){const items=this.items.siblings(this.items.get("0"));this.focus(items[items.length-1])}search(current,key){const siblings=this.items.siblings(current),startIndex=siblings.indexOf(current),items=siblings.slice(startIndex+1).concat(siblings.slice(0,startIndex));for(let idx=0;idx<items.length;idx++){const sibling=items[idx];if((sibling.item.text||"").toLowerCase().startsWith(key.toLowerCase())){this.focus(sibling);break}}}down(current){0!==current.level||this.vertical?this.focus(this.items.next(current)):current.hasContent&&this.actions.open(current,this.focusChild(current,0))}up(current){0!==current.level||this.vertical?this.focus(this.items.previous(current)):current.hasContent&&this.actions.open(current,this.focusChild(current,current.children.length-1))}left(current){if(!this.vertical||0!==current.level||!current.disabled)if(current.level>1||this.vertical&&current.level>0){const parent=this.items.parent(current);this.focus(parent),this.actions.close(parent)}else this.vertical&&0===current.level&&!current.disabled?current.hasContent&&this.actions.open(current,this.focusChild(current,current.children.length-1)):this.focus(this.items.previous(this.activeItem))}right(current){this.vertical&&0===current.level&&current.disabled||(current.horizontal&&!current.disabled?current.hasContent?this.actions.open(current,this.focusChild(current,0)):(!this.vertical||current.level>0)&&this.focus(this.items.next(this.activeItem)):this.focus(this.items.next(this.activeItem)))}home(current){const siblings=this.items.siblings(current);this.focus(siblings[0])}end(current){const siblings=this.items.siblings(current);this.focus(siblings[siblings.length-1])}enter(current,domEvent){const actions=this.actions;current.disabled||(current.hasContent?(actions.select(current,domEvent),actions.open(current,this.focusChild(current,0))):(actions.select(current,domEvent,null,()=>{current.navigate()}),this.focus(this.items.root(current)),actions.closeToRoot(current)))}esc(current){if(current.level>0){const parent=this.items.parent(current);this.actions.close(parent),this.focus(parent)}}tab(current){current.level>0&&this.activeItem.focus()}focusChild(item,index){return()=>{const child=this.items.children(item)[index];this.setFocus(child)}}setActive(item){const focused=this.focusedItem,active=this.items.root(item);this.activeItem&&this.activeItem.toggleActive(!1),this.activeIndex=active.index,active.toggleActive(!0),focused&&(this.actions.closeToRoot(focused),focused.level>0&&this.actions.open(active))}}return NavigationService.fac=function(t){return new(t||NavigationService)(inject(fesm2015_ItemsService),inject(fesm2015_ActionsService),inject(fesm2015_LocalizationService),inject(NgZone))},NavigationService.prov=defineInjectable({token:NavigationService,factory:NavigationService.fac}),NavigationService})(),fesm2015_HoverService=(()=>{class HoverService{constructor(actions,items){this.actions=actions,this.items=items,this.delay=100,this._openOnOver=!0,this.scheduled=[]}get openOnOver(){return this._openOnOver}set openOnOver(value){this.cancelActions(),this._openOnOver=value}get hovered(){return this.items.get(this.hoveredIdx)}set hovered(item){this.hoveredIdx=item?item.index:null}ngOnDestroy(){this.cancelActions()}over(item){this.cancelActions(action=>"openOnOver"===action.name),this.hovered&&this.hovered===item||(this.actions.closeOthers(item),this.hovered=item,(item.level>0||this.openOnOver)&&!item.disabled&&(this.actions.open(item),this.cancelActions(action=>"close"===action.name&&(item===action.item||this.items.hasParent(item,action.item))||"open"===action.name&&!this.items.hasParent(item,action.item))),this.scheduleActions())}leave(disableOpenOnOver){const hovered=this.hovered;hovered&&(this.actions.closeToRoot(hovered),this.cancelActions(action=>"open"===action.name),this.scheduleActions()),disableOpenOnOver&&this._openOnOver&&this.scheduleDisableOpenOnOver(),this.hovered=null}closeCurrent(){const hovered=this.hovered;hovered&&(this.actions.closeToRoot(hovered),this.hovered=null)}scheduleActions(){if(this.actions.hasPending){const item={};item.actions=this.actions.clear(),item.id=setTimeout(()=>{this.actions.execute(item.actions),this.removeScheduled(item)},this.delay),this.scheduled.push(item)}}scheduleDisableOpenOnOver(){const item={actions:[{name:"openOnOver"}]};item.id=setTimeout(()=>{this._openOnOver=!1,this.removeScheduled(item)},Math.max(this.delay,500)),this.scheduled.push(item)}removeScheduled(item){const scheduled=this.scheduled;for(let idx=0;idx<scheduled.length;idx++)if(scheduled[idx]===item)return void scheduled.splice(idx,1)}cancelActions(predicate){const scheduled=this.scheduled;for(let idx=scheduled.length-1;idx>=0;idx--){const item=scheduled[idx],actions=item.actions;if(predicate)for(let actionIdx=actions.length-1;actionIdx>=0;actionIdx--)predicate(actions[actionIdx])&&actions.splice(actionIdx,1);predicate&&0!==actions.length||(clearTimeout(item.id),scheduled.splice(idx,1))}}}return HoverService.fac=function(t){return new(t||HoverService)(inject(fesm2015_ActionsService),inject(fesm2015_ItemsService))},HoverService.prov=defineInjectable({token:HoverService,factory:HoverService.fac}),HoverService})();const dist_fesm2015_focusableRegex=/^(?:a|input|select|option|textarea|button|object)$/i,_ivy_ngcc_dist_fesm2015_closest=(node,predicate)=>{for(;node&&!predicate(node);)node=node.parentNode;return node},dist_fesm2015_closestInScope=(node,predicate,scope)=>{for(;node&&node!==scope&&!predicate(node);)node=node.parentNode;if(node!==scope)return node},dist_fesm2015_isFocusable=element=>{if(element.tagName){const tagName=element.tagName.toLowerCase(),tabIndex=element.getAttribute("tabIndex"),skipTab="-1"===tabIndex;let focusable=null!==tabIndex&&!skipTab;return dist_fesm2015_focusableRegex.test(tagName)&&(focusable=!element.disabled&&!skipTab),focusable}return!1},dist_fesm2015_toClassList=classNames=>String(classNames).trim().split(" "),dist_fesm2015_hasClass=(element,name)=>dist_fesm2015_toClassList(element.className).indexOf(name)>=0,nodeIndex=node=>node.getAttribute("data-kendo-menu-index"),inMenu=(node,itemsService)=>{if(node===itemsService.lists[0].element.nativeElement)return!1;const list=(node=>{let list=_ivy_ngcc_dist_fesm2015_closest(node,(classes=>{const list=dist_fesm2015_toClassList("k-menu-popup k-menu k-menu-group");return element=>{const classList=dist_fesm2015_toClassList(element.className);return Boolean(list.find(name=>classList.indexOf(name)>=0))}})());return list&&dist_fesm2015_hasClass(list,"k-menu-popup")&&(list=list.querySelector(".k-menu-group")),list})(node);return list&&itemsService.containsList(list)};let fesm2015_ContextMenuService=(()=>{class ContextMenuService{constructor(){this.keydown=new core_EventEmitter}emit(name,args){this.owner.emitMenuEvent(name,args)}hasObservers(name){return this.owner&&hasObservers(this.owner[name])}leaveMenu(e){return!this.items||!inMenu(e.target,this.items)}}return ContextMenuService.fac=function(t){return new(t||ContextMenuService)},ContextMenuService.prov=defineInjectable({token:ContextMenuService,factory:ContextMenuService.fac}),ContextMenuService})(),dist_fesm2015_ItemTemplateDirective=(()=>{class ItemTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return ItemTemplateDirective.fac=function(t){return new(t||ItemTemplateDirective)(directiveInject(TemplateRef,8))},ItemTemplateDirective.dir=defineDirective({type:ItemTemplateDirective,selectors:[["","kendoMenuItemTemplate",""]]}),ItemTemplateDirective})(),fesm2015_ItemLinkTemplateDirective=(()=>{class ItemLinkTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return ItemLinkTemplateDirective.fac=function(t){return new(t||ItemLinkTemplateDirective)(directiveInject(TemplateRef,8))},ItemLinkTemplateDirective.dir=defineDirective({type:ItemLinkTemplateDirective,selectors:[["","kendoMenuItemLinkTemplate",""]]}),ItemLinkTemplateDirective})(),fesm2015_ItemContentTemplateDirective=(()=>{class ItemContentTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return ItemContentTemplateDirective.fac=function(t){return new(t||ItemContentTemplateDirective)(directiveInject(TemplateRef,8))},ItemContentTemplateDirective.dir=defineDirective({type:ItemContentTemplateDirective,selectors:[["","kendoMenuItemContentTemplate",""]]}),ItemContentTemplateDirective})(),fesm2015_MenuItemComponent=(()=>{class MenuItemComponent{get template(){if(this.itemTemplate&&this.itemTemplate.length)return this.itemTemplate.first.templateRef}get linkTemplate(){if(this.itemLinkTemplate&&this.itemLinkTemplate.length)return this.itemLinkTemplate.first.templateRef}get contentTemplate(){if(this.itemContentTemplate&&this.itemContentTemplate.length)return this.itemContentTemplate.first.templateRef}get items(){if(this.children.length)return this.children.toArray().filter(c=>c!==this)}}return MenuItemComponent.fac=function(t){return new(t||MenuItemComponent)},MenuItemComponent.cmp=defineComponent({type:MenuItemComponent,selectors:[["kendo-menu-item"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&(contentQuery(dirIndex,dist_fesm2015_ItemTemplateDirective,!1),contentQuery(dirIndex,fesm2015_ItemLinkTemplateDirective,!1),contentQuery(dirIndex,fesm2015_ItemContentTemplateDirective,!1),contentQuery(dirIndex,MenuItemComponent,!1)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.itemTemplate=_t),queryRefresh(_t=loadQuery())&&(ctx.itemLinkTemplate=_t),queryRefresh(_t=loadQuery())&&(ctx.itemContentTemplate=_t),queryRefresh(_t=loadQuery())&&(ctx.children=_t))},inputs:{text:"text",url:"url",disabled:"disabled",cssClass:"cssClass",cssStyle:"cssStyle",icon:"icon",data:"data",separator:"separator"},decls:0,vars:0,template:function(rf,ctx){},encapsulation:2}),MenuItemComponent})(),fesm2015_MenuBase=(()=>{class MenuBase{constructor(){this.vertical=!1,this.openOnClick=!1,this.hoverDelay=100,this.animate=!0}get rootItems(){return this.items||(this.children?this.children.toArray():[])}}return MenuBase.fac=function(t){return new(t||MenuBase)},MenuBase.dir=defineDirective({type:MenuBase,contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&(contentQuery(dirIndex,dist_fesm2015_ItemTemplateDirective,!1),contentQuery(dirIndex,fesm2015_ItemLinkTemplateDirective,!1),contentQuery(dirIndex,fesm2015_MenuItemComponent,!1)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.itemTemplate=_t),queryRefresh(_t=loadQuery())&&(ctx.itemLinkTemplate=_t),queryRefresh(_t=loadQuery())&&(ctx.children=_t))},inputs:{vertical:"vertical",openOnClick:"openOnClick",hoverDelay:"hoverDelay",animate:"animate",items:"items"}}),MenuBase})(),fesm2015_MenuComponent=(()=>{class MenuComponent extends fesm2015_MenuBase{constructor(itemsService,hover,actions,navigation,localization,ngZone,renderer,contextService){super(),this.itemsService=itemsService,this.hover=hover,this.actions=actions,this.navigation=navigation,this.localization=localization,this.ngZone=ngZone,this.renderer=renderer,this.contextService=contextService,this.select=new core_EventEmitter,this.open=new core_EventEmitter,this.close=new core_EventEmitter,this.actions.owner=this,contextService&&(contextService.items=this.itemsService,this.contextKeyDownSubscription=contextService.keydown.subscribe(this.contextKeyDown.bind(this)))}get ariaOrientation(){if(this.vertical)return"vertical"}get contextMenuClass(){return Boolean(this.contextService)}get direction(){return this.rtl}get rtl(){return this.localization.rtl}toggle(open,...indices){for(let idx=0;idx<indices.length;idx++){const item=this.itemsService.get(indices[idx]);item&&!item.disabled&&(open?item.open():item.close())}}focus(index){this.navigation.focusIndex(index)}ngOnChanges(changes){if(this.navigation.vertical=this.vertical,this.hover.delay=this.hoverDelay,changes.openOnClick){const openOnClick=this.openOnClick=(settings=this.openOnClick)&&Object.assign({toggle:"select"},settings);this.hover.openOnOver=!openOnClick,openOnClick&&"click"===openOnClick.toggle?this.attachCloseClick():this.unsubscribeClick()}var settings}ngAfterViewChecked(){this.navigation.updateActive()}ngOnDestroy(){this.unsubscribeClick(),this.contextService&&(this.contextService.items=null,this.contextKeyDownSubscription.unsubscribe())}attachCloseClick(){!this.closeClickSubscription&&isDocumentAvailable()&&this.ngZone.runOutsideAngular(()=>{this.closeClickSubscription=this.renderer.listen("document","click",e=>{inMenu(e.target,this.itemsService)||(this.hover.openOnOver=!1,this.actions.closeAll(),this.actions.execute())})})}unsubscribeClick(){this.closeClickSubscription&&this.closeClickSubscription()}contextKeyDown(e){if(!this.itemsService.hasItems)return;const keyCode=e.keyCode,rtl=this.localization.rtl,first=keyCode===Keys.ArrowDown||keyCode===Keys.ArrowRight,last=keyCode===Keys.ArrowUp||keyCode===Keys.ArrowLeft;let index;first&&!rtl||last&&rtl?index="first":(first&&rtl||last&&!rtl)&&(index="last"),index&&(e.preventDefault(),this.focus(index))}}return MenuComponent.fac=function(t){return new(t||MenuComponent)(directiveInject(fesm2015_ItemsService),directiveInject(fesm2015_HoverService),directiveInject(fesm2015_ActionsService),directiveInject(kendo_angular_menu_ivy_ngcc_dist_fesm2015_NavigationService),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone),directiveInject(Renderer2),directiveInject(fesm2015_ContextMenuService,8))},MenuComponent.cmp=defineComponent({type:MenuComponent,selectors:[["kendo-menu"]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-rtl",ctx.direction)},inputs:{menuItemTemplate:"menuItemTemplate",menuItemLinkTemplate:"menuItemLinkTemplate"},outputs:{select:"select",open:"open",close:"close"},exportAs:["kendoMenu"],features:[ProvidersFeature([fesm2015_ItemsService,fesm2015_ActionsService,kendo_angular_menu_ivy_ngcc_dist_fesm2015_NavigationService,fesm2015_HoverService,fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.menu"},{provide:fesm2015_MenuBase,useExisting:forwardRef(()=>MenuComponent)}]),InheritDefinitionFeature,NgOnChangesFeature],decls:1,vars:15,consts:[["role","menubar","kendoMenuList","",1,"k-widget","k-reset","k-header","k-menu",3,"items","level","vertical","rtl","animate","openOnClick","itemTemplate","itemLinkTemplate"]],template:function(rf,ctx){1&rf&&element(0,"ul",0),2&rf&&(classProp("k-menu-horizontal",!ctx.vertical)("k-menu-vertical",ctx.vertical)("k-context-menu",ctx.contextMenuClass),property("items",ctx.rootItems)("level",0)("vertical",ctx.vertical)("rtl",ctx.rtl)("animate",ctx.animate)("openOnClick",ctx.openOnClick)("itemTemplate",(null==ctx.itemTemplate.first?null:ctx.itemTemplate.first.templateRef)||ctx.menuItemTemplate)("itemLinkTemplate",(null==ctx.itemLinkTemplate.first?null:ctx.itemLinkTemplate.first.templateRef)||ctx.menuItemLinkTemplate),attribute("aria-orientation",ctx.ariaOrientation))},directives:function(){return[kendo_angular_menu_ivy_ngcc_dist_fesm2015_ListComponent]},encapsulation:2}),MenuComponent})(),kendo_angular_menu_ivy_ngcc_dist_fesm2015_ListComponent=(()=>{class ListComponent{constructor(itemsService,hover,actions,navigation,renderer,ngZone,element){this.itemsService=itemsService,this.hover=hover,this.actions=actions,this.navigation=navigation,this.renderer=renderer,this.ngZone=ngZone,this.element=element,this.animate=!0}hierarchyIndex(index){return this.itemsService.itemIndex(this.index,index)}ngOnInit(){this.itemsService.addList(this),this.initDomEvents()}ngOnDestroy(){this.itemsService.removeList(this),this.domSubscriptions&&this.domSubscriptions()}initDomEvents(){this.element&&this.ngZone.runOutsideAngular(()=>{const element=this.element.nativeElement,container=this.level>0?_ivy_ngcc_dist_fesm2015_closest(element,node=>dist_fesm2015_hasClass(node,"k-popup")):element,overSubscription=this.renderer.listen(element,"mouseover",e=>{if(e.target===element&&0===this.level)this.onLeave();else{const item=this.nodeItem(e.target)||this.itemsService.get(this.index);!item||this.openOnClick&&"click"===this.openOnClick.toggle&&0===item.level&&!item.hasContent||this.hover.over(item)}}),leaveSubscription=this.renderer.listen(container,"mouseleave",e=>{this.leavesMenu(e)&&this.onLeave()}),keydownSubscription=this.renderer.listen(element,"keydown",e=>{dist_fesm2015_hasClass(e.target,"k-menu-item")&&this.navigation.keydown(e)}),blurSubscription=this.renderer.listen(element,"focusout",e=>{this.leavesMenu(e)&&this.navigation.focusLeave()}),clickSubscription=this.renderer.listen(element,"click",this.clickHandler.bind(this));this.domSubscriptions=()=>{overSubscription(),leaveSubscription(),keydownSubscription(),blurSubscription(),clickSubscription()}})}leavesMenu(e){return!e.relatedTarget||!inMenu(e.relatedTarget,this.itemsService)}onLeave(){const openOnClick=this.openOnClick;openOnClick&&"click"===openOnClick.toggle||this.hover.leave(openOnClick&&"leave"===openOnClick.toggle)}nodeItem(target){const node=((node,scope)=>dist_fesm2015_closestInScope(node,nodeIndex,this.element.nativeElement))(target);if(node){const index=nodeIndex(node);return this.itemsService.get(index)}}clickHandler(e){if(dist_fesm2015_isFocusable(e.target)&&!dist_fesm2015_hasClass(e.target,"k-menu-item"))return;const item=this.nodeItem(e.target);if(item&&!item.isContent&&!item.navigating)if(item.disabled)e.preventDefault();else{if(this.actions.select(item,e,()=>{e.preventDefault()}),this.navigation.focus(item),item.level>0&&!item.hasContent&&this.actions.closeToRoot(item),this.openOnClick){const hover=this.hover;item.opened?0===item.level&&(hover.openOnOver=!1,this.actions.close(item)):item.hasContent?(hover.openOnOver=!0,this.actions.closeOthers(item),this.actions.open(item)):(hover.openOnOver=!1,0===item.level&&"click"===this.openOnClick.toggle&&this.hover.closeCurrent())}this.actions.execute()}}}return ListComponent.fac=function(t){return new(t||ListComponent)(directiveInject(fesm2015_ItemsService),directiveInject(fesm2015_HoverService),directiveInject(fesm2015_ActionsService),directiveInject(kendo_angular_menu_ivy_ngcc_dist_fesm2015_NavigationService),directiveInject(Renderer2),directiveInject(NgZone),directiveInject(ElementRef))},ListComponent.cmp=defineComponent({type:ListComponent,selectors:[["","kendoMenuList",""]],inputs:{animate:"animate",items:"items",level:"level",index:"index",vertical:"vertical",rtl:"rtl",openOnClick:"openOnClick",itemTemplate:"itemTemplate",itemLinkTemplate:"itemLinkTemplate"},attrs:kendo_angular_menu_ivy_ngcc_dist_fesm2015_c0,decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["kendoMenuItem","","role","menuitem","class","k-item k-menu-item",3,"item","level","vertical","animate","rtl","itemTemplate","itemLinkTemplate","openOnClick","index","siblingIndex","ngClass","ngStyle","k-first","k-last","k-state-disabled",4,"ngIf"],["class","k-separator k-item","role","separator",3,"ngClass","ngStyle",4,"ngIf"],["kendoMenuItem","","role","menuitem",1,"k-item","k-menu-item",3,"item","level","vertical","animate","rtl","itemTemplate","itemLinkTemplate","openOnClick","index","siblingIndex","ngClass","ngStyle"],["role","separator",1,"k-separator","k-item",3,"ngClass","ngStyle"]],template:function(rf,ctx){1&rf&&template(0,ListComponent_ng_container_0_Template,3,2,"ng-container",0),2&rf&&property("ngForOf",ctx.items)},directives:function(){return[common_NgForOf,common_NgIf,fesm2015_ItemComponent,common_NgClass,common_NgStyle]},encapsulation:2}),ListComponent})();const POPUP_ALIGN={vertical:"top",horizontal:"left"},POPUP_ALIGN_RTL={vertical:"top",horizontal:"right"},VERTICAL_COLLISION={vertical:"flip",horizontal:"fit"},HORIZONTAL_COLLISION={vertical:"fit",horizontal:"flip"},POPUP_SETTINGS_RTL={vertical:{anchor:{vertical:"bottom",horizontal:"right"},popup:POPUP_ALIGN_RTL,collision:VERTICAL_COLLISION,animate:"down"},horizontal:{anchor:{vertical:"top",horizontal:"left"},popup:POPUP_ALIGN_RTL,collision:HORIZONTAL_COLLISION,animate:"left"}},POPUP_SETTINGS={vertical:{anchor:{vertical:"bottom",horizontal:"left"},popup:POPUP_ALIGN,collision:VERTICAL_COLLISION,animate:"down"},horizontal:{anchor:{vertical:"top",horizontal:"right"},popup:POPUP_ALIGN,collision:HORIZONTAL_COLLISION,animate:"right"}},dist_fesm2015_defined=value=>void 0!==value,bodyFactory=()=>{if(isDocumentAvailable())return new ElementRef(document.body)},fesm2015_0$3=bodyFactory;let fesm2015_ItemComponent=(()=>{class ItemComponent{constructor(itemsService,navigation,changeDetector,renderer,popupService,element){this.itemsService=itemsService,this.navigation=navigation,this.changeDetector=changeDetector,this.renderer=renderer,this.popupService=popupService,this.element=element,this.animate=!0,this.openOnClick=!1,this.opened=!1,this.navigating=!1,this.destroyed=!1}set index(index){this._index&&this._index!==index?(this.itemsService.remove(this),this._index=index,this.itemsService.add(this)):this._index=index,this.childId=this.itemsService.childId(index)}get index(){return this._index}get disabled(){return this.item.disabled}get hasPopup(){return!!this.hasContent||null}get expanded(){return this.hasContent?this.opened:null}get label(){return this.item.text?this.item.text:null}get activeId(){return this.index===this.navigation.activeIndex?"0":"-1"}get popupSettings(){const settings=this.rtl?POPUP_SETTINGS_RTL:POPUP_SETTINGS;return this.horizontal?settings.horizontal:settings.vertical}get horizontal(){return this.vertical||this.level>0}get hasLink(){return Boolean(this.item.url)}get linkTemplate(){return this.item.linkTemplate||this.itemLinkTemplate}get hasContent(){const items=this.item.items;return items&&items.length||this.item.contentTemplate}get isContent(){return Boolean(this.item.content)}get iconClass(){return"k-i-"+this.item.icon}get children(){const item=this.item;return item.contentTemplate?(this.contentItems||(this.contentItems=[{content:item.contentTemplate,owner:item,ownerIndex:this.index}]),this.contentItems):item.items}get template(){return this.item.template||this.itemTemplate}hasContentTemplates(){const item=this.item;return this.itemTemplate||item.contentTemplate||this.itemLinkTemplate||item.items&&item.items.find(current=>current.template||current.linkTemplate)}ngOnInit(){this.itemsService.add(this)}ngOnDestroy(){this.itemsService.remove(this),this.destroyed=!0,this.popupRef&&(this.popupRef.close(),this.popupRef=null)}focus(){this.element.nativeElement.focus()}toggleActive(isActive){this.setAttribute("tabindex",isActive?"0":"-1")}open(){if(!this.destroyed&&this.hasContent&&!this.opened){const popupSettings=this.popupSettings,animate=!!this.animate&&Object.assign({},this.animate,{direction:popupSettings.animate});this.opened=!0,this.popupRef=this.popupService.open({popupAlign:popupSettings.popup,anchorAlign:popupSettings.anchor,collision:popupSettings.collision,anchor:this.element,positionMode:"absolute",content:this.popupTemplate,popupClass:{"k-rtl":this.rtl,"k-menu-popup":!0},animate:animate}),this.setAttribute("aria-expanded","true"),this.setAttribute("aria-owns",this.childId),this.changeDetector.detectChanges()}}close(){!this.destroyed&&this.opened&&(this.opened=!1,this.popupRef&&(this.popupRef.close(),this.popupRef=null),this.changeDetector.detectChanges(),this.setAttribute("aria-expanded","false"),this.renderer.removeAttribute(this.element.nativeElement,"aria-owns"))}navigate(){let link;this.linkTemplate?link=this.element.nativeElement.querySelector("a.k-menu-link"):this.hasLink&&(link=this.link.nativeElement),link&&(this.navigating=!0,link.click(),this.navigating=!1)}setAttribute(name,value){this.renderer.setAttribute(this.element.nativeElement,name,value)}}return ItemComponent.fac=function(t){return new(t||ItemComponent)(directiveInject(fesm2015_ItemsService),directiveInject(kendo_angular_menu_ivy_ngcc_dist_fesm2015_NavigationService),directiveInject(ChangeDetectorRef),directiveInject(Renderer2),directiveInject(fesm2015_PopupService),directiveInject(ElementRef))},ItemComponent.cmp=defineComponent({type:ItemComponent,selectors:[["","kendoMenuItem",""]],viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(kendo_angular_menu_ivy_ngcc_dist_fesm2015_c1,!0),viewQuery(kendo_angular_menu_ivy_ngcc_dist_fesm2015_c2,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.link=_t.first),queryRefresh(_t=loadQuery())&&(ctx.popupTemplate=_t.first))},hostVars:5,hostBindings:function(rf,ctx){2&rf&&attribute("aria-disabled",ctx.disabled)("aria-haspopup",ctx.hasPopup)("aria-expanded",ctx.expanded)("aria-label",ctx.label)("tabindex",ctx.activeId)},inputs:{animate:"animate",openOnClick:"openOnClick",index:"index",item:"item",level:"level",siblingIndex:"siblingIndex",vertical:"vertical",rtl:"rtl",itemTemplate:"itemTemplate",itemLinkTemplate:"itemLinkTemplate"},features:[ProvidersFeature([fesm2015_PopupService,{provide:POPUP_CONTAINER,useFactory:fesm2015_0$3}])],attrs:kendo_angular_menu_ivy_ngcc_dist_fesm2015_c3,decls:8,vars:4,consts:[["class","k-link k-menu-link","role","presentation",3,"k-state-active",4,"ngIf"],["class","k-link k-menu-link","tabindex","-1","role","presentation",3,"k-state-active",4,"ngIf"],[4,"ngIf"],["class","k-content","role","presentation",4,"ngIf"],["popupTemplate",""],["itemcontent",""],["role","presentation",1,"k-link","k-menu-link"],["link",""],[3,"ngTemplateOutlet"],["tabindex","-1","role","presentation",1,"k-link","k-menu-link"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","presentation",1,"k-content"],["kendoMenuList","","role","menu",1,"k-group","k-menu-group","k-reset",3,"animate","rtl","vertical","openOnClick","items","level","index","itemTemplate","itemLinkTemplate"],["class","k-icon","role","presentation",3,"ngClass",4,"ngIf"],["class","k-icon k-menu-expand-arrow","role","presentation",3,"k-i-arrow-60-down","k-i-arrow-60-right","k-i-arrow-60-left",4,"ngIf"],["role","presentation",1,"k-icon",3,"ngClass"],["role","presentation",1,"k-icon","k-menu-expand-arrow"]],template:function(rf,ctx){1&rf&&(template(0,ItemComponent_span_0_Template,3,3,"span",0),template(1,ItemComponent_a_1_Template,3,4,"a",1),template(2,ItemComponent_2_Template,1,5,void 0,2),template(3,ItemComponent_div_3_Template,2,5,"div",3),template(4,ItemComponent_ng_template_4_Template,1,10,"ng-template",null,4,templateRefExtractor),template(6,ItemComponent_ng_template_6_Template,4,4,"ng-template",null,5,templateRefExtractor)),2&rf&&(property("ngIf",!ctx.hasLink&&!ctx.item.content&&!ctx.linkTemplate),advance(1),property("ngIf",ctx.item.url&&!ctx.linkTemplate),advance(1),property("ngIf",ctx.linkTemplate&&!ctx.item.content),advance(1),property("ngIf",ctx.item.content))},directives:[common_NgIf,common_NgTemplateOutlet,kendo_angular_menu_ivy_ngcc_dist_fesm2015_ListComponent,common_NgClass],encapsulation:2}),ItemComponent})(),fesm2015_MenuModule=(()=>{class MenuModule{}return MenuModule.mod=defineNgModule({type:MenuModule}),MenuModule.inj=defineInjector({factory:function(t){return new(t||MenuModule)},imports:[[fesm2015_PopupModule,common_CommonModule]]}),MenuModule})();class ContextMenuPopupEvent extends kendo_angular_menu_ivy_ngcc_dist_fesm2015_PreventableEvent{}let fesm2015_ContextMenuTemplateDirective=(()=>{class ContextMenuTemplateDirective{constructor(templateRef){this.templateRef=templateRef}}return ContextMenuTemplateDirective.fac=function(t){return new(t||ContextMenuTemplateDirective)(directiveInject(TemplateRef,8))},ContextMenuTemplateDirective.dir=defineDirective({type:ContextMenuTemplateDirective,selectors:[["","kendoContextMenuTemplate",""]]}),ContextMenuTemplateDirective})(),fesm2015_ContextMenuItemsService=(()=>{class ContextMenuItemsService{constructor(contextService){this.contextService=contextService}get(index){if(this.contextService.items)return this.contextService.items.get(index)}}return ContextMenuItemsService.fac=function(t){return new(t||ContextMenuItemsService)(inject(fesm2015_ContextMenuService))},ContextMenuItemsService.prov=defineInjectable({token:ContextMenuItemsService,factory:ContextMenuItemsService.fac}),ContextMenuItemsService})(),fesm2015_ContextMenuTargetService=(()=>{class ContextMenuTargetService{constructor(){this.targets=[]}add(target){this.targets.push(target)}remove(target){const index=this.targets.indexOf(target);this.targets.splice(index,1)}find(targetElement){return this.targets.find(target=>target.element===targetElement)}}return ContextMenuTargetService.fac=function(t){return new(t||ContextMenuTargetService)},ContextMenuTargetService.prov=defineInjectable({token:ContextMenuTargetService,factory:ContextMenuTargetService.fac}),ContextMenuTargetService})(),fesm2015_ContextMenuTargetContainerDirective=(()=>{class ContextMenuTargetContainerDirective{constructor(elementRef,targetService){this.targetService=targetService,elementRef&&(this.element=elementRef.nativeElement)}}return ContextMenuTargetContainerDirective.fac=function(t){return new(t||ContextMenuTargetContainerDirective)(directiveInject(ElementRef),directiveInject(fesm2015_ContextMenuTargetService))},ContextMenuTargetContainerDirective.dir=defineDirective({type:ContextMenuTargetContainerDirective,selectors:[["","kendoContextMenuTargetContainer",""]],exportAs:["kendoContextMenuTargetContainer"],features:[ProvidersFeature([fesm2015_ContextMenuTargetService])]}),ContextMenuTargetContainerDirective})();const DEFAULT_ANCHOR_ALIGN={horizontal:"left",vertical:"bottom"},DEFAULT_POPUP_ALIGN={horizontal:"left",vertical:"top"},DEFAULT_COLLISION={horizontal:"fit",vertical:"flip"},dist_fesm2015_preventDefault=e=>e.preventDefault(),fesm2015_1$2=bodyFactory;let fesm2015_ContextMenuComponent=(()=>{class ContextMenuComponent extends fesm2015_MenuBase{constructor(popupService,service,ngZone,renderer){super(),this.popupService=popupService,this.service=service,this.ngZone=ngZone,this.renderer=renderer,this.showOn="contextmenu",this.alignToAnchor=!1,this.vertical=!0,this.popupOpen=new core_EventEmitter,this.popupClose=new core_EventEmitter,this.select=new core_EventEmitter,this.open=new core_EventEmitter,this.close=new core_EventEmitter,this.service.owner=this,this.popupKeyDownHandler=this.popupKeyDownHandler.bind(this)}hide(){this.removePopup()}show(target){if(!target)return;const showTarget=target;this.removePopup(),dist_fesm2015_defined(showTarget.left)&&dist_fesm2015_defined(showTarget.top)?this.createPopup({offset:showTarget}):(this.currentTarget=showTarget.nativeElement||showTarget,this.createPopup({anchor:this.currentTarget}))}ngOnChanges(changes){(changes.target||changes.showOn)&&this.bindShowHandler()}ngOnInit(){this.ngZone.runOutsideAngular(()=>{const closeClickSubscription=this.renderer.listen("document","mousedown",e=>{this.popupRef&&!_ivy_ngcc_dist_fesm2015_closest(e.target,node=>node===this.popupRef.popupElement)&&this.service.leaveMenu(e)&&this.closePopup(e)}),closeBlurSubscription=this.renderer.listen("window","blur",e=>{this.popupRef&&this.closePopup(e)});this.closeSubscription=()=>{closeClickSubscription(),closeBlurSubscription()}})}ngOnDestroy(){this.closeSubscription&&(this.closeSubscription(),this.closeSubscription=null),this.unbindShowHandler(),this.removePopup()}emitMenuEvent(name,args){args.target=this.currentTarget,args.sender=this,this[name].emit(args),"select"!==name||args.hasContent||this.closeAndFocus(args.originalEvent)}bindShowHandler(){this.unbindShowHandler(),this.ngZone.runOutsideAngular(()=>{const element=this.targetElement();if(!element)return;const eventName=this.showOn||"contextmenu";this.showSubscription=this.renderer.listen(element,this.showOn||"contextmenu",e=>{this.showContextMenu(e,element)}),"contextmenu"===eventName&&(this.keydownSubscription=this.renderer.listen(element,"keydown",e=>{e.shiftKey&&e.keyCode===Keys.F10&&this.showContextMenu(e,element)}))})}showContextMenu(e,element){const filter=this.targetFilter();let currentTarget=element;if(filter){if(currentTarget=((element,selector,container)=>{const id=container.getAttribute("id");id||container.setAttribute("id","kendo-matches-container");const contextSelector=`#${id||"kendo-matches-container"} ${selector}`,match=dist_fesm2015_closestInScope(element,node=>((element,selector)=>(element.matches||element.msMatchesSelector).call(element,selector))(node,contextSelector),container);return id||container.removeAttribute("id"),match})(e.target,filter,element),currentTarget&&currentTarget!==e.target&&dist_fesm2015_isFocusable(e.target))return;currentTarget&&this.directiveTarget&&(currentTarget=this.target.targetService.find(currentTarget))}currentTarget?this.ngZone.run(()=>{this.closePopup(e)||(this.currentTarget=currentTarget,this.openPopup(e))}):this.closePopup(e)}unbindShowHandler(){this.showSubscription&&(this.showSubscription(),this.showSubscription=null),this.keydownSubscription&&(this.keydownSubscription(),this.keydownSubscription=null)}targetElement(){if(!isDocumentAvailable())return;this.directiveTarget=!1;let target=this.target;return"string"==typeof target?target=document.querySelector(target):target&&target.nativeElement?target=target.nativeElement:target instanceof fesm2015_ContextMenuTargetContainerDirective&&(target=target.element,this.directiveTarget=!0),target}targetFilter(){return this.directiveTarget?".k-contextmenu-target":this.filter}closePopup(e){if(this.popupRef)return this.popupAction("popupClose",e,()=>{this.removePopup()})}removePopup(){this.popupRef&&(this.popupRef.close(),this.popupRef=null,this.currentTarget=null),this.popupSubscriptions&&(this.popupSubscriptions(),this.popupSubscriptions=null)}openPopup(e){this.popupAction("popupOpen",e,()=>{let anchor,offset;e.preventDefault(),this.alignToAnchor||"keydown"===e.type?anchor=this.currentTargetElement:offset={left:e.pageX,top:e.pageY},this.createPopup({anchor:anchor,offset:offset})})}createPopup(options){this.popupRef=this.popupService.open(Object.assign({animate:!dist_fesm2015_defined(this.popupAnimate)||this.popupAnimate,appendTo:this.appendTo,collision:this.collision||DEFAULT_COLLISION,popupAlign:this.popupAlign||DEFAULT_POPUP_ALIGN,anchorAlign:this.anchorAlign||DEFAULT_ANCHOR_ALIGN,content:this.contentTemplate?this.contentTemplate.templateRef:this.defaultContentTemplate,popupClass:"k-menu-popup"},options));const element=this.popupRef.popupElement;this.renderer.addClass(element,"k-context-menu-popup"),this.renderer.setAttribute(element,"tabindex","-1"),this.renderer.setStyle(element,"outline","0"),this.ariaLabel&&this.renderer.setAttribute(element,"aria-label",this.ariaLabel),this.activeTarget=this.currentTargetElement===document.activeElement,this.ngZone.runOutsideAngular(()=>{const unbindKeyDown=this.renderer.listen(element,"keydown",this.popupKeyDownHandler),unbindContextmenu=this.renderer.listen(element,"contextmenu",dist_fesm2015_preventDefault);this.popupSubscriptions=()=>{unbindKeyDown(),unbindContextmenu()}}),element.focus()}closeAndFocus(e){const currentTarget=this.currentTargetElement;!this.closePopup(e)&&this.activeTarget&&currentTarget.focus()}popupKeyDownHandler(e){const element=this.popupRef.popupElement;e.keyCode!==Keys.Escape||!dist_fesm2015_hasClass(e.target,"k-menu-item")&&e.target!==element?e.target===element&&this.service.keydown.emit(e):this.closeAndFocus(e)}popupAction(name,originalEvent,callback){const emitter=this[name];let prevented=!1;return hasObservers(emitter)?this.ngZone.run(()=>{const args=new ContextMenuPopupEvent({originalEvent:originalEvent,sender:this,target:this.currentTarget});emitter.emit(args),args.isDefaultPrevented()||callback(),prevented=args.isDefaultPrevented()}):callback(),prevented}get currentTargetElement(){return this.directiveTarget&&this.currentTarget?this.currentTarget.element:this.currentTarget}}return ContextMenuComponent.fac=function(t){return new(t||ContextMenuComponent)(directiveInject(fesm2015_PopupService),directiveInject(fesm2015_ContextMenuService),directiveInject(NgZone),directiveInject(Renderer2))},ContextMenuComponent.cmp=defineComponent({type:ContextMenuComponent,selectors:[["kendo-contextmenu"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,fesm2015_ContextMenuTemplateDirective,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.contentTemplate=_t.first)},viewQuery:function(rf,ctx){var _t;1&rf&&viewQuery(kendo_angular_menu_ivy_ngcc_dist_fesm2015_c5,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.defaultContentTemplate=_t.first)},inputs:{showOn:"showOn",alignToAnchor:"alignToAnchor",vertical:"vertical",target:"target",filter:"filter",popupAnimate:"popupAnimate",popupAlign:"popupAlign",anchorAlign:"anchorAlign",collision:"collision",appendTo:"appendTo",ariaLabel:"ariaLabel"},outputs:{popupOpen:"popupOpen",popupClose:"popupClose",select:"select",open:"open",close:"close"},exportAs:["kendoContextMenu"],features:[ProvidersFeature([fesm2015_ContextMenuService,fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.contextmenu"},{provide:fesm2015_ItemsService,useClass:fesm2015_ContextMenuItemsService},{provide:fesm2015_MenuBase,useExisting:forwardRef(()=>ContextMenuComponent)},fesm2015_PopupService,{provide:POPUP_CONTAINER,useFactory:fesm2015_1$2}]),InheritDefinitionFeature,NgOnChangesFeature],decls:2,vars:0,consts:[["default",""],[3,"items","vertical","openOnClick","hoverDelay","animate","menuItemTemplate","menuItemLinkTemplate"]],template:function(rf,ctx){1&rf&&template(0,ContextMenuComponent_ng_template_0_Template,1,7,"ng-template",null,0,templateRefExtractor)},directives:[fesm2015_MenuComponent],encapsulation:2}),ContextMenuComponent})(),fesm2015_ContextMenuModule=(()=>{class ContextMenuModule{}return ContextMenuModule.mod=defineNgModule({type:ContextMenuModule}),ContextMenuModule.inj=defineInjector({factory:function(t){return new(t||ContextMenuModule)},imports:[[fesm2015_PopupModule,common_CommonModule,fesm2015_MenuModule],fesm2015_MenuModule]}),ContextMenuModule})();function DialogActionsComponent_0_Template(rf,ctx){1&rf&&projection(0,0,["*ngIf","!actions"])}function DialogActionsComponent_ng_container_1_button_1_Template(rf,ctx){if(1&rf){const _r6=getCurrentView();elementStart(0,"button",2),listener("click",(function($event){restoreView(_r6);const action_r4=ctx.$implicit;return nextContext(2).onButtonClick(action_r4,$event)})),text(1),elementEnd()}if(2&rf){const action_r4=ctx.$implicit;property("ngClass",nextContext(2).buttonClass(action_r4)),advance(1),textInterpolate1(" ",action_r4.text," ")}}function DialogActionsComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(elementContainerStart(0),template(1,DialogActionsComponent_ng_container_1_button_1_Template,2,2,"button",1),elementContainerEnd()),2&rf){const ctx_r1=nextContext();advance(1),property("ngForOf",ctx_r1.actions)}}function DialogActionsComponent_2_ng_template_0_Template(rf,ctx){}function DialogActionsComponent_2_Template(rf,ctx){1&rf&&template(0,DialogActionsComponent_2_ng_template_0_Template,0,0,"ng-template",3),2&rf&&property("ngTemplateOutlet",nextContext().actions)}const kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c0=["*"],kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c3=["closeTitle",$localize`:kendo.dialog.closeTitle|The title of the close button9b2bd34897f127e69e5f02f64692fca98a5a75727499923323865444383:Close`];function DialogComponent_kendo_dialog_titlebar_2_Template(rf,ctx){if(1&rf&&(elementStart(0,"kendo-dialog-titlebar",6),text(1),elementEnd()),2&rf){const ctx_r0=nextContext();property("closeTitle",ctx_r0.closeTitle)("id",ctx_r0.titleId),advance(1),textInterpolate(ctx_r0.title)}}function DialogComponent_3_Template(rf,ctx){1&rf&&projection(0,0,["*ngIf","!title"])}function DialogComponent_5_Template(rf,ctx){1&rf&&projection(0,1,["*ngIf","!contentTemplate"])}function DialogComponent_6_ng_template_0_Template(rf,ctx){}function DialogComponent_6_Template(rf,ctx){1&rf&&template(0,DialogComponent_6_ng_template_0_Template,0,0,"ng-template",7),2&rf&&property("ngTemplateOutlet",nextContext().contentTemplate)}function DialogComponent_7_Template(rf,ctx){1&rf&&projection(0,2,["*ngIf","!actions"])}function DialogComponent_kendo_dialog_actions_8_Template(rf,ctx){if(1&rf&&element(0,"kendo-dialog-actions",8),2&rf){const ctx_r5=nextContext();property("actions",ctx_r5.actions)("layout",ctx_r5.actionsLayout)}}const kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c4=[[["kendo-dialog-titlebar"]],"*",[["kendo-dialog-actions"]]],kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c5=["kendo-dialog-titlebar","*","kendo-dialog-actions"];function WindowTitleBarComponent_0_Template(rf,ctx){1&rf&&projection(0,0,["*ngIf","!template"])}function WindowTitleBarComponent_1_ng_template_0_Template(rf,ctx){}const kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c6=function(a0){return{$implicit:a0}};function WindowTitleBarComponent_1_Template(rf,ctx){if(1&rf&&template(0,WindowTitleBarComponent_1_ng_template_0_Template,0,0,"ng-template",1),2&rf){const ctx_r1=nextContext();property("ngTemplateOutlet",ctx_r1.template)("ngTemplateOutletContext",pureFunction1(2,kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c6,ctx_r1.service))}}const _ivy_ngcc_dist_fesm2015_c15=["closeTitle",$localize`:kendo.window.closeTitle|The title of the close buttonbb50cb526949482fc976fd868573ab283580ee692849207436137160812:Close`,"restoreTitle",$localize`:kendo.window.restoreTitle|The title of the restore button9a9ce231f0396e40adcfa80bfa76e546e0085be03443120027481340803:Restore`,"maximizeTitle",$localize`:kendo.window.maximizeTitle|The title of the maximize button42bc654ef8767c5df5277aa88941b94f8d373b4d7793415109119115257:Maximize`,"minimizeTitle",$localize`:kendo.window.minimizeTitle|The title of the minimize button7ca9f9b41a23760f7f74e91ee4c76d5a5f4a706c7581084655285341827:Minimize`];function WindowComponent_kendo_window_titlebar_3_Template(rf,ctx){if(1&rf&&(elementStart(0,"kendo-window-titlebar",5),elementStart(1,"div",6),text(2),elementEnd(),elementStart(3,"div",7),element(4,"button",8),element(5,"button",9),element(6,"button",10),element(7,"button",11),elementEnd(),elementEnd()),2&rf){const ctx_r0=nextContext();property("template",ctx_r0.titleBarTemplate),advance(2),textInterpolate(ctx_r0.title),advance(2),attribute("title",ctx_r0.minimizeButtonTitle)("aria-label",ctx_r0.minimizeButtonTitle),advance(1),attribute("title",ctx_r0.maximizeButtonTitle)("aria-label",ctx_r0.maximizeButtonTitle),advance(1),attribute("title",ctx_r0.restoreButtonTitle)("aria-label",ctx_r0.restoreButtonTitle),advance(1),attribute("title",ctx_r0.closeButtonTitle)("aria-label",ctx_r0.closeButtonTitle)}}function WindowComponent_4_Template(rf,ctx){1&rf&&projection(0,0,["*ngIf","!showDefaultTitleBar"])}function WindowComponent_div_5_1_Template(rf,ctx){1&rf&&projection(0,1,["*ngIf","!contentTemplate"])}function WindowComponent_div_5_2_ng_template_0_Template(rf,ctx){}function WindowComponent_div_5_2_Template(rf,ctx){1&rf&&template(0,WindowComponent_div_5_2_ng_template_0_Template,0,0,"ng-template",13),2&rf&&property("ngTemplateOutlet",nextContext(2).contentTemplate)}function WindowComponent_div_5_Template(rf,ctx){if(1&rf&&(elementStart(0,"div",12),template(1,WindowComponent_div_5_1_Template,1,0,void 0,2),template(2,WindowComponent_div_5_2_Template,1,1,void 0,2),elementEnd()),2&rf){const ctx_r2=nextContext();property("hidden","minimized"===ctx_r2.state&&ctx_r2.keepContent),advance(1),property("ngIf",!ctx_r2.contentTemplate),advance(1),property("ngIf",ctx_r2.contentTemplate)}}function WindowComponent_ng_template_6_div_0_Template(rf,ctx){1&rf&&element(0,"div",15),2&rf&&property("direction",ctx.$implicit)}function WindowComponent_ng_template_6_Template(rf,ctx){1&rf&&template(0,WindowComponent_ng_template_6_div_0_Template,1,1,"div",14),2&rf&&property("ngForOf",nextContext().resizeDirections)}const _ivy_ngcc_dist_fesm2015_c16=[[["kendo-window-titlebar"]],"*"],_ivy_ngcc_dist_fesm2015_c17=["kendo-window-titlebar","*"];let fesm2015_DialogActionsComponent=(()=>{class DialogActionsComponent{constructor(el){this.el=el,this.layout="stretched",this.action=new core_EventEmitter,this.buttonGroupClassName=!0}get className(){return"stretched"===this.layout}actionTemplate(){return this.actions instanceof TemplateRef}onButtonClick(action,_e){this.action.emit(action)}buttonClass(action){const classes=["k-button"];return action.primary&&classes.push("k-primary"),classes.join(" ")}}return DialogActionsComponent.fac=function(t){return new(t||DialogActionsComponent)(directiveInject(ElementRef))},DialogActionsComponent.cmp=defineComponent({type:DialogActionsComponent,selectors:[["kendo-dialog-actions"]],hostVars:4,hostBindings:function(rf,ctx){2&rf&&classProp("k-dialog-buttongroup",ctx.buttonGroupClassName)("k-dialog-button-layout-stretched",ctx.className)},inputs:{layout:"layout",actions:"actions"},outputs:{action:"action"},ngContentSelectors:kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c0,decls:3,vars:3,consts:[[4,"ngIf"],["type","button",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",3,"ngClass","click"],[3,"ngTemplateOutlet"]],template:function(rf,ctx){1&rf&&(projectionDef(),template(0,DialogActionsComponent_0_Template,1,0,void 0,0),template(1,DialogActionsComponent_ng_container_1_Template,2,1,"ng-container",0),template(2,DialogActionsComponent_2_Template,1,1,void 0,0)),2&rf&&(property("ngIf",!ctx.actions),advance(1),property("ngIf",!ctx.actionTemplate()),advance(1),property("ngIf",ctx.actionTemplate()))},directives:[common_NgIf,common_NgForOf,common_NgClass,common_NgTemplateOutlet],encapsulation:2}),DialogActionsComponent})();const DIALOG_LOCALIZATION_SERVICE=new InjectionToken("Dialog LocalizationService");let fesm2015_TitleBarLocalizationService=(()=>{class TitleBarLocalizationService extends fesm2015_LocalizationService{constructor(prefix,messageService,rtl,dialogLocalization){super(prefix,messageService,rtl),this.dialogLocalization=dialogLocalization}get(shortKey){return this.dialogLocalization?this.dialogLocalization.get(shortKey):super.get(shortKey)}}return TitleBarLocalizationService.fac=function(t){return new(t||TitleBarLocalizationService)(inject(L10N_PREFIX),inject(fesm2015_MessageService,8),inject(RTL,8),inject(DIALOG_LOCALIZATION_SERVICE,8))},TitleBarLocalizationService.prov=defineInjectable({token:TitleBarLocalizationService,factory:TitleBarLocalizationService.fac}),TitleBarLocalizationService})();class kendo_angular_dialog_ivy_ngcc_dist_fesm2015_PreventableEvent{constructor(){this.prevented=!1}preventDefault(){this.prevented=!0}isDefaultPrevented(){return this.prevented}}let fesm2015_DialogTitleBarComponent=(()=>{class DialogTitleBarComponent{constructor(hostElement,localizationService){this.hostElement=hostElement,this.localizationService=localizationService,this.close=new core_EventEmitter}get className(){return!0}get closeButtonTitle(){return this.closeTitle||this.localizationService.get("closeTitle")}ngAfterViewChecked(){this.hostElement.nativeElement.setAttribute("id",this.id)}onCloseClick(e){e.preventDefault();const eventArgs=new kendo_angular_dialog_ivy_ngcc_dist_fesm2015_PreventableEvent;this.close.emit(eventArgs)}}return DialogTitleBarComponent.fac=function(t){return new(t||DialogTitleBarComponent)(directiveInject(ElementRef),directiveInject(fesm2015_LocalizationService,8))},DialogTitleBarComponent.cmp=defineComponent({type:DialogTitleBarComponent,selectors:[["kendo-dialog-titlebar"]],hostVars:4,hostBindings:function(rf,ctx){2&rf&&classProp("k-window-titlebar",ctx.className)("k-dialog-titlebar",ctx.className)},inputs:{id:"id",closeTitle:"closeTitle"},outputs:{close:"close"},features:[ProvidersFeature([fesm2015_TitleBarLocalizationService,{provide:fesm2015_LocalizationService,useExisting:fesm2015_TitleBarLocalizationService},{provide:L10N_PREFIX,useValue:"kendo.dialog"}])],ngContentSelectors:kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c0,decls:8,vars:2,consts:[["kendoDialogTitleBarLocalizedMessages","",6,"closeTitle"],[1,"k-window-title","k-dialog-title"],[1,"k-window-actions","k-dialog-actions"],["href","#","role","button",1,"k-button","k-bare","k-button-icon","k-window-action","k-dialog-action","k-dialog-close",3,"click"],[1,"k-icon","k-i-x"]],template:function(rf,ctx){1&rf&&(projectionDef(),elementContainerStart(0,0),i18nAttributes(1,kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c3),elementContainerStart(2),elementStart(3,"div",1),projection(4),elementEnd(),elementStart(5,"div",2),elementStart(6,"a",3),listener("click",(function($event){return ctx.onCloseClick($event)})),element(7,"span",4),elementEnd(),elementEnd(),elementContainerEnd(),elementContainerEnd()),2&rf&&(advance(6),attribute("title",ctx.closeButtonTitle)("aria-label",ctx.closeButtonTitle))},directives:function(){return[kendo_angular_dialog_ivy_ngcc_dist_fesm2015_LocalizedMessagesDirective]},encapsulation:2}),DialogTitleBarComponent})();const kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent=value=>null!=value,_ivy_ngcc_dist_fesm2015_toClassList=classNames=>String(classNames).trim().split(" "),_ivy_ngcc_dist_fesm2015_focusableRegex=/^(?:a|input|select|textarea|button|object)$/i;var dist_fesm2015_Keys=function(Keys){return Keys[Keys.esc=27]="esc",Keys[Keys.tab=9]="tab",Keys[Keys.enter=13]="enter",Keys[Keys.space=32]="space",Keys[Keys.ctrl=17]="ctrl",Keys[Keys.shift=16]="shift",Keys[Keys.left=37]="left",Keys[Keys.up=38]="up",Keys[Keys.right=39]="right",Keys[Keys.down=40]="down",Keys}({});const fesm2015_hasClasses=(element,classNames)=>{const namesList=_ivy_ngcc_dist_fesm2015_toClassList(classNames);return Boolean(_ivy_ngcc_dist_fesm2015_toClassList(element.className).find(className=>namesList.indexOf(className)>=0))},_ivy_ngcc_dist_fesm2015_isFocusable=(element,checkVisibility=!0)=>{if(element.tagName){const tagName=element.tagName.toLowerCase(),tabIndex=element.getAttribute("tabIndex"),validTabIndex=null!==tabIndex&&!isNaN(tabIndex)&&tabIndex>-1;let focusable=!1;return focusable=_ivy_ngcc_dist_fesm2015_focusableRegex.test(tagName)?!element.disabled:validTabIndex,focusable&&(!checkVisibility||(element=>{const rect=element.getBoundingClientRect();return!(!rect.width||!rect.height)&&"hidden"!==window.getComputedStyle(element).visibility})(element))}return!1},focusableSelector=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]"].join(","),_ivy_ngcc_dist_fesm2015_preventDefault=({originalEvent:event})=>{event.stopPropagation(),event.preventDefault()},RESIZE_DIRECTIONS=["n","e","s","w","se","sw","ne","nw"],OFFSET_STYLES=["top","left","width","height"],createValueWithUnit=value=>value+((value=>"number"==typeof value&&isFinite(value))(value)?"px":"");class DialogCloseResult{}let fesm2015_DialogComponent=(()=>{class DialogComponent{constructor(_elRef,_renderer,localization){this._elRef=_elRef,this._renderer=_renderer,this.actionsLayout="stretched",this.titleId=null,this.action=new core_EventEmitter,this.close=new core_EventEmitter,this.tabIndex=0,this.subscriptions=[],this.direction=localization.rtl?"rtl":"ltr",this.subscriptions.push(localization.changes.subscribe(({rtl:rtl})=>this.direction=rtl?"rtl":"ltr")),this.titleId=this.generateTitleId()}get dir(){return this.direction}onComponentKeydown(event){const target=event.target,parent=target.parentElement;(fesm2015_hasClasses(target,"k-dialog-wrapper k-dialog-buttongroup k-dialog-action")||fesm2015_hasClasses(parent,"k-dialog-wrapper k-dialog-buttongroup k-dialog-action"))&&event.keyCode===dist_fesm2015_Keys.esc&&this.close.emit(new DialogCloseResult),fesm2015_hasClasses(target,"k-button")&&fesm2015_hasClasses(parent,"k-dialog-buttongroup")&&(event.keyCode===dist_fesm2015_Keys.left||event.keyCode===dist_fesm2015_Keys.right)&&this.handleActionButtonFocus(parent,event.keyCode),event.keyCode===dist_fesm2015_Keys.tab&&this.keepFocusWithinComponent(target,event)}ngAfterContentInit(){this.bubble("close",this.titlebarContent),this.titlebarContent&&(this.titlebarContent.id=this.titleId)}ngAfterViewInit(){this.handleInitialFocus(),this.bubble("close",this.titlebarView),this.bubble("action",this.actionsView),(this.titlebarView||this.titlebarContent)&&this._renderer.setAttribute(this._elRef.nativeElement.querySelector(".k-dialog"),"aria-labelledby",this.titleId)}ngOnInit(){this._renderer.removeAttribute(this._elRef.nativeElement,"title")}ngOnDestroy(){this.subscriptions.forEach(s=>s.unsubscribe()),this.subscriptions=[]}focus(){const wrapper=this._elRef.nativeElement;kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(wrapper)&&wrapper.focus()}handleInitialFocus(){const wrapper=this._elRef.nativeElement,primaryButton=wrapper.querySelector(".k-primary");if(this.autoFocusedElement){const initiallyFocusedElement=wrapper.querySelector(this.autoFocusedElement);initiallyFocusedElement&&initiallyFocusedElement.focus()}else this.shouldFocusPrimary(primaryButton)?primaryButton.focus():wrapper.focus()}handleActionButtonFocus(parent,key){const focusableActionButtons=this.getAllFocusableChildren(parent);for(let i=0;i<focusableActionButtons.length;i++)if(focusableActionButtons[i]===document.activeElement){if(key===dist_fesm2015_Keys.left&&i>0){focusableActionButtons[i-1].focus();break}if(key===dist_fesm2015_Keys.right&&i<focusableActionButtons.length-1){focusableActionButtons[i+1].focus();break}}}keepFocusWithinComponent(target,event){const firstFocusable=this._elRef.nativeElement,lastFocusable=this.getLastFocusableElement(firstFocusable),tabBeforeFirstFocusable=target===firstFocusable&&event.shiftKey,tabAfterLastFocusable=!event.shiftKey&&kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(lastFocusable)&&target===lastFocusable,tabWithNoFocusable=!kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(lastFocusable)&&!event.shiftKey;(tabBeforeFirstFocusable||tabWithNoFocusable)&&(event.preventDefault(),firstFocusable.focus()),tabAfterLastFocusable&&(event.preventDefault(),lastFocusable.focus())}shouldFocusPrimary(el){return kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(el)&&_ivy_ngcc_dist_fesm2015_isFocusable(el)}getAllFocusableChildren(parent){return parent.querySelectorAll(focusableSelector)}getLastFocusableElement(parent){const all=this.getAllFocusableChildren(parent);return all.length>0?all[all.length-1]:null}generateTitleId(){return"kendo-dialog-title-"+Math.ceil(1e6*Math.random()).toString()}get wrapperClass(){return!0}get styles(){const styles={};return this.width&&(styles.width=createValueWithUnit(this.width)),this.height&&(styles.height=createValueWithUnit(this.height)),this.minWidth&&(styles.minWidth=createValueWithUnit(this.minWidth)),this.maxWidth&&(styles.maxWidth=createValueWithUnit(this.maxWidth)),this.minHeight&&(styles.minHeight=createValueWithUnit(this.minHeight)),this.maxHeight&&(styles.maxHeight=createValueWithUnit(this.maxHeight)),styles}bubble(eventName,component){if(component){const s=component[eventName].subscribe(e=>this[eventName].emit(e));this.subscriptions.push(s)}}}return DialogComponent.fac=function(t){return new(t||DialogComponent)(directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_LocalizationService))},DialogComponent.cmp=defineComponent({type:DialogComponent,selectors:[["kendo-dialog"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,fesm2015_DialogTitleBarComponent,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.titlebarContent=_t.first)},viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(fesm2015_DialogTitleBarComponent,!0),viewQuery(fesm2015_DialogActionsComponent,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.titlebarView=_t.first),queryRefresh(_t=loadQuery())&&(ctx.actionsView=_t.first))},hostVars:4,hostBindings:function(rf,ctx){1&rf&&listener("keydown",(function($event){return ctx.onComponentKeydown($event)})),2&rf&&(attribute("tabIndex",ctx.tabIndex)("dir",ctx.dir),classProp("k-dialog-wrapper",ctx.wrapperClass))},inputs:{actionsLayout:"actionsLayout",actions:"actions",autoFocusedElement:"autoFocusedElement",title:"title",width:"width",minWidth:"minWidth",maxWidth:"maxWidth",height:"height",minHeight:"minHeight",maxHeight:"maxHeight"},outputs:{action:"action",close:"close"},exportAs:["kendoDialog"],features:[ProvidersFeature([fesm2015_LocalizationService,{provide:DIALOG_LOCALIZATION_SERVICE,useExisting:fesm2015_LocalizationService},{provide:L10N_PREFIX,useValue:"kendo.dialog"}])],ngContentSelectors:kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c5,decls:9,vars:9,consts:[[1,"k-overlay"],["role","dialog",1,"k-widget","k-window","k-dialog",3,"ngStyle"],[3,"closeTitle","id",4,"ngIf"],[4,"ngIf"],[1,"k-content","k-window-content","k-dialog-content"],[3,"actions","layout",4,"ngIf"],[3,"closeTitle","id"],[3,"ngTemplateOutlet"],[3,"actions","layout"]],template:function(rf,ctx){1&rf&&(projectionDef(kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c4),element(0,"div",0),elementStart(1,"div",1),template(2,DialogComponent_kendo_dialog_titlebar_2_Template,2,3,"kendo-dialog-titlebar",2),template(3,DialogComponent_3_Template,1,0,void 0,3),elementStart(4,"div",4),template(5,DialogComponent_5_Template,1,0,void 0,3),template(6,DialogComponent_6_Template,1,1,void 0,3),elementEnd(),template(7,DialogComponent_7_Template,1,0,void 0,3),template(8,DialogComponent_kendo_dialog_actions_8_Template,1,2,"kendo-dialog-actions",5),elementEnd()),2&rf&&(property("@overlayAppear",void 0),advance(1),property("ngStyle",ctx.styles)("@dialogSlideInAppear",void 0),advance(1),property("ngIf",ctx.title),advance(1),property("ngIf",!ctx.title),advance(2),property("ngIf",!ctx.contentTemplate),advance(1),property("ngIf",ctx.contentTemplate),advance(1),property("ngIf",!ctx.actions),advance(1),property("ngIf",ctx.actions))},directives:[common_NgStyle,common_NgIf,fesm2015_DialogTitleBarComponent,common_NgTemplateOutlet,fesm2015_DialogActionsComponent],encapsulation:2,data:{animation:[trigger("overlayAppear",[animations_state("in",animations_style({opacity:1})),animations_transition("void => *",[animations_style({opacity:.1}),animations_animate(".3s cubic-bezier(.2, .6, .4, 1)")])]),trigger("dialogSlideInAppear",[animations_state("in",animations_style({transform:"translate(0, 0)"})),animations_transition("void => *",[animations_style({transform:"translate(0, -10%)"}),animations_animate(".3s cubic-bezier(.2, 1, .2, 1)")])])]}}),DialogComponent})(),fesm2015_DialogContentBase=(()=>{class DialogContentBase{constructor(dialog){this.dialog=dialog}ngAfterViewInit(){this.dialogTitleBar&&this.dialogTitleBar.close.pipe(filter_filter(e=>!e.isDefaultPrevented())).subscribe(()=>{this.dialog.close()}),this.dialogActions&&this.dialogActions.actions&&this.dialogActions.action.subscribe(action=>this.dialog.dialog.instance.action.emit(action))}}return DialogContentBase.fac=function(t){invalidFactory()},DialogContentBase.dir=defineDirective({type:DialogContentBase,viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(fesm2015_DialogTitleBarComponent,!0),viewQuery(fesm2015_DialogActionsComponent,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.dialogTitleBar=_t.first),queryRefresh(_t=loadQuery())&&(ctx.dialogActions=_t.first))}}),DialogContentBase})(),fesm2015_DialogContainerService=(()=>{class DialogContainerService{set container(container){DialogContainerService.container=container}get container(){return DialogContainerService.container}}return DialogContainerService.fac=function(t){return new(t||DialogContainerService)},DialogContainerService.prov=defineInjectable({token:DialogContainerService,factory:DialogContainerService.fac}),DialogContainerService.container=null,DialogContainerService})();class DialogInjector{constructor(getDialogRef,parentInjector){this.getDialogRef=getDialogRef,this.parentInjector=parentInjector}get(token,notFoundValue){return token===class{}?this.getDialogRef():this.parentInjector.get(token,notFoundValue)}}let fesm2015_DialogService=(()=>{class DialogService{constructor(resolver,containerService){this.resolver=resolver,this.containerService=containerService}open(options){const factory=this.resolver.resolveComponentFactory(fesm2015_DialogComponent),container=options.appendTo||this.containerService.container;if(!container)throw new Error("\nCannot attach dialog to the page.\nAdd an element that uses the kendoDialogContainer directive, or set the 'appendTo' property.\nSee https://www.telerik.com/kendo-angular-ui/components/dialogs/dialog/service/.\n          ");return this.initializeDialog(options.content,factory,container,{close:()=>{},content:null,dialog:null,result:null},options)}initializeDialog(component,factory,container,dialogRef,options){const content=this.contentFrom(component,container,dialogRef),dialog=container.createComponent(factory,void 0,void 0,content.nodes);dialogRef.dialog=dialog,dialog.changeDetectorRef.markForCheck(),this.applyOptions(dialog.instance,options);const apiClose=new Subject_Subject,close=e=>{e instanceof kendo_angular_dialog_ivy_ngcc_dist_fesm2015_PreventableEvent&&(e=new DialogCloseResult),apiClose.next(e||new DialogCloseResult),content.componentRef&&content.componentRef.destroy(),dialog.destroy()},result=merge(apiClose,merge(dialog.instance.close,dialog.instance.action).pipe(map_map(e=>e instanceof kendo_angular_dialog_ivy_ngcc_dist_fesm2015_PreventableEvent?new DialogCloseResult:e),filter_filter(e=>{if(options.preventAction){const dialogRefParameter=(component=>{return(value=component)instanceof String||"string"==typeof value||component instanceof TemplateRef;var value})(component)?void 0:dialogRef;return!options.preventAction(e,dialogRefParameter)}return!0}))).pipe(take_take(1),share());if(result.subscribe(close),dialogRef.close=close,dialogRef.result=result,component&&isDevMode()){const hasContentTitle=content.nodes[0]&&content.nodes[0].length>0,hasContentActions=content.nodes[2]&&content.nodes[2].length>0,multipleTitles=options.title&&hasContentTitle,multipleActions=options.actions&&hasContentActions;component.prototype instanceof fesm2015_DialogContentBase?(multipleTitles||multipleActions)&&console.warn("\n                    Multiple Title and/or Actions configurations detected.\n                    When using a component as content, provide the title and actions either in the component's markup\n                    or via the title and actions properties of the DialogSettings object, but not both.\n                    See https://www.telerik.com/kendo-angular-ui/components/dialogs/dialog/service/#toc-passing-title-content-and-actions-as-a-single-component'"):(hasContentTitle||hasContentActions)&&console.warn("\n                    When Title and/or Actions markup is provided in content component's template,\n                    the component needs to inherit the DialogContentBase class to ensure that close and result events are properly hooked.\n                    See https://www.telerik.com/kendo-angular-ui/components/dialogs/dialog/service/#toc-passing-title-content-and-actions-as-a-single-component'")}return dialogRef}applyOptions(instance,options){instance.title=options.title,instance.actions=options.actions,instance.actionsLayout=options.actionsLayout||"stretched",instance.width=options.width,instance.minWidth=options.minWidth,instance.maxWidth=options.maxWidth,instance.height=options.height,instance.minHeight=options.minHeight,instance.maxHeight=options.maxHeight,instance.autoFocusedElement=options.autoFocusedElement,instance.closeTitle=options.closeTitle,options.content instanceof TemplateRef&&(instance.contentTemplate=options.content)}contentFrom(content,container,dialogRef){const renderer=container.injector.get(Renderer2);let nodes=[],titleNodes=[],actionNodes=[],componentRef=null;if("string"==typeof content)nodes=[renderer.createText(content)];else if(content&&!(content instanceof TemplateRef)){const injector=new DialogInjector(()=>dialogRef,container.injector),factory=this.resolver.resolveComponentFactory(content);componentRef=container.createComponent(factory,void 0,injector),titleNodes=Array.from(componentRef.location.nativeElement.querySelectorAll("kendo-dialog-titlebar")),nodes=[componentRef.location.nativeElement],actionNodes=Array.from(componentRef.location.nativeElement.querySelectorAll("kendo-dialog-actions")),dialogRef.content=componentRef}return{componentRef:componentRef,nodes:[titleNodes,nodes,actionNodes]}}}return DialogService.fac=function(t){return new(t||DialogService)(inject(ComponentFactoryResolver),inject(fesm2015_DialogContainerService))},DialogService.prov=defineInjectable({token:DialogService,factory:DialogService.fac}),DialogService})(),newZIndex=10002;const fesm2015_DEFAULT_OPTIONS={draggable:!0,height:null,left:null,minHeight:100,minWidth:120,position:"absolute",resizable:!0,state:"default",top:null,width:null},fesm2015_createMoveStream=(el,ev)=>mouseDown=>el.kendoDrag.pipe(takeUntil(el.kendoRelease.pipe(tap(()=>{ev.emit()}))),map_map(({pageX:pageX,pageY:pageY})=>({originalX:mouseDown.pageX,originalY:mouseDown.pageY,pageX:pageX,pageY:pageY})));let fesm2015_DragResizeService=(()=>{class DragResizeService{constructor(ngZone){this.ngZone=ngZone,this.close=new core_EventEmitter,this.focus=new core_EventEmitter,this.change=new core_EventEmitter,this.stateChange=new core_EventEmitter,this.dragStart=new core_EventEmitter,this.dragEnd=new core_EventEmitter,this.resizeStart=new core_EventEmitter,this.resizeEnd=new core_EventEmitter,this.options=Object.assign({},fesm2015_DEFAULT_OPTIONS),this.lastAction=null,this.subscriptions=new Subscription_Subscription,this.dragSubscription=new Subscription_Subscription}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe(),this.dragSubscription&&this.dragSubscription.unsubscribe()}init(el){const state$$1=this.options.state;let options=this.options;this.window=el,"default"!==state$$1&&(this.restoreOptions=Object.assign({},options)),"minimized"===state$$1&&(options.height=0,options.minHeight=0),"maximized"===state$$1&&(options.position="fixed")}onDrag(el){this.subscriptions.add(this.ngZone.runOutsideAngular(()=>{let startPosition,dragStarted;this.dragSubscription=el.kendoPress.pipe(tap(ev=>{ev.isTouch||_ivy_ngcc_dist_fesm2015_preventDefault(ev),this.focus.emit(),startPosition=this.currentPosition(),dragStarted=!1}),switchMap(fesm2015_createMoveStream(el,this.dragEnd))).subscribe(({pageX:pageX,pageY:pageY,originalX:originalX,originalY:originalY})=>{dragStarted||(this.ensureWidth(),this.dragStart.emit(),dragStarted=!0),this.handleDrag({originalX:originalX,originalY:originalY,pageX:pageX,pageY:pageY,startPosition:startPosition})})}))}handleDrag({originalX:originalX,originalY:originalY,pageX:pageX,pageY:pageY,startPosition:startPosition}){this.options.left=startPosition.x+pageX-originalX,this.options.top=startPosition.y+pageY-originalY,"minimized"===this.options.state&&kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.restoreOptions)&&(this.restoreOptions.left=this.options.left,this.restoreOptions.top=this.options.top),this.change.emit({left:startPosition.x+pageX-originalX,top:startPosition.y+pageY-originalY})}onResize(handle,direction){this.subscriptions.add(this.ngZone.runOutsideAngular(()=>{let startOffsetAndPosition,resizeStarted=!1;handle.kendoPress.pipe(tap(ev=>{_ivy_ngcc_dist_fesm2015_preventDefault(ev),this.focus.emit(),startOffsetAndPosition=this.currentOffsetAndPosition(),resizeStarted=!1}),switchMap(fesm2015_createMoveStream(handle,this.resizeEnd))).subscribe(({pageX:pageX,pageY:pageY,originalX:originalX,originalY:originalY})=>{resizeStarted||(this.resizeStart.emit(direction),resizeStarted=!0),this.handleResize(startOffsetAndPosition,direction,pageX-originalX,pageY-originalY)})}))}handleResize(initial,dir,deltaX,deltaY){const old=this.options;let ev={};if(dir.indexOf("e")>=0){const newWidth=initial.width+deltaX;newWidth!==old.width&&newWidth>=old.minWidth&&(ev.width=newWidth)}if(dir.indexOf("n")>=0){const newHeight=initial.height-deltaY,newTop=initial.y+deltaY;newHeight!==old.height&&newHeight>=old.minHeight&&newTop!==old.top&&(ev.height=newHeight,ev.top=newTop)}if(dir.indexOf("s")>=0){const newHeight=initial.height+deltaY;newHeight!==old.height&&newHeight>=old.minHeight&&(ev.height=newHeight)}if(dir.indexOf("w")>=0){const newLeft=initial.x+deltaX,newWidth=initial.width-deltaX;newWidth!==old.width&&newWidth>=old.minWidth&&newLeft!==old.left&&(ev.width=newWidth,ev.left=newLeft)}(kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(ev.width)||kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(ev.height))&&(OFFSET_STYLES.forEach(style$$1=>{kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(ev[style$$1])&&(this.options[style$$1]=ev[style$$1])}),this.change.emit(ev))}restoreAction(){this.lastAction="restore",this.defaultState()}defaultState(){kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.restoreOptions)&&(this.options=Object.assign({},this.restoreOptions)),this.options.state="default",this.stateChange.emit("default")}storeOptions(){this.restoreOptions=Object.assign({},this.options)}maximizeAction(){this.lastAction="maximize",this.maximizeState()}maximizeState(){this.storeOptions();const wnd=this.windowViewPort;this.options=Object.assign({},this.options,{height:wnd.height,left:0,position:"fixed",state:"maximized",top:0,width:wnd.width}),this.stateChange.emit("maximized")}minimizeAction(){this.lastAction="minimize",this.minimizeState()}minimizeState(){this.storeOptions(),this.options=Object.assign({},this.options,{height:null,minHeight:0,state:"minimized"}),this.stateChange.emit("minimized")}applyManualState(){switch(this.options.state){case"default":this.clearHeight(),this.defaultState();break;case"maximized":this.clearHeight(),this.maximizeState();break;case"minimized":this.minimizeState()}}closeAction(){this.close.emit()}ensureWidth(){const windowOffset=es2015_offset(this.window.nativeElement);kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.options.width)||(this.options.width=windowOffset.width,this.change.emit({width:windowOffset.width}))}clearHeight(){0===this.options.height&&delete this.options.height,0===this.options.minHeight&&delete this.options.minHeight}center(){if("maximized"===this.options.state)return;let scroll=scrollPosition(this.window.nativeElement),wnd=this.windowViewPort,wrapper=es2015_offset(this.window.nativeElement),ev={};kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.options.left)||(this.options.left=scroll.x+Math.max(0,(wnd.width-wrapper.width)/2),ev.left=this.options.left),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.options.top)||(this.options.top=scroll.y+Math.max(0,(wnd.height-wrapper.height)/2),ev.top=this.options.top),this.change.emit(ev)}currentOffsetAndPosition(){const o=this.options,off=es2015_offset(this.window.nativeElement);return Object.assign({},this.currentPosition(),{height:o.height?o.height:off.height,width:o.width?o.width:off.width})}currentPosition(){const o=this.options;return o.top&&o.left||this.setPosition(),{x:this.options.left,y:this.options.top}}setPosition(){const wrapper=position_with_scroll(this.window.nativeElement,es2015_document(this.window.nativeElement));this.options.left=wrapper.left,this.options.top=wrapper.top}setRestoreOption(style$$1,value){kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.restoreOptions)&&(this.restoreOptions[style$$1]=value)}get nextPossibleZIndex(){return newZIndex}get nextZIndex(){return newZIndex++}get windowViewPort(){return windowViewport(this.window.nativeElement)}}return DragResizeService.fac=function(t){return new(t||DragResizeService)(inject(NgZone))},DragResizeService.prov=defineInjectable({token:DragResizeService,factory:DragResizeService.fac}),DragResizeService})(),fesm2015_ResizeHandleDirective=(()=>{class ResizeHandleDirective{constructor(draggable,el,renderer,service){this.draggable=draggable,this.el=el,this.renderer=renderer,this.service=service,this.subscriptions=new Subscription_Subscription}get hostClass(){return!0}ngOnInit(){this.setDisplay(),this.renderer.addClass(this.el.nativeElement,"k-resize-"+this.direction),this.subscriptions.add(of(this.draggable).subscribe(handle=>{this.service.onResize(handle,this.direction)})),this.subscriptions.add(this.service.resizeStart.subscribe(dir=>{dir!==this.direction&&this.setDisplay("none")})),this.subscriptions.add(this.service.dragStart.subscribe(()=>{this.setDisplay("none")})),this.subscriptions.add(merge(this.service.resizeEnd,this.service.dragEnd).subscribe(()=>{this.setDisplay("block")})),this.subscriptions.add(this.service.stateChange.subscribe(state$$1=>{this.setDisplay("default"===state$$1?"block":"none")}))}ngOnDestroy(){this.subscriptions.unsubscribe()}setDisplay(value="block"){this.renderer.setStyle(this.el.nativeElement,"display","default"===this.service.options.state?value:"none")}}return ResizeHandleDirective.fac=function(t){return new(t||ResizeHandleDirective)(directiveInject(fesm2015_DraggableDirective,1),directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_DragResizeService))},ResizeHandleDirective.dir=defineDirective({type:ResizeHandleDirective,selectors:[["","kendoWindowResizeHandle",""]],hostVars:2,hostBindings:function(rf,ctx){2&rf&&classProp("k-resize-handle",ctx.hostClass)},inputs:{direction:"direction"}}),ResizeHandleDirective})(),fesm2015_WindowTitleBarComponent=(()=>{class WindowTitleBarComponent{constructor(el,service,ngZone){this.el=el,this.ngZone=ngZone,this.service=service}ngOnInit(){this.dragDirective=new fesm2015_DraggableDirective(this.el,this.ngZone),this.dragDirective.ngOnInit(),this.isDraggable&&this.subscribeDrag(),this.subscribeStateChange()}ngOnDestroy(){this.dragDirective.ngOnDestroy(),this.unsubscribeDrag(),this.unsubscribeState()}subscribeDrag(){this.unsubscribeDrag(),this.dragSubscription=of(this.dragDirective).subscribe(titleBar=>{this.service.onDrag(titleBar)})}subscribeStateChange(){this.stateSubscription=this.service.stateChange.subscribe(state$$1=>{this.service.options.draggable&&("maximized"===state$$1?this.unsubscribeDrag():this.subscribeDrag())})}unsubscribeDrag(){this.dragSubscription&&(this.service.dragSubscription.unsubscribe(),this.dragSubscription.unsubscribe(),this.dragSubscription=null)}unsubscribeState(){this.stateSubscription&&(this.stateSubscription.unsubscribe(),this.stateSubscription=null)}get className(){return!0}get touchAction(){if(this.isDraggable)return"none"}handle(ev){const target=ev.target,state$$1=this.service.options.state;fesm2015_hasClasses(target,"k-icon")||_ivy_ngcc_dist_fesm2015_isFocusable(target,!1)||!this.service.options.resizable||("default"===state$$1?this.service.maximizeAction():"maximized"===state$$1&&this.service.restoreAction())}get isDraggable(){const options=this.service.options;return options.draggable&&"maximized"!==options.state}}return WindowTitleBarComponent.fac=function(t){return new(t||WindowTitleBarComponent)(directiveInject(ElementRef),directiveInject(fesm2015_DragResizeService),directiveInject(NgZone))},WindowTitleBarComponent.cmp=defineComponent({type:WindowTitleBarComponent,selectors:[["kendo-window-titlebar"]],hostVars:6,hostBindings:function(rf,ctx){1&rf&&listener("dblclick",(function($event){return ctx.handle($event)})),2&rf&&(styleProp("touch-action",ctx.touchAction),classProp("k-window-titlebar",ctx.className)("k-dialog-titlebar",ctx.className))},inputs:{template:"template"},ngContentSelectors:kendo_angular_dialog_ivy_ngcc_dist_fesm2015_c0,decls:2,vars:2,consts:[[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(rf,ctx){1&rf&&(projectionDef(),template(0,WindowTitleBarComponent_0_Template,1,0,void 0,0),template(1,WindowTitleBarComponent_1_Template,1,4,void 0,0)),2&rf&&(property("ngIf",!ctx.template),advance(1),property("ngIf",ctx.template))},directives:[common_NgIf,common_NgTemplateOutlet],encapsulation:2}),WindowTitleBarComponent})(),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_NavigationService=(()=>{class NavigationService{constructor(window){this.window=window}process(ev){const key=ev.keyCode;switch(key){case dist_fesm2015_Keys.up:case dist_fesm2015_Keys.down:case dist_fesm2015_Keys.left:case dist_fesm2015_Keys.right:ev.preventDefault(),this.handleArrow(key,ev);break;case dist_fesm2015_Keys.esc:this.handleEscape()}}handleArrow(key,ev){const options=this.window.options;ev.altKey?this.handleStateChange(key,options.state):(ev.ctrlKey||ev.metaKey)&&"default"===options.state?this.handleResize(key):this.handleDrag(key)}handleEscape(){this.window.closeAction()}handleDrag(key){let options=this.window.options;if(!options.draggable)return;const offset$$1=this.window.currentOffsetAndPosition();let restoreOptions=this.window.restoreOptions,ev={},delta=10;switch(key!==dist_fesm2015_Keys.left&&key!==dist_fesm2015_Keys.up||(delta*=-1),key){case dist_fesm2015_Keys.left:case dist_fesm2015_Keys.right:ev.left=offset$$1.x+delta,options.left=ev.left;break;case dist_fesm2015_Keys.up:case dist_fesm2015_Keys.down:ev.top=offset$$1.y+delta,options.top=ev.top}"minimized"===options.state&&kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(restoreOptions)&&(restoreOptions.left=options.left,restoreOptions.top=options.top),this.window.change.emit(ev)}handleResize(key){const options=this.window.options;if(!options.resizable)return;const offset$$1=this.window.currentOffsetAndPosition();let newWidth,newHeight,ev={},delta=10;switch(key!==dist_fesm2015_Keys.left&&key!==dist_fesm2015_Keys.up||(delta*=-1),key){case dist_fesm2015_Keys.left:case dist_fesm2015_Keys.right:newWidth=offset$$1.width+delta,newWidth!==options.width&&newWidth>=options.minWidth&&(ev.width=newWidth);break;case dist_fesm2015_Keys.up:case dist_fesm2015_Keys.down:newHeight=offset$$1.height+delta,newHeight!==options.height&&newHeight>=options.minHeight&&(ev.height=newHeight)}(kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(ev.width)||kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(ev.height))&&(OFFSET_STYLES.forEach(style$$1=>{kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(ev[style$$1])&&(this.window.options[style$$1]=ev[style$$1])}),this.window.change.emit(ev))}handleStateChange(key,state$$1){"minimized"===state$$1&&key===dist_fesm2015_Keys.up||"maximized"===state$$1&&key===dist_fesm2015_Keys.down?this.window.restoreAction():"default"===state$$1&&(key===dist_fesm2015_Keys.up?this.window.maximizeAction():key===dist_fesm2015_Keys.down&&this.window.minimizeAction())}}return NavigationService.fac=function(t){return new(t||NavigationService)(inject(fesm2015_DragResizeService))},NavigationService.prov=defineInjectable({token:NavigationService,factory:NavigationService.fac}),NavigationService})(),fesm2015_WindowComponent=(()=>{class WindowComponent{constructor(el,renderer,service,navigation,ngZone,localization){this.el=el,this.renderer=renderer,this.service=service,this.navigation=navigation,this.ngZone=ngZone,this.localization=localization,this.keepContent=!1,this.dragStart=new core_EventEmitter,this.dragEnd=new core_EventEmitter,this.resizeStart=new core_EventEmitter,this.resizeEnd=new core_EventEmitter,this.close=new core_EventEmitter,this.widthChange=new core_EventEmitter,this.heightChange=new core_EventEmitter,this.topChange=new core_EventEmitter,this.leftChange=new core_EventEmitter,this.stateChange=new core_EventEmitter,this.tabIndex=0,this.draged=!1,this.resized=!1,this.windowSubscription=new Subscription_Subscription,this.direction=this.localization.rtl?"rtl":"ltr",this.localizationChangeSubscription=this.localization.changes.subscribe(({rtl:rtl})=>this.direction=rtl?"rtl":"ltr"),this.resizeDirections=RESIZE_DIRECTIONS,this.subscribeEvents()}set draggable(value){this.options.draggable=value}get draggable(){return this.options.draggable}set resizable(value){this.options.resizable=value}get resizable(){return this.options.resizable}set state(value){this.options.state=value}get state(){return this.options.state}set minWidth(value){this.setOption("minWidth",value)}get minWidth(){return this.options.minWidth}set minHeight(value){this.setOption("minHeight",value)}get minHeight(){return this.options.minHeight}set width(value){this.setOption("width",value)}get width(){return this.options.width}set height(value){this.setOption("height",value)}get height(){return this.options.height}set top(value){this.setOption("top",value)}get top(){return this.options.top}set left(value){this.setOption("left",value)}get left(){return this.options.left}get closeButtonTitle(){return this.messages&&this.messages.closeTitle?this.messages.closeTitle:this.localization.get("closeTitle")}get restoreButtonTitle(){return this.messages&&this.messages.restoreTitle?this.messages.restoreTitle:this.localization.get("restoreTitle")}get maximizeButtonTitle(){return this.messages&&this.messages.maximizeTitle?this.messages.maximizeTitle:this.localization.get("maximizeTitle")}get minimizeButtonTitle(){return this.messages&&this.messages.minimizeTitle?this.messages.minimizeTitle:this.localization.get("minimizeTitle")}get hostClasses(){return!0}get dir(){return this.direction}ngAfterViewInit(){this.setNextZIndex(),this.handleInitialFocus(),this.ngZone.runOutsideAngular(()=>Promise.resolve(null).then(()=>this.setInitialOffset()))}ngOnInit(){this.renderer.removeAttribute(this.el.nativeElement,"title"),this.service.init(this.el)}ngOnChanges(changes){if(OFFSET_STYLES.forEach(style$$1=>{isChanged(style$$1,changes)&&this.setStyle(style$$1,this.options[style$$1])}),isChanged("draggable",changes)){const titleBar=kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.titleBarContent)?this.titleBarContent:this.titleBarView;changes.draggable.currentValue?titleBar.subscribeDrag():titleBar.unsubscribeDrag()}isChanged("state",changes)&&(kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.service.lastAction)?this.service.lastAction=null:(this.service.applyManualState(),this.updateAllOffset()))}ngOnDestroy(){this.windowSubscription&&this.windowSubscription.unsubscribe(),this.localizationChangeSubscription.unsubscribe()}focus(){const wrapper=this.el.nativeElement;kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(wrapper)&&wrapper.focus()}bringToFront(){this.setNextZIndex()}setDimension(dimension,value){this.setOption(dimension,value),this.setStyle(dimension,value)}setOffset(offset$$1,value){this.setOption(offset$$1,value),this.setStyle(offset$$1,value)}get showDefaultTitleBar(){return!kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.titleBarContent)}get styleMinWidth(){return this.minWidth+"px"}get styleMinHeight(){return this.minHeight+"px"}get stylePosition(){return this.options.position}get wrapperMaximizedClass(){return"maximized"===this.state}get wrapperMinimizedClass(){return"minimized"===this.state}onComponentKeydown(event){fesm2015_hasClasses(event.target,"k-window")&&this.navigation.process(event)}onComponentFocus(){this.renderer.addClass(this.el.nativeElement,"k-state-focused"),this.setNextZIndex()}onComponentBlur(){this.renderer.removeClass(this.el.nativeElement,"k-state-focused")}subscribeEvents(){isDocumentAvailable()&&(this.windowSubscription.add(this.service.focus.subscribe(()=>{this.el.nativeElement.focus()})),this.windowSubscription.add(this.service.dragStart.subscribe(()=>{this.draged=!0,this.ngZone.run(()=>{this.dragStart.emit()})})),this.windowSubscription.add(this.service.dragEnd.subscribe(()=>{this.draged&&(this.draged=!1,this.ngZone.run(()=>{this.dragEnd.emit()}))})),this.windowSubscription.add(this.service.close.subscribe(()=>{this.close.emit()})),this.windowSubscription.add(this.service.resizeStart.subscribe(()=>{this.resized=!0,this.ngZone.run(()=>{this.resizeStart.emit()})})),this.windowSubscription.add(this.service.resizeEnd.subscribe(()=>{this.resized&&(this.resized=!1,this.ngZone.run(()=>{this.resizeEnd.emit()}))})),this.windowSubscription.add(this.service.change.subscribe(ev=>{OFFSET_STYLES.forEach(style$$1=>{if(kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(ev[style$$1])&&(this.setStyle(style$$1,ev[style$$1]),"maximized"!==this.state)){const emitter=this[style$$1+"Change"];emitter.observers.length&&this.ngZone.run(()=>{emitter.emit(ev[style$$1])})}})})),this.windowSubscription.add(this.service.stateChange.subscribe(state$$1=>{kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.service.lastAction)&&(this.updateAllOffset(),this.stateChange.emit(state$$1))})))}setNextZIndex(){const currentZIndex=this.el.nativeElement.style["z-index"];(!currentZIndex||this.service.nextPossibleZIndex-currentZIndex>1)&&this.renderer.setStyle(this.el.nativeElement,"z-index",this.service.nextZIndex)}setInitialOffset(){if("maximized"!==this.state)this.updateAllOffset(),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.left)&&kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this.top)||this.service.center();else{const viewPort=this.service.windowViewPort;this.setStyle("width",viewPort.width),this.setStyle("height",viewPort.height),this.setStyle("top",0),this.setStyle("left",0)}}updateAllOffset(){OFFSET_STYLES.forEach(style$$1=>{kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(this[style$$1])?this.setStyle(style$$1,this[style$$1]):this.removeStyle(style$$1)})}setStyle(style$$1,value){this.renderer.setStyle(this.el.nativeElement,style$$1,value+"px")}removeStyle(style$$1){this.renderer.removeStyle(this.el.nativeElement,style$$1)}get options(){return this.service.options}setOption(style$$1,value){if("number"!=typeof value&&"string"!=typeof value)return;const parsedValue="number"==typeof value?value:parseInt(value,10);this.options[style$$1]=parsedValue,this.service.setRestoreOption(style$$1,parsedValue)}handleInitialFocus(){if(this.autoFocusedElement){const initiallyFocusedElement=this.el.nativeElement.querySelector(this.autoFocusedElement);initiallyFocusedElement&&initiallyFocusedElement.focus()}else this.focus()}}return WindowComponent.fac=function(t){return new(t||WindowComponent)(directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_DragResizeService),directiveInject(kendo_angular_dialog_ivy_ngcc_dist_fesm2015_NavigationService),directiveInject(NgZone),directiveInject(fesm2015_LocalizationService))},WindowComponent.cmp=defineComponent({type:WindowComponent,selectors:[["kendo-window"]],contentQueries:function(rf,ctx,dirIndex){var _t;1&rf&&contentQuery(dirIndex,fesm2015_WindowTitleBarComponent,!0),2&rf&&queryRefresh(_t=loadQuery())&&(ctx.titleBarContent=_t.first)},viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(fesm2015_WindowTitleBarComponent,!0),viewQuery(fesm2015_ResizeHandleDirective,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.titleBarView=_t.first),queryRefresh(_t=loadQuery())&&(ctx.resizeHandles=_t))},hostVars:16,hostBindings:function(rf,ctx){1&rf&&listener("keydown",(function($event){return ctx.onComponentKeydown($event)}))("focus",(function(){return ctx.onComponentFocus()}))("blur",(function(){return ctx.onComponentBlur()})),2&rf&&(attribute("tabIndex",ctx.tabIndex)("dir",ctx.dir),styleProp("min-width",ctx.styleMinWidth)("min-height",ctx.styleMinHeight)("position",ctx.stylePosition),classProp("k-widget",ctx.hostClasses)("k-window",ctx.hostClasses)("k-window-maximized",ctx.wrapperMaximizedClass)("k-window-minimized",ctx.wrapperMinimizedClass))},inputs:{keepContent:"keepContent",draggable:"draggable",resizable:"resizable",state:"state",minWidth:"minWidth",minHeight:"minHeight",width:"width",height:"height",top:"top",left:"left",autoFocusedElement:"autoFocusedElement",title:"title"},outputs:{dragStart:"dragStart",dragEnd:"dragEnd",resizeStart:"resizeStart",resizeEnd:"resizeEnd",close:"close",widthChange:"widthChange",heightChange:"heightChange",topChange:"topChange",leftChange:"leftChange",stateChange:"stateChange"},exportAs:["kendoWindow"],features:[ProvidersFeature([fesm2015_DragResizeService,kendo_angular_dialog_ivy_ngcc_dist_fesm2015_NavigationService,fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.window"}]),NgOnChangesFeature],ngContentSelectors:_ivy_ngcc_dist_fesm2015_c17,decls:7,vars:4,consts:[["kendoWindowLocalizedMessages","",6,"closeTitle","restoreTitle","maximizeTitle","minimizeTitle"],[3,"template",4,"ngIf"],[4,"ngIf"],["class","k-content k-window-content",3,"hidden",4,"ngIf"],[3,"ngIf"],[3,"template"],[1,"k-window-title"],[1,"k-window-actions"],["kendoWindowMinimizeAction",""],["kendoWindowMaximizeAction",""],["kendoWindowRestoreAction",""],["kendoWindowCloseAction",""],[1,"k-content","k-window-content",3,"hidden"],[3,"ngTemplateOutlet"],["kendoWindowResizeHandle","","kendoDraggable","",3,"direction",4,"ngFor","ngForOf"],["kendoWindowResizeHandle","","kendoDraggable","",3,"direction"]],template:function(rf,ctx){1&rf&&(projectionDef(_ivy_ngcc_dist_fesm2015_c16),elementContainerStart(0,0),i18nAttributes(1,_ivy_ngcc_dist_fesm2015_c15),elementContainerStart(2),template(3,WindowComponent_kendo_window_titlebar_3_Template,8,10,"kendo-window-titlebar",1),template(4,WindowComponent_4_Template,1,0,void 0,2),template(5,WindowComponent_div_5_Template,3,3,"div",3),template(6,WindowComponent_ng_template_6_Template,1,1,"ng-template",4),elementContainerEnd(),elementContainerEnd()),2&rf&&(advance(3),property("ngIf",ctx.showDefaultTitleBar),advance(1),property("ngIf",!ctx.showDefaultTitleBar),advance(1),property("ngIf","minimized"!==ctx.state||ctx.keepContent),advance(1),property("ngIf",ctx.resizable))},directives:function(){return[kendo_angular_dialog_ivy_ngcc_dist_fesm2015_LocalizedMessagesDirective,common_NgIf,fesm2015_WindowTitleBarComponent,fesm2015_WindowMinimizeActionDirective,fesm2015_WindowMaximizeActionDirective,fesm2015_WindowRestoreActionDirective,fesm2015_WindowCloseActionDirective,common_NgTemplateOutlet,common_NgForOf,fesm2015_ResizeHandleDirective,fesm2015_DraggableDirective]},encapsulation:2}),WindowComponent})(),fesm2015_WindowMaximizeActionDirective=(()=>{class WindowMaximizeActionDirective extends fesm2015_ButtonDirective{constructor(el,renderer,_service,localization,ngZone){super(el,renderer,null,localization,ngZone),this.buttonType="button",this.window=_service,this.look="bare",this.icon="window-maximize"}onClick(){this.isDisabled||this.window.maximizeAction()}get visible(){return"default"===this.window.options.state?"inline-flex":"none"}}return WindowMaximizeActionDirective.fac=function(t){return new(t||WindowMaximizeActionDirective)(directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_DragResizeService,8),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone))},WindowMaximizeActionDirective.dir=defineDirective({type:WindowMaximizeActionDirective,selectors:[["button","kendoWindowMaximizeAction",""]],hostVars:3,hostBindings:function(rf,ctx){1&rf&&listener("click",(function(){return ctx.onClick()})),2&rf&&(attribute("type",ctx.buttonType),styleProp("display",ctx.visible))},inputs:{window:"window"},exportAs:["kendoWindowMaximizeAction"],features:[ProvidersFeature([fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.button"}]),InheritDefinitionFeature]}),WindowMaximizeActionDirective})(),fesm2015_WindowMinimizeActionDirective=(()=>{class WindowMinimizeActionDirective extends fesm2015_ButtonDirective{constructor(el,renderer,_service,localization,ngZone){super(el,renderer,null,localization,ngZone),this.buttonType="button",this.window=_service,this.look="bare",this.icon="window-minimize"}onClick(){this.isDisabled||this.window.minimizeAction()}get visible(){return"default"===this.window.options.state?"inline-flex":"none"}}return WindowMinimizeActionDirective.fac=function(t){return new(t||WindowMinimizeActionDirective)(directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_DragResizeService,8),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone))},WindowMinimizeActionDirective.dir=defineDirective({type:WindowMinimizeActionDirective,selectors:[["button","kendoWindowMinimizeAction",""]],hostVars:3,hostBindings:function(rf,ctx){1&rf&&listener("click",(function(){return ctx.onClick()})),2&rf&&(attribute("type",ctx.buttonType),styleProp("display",ctx.visible))},inputs:{window:"window"},exportAs:["kendoWindowMinimizeAction"],features:[ProvidersFeature([fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.button"}]),InheritDefinitionFeature]}),WindowMinimizeActionDirective})(),fesm2015_WindowCloseActionDirective=(()=>{class WindowCloseActionDirective extends fesm2015_ButtonDirective{constructor(el,renderer,_service,localization,ngZone){super(el,renderer,null,localization,ngZone),this.buttonType="button",this.window=_service,this.look="bare",this.icon="close"}onClick(){this.isDisabled||this.window.closeAction()}}return WindowCloseActionDirective.fac=function(t){return new(t||WindowCloseActionDirective)(directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_DragResizeService,8),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone))},WindowCloseActionDirective.dir=defineDirective({type:WindowCloseActionDirective,selectors:[["button","kendoWindowCloseAction",""]],hostVars:1,hostBindings:function(rf,ctx){1&rf&&listener("click",(function(){return ctx.onClick()})),2&rf&&attribute("type",ctx.buttonType)},inputs:{window:"window"},exportAs:["kendoWindowCloseAction"],features:[ProvidersFeature([fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.button"}]),InheritDefinitionFeature]}),WindowCloseActionDirective})(),fesm2015_WindowRestoreActionDirective=(()=>{class WindowRestoreActionDirective extends fesm2015_ButtonDirective{constructor(el,renderer,_service,localization,ngZone){super(el,renderer,null,localization,ngZone),this.buttonType="button",this.window=_service,this.look="bare",this.icon="window-restore"}onClick(){this.isDisabled||this.window.restoreAction()}get visible(){return"default"===this.window.options.state?"none":"inline-flex"}}return WindowRestoreActionDirective.fac=function(t){return new(t||WindowRestoreActionDirective)(directiveInject(ElementRef),directiveInject(Renderer2),directiveInject(fesm2015_DragResizeService,8),directiveInject(fesm2015_LocalizationService),directiveInject(NgZone))},WindowRestoreActionDirective.dir=defineDirective({type:WindowRestoreActionDirective,selectors:[["button","kendoWindowRestoreAction",""]],hostVars:3,hostBindings:function(rf,ctx){1&rf&&listener("click",(function(){return ctx.onClick()})),2&rf&&(attribute("type",ctx.buttonType),styleProp("display",ctx.visible))},inputs:{window:"window"},exportAs:["kendoWindowRestoreAction"],features:[ProvidersFeature([fesm2015_LocalizationService,{provide:L10N_PREFIX,useValue:"kendo.button"}]),InheritDefinitionFeature]}),WindowRestoreActionDirective})();class WindowCloseResult{}let fesm2015_WindowContainerService=(()=>{class WindowContainerService{set container(container){WindowContainerService.container=container}get container(){return WindowContainerService.container}}return WindowContainerService.fac=function(t){return new(t||WindowContainerService)},WindowContainerService.prov=defineInjectable({token:WindowContainerService,factory:WindowContainerService.fac}),WindowContainerService.container=null,WindowContainerService})();class WindowInjector{constructor(getWindowRef,parentInjector){this.getWindowRef=getWindowRef,this.parentInjector=parentInjector}get(token,notFoundValue){return token===class{}?this.getWindowRef():this.parentInjector.get(token,notFoundValue)}}let fesm2015_WindowService=(()=>{class WindowService{constructor(resolver,containerService){this.resolver=resolver,this.containerService=containerService}open(settings){const factory=this.resolver.resolveComponentFactory(fesm2015_WindowComponent),container=settings.appendTo||this.containerService.container;if(!container)throw new Error("Cannot attach window to the page.\n                Add an element that uses the kendoWindowContainer directive, or set the 'appendTo' property.\n                See https://www.telerik.com/kendo-angular-ui/components/dialogs/window/service/\n            ");const windowRef={close:()=>{},content:null,result:null,window:null},content=this.contentFrom(settings.content,container,windowRef),window=container.createComponent(factory,void 0,void 0,content.nodes);windowRef.window=window,this.applyOptions(window.instance,settings);const apiClose=new Subject_Subject,close=e=>{apiClose.next(e||new WindowCloseResult),content.componentRef&&content.componentRef.destroy(),window.destroy()},result=merge(apiClose,window.instance.close).pipe(take_take(1));return result.subscribe(close),windowRef.close=close,windowRef.result=result,window.changeDetectorRef.markForCheck(),windowRef}applyOptions(instance,options){kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.title)&&(instance.title=options.title),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.keepContent)&&(instance.keepContent=options.keepContent),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.width)&&(instance.width=options.width),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.minWidth)&&(instance.minWidth=options.minWidth),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.height)&&(instance.height=options.height),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.minHeight)&&(instance.minHeight=options.minHeight),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.left)&&(instance.left=options.left),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.top)&&(instance.top=options.top),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.draggable)&&(instance.draggable=options.draggable),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.resizable)&&(instance.resizable=options.resizable),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.messages&&options.messages.closeTitle)&&(instance.messages.closeTitle=options.messages.closeTitle),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.messages&&options.messages.restoreTitle)&&(instance.messages.restoreTitle=options.messages.restoreTitle),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.messages&&options.messages.maximizeTitle)&&(instance.messages.maximizeTitle=options.messages.maximizeTitle),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.messages&&options.messages.minimizeTitle)&&(instance.messages.minimizeTitle=options.messages.minimizeTitle),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.autoFocusedElement)&&(instance.autoFocusedElement=options.autoFocusedElement),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_isPresent(options.state)&&(instance.state=options.state,"minimized"===options.state&&(instance.keepContent=!0)),options.content instanceof TemplateRef&&(instance.contentTemplate=options.content),options.titleBarContent instanceof TemplateRef&&(instance.titleBarTemplate=options.titleBarContent)}contentFrom(content,container,windowRef){const renderer=container.injector.get(Renderer2);let nodes=[],componentRef=null;if("string"==typeof content)nodes=[renderer.createText(content)];else if(content&&!(content instanceof TemplateRef)){const injector=new WindowInjector(()=>windowRef,container.injector),factory=this.resolver.resolveComponentFactory(content);componentRef=container.createComponent(factory,void 0,injector),nodes=[componentRef.location.nativeElement],windowRef.content=componentRef}return{componentRef:componentRef,nodes:[[],nodes]}}}return WindowService.fac=function(t){return new(t||WindowService)(inject(ComponentFactoryResolver),inject(fesm2015_WindowContainerService))},WindowService.prov=defineInjectable({token:WindowService,factory:WindowService.fac}),WindowService})(),kendo_angular_dialog_ivy_ngcc_dist_fesm2015_Messages=(()=>{class Messages extends fesm2015_ComponentMessages{}return Messages.fac=function(t){return kendo_angular_dialog_ivy_ngcc_dist_fesm2015_Messages_BaseFactory(t||Messages)},Messages.dir=defineDirective({type:Messages,inputs:{closeTitle:"closeTitle",restoreTitle:"restoreTitle",maximizeTitle:"maximizeTitle",minimizeTitle:"minimizeTitle"},features:[InheritDefinitionFeature]}),Messages})();const kendo_angular_dialog_ivy_ngcc_dist_fesm2015_Messages_BaseFactory=getInheritedFactory(kendo_angular_dialog_ivy_ngcc_dist_fesm2015_Messages);let kendo_angular_dialog_ivy_ngcc_dist_fesm2015_LocalizedMessagesDirective=(()=>{class LocalizedMessagesDirective extends kendo_angular_dialog_ivy_ngcc_dist_fesm2015_Messages{constructor(service){super(),this.service=service}}return LocalizedMessagesDirective.fac=function(t){return new(t||LocalizedMessagesDirective)(directiveInject(fesm2015_LocalizationService))},LocalizedMessagesDirective.dir=defineDirective({type:LocalizedMessagesDirective,selectors:[["","kendoDialogTitleBarLocalizedMessages",""],["","kendoWindowLocalizedMessages",""]],features:[ProvidersFeature([{provide:kendo_angular_dialog_ivy_ngcc_dist_fesm2015_Messages,useExisting:forwardRef(()=>LocalizedMessagesDirective)}]),InheritDefinitionFeature]}),LocalizedMessagesDirective})(),_ivy_ngcc_dist_fesm2015_SharedModule=(()=>{class SharedModule{}return SharedModule.mod=defineNgModule({type:SharedModule}),SharedModule.inj=defineInjector({factory:function(t){return new(t||SharedModule)},imports:[[common_CommonModule],common_CommonModule]}),SharedModule})(),fesm2015_DialogModule=(()=>{class DialogModule{}return DialogModule.mod=defineNgModule({type:DialogModule}),DialogModule.inj=defineInjector({factory:function(t){return new(t||DialogModule)},providers:[fesm2015_DialogContainerService,fesm2015_DialogService],imports:[[_ivy_ngcc_dist_fesm2015_SharedModule]]}),DialogModule})(),fesm2015_WindowModule=(()=>{class WindowModule{}return WindowModule.mod=defineNgModule({type:WindowModule}),WindowModule.inj=defineInjector({factory:function(t){return new(t||WindowModule)},providers:[fesm2015_WindowContainerService,fesm2015_WindowService],imports:[[_ivy_ngcc_dist_fesm2015_SharedModule,fesm2015_DraggableModule]]}),WindowModule})(),fesm2015_DialogsModule=(()=>{class DialogsModule{}return DialogsModule.mod=defineNgModule({type:DialogsModule}),DialogsModule.inj=defineInjector({factory:function(t){return new(t||DialogsModule)},imports:[fesm2015_DialogModule,fesm2015_WindowModule]}),DialogsModule})(),redaction_mulitple_selection_dialog_component_service_RedactionMulitpleSelectionDialogComponentService=(()=>{class RedactionMulitpleSelectionDialogComponentService{constructor(markupCommonService){this.markupCommonService=markupCommonService}getMatchedTexts(redactionHtml,selectedText){const highlightedTextObjects=[],structuredTextHtml=redactionHtml;let pos=structuredTextHtml.indexOf(selectedText);for(;pos>-1;)this.markupCommonService.isFoundTextInSpan(structuredTextHtml,pos,selectedText)||highlightedTextObjects.push({pos:pos,sentence:this.findSentence(redactionHtml,pos,selectedText),redact:!0,selectedText:selectedText}),pos=structuredTextHtml.indexOf(selectedText,pos+1);return highlightedTextObjects}findSentence(redactionHtml,pos,selectedText){let startSentencePos=pos,endSentencePos=pos,count=0,startInSpan=!1,endInSpan=!1;for(;this.detectSentenceBoundary(redactionHtml,startSentencePos,startInSpan)&&count<redactionHtml.length&&startSentencePos>0;)redactionHtml.charAt(startSentencePos).match(/>/)&&(startInSpan=!0),redactionHtml.charAt(startSentencePos).match(/</)&&(startInSpan=!1),count+=1,startSentencePos-=1;for(count=0;this.detectSentenceBoundary(redactionHtml,endSentencePos,endInSpan)&&count<redactionHtml.length;)redactionHtml.charAt(endSentencePos).match(/>/)&&(endInSpan=!0),redactionHtml.charAt(endSentencePos).match(/</)&&(endInSpan=!1),count+=1,endSentencePos+=1;let sentence=redactionHtml.substring(startSentencePos,endSentencePos+1);return this.getInSentenceSelectedTermOffSets(sentence,selectedText).forEach(offset=>{offset+startSentencePos===pos&&(sentence=sentence.substring(0,offset)+'<span class="sim-multiple-instance-highlight">'+selectedText+"</span>"+sentence.substring(offset+selectedText.length))}),this.trimSentence(sentence)}getInSentenceSelectedTermOffSets(sentence,selectedText){const offsets=[];let pos=sentence.indexOf(selectedText);for(;pos>-1;)offsets.push(pos),pos=sentence.indexOf(selectedText,pos+1);return offsets}trimSentence(sentence){return sentence.replace(/^([\s|.|!|?]|<div><br><\/div>)+|\s+$/g,"")}detectSentenceBoundary(redactionHtml,pos,inSpan){return!(redactionHtml.charAt(pos).match(/[.!?]/)&&inSpan||redactionHtml.charAt(pos).match(/[.!?]/))}}return RedactionMulitpleSelectionDialogComponentService.fac=function(t){return new(t||RedactionMulitpleSelectionDialogComponentService)(inject(markupCommon_service_MarkupCommonService))},RedactionMulitpleSelectionDialogComponentService.prov=defineInjectable({token:RedactionMulitpleSelectionDialogComponentService,factory:RedactionMulitpleSelectionDialogComponentService.fac,providedIn:"root"}),RedactionMulitpleSelectionDialogComponentService})();function RedactionMulitpleSelectionDialogComponent_kendo_dialog_0_tr_8_Template(rf,ctx){if(1&rf){const _r4=getCurrentView();elementStart(0,"tr",11),listener("click",(function(){restoreView(_r4);const text_r2=ctx.$implicit;return nextContext(2).markRow(text_r2)})),elementStart(1,"td",12),elementStart(2,"input",13),listener("ngModelChange",(function($event){return restoreView(_r4),ctx.$implicit.redact=$event})),elementEnd(),elementEnd(),elementStart(3,"td",12),element(4,"div",14),elementEnd(),elementEnd()}if(2&rf){const text_r2=ctx.$implicit;advance(2),property("ngModel",text_r2.redact),advance(2),property("innerHTML",text_r2.sentence,sanitizeHtml)}}function RedactionMulitpleSelectionDialogComponent_kendo_dialog_0_Template(rf,ctx){if(1&rf){const _r7=getCurrentView();elementStart(0,"kendo-dialog",1),listener("close",(function(){return restoreView(_r7),nextContext().cancel()})),elementStart(1,"span",2),text(2),elementEnd(),elementStart(3,"div",3),elementStart(4,"span",2),text(5,"Select the instances to mark for redaction:"),elementEnd(),elementStart(6,"div",4),elementStart(7,"table",5),template(8,RedactionMulitpleSelectionDialogComponent_kendo_dialog_0_tr_8_Template,5,2,"tr",6),elementEnd(),elementEnd(),elementStart(9,"div",7),elementStart(10,"a",8),listener("click",(function(){return restoreView(_r7),nextContext().checkAll()})),text(11,"Check all"),elementEnd(),element(12,"kendo-toolbar-separator"),elementStart(13,"a",8),listener("click",(function(){return restoreView(_r7),nextContext().uncheckAll()})),text(14,"Uncheck all"),elementEnd(),elementEnd(),elementEnd(),elementStart(15,"kendo-dialog-actions"),elementStart(16,"button",9),listener("click",(function(){return restoreView(_r7),nextContext().cancel()})),text(17,"Cancel"),elementEnd(),elementStart(18,"button",10),listener("click",(function(){return restoreView(_r7),nextContext().commit()})),text(19,"Update"),elementEnd(),elementEnd(),elementEnd()}if(2&rf){const ctx_r0=nextContext();advance(2),textInterpolate(ctx_r0.numberOfInstancesFoundString),advance(6),property("ngForOf",ctx_r0.highlightedTextObjects)}}let redaction_mulitple_selection_dialog_component_RedactionMulitpleSelectionDialogComponent=(()=>{class RedactionMulitpleSelectionDialogComponent{constructor(redactionMulitpleSelectionDialogComponentService){this.redactionMulitpleSelectionDialogComponentService=redactionMulitpleSelectionDialogComponentService,this.closeDialog=new core_EventEmitter,this.isDialogOpen=!0,this.highlightedTextObjects=[]}ngOnInit(){this.numberOfInstancesFoundString=this.matches+" instances of the selected text were identified.",this.highlightedTextObjects=this.redactionMulitpleSelectionDialogComponentService.getMatchedTexts(this.redactionText,this.selectedText)}cancel(){this.isDialogOpen=!1,this.closeDialog.emit(void 0)}commit(){this.isDialogOpen=!1,this.closeDialog.emit(this.highlightedTextObjects)}checkAll(){this.setHighlightedTextObjectsRedact(!0)}uncheckAll(){this.setHighlightedTextObjectsRedact(!1)}markRow(text){text.redact=!text.redact}setHighlightedTextObjectsRedact(redact){this.highlightedTextObjects.forEach(highlightedText=>{highlightedText.redact=redact})}}return RedactionMulitpleSelectionDialogComponent.fac=function(t){return new(t||RedactionMulitpleSelectionDialogComponent)(directiveInject(redaction_mulitple_selection_dialog_component_service_RedactionMulitpleSelectionDialogComponentService))},RedactionMulitpleSelectionDialogComponent.cmp=defineComponent({type:RedactionMulitpleSelectionDialogComponent,selectors:[["app-redaction-mulitple-selection-dialog"]],inputs:{redactionText:"redactionText",matches:"matches",selectedText:"selectedText"},outputs:{closeDialog:"closeDialog"},decls:1,vars:1,consts:[["title","Multiple Instances","class","sim-multiple-selection-dialog",3,"close",4,"ngIf"],["title","Multiple Instances",1,"sim-multiple-selection-dialog",3,"close"],[1,"sng-field-label"],[1,"sng-form","sim-layout-padding-top"],["tabindex","0",1,"sim-table-container"],[1,"sim-text-selection-table"],[3,"click",4,"ngFor","ngForOf"],[1,"sim-layout-padding-top"],["tabindex","0",3,"click"],["kendoButton","",3,"click"],["kendoButton","","primary","true",3,"click"],[3,"click"],[1,"sim-text-selection-cell"],["type","checkbox",3,"ngModel","ngModelChange"],["tabindex","0",3,"innerHTML"]],template:function(rf,ctx){1&rf&&template(0,RedactionMulitpleSelectionDialogComponent_kendo_dialog_0_Template,20,2,"kendo-dialog",0),2&rf&&property("ngIf",ctx.isDialogOpen)},directives:[common_NgIf,fesm2015_DialogComponent,common_NgForOf,fesm2015_ToolBarSeparatorComponent,fesm2015_DialogActionsComponent,fesm2015_ButtonDirective,forms_CheckboxControlValueAccessor,forms_NgControlStatus,forms_NgModel],styles:[".sim-multiple-selection-dialog[_ngcontent-%COMP%]   .sim-table-container[_ngcontent-%COMP%]{overflow:auto;height:30rem;width:100%;border:1px solid}.sim-multiple-selection-dialog[_ngcontent-%COMP%]   .sim-text-selection-table[_ngcontent-%COMP%]{width:100%}.sim-multiple-selection-dialog[_ngcontent-%COMP%]   .sim-text-selection-table[_ngcontent-%COMP%]   .sim-multiple-instance-highlight[_ngcontent-%COMP%]{background-color:#ffcc32;color:#fff}.sim-multiple-selection-dialog[_ngcontent-%COMP%]   .sim-text-selection-cell[_ngcontent-%COMP%]{border-bottom:1px solid;padding:.5rem}"]}),RedactionMulitpleSelectionDialogComponent})();const redaction_component_c0=["gridmenu"],redaction_component_c1=["editableContent"];function RedactionComponent_kendo_toolbar_buttongroup_7_kendo_toolbar_button_1_Template(rf,ctx){if(1&rf){const _r11=getCurrentView();elementStart(0,"kendo-toolbar-button",22),listener("selectedChange",(function($event){restoreView(_r11);const button_r9=ctx.$implicit;return nextContext(2).textModeButtonChange($event,button_r9)})),elementEnd()}if(2&rf){const button_r9=ctx.$implicit,ctx_r8=nextContext(2);property("togglable",!0)("selected",button_r9.id===ctx_r8.selectedTextModeButton.id)("text",button_r9.name)}}function RedactionComponent_kendo_toolbar_buttongroup_7_Template(rf,ctx){if(1&rf&&(elementStart(0,"kendo-toolbar-buttongroup",20),template(1,RedactionComponent_kendo_toolbar_buttongroup_7_kendo_toolbar_button_1_Template,1,3,"kendo-toolbar-button",21),elementEnd()),2&rf){const ctx_r0=nextContext();property("selection","single"),advance(1),property("ngForOf",ctx_r0.textModeButtons)}}function RedactionComponent_kendo_toolbar_8_kendo_toolbar_separator_4_Template(rf,ctx){1&rf&&element(0,"kendo-toolbar-separator")}function RedactionComponent_kendo_toolbar_8_kendo_toolbar_button_5_Template(rf,ctx){if(1&rf){const _r15=getCurrentView();elementStart(0,"kendo-toolbar-button",27),listener("click",(function(){return restoreView(_r15),nextContext(2).automaticRedaction()})),elementEnd()}2&rf&&property("text","Automatic redaction")}function RedactionComponent_kendo_toolbar_8_Template(rf,ctx){if(1&rf){const _r17=getCurrentView();elementStart(0,"kendo-toolbar",23),elementStart(1,"kendo-toolbar-buttongroup",20),elementStart(2,"kendo-toolbar-button",24),listener("click",(function(){return restoreView(_r17),nextContext().manualRedactTextSelected()})),elementEnd(),elementStart(3,"kendo-toolbar-button",24),listener("click",(function(){return restoreView(_r17),nextContext().removeRedactionGroupsSelected()})),elementEnd(),elementEnd(),template(4,RedactionComponent_kendo_toolbar_8_kendo_toolbar_separator_4_Template,1,0,"kendo-toolbar-separator",25),template(5,RedactionComponent_kendo_toolbar_8_kendo_toolbar_button_5_Template,1,1,"kendo-toolbar-button",26),elementEnd()}if(2&rf){const ctx_r1=nextContext();advance(1),property("selection","single"),advance(1),property("text","Manual redaction")("selected",ctx_r1.isManualRedactSelected)("togglable",!0),advance(1),property("text","Remove redaction")("selected",ctx_r1.isRemoveRedactionGroupsSelected)("togglable",!0),advance(1),property("ngIf",ctx_r1.config.automaticRedaction),advance(1),property("ngIf",ctx_r1.config.automaticRedaction)}}function RedactionComponent_kendo_toolbar_button_14_Template(rf,ctx){if(1&rf){const _r20=getCurrentView();elementStart(0,"kendo-toolbar-button",28),listener("click",(function(){return restoreView(_r20),nextContext().performRedactions()})),elementEnd()}if(2&rf){const ctx_r3=nextContext();property("text","Redact")("disabled",ctx_r3.completeRedactionDisabled())}}function RedactionComponent_kendo_grid_column_17_Template(rf,ctx){if(1&rf&&element(0,"kendo-grid-column",29),2&rf){const col_r21=ctx.$implicit;property("field",col_r21.field)("title",col_r21.title)("editable",!1)}}function RedactionComponent_kendo_dialog_20_Template(rf,ctx){if(1&rf){const _r23=getCurrentView();elementStart(0,"kendo-dialog",30),listener("close",(function(){return restoreView(_r23),nextContext().closeLabelDialog("cancel")})),elementStart(1,"input",31),listener("ngModelChange",(function($event){return restoreView(_r23),nextContext().groupLabel=$event})),elementEnd(),elementStart(2,"kendo-dialog-actions"),elementStart(3,"button",32),listener("click",(function(){return restoreView(_r23),nextContext().closeLabelDialog("cancel")})),text(4,"Cancel"),elementEnd(),elementStart(5,"button",33),listener("click",(function(){return restoreView(_r23),nextContext().closeLabelDialog("update")})),text(6,"Update"),elementEnd(),elementEnd(),elementEnd()}if(2&rf){const ctx_r6=nextContext();advance(1),property("ngModel",ctx_r6.groupLabel)}}function RedactionComponent_app_redaction_mulitple_selection_dialog_21_Template(rf,ctx){if(1&rf){const _r28=getCurrentView();elementStart(0,"app-redaction-mulitple-selection-dialog",34),listener("closeDialog",(function($event){return restoreView(_r28),nextContext().multiSelectClose($event)})),elementEnd()}if(2&rf){const ctx_r7=nextContext();property("redactionText",ctx_r7.redactionText)("matches",ctx_r7.multiSelectMatches)("selectedText",ctx_r7.multiSelectTextSelection.selectedString)}}const redaction_component_c2=function(){return{debounce:250}},redaction_component_c3=function(a0){return{height:a0}};var textMode=function(textMode){return textMode.edit="edit",textMode.redact="redact",textMode}({});let redaction_component_RedactionComponent=(()=>{class RedactionComponent{constructor(redactionComponentService){this.redactionComponentService=redactionComponentService,this.updateText=new core_EventEmitter,this.redactionGroups=[],this.isRemoveRedactionGroupsSelected=!1,this.isManualRedactSelected=!1,this.isLabelDialogOpen=!1,this.groupLabel="",this.isMultiSelectionDialogOpen=!1,this.gridSelection=event=>{var _a;this.selectedRedactionGroup=null===(_a=event.selectedRows[0])||void 0===_a?void 0:_a.dataItem,this.redactionComponentService.highlightSelectedGroup(this.editableContentEl,this.selectedRedactionGroup)},this.openMultiSelectDialog=(matches,textSelection)=>{this.multiSelectMatches=matches,this.multiSelectTextSelection=textSelection,this.isMultiSelectionDialogOpen=!0}}ngOnInit(){this.setupTextMode(),this.setupGroupGrid(),this.setupContextMenu()}get redactionTextHTML(){return this.redactionText}set redactionTextHTML(v){this.redactionText=v,this.updateText.emit(this.redactionText)}isDesignMode(){return"design"===this.mode}completeRedactionDisabled(){var _a;return Boolean(0===(null===(_a=this.redactionGroups)||void 0===_a?void 0:_a.length))}isRedactMode(){return this.selectedTextModeButton.id===textMode.redact&&!this.isDesignMode()}isEditMode(){return this.selectedTextModeButton.id===textMode.edit&&!this.isDesignMode()}textModeButtonChange(_event,button){this.selectedTextModeButton=button}manualRedactTextSelected(){if(this.isRemoveRedactionGroupsSelected=!1,this.isManualRedactSelected=!this.isManualRedactSelected,this.isManualRedactSelected){const returnArray=this.redactionComponentService.manualRedactText(this.redactionText,this.editableContentEl,this.openMultiSelectDialog);lodash_es_isUndefined(returnArray)||(this.redactionGroups.push(returnArray[0]),this.redactionTextHTML=returnArray[1])}}removeRedactionGroupsSelected(){this.isManualRedactSelected=!1,this.isRemoveRedactionGroupsSelected=!this.isRemoveRedactionGroupsSelected}automaticRedaction(){const[redactionGroups,htmlText]=this.redactionComponentService.automaticRedactText(this.redactionText,this.config.showLabel?this.config.textGroupings:[]);this.redactionGroups.push(...redactionGroups),this.redactionTextHTML=htmlText}performRedactions(){confirm("Completing the redaction will permanently redact marked text. Are you sure you want to continue?")&&(this.redactionTextHTML=this.redactionComponentService.redactSpans(this.editableContentEl,this.config.standardRedactionLength,this.config.showLabel),this.redactionGroups=[],this.selectedRedactionGroup=void 0)}onGridCellClick(event){if("contextmenu"===event.type){const originalEvent=event.originalEvent;originalEvent.preventDefault(),this.contextRedactionGroup=event.dataItem,this.gridContextMenu.show({left:originalEvent.pageX,top:originalEvent.pageY})}}onContextItemSelect({item:item}){item.onClick()}setupTextMode(){this.textModeButtons=[{id:textMode.edit,name:"Edit"},{id:textMode.redact,name:"Redact"}],this.selectedTextModeButton=this.textModeButtons[0]}mouseUpOrKeyUp(event){var _a;if(this.isRedactMode()){const target=event.target;if(!this.isDesignMode())if(this.isRemoveRedactionGroupsSelected){const{redactionGroups:redactionGroups,clearSelectedGroup:clearSelectedGroup}=this.redactionComponentService.removeRedactGroup(target,this.editableContentEl,this.redactionGroups,null===(_a=this.selectedRedactionGroup)||void 0===_a?void 0:_a.groupUuid);if(this.redactionGroups=redactionGroups,clearSelectedGroup){this.selectedRedactionGroup=void 0;const unSelectedSpans=this.editableContentEl.nativeElement.querySelectorAll("span.selected-span");$(unSelectedSpans).removeClass("selected-span")}}else{const returnArray=this.redactionComponentService.highlightText(this.isManualRedactSelected,target,this.redactionGroups,this.gridSelection,this.redactionText,this.editableContentEl,this.openMultiSelectDialog);lodash_es_isUndefined(returnArray)||(this.redactionGroups.push(returnArray[0]),this.redactionTextHTML=returnArray[1])}}}keyDown(event){this.isRedactMode()&&(null==event||event.preventDefault())}handlePaste(event){if(event.preventDefault(),event.clipboardData){const content=event.clipboardData.getData("text/plain");document.execCommand("insertText",!1,content)}}closeLabelDialog(action){"update"===action&&this.contextRedactionGroup&&this.redactionComponentService.updateSelectedGroupComment(this.contextRedactionGroup,this.groupLabel,this.editableContentEl),this.isLabelDialogOpen=!1}multiSelectClose(output){if(this.isMultiSelectionDialogOpen=!1,output){const returnArray=this.redactionComponentService.markUpText(this.redactionText,this.multiSelectTextSelection,this.editableContentEl,this.multiSelectTextSelection.selectedString,!0,output);lodash_es_isUndefined(returnArray)||(this.redactionGroups.push(returnArray[0]),this.redactionTextHTML=returnArray[1])}this.multiSelectMatches=void 0,this.multiSelectTextSelection=void 0}setupGroupGrid(){this.gridData={columns:[{field:"groupLabel",title:"Marked text"}],selectableSettings:{mode:"single"},sortableSettings:{mode:"single",allowUnsort:!0}},this.config.showLabel&&this.gridData.columns.push({field:"groupComment",title:"Label"})}setupContextMenu(){this.gridContextMenuItems=[{text:"Remove",onClick:()=>this.removeRedaction(this.contextRedactionGroup)}],this.config.showLabel&&this.gridContextMenuItems.push({text:"Update label",onClick:()=>this.updateSelectedGroupLabel(this.contextRedactionGroup)})}removeRedaction(redactionGroup){var _a;this.redactionGroups=this.redactionComponentService.removeRedactionGroup(redactionGroup,this.editableContentEl,this.redactionGroups),redactionGroup.groupUuid===(null===(_a=this.selectedRedactionGroup)||void 0===_a?void 0:_a.groupUuid)&&(this.selectedRedactionGroup=void 0)}updateSelectedGroupLabel(redactionGroup){var _a;this.groupLabel=null!==(_a=redactionGroup.groupComment)&&void 0!==_a?_a:"",this.isLabelDialogOpen=!0}}return RedactionComponent.fac=function(t){return new(t||RedactionComponent)(directiveInject(redaction_component_service_RedactionComponentService))},RedactionComponent.cmp=defineComponent({type:RedactionComponent,selectors:[["app-redaction"]],viewQuery:function(rf,ctx){var _t;1&rf&&(viewQuery(redaction_component_c0,!0),viewQuery(redaction_component_c1,!0)),2&rf&&(queryRefresh(_t=loadQuery())&&(ctx.gridContextMenu=_t.first),queryRefresh(_t=loadQuery())&&(ctx.editableContentEl=_t.first))},inputs:{mode:"mode",redactionText:"redactionText",config:"config"},outputs:{updateText:"updateText"},decls:22,vars:22,consts:[[1,"page-control","redaction-control"],[1,"title"],[1,"redaction-container"],[1,"left-container"],[1,"toolbar"],[1,"left-toolbar"],[3,"selection",4,"ngIf"],["class","right-toolbar",4,"ngIf"],["propValueAccessor","innerHTML",1,"redaction-text",3,"contenteditable","ngModel","ngModelOptions","ngStyle","ngModelChange","mouseup","keyup","keydown","paste"],["editableContent",""],[1,"right-container"],[1,"toolbar-no-background","grid-toolbar"],[3,"text","disabled","click",4,"ngIf"],[1,"grid",3,"ngStyle"],[2,"height","100%",3,"data","pageable","selectable","sortable","selectionChange","cellClick"],[3,"field","title","editable",4,"ngFor","ngForOf"],[3,"items","select"],["gridmenu",""],["title","Label",3,"close",4,"ngIf"],[3,"redactionText","matches","selectedText","closeDialog",4,"ngIf"],[3,"selection"],[3,"togglable","selected","text","selectedChange",4,"ngFor","ngForOf"],[3,"togglable","selected","text","selectedChange"],[1,"right-toolbar"],[3,"text","selected","togglable","click"],[4,"ngIf"],["class","button",3,"text","click",4,"ngIf"],[1,"button",3,"text","click"],[3,"text","disabled","click"],[3,"field","title","editable"],["title","Label",3,"close"],["type","text",3,"ngModel","ngModelChange"],["kendoButton","",3,"click"],["kendoButton","","primary","true",3,"click"],[3,"redactionText","matches","selectedText","closeDialog"]],template:function(rf,ctx){1&rf&&(elementStart(0,"div",0),elementStart(1,"h4",1),text(2),elementEnd(),elementStart(3,"div",2),elementStart(4,"div",3),elementStart(5,"div",4),elementStart(6,"kendo-toolbar",5),template(7,RedactionComponent_kendo_toolbar_buttongroup_7_Template,2,2,"kendo-toolbar-buttongroup",6),elementEnd(),template(8,RedactionComponent_kendo_toolbar_8_Template,6,9,"kendo-toolbar",7),elementEnd(),elementStart(9,"div",8,9),listener("ngModelChange",(function($event){return ctx.redactionTextHTML=$event}))("mouseup",(function($event){return ctx.mouseUpOrKeyUp($event)}))("keyup",(function($event){return ctx.mouseUpOrKeyUp($event)}))("keydown",(function($event){return ctx.keyDown($event)}))("paste",(function($event){return ctx.handlePaste($event)})),elementEnd(),elementEnd(),elementStart(11,"div",10),elementStart(12,"div",4),elementStart(13,"kendo-toolbar",11),template(14,RedactionComponent_kendo_toolbar_button_14_Template,1,2,"kendo-toolbar-button",12),elementEnd(),elementEnd(),elementStart(15,"div",13),elementStart(16,"kendo-grid",14),listener("selectionChange",(function($event){return ctx.gridSelection($event)}))("cellClick",(function($event){return ctx.onGridCellClick($event)})),template(17,RedactionComponent_kendo_grid_column_17_Template,1,3,"kendo-grid-column",15),elementEnd(),elementStart(18,"kendo-contextmenu",16,17),listener("select",(function($event){return ctx.onContextItemSelect($event)})),elementEnd(),elementEnd(),elementEnd(),elementEnd(),elementEnd(),template(20,RedactionComponent_kendo_dialog_20_Template,7,1,"kendo-dialog",18),template(21,RedactionComponent_app_redaction_mulitple_selection_dialog_21_Template,1,3,"app-redaction-mulitple-selection-dialog",19)),2&rf&&(advance(2),textInterpolate(ctx.config.title),advance(5),property("ngIf",!ctx.isDesignMode()),advance(1),property("ngIf",ctx.isRedactMode()),advance(1),property("contenteditable",ctx.isEditMode())("ngModel",ctx.redactionTextHTML)("ngModelOptions",pureFunction0(17,redaction_component_c2))("ngStyle",pureFunction1(18,redaction_component_c3,ctx.config.height)),advance(5),property("ngIf",!ctx.isDesignMode()&&ctx.isRedactMode()),advance(1),property("ngStyle",pureFunction1(20,redaction_component_c3,ctx.config.height)),advance(1),property("data",ctx.redactionGroups)("pageable",!1)("selectable",ctx.gridData.selectableSettings)("sortable",ctx.gridData.sortableSettings),advance(1),property("ngForOf",ctx.gridData.columns),advance(1),property("items",ctx.gridContextMenuItems),advance(2),property("ngIf",ctx.isLabelDialogOpen),advance(1),property("ngIf",ctx.isMultiSelectionDialogOpen))},directives:[fesm2015_ToolBarComponent,common_NgIf,ng_stack_contenteditable_ContenteditableDirective,forms_NgControlStatus,forms_NgModel,common_NgStyle,fesm2015_GridComponent,common_NgForOf,fesm2015_ContextMenuComponent,fesm2015_ToolBarButtonGroupComponent,fesm2015_ToolBarButtonComponent,fesm2015_ToolBarSeparatorComponent,dist_fesm2015_ColumnComponent,fesm2015_DialogComponent,forms_DefaultValueAccessor,fesm2015_DialogActionsComponent,fesm2015_ButtonDirective,redaction_mulitple_selection_dialog_component_RedactionMulitpleSelectionDialogComponent],styles:[".redacted-text{background-color:#000!important;color:#fff!important;cursor:pointer}.redaction-text{white-space:pre-wrap;border:1px solid #ebedef;padding:.5rem;overflow:auto;line-height:175%;word-break:break-word}.redaction-text Span[group-uuid]{border-bottom:.15rem dashed!important}.redaction-text Span[redacted]{border-bottom:none!important}.redaction-text[contenteditable=false] Span.selected-span{background-color:#ffcc32!important;color:#fff!important;cursor:pointer}.redaction-control{border:1px solid #ebedef;padding:1rem}.redaction-control .redaction-container{display:flex}.redaction-control .redaction-container .toolbar{min-height:48px}.redaction-control .redaction-container .toolbar kendo-toolbar{padding-left:0;padding-right:0;background-color:unset;border:none}.redaction-control .redaction-container .left-container{width:70%;height:100%;padding-right:.5rem}.redaction-control .redaction-container .left-container .toolbar{display:flex}.redaction-control .redaction-container .left-container .toolbar .left-toolbar{flex-grow:1}.redaction-control .redaction-container .right-container{width:30%}.title{margin:0;padding:.5rem}"],encapsulation:2}),RedactionComponent})();function ClientComponent_app_redaction_4_Template(rf,ctx){if(1&rf){const _r4=getCurrentView();elementStart(0,"app-redaction",5),listener("updateText",(function($event){return restoreView(_r4),nextContext().updateText($event)})),elementEnd()}if(2&rf){const ctx_r0=nextContext();property("mode","edit")("redactionText",ctx_r0.redactionText)("config",ctx_r0.config)}}function ClientComponent_ng_template_5_Template(rf,ctx){1&rf&&(elementStart(0,"h3"),text(1,"Please configure redaction through admin"),elementEnd())}let client_component_ClientComponent=(()=>{class ClientComponent{constructor(notificationService){this.notificationService=notificationService,this.enableSave=!1}ngOnInit(){var _a;this.redactionText=null!==(_a=localStorage.getItem("redactionText"))&&void 0!==_a?_a:"";const configJsonString=localStorage.getItem("config");configJsonString&&(this.config=JSON.parse(configJsonString))}updateText(updateText){this.redactionText=updateText,this.enableSave=!0}save(){localStorage.setItem("redactionText",this.redactionText),this.enableSave=!1,this.notificationService.show({content:"Successfully saved redaction text",hideAfter:600,position:{horizontal:"center",vertical:"bottom"},type:{style:"success",icon:!0}})}reset(){localStorage.clear(),this.ngOnInit(),this.notificationService.show({content:"Successfully reset admin and redaction text",hideAfter:600,position:{horizontal:"center",vertical:"bottom"},type:{style:"success",icon:!0}})}}return ClientComponent.fac=function(t){return new(t||ClientComponent)(directiveInject(fesm2015_NotificationService))},ClientComponent.cmp=defineComponent({type:ClientComponent,selectors:[["app-client"]],decls:7,vars:5,consts:[[3,"text","disabled","click"],[3,"text","click"],[1,"page"],[3,"mode","redactionText","config","updateText",4,"ngIf","ngIfElse"],["configMsg",""],[3,"mode","redactionText","config","updateText"]],template:function(rf,ctx){if(1&rf&&(elementStart(0,"kendo-toolbar"),elementStart(1,"kendo-toolbar-button",0),listener("click",(function(){return ctx.save()})),elementEnd(),elementStart(2,"kendo-toolbar-button",1),listener("click",(function(){return ctx.reset()})),elementEnd(),elementEnd(),elementStart(3,"div",2),template(4,ClientComponent_app_redaction_4_Template,1,3,"app-redaction",3),elementEnd(),template(5,ClientComponent_ng_template_5_Template,2,0,"ng-template",null,4,templateRefExtractor)),2&rf){const _r1=reference(6);advance(1),property("text","Save")("disabled",!ctx.enableSave),advance(1),property("text","Reset"),advance(2),property("ngIf",ctx.config)("ngIfElse",_r1)}},directives:[fesm2015_ToolBarComponent,fesm2015_ToolBarButtonComponent,common_NgIf,redaction_component_RedactionComponent],styles:[".page[_ngcontent-%COMP%]{padding:1rem}"]}),ClientComponent})();function TextGroupingsGridComponent_ul_5_li_1_Template(rf,ctx){if(1&rf){const _r7=getCurrentView();elementStart(0,"li",8),listener("click",(function(){restoreView(_r7);const item_r5=ctx.$implicit;return nextContext(2).listSelection(item_r5)}))("keydown.enter",(function(){restoreView(_r7);const item_r5=ctx.$implicit;return nextContext(2).listSelection(item_r5)})),text(1),elementEnd()}if(2&rf){const item_r5=ctx.$implicit;classProp("selected",nextContext(2).isSelected(item_r5.id)),advance(1),textInterpolate1(" ",item_r5.label," ")}}function TextGroupingsGridComponent_ul_5_Template(rf,ctx){if(1&rf&&(elementStart(0,"ul",6),template(1,TextGroupingsGridComponent_ul_5_li_1_Template,2,3,"li",7),elementEnd()),2&rf){const ctx_r0=nextContext();advance(1),property("ngForOf",ctx_r0.listItems)}}function TextGroupingsGridComponent_kendo_dialog_6_Template(rf,ctx){if(1&rf){const _r10=getCurrentView();elementStart(0,"kendo-dialog",9),listener("close",(function(){return restoreView(_r10),nextContext().closeDialog()})),elementStart(1,"div",10),elementStart(2,"span",11),text(3,"Label:"),elementEnd(),elementStart(4,"input",12),listener("ngModelChange",(function($event){return restoreView(_r10),nextContext().dialogLabel=$event})),elementEnd(),elementEnd(),elementStart(5,"div",10),elementStart(6,"span",11),text(7,"Name:"),elementEnd(),elementStart(8,"kendo-dropdownlist",13),listener("ngModelChange",(function($event){return restoreView(_r10),nextContext().dialogName=$event})),elementEnd(),elementEnd(),elementStart(9,"kendo-dialog-actions"),elementStart(10,"button",14),listener("click",(function(){return restoreView(_r10),nextContext().closeDialog()})),text(11,"Cancel"),elementEnd(),elementStart(12,"button",15),listener("click",(function(){return restoreView(_r10),nextContext().commitDialog()})),text(13,"Update"),elementEnd(),elementEnd(),elementEnd()}if(2&rf){const ctx_r1=nextContext();advance(4),property("ngModel",ctx_r1.dialogLabel),advance(4),property("data",ctx_r1.redactionConcepts)("ngModel",ctx_r1.dialogName)}}function TextGroupingsGridComponent_ng_template_7_Template(rf,ctx){1&rf&&text(0," No list items.\n")}let text_groupings_grid_component_TextGroupingsGridComponent=(()=>{class TextGroupingsGridComponent{constructor(regexMarkupService){this.regexMarkupService=regexMarkupService,this.listItemsUpdate=new core_EventEmitter,this.isDialogOpen=!1,this.addItem=!1,this.listSelection=listItem=>{this.selectedListItem=listItem}}ngOnInit(){this.redactionConcepts=this.regexMarkupService.getRedactionConcepts()}isSelected(id){var _a;return(null===(_a=this.selectedListItem)||void 0===_a?void 0:_a.id)===id}addListItem(){this.addItem=!0,this.isDialogOpen=!0}deleteListItems(){this.listItems=this.listItems.filter(item=>this.selectedListItem.id!==item.id),this.selectedListItem=void 0,this.listItemsUpdate.emit(this.listItems)}editListItem(){this.dialogLabel=this.selectedListItem.data.label,this.dialogName=this.selectedListItem.data.name,this.isDialogOpen=!0}closeDialog(){this.isDialogOpen=!1,this.dialogLabel="",this.dialogName=""}commitDialog(){this.dialogLabel&&this.dialogName&&(this.addItem?this.listItems.push({id:this.listItems.length,label:this.dialogLabel,data:{label:this.dialogLabel,name:this.dialogName}}):(this.selectedListItem.label=this.dialogLabel,this.selectedListItem.data.label=this.dialogLabel,this.selectedListItem.data.name=this.dialogName),this.addItem=!1,this.closeDialog(),this.listItemsUpdate.emit(this.listItems))}}return TextGroupingsGridComponent.fac=function(t){return new(t||TextGroupingsGridComponent)(directiveInject(regexMarkup_service_RegexMarkupService))},TextGroupingsGridComponent.cmp=defineComponent({type:TextGroupingsGridComponent,selectors:[["app-text-groupings-grid"]],inputs:{listItems:"listItems",showLabel:"showLabel"},outputs:{listItemsUpdate:"listItemsUpdate"},decls:9,vars:9,consts:[[1,"sim-toolbar-no-background"],[3,"text","disabled","click"],[1,"list-container"],["selectedSelector",".selected",4,"ngIf","ngIfElse"],["title","Label",3,"close",4,"ngIf"],["emptyMessage",""],["selectedSelector",".selected"],["class","list-item",3,"selected","click","keydown.enter",4,"ngFor","ngForOf"],[1,"list-item",3,"click","keydown.enter"],["title","Label",3,"close"],[1,"config-input"],[1,"input-label"],["kendoTextBox","",3,"ngModel","ngModelChange"],[3,"data","ngModel","ngModelChange"],["kendoButton","",3,"click"],["kendoButton","","primary","true",3,"click"]],template:function(rf,ctx){if(1&rf&&(elementStart(0,"kendo-toolbar",0),elementStart(1,"kendo-toolbar-button",1),listener("click",(function(){return ctx.addListItem()})),elementEnd(),elementStart(2,"kendo-toolbar-button",1),listener("click",(function(){return ctx.deleteListItems()})),elementEnd(),elementStart(3,"kendo-toolbar-button",1),listener("click",(function(){return ctx.editListItem()})),elementEnd(),elementEnd(),elementStart(4,"div",2),template(5,TextGroupingsGridComponent_ul_5_Template,2,1,"ul",3),elementEnd(),template(6,TextGroupingsGridComponent_kendo_dialog_6_Template,14,3,"kendo-dialog",4),template(7,TextGroupingsGridComponent_ng_template_7_Template,1,0,"ng-template",null,5,templateRefExtractor)),2&rf){const _r2=reference(8);advance(1),property("text","Add")("disabled",!ctx.showLabel),advance(1),property("text","Remove")("disabled",!ctx.selectedListItem&&!ctx.showLabel),advance(1),property("text","Edit")("disabled",!ctx.selectedListItem&&!ctx.showLabel),advance(2),property("ngIf",ctx.listItems.length>0)("ngIfElse",_r2),advance(1),property("ngIf",ctx.isDialogOpen)}},directives:[fesm2015_ToolBarComponent,fesm2015_ToolBarButtonComponent,common_NgIf,common_NgForOf,fesm2015_DialogComponent,fesm2015_TextBoxDirective,forms_DefaultValueAccessor,forms_NgControlStatus,forms_NgModel,fesm2015_DropDownListComponent,fesm2015_DialogActionsComponent,fesm2015_ButtonDirective],styles:[".list-container[_ngcontent-%COMP%]{height:200px;border:1px solid rgba(206,210,217,.5)}.list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;cursor:pointer;padding:.25rem .5rem}.list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .list-item.selected[_ngcontent-%COMP%]{background-color:rgba(177,184,195,.25);color:#2a3037}.list-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:rgba(177,184,195,.2);color:#2a3037}.config-input[_ngcontent-%COMP%]{padding:.5rem}.config-input[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{display:block}"]}),TextGroupingsGridComponent})();const app_routing_module_routes=[{path:"client",component:client_component_ClientComponent},{path:"admin",component:(()=>{class AdminComponent{constructor(notificationService){this.notificationService=notificationService,this.enableSave=!1}ngOnInit(){const configJsonString=localStorage.getItem("config");configJsonString?this.config=JSON.parse(configJsonString):(this.config={title:"Redaction",height:"300px",automaticRedaction:!1,standardRedactionLength:!1,showLabel:!1,textGroupings:[]},this.enableSave=!0)}save(){localStorage.setItem("config",JSON.stringify(this.config)),this.enableSave=!1,this.notificationService.show({content:"Successfully saved redaction admin",hideAfter:600,position:{horizontal:"center",vertical:"bottom"},type:{style:"success",icon:!0}})}reset(){localStorage.clear(),this.ngOnInit(),this.notificationService.show({content:"Successfully cleared admin and redaction text",hideAfter:600,position:{horizontal:"center",vertical:"bottom"},type:{style:"success",icon:!0}})}get title(){return this.config.title}set title(v){this.config.title=v,this.enableSave=!0}get height(){return this.config.height}set height(v){this.config.height=v,this.enableSave=!0}get automaticRedaction(){return this.config.automaticRedaction}set automaticRedaction(v){this.config.automaticRedaction=v,this.enableSave=!0}get standardRedactionLength(){return this.config.standardRedactionLength}set standardRedactionLength(v){this.config.standardRedactionLength=v,this.enableSave=!0}get showLabel(){return this.config.showLabel}set showLabel(v){this.config.showLabel=v,this.enableSave=!0}get textGroupings(){return this.config.textGroupings.map((grouping,index)=>({id:index,label:grouping.label,data:grouping}))}set textGroupings(v){this.config.textGroupings=v.map(gridItem=>gridItem.data),this.enableSave=!0}updateTextGroupings(gridItems){this.textGroupings=gridItems}}return AdminComponent.fac=function(t){return new(t||AdminComponent)(directiveInject(fesm2015_NotificationService))},AdminComponent.cmp=defineComponent({type:AdminComponent,selectors:[["app-admin"]],decls:34,vars:12,consts:[[1,"admin-view"],[1,"toolbar"],[3,"text","disabled","click"],[3,"text","click"],[1,"admin-container"],[1,"control-container"],[3,"mode","redactionText","config"],[1,"config-container"],[1,"config-input"],[1,"input-label"],["kendoTextBox","",3,"ngModel","ngModelChange"],["type","checkbox","kendoCheckBox","",3,"ngModel","ngModelChange"],[1,"checkbox-input-label"],[3,"listItems","showLabel","listItemsUpdate"]],template:function(rf,ctx){1&rf&&(elementStart(0,"div",0),elementStart(1,"kendo-toolbar",1),elementStart(2,"kendo-toolbar-button",2),listener("click",(function(){return ctx.save()})),elementEnd(),elementStart(3,"kendo-toolbar-button",3),listener("click",(function(){return ctx.reset()})),elementEnd(),elementEnd(),elementStart(4,"div",4),elementStart(5,"div",5),element(6,"app-redaction",6),elementEnd(),elementStart(7,"div",7),elementStart(8,"h3"),text(9,"Redaction"),elementEnd(),elementStart(10,"div",8),elementStart(11,"span",9),text(12,"Title:"),elementEnd(),elementStart(13,"input",10),listener("ngModelChange",(function($event){return ctx.title=$event})),elementEnd(),elementEnd(),elementStart(14,"div",8),elementStart(15,"span",9),text(16,"Height:"),elementEnd(),elementStart(17,"input",10),listener("ngModelChange",(function($event){return ctx.height=$event})),elementEnd(),elementEnd(),elementStart(18,"div",8),elementStart(19,"input",11),listener("ngModelChange",(function($event){return ctx.automaticRedaction=$event})),elementEnd(),elementStart(20,"span",12),text(21,"Automatic redaction"),elementEnd(),elementEnd(),elementStart(22,"div",8),elementStart(23,"input",11),listener("ngModelChange",(function($event){return ctx.showLabel=$event})),elementEnd(),elementStart(24,"span",12),text(25,"Show label"),elementEnd(),elementEnd(),elementStart(26,"div",8),elementStart(27,"span",9),text(28,"Text groupings:"),elementEnd(),elementStart(29,"app-text-groupings-grid",13),listener("listItemsUpdate",(function($event){return ctx.updateTextGroupings($event)})),elementEnd(),elementEnd(),elementStart(30,"div",8),elementStart(31,"input",11),listener("ngModelChange",(function($event){return ctx.standardRedactionLength=$event})),elementEnd(),elementStart(32,"span",12),text(33,"Standard redaction length"),elementEnd(),elementEnd(),elementEnd(),elementEnd(),elementEnd()),2&rf&&(advance(2),property("text","Save")("disabled",!ctx.enableSave),advance(1),property("text","Reset"),advance(3),property("mode","design")("config",ctx.config),advance(7),property("ngModel",ctx.title),advance(4),property("ngModel",ctx.height),advance(2),property("ngModel",ctx.automaticRedaction),advance(4),property("ngModel",ctx.showLabel),advance(6),property("listItems",ctx.textGroupings)("showLabel",ctx.showLabel),advance(2),property("ngModel",ctx.standardRedactionLength))},directives:[fesm2015_ToolBarComponent,fesm2015_ToolBarButtonComponent,redaction_component_RedactionComponent,fesm2015_TextBoxDirective,forms_DefaultValueAccessor,forms_NgControlStatus,forms_NgModel,forms_CheckboxControlValueAccessor,fesm2015_CheckBoxDirective,text_groupings_grid_component_TextGroupingsGridComponent],styles:[".admin-view[_ngcontent-%COMP%]{border:1px solid rgba(206,210,217,.5)}.admin-view[_ngcontent-%COMP%]   .admin-container[_ngcontent-%COMP%]{display:flex}.admin-view[_ngcontent-%COMP%]   .admin-container[_ngcontent-%COMP%]   .control-container[_ngcontent-%COMP%]{flex-basis:75%;padding:1rem}.admin-view[_ngcontent-%COMP%]   .admin-container[_ngcontent-%COMP%]   .config-container[_ngcontent-%COMP%]{border-left:5px solid rgba(206,210,217,.5);padding:.5rem;min-width:400px}.admin-view[_ngcontent-%COMP%]   .admin-container[_ngcontent-%COMP%]   .config-container[_ngcontent-%COMP%]   .config-input[_ngcontent-%COMP%]{padding:.5rem}.admin-view[_ngcontent-%COMP%]   .admin-container[_ngcontent-%COMP%]   .config-container[_ngcontent-%COMP%]   .config-input[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{display:block}.admin-view[_ngcontent-%COMP%]   .admin-container[_ngcontent-%COMP%]   .config-container[_ngcontent-%COMP%]   .config-input[_ngcontent-%COMP%]   .checkbox-input-label[_ngcontent-%COMP%]{padding-left:.5rem}"]}),AdminComponent})()},{path:"",redirectTo:"/client",pathMatch:"full"}];let app_routing_module_AppRoutingModule=(()=>{class AppRoutingModule{}return AppRoutingModule.mod=defineNgModule({type:AppRoutingModule}),AppRoutingModule.inj=defineInjector({factory:function(t){return new(t||AppRoutingModule)},imports:[[router_RouterModule.forRoot(app_routing_module_routes)],router_RouterModule]}),AppRoutingModule})(),app_component_AppComponent=(()=>{class AppComponent{constructor(router){this.router=router;const path=localStorage.getItem("path");"/client"!==path&&"/admin"!==path||(localStorage.removeItem("path"),this.router.navigate([path]))}}return AppComponent.fac=function(t){return new(t||AppComponent)(directiveInject(router_Router))},AppComponent.cmp=defineComponent({type:AppComponent,selectors:[["app-root"]],decls:9,vars:0,consts:[[1,"nav-list"],[1,"nav-list-item"],["routerLink","/client","routerLinkActive","active"],["routerLink","/admin","routerLinkActive","active"]],template:function(rf,ctx){1&rf&&(elementStart(0,"nav"),elementStart(1,"ul",0),elementStart(2,"li",1),elementStart(3,"a",2),text(4,"Client"),elementEnd(),elementEnd(),elementStart(5,"li",1),elementStart(6,"a",3),text(7,"Admin"),elementEnd(),elementEnd(),elementEnd(),elementEnd(),element(8,"router-outlet"))},directives:[router_RouterLinkWithHref,router_RouterLinkActive,router_RouterOutlet],styles:["nav[_ngcontent-%COMP%]   .nav-list[_ngcontent-%COMP%]{list-style:none;width:100%;padding:0;margin:.5rem 0}nav[_ngcontent-%COMP%]   .nav-list[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]{display:inline-block}nav[_ngcontent-%COMP%]   .nav-list[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.5rem;text-decoration:none;color:#000}nav[_ngcontent-%COMP%]   .nav-list[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:rgba(177,184,195,.2)}nav[_ngcontent-%COMP%]   .nav-list[_ngcontent-%COMP%]   .nav-list-item[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#0379ce;color:#fff}"]}),AppComponent})();function isNode(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function optimizeGroupPlayer(players){switch(players.length){case 0:return new NoopAnimationPlayer;case 1:return players[0];default:return new AnimationGroupPlayer(players)}}function normalizeKeyframes(driver,normalizer,element,keyframes,preStyles={},postStyles={}){const errors=[],normalizedKeyframes=[];let previousOffset=-1,previousKeyframe=null;if(keyframes.forEach(kf=>{const offset=kf.offset,isSameOffset=offset==previousOffset,normalizedKeyframe=isSameOffset&&previousKeyframe||{};Object.keys(kf).forEach(prop=>{let normalizedProp=prop,normalizedValue=kf[prop];if("offset"!==prop)switch(normalizedProp=normalizer.normalizePropertyName(normalizedProp,errors),normalizedValue){case"!":normalizedValue=preStyles[prop];break;case"*":normalizedValue=postStyles[prop];break;default:normalizedValue=normalizer.normalizeStyleValue(prop,normalizedProp,normalizedValue,errors)}normalizedKeyframe[normalizedProp]=normalizedValue}),isSameOffset||normalizedKeyframes.push(normalizedKeyframe),previousKeyframe=normalizedKeyframe,previousOffset=offset}),errors.length){const LINE_START="\n - ";throw new Error(`Unable to animate due to the following errors:${LINE_START}${errors.join(LINE_START)}`)}return normalizedKeyframes}function listenOnPlayer(player,eventName,event,callback){switch(eventName){case"start":player.onStart(()=>callback(event&&copyAnimationEvent(event,"start",player)));break;case"done":player.onDone(()=>callback(event&&copyAnimationEvent(event,"done",player)));break;case"destroy":player.onDestroy(()=>callback(event&&copyAnimationEvent(event,"destroy",player)))}}function copyAnimationEvent(e,phaseName,player){const totalTime=player.totalTime,event=makeAnimationEvent(e.element,e.triggerName,e.fromState,e.toState,phaseName||e.phaseName,null==totalTime?e.totalTime:totalTime,!!player.disabled),data=e._data;return null!=data&&(event._data=data),event}function makeAnimationEvent(element,triggerName,fromState,toState,phaseName="",totalTime=0,disabled){return{element:element,triggerName:triggerName,fromState:fromState,toState:toState,phaseName:phaseName,totalTime:totalTime,disabled:!!disabled}}function getOrSetAsInMap(map,key,defaultValue){let value;return map instanceof Map?(value=map.get(key),value||map.set(key,value=defaultValue)):(value=map[key],value||(value=map[key]=defaultValue)),value}function parseTimelineCommand(command){const separatorPos=command.indexOf(":");return[command.substring(1,separatorPos),command.substr(separatorPos+1)]}let _contains=(elm1,elm2)=>!1,_matches=(element,selector)=>!1,_query=(element,selector,multi)=>[];const _isNode=isNode();(_isNode||"undefined"!=typeof Element)&&(_contains=(elm1,elm2)=>elm1.contains(elm2),_matches=(()=>{if(_isNode||Element.prototype.matches)return(element,selector)=>element.matches(selector);{const proto=Element.prototype,fn=proto.matchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector||proto.webkitMatchesSelector;return fn?(element,selector)=>fn.apply(element,[selector]):_matches}})(),_query=(element,selector,multi)=>{let results=[];if(multi)results.push(...element.querySelectorAll(selector));else{const elm=element.querySelector(selector);elm&&results.push(elm)}return results});let _CACHED_BODY=null,_IS_WEBKIT=!1;function validateStyleProperty(prop){_CACHED_BODY||(_CACHED_BODY=("undefined"!=typeof document?document.body:null)||{},_IS_WEBKIT=!!_CACHED_BODY.style&&"WebkitAppearance"in _CACHED_BODY.style);let result=!0;return _CACHED_BODY.style&&!function(prop){return"ebkit"==prop.substring(1,6)}(prop)&&(result=prop in _CACHED_BODY.style,!result&&_IS_WEBKIT)&&(result="Webkit"+prop.charAt(0).toUpperCase()+prop.substr(1)in _CACHED_BODY.style),result}const matchesElement=_matches,containsElement=_contains,invokeQuery=_query;function hypenatePropsObject(object){const newObj={};return Object.keys(object).forEach(prop=>{const newProp=prop.replace(/([a-z])([A-Z])/g,"$1-$2");newObj[newProp]=object[prop]}),newObj}let browser_NoopAnimationDriver=(()=>{class NoopAnimationDriver{validateStyleProperty(prop){return validateStyleProperty(prop)}matchesElement(element,selector){return matchesElement(element,selector)}containsElement(elm1,elm2){return containsElement(elm1,elm2)}query(element,selector,multi){return invokeQuery(element,selector,multi)}computeStyle(element,prop,defaultValue){return defaultValue||""}animate(element,keyframes,duration,delay,easing,previousPlayers=[],scrubberAccessRequested){return new NoopAnimationPlayer(duration,delay)}}return NoopAnimationDriver.fac=function(t){return new(t||NoopAnimationDriver)},NoopAnimationDriver.prov=defineInjectable({token:NoopAnimationDriver,factory:NoopAnimationDriver.fac}),NoopAnimationDriver})(),AnimationDriver=(()=>{class AnimationDriver{}return AnimationDriver.NOOP=new browser_NoopAnimationDriver,AnimationDriver})();function resolveTimingValue(value){if("number"==typeof value)return value;const matches=value.match(/^(-?[\.\d]+)(m?s)/);return!matches||matches.length<2?0:_convertTimeValueToMS(parseFloat(matches[1]),matches[2])}function _convertTimeValueToMS(value,unit){switch(unit){case"s":return 1e3*value;default:return value}}function resolveTiming(timings,errors,allowNegativeValues){return timings.hasOwnProperty("duration")?timings:function(exp,errors,allowNegativeValues){let duration,delay=0,easing="";if("string"==typeof exp){const matches=exp.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===matches)return errors.push(`The provided timing value "${exp}" is invalid.`),{duration:0,delay:0,easing:""};duration=_convertTimeValueToMS(parseFloat(matches[1]),matches[2]);const delayMatch=matches[3];null!=delayMatch&&(delay=_convertTimeValueToMS(parseFloat(delayMatch),matches[4]));const easingVal=matches[5];easingVal&&(easing=easingVal)}else duration=exp;if(!allowNegativeValues){let containsErrors=!1,startIndex=errors.length;duration<0&&(errors.push("Duration values below 0 are not allowed for this animation step."),containsErrors=!0),delay<0&&(errors.push("Delay values below 0 are not allowed for this animation step."),containsErrors=!0),containsErrors&&errors.splice(startIndex,0,`The provided timing value "${exp}" is invalid.`)}return{duration:duration,delay:delay,easing:easing}}(timings,errors,allowNegativeValues)}function copyObj(obj,destination={}){return Object.keys(obj).forEach(prop=>{destination[prop]=obj[prop]}),destination}function copyStyles(styles,readPrototype,destination={}){if(readPrototype)for(let prop in styles)destination[prop]=styles[prop];else copyObj(styles,destination);return destination}function getStyleAttributeString(element,key,value){return value?key+":"+value+";":""}function writeStyleAttribute(element){let styleAttrValue="";for(let i=0;i<element.style.length;i++){const key=element.style.item(i);styleAttrValue+=getStyleAttributeString(0,key,element.style.getPropertyValue(key))}for(const key in element.style)element.style.hasOwnProperty(key)&&!key.startsWith("_")&&(styleAttrValue+=getStyleAttributeString(0,key.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),element.style[key]));element.setAttribute("style",styleAttrValue)}function setStyles(element,styles,formerStyles){element.style&&(Object.keys(styles).forEach(prop=>{const camelProp=browser_dashCaseToCamelCase(prop);formerStyles&&!formerStyles.hasOwnProperty(prop)&&(formerStyles[prop]=element.style[camelProp]),element.style[camelProp]=styles[prop]}),isNode()&&writeStyleAttribute(element))}function eraseStyles(element,styles){element.style&&(Object.keys(styles).forEach(prop=>{const camelProp=browser_dashCaseToCamelCase(prop);element.style[camelProp]=""}),isNode()&&writeStyleAttribute(element))}function normalizeAnimationEntry(steps){return Array.isArray(steps)?1==steps.length?steps[0]:sequence(steps):steps}const PARAM_REGEX=new RegExp("{{\\s*(.+?)\\s*}}","g");function extractStyleParams(value){let params=[];if("string"==typeof value){let match;for(;match=PARAM_REGEX.exec(value);)params.push(match[1]);PARAM_REGEX.lastIndex=0}return params}function interpolateParams(value,params,errors){const original=value.toString(),str=original.replace(PARAM_REGEX,(_,varName)=>{let localVal=params[varName];return params.hasOwnProperty(varName)||(errors.push("Please provide a value for the animation param "+varName),localVal=""),localVal.toString()});return str==original?value:str}function iteratorToArray(iterator){const arr=[];let item=iterator.next();for(;!item.done;)arr.push(item.value),item=iterator.next();return arr}const browser_DASH_CASE_REGEXP=/-+([a-z0-9])/g;function browser_dashCaseToCamelCase(input){return input.replace(browser_DASH_CASE_REGEXP,(...m)=>m[1].toUpperCase())}function allowPreviousPlayerStylesMerge(duration,delay){return 0===duration||0===delay}function balancePreviousStylesIntoKeyframes(element,keyframes,previousStyles){const previousStyleProps=Object.keys(previousStyles);if(previousStyleProps.length&&keyframes.length){let startingKeyframe=keyframes[0],missingStyleProps=[];if(previousStyleProps.forEach(prop=>{startingKeyframe.hasOwnProperty(prop)||missingStyleProps.push(prop),startingKeyframe[prop]=previousStyles[prop]}),missingStyleProps.length)for(var i=1;i<keyframes.length;i++){let kf=keyframes[i];missingStyleProps.forEach((function(prop){kf[prop]=computeStyle(element,prop)}))}}return keyframes}function visitDslNode(visitor,node,context){switch(node.type){case 7:return visitor.visitTrigger(node,context);case 0:return visitor.visitState(node,context);case 1:return visitor.visitTransition(node,context);case 2:return visitor.visitSequence(node,context);case 3:return visitor.visitGroup(node,context);case 4:return visitor.visitAnimate(node,context);case 5:return visitor.visitKeyframes(node,context);case 6:return visitor.visitStyle(node,context);case 8:return visitor.visitReference(node,context);case 9:return visitor.visitAnimateChild(node,context);case 10:return visitor.visitAnimateRef(node,context);case 11:return visitor.visitQuery(node,context);case 12:return visitor.visitStagger(node,context);default:throw new Error("Unable to resolve animation metadata node #"+node.type)}}function computeStyle(element,prop){return window.getComputedStyle(element)[prop]}function parseTransitionExpr(transitionValue,errors){const expressions=[];return"string"==typeof transitionValue?transitionValue.split(/\s*,\s*/).forEach(str=>function(eventStr,expressions,errors){if(":"==eventStr[0]){const result=function(alias,errors){switch(alias){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(fromState,toState)=>parseFloat(toState)>parseFloat(fromState);case":decrement":return(fromState,toState)=>parseFloat(toState)<parseFloat(fromState);default:return errors.push(`The transition alias value "${alias}" is not supported`),"* => *"}}(eventStr,errors);if("function"==typeof result)return void expressions.push(result);eventStr=result}const match=eventStr.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==match||match.length<4)return errors.push(`The provided transition expression "${eventStr}" is not supported`),expressions;const fromState=match[1],separator=match[2],toState=match[3];expressions.push(makeLambdaFromStates(fromState,toState)),"<"!=separator[0]||"*"==fromState&&"*"==toState||expressions.push(makeLambdaFromStates(toState,fromState))}(str,expressions,errors)):expressions.push(transitionValue),expressions}const TRUE_BOOLEAN_VALUES=new Set(["true","1"]),FALSE_BOOLEAN_VALUES=new Set(["false","0"]);function makeLambdaFromStates(lhs,rhs){const LHS_MATCH_BOOLEAN=TRUE_BOOLEAN_VALUES.has(lhs)||FALSE_BOOLEAN_VALUES.has(lhs),RHS_MATCH_BOOLEAN=TRUE_BOOLEAN_VALUES.has(rhs)||FALSE_BOOLEAN_VALUES.has(rhs);return(fromState,toState)=>{let lhsMatch="*"==lhs||lhs==fromState,rhsMatch="*"==rhs||rhs==toState;return!lhsMatch&&LHS_MATCH_BOOLEAN&&"boolean"==typeof fromState&&(lhsMatch=fromState?TRUE_BOOLEAN_VALUES.has(lhs):FALSE_BOOLEAN_VALUES.has(lhs)),!rhsMatch&&RHS_MATCH_BOOLEAN&&"boolean"==typeof toState&&(rhsMatch=toState?TRUE_BOOLEAN_VALUES.has(rhs):FALSE_BOOLEAN_VALUES.has(rhs)),lhsMatch&&rhsMatch}}const SELF_TOKEN_REGEX=new RegExp("s*:selfs*,?","g");function buildAnimationAst(driver,metadata,errors){return new browser_AnimationAstBuilderVisitor(driver).build(metadata,errors)}class browser_AnimationAstBuilderVisitor{constructor(_driver){this._driver=_driver}build(metadata,errors){const context=new AnimationAstBuilderContext(errors);return this._resetContextStyleTimingState(context),visitDslNode(this,normalizeAnimationEntry(metadata),context)}_resetContextStyleTimingState(context){context.currentQuerySelector="",context.collectedStyles={},context.collectedStyles[""]={},context.currentTime=0}visitTrigger(metadata,context){let queryCount=context.queryCount=0,depCount=context.depCount=0;const states=[],transitions=[];return"@"==metadata.name.charAt(0)&&context.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),metadata.definitions.forEach(def=>{if(this._resetContextStyleTimingState(context),0==def.type){const stateDef=def,name=stateDef.name;name.toString().split(/\s*,\s*/).forEach(n=>{stateDef.name=n,states.push(this.visitState(stateDef,context))}),stateDef.name=name}else if(1==def.type){const transition=this.visitTransition(def,context);queryCount+=transition.queryCount,depCount+=transition.depCount,transitions.push(transition)}else context.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:metadata.name,states:states,transitions:transitions,queryCount:queryCount,depCount:depCount,options:null}}visitState(metadata,context){const styleAst=this.visitStyle(metadata.styles,context),astParams=metadata.options&&metadata.options.params||null;if(styleAst.containsDynamicStyles){const missingSubs=new Set,params=astParams||{};if(styleAst.styles.forEach(value=>{if(browser_isObject(value)){const stylesObj=value;Object.keys(stylesObj).forEach(prop=>{extractStyleParams(stylesObj[prop]).forEach(sub=>{params.hasOwnProperty(sub)||missingSubs.add(sub)})})}}),missingSubs.size){const missingSubsArr=iteratorToArray(missingSubs.values());context.errors.push(`state("${metadata.name}", ...) must define default values for all the following style substitutions: ${missingSubsArr.join(", ")}`)}}return{type:0,name:metadata.name,style:styleAst,options:astParams?{params:astParams}:null}}visitTransition(metadata,context){context.queryCount=0,context.depCount=0;const animation=visitDslNode(this,normalizeAnimationEntry(metadata.animation),context);return{type:1,matchers:parseTransitionExpr(metadata.expr,context.errors),animation:animation,queryCount:context.queryCount,depCount:context.depCount,options:normalizeAnimationOptions(metadata.options)}}visitSequence(metadata,context){return{type:2,steps:metadata.steps.map(s=>visitDslNode(this,s,context)),options:normalizeAnimationOptions(metadata.options)}}visitGroup(metadata,context){const currentTime=context.currentTime;let furthestTime=0;const steps=metadata.steps.map(step=>{context.currentTime=currentTime;const innerAst=visitDslNode(this,step,context);return furthestTime=Math.max(furthestTime,context.currentTime),innerAst});return context.currentTime=furthestTime,{type:3,steps:steps,options:normalizeAnimationOptions(metadata.options)}}visitAnimate(metadata,context){const timingAst=function(value,errors){let timings=null;if(value.hasOwnProperty("duration"))timings=value;else if("number"==typeof value)return makeTimingAst(resolveTiming(value,errors).duration,0,"");const strValue=value;if(strValue.split(/\s+/).some(v=>"{"==v.charAt(0)&&"{"==v.charAt(1))){const ast=makeTimingAst(0,0,"");return ast.dynamic=!0,ast.strValue=strValue,ast}return timings=timings||resolveTiming(strValue,errors),makeTimingAst(timings.duration,timings.delay,timings.easing)}(metadata.timings,context.errors);let styleAst;context.currentAnimateTimings=timingAst;let styleMetadata=metadata.styles?metadata.styles:animations_style({});if(5==styleMetadata.type)styleAst=this.visitKeyframes(styleMetadata,context);else{let styleMetadata=metadata.styles,isEmpty=!1;if(!styleMetadata){isEmpty=!0;const newStyleData={};timingAst.easing&&(newStyleData.easing=timingAst.easing),styleMetadata=animations_style(newStyleData)}context.currentTime+=timingAst.duration+timingAst.delay;const _styleAst=this.visitStyle(styleMetadata,context);_styleAst.isEmptyStep=isEmpty,styleAst=_styleAst}return context.currentAnimateTimings=null,{type:4,timings:timingAst,style:styleAst,options:null}}visitStyle(metadata,context){const ast=this._makeStyleAst(metadata,context);return this._validateStyleAst(ast,context),ast}_makeStyleAst(metadata,context){const styles=[];Array.isArray(metadata.styles)?metadata.styles.forEach(styleTuple=>{"string"==typeof styleTuple?"*"==styleTuple?styles.push(styleTuple):context.errors.push(`The provided style string value ${styleTuple} is not allowed.`):styles.push(styleTuple)}):styles.push(metadata.styles);let containsDynamicStyles=!1,collectedEasing=null;return styles.forEach(styleData=>{if(browser_isObject(styleData)){const styleMap=styleData,easing=styleMap.easing;if(easing&&(collectedEasing=easing,delete styleMap.easing),!containsDynamicStyles)for(let prop in styleMap)if(styleMap[prop].toString().indexOf("{{")>=0){containsDynamicStyles=!0;break}}}),{type:6,styles:styles,easing:collectedEasing,offset:metadata.offset,containsDynamicStyles:containsDynamicStyles,options:null}}_validateStyleAst(ast,context){const timings=context.currentAnimateTimings;let endTime=context.currentTime,startTime=context.currentTime;timings&&startTime>0&&(startTime-=timings.duration+timings.delay),ast.styles.forEach(tuple=>{"string"!=typeof tuple&&Object.keys(tuple).forEach(prop=>{if(!this._driver.validateStyleProperty(prop))return void context.errors.push(`The provided animation property "${prop}" is not a supported CSS property for animations`);const collectedStyles=context.collectedStyles[context.currentQuerySelector],collectedEntry=collectedStyles[prop];let updateCollectedStyle=!0;collectedEntry&&(startTime!=endTime&&startTime>=collectedEntry.startTime&&endTime<=collectedEntry.endTime&&(context.errors.push(`The CSS property "${prop}" that exists between the times of "${collectedEntry.startTime}ms" and "${collectedEntry.endTime}ms" is also being animated in a parallel animation between the times of "${startTime}ms" and "${endTime}ms"`),updateCollectedStyle=!1),startTime=collectedEntry.startTime),updateCollectedStyle&&(collectedStyles[prop]={startTime:startTime,endTime:endTime}),context.options&&function(value,options,errors){const params=options.params||{},matches=extractStyleParams(value);matches.length&&matches.forEach(varName=>{params.hasOwnProperty(varName)||errors.push(`Unable to resolve the local animation param ${varName} in the given list of values`)})}(tuple[prop],context.options,context.errors)})})}visitKeyframes(metadata,context){const ast={type:5,styles:[],options:null};if(!context.currentAnimateTimings)return context.errors.push("keyframes() must be placed inside of a call to animate()"),ast;let totalKeyframesWithOffsets=0;const offsets=[];let offsetsOutOfOrder=!1,keyframesOutOfRange=!1,previousOffset=0;const keyframes=metadata.steps.map(styles=>{const style=this._makeStyleAst(styles,context);let offsetVal=null!=style.offset?style.offset:function(styles){if("string"==typeof styles)return null;let offset=null;if(Array.isArray(styles))styles.forEach(styleTuple=>{if(browser_isObject(styleTuple)&&styleTuple.hasOwnProperty("offset")){const obj=styleTuple;offset=parseFloat(obj.offset),delete obj.offset}});else if(browser_isObject(styles)&&styles.hasOwnProperty("offset")){const obj=styles;offset=parseFloat(obj.offset),delete obj.offset}return offset}(style.styles),offset=0;return null!=offsetVal&&(totalKeyframesWithOffsets++,offset=style.offset=offsetVal),keyframesOutOfRange=keyframesOutOfRange||offset<0||offset>1,offsetsOutOfOrder=offsetsOutOfOrder||offset<previousOffset,previousOffset=offset,offsets.push(offset),style});keyframesOutOfRange&&context.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),offsetsOutOfOrder&&context.errors.push("Please ensure that all keyframe offsets are in order");const length=metadata.steps.length;let generatedOffset=0;totalKeyframesWithOffsets>0&&totalKeyframesWithOffsets<length?context.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==totalKeyframesWithOffsets&&(generatedOffset=1/(length-1));const limit=length-1,currentTime=context.currentTime,currentAnimateTimings=context.currentAnimateTimings,animateDuration=currentAnimateTimings.duration;return keyframes.forEach((kf,i)=>{const offset=generatedOffset>0?i==limit?1:generatedOffset*i:offsets[i],durationUpToThisFrame=offset*animateDuration;context.currentTime=currentTime+currentAnimateTimings.delay+durationUpToThisFrame,currentAnimateTimings.duration=durationUpToThisFrame,this._validateStyleAst(kf,context),kf.offset=offset,ast.styles.push(kf)}),ast}visitReference(metadata,context){return{type:8,animation:visitDslNode(this,normalizeAnimationEntry(metadata.animation),context),options:normalizeAnimationOptions(metadata.options)}}visitAnimateChild(metadata,context){return context.depCount++,{type:9,options:normalizeAnimationOptions(metadata.options)}}visitAnimateRef(metadata,context){return{type:10,animation:this.visitReference(metadata.animation,context),options:normalizeAnimationOptions(metadata.options)}}visitQuery(metadata,context){const parentSelector=context.currentQuerySelector,options=metadata.options||{};context.queryCount++,context.currentQuery=metadata;const[selector,includeSelf]=function(selector){const hasAmpersand=!!selector.split(/\s*,\s*/).find(token=>":self"==token);return hasAmpersand&&(selector=selector.replace(SELF_TOKEN_REGEX,"")),[selector=selector.replace(/@\*/g,".ng-trigger").replace(/@\w+/g,match=>".ng-trigger-"+match.substr(1)).replace(/:animating/g,".ng-animating"),hasAmpersand]}(metadata.selector);context.currentQuerySelector=parentSelector.length?parentSelector+" "+selector:selector,getOrSetAsInMap(context.collectedStyles,context.currentQuerySelector,{});const animation=visitDslNode(this,normalizeAnimationEntry(metadata.animation),context);return context.currentQuery=null,context.currentQuerySelector=parentSelector,{type:11,selector:selector,limit:options.limit||0,optional:!!options.optional,includeSelf:includeSelf,animation:animation,originalSelector:metadata.selector,options:normalizeAnimationOptions(metadata.options)}}visitStagger(metadata,context){context.currentQuery||context.errors.push("stagger() can only be used inside of query()");const timings="full"===metadata.timings?{duration:0,delay:0,easing:"full"}:resolveTiming(metadata.timings,context.errors,!0);return{type:12,animation:visitDslNode(this,normalizeAnimationEntry(metadata.animation),context),timings:timings,options:null}}}class AnimationAstBuilderContext{constructor(errors){this.errors=errors,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function browser_isObject(value){return!Array.isArray(value)&&"object"==typeof value}function normalizeAnimationOptions(options){var obj;return options?(options=copyObj(options)).params&&(options.params=(obj=options.params)?copyObj(obj):null):options={},options}function makeTimingAst(duration,delay,easing){return{duration:duration,delay:delay,easing:easing}}function createTimelineInstruction(element,keyframes,preStyleProps,postStyleProps,duration,delay,easing=null,subTimeline=!1){return{type:1,element:element,keyframes:keyframes,preStyleProps:preStyleProps,postStyleProps:postStyleProps,duration:duration,delay:delay,totalTime:duration+delay,easing:easing,subTimeline:subTimeline}}class ElementInstructionMap{constructor(){this._map=new Map}consume(element){let instructions=this._map.get(element);return instructions?this._map.delete(element):instructions=[],instructions}append(element,instructions){let existingInstructions=this._map.get(element);existingInstructions||this._map.set(element,existingInstructions=[]),existingInstructions.push(...instructions)}has(element){return this._map.has(element)}clear(){this._map.clear()}}const ENTER_TOKEN_REGEX=new RegExp(":enter","g"),LEAVE_TOKEN_REGEX=new RegExp(":leave","g");function buildAnimationTimelines(driver,rootElement,ast,enterClassName,leaveClassName,startingStyles={},finalStyles={},options,subInstructions,errors=[]){return(new AnimationTimelineBuilderVisitor).buildKeyframes(driver,rootElement,ast,enterClassName,leaveClassName,startingStyles,finalStyles,options,subInstructions,errors)}class AnimationTimelineBuilderVisitor{buildKeyframes(driver,rootElement,ast,enterClassName,leaveClassName,startingStyles,finalStyles,options,subInstructions,errors=[]){subInstructions=subInstructions||new ElementInstructionMap;const context=new AnimationTimelineContext(driver,rootElement,subInstructions,enterClassName,leaveClassName,errors,[]);context.options=options,context.currentTimeline.setStyles([startingStyles],null,context.errors,options),visitDslNode(this,ast,context);const timelines=context.timelines.filter(timeline=>timeline.containsAnimation());if(timelines.length&&Object.keys(finalStyles).length){const tl=timelines[timelines.length-1];tl.allowOnlyTimelineStyles()||tl.setStyles([finalStyles],null,context.errors,options)}return timelines.length?timelines.map(timeline=>timeline.buildKeyframes()):[createTimelineInstruction(rootElement,[],[],[],0,0,"",!1)]}visitTrigger(ast,context){}visitState(ast,context){}visitTransition(ast,context){}visitAnimateChild(ast,context){const elementInstructions=context.subInstructions.consume(context.element);if(elementInstructions){const innerContext=context.createSubContext(ast.options),startTime=context.currentTimeline.currentTime,endTime=this._visitSubInstructions(elementInstructions,innerContext,innerContext.options);startTime!=endTime&&context.transformIntoNewTimeline(endTime)}context.previousNode=ast}visitAnimateRef(ast,context){const innerContext=context.createSubContext(ast.options);innerContext.transformIntoNewTimeline(),this.visitReference(ast.animation,innerContext),context.transformIntoNewTimeline(innerContext.currentTimeline.currentTime),context.previousNode=ast}_visitSubInstructions(instructions,context,options){let furthestTime=context.currentTimeline.currentTime;const duration=null!=options.duration?resolveTimingValue(options.duration):null,delay=null!=options.delay?resolveTimingValue(options.delay):null;return 0!==duration&&instructions.forEach(instruction=>{const instructionTimings=context.appendInstructionToTimeline(instruction,duration,delay);furthestTime=Math.max(furthestTime,instructionTimings.duration+instructionTimings.delay)}),furthestTime}visitReference(ast,context){context.updateOptions(ast.options,!0),visitDslNode(this,ast.animation,context),context.previousNode=ast}visitSequence(ast,context){const subContextCount=context.subContextCount;let ctx=context;const options=ast.options;if(options&&(options.params||options.delay)&&(ctx=context.createSubContext(options),ctx.transformIntoNewTimeline(),null!=options.delay)){6==ctx.previousNode.type&&(ctx.currentTimeline.snapshotCurrentStyles(),ctx.previousNode=DEFAULT_NOOP_PREVIOUS_NODE);const delay=resolveTimingValue(options.delay);ctx.delayNextStep(delay)}ast.steps.length&&(ast.steps.forEach(s=>visitDslNode(this,s,ctx)),ctx.currentTimeline.applyStylesToKeyframe(),ctx.subContextCount>subContextCount&&ctx.transformIntoNewTimeline()),context.previousNode=ast}visitGroup(ast,context){const innerTimelines=[];let furthestTime=context.currentTimeline.currentTime;const delay=ast.options&&ast.options.delay?resolveTimingValue(ast.options.delay):0;ast.steps.forEach(s=>{const innerContext=context.createSubContext(ast.options);delay&&innerContext.delayNextStep(delay),visitDslNode(this,s,innerContext),furthestTime=Math.max(furthestTime,innerContext.currentTimeline.currentTime),innerTimelines.push(innerContext.currentTimeline)}),innerTimelines.forEach(timeline=>context.currentTimeline.mergeTimelineCollectedStyles(timeline)),context.transformIntoNewTimeline(furthestTime),context.previousNode=ast}_visitTiming(ast,context){if(ast.dynamic){const strValue=ast.strValue;return resolveTiming(context.params?interpolateParams(strValue,context.params,context.errors):strValue,context.errors)}return{duration:ast.duration,delay:ast.delay,easing:ast.easing}}visitAnimate(ast,context){const timings=context.currentAnimateTimings=this._visitTiming(ast.timings,context),timeline=context.currentTimeline;timings.delay&&(context.incrementTime(timings.delay),timeline.snapshotCurrentStyles());const style=ast.style;5==style.type?this.visitKeyframes(style,context):(context.incrementTime(timings.duration),this.visitStyle(style,context),timeline.applyStylesToKeyframe()),context.currentAnimateTimings=null,context.previousNode=ast}visitStyle(ast,context){const timeline=context.currentTimeline,timings=context.currentAnimateTimings;!timings&&timeline.getCurrentStyleProperties().length&&timeline.forwardFrame();const easing=timings&&timings.easing||ast.easing;ast.isEmptyStep?timeline.applyEmptyStep(easing):timeline.setStyles(ast.styles,easing,context.errors,context.options),context.previousNode=ast}visitKeyframes(ast,context){const currentAnimateTimings=context.currentAnimateTimings,startTime=context.currentTimeline.duration,duration=currentAnimateTimings.duration,innerTimeline=context.createSubContext().currentTimeline;innerTimeline.easing=currentAnimateTimings.easing,ast.styles.forEach(step=>{innerTimeline.forwardTime((step.offset||0)*duration),innerTimeline.setStyles(step.styles,step.easing,context.errors,context.options),innerTimeline.applyStylesToKeyframe()}),context.currentTimeline.mergeTimelineCollectedStyles(innerTimeline),context.transformIntoNewTimeline(startTime+duration),context.previousNode=ast}visitQuery(ast,context){const startTime=context.currentTimeline.currentTime,options=ast.options||{},delay=options.delay?resolveTimingValue(options.delay):0;delay&&(6===context.previousNode.type||0==startTime&&context.currentTimeline.getCurrentStyleProperties().length)&&(context.currentTimeline.snapshotCurrentStyles(),context.previousNode=DEFAULT_NOOP_PREVIOUS_NODE);let furthestTime=startTime;const elms=context.invokeQuery(ast.selector,ast.originalSelector,ast.limit,ast.includeSelf,!!options.optional,context.errors);context.currentQueryTotal=elms.length;let sameElementTimeline=null;elms.forEach((element,i)=>{context.currentQueryIndex=i;const innerContext=context.createSubContext(ast.options,element);delay&&innerContext.delayNextStep(delay),element===context.element&&(sameElementTimeline=innerContext.currentTimeline),visitDslNode(this,ast.animation,innerContext),innerContext.currentTimeline.applyStylesToKeyframe(),furthestTime=Math.max(furthestTime,innerContext.currentTimeline.currentTime)}),context.currentQueryIndex=0,context.currentQueryTotal=0,context.transformIntoNewTimeline(furthestTime),sameElementTimeline&&(context.currentTimeline.mergeTimelineCollectedStyles(sameElementTimeline),context.currentTimeline.snapshotCurrentStyles()),context.previousNode=ast}visitStagger(ast,context){const parentContext=context.parentContext,tl=context.currentTimeline,timings=ast.timings,duration=Math.abs(timings.duration),maxTime=duration*(context.currentQueryTotal-1);let delay=duration*context.currentQueryIndex;switch(timings.duration<0?"reverse":timings.easing){case"reverse":delay=maxTime-delay;break;case"full":delay=parentContext.currentStaggerTime}const timeline=context.currentTimeline;delay&&timeline.delayNextStep(delay);const startingTime=timeline.currentTime;visitDslNode(this,ast.animation,context),context.previousNode=ast,parentContext.currentStaggerTime=tl.currentTime-startingTime+(tl.startTime-parentContext.currentTimeline.startTime)}}const DEFAULT_NOOP_PREVIOUS_NODE={};class AnimationTimelineContext{constructor(_driver,element,subInstructions,_enterClassName,_leaveClassName,errors,timelines,initialTimeline){this._driver=_driver,this.element=element,this.subInstructions=subInstructions,this._enterClassName=_enterClassName,this._leaveClassName=_leaveClassName,this.errors=errors,this.timelines=timelines,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=DEFAULT_NOOP_PREVIOUS_NODE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=initialTimeline||new browser_TimelineBuilder(this._driver,element,0),timelines.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(options,skipIfExists){if(!options)return;const newOptions=options;let optionsToUpdate=this.options;null!=newOptions.duration&&(optionsToUpdate.duration=resolveTimingValue(newOptions.duration)),null!=newOptions.delay&&(optionsToUpdate.delay=resolveTimingValue(newOptions.delay));const newParams=newOptions.params;if(newParams){let paramsToUpdate=optionsToUpdate.params;paramsToUpdate||(paramsToUpdate=this.options.params={}),Object.keys(newParams).forEach(name=>{skipIfExists&&paramsToUpdate.hasOwnProperty(name)||(paramsToUpdate[name]=interpolateParams(newParams[name],paramsToUpdate,this.errors))})}}_copyOptions(){const options={};if(this.options){const oldParams=this.options.params;if(oldParams){const params=options.params={};Object.keys(oldParams).forEach(name=>{params[name]=oldParams[name]})}}return options}createSubContext(options=null,element,newTime){const target=element||this.element,context=new AnimationTimelineContext(this._driver,target,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(target,newTime||0));return context.previousNode=this.previousNode,context.currentAnimateTimings=this.currentAnimateTimings,context.options=this._copyOptions(),context.updateOptions(options),context.currentQueryIndex=this.currentQueryIndex,context.currentQueryTotal=this.currentQueryTotal,context.parentContext=this,this.subContextCount++,context}transformIntoNewTimeline(newTime){return this.previousNode=DEFAULT_NOOP_PREVIOUS_NODE,this.currentTimeline=this.currentTimeline.fork(this.element,newTime),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(instruction,duration,delay){const updatedTimings={duration:null!=duration?duration:instruction.duration,delay:this.currentTimeline.currentTime+(null!=delay?delay:0)+instruction.delay,easing:""},builder=new SubTimelineBuilder(this._driver,instruction.element,instruction.keyframes,instruction.preStyleProps,instruction.postStyleProps,updatedTimings,instruction.stretchStartingKeyframe);return this.timelines.push(builder),updatedTimings}incrementTime(time){this.currentTimeline.forwardTime(this.currentTimeline.duration+time)}delayNextStep(delay){delay>0&&this.currentTimeline.delayNextStep(delay)}invokeQuery(selector,originalSelector,limit,includeSelf,optional,errors){let results=[];if(includeSelf&&results.push(this.element),selector.length>0){selector=(selector=selector.replace(ENTER_TOKEN_REGEX,"."+this._enterClassName)).replace(LEAVE_TOKEN_REGEX,"."+this._leaveClassName);let elements=this._driver.query(this.element,selector,1!=limit);0!==limit&&(elements=limit<0?elements.slice(elements.length+limit,elements.length):elements.slice(0,limit)),results.push(...elements)}return optional||0!=results.length||errors.push(`\`query("${originalSelector}")\` returned zero elements. (Use \`query("${originalSelector}", { optional: true })\` if you wish to allow this.)`),results}}class browser_TimelineBuilder{constructor(_driver,element,startTime,_elementTimelineStylesLookup){this._driver=_driver,this.element=element,this.startTime=startTime,this._elementTimelineStylesLookup=_elementTimelineStylesLookup,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(element),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(element,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(delay){const hasPreStyleStep=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||hasPreStyleStep?(this.forwardTime(this.currentTime+delay),hasPreStyleStep&&this.snapshotCurrentStyles()):this.startTime+=delay}fork(element,currentTime){return this.applyStylesToKeyframe(),new browser_TimelineBuilder(this._driver,element,currentTime||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(time){this.applyStylesToKeyframe(),this.duration=time,this._loadKeyframe()}_updateStyle(prop,value){this._localTimelineStyles[prop]=value,this._globalTimelineStyles[prop]=value,this._styleSummary[prop]={time:this.currentTime,value:value}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(easing){easing&&(this._previousKeyframe.easing=easing),Object.keys(this._globalTimelineStyles).forEach(prop=>{this._backFill[prop]=this._globalTimelineStyles[prop]||"*",this._currentKeyframe[prop]="*"}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(input,easing,errors,options){easing&&(this._previousKeyframe.easing=easing);const params=options&&options.params||{},styles=function(input,allStyles){const styles={};let allProperties;return input.forEach(token=>{"*"===token?(allProperties=allProperties||Object.keys(allStyles),allProperties.forEach(prop=>{styles[prop]="*"})):copyStyles(token,!1,styles)}),styles}(input,this._globalTimelineStyles);Object.keys(styles).forEach(prop=>{const val=interpolateParams(styles[prop],params,errors);this._pendingStyles[prop]=val,this._localTimelineStyles.hasOwnProperty(prop)||(this._backFill[prop]=this._globalTimelineStyles.hasOwnProperty(prop)?this._globalTimelineStyles[prop]:"*"),this._updateStyle(prop,val)})}applyStylesToKeyframe(){const styles=this._pendingStyles,props=Object.keys(styles);0!=props.length&&(this._pendingStyles={},props.forEach(prop=>{this._currentKeyframe[prop]=styles[prop]}),Object.keys(this._localTimelineStyles).forEach(prop=>{this._currentKeyframe.hasOwnProperty(prop)||(this._currentKeyframe[prop]=this._localTimelineStyles[prop])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(prop=>{const val=this._localTimelineStyles[prop];this._pendingStyles[prop]=val,this._updateStyle(prop,val)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const properties=[];for(let prop in this._currentKeyframe)properties.push(prop);return properties}mergeTimelineCollectedStyles(timeline){Object.keys(timeline._styleSummary).forEach(prop=>{const details0=this._styleSummary[prop],details1=timeline._styleSummary[prop];(!details0||details1.time>details0.time)&&this._updateStyle(prop,details1.value)})}buildKeyframes(){this.applyStylesToKeyframe();const preStyleProps=new Set,postStyleProps=new Set,isEmpty=1===this._keyframes.size&&0===this.duration;let finalKeyframes=[];this._keyframes.forEach((keyframe,time)=>{const finalKeyframe=copyStyles(keyframe,!0);Object.keys(finalKeyframe).forEach(prop=>{const value=finalKeyframe[prop];"!"==value?preStyleProps.add(prop):"*"==value&&postStyleProps.add(prop)}),isEmpty||(finalKeyframe.offset=time/this.duration),finalKeyframes.push(finalKeyframe)});const preProps=preStyleProps.size?iteratorToArray(preStyleProps.values()):[],postProps=postStyleProps.size?iteratorToArray(postStyleProps.values()):[];if(isEmpty){const kf0=finalKeyframes[0],kf1=copyObj(kf0);kf0.offset=0,kf1.offset=1,finalKeyframes=[kf0,kf1]}return createTimelineInstruction(this.element,finalKeyframes,preProps,postProps,this.duration,this.startTime,this.easing,!1)}}class SubTimelineBuilder extends browser_TimelineBuilder{constructor(driver,element,keyframes,preStyleProps,postStyleProps,timings,_stretchStartingKeyframe=!1){super(driver,element,timings.delay),this.element=element,this.keyframes=keyframes,this.preStyleProps=preStyleProps,this.postStyleProps=postStyleProps,this._stretchStartingKeyframe=_stretchStartingKeyframe,this.timings={duration:timings.duration,delay:timings.delay,easing:timings.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let keyframes=this.keyframes,{delay:delay,duration:duration,easing:easing}=this.timings;if(this._stretchStartingKeyframe&&delay){const newKeyframes=[],totalTime=duration+delay,startingGap=delay/totalTime,newFirstKeyframe=copyStyles(keyframes[0],!1);newFirstKeyframe.offset=0,newKeyframes.push(newFirstKeyframe);const oldFirstKeyframe=copyStyles(keyframes[0],!1);oldFirstKeyframe.offset=roundOffset(startingGap),newKeyframes.push(oldFirstKeyframe);const limit=keyframes.length-1;for(let i=1;i<=limit;i++){let kf=copyStyles(keyframes[i],!1);kf.offset=roundOffset((delay+kf.offset*duration)/totalTime),newKeyframes.push(kf)}duration=totalTime,delay=0,easing="",keyframes=newKeyframes}return createTimelineInstruction(this.element,keyframes,this.preStyleProps,this.postStyleProps,duration,delay,easing,!0)}}function roundOffset(offset,decimalPoints=3){const mult=Math.pow(10,decimalPoints-1);return Math.round(offset*mult)/mult}class AnimationStyleNormalizer{}class WebAnimationsStyleNormalizer extends AnimationStyleNormalizer{normalizePropertyName(propertyName,errors){return browser_dashCaseToCamelCase(propertyName)}normalizeStyleValue(userProvidedProperty,normalizedProperty,value,errors){let unit="";const strVal=value.toString().trim();if(DIMENSIONAL_PROP_MAP[normalizedProperty]&&0!==value&&"0"!==value)if("number"==typeof value)unit="px";else{const valAndSuffixMatch=value.match(/^[+-]?[\d\.]+([a-z]*)$/);valAndSuffixMatch&&0==valAndSuffixMatch[1].length&&errors.push(`Please provide a CSS unit value for ${userProvidedProperty}:${value}`)}return strVal+unit}}const DIMENSIONAL_PROP_MAP=(()=>function(keys){const map={};return keys.forEach(key=>map[key]=!0),map}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function createTransitionInstruction(element,triggerName,fromState,toState,isRemovalTransition,fromStyles,toStyles,timelines,queriedElements,preStyleProps,postStyleProps,totalTime,errors){return{type:0,element:element,triggerName:triggerName,isRemovalTransition:isRemovalTransition,fromState:fromState,fromStyles:fromStyles,toState:toState,toStyles:toStyles,timelines:timelines,queriedElements:queriedElements,preStyleProps:preStyleProps,postStyleProps:postStyleProps,totalTime:totalTime,errors:errors}}const browser_EMPTY_OBJECT={};class AnimationTransitionFactory{constructor(_triggerName,ast,_stateStyles){this._triggerName=_triggerName,this.ast=ast,this._stateStyles=_stateStyles}match(currentState,nextState,element,params){return function(matchFns,currentState,nextState,element,params){return matchFns.some(fn=>fn(currentState,nextState,element,params))}(this.ast.matchers,currentState,nextState,element,params)}buildStyles(stateName,params,errors){const backupStateStyler=this._stateStyles["*"],stateStyler=this._stateStyles[stateName],backupStyles=backupStateStyler?backupStateStyler.buildStyles(params,errors):{};return stateStyler?stateStyler.buildStyles(params,errors):backupStyles}build(driver,element,currentState,nextState,enterClassName,leaveClassName,currentOptions,nextOptions,subInstructions,skipAstBuild){const errors=[],transitionAnimationParams=this.ast.options&&this.ast.options.params||browser_EMPTY_OBJECT,currentStateStyles=this.buildStyles(currentState,currentOptions&&currentOptions.params||browser_EMPTY_OBJECT,errors),nextAnimationParams=nextOptions&&nextOptions.params||browser_EMPTY_OBJECT,nextStateStyles=this.buildStyles(nextState,nextAnimationParams,errors),queriedElements=new Set,preStyleMap=new Map,postStyleMap=new Map,isRemoval="void"===nextState,animationOptions={params:Object.assign(Object.assign({},transitionAnimationParams),nextAnimationParams)},timelines=skipAstBuild?[]:buildAnimationTimelines(driver,element,this.ast.animation,enterClassName,leaveClassName,currentStateStyles,nextStateStyles,animationOptions,subInstructions,errors);let totalTime=0;if(timelines.forEach(tl=>{totalTime=Math.max(tl.duration+tl.delay,totalTime)}),errors.length)return createTransitionInstruction(element,this._triggerName,currentState,nextState,isRemoval,currentStateStyles,nextStateStyles,[],[],preStyleMap,postStyleMap,totalTime,errors);timelines.forEach(tl=>{const elm=tl.element,preProps=getOrSetAsInMap(preStyleMap,elm,{});tl.preStyleProps.forEach(prop=>preProps[prop]=!0);const postProps=getOrSetAsInMap(postStyleMap,elm,{});tl.postStyleProps.forEach(prop=>postProps[prop]=!0),elm!==element&&queriedElements.add(elm)});const queriedElementsList=iteratorToArray(queriedElements.values());return createTransitionInstruction(element,this._triggerName,currentState,nextState,isRemoval,currentStateStyles,nextStateStyles,timelines,queriedElementsList,preStyleMap,postStyleMap,totalTime)}}class AnimationStateStyles{constructor(styles,defaultParams){this.styles=styles,this.defaultParams=defaultParams}buildStyles(params,errors){const finalStyles={},combinedParams=copyObj(this.defaultParams);return Object.keys(params).forEach(key=>{const value=params[key];null!=value&&(combinedParams[key]=value)}),this.styles.styles.forEach(value=>{if("string"!=typeof value){const styleObj=value;Object.keys(styleObj).forEach(prop=>{let val=styleObj[prop];val.length>1&&(val=interpolateParams(val,combinedParams,errors)),finalStyles[prop]=val})}}),finalStyles}}class AnimationTrigger{constructor(name,ast){this.name=name,this.ast=ast,this.transitionFactories=[],this.states={},ast.states.forEach(ast=>{this.states[ast.name]=new AnimationStateStyles(ast.style,ast.options&&ast.options.params||{})}),balanceProperties(this.states,"true","1"),balanceProperties(this.states,"false","0"),ast.transitions.forEach(ast=>{this.transitionFactories.push(new AnimationTransitionFactory(name,ast,this.states))}),this.fallbackTransition=new AnimationTransitionFactory(name,{type:1,animation:{type:2,steps:[],options:null},matchers:[(fromState,toState)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(currentState,nextState,element,params){return this.transitionFactories.find(f=>f.match(currentState,nextState,element,params))||null}matchStyles(currentState,params,errors){return this.fallbackTransition.buildStyles(currentState,params,errors)}}function balanceProperties(obj,key1,key2){obj.hasOwnProperty(key1)?obj.hasOwnProperty(key2)||(obj[key2]=obj[key1]):obj.hasOwnProperty(key2)&&(obj[key1]=obj[key2])}const EMPTY_INSTRUCTION_MAP=new ElementInstructionMap;class browser_TimelineAnimationEngine{constructor(bodyNode,_driver,_normalizer){this.bodyNode=bodyNode,this._driver=_driver,this._normalizer=_normalizer,this._animations={},this._playersById={},this.players=[]}register(id,metadata){const errors=[],ast=buildAnimationAst(this._driver,metadata,errors);if(errors.length)throw new Error("Unable to build the animation due to the following errors: "+errors.join("\n"));this._animations[id]=ast}_buildPlayer(i,preStyles,postStyles){const element=i.element,keyframes=normalizeKeyframes(0,this._normalizer,0,i.keyframes,preStyles,postStyles);return this._driver.animate(element,keyframes,i.duration,i.delay,i.easing,[],!0)}create(id,element,options={}){const errors=[],ast=this._animations[id];let instructions;const autoStylesMap=new Map;if(ast?(instructions=buildAnimationTimelines(this._driver,element,ast,"ng-enter","ng-leave",{},{},options,EMPTY_INSTRUCTION_MAP,errors),instructions.forEach(inst=>{const styles=getOrSetAsInMap(autoStylesMap,inst.element,{});inst.postStyleProps.forEach(prop=>styles[prop]=null)})):(errors.push("The requested animation doesn't exist or has already been destroyed"),instructions=[]),errors.length)throw new Error("Unable to create the animation due to the following errors: "+errors.join("\n"));autoStylesMap.forEach((styles,element)=>{Object.keys(styles).forEach(prop=>{styles[prop]=this._driver.computeStyle(element,prop,"*")})});const player=optimizeGroupPlayer(instructions.map(i=>{const styles=autoStylesMap.get(i.element);return this._buildPlayer(i,{},styles)}));return this._playersById[id]=player,player.onDestroy(()=>this.destroy(id)),this.players.push(player),player}destroy(id){const player=this._getPlayer(id);player.destroy(),delete this._playersById[id];const index=this.players.indexOf(player);index>=0&&this.players.splice(index,1)}_getPlayer(id){const player=this._playersById[id];if(!player)throw new Error("Unable to find the timeline player referenced by "+id);return player}listen(id,element,eventName,callback){const baseEvent=makeAnimationEvent(element,"","","");return listenOnPlayer(this._getPlayer(id),eventName,baseEvent,callback),()=>{}}command(id,element,command,args){if("register"==command)return void this.register(id,args[0]);if("create"==command)return void this.create(id,element,args[0]||{});const player=this._getPlayer(id);switch(command){case"play":player.play();break;case"pause":player.pause();break;case"reset":player.reset();break;case"restart":player.restart();break;case"finish":player.finish();break;case"init":player.init();break;case"setPosition":player.setPosition(parseFloat(args[0]));break;case"destroy":this.destroy(id)}}}const EMPTY_PLAYER_ARRAY=[],NULL_REMOVAL_STATE={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},NULL_REMOVED_QUERIED_STATE={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class StateValue{constructor(input,namespaceId=""){this.namespaceId=namespaceId;const isObj=input&&input.hasOwnProperty("value");if(this.value=null!=(value=isObj?input.value:input)?value:null,isObj){const options=copyObj(input);delete options.value,this.options=options}else this.options={};var value;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(options){const newParams=options.params;if(newParams){const oldParams=this.options.params;Object.keys(newParams).forEach(prop=>{null==oldParams[prop]&&(oldParams[prop]=newParams[prop])})}}}const DEFAULT_STATE_VALUE=new StateValue("void");class AnimationTransitionNamespace{constructor(id,hostElement,_engine){this.id=id,this.hostElement=hostElement,this._engine=_engine,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+id,browser_addClass(hostElement,this._hostClassName)}listen(element,name,phase,callback){if(!this._triggers.hasOwnProperty(name))throw new Error(`Unable to listen on the animation trigger event "${phase}" because the animation trigger "${name}" doesn't exist!`);if(null==phase||0==phase.length)throw new Error(`Unable to listen on the animation trigger "${name}" because the provided event is undefined!`);if("start"!=(eventName=phase)&&"done"!=eventName)throw new Error(`The provided animation trigger event "${phase}" for the animation trigger "${name}" is not supported!`);var eventName;const listeners=getOrSetAsInMap(this._elementListeners,element,[]),data={name:name,phase:phase,callback:callback};listeners.push(data);const triggersWithStates=getOrSetAsInMap(this._engine.statesByElement,element,{});return triggersWithStates.hasOwnProperty(name)||(browser_addClass(element,"ng-trigger"),browser_addClass(element,"ng-trigger-"+name),triggersWithStates[name]=DEFAULT_STATE_VALUE),()=>{this._engine.afterFlush(()=>{const index=listeners.indexOf(data);index>=0&&listeners.splice(index,1),this._triggers[name]||delete triggersWithStates[name]})}}register(name,ast){return!this._triggers[name]&&(this._triggers[name]=ast,!0)}_getTrigger(name){const trigger=this._triggers[name];if(!trigger)throw new Error(`The provided animation trigger "${name}" has not been registered!`);return trigger}trigger(element,triggerName,value,defaultToFallback=!0){const trigger=this._getTrigger(triggerName),player=new browser_TransitionAnimationPlayer(this.id,triggerName,element);let triggersWithStates=this._engine.statesByElement.get(element);triggersWithStates||(browser_addClass(element,"ng-trigger"),browser_addClass(element,"ng-trigger-"+triggerName),this._engine.statesByElement.set(element,triggersWithStates={}));let fromState=triggersWithStates[triggerName];const toState=new StateValue(value,this.id);if(!(value&&value.hasOwnProperty("value"))&&fromState&&toState.absorbOptions(fromState.options),triggersWithStates[triggerName]=toState,fromState||(fromState=DEFAULT_STATE_VALUE),"void"!==toState.value&&fromState.value===toState.value){if(!function(a,b){const k1=Object.keys(a),k2=Object.keys(b);if(k1.length!=k2.length)return!1;for(let i=0;i<k1.length;i++){const prop=k1[i];if(!b.hasOwnProperty(prop)||a[prop]!==b[prop])return!1}return!0}(fromState.params,toState.params)){const errors=[],fromStyles=trigger.matchStyles(fromState.value,fromState.params,errors),toStyles=trigger.matchStyles(toState.value,toState.params,errors);errors.length?this._engine.reportError(errors):this._engine.afterFlush(()=>{eraseStyles(element,fromStyles),setStyles(element,toStyles)})}return}const playersOnElement=getOrSetAsInMap(this._engine.playersByElement,element,[]);playersOnElement.forEach(player=>{player.namespaceId==this.id&&player.triggerName==triggerName&&player.queued&&player.destroy()});let transition=trigger.matchTransition(fromState.value,toState.value,element,toState.params),isFallbackTransition=!1;if(!transition){if(!defaultToFallback)return;transition=trigger.fallbackTransition,isFallbackTransition=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:element,triggerName:triggerName,transition:transition,fromState:fromState,toState:toState,player:player,isFallbackTransition:isFallbackTransition}),isFallbackTransition||(browser_addClass(element,"ng-animate-queued"),player.onStart(()=>{browser_removeClass(element,"ng-animate-queued")})),player.onDone(()=>{let index=this.players.indexOf(player);index>=0&&this.players.splice(index,1);const players=this._engine.playersByElement.get(element);if(players){let index=players.indexOf(player);index>=0&&players.splice(index,1)}}),this.players.push(player),playersOnElement.push(player),player}deregister(name){delete this._triggers[name],this._engine.statesByElement.forEach((stateMap,element)=>{delete stateMap[name]}),this._elementListeners.forEach((listeners,element)=>{this._elementListeners.set(element,listeners.filter(entry=>entry.name!=name))})}clearElementCache(element){this._engine.statesByElement.delete(element),this._elementListeners.delete(element);const elementPlayers=this._engine.playersByElement.get(element);elementPlayers&&(elementPlayers.forEach(player=>player.destroy()),this._engine.playersByElement.delete(element))}_signalRemovalForInnerTriggers(rootElement,context){const elements=this._engine.driver.query(rootElement,".ng-trigger",!0);elements.forEach(elm=>{if(elm.__ng_removed)return;const namespaces=this._engine.fetchNamespacesByElement(elm);namespaces.size?namespaces.forEach(ns=>ns.triggerLeaveAnimation(elm,context,!1,!0)):this.clearElementCache(elm)}),this._engine.afterFlushAnimationsDone(()=>elements.forEach(elm=>this.clearElementCache(elm)))}triggerLeaveAnimation(element,context,destroyAfterComplete,defaultToFallback){const triggerStates=this._engine.statesByElement.get(element);if(triggerStates){const players=[];if(Object.keys(triggerStates).forEach(triggerName=>{if(this._triggers[triggerName]){const player=this.trigger(element,triggerName,"void",defaultToFallback);player&&players.push(player)}}),players.length)return this._engine.markElementAsRemoved(this.id,element,!0,context),destroyAfterComplete&&optimizeGroupPlayer(players).onDone(()=>this._engine.processLeaveNode(element)),!0}return!1}prepareLeaveAnimationListeners(element){const listeners=this._elementListeners.get(element);if(listeners){const visitedTriggers=new Set;listeners.forEach(listener=>{const triggerName=listener.name;if(visitedTriggers.has(triggerName))return;visitedTriggers.add(triggerName);const transition=this._triggers[triggerName].fallbackTransition,fromState=this._engine.statesByElement.get(element)[triggerName]||DEFAULT_STATE_VALUE,toState=new StateValue("void"),player=new browser_TransitionAnimationPlayer(this.id,triggerName,element);this._engine.totalQueuedPlayers++,this._queue.push({element:element,triggerName:triggerName,transition:transition,fromState:fromState,toState:toState,player:player,isFallbackTransition:!0})})}}removeNode(element,context){const engine=this._engine;if(element.childElementCount&&this._signalRemovalForInnerTriggers(element,context),this.triggerLeaveAnimation(element,context,!0))return;let containsPotentialParentTransition=!1;if(engine.totalAnimations){const currentPlayers=engine.players.length?engine.playersByQueriedElement.get(element):[];if(currentPlayers&&currentPlayers.length)containsPotentialParentTransition=!0;else{let parent=element;for(;parent=parent.parentNode;)if(engine.statesByElement.get(parent)){containsPotentialParentTransition=!0;break}}}if(this.prepareLeaveAnimationListeners(element),containsPotentialParentTransition)engine.markElementAsRemoved(this.id,element,!1,context);else{const removalFlag=element.__ng_removed;removalFlag&&removalFlag!==NULL_REMOVAL_STATE||(engine.afterFlush(()=>this.clearElementCache(element)),engine.destroyInnerAnimations(element),engine._onRemovalComplete(element,context))}}insertNode(element,parent){browser_addClass(element,this._hostClassName)}drainQueuedTransitions(microtaskId){const instructions=[];return this._queue.forEach(entry=>{const player=entry.player;if(player.destroyed)return;const element=entry.element,listeners=this._elementListeners.get(element);listeners&&listeners.forEach(listener=>{if(listener.name==entry.triggerName){const baseEvent=makeAnimationEvent(element,entry.triggerName,entry.fromState.value,entry.toState.value);baseEvent._data=microtaskId,listenOnPlayer(entry.player,listener.phase,baseEvent,listener.callback)}}),player.markedForDestroy?this._engine.afterFlush(()=>{player.destroy()}):instructions.push(entry)}),this._queue=[],instructions.sort((a,b)=>{const d0=a.transition.ast.depCount,d1=b.transition.ast.depCount;return 0==d0||0==d1?d0-d1:this._engine.driver.containsElement(a.element,b.element)?1:-1})}destroy(context){this.players.forEach(p=>p.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,context)}elementContainsData(element){let containsData=!1;return this._elementListeners.has(element)&&(containsData=!0),containsData=!!this._queue.find(entry=>entry.element===element)||containsData,containsData}}class browser_TransitionAnimationEngine{constructor(bodyNode,driver,_normalizer){this.bodyNode=bodyNode,this.driver=driver,this._normalizer=_normalizer,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(element,context)=>{}}_onRemovalComplete(element,context){this.onRemovalComplete(element,context)}get queuedPlayers(){const players=[];return this._namespaceList.forEach(ns=>{ns.players.forEach(player=>{player.queued&&players.push(player)})}),players}createNamespace(namespaceId,hostElement){const ns=new AnimationTransitionNamespace(namespaceId,hostElement,this);return hostElement.parentNode?this._balanceNamespaceList(ns,hostElement):(this.newHostElements.set(hostElement,ns),this.collectEnterElement(hostElement)),this._namespaceLookup[namespaceId]=ns}_balanceNamespaceList(ns,hostElement){const limit=this._namespaceList.length-1;if(limit>=0){let found=!1;for(let i=limit;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,hostElement)){this._namespaceList.splice(i+1,0,ns),found=!0;break}found||this._namespaceList.splice(0,0,ns)}else this._namespaceList.push(ns);return this.namespacesByHostElement.set(hostElement,ns),ns}register(namespaceId,hostElement){let ns=this._namespaceLookup[namespaceId];return ns||(ns=this.createNamespace(namespaceId,hostElement)),ns}registerTrigger(namespaceId,name,trigger){let ns=this._namespaceLookup[namespaceId];ns&&ns.register(name,trigger)&&this.totalAnimations++}destroy(namespaceId,context){if(!namespaceId)return;const ns=this._fetchNamespace(namespaceId);this.afterFlush(()=>{this.namespacesByHostElement.delete(ns.hostElement),delete this._namespaceLookup[namespaceId];const index=this._namespaceList.indexOf(ns);index>=0&&this._namespaceList.splice(index,1)}),this.afterFlushAnimationsDone(()=>ns.destroy(context))}_fetchNamespace(id){return this._namespaceLookup[id]}fetchNamespacesByElement(element){const namespaces=new Set,elementStates=this.statesByElement.get(element);if(elementStates){const keys=Object.keys(elementStates);for(let i=0;i<keys.length;i++){const nsId=elementStates[keys[i]].namespaceId;if(nsId){const ns=this._fetchNamespace(nsId);ns&&namespaces.add(ns)}}}return namespaces}trigger(namespaceId,element,name,value){if(isElementNode(element)){const ns=this._fetchNamespace(namespaceId);if(ns)return ns.trigger(element,name,value),!0}return!1}insertNode(namespaceId,element,parent,insertBefore){if(!isElementNode(element))return;const details=element.__ng_removed;if(details&&details.setForRemoval){details.setForRemoval=!1,details.setForMove=!0;const index=this.collectedLeaveElements.indexOf(element);index>=0&&this.collectedLeaveElements.splice(index,1)}if(namespaceId){const ns=this._fetchNamespace(namespaceId);ns&&ns.insertNode(element,parent)}insertBefore&&this.collectEnterElement(element)}collectEnterElement(element){this.collectedEnterElements.push(element)}markElementAsDisabled(element,value){value?this.disabledNodes.has(element)||(this.disabledNodes.add(element),browser_addClass(element,"ng-animate-disabled")):this.disabledNodes.has(element)&&(this.disabledNodes.delete(element),browser_removeClass(element,"ng-animate-disabled"))}removeNode(namespaceId,element,isHostElement,context){if(isElementNode(element)){const ns=namespaceId?this._fetchNamespace(namespaceId):null;if(ns?ns.removeNode(element,context):this.markElementAsRemoved(namespaceId,element,!1,context),isHostElement){const hostNS=this.namespacesByHostElement.get(element);hostNS&&hostNS.id!==namespaceId&&hostNS.removeNode(element,context)}}else this._onRemovalComplete(element,context)}markElementAsRemoved(namespaceId,element,hasAnimation,context){this.collectedLeaveElements.push(element),element.__ng_removed={namespaceId:namespaceId,setForRemoval:context,hasAnimation:hasAnimation,removedBeforeQueried:!1}}listen(namespaceId,element,name,phase,callback){return isElementNode(element)?this._fetchNamespace(namespaceId).listen(element,name,phase,callback):()=>{}}_buildInstruction(entry,subTimelines,enterClassName,leaveClassName,skipBuildAst){return entry.transition.build(this.driver,entry.element,entry.fromState.value,entry.toState.value,enterClassName,leaveClassName,entry.fromState.options,entry.toState.options,subTimelines,skipBuildAst)}destroyInnerAnimations(containerElement){let elements=this.driver.query(containerElement,".ng-trigger",!0);elements.forEach(element=>this.destroyActiveAnimationsForElement(element)),0!=this.playersByQueriedElement.size&&(elements=this.driver.query(containerElement,".ng-animating",!0),elements.forEach(element=>this.finishActiveQueriedAnimationOnElement(element)))}destroyActiveAnimationsForElement(element){const players=this.playersByElement.get(element);players&&players.forEach(player=>{player.queued?player.markedForDestroy=!0:player.destroy()})}finishActiveQueriedAnimationOnElement(element){const players=this.playersByQueriedElement.get(element);players&&players.forEach(player=>player.finish())}whenRenderingDone(){return new Promise(resolve=>{if(this.players.length)return optimizeGroupPlayer(this.players).onDone(()=>resolve());resolve()})}processLeaveNode(element){const details=element.__ng_removed;if(details&&details.setForRemoval){if(element.__ng_removed=NULL_REMOVAL_STATE,details.namespaceId){this.destroyInnerAnimations(element);const ns=this._fetchNamespace(details.namespaceId);ns&&ns.clearElementCache(element)}this._onRemovalComplete(element,details.setForRemoval)}this.driver.matchesElement(element,".ng-animate-disabled")&&this.markElementAsDisabled(element,!1),this.driver.query(element,".ng-animate-disabled",!0).forEach(node=>{this.markElementAsDisabled(node,!1)})}flush(microtaskId=-1){let players=[];if(this.newHostElements.size&&(this.newHostElements.forEach((ns,element)=>this._balanceNamespaceList(ns,element)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)browser_addClass(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const cleanupFns=[];try{players=this._flushAnimations(cleanupFns,microtaskId)}finally{for(let i=0;i<cleanupFns.length;i++)cleanupFns[i]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(fn=>fn()),this._flushFns=[],this._whenQuietFns.length){const quietFns=this._whenQuietFns;this._whenQuietFns=[],players.length?optimizeGroupPlayer(players).onDone(()=>{quietFns.forEach(fn=>fn())}):quietFns.forEach(fn=>fn())}}reportError(errors){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+errors.join("\n"))}_flushAnimations(cleanupFns,microtaskId){const subTimelines=new ElementInstructionMap,skippedPlayers=[],skippedPlayersMap=new Map,queuedInstructions=[],queriedElements=new Map,allPreStyleElements=new Map,allPostStyleElements=new Map,disabledElementsSet=new Set;this.disabledNodes.forEach(node=>{disabledElementsSet.add(node);const nodesThatAreDisabled=this.driver.query(node,".ng-animate-queued",!0);for(let i=0;i<nodesThatAreDisabled.length;i++)disabledElementsSet.add(nodesThatAreDisabled[i])});const bodyNode=this.bodyNode,allTriggerElements=Array.from(this.statesByElement.keys()),enterNodeMap=buildRootMap(allTriggerElements,this.collectedEnterElements),enterNodeMapIds=new Map;let i=0;enterNodeMap.forEach((nodes,root)=>{const className="ng-enter"+i++;enterNodeMapIds.set(root,className),nodes.forEach(node=>browser_addClass(node,className))});const allLeaveNodes=[],mergedLeaveNodes=new Set,leaveNodesWithoutAnimations=new Set;for(let i=0;i<this.collectedLeaveElements.length;i++){const element=this.collectedLeaveElements[i],details=element.__ng_removed;details&&details.setForRemoval&&(allLeaveNodes.push(element),mergedLeaveNodes.add(element),details.hasAnimation?this.driver.query(element,".ng-star-inserted",!0).forEach(elm=>mergedLeaveNodes.add(elm)):leaveNodesWithoutAnimations.add(element))}const leaveNodeMapIds=new Map,leaveNodeMap=buildRootMap(allTriggerElements,Array.from(mergedLeaveNodes));leaveNodeMap.forEach((nodes,root)=>{const className="ng-leave"+i++;leaveNodeMapIds.set(root,className),nodes.forEach(node=>browser_addClass(node,className))}),cleanupFns.push(()=>{enterNodeMap.forEach((nodes,root)=>{const className=enterNodeMapIds.get(root);nodes.forEach(node=>browser_removeClass(node,className))}),leaveNodeMap.forEach((nodes,root)=>{const className=leaveNodeMapIds.get(root);nodes.forEach(node=>browser_removeClass(node,className))}),allLeaveNodes.forEach(element=>{this.processLeaveNode(element)})});const allPlayers=[],erroneousTransitions=[];for(let i=this._namespaceList.length-1;i>=0;i--)this._namespaceList[i].drainQueuedTransitions(microtaskId).forEach(entry=>{const player=entry.player,element=entry.element;if(allPlayers.push(player),this.collectedEnterElements.length){const details=element.__ng_removed;if(details&&details.setForMove)return void player.destroy()}const nodeIsOrphaned=!bodyNode||!this.driver.containsElement(bodyNode,element),leaveClassName=leaveNodeMapIds.get(element),enterClassName=enterNodeMapIds.get(element),instruction=this._buildInstruction(entry,subTimelines,enterClassName,leaveClassName,nodeIsOrphaned);if(instruction.errors&&instruction.errors.length)erroneousTransitions.push(instruction);else{if(nodeIsOrphaned)return player.onStart(()=>eraseStyles(element,instruction.fromStyles)),player.onDestroy(()=>setStyles(element,instruction.toStyles)),void skippedPlayers.push(player);if(entry.isFallbackTransition)return player.onStart(()=>eraseStyles(element,instruction.fromStyles)),player.onDestroy(()=>setStyles(element,instruction.toStyles)),void skippedPlayers.push(player);instruction.timelines.forEach(tl=>tl.stretchStartingKeyframe=!0),subTimelines.append(element,instruction.timelines),queuedInstructions.push({instruction:instruction,player:player,element:element}),instruction.queriedElements.forEach(element=>getOrSetAsInMap(queriedElements,element,[]).push(player)),instruction.preStyleProps.forEach((stringMap,element)=>{const props=Object.keys(stringMap);if(props.length){let setVal=allPreStyleElements.get(element);setVal||allPreStyleElements.set(element,setVal=new Set),props.forEach(prop=>setVal.add(prop))}}),instruction.postStyleProps.forEach((stringMap,element)=>{const props=Object.keys(stringMap);let setVal=allPostStyleElements.get(element);setVal||allPostStyleElements.set(element,setVal=new Set),props.forEach(prop=>setVal.add(prop))})}});if(erroneousTransitions.length){const errors=[];erroneousTransitions.forEach(instruction=>{errors.push(`@${instruction.triggerName} has failed due to:\n`),instruction.errors.forEach(error=>errors.push(`- ${error}\n`))}),allPlayers.forEach(player=>player.destroy()),this.reportError(errors)}const allPreviousPlayersMap=new Map,animationElementMap=new Map;queuedInstructions.forEach(entry=>{const element=entry.element;subTimelines.has(element)&&(animationElementMap.set(element,element),this._beforeAnimationBuild(entry.player.namespaceId,entry.instruction,allPreviousPlayersMap))}),skippedPlayers.forEach(player=>{const element=player.element;this._getPreviousPlayers(element,!1,player.namespaceId,player.triggerName,null).forEach(prevPlayer=>{getOrSetAsInMap(allPreviousPlayersMap,element,[]).push(prevPlayer),prevPlayer.destroy()})});const replaceNodes=allLeaveNodes.filter(node=>replacePostStylesAsPre(node,allPreStyleElements,allPostStyleElements)),postStylesMap=new Map;cloakAndComputeStyles(postStylesMap,this.driver,leaveNodesWithoutAnimations,allPostStyleElements,"*").forEach(node=>{replacePostStylesAsPre(node,allPreStyleElements,allPostStyleElements)&&replaceNodes.push(node)});const preStylesMap=new Map;enterNodeMap.forEach((nodes,root)=>{cloakAndComputeStyles(preStylesMap,this.driver,new Set(nodes),allPreStyleElements,"!")}),replaceNodes.forEach(node=>{const post=postStylesMap.get(node),pre=preStylesMap.get(node);postStylesMap.set(node,Object.assign(Object.assign({},post),pre))});const rootPlayers=[],subPlayers=[],NO_PARENT_ANIMATION_ELEMENT_DETECTED={};queuedInstructions.forEach(entry=>{const{element:element,player:player,instruction:instruction}=entry;if(subTimelines.has(element)){if(disabledElementsSet.has(element))return player.onDestroy(()=>setStyles(element,instruction.toStyles)),player.disabled=!0,player.overrideTotalTime(instruction.totalTime),void skippedPlayers.push(player);let parentWithAnimation=NO_PARENT_ANIMATION_ELEMENT_DETECTED;if(animationElementMap.size>1){let elm=element;const parentsToAdd=[];for(;elm=elm.parentNode;){const detectedParent=animationElementMap.get(elm);if(detectedParent){parentWithAnimation=detectedParent;break}parentsToAdd.push(elm)}parentsToAdd.forEach(parent=>animationElementMap.set(parent,parentWithAnimation))}const innerPlayer=this._buildAnimation(player.namespaceId,instruction,allPreviousPlayersMap,skippedPlayersMap,preStylesMap,postStylesMap);if(player.setRealPlayer(innerPlayer),parentWithAnimation===NO_PARENT_ANIMATION_ELEMENT_DETECTED)rootPlayers.push(player);else{const parentPlayers=this.playersByElement.get(parentWithAnimation);parentPlayers&&parentPlayers.length&&(player.parentPlayer=optimizeGroupPlayer(parentPlayers)),skippedPlayers.push(player)}}else eraseStyles(element,instruction.fromStyles),player.onDestroy(()=>setStyles(element,instruction.toStyles)),subPlayers.push(player),disabledElementsSet.has(element)&&skippedPlayers.push(player)}),subPlayers.forEach(player=>{const playersForElement=skippedPlayersMap.get(player.element);if(playersForElement&&playersForElement.length){const innerPlayer=optimizeGroupPlayer(playersForElement);player.setRealPlayer(innerPlayer)}}),skippedPlayers.forEach(player=>{player.parentPlayer?player.syncPlayerEvents(player.parentPlayer):player.destroy()});for(let i=0;i<allLeaveNodes.length;i++){const element=allLeaveNodes[i],details=element.__ng_removed;if(browser_removeClass(element,"ng-leave"),details&&details.hasAnimation)continue;let players=[];if(queriedElements.size){let queriedPlayerResults=queriedElements.get(element);queriedPlayerResults&&queriedPlayerResults.length&&players.push(...queriedPlayerResults);let queriedInnerElements=this.driver.query(element,".ng-animating",!0);for(let j=0;j<queriedInnerElements.length;j++){let queriedPlayers=queriedElements.get(queriedInnerElements[j]);queriedPlayers&&queriedPlayers.length&&players.push(...queriedPlayers)}}const activePlayers=players.filter(p=>!p.destroyed);activePlayers.length?removeNodesAfterAnimationDone(this,element,activePlayers):this.processLeaveNode(element)}return allLeaveNodes.length=0,rootPlayers.forEach(player=>{this.players.push(player),player.onDone(()=>{player.destroy();const index=this.players.indexOf(player);this.players.splice(index,1)}),player.play()}),rootPlayers}elementContainsData(namespaceId,element){let containsData=!1;const details=element.__ng_removed;return details&&details.setForRemoval&&(containsData=!0),this.playersByElement.has(element)&&(containsData=!0),this.playersByQueriedElement.has(element)&&(containsData=!0),this.statesByElement.has(element)&&(containsData=!0),this._fetchNamespace(namespaceId).elementContainsData(element)||containsData}afterFlush(callback){this._flushFns.push(callback)}afterFlushAnimationsDone(callback){this._whenQuietFns.push(callback)}_getPreviousPlayers(element,isQueriedElement,namespaceId,triggerName,toStateValue){let players=[];if(isQueriedElement){const queriedElementPlayers=this.playersByQueriedElement.get(element);queriedElementPlayers&&(players=queriedElementPlayers)}else{const elementPlayers=this.playersByElement.get(element);if(elementPlayers){const isRemovalAnimation=!toStateValue||"void"==toStateValue;elementPlayers.forEach(player=>{player.queued||(isRemovalAnimation||player.triggerName==triggerName)&&players.push(player)})}}return(namespaceId||triggerName)&&(players=players.filter(player=>!(namespaceId&&namespaceId!=player.namespaceId||triggerName&&triggerName!=player.triggerName))),players}_beforeAnimationBuild(namespaceId,instruction,allPreviousPlayersMap){const rootElement=instruction.element,targetNameSpaceId=instruction.isRemovalTransition?void 0:namespaceId,targetTriggerName=instruction.isRemovalTransition?void 0:instruction.triggerName;for(const timelineInstruction of instruction.timelines){const element=timelineInstruction.element,isQueriedElement=element!==rootElement,players=getOrSetAsInMap(allPreviousPlayersMap,element,[]);this._getPreviousPlayers(element,isQueriedElement,targetNameSpaceId,targetTriggerName,instruction.toState).forEach(player=>{const realPlayer=player.getRealPlayer();realPlayer.beforeDestroy&&realPlayer.beforeDestroy(),player.destroy(),players.push(player)})}eraseStyles(rootElement,instruction.fromStyles)}_buildAnimation(namespaceId,instruction,allPreviousPlayersMap,skippedPlayersMap,preStylesMap,postStylesMap){const triggerName=instruction.triggerName,rootElement=instruction.element,allQueriedPlayers=[],allConsumedElements=new Set,allSubElements=new Set,allNewPlayers=instruction.timelines.map(timelineInstruction=>{const element=timelineInstruction.element;allConsumedElements.add(element);const details=element.__ng_removed;if(details&&details.removedBeforeQueried)return new NoopAnimationPlayer(timelineInstruction.duration,timelineInstruction.delay);const isQueriedElement=element!==rootElement,previousPlayers=function(players){const finalPlayers=[];return function _flattenGroupPlayersRecur(players,finalPlayers){for(let i=0;i<players.length;i++){const player=players[i];player instanceof AnimationGroupPlayer?_flattenGroupPlayersRecur(player.players,finalPlayers):finalPlayers.push(player)}}(players,finalPlayers),finalPlayers}((allPreviousPlayersMap.get(element)||EMPTY_PLAYER_ARRAY).map(p=>p.getRealPlayer())).filter(p=>!!p.element&&p.element===element),preStyles=preStylesMap.get(element),postStyles=postStylesMap.get(element),keyframes=normalizeKeyframes(0,this._normalizer,0,timelineInstruction.keyframes,preStyles,postStyles),player=this._buildPlayer(timelineInstruction,keyframes,previousPlayers);if(timelineInstruction.subTimeline&&skippedPlayersMap&&allSubElements.add(element),isQueriedElement){const wrappedPlayer=new browser_TransitionAnimationPlayer(namespaceId,triggerName,element);wrappedPlayer.setRealPlayer(player),allQueriedPlayers.push(wrappedPlayer)}return player});allQueriedPlayers.forEach(player=>{getOrSetAsInMap(this.playersByQueriedElement,player.element,[]).push(player),player.onDone(()=>function(map,key,value){let currentValues;if(map instanceof Map){if(currentValues=map.get(key),currentValues){if(currentValues.length){const index=currentValues.indexOf(value);currentValues.splice(index,1)}0==currentValues.length&&map.delete(key)}}else if(currentValues=map[key],currentValues){if(currentValues.length){const index=currentValues.indexOf(value);currentValues.splice(index,1)}0==currentValues.length&&delete map[key]}return currentValues}(this.playersByQueriedElement,player.element,player))}),allConsumedElements.forEach(element=>browser_addClass(element,"ng-animating"));const player=optimizeGroupPlayer(allNewPlayers);return player.onDestroy(()=>{allConsumedElements.forEach(element=>browser_removeClass(element,"ng-animating")),setStyles(rootElement,instruction.toStyles)}),allSubElements.forEach(element=>{getOrSetAsInMap(skippedPlayersMap,element,[]).push(player)}),player}_buildPlayer(instruction,keyframes,previousPlayers){return keyframes.length>0?this.driver.animate(instruction.element,keyframes,instruction.duration,instruction.delay,instruction.easing,previousPlayers):new NoopAnimationPlayer(instruction.duration,instruction.delay)}}class browser_TransitionAnimationPlayer{constructor(namespaceId,triggerName,element){this.namespaceId=namespaceId,this.triggerName=triggerName,this.element=element,this._player=new NoopAnimationPlayer,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(player){this._containsRealPlayer||(this._player=player,Object.keys(this._queuedCallbacks).forEach(phase=>{this._queuedCallbacks[phase].forEach(callback=>listenOnPlayer(player,phase,void 0,callback))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(player.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(totalTime){this.totalTime=totalTime}syncPlayerEvents(player){const p=this._player;p.triggerCallback&&player.onStart(()=>p.triggerCallback("start")),player.onDone(()=>this.finish()),player.onDestroy(()=>this.destroy())}_queueEvent(name,callback){getOrSetAsInMap(this._queuedCallbacks,name,[]).push(callback)}onDone(fn){this.queued&&this._queueEvent("done",fn),this._player.onDone(fn)}onStart(fn){this.queued&&this._queueEvent("start",fn),this._player.onStart(fn)}onDestroy(fn){this.queued&&this._queueEvent("destroy",fn),this._player.onDestroy(fn)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(p){this.queued||this._player.setPosition(p)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(phaseName){const p=this._player;p.triggerCallback&&p.triggerCallback(phaseName)}}function isElementNode(node){return node&&1===node.nodeType}function cloakElement(element,value){const oldValue=element.style.display;return element.style.display=null!=value?value:"none",oldValue}function cloakAndComputeStyles(valuesMap,driver,elements,elementPropsMap,defaultStyle){const cloakVals=[];elements.forEach(element=>cloakVals.push(cloakElement(element)));const failedElements=[];elementPropsMap.forEach((props,element)=>{const styles={};props.forEach(prop=>{const value=styles[prop]=driver.computeStyle(element,prop,defaultStyle);value&&0!=value.length||(element.__ng_removed=NULL_REMOVED_QUERIED_STATE,failedElements.push(element))}),valuesMap.set(element,styles)});let i=0;return elements.forEach(element=>cloakElement(element,cloakVals[i++])),failedElements}function buildRootMap(roots,nodes){const rootMap=new Map;if(roots.forEach(root=>rootMap.set(root,[])),0==nodes.length)return rootMap;const nodeSet=new Set(nodes),localRootMap=new Map;return nodes.forEach(node=>{const root=function getRoot(node){if(!node)return 1;let root=localRootMap.get(node);if(root)return root;const parent=node.parentNode;return root=rootMap.has(parent)?parent:nodeSet.has(parent)?1:getRoot(parent),localRootMap.set(node,root),root}(node);1!==root&&rootMap.get(root).push(node)}),rootMap}function browser_addClass(element,className){if(element.classList)element.classList.add(className);else{let classes=element.$$classes;classes||(classes=element.$$classes={}),classes[className]=!0}}function browser_removeClass(element,className){if(element.classList)element.classList.remove(className);else{let classes=element.$$classes;classes&&delete classes[className]}}function removeNodesAfterAnimationDone(engine,element,players){optimizeGroupPlayer(players).onDone(()=>engine.processLeaveNode(element))}function replacePostStylesAsPre(element,allPreStyleElements,allPostStyleElements){const postEntry=allPostStyleElements.get(element);if(!postEntry)return!1;let preEntry=allPreStyleElements.get(element);return preEntry?postEntry.forEach(data=>preEntry.add(data)):allPreStyleElements.set(element,postEntry),allPostStyleElements.delete(element),!0}class AnimationEngine{constructor(bodyNode,_driver,normalizer){this.bodyNode=bodyNode,this._driver=_driver,this._triggerCache={},this.onRemovalComplete=(element,context)=>{},this._transitionEngine=new browser_TransitionAnimationEngine(bodyNode,_driver,normalizer),this._timelineEngine=new browser_TimelineAnimationEngine(bodyNode,_driver,normalizer),this._transitionEngine.onRemovalComplete=(element,context)=>this.onRemovalComplete(element,context)}registerTrigger(componentId,namespaceId,hostElement,name,metadata){const cacheKey=componentId+"-"+name;let trigger=this._triggerCache[cacheKey];if(!trigger){const errors=[],ast=buildAnimationAst(this._driver,metadata,errors);if(errors.length)throw new Error(`The animation trigger "${name}" has failed to build due to the following errors:\n - ${errors.join("\n - ")}`);trigger=function(name,ast){return new AnimationTrigger(name,ast)}(name,ast),this._triggerCache[cacheKey]=trigger}this._transitionEngine.registerTrigger(namespaceId,name,trigger)}register(namespaceId,hostElement){this._transitionEngine.register(namespaceId,hostElement)}destroy(namespaceId,context){this._transitionEngine.destroy(namespaceId,context)}onInsert(namespaceId,element,parent,insertBefore){this._transitionEngine.insertNode(namespaceId,element,parent,insertBefore)}onRemove(namespaceId,element,context,isHostElement){this._transitionEngine.removeNode(namespaceId,element,isHostElement||!1,context)}disableAnimations(element,disable){this._transitionEngine.markElementAsDisabled(element,disable)}process(namespaceId,element,property,value){if("@"==property.charAt(0)){const[id,action]=parseTimelineCommand(property);this._timelineEngine.command(id,element,action,value)}else this._transitionEngine.trigger(namespaceId,element,property,value)}listen(namespaceId,element,eventName,eventPhase,callback){if("@"==eventName.charAt(0)){const[id,action]=parseTimelineCommand(eventName);return this._timelineEngine.listen(id,element,action,callback)}return this._transitionEngine.listen(namespaceId,element,eventName,eventPhase,callback)}flush(microtaskId=-1){this._transitionEngine.flush(microtaskId)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function packageNonAnimatableStyles(element,styles){let startStyles=null,endStyles=null;return Array.isArray(styles)&&styles.length?(startStyles=filterNonAnimatableStyles(styles[0]),styles.length>1&&(endStyles=filterNonAnimatableStyles(styles[styles.length-1]))):styles&&(startStyles=filterNonAnimatableStyles(styles)),startStyles||endStyles?new SpecialCasedStyles(element,startStyles,endStyles):null}let SpecialCasedStyles=(()=>{class SpecialCasedStyles{constructor(_element,_startStyles,_endStyles){this._element=_element,this._startStyles=_startStyles,this._endStyles=_endStyles,this._state=0;let initialStyles=SpecialCasedStyles.initialStylesByElement.get(_element);initialStyles||SpecialCasedStyles.initialStylesByElement.set(_element,initialStyles={}),this._initialStyles=initialStyles}start(){this._state<1&&(this._startStyles&&setStyles(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(setStyles(this._element,this._initialStyles),this._endStyles&&(setStyles(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(SpecialCasedStyles.initialStylesByElement.delete(this._element),this._startStyles&&(eraseStyles(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(eraseStyles(this._element,this._endStyles),this._endStyles=null),setStyles(this._element,this._initialStyles),this._state=3)}}return SpecialCasedStyles.initialStylesByElement=new WeakMap,SpecialCasedStyles})();function filterNonAnimatableStyles(styles){let result=null;const props=Object.keys(styles);for(let i=0;i<props.length;i++){const prop=props[i];isNonAnimatableStyle(prop)&&(result=result||{},result[prop]=styles[prop])}return result}function isNonAnimatableStyle(prop){return"display"===prop||"position"===prop}class ElementAnimationStyleHandler{constructor(_element,_name,_duration,_delay,_easing,_fillMode,_onDoneFn){this._element=_element,this._name=_name,this._duration=_duration,this._delay=_delay,this._easing=_easing,this._fillMode=_fillMode,this._onDoneFn=_onDoneFn,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(element,value){const anim=getAnimationStyle(element,"").trim();anim.length&&(function(value,char){let count=0;for(let i=0;i<value.length;i++)","===value.charAt(i)&&count++}(anim),value=`${anim}, ${value}`),setAnimationStyle(element,"",value)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),addRemoveAnimationEvent(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){playPauseAnimation(this._element,this._name,"paused")}resume(){playPauseAnimation(this._element,this._name,"running")}setPosition(position){const index=findIndexForAnimation(this._element,this._name);this._position=position*this._duration,setAnimationStyle(this._element,"Delay",`-${this._position}ms`,index)}getPosition(){return this._position}_handleCallback(event){const timestamp=event._ngTestManualTimestamp||Date.now(),elapsedTime=1e3*parseFloat(event.elapsedTime.toFixed(3));event.animationName==this._name&&Math.max(timestamp-this._startTime,0)>=this._delay&&elapsedTime>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),addRemoveAnimationEvent(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(element,name){const tokens=getAnimationStyle(element,"").split(","),index=findMatchingTokenIndex(tokens,name);index>=0&&(tokens.splice(index,1),setAnimationStyle(element,"",tokens.join(",")))}(this._element,this._name))}}function playPauseAnimation(element,name,status){setAnimationStyle(element,"PlayState",status,findIndexForAnimation(element,name))}function findIndexForAnimation(element,value){const anim=getAnimationStyle(element,"");return anim.indexOf(",")>0?findMatchingTokenIndex(anim.split(","),value):findMatchingTokenIndex([anim],value)}function findMatchingTokenIndex(tokens,searchToken){for(let i=0;i<tokens.length;i++)if(tokens[i].indexOf(searchToken)>=0)return i;return-1}function addRemoveAnimationEvent(element,fn,doRemove){doRemove?element.removeEventListener("animationend",fn):element.addEventListener("animationend",fn)}function setAnimationStyle(element,name,value,index){const prop="animation"+name;if(null!=index){const oldValue=element.style[prop];if(oldValue.length){const tokens=oldValue.split(",");tokens[index]=value,value=tokens.join(",")}}element.style[prop]=value}function getAnimationStyle(element,name){return element.style["animation"+name]}class CssKeyframesPlayer{constructor(element,keyframes,animationName,_duration,_delay,easing,_finalStyles,_specialStyles){this.element=element,this.keyframes=keyframes,this.animationName=animationName,this._duration=_duration,this._delay=_delay,this._finalStyles=_finalStyles,this._specialStyles=_specialStyles,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=easing||"linear",this.totalTime=_duration+_delay,this._buildStyler()}onStart(fn){this._onStartFns.push(fn)}onDone(fn){this._onDoneFns.push(fn)}onDestroy(fn){this._onDestroyFns.push(fn)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(fn=>fn()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(fn=>fn()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(fn=>fn()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(value){this._styler.setPosition(value)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new ElementAnimationStyleHandler(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(phaseName){const methods="start"==phaseName?this._onStartFns:this._onDoneFns;methods.forEach(fn=>fn()),methods.length=0}beforeDestroy(){this.init();const styles={};if(this.hasStarted()){const finished=this._state>=3;Object.keys(this._finalStyles).forEach(prop=>{"offset"!=prop&&(styles[prop]=finished?this._finalStyles[prop]:computeStyle(this.element,prop))})}this.currentSnapshot=styles}}class browser_DirectStylePlayer extends NoopAnimationPlayer{constructor(element,styles){super(),this.element=element,this._startingStyles={},this.__initialized=!1,this._styles=hypenatePropsObject(styles)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(prop=>{this._startingStyles[prop]=this.element.style[prop]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(prop=>this.element.style.setProperty(prop,this._styles[prop])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(prop=>{const value=this._startingStyles[prop];value?this.element.style.setProperty(prop,value):this.element.style.removeProperty(prop)}),this._startingStyles=null,super.destroy())}}class CssKeyframesDriver{constructor(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}validateStyleProperty(prop){return validateStyleProperty(prop)}matchesElement(element,selector){return matchesElement(element,selector)}containsElement(elm1,elm2){return containsElement(elm1,elm2)}query(element,selector,multi){return invokeQuery(element,selector,multi)}computeStyle(element,prop,defaultValue){return window.getComputedStyle(element)[prop]}buildKeyframeElement(element,name,keyframes){keyframes=keyframes.map(kf=>hypenatePropsObject(kf));let keyframeStr=`@keyframes ${name} {\n`,tab="";keyframes.forEach(kf=>{tab=" ";const offset=parseFloat(kf.offset);keyframeStr+=`${tab}${100*offset}% {\n`,tab+=" ",Object.keys(kf).forEach(prop=>{const value=kf[prop];switch(prop){case"offset":return;case"easing":return void(value&&(keyframeStr+=`${tab}animation-timing-function: ${value};\n`));default:return void(keyframeStr+=`${tab}${prop}: ${value};\n`)}}),keyframeStr+=tab+"}\n"}),keyframeStr+="}\n";const kfElm=document.createElement("style");return kfElm.innerHTML=keyframeStr,kfElm}animate(element,keyframes,duration,delay,easing,previousPlayers=[],scrubberAccessRequested){scrubberAccessRequested&&this._notifyFaultyScrubber();const previousCssKeyframePlayers=previousPlayers.filter(player=>player instanceof CssKeyframesPlayer),previousStyles={};allowPreviousPlayerStylesMerge(duration,delay)&&previousCssKeyframePlayers.forEach(player=>{let styles=player.currentSnapshot;Object.keys(styles).forEach(prop=>previousStyles[prop]=styles[prop])});const finalStyles=function(keyframes){let flatKeyframes={};return keyframes&&(Array.isArray(keyframes)?keyframes:[keyframes]).forEach(kf=>{Object.keys(kf).forEach(prop=>{"offset"!=prop&&"easing"!=prop&&(flatKeyframes[prop]=kf[prop])})}),flatKeyframes}(keyframes=balancePreviousStylesIntoKeyframes(element,keyframes,previousStyles));if(0==duration)return new browser_DirectStylePlayer(element,finalStyles);const animationName="gen_css_kf_"+this._count++,kfElm=this.buildKeyframeElement(element,animationName,keyframes);document.querySelector("head").appendChild(kfElm);const specialStyles=packageNonAnimatableStyles(element,keyframes),player=new CssKeyframesPlayer(element,keyframes,animationName,duration,delay,easing,finalStyles,specialStyles);return player.onDestroy(()=>{var node;(node=kfElm).parentNode.removeChild(node)}),player}_notifyFaultyScrubber(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)}}class WebAnimationsPlayer{constructor(element,keyframes,options,_specialStyles){this.element=element,this.keyframes=keyframes,this.options=options,this._specialStyles=_specialStyles,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=options.duration,this._delay=options.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(fn=>fn()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const keyframes=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,keyframes,this.options),this._finalKeyframe=keyframes.length?keyframes[keyframes.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(element,keyframes,options){return element.animate(keyframes,options)}onStart(fn){this._onStartFns.push(fn)}onDone(fn){this._onDoneFns.push(fn)}onDestroy(fn){this._onDestroyFns.push(fn)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(fn=>fn()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(fn=>fn()),this._onDestroyFns=[])}setPosition(p){this.domPlayer.currentTime=p*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const styles={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(prop=>{"offset"!=prop&&(styles[prop]=this._finished?this._finalKeyframe[prop]:computeStyle(this.element,prop))}),this.currentSnapshot=styles}triggerCallback(phaseName){const methods="start"==phaseName?this._onStartFns:this._onDoneFns;methods.forEach(fn=>fn()),methods.length=0}}class WebAnimationsDriver{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(getElementAnimateFn().toString()),this._cssKeyframesDriver=new CssKeyframesDriver}validateStyleProperty(prop){return validateStyleProperty(prop)}matchesElement(element,selector){return matchesElement(element,selector)}containsElement(elm1,elm2){return containsElement(elm1,elm2)}query(element,selector,multi){return invokeQuery(element,selector,multi)}computeStyle(element,prop,defaultValue){return window.getComputedStyle(element)[prop]}overrideWebAnimationsSupport(supported){this._isNativeImpl=supported}animate(element,keyframes,duration,delay,easing,previousPlayers=[],scrubberAccessRequested){if(!scrubberAccessRequested&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(element,keyframes,duration,delay,easing,previousPlayers);const playerOptions={duration:duration,delay:delay,fill:0==delay?"both":"forwards"};easing&&(playerOptions.easing=easing);const previousStyles={},previousWebAnimationPlayers=previousPlayers.filter(player=>player instanceof WebAnimationsPlayer);allowPreviousPlayerStylesMerge(duration,delay)&&previousWebAnimationPlayers.forEach(player=>{let styles=player.currentSnapshot;Object.keys(styles).forEach(prop=>previousStyles[prop]=styles[prop])});const specialStyles=packageNonAnimatableStyles(element,keyframes=balancePreviousStylesIntoKeyframes(element,keyframes=keyframes.map(styles=>copyStyles(styles,!1)),previousStyles));return new WebAnimationsPlayer(element,keyframes,playerOptions,specialStyles)}}function getElementAnimateFn(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}let animations_BrowserAnimationBuilder=(()=>{class BrowserAnimationBuilder extends AnimationBuilder{constructor(rootRenderer,doc){super(),this._nextAnimationId=0,this._renderer=rootRenderer.createRenderer(doc.body,{id:"0",encapsulation:ViewEncapsulation$1.None,styles:[],data:{animation:[]}})}build(animation){const id=this._nextAnimationId.toString();this._nextAnimationId++;const entry=Array.isArray(animation)?sequence(animation):animation;return issueAnimationCommand(this._renderer,null,id,"register",[entry]),new animations_BrowserAnimationFactory(id,this._renderer)}}return BrowserAnimationBuilder.fac=function(t){return new(t||BrowserAnimationBuilder)(inject(RendererFactory2),inject(common_DOCUMENT))},BrowserAnimationBuilder.prov=defineInjectable({token:BrowserAnimationBuilder,factory:BrowserAnimationBuilder.fac}),BrowserAnimationBuilder})();class animations_BrowserAnimationFactory extends class{}{constructor(_id,_renderer){super(),this._id=_id,this._renderer=_renderer}create(element,options){return new RendererAnimationPlayer(this._id,element,options||{},this._renderer)}}class RendererAnimationPlayer{constructor(id,element,options,_renderer){this.id=id,this.element=element,this._renderer=_renderer,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",options)}_listen(eventName,callback){return this._renderer.listen(this.element,`@@${this.id}:${eventName}`,callback)}_command(command,...args){return issueAnimationCommand(this._renderer,this.element,this.id,command,args)}onDone(fn){this._listen("done",fn)}onStart(fn){this._listen("start",fn)}onDestroy(fn){this._listen("destroy",fn)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset")}setPosition(p){this._command("setPosition",p)}getPosition(){return 0}}function issueAnimationCommand(renderer,element,id,command,args){return renderer.setProperty(element,`@@${id}:${command}`,args)}let animations_AnimationRendererFactory=(()=>{class AnimationRendererFactory{constructor(delegate,engine,_zone){this.delegate=delegate,this.engine=engine,this._zone=_zone,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),engine.onRemovalComplete=(element,delegate)=>{delegate&&delegate.parentNode(element)&&delegate.removeChild(element.parentNode,element)}}createRenderer(hostElement,type){const delegate=this.delegate.createRenderer(hostElement,type);if(!(hostElement&&type&&type.data&&type.data.animation)){let renderer=this._rendererCache.get(delegate);return renderer||(renderer=new BaseAnimationRenderer("",delegate,this.engine),this._rendererCache.set(delegate,renderer)),renderer}const componentId=type.id,namespaceId=type.id+"-"+this._currentId;this._currentId++,this.engine.register(namespaceId,hostElement);const registerTrigger=trigger=>{Array.isArray(trigger)?trigger.forEach(registerTrigger):this.engine.registerTrigger(componentId,namespaceId,hostElement,trigger.name,trigger)};return type.data.animation.forEach(registerTrigger),new AnimationRenderer(this,namespaceId,delegate,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(count,fn,data){count>=0&&count<this._microtaskId?this._zone.run(()=>fn(data)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(tuple=>{const[fn,data]=tuple;fn(data)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([fn,data]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return AnimationRendererFactory.fac=function(t){return new(t||AnimationRendererFactory)(inject(RendererFactory2),inject(AnimationEngine),inject(NgZone))},AnimationRendererFactory.prov=defineInjectable({token:AnimationRendererFactory,factory:AnimationRendererFactory.fac}),AnimationRendererFactory})();class BaseAnimationRenderer{constructor(namespaceId,delegate,engine){this.namespaceId=namespaceId,this.delegate=delegate,this.engine=engine,this.destroyNode=this.delegate.destroyNode?n=>delegate.destroyNode(n):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(name,namespace){return this.delegate.createElement(name,namespace)}createComment(value){return this.delegate.createComment(value)}createText(value){return this.delegate.createText(value)}appendChild(parent,newChild){this.delegate.appendChild(parent,newChild),this.engine.onInsert(this.namespaceId,newChild,parent,!1)}insertBefore(parent,newChild,refChild){this.delegate.insertBefore(parent,newChild,refChild),this.engine.onInsert(this.namespaceId,newChild,parent,!0)}removeChild(parent,oldChild,isHostElement){this.engine.onRemove(this.namespaceId,oldChild,this.delegate,isHostElement)}selectRootElement(selectorOrNode,preserveContent){return this.delegate.selectRootElement(selectorOrNode,preserveContent)}parentNode(node){return this.delegate.parentNode(node)}nextSibling(node){return this.delegate.nextSibling(node)}setAttribute(el,name,value,namespace){this.delegate.setAttribute(el,name,value,namespace)}removeAttribute(el,name,namespace){this.delegate.removeAttribute(el,name,namespace)}addClass(el,name){this.delegate.addClass(el,name)}removeClass(el,name){this.delegate.removeClass(el,name)}setStyle(el,style,value,flags){this.delegate.setStyle(el,style,value,flags)}removeStyle(el,style,flags){this.delegate.removeStyle(el,style,flags)}setProperty(el,name,value){"@"==name.charAt(0)&&"@.disabled"==name?this.disableAnimations(el,!!value):this.delegate.setProperty(el,name,value)}setValue(node,value){this.delegate.setValue(node,value)}listen(target,eventName,callback){return this.delegate.listen(target,eventName,callback)}disableAnimations(element,value){this.engine.disableAnimations(element,value)}}class AnimationRenderer extends BaseAnimationRenderer{constructor(factory,namespaceId,delegate,engine){super(namespaceId,delegate,engine),this.factory=factory,this.namespaceId=namespaceId}setProperty(el,name,value){"@"==name.charAt(0)?"."==name.charAt(1)&&"@.disabled"==name?this.disableAnimations(el,value=void 0===value||!!value):this.engine.process(this.namespaceId,el,name.substr(1),value):this.delegate.setProperty(el,name,value)}listen(target,eventName,callback){if("@"==eventName.charAt(0)){const element=function(target){switch(target){case"body":return document.body;case"document":return document;case"window":return window;default:return target}}(target);let name=eventName.substr(1),phase="";return"@"!=name.charAt(0)&&([name,phase]=function(triggerName){const dotIndex=triggerName.indexOf(".");return[triggerName.substring(0,dotIndex),triggerName.substr(dotIndex+1)]}(name)),this.engine.listen(this.namespaceId,element,name,phase,event=>{this.factory.scheduleListenerCallback(event._data||-1,callback,event)})}return this.delegate.listen(target,eventName,callback)}}let animations_InjectableAnimationEngine=(()=>{class InjectableAnimationEngine extends AnimationEngine{constructor(doc,driver,normalizer){super(doc.body,driver,normalizer)}}return InjectableAnimationEngine.fac=function(t){return new(t||InjectableAnimationEngine)(inject(common_DOCUMENT),inject(AnimationDriver),inject(AnimationStyleNormalizer))},InjectableAnimationEngine.prov=defineInjectable({token:InjectableAnimationEngine,factory:InjectableAnimationEngine.fac}),InjectableAnimationEngine})();const BROWSER_ANIMATIONS_PROVIDERS=[{provide:AnimationDriver,useFactory:function(){return"function"==typeof getElementAnimateFn()?new WebAnimationsDriver:new CssKeyframesDriver}},{provide:new InjectionToken("AnimationModuleType"),useValue:"BrowserAnimations"},{provide:AnimationBuilder,useClass:animations_BrowserAnimationBuilder},{provide:AnimationStyleNormalizer,useFactory:function(){return new WebAnimationsStyleNormalizer}},{provide:AnimationEngine,useClass:animations_InjectableAnimationEngine},{provide:RendererFactory2,useFactory:function(renderer,engine,zone){return new animations_AnimationRendererFactory(renderer,engine,zone)},deps:[platform_browser_DomRendererFactory2,AnimationEngine,NgZone]}];let animations_BrowserAnimationsModule=(()=>{class BrowserAnimationsModule{}return BrowserAnimationsModule.mod=defineNgModule({type:BrowserAnimationsModule}),BrowserAnimationsModule.inj=defineInjector({factory:function(t){return new(t||BrowserAnimationsModule)},providers:BROWSER_ANIMATIONS_PROVIDERS,imports:[platform_browser_BrowserModule]}),BrowserAnimationsModule})();__webpack_require__("MEpN"),__webpack_require__("UxO+"),__webpack_require__("CsC6");const listsTypes={orderedList:"ordered_list",bulletList:"bullet_list",listItem:"list_item"};Object.assign({},listsTypes),Object.assign({},listsTypes),Object.assign({},listsTypes),Object.assign({},listsTypes),__webpack_require__("ABBN");const align_rules_style=(name,value)=>({name:name,value:value});align_rules_style("text-align","left"),align_rules_style("text-align","left"),align_rules_style("text-align","left"),align_rules_style("list-style-position","inside"),align_rules_style("text-align","right"),align_rules_style("text-align","right"),align_rules_style("text-align","right"),align_rules_style("list-style-position","inside"),align_rules_style("text-align","center"),align_rules_style("text-align","center"),align_rules_style("text-align","center"),align_rules_style("list-style-position","inside"),align_rules_style("text-align","justify"),align_rules_style("text-align","justify"),align_rules_style("text-align","justify"),align_rules_style("list-style-position","justify"),align_rules_style("text-align",""),align_rules_style("text-align",""),align_rules_style("text-align",""),align_rules_style("list-style-position","");var prosemirror_tables_dist_index_es=__webpack_require__("Vb5C");const blockquoteDOM=["blockquote",0],hrDOM=["hr"],preDOM=["pre",["code",0]],schema_olDOM=["ol",0],schema_ulDOM=["ul",0],schema_liDOM=["li",0],getAttributes=dom=>{const result={};let attr,attributes=dom.attributes;for(let i=0;i<attributes.length;i++)attr=attributes[i],result[attr.name]=attr.value;return result},hasAttrs=(attrs,exclude)=>{for(let attr in attrs)if(attr&&null!==attrs[attr]&&attr!==exclude)return!0;return!1},schema_getAttrs=(attrs,exclude)=>{const result={};for(let attr in attrs)attr&&null!==attrs[attr]&&attr!==exclude&&(result[attr]=attrs[attr]);return result},tagMark=tag=>({[tag]:{name:tag,inclusive:!0,parseDOM:[{tag:tag}],toDOM:()=>[tag,0]}});Object.assign({link:{attrs:Object.assign({},{style:{default:null},class:{default:null},id:{default:null}},{href:{default:null},target:{default:null},title:{default:null}}),inclusive:!1,parseDOM:[{tag:"a",getAttrs:getAttributes}],toDOM:node=>["a",schema_getAttrs(node.attrs),0]}},tagMark("strong"),tagMark("b"),tagMark("em"),tagMark("i"),tagMark("u"),tagMark("del"),tagMark("sub"),tagMark("sup"),tagMark("code"),{style:{attrs:Object.assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"span",getAttrs:getAttributes}],toDOM:node=>hasAttrs(node.attrs)?["span",schema_getAttrs(node.attrs),0]:["span",0]}}),Object.assign({doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:Object.assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"p",getAttrs:getAttributes}],toDOM:node=>hasAttrs(node.attrs)?["p",schema_getAttrs(node.attrs),0]:["p",0]},div:{content:"block*",group:"block",attrs:Object.assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"div",getAttrs:getAttributes}],toDOM:node=>hasAttrs(node.attrs)?["div",schema_getAttrs(node.attrs),0]:["div",0]},blockquote:{attrs:Object.assign({},{style:{default:null},class:{default:null},id:{default:null}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>blockquoteDOM},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>hrDOM},heading:{attrs:Object.assign({},{style:{default:null},class:{default:null},id:{default:null}},{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:node=>Object.assign({},getAttributes(node),{level:1})},{tag:"h2",getAttrs:node=>Object.assign({},getAttributes(node),{level:2})},{tag:"h3",getAttrs:node=>Object.assign({},getAttributes(node),{level:3})},{tag:"h4",getAttrs:node=>Object.assign({},getAttributes(node),{level:4})},{tag:"h5",getAttrs:node=>Object.assign({},getAttributes(node),{level:5})},{tag:"h6",getAttrs:node=>Object.assign({},getAttributes(node),{level:6})}],toDOM:node=>hasAttrs(node.attrs,"level")?["h"+node.attrs.level,schema_getAttrs(node.attrs,"level"),0]:["h"+node.attrs.level,0]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>preDOM},text:{inline:!0,group:"inline"},image:{inline:!0,attrs:Object.assign({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},{style:{default:null},class:{default:null},id:{default:null}}),group:"inline",draggable:!0,parseDOM:[{tag:"img",getAttrs:getAttributes}],toDOM:node=>hasAttrs(node.attrs)?["img",schema_getAttrs(node.attrs)]:["img"]},hard_break:{inline:!0,attrs:Object.assign({},{style:{default:null},class:{default:null},id:{default:null}}),group:"inline",selectable:!1,parseDOM:[{tag:"br",getAttrs:getAttributes}],toDOM:node=>hasAttrs(node.attrs)?["br",schema_getAttrs(node.attrs)]:["br"]},ordered_list:{content:"list_item+",group:"block",attrs:Object.assign({},{style:{default:null},class:{default:null},id:{default:null}},{type:{default:null},order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:dom=>Object.assign({},getAttributes(dom),{order:dom.hasAttribute("start")?parseInt(dom.getAttribute("start")||"1",10):1})}],toDOM:node=>1===node.attrs.order?hasAttrs(node.attrs,"order")?["ol",schema_getAttrs(node.attrs,"order"),0]:schema_olDOM:["ol",Object.assign({},schema_getAttrs(node.attrs,"order"),{start:node.attrs.order}),0]},bullet_list:{content:"list_item+",group:"block",attrs:Object.assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"ul",getAttrs:getAttributes}],toDOM:node=>hasAttrs(node.attrs)?["ul",schema_getAttrs(node.attrs),0]:schema_ulDOM},list_item:{content:"block*",attrs:Object.assign({},{style:{default:null},class:{default:null},id:{default:null}}),parseDOM:[{tag:"li",getAttrs:getAttributes}],toDOM:node=>hasAttrs(node.attrs)?["li",schema_getAttrs(node.attrs),0]:schema_liDOM,defining:!0}},Object(prosemirror_tables_dist_index_es.tableNodes)({tableGroup:"block",cellContent:"block+",cellAttributes:{}})),__webpack_require__("hyZr");var InputRule=function(match,handler){var string;this.match=match,this.handler="string"==typeof handler?(string=handler,function(state,match,start,end){var insert=string;if(match[1]){var offset=match[0].lastIndexOf(match[1]);insert+=match[0].slice(offset+match[1].length);var cutOff=(start+=offset)-end;cutOff>0&&(insert=match[0].slice(offset-cutOff,offset)+insert,start=end)}return state.tr.insertText(insert,start,end)}):handler};new InputRule(/--$/,""),new InputRule(/\.\.\.$/,""),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new InputRule(/"$/,""),new InputRule(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new InputRule(/'$/,""),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform),__webpack_require__("W8i8"),__webpack_require__("fScX"),__webpack_require__("ahru"),__webpack_require__("FKDQ"),__webpack_require__("G7Ki"),__webpack_require__("XNSO"),__webpack_require__("3FVc"),$localize`:kendo.editor.alignCenter|The title of the tool that aligns text in the center.c19b9de1395639d8d6906083e06a682537d548b84529292660735098393:Center text`,$localize`:kendo.editor.alignJustify|The title of the tool that justifies text both left and right.6fd8af3052680f0e8af558f02aafbdae846763ad4684700365643535728:Justify`,$localize`:kendo.editor.alignLeft|The title of the tool that aligns text on the left.0e6294e25d0445bf78814703fc3db0f9275cdfaf154382826604788564:Align text left`,$localize`:kendo.editor.alignRight|The title of the tool that aligns text on the right.e42635af2f5e2255fe4e5e4259139bed6771d5b0947503876024297122:Align text right`,$localize`:kendo.editor.backColor|The title of the tool that changes the text background color.94feffd30b062ee0ef8aac49af5faebc986b79ee6855434377775366481:Background color`,$localize`:kendo.editor.bold|The title of the tool that makes text bold.e1a1b567ad44320e7949153f90b735a000e0dd542189266817166266173:Bold`,$localize`:kendo.editor.cleanFormatting|The title of the Clean Formatting tool.6ee3ea0c48aeb94e9ed4b728391edc424c5b2b906409775087646476318:Clean formatting`,$localize`:kendo.editor.createLink|The title of the tool that creates hyperlinks.a0857ff55fd21727d74e873d164f6785c4a1d2a42895696791468415067:Insert link`,$localize`:kendo.editor.dialogApply|The label of the **Apply** button in all editor dialogs.0205d0783c43657539254c5d8cd37d4a88911f1d3478270206890847719:Apply`,$localize`:kendo.editor.dialogCancel|The label of the **Cancel** button in all editor dialogs.62c847eb7dfe44fa70224659b77a69e04ad24e981436637880389464255:Cancel`,$localize`:kendo.editor.dialogInsert|The label of the **Insert** button in all editor dialogs.e2897c2d92e5b0f60dbc34568ea63ee29aac72b11902538342017591848:Insert`,$localize`:kendo.editor.dialogUpdate|The label of the **Update** button in all editor dialogs.da599b240288c66d5682ecf53647fae17b1f255d3131813297607973618:Update`,$localize`:kendo.editor.fileText|The caption for the file text in the insertFile dialog.b9e9c0726907339811d576fbecf9ee7ef25228dd2994440335095238335:Text`,$localize`:kendo.editor.fileTitle|The caption for the file Title in the insertFile dialog.773650e91245315dd99ba76678b651035d8964492270852727137392864:Title`,$localize`:kendo.editor.fileWebAddress|The caption for the file URL in the insertFile dialog.920e262f27d93e37174869fe53fbda129edd6220272090133902355251:Web address`,$localize`:kendo.editor.fontFamily|The title of the tool that changes the text font.b3c7dd6b566ab94cbad12176f608f617394069a52242101754750506857:Select font family`,$localize`:kendo.editor.fontSize|The title of the tool that changes the text size.1e36b676782998a979c662191a815b60e212b1e43134383620280891369:Select font size`,$localize`:kendo.editor.foreColor|The title of the tool that changes the text color.6b7246584279a0e44d9bd9cb953a0c701696d0595478978124365341523:Color`,$localize`:kendo.editor.format|The title of the tool that lets users choose block formats.27423769f36c1e1662739fe78b0a29f8449ca2ed7573626268088286043:Format`,$localize`:kendo.editor.imageAltText|The caption for the image alternate text in the insertImage dialog.588c2538a305890410558065bbb376099873f0592605419586703055723:Alternate text`,$localize`:kendo.editor.imageHeight|The caption for the image height in the insertImage dialog.1f22b7da203eebe3e1efd22cc86aa9b990b0c16f7389256657313538937:Height (px)`,$localize`:kendo.editor.imageWebAddress|The caption for the image URL in the insertImage dialog.31537a903057886e7fb1a79cd5cde73a649a8ed66975958345731927150:Web address`,$localize`:kendo.editor.imageWidth|The caption for the image width in the insertImage dialog.4f26f47317f5b69c192fbc9cafecb432e8fa8ee58309100232203036921:Width (px)`,$localize`:kendo.editor.indent|The title of the tool that indents the content.332319db3aabf32cd56e64e1569276c5f878fd5d5647108364628468094:Indent`,$localize`:kendo.editor.insertFile|The title of the tool that inserts links to files.f57591626833e959e88b177754c2e996119a3c1a539957110154874519:Insert file`,$localize`:kendo.editor.insertImage|The title of the tool that inserts images.759c8463401821450bfa80fd9106314adab25ca33091202802113261385:Insert image`,$localize`:kendo.editor.insertOrderedList|The title of the tool that inserts an ordered list.9de4d5df2c52ec20dda585ddf9046b64042a63dc4334727692818265844:Insert ordered list`,$localize`:kendo.editor.insertUnorderedList|The title of the tool that inserts an unordered list.2c56625f542e63a0fcb2cdfff32ac7958a7731316391583758449842507:Insert unordered list`,$localize`:kendo.editor.italic|The title of the tool that makes text italicized.0c2f657b2d63906813f0d999c34639d6703d29fe7054357458452689543:Italic`,$localize`:kendo.editor.linkOpenInNewWindow|The caption for the checkbox for opening the link in a new window in the createLink
                dialog.7ddbe5ff681ec56e0a1d47f55baf03aae43143f06304412528521452300:Open link in new window`,$localize`:kendo.editor.linkText|The caption for the link text in the createLink dialog.bc5096e9fa3fd49769d041a4734d5d5d8e6fd0e98060045722754477150:Text`,$localize`:kendo.editor.linkTitle|The caption for the link title in the createLink dialog.e5c8208c08928222b713afcf80de78633236349d330780229810449102:Title`,$localize`:kendo.editor.linkWebAddress|The caption for the URL in the createLink dialog.19f853c2933a9a1b71d96accf814e4f9e9e6e8dd6362180643798508446:Web address`,$localize`:kendo.editor.outdent|The title of the tool that outdents the content.33a49dc9bce8c37c9c957a6cdb7fcd0b82b8bf588474960686200350213:Outdent`,$localize`:kendo.editor.redo|The title of the tool that undos the last action.117c237ef9fa6ff04fb4447fc233fe846ed366c16526989398460728046:Redo`,$localize`:kendo.editor.strikethrough|The title of the tool that strikes through text.6e38a1450b5d50601f44a665fbb329feca31e97b2488604920377820272:Strikethrough`,$localize`:kendo.editor.subscript|The title of the tool that makes text subscript.2bd31b9317a43ee8fb808b0c254b1bb200f908fa7270994954007735302:Subscript`,$localize`:kendo.editor.superscript|The title of the tool that makes text superscript.825050144d6680f962bf7ec296c42e08e6ac09d97596297815131300603:Superscript`,$localize`:kendo.editor.underline|The title of the tool that underlines text.67eb1cff18f5e9a2e7d47aae052c666583bab2618473045911658532041:Underline`,$localize`:kendo.editor.unlink|The title of the tool that removes hyperlinks.ad3a3c5c713542df87373b77cae8a124edb29c221024469129593792947:Remove Link`,$localize`:kendo.editor.undo|The title of the tool that undos the last action.18b488b145eeea939eecd65716bc3578939dcc0f3987002812814489417:Undo`,$localize`:kendo.editor.viewSource|The title of the tool that shows the editor value as HTML.3caea7fc81a53a3e225561af33a56902f642ac263825180996241734650:View source`,$localize`:kendo.editor.insertTable|The title of the tool that inserts table.32de5e66d4b2073bded7114d8a1ea1411cd7ceec5261534950694067764:Insert Table`,$localize`:kendo.editor.addColumnBefore|The title of the tool that adds new column before currently selected column.66c68280830690c0ebd374fd34dead01df2e70572967496815045471366:Add column before`,$localize`:kendo.editor.addColumnAfter|The title of the tool that adds new column after currently selected column.24d531a9e3507a6ad02bff394c5030a25a731d661046762424668985150:Add column after`,$localize`:kendo.editor.addRowBefore|The title of the tool that adds new row before currently selected row.c42641b164ae5711cb01b88bcde664031cc230bf5531388093960518917:Add row before`,$localize`:kendo.editor.addRowAfter|The title of the tool that adds new row after currently selected row.c852853beee80e68e673421fd4bc57fa49d417d96647582145372406524:Add row after`,$localize`:kendo.editor.deleteColumn|The title of the tool that deletes a table column.233fbf121ca8b9ea127211a83ab72f0daf01593a7009319757848972360:Delete column`,$localize`:kendo.editor.deleteRow|The title of the tool that deletes a table row.a7bf50c04d3769d4bde61bab60e6aaa0e982a4888410650025259601548:Delete row`,$localize`:kendo.editor.deleteTable|The title of the tool that deletes a table.2694410604d01084a49e5225a60fbe3eda3af5cc3609415533235721295:Delete table`;let fesm2015_EditorModule=(()=>{class EditorModule{}return EditorModule.mod=defineNgModule({type:EditorModule}),EditorModule.inj=defineInjector({factory:function(t){return new(t||EditorModule)},imports:[[common_CommonModule,forms_FormsModule,forms_ReactiveFormsModule,fesm2015_ButtonModule,fesm2015_ColorPickerModule,fesm2015_DialogModule,fesm2015_DropDownsModule,fesm2015_NumericTextBoxModule,fesm2015_ToolBarModule,fesm2015_TextBoxModule],fesm2015_ToolBarModule,fesm2015_ButtonModule,forms_FormsModule,forms_ReactiveFormsModule]}),EditorModule})(),app_module_AppModule=(()=>{class AppModule{}return AppModule.mod=defineNgModule({type:AppModule,bootstrap:[app_component_AppComponent]}),AppModule.inj=defineInjector({factory:function(t){return new(t||AppModule)},providers:[],imports:[[platform_browser_BrowserModule,app_routing_module_AppRoutingModule,fesm2015_ButtonsModule,animations_BrowserAnimationsModule,fesm2015_ToolBarModule,fesm2015_DialogsModule,fesm2015_GridModule,fesm2015_ContextMenuModule,fesm2015_EditorModule,ng_stack_contenteditable_ContenteditableModule,forms_FormsModule,fesm2015_InputsModule,fesm2015_DropDownsModule,fesm2015_NotificationModule]]}),AppModule})();(function(){if(_runModeLocked)throw new Error("Cannot enable prod mode after platform setup.");_devMode=!1})(),platformBrowser().bootstrapModule(app_module_AppModule).catch(err=>console.error(err))},zn8P:function(module,exports){function webpackEmptyAsyncContext(req){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}))}webpackEmptyAsyncContext.keys=function(){return[]},webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,module.exports=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id="zn8P"}},[[0,0]]]);